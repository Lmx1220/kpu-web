
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as B,Q as N,r as F,$ as n,o as q,a as A,b as a,N as i,e,i as t,R as D,S as h,U as S,w as s,A as k,T as $,v as U,y as j,M as c,V as Q,p as E,W as G}from"./bootstrap-CFLGDgEx.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CsIC7EZe.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-0nT46qo5.js";import{u as W,t as X,o as Z,s as V,b as H,_ as v,a as b,c as T,F as x}from"./vee-validate-zod-BvJOc6xy.js";const J={class:"min-h-500px w-full flex-col-stretch-center p-12"},Y={class:"mb-6 space-y-2"},ee={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},te={class:"mb-4"},oe={class:"mb-4 flex-center-between"},se={class:"flex-center-start"},ae={class:"mt-4 flex-center gap-2 text-sm"},ne={class:"text-secondary-foreground op-50"},le={class:"mt-4 text-center -mb-4"},ie={class:"space-x-2"},re={class:"flex-col-center"},ce={class:"mt-2 text-sm text-secondary-foreground op-50"},ue="kpu-web",fe=B({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(C,{emit:R}){const I=C,p=R,L=N(),_=F(!1),u=F("default"),m=W({validationSchema:X(Z({account:V().min(1,n("loginFrom.rules.account")),password:V().min(1,n("loginFrom.rules.password")),remember:H()})),initialValues:{account:I.account??localStorage.getItem("login_account")??"",password:"",remember:!!localStorage.getItem("login_account")}}),f=m.handleSubmit(r=>{_.value=!0,L.login({username:r.account,password:r.password}).then(()=>{r.remember?localStorage.setItem("login_account",r.account):localStorage.removeItem("login_account"),p("onLogin",r.account)}).finally(()=>{_.value=!1})});function y(r){m.setFieldValue("account",r),m.setFieldValue("password","123456"),f()}return(r,o)=>{const K=O,w=Q,P=M,d=E,z=G;return q(),A("div",J,[a("div",Y,[a("h3",ee,i(e(n)("loginFrom.intro")),1),a("p",{class:"text-sm text-muted-foreground lg:text-base"},i(ue))]),a("div",te,[t(K,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=l=>D(u)?u.value=l:null),list:[{label:e(n)("loginFrom.accountLogin"),value:"default"},{label:e(n)("loginFrom.qrcodeLogin"),value:"qrcode"}],class:"inline-flex"},null,8,["modelValue","list"])]),h(a("div",null,[a("form",{onSubmit:o[3]||(o[3]=(...l)=>e(f)&&e(f)(...l))},[t(e(x),{name:"account"},{default:s(({componentField:l,errors:g})=>[t(e(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(b),null,{default:s(()=>[t(w,k({type:"text",placeholder:e(n)("loginFrom.form.account"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),t($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(T),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(x),{name:"password"},{default:s(({componentField:l,errors:g})=>[t(e(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(b),null,{default:s(()=>[t(w,k({type:"password",placeholder:e(n)("loginFrom.form.password"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),t($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(T),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),a("div",oe,[a("div",se,[t(e(x),{type:"checkbox",name:"remember"},{default:s(({componentField:l})=>[t(e(v),null,{default:s(()=>[t(e(b),null,{default:s(()=>[t(P,U(j(l)),{default:s(()=>[c(i(e(n)("loginFrom.remember")),1)]),_:2},1040)]),_:2},1024)]),_:2},1024)]),_:1})]),t(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[1]||(o[1]=l=>p("onResetPassword",e(m).values.account))},{default:s(()=>[c(i(e(n)("loginFrom.forget")),1)]),_:1})]),t(d,{loading:e(_),size:"lg",class:"w-full",type:"submit"},{default:s(()=>[c(i(e(n)("loginFrom.form.login")),1)]),_:1},8,["loading"]),a("div",ae,[a("span",ne,i(e(n)("loginFrom.noAccount")),1),t(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[2]||(o[2]=l=>p("onRegister",e(m).values.account))},{default:s(()=>[c(i(e(n)("loginFrom.register")),1)]),_:1})])],32),a("div",le,[t(z,null,{default:s(()=>[c(i(e(n)("loginFrom.testLogin")),1)]),_:1}),a("div",ie,[t(d,{variant:"default",size:"sm",plain:"",onClick:o[4]||(o[4]=l=>y("kpu"))},{default:s(()=>o[6]||(o[6]=[c(" kpu ")])),_:1}),t(d,{variant:"outline",size:"sm",plain:"",onClick:o[5]||(o[5]=l=>y("test"))},{default:s(()=>o[7]||(o[7]=[c(" test ")])),_:1})])])],512),[[S,e(u)==="default"]]),h(a("div",null,[a("div",re,[o[8]||(o[8]=a("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1)),a("div",ce,i(e(n)("loginFrom.wechatQrcode")),1)])],512),[[S,e(u)==="qrcode"]])])}}});export{fe as _};
