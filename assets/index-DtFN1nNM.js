
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as P,V,bm as R,j,u as U,O as q,I as f,b9 as H,o as u,c as a,h as o,w as s,b as k,a as n,q as t,t as I,D as y,N as E,M as O,P as A}from"./index-D_P7dC0L.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-DlkiWNch.js";const F=P({name:"Auth",__name:"index",props:{value:{},all:{type:Boolean}},setup($){const r=$,v=R();function l(){return r.all?v.authAll(typeof r.value=="string"?[r.value]:r.value):v.auth(r.value)}return(b,x)=>l()?V(b.$slots,"default",{key:0}):V(b.$slots,"no-auth",{key:1})}}),J={key:0},K={key:1},L={class:"flex-col-start gap-2"},Q=P({__name:"index",setup($){const r=j(),v=U(),l=q(),{auth:b,authAll:x}=R();async function T(p){await l.login({username:p,password:""}),await l.getPermissions()}function D(){r.push({name:"permissionExampleTest"})}function C(p){b(p)?E.success("校验通过"):E.error("校验不通过")}function G(p){x(p)?E.success("校验通过"):E.error("校验不通过")}return(p,e)=>{const N=z,B=f("ElRadioButton"),M=f("ElRadioGroup"),m=f("ElButton"),i=f("ElTag"),w=F,S=f("ElButtonGroup"),_=O,g=H("auth");return u(),a("div",null,[o(N,{title:"权限验证"}),o(_,null,{default:s(()=>[k(v).settings.app.enablePermission?(u(),a("div",K,[e[25]||(e[25]=n("h3",null,"切换帐号",-1)),o(M,{modelValue:k(l).account,"onUpdate:modelValue":e[0]||(e[0]=d=>k(l).account=d),onChange:T},{default:s(()=>[o(B,{value:"kpu"},{default:s(()=>e[5]||(e[5]=[t(" admin ")])),_:1}),o(B,{value:"test"},{default:s(()=>e[6]||(e[6]=[t(" test ")])),_:1}),o(B,{value:"hooray"},{default:s(()=>e[7]||(e[7]=[t(" hooray(无权限) ")])),_:1})]),_:1},8,["modelValue"]),e[26]||(e[26]=n("h3",null,"帐号权限",-1)),n("div",null,I(k(l).permissions),1),e[27]||(e[27]=n("h3",null,"访问鉴权页面",-1)),n("div",null,[o(m,{onClick:D},{default:s(()=>e[8]||(e[8]=[t(" 点击访问 ")])),_:1})]),e[28]||(e[28]=n("h3",null,"鉴权指令（请对照代码查看）",-1)),n("div",null,[y((u(),a("div",null,e[9]||(e[9]=[t(" 如果你有 permission.browse 权限则能看到这句话 ")]))),[[g,"permission.browse"]]),y((u(),a("div",null,e[10]||(e[10]=[t(" 如果你有 permission.create 权限则能看到这句话 ")]))),[[g,"permission.create"]]),y((u(),a("div",null,e[11]||(e[11]=[t(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")]))),[[g,["permission.browse","permission.create"]]]),y((u(),a("div",null,e[12]||(e[12]=[t(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")]))),[[g,["permission.browse","permission.create"],void 0,{all:!0}]])]),e[29]||(e[29]=n("h3",null,"鉴权组件（请对照代码查看）",-1)),n("div",L,[o(w,{value:"permission.browse"},{"no-auth":s(()=>[o(i,{type:"danger"},{default:s(()=>e[14]||(e[14]=[t(" 你没有 permission.browse 权限 ")])),_:1})]),default:s(()=>[o(i,null,{default:s(()=>e[13]||(e[13]=[t("你有 permission.browse 权限")])),_:1})]),_:1}),o(w,{value:"permission.create"},{"no-auth":s(()=>[o(i,{type:"danger"},{default:s(()=>e[16]||(e[16]=[t(" 你没有 permission.create 权限 ")])),_:1})]),default:s(()=>[o(i,null,{default:s(()=>e[15]||(e[15]=[t("你有 permission.create 权限")])),_:1})]),_:1}),o(w,{value:["permission.browse","permission.create"]},{"no-auth":s(()=>[o(i,{type:"danger"},{default:s(()=>e[18]||(e[18]=[t(" 你没有 permission.browse 或 permission.create 权限 ")])),_:1})]),default:s(()=>[o(i,null,{default:s(()=>e[17]||(e[17]=[t("你有 permission.browse 或 permission.create 权限")])),_:1})]),_:1}),o(w,{value:["permission.browse","permission.create"],all:""},{"no-auth":s(()=>[o(i,{type:"danger"},{default:s(()=>e[20]||(e[20]=[t(" 你没有 permission.browse 和 permission.create 权限 ")])),_:1})]),default:s(()=>[o(i,null,{default:s(()=>e[19]||(e[19]=[t("你有 permission.browse 和 permission.create 权限")])),_:1})]),_:1})]),e[30]||(e[30]=n("h3",null,"鉴权函数（请对照代码查看）",-1)),n("div",null,[o(S,{style:{display:"block","margin-bottom":"10px"}},{default:s(()=>[o(m,{onClick:e[1]||(e[1]=d=>C("permission.browse"))},{default:s(()=>e[21]||(e[21]=[t(" 校验 permission.browse 权限 ")])),_:1}),o(m,{onClick:e[2]||(e[2]=d=>C("permission.create"))},{default:s(()=>e[22]||(e[22]=[t(" 校验 permission.create 权限 ")])),_:1})]),_:1}),o(S,null,{default:s(()=>[o(m,{onClick:e[3]||(e[3]=d=>C(["permission.browse","permission.create"]))},{default:s(()=>e[23]||(e[23]=[t(" 校验 permission.browse 或 permission.create 权限 ")])),_:1}),o(m,{onClick:e[4]||(e[4]=d=>G(["permission.browse","permission.create"]))},{default:s(()=>e[24]||(e[24]=[t(" 校验 permission.browse 和 permission.create 权限 ")])),_:1})]),_:1})])])):(u(),a("div",J," 请到 seeting.js 里打开权限功能，再进入该页面查看演示 "))]),_:1})])}}});typeof A=="function"&&A(Q);export{Q as default};
