
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import B from"./HDropdown-Bh3hOOD3.js";import{d as R,j as H,u as M,ay as N,ax as D,x as V,y as O,r as T,z as q,o as l,c as u,h as o,w as d,a as b,b as a,f as m,aH as z,aM as E,n as y,F,U,e as v,q as j,t as A,a0 as P,L as G,_ as J,ar as K,k as Q}from"./index-DSYfRqq8.js";import{S as W}from"./sortable.esm-Cw1ESr5Y.js";import{u as X}from"./useTabbar-BAP4LuFc.js";const Y={class:"h-6 w-6 flex-center cursor-pointer rounded-1 bg-[var(--g-container-bg)] text-lg shadow transition-background-color transition-shadow"},Z={class:"quick-button"},tt=["disabled"],at=["disabled"],et=["disabled"],st=["title","onClick"],ot=R({name:"TabbarMoreAction",__name:"moreAction",setup(nt){const $=H(),x=M(),f=N(),n=X(),{t:p}=D(),{generateI18nTitle:w}=V(),g=O(()=>n.getId()),k=T(),h=T(!1);q(()=>k.value,i=>{i&&new W(k.value.$el,{animation:200,ghostClass:"ghost",draggable:".tab",filter:".no-drag",onStart:()=>{h.value=!0},onEnd:()=>{h.value=!1},onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&f.sort(e.newIndex,e.oldIndex)}})});function _(i){switch(i){case"search-tabs":G.emit("global-search-toggle","tab");break;case"other-side":n.closeOtherSide();break;case"left-side":n.closeLeftSide();break;case"right-side":n.closeRightSide();break}}function C(i,e,s){let r;return!i&&e||i&&!s?r=e:i&&s&&(r=s),r}return(i,e)=>{const s=J,r=K,L=B;return l(),u("div",null,[o(L,{placement:"bottom-end","popper-class":"tabbar-dropdown"},{dropdown:d(()=>[b("div",Z,[a(x).settings.toolbar.navSearch?(l(),u("button",{key:0,class:"button",onClick:e[0]||(e[0]=t=>_("search-tabs"))},[o(r,{text:a(p)("app.tabbar.searchTabs")},{default:d(()=>[o(s,{name:"i-ri:search-line"})]),_:1},8,["text"])])):m("",!0),b("button",{class:"button",disabled:!a(n).checkCloseOtherSide(),onClick:e[1]||(e[1]=t=>_("other-side"))},[o(r,{text:a(p)("app.tabbar.closeOtherSide")},{default:d(()=>[o(s,{name:"i-ri:close-fill"})]),_:1},8,["text"])],8,tt),b("button",{class:"button",disabled:!a(n).checkCloseLeftSide(),onClick:e[2]||(e[2]=t=>_("left-side"))},[o(r,{text:a(p)("app.tabbar.closeLeftSide")},{default:d(()=>[o(s,{name:"i-ph:arrow-line-left"})]),_:1},8,["text"])],8,at),b("button",{class:"button",disabled:!a(n).checkCloseRightSide(),onClick:e[3]||(e[3]=t=>_("right-side"))},[o(r,{text:a(p)("app.tabbar.closeRightSide")},{default:d(()=>[o(s,{name:"i-ph:arrow-line-right"})]),_:1},8,["text"])],8,et)]),o(a(z),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"max-h-[300px]"},{default:d(()=>[o(E,{ref_key:"dropdownTabContainerRef",ref:k,name:a(h)?void 0:"dropdown-tab",tag:"div",class:y(["tabs",{dragging:a(h)}])},{default:d(()=>[(l(!0),u(F,null,U(a(f).list,t=>{var S,I;return l(),u("div",{key:t.tabId,class:y(["tab",{actived:t.tabId===a(g),"no-drag":t.isPermanent||t.isPin}])},[(l(),u("div",{key:t.tabId,class:"title",title:((S=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:S.title)||a(w)(t.title),onClick:c=>a($).push(t.fullPath)},[a(x).settings.tabbar.enableIcon&&C(t.tabId===a(g),t.icon,t.activeIcon)?(l(),v(s,{key:0,name:C(t.tabId===a(g),t.icon,t.activeIcon)},null,8,["name"])):m("",!0),j(" "+A(((I=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:I.title)||a(w)(t.title)),1)],8,st)),!t.isPermanent&&t.isPin?(l(),v(s,{key:0,name:"i-ri:pushpin-2-fill",class:"action-icon",onClick:P(c=>a(f).unPin(t.tabId),["stop"])},null,8,["onClick"])):!t.isPermanent&&a(f).list.length>1?(l(),v(s,{key:1,name:"ri:close-fill",class:"action-icon",onClick:P(c=>a(n).closeById(t.tabId),["stop"])},null,8,["onClick"])):m("",!0)],2)}),128))]),_:1},8,["name","class"])]),_:1})]),default:d(()=>[b("div",Y,[o(s,{name:"i-ri:arrow-down-s-fill"})])]),_:1})])}}}),ct=Q(ot,[["__scopeId","data-v-d231eaca"]]);export{ct as default};
