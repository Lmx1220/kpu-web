
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as D}from"./index.vue_vue_type_script_setup_true_lang-BYjOVmS1.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-BxVSiTze.js";import{d as J,ac as z,P as A,r as k,v as L,bo as x,C as T,o as g,b as v,j as e,w as t,e as b,y as j,f as l,F,m as G,V as H,h as q,aN as M,_ as P,aU as Q,bp as W,L as u,x as h}from"./index-putfknEa.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-B0Xuimgy.js";import{_ as Y}from"./index-DaouMrR2.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-CrH7osH_.js";import{S as ee}from"./sortable.esm-C83syoBY.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-CjtEiaWg.js";const oe={class:"w-80"},ae={class:"flex items-center justify-between px-4 py-3"},le={class:"text-sm font-bold"},ne=["title","onClick"],se={class:"flex-1 truncate pe-4 text-sm group-hover:[mask-image:linear-gradient(90deg,#000_calc(100%-80px),transparent)]"},re={class:"absolute right-2 h-5 w-5 rounded-full text-secondary-foreground hidden group-hover:flex-center hover:bg-secondary hover:ring-1"},ie={key:1,class:"flex-col-center py-6 text-secondary-foreground"},de=J({name:"StorageBox",__name:"index",props:{data:{},name:{},title:{default:"储存箱"}},emits:["takeOut"],setup(N,{emit:w}){const s=N,V=w,B=z(),c=A(),o=k([]),i=k({visible:!1,name:""});L(()=>{p()});function C(){i.value.name?(o.value.push({title:i.value.name,content:JSON.stringify(s.data)}),m(),i.value.visible=!1,i.value.name=""):M.warning("名称不能为空",{position:"top-center"})}function S(a){V("takeOut",JSON.parse(a))}function $(a){o.value.splice(a,1),m()}function I(a,n){o.value.splice(a,0,o.value.splice(n,1)[0]),m()}function m(){const a=x.session.has("storageBoxData")?JSON.parse(x.session.get("storageBoxData")):{};a[c.account]=a[c.account]||{},a[c.account][s.name]=o.value,x.session.set("storageBoxData",JSON.stringify(a))}function p(){x.session.has("storageBoxData")&&(o.value=JSON.parse(x.session.get("storageBoxData"))[c.account][s.name]||[])}const _=k();return T(()=>_.value,a=>{a&&new ee(_.value,{animation:200,ghostClass:"draggable-ghost",draggable:".draggable-item",onUpdate:n=>{n.newIndex!==void 0&&n.oldIndex!==void 0&&I(n.newIndex,n.oldIndex)}})}),(a,n)=>{const f=P,O=Q,E=Z,U=Y,K=X;return g(),v(F,null,[e(E,{class:"p-0"},{panel:t(()=>[b("div",oe,[b("div",ae,[b("div",le,j(a.title),1),e(f,{name:"i-ep:plus",class:"cursor-pointer text-base",onClick:n[0]||(n[0]=d=>l(i).visible=!0)})]),e(O,{scrollbar:!1,mask:"",class:"max-h-200px"},{default:t(()=>[l(o).length>0?(g(),v("div",{key:0,ref_key:"containerRef",ref:_,class:"flex flex-col gap-2 px-4 pb-4"},[(g(!0),v(F,null,G(l(o),(d,y)=>(g(),v("div",{key:`${y}_${d.title}`,title:d.title,class:"group draggable-item relative w-[calc(50%-0.25rem)] flex cursor-pointer items-center gap-1 rounded-lg px-2 py-2 ring-1 ring-border ring-inset hover-bg-accent",onClick:r=>S(d.content)},[b("div",se,j(d.title),1),b("div",re,[e(f,{name:"i-ep:delete",size:14,onClick:W(r=>$(y),["stop"])},null,8,["onClick"])])],8,ne))),128))],512)):(g(),v("div",ie,[e(f,{name:"i-tabler:mood-empty",size:40}),n[4]||(n[4]=b("p",{"m-2":"","text-base":""}," 空空如也 ",-1))]))]),_:1})])]),default:t(()=>[B.default?H(a.$slots,"default",{key:0}):(g(),q(f,{key:1,name:"i-ep:message-box",size:16}))]),_:3}),e(K,{modelValue:l(i).visible,"onUpdate:modelValue":n[2]||(n[2]=d=>l(i).visible=d),title:"请输入一个方便记忆的名称","content-class":"min-h-auto","cancel-button-text":"取消","confirm-button-text":"确定",onConfirm:C,onCancel:n[3]||(n[3]=d=>l(i).visible=!1)},{default:t(()=>[e(U,{modelValue:l(i).name,"onUpdate:modelValue":n[1]||(n[1]=d=>l(i).name=d),class:"w-full!"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),ve=J({name:"StorageBox",__name:"storagebox",setup(N){const w=k([]),s=k({name:"",department_id:"",department_job_id:"",role_id:"",check1:!0,check2:!1});function V(){M.info("模拟触发搜索")}function B(c){s.value=c,V()}return(c,o)=>{const i=te,C=u("ElAlert"),S=de,$=D,I=u("ElInput"),m=u("ElFormItem"),p=u("ElCol"),_=u("ElRow"),a=u("ElOption"),n=u("ElSelect"),f=u("ElCheckbox"),O=P,E=u("ElButton"),U=u("ElSpace"),K=u("ElForm"),d=R,y=D;return g(),v("div",null,[e(i,{title:"储存箱",content:"KStorageBox"}),e($,{title:"你可以将页面中的数据（object/array）储存到该组件内，并在需要的时候取出来"},{default:t(()=>[e(C,{"show-icon":"",title:"该组件需要搭配业务场景使用。",closable:!1}),e(S,{data:l(w),name:"box1"},null,8,["data"])]),_:1}),e(y,{title:"推荐场景：具有复杂筛选项的页面，并记录常用的筛选条件"},{default:t(()=>[e(d,{"show-toggle":!1},{default:t(()=>[e(K,{model:l(s),size:"default","label-width":"120px"},{default:t(()=>[e(_,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[e(m,{label:"姓名 / 手机号",class:"search-form-item-name"},{default:t(()=>[e(I,{modelValue:l(s).name,"onUpdate:modelValue":o[0]||(o[0]=r=>l(s).name=r),placeholder:"请输入姓名或者手机号，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(p,{span:6},{default:t(()=>[e(m,{label:"部门"},{default:t(()=>[e(n,{modelValue:l(s).department_id,"onUpdate:modelValue":o[1]||(o[1]=r=>l(s).department_id=r),clearable:"",placeholder:"请选择部门"},{default:t(()=>[e(a,{label:"技术部",value:1}),e(a,{label:"设计部",value:2}),e(a,{label:"行政部",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:6},{default:t(()=>[e(m,{label:"职位"},{default:t(()=>[e(n,{modelValue:l(s).department_job_id,"onUpdate:modelValue":o[2]||(o[2]=r=>l(s).department_job_id=r),clearable:"",placeholder:"请选择职位"},{default:t(()=>[e(a,{label:"程序员",value:1}),e(a,{label:"设计师",value:2}),e(a,{label:"人事",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:6},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(n,{modelValue:l(s).role_id,"onUpdate:modelValue":o[3]||(o[3]=r=>l(s).role_id=r),clearable:"",placeholder:"请选择角色"},{default:t(()=>[e(a,{label:"主管",value:1}),e(a,{label:"普通职员",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(f,{modelValue:l(s).check1,"onUpdate:modelValue":o[4]||(o[4]=r=>l(s).check1=r)},{default:t(()=>o[6]||(o[6]=[h(" 备选项 ")])),_:1},8,["modelValue"]),e(f,{modelValue:l(s).check2,"onUpdate:modelValue":o[5]||(o[5]=r=>l(s).check2=r)},{default:t(()=>o[7]||(o[7]=[h(" 备选项 ")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(U,null,{default:t(()=>[e(E,{type:"primary",onClick:V},{icon:t(()=>[e(O,{name:"i-ep:search"})]),default:t(()=>[o[8]||(o[8]=h(" 筛选 "))]),_:1}),e(S,{data:l(s),name:"box2",title:"我的快捷筛选",onTakeOut:B},{default:t(()=>[e(E,{link:""},{default:t(()=>o[9]||(o[9]=[h(" 保存当前筛选 ")])),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}});export{ve as default};
