
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as B,r as u,$ as t,o as z,a as K,b as r,M as i,e,h as s,w as a,z as C,T as m,L as p,U as R,m as U}from"./bootstrap-BssOdyNs.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-BErAxa4U.js";import{u as D,t as E,o as M,s as f,_,a as w,c as v,F as x}from"./vee-validate-zod-CH1tI7Ov.js";const q={class:"min-h-500px w-full flex-col-stretch-center p-12"},A={class:"mb-8 space-y-2"},G={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},H={class:"flex-start-between gap-2"},J={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},X=B({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(S,{emit:N}){const T=S,h=N,b=u(!1),y=D({validationSchema:E(M({account:f().min(1,t("resetPasswordForm.rules.account")),captcha:f().min(6,t("resetPasswordForm.rules.captcha")),newPassword:f().min(1,t("resetPasswordForm.rules.newPassword")).min(6,t("resetPasswordForm.rules.newPasswordLength")).max(18,t("resetPasswordForm.rules.newPasswordLength"))})),initialValues:{account:T.account??"",captcha:"",newPassword:""}}),P=y.handleSubmit(F=>{b.value=!0,h("onResetPassword",F.account)}),n=u(0),g=u(Number.NaN);function V(){n.value=60,g.value=window.setInterval(()=>{n.value--,n.value===0&&clearInterval(g.value)},1e3)}return(F,l)=>{const $=R,k=j,d=U;return z(),K("div",q,[r("form",{onSubmit:l[1]||(l[1]=(...o)=>e(P)&&e(P)(...o))},[r("div",A,[r("h3",G,i(e(t)("resetPasswordForm.intro")),1),l[2]||(l[2]=r("p",{class:"text-sm text-muted-foreground lg:text-base"}," 演示系统未提供该功能 ",-1))]),s(e(x),{name:"account"},{default:a(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s($,C({type:"text",placeholder:e(t)("resetPasswordForm.form.account"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),r("div",H,[s(e(x),{name:"captcha"},{default:a(({componentField:o,value:c,setValue:I})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s(k,{"model-value":c,name:o.name,length:6,class:"border-destructive","onUpdate:modelValue":L=>I(L)},null,8,["model-value","name","onUpdate:modelValue"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{variant:"outline",size:"lg",disabled:e(n)>0,class:"flex-1 px-4",onClick:V},{default:a(()=>[p(i(e(n)===0?e(t)("resetPasswordForm.form.sendCaptcha"):e(t)("resetPasswordForm.form.captchaCountdown",{countdown:e(n)})),1)]),_:1},8,["disabled"])]),s(e(x),{name:"newPassword"},{default:a(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s($,C({type:"password",placeholder:e(t)("resetPasswordForm.form.newPassword"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{loading:e(b),size:"lg",class:"mt-4 w-full",type:"submit"},{default:a(()=>[p(i(e(t)("resetPasswordForm.form.confirm")),1)]),_:1},8,["loading"]),r("div",J,[s(d,{variant:"link",class:"h-auto p-0",onClick:l[0]||(l[0]=o=>h("onLogin",e(y).values.account))},{default:a(()=>[p(i(e(t)("resetPasswordForm.login")),1)]),_:1})])],32)])}}});export{X as _};
