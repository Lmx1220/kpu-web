
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as $,o as r,c as a,a9 as w,bg as x,a as H,b as I,Q as O,G as _,W as B,j as s,w as e,f as h,t as o,e as n,v as Q,I as v,P as b,O as W,R as P}from"./index-fOXGxjjY.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-B6BWcwhA.js";import{u as z}from"./useMainPage-CzZgL_9e.js";import"./useTabbar-CtenUHdD.js";const F=$({name:"AuthAll",__name:"index",props:{value:{}},setup(f){const p=f;function m(){return x().authAll(p.value)}return(t,g)=>(r(),a("div",null,[m()?w(t.$slots,"default",{key:0}):w(t.$slots,"no-auth",{key:1})]))}}),J=$({name:"Auth",__name:"index",props:{value:{}},setup(f){const p=f;function m(){return x().auth(p.value)}return(t,g)=>(r(),a("div",null,[m()?w(t.$slots,"default",{key:0}):w(t.$slots,"no-auth",{key:1})]))}}),K={key:0},L={key:1},X=n("h3",null,"切换帐号",-1),Y=n("h3",null,"帐号权限",-1),Z=n("h3",null,"访问鉴权页面",-1),ee=n("h3",null,"鉴权组件（请对照代码查看）",-1),se=n("h3",null,"鉴权指令（请对照代码查看）",-1),oe=n("h3",null,"鉴权函数（请对照代码查看）",-1),te=$({__name:"index",setup(f){const p=H(),m=I(),t=O(),{auth:g,authAll:S}=x(),R=z();async function V(u){await t.login({username:u,password:""}),await t.getPermissions(),R.reload()}function G(){p.push({name:"permissionExampleTest"})}function y(u){g(u)?b.success("校验通过"):b.error("校验不通过")}function T(u){S(u)?b.success("校验通过"):b.error("校验不通过")}return(u,i)=>{const D=q,k=_("ElRadioButton"),M=_("ElRadioGroup"),c=_("ElButton"),l=_("ElTag"),E=J,N=F,A=_("ElButtonGroup"),j=W,C=B("auth"),U=B("auth-all");return r(),a("div",null,[s(D,{title:"权限验证"}),s(j,null,{default:e(()=>[h(m).settings.app.enablePermission?(r(),a("div",L,[X,s(M,{modelValue:h(t).account,"onUpdate:modelValue":i[0]||(i[0]=d=>h(t).account=d),onChange:V},{default:e(()=>[s(k,{value:"admin"},{default:e(()=>[o(" admin ")]),_:1}),s(k,{value:"test"},{default:e(()=>[o(" test ")]),_:1}),s(k,{value:"hooray"},{default:e(()=>[o(" hooray(无权限) ")]),_:1})]),_:1},8,["modelValue"]),Y,n("div",null,Q(h(t).permissions),1),Z,n("div",null,[s(c,{onClick:G},{default:e(()=>[o(" 点击访问 ")]),_:1})]),ee,n("div",null,[s(E,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 权限")]),_:1})]),_:1}),s(E,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.create 权限")]),_:1})]),_:1}),s(E,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 或 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 或 permission.create 权限")]),_:1})]),_:1}),s(N,{value:["permission.browse","permission.create"]},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 和 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 和 permission.create 权限")]),_:1})]),_:1})]),se,n("div",null,[v((r(),a("div",null,[o(" 如果你有 permission.browse 权限则能看到这句话 ")])),[[C,"permission.browse"]]),v((r(),a("div",null,[o(" 如果你有 permission.create 权限则能看到这句话 ")])),[[C,"permission.create"]]),v((r(),a("div",null,[o(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")])),[[C,["permission.browse","permission.create"]]]),v((r(),a("div",null,[o(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")])),[[U,["permission.browse","permission.create"]]])]),oe,n("div",null,[s(A,{style:{display:"block","margin-bottom":"10px"}},{default:e(()=>[s(c,{onClick:i[1]||(i[1]=d=>y("permission.browse"))},{default:e(()=>[o(" 校验 permission.browse 权限 ")]),_:1}),s(c,{onClick:i[2]||(i[2]=d=>y("permission.create"))},{default:e(()=>[o(" 校验 permission.create 权限 ")]),_:1})]),_:1}),s(A,null,{default:e(()=>[s(c,{onClick:i[3]||(i[3]=d=>y(["permission.browse","permission.create"]))},{default:e(()=>[o(" 校验 permission.browse 或 permission.create 权限 ")]),_:1}),s(c,{onClick:i[4]||(i[4]=d=>T(["permission.browse","permission.create"]))},{default:e(()=>[o(" 校验 permission.browse 和 permission.create 权限 ")]),_:1})]),_:1})])])):(r(),a("div",K," 请到 seeting.js 里打开权限功能，再进入该页面查看演示 "))]),_:1})])}}});typeof P=="function"&&P(te);export{te as default};
