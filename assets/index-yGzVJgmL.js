
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as z,U as D,N as j,r as p,B as a,o as x,h as A,w as s,e as c,j as n,f as e,W as K,c as E,t as i,ad as P,p as m,ae as T,F as G,i as H,_ as M}from"./index-DJ7wkSlE.js";import{_ as O}from"./HTabList.vue_vue_type_script_setup_true_lang-BJxMRApY.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-resolve-button-type-CYaT5ZM6.js";const W={class:"mb-6"},X={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},Z={class:"mb-4 flex-center-between"},J={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},Y={key:1,class:"flex-col-center"},ee={class:"mt-2 op-50"},oe={class:"mt-4 text-center -mb-4"},te=z({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(L,{emit:C}){const h=L,g=C,{t:l}=D(),I=j(),S="kpu-web",f=p(!1),u=p("default"),w=p(),t=p({account:h.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),B=p({account:[{required:!0,trigger:"blur",message:l("loginFrom.rules.account")}],password:[{required:!0,trigger:"blur",message:l("loginFrom.rules.password")},{min:6,max:18,trigger:"blur",message:l("loginFrom.rules.passwordLength")}]});function _(){var d;(d=w.value)==null||d.validate(o=>{o&&(f.value=!0,I.login({username:t.value.account,password:t.value.password}).then(()=>{t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),g("onLogin",t.value.account)}).finally(()=>{f.value=!1}))})}function F(d){t.value.account=d,t.value.password="123456",_()}return(d,o)=>{const R=O,b=M,y=a("ElInput"),k=a("ElFormItem"),U=a("ElCheckbox"),V=a("ElLink"),v=a("ElButton"),$=a("el-image"),q=a("ElDivider"),N=a("ElForm");return x(),A(N,{ref_key:"formRef",ref:w,model:e(t),rules:e(B),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[c("div",W,[n(R,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=r=>K(u)?u.value=r:null),options:[{label:e(l)("loginFrom.accountLogin"),value:"default"},{label:e(l)("loginFrom.qrcodeLogin"),value:"qrcode"}]},null,8,["modelValue","options"])]),e(u)==="default"?(x(),E(G,{key:0},[c("h3",X,i(e(l)("loginFrom.intro",{title:e(S)})),1),c("div",null,[n(k,{prop:"account"},{default:s(()=>[n(y,{modelValue:e(t).account,"onUpdate:modelValue":o[1]||(o[1]=r=>e(t).account=r),placeholder:e(l)("loginFrom.form.account"),type:"text",tabindex:"1"},{prefix:s(()=>[n(b,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(k,{prop:"password"},{default:s(()=>[n(y,{modelValue:e(t).password,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).password=r),type:"password",placeholder:e(l)("loginFrom.form.password"),tabindex:"2","show-password":"",onKeyup:P(_,["enter"])},{prefix:s(()=>[n(b,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),c("div",Z,[n(U,{modelValue:e(t).remember,"onUpdate:modelValue":o[3]||(o[3]=r=>e(t).remember=r)},{default:s(()=>[m(i(e(l)("loginFrom.remember")),1)]),_:1},8,["modelValue"]),n(V,{type:"primary",underline:!1,onClick:o[4]||(o[4]=r=>g("onResetPassword",e(t).account))},{default:s(()=>[m(i(e(l)("loginFrom.forget")),1)]),_:1})]),n(v,{loading:e(f),type:"primary",size:"large",style:{width:"100%"},onClick:T(_,["prevent"])},{default:s(()=>[m(i(e(l)("loginFrom.form.login")),1)]),_:1},8,["loading"]),c("div",J,[m(i(e(l)("loginFrom.noAccount"))+" ",1),n(V,{type:"primary",underline:!1,onClick:o[5]||(o[5]=r=>g("onRegister",e(t).account))},{default:s(()=>[m(i(e(l)("loginFrom.register")),1)]),_:1})])],64)):e(u)==="qrcode"?(x(),E("div",Y,[n($,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),c("div",ee,i(e(l)("loginFrom.wechatQrcode")),1)])):H("",!0),c("div",oe,[n(q,null,{default:s(()=>[m(i(e(l)("loginFrom.testLogin")),1)]),_:1}),n(v,{type:"primary",size:"small",plain:"",onClick:o[6]||(o[6]=r=>F("kpu"))},{default:s(()=>o[8]||(o[8]=[m(" kpu ")])),_:1}),n(v,{size:"small",plain:"",onClick:o[7]||(o[7]=r=>F("test"))},{default:s(()=>o[9]||(o[9]=[m(" test ")])),_:1})])]),_:1},8,["model","rules"])}}}),ae=Q(te,[["__scopeId","data-v-1817a065"]]);export{ae as default};
