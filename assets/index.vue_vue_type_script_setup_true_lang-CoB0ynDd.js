
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as q,Q as A,r as h,$ as n,R as p,o as D,a as U,b as a,N as i,e,i as t,S as j,U as k,V as $,w as s,A as S,T as V,v as I,y as Q,M as r,W as X,p as E,X as G}from"./bootstrap-BlzOfB9o.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-DyucO368.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-BfNPJJvh.js";import{u as W,t as Z,o as H,s as T,b as J,_ as b,a as x,c as C,F as y}from"./vee-validate-zod-CfZ14I3b.js";const Y={class:"min-h-500px w-full flex-col-stretch-center p-12"},ee={class:"mb-6 space-y-2"},te={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},oe={class:"mb-4"},se={class:"mb-4 flex-center-between"},ae={class:"flex-center-start"},ne={class:"mt-4 flex-center gap-2 text-sm"},le={class:"text-secondary-foreground op-50"},ie={class:"mt-4 text-center -mb-4"},ce={class:"space-x-2"},re={class:"flex-col-center"},ue={class:"mt-2 text-sm text-secondary-foreground op-50"},me="kpu-web",ge=q({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(R,{emit:L}){const K=R,_=L,P=A(),f=h(!1),u=h("default"),m=W({validationSchema:Z(H({account:T().min(1,n("loginFrom.rules.account")),password:T().min(1,n("loginFrom.rules.password")),remember:J()})),initialValues:{account:K.account??p.local.get("login_account")??"",password:"",remember:!!p.local.get("login_account")}}),g=m.handleSubmit(c=>{f.value=!0,P.login({username:c.account,password:c.password}).then(()=>{c.remember?p.local.set("login_account",c.account):p.local.remove("login_account"),_("onLogin",c.account)}).finally(()=>{f.value=!1})});function w(c){m.setFieldValue("account",c),m.setFieldValue("password","123456"),g()}return(c,o)=>{const z=O,F=X,B=M,d=E,N=G;return D(),U("div",Y,[a("div",ee,[a("h3",te,i(e(n)("loginFrom.intro")),1),a("p",{class:"text-sm text-muted-foreground lg:text-base"},i(me))]),a("div",oe,[t(z,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=l=>j(u)?u.value=l:null),list:[{label:e(n)("loginFrom.accountLogin"),value:"default"},{label:e(n)("loginFrom.qrcodeLogin"),value:"qrcode"}],class:"inline-flex"},null,8,["modelValue","list"])]),k(a("div",null,[a("form",{onSubmit:o[3]||(o[3]=(...l)=>e(g)&&e(g)(...l))},[t(e(y),{name:"account"},{default:s(({componentField:l,errors:v})=>[t(e(b),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(x),null,{default:s(()=>[t(F,S({type:"text",placeholder:e(n)("loginFrom.form.account"),class:["w-full",v.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),t(V,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(C),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(y),{name:"password"},{default:s(({componentField:l,errors:v})=>[t(e(b),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(x),null,{default:s(()=>[t(F,S({type:"password",placeholder:e(n)("loginFrom.form.password"),class:["w-full",v.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),t(V,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(C),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),a("div",se,[a("div",ae,[t(e(y),{type:"checkbox",name:"remember"},{default:s(({componentField:l})=>[t(e(b),null,{default:s(()=>[t(e(x),null,{default:s(()=>[t(B,I(Q(l)),{default:s(()=>[r(i(e(n)("loginFrom.remember")),1)]),_:2},1040)]),_:2},1024)]),_:2},1024)]),_:1})]),t(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[1]||(o[1]=l=>_("onResetPassword",e(m).values.account))},{default:s(()=>[r(i(e(n)("loginFrom.forget")),1)]),_:1})]),t(d,{loading:e(f),size:"lg",class:"w-full",type:"submit"},{default:s(()=>[r(i(e(n)("loginFrom.form.login")),1)]),_:1},8,["loading"]),a("div",ne,[a("span",le,i(e(n)("loginFrom.noAccount")),1),t(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[2]||(o[2]=l=>_("onRegister",e(m).values.account))},{default:s(()=>[r(i(e(n)("loginFrom.register")),1)]),_:1})])],32),a("div",ie,[t(N,null,{default:s(()=>[r(i(e(n)("loginFrom.testLogin")),1)]),_:1}),a("div",ce,[t(d,{variant:"default",size:"sm",plain:"",onClick:o[4]||(o[4]=l=>w("kpu"))},{default:s(()=>o[6]||(o[6]=[r(" kpu ")])),_:1}),t(d,{variant:"outline",size:"sm",plain:"",onClick:o[5]||(o[5]=l=>w("test"))},{default:s(()=>o[7]||(o[7]=[r(" test ")])),_:1})])])],512),[[$,e(u)==="default"]]),k(a("div",null,[a("div",re,[o[8]||(o[8]=a("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1)),a("div",ue,i(e(n)("loginFrom.wechatQrcode")),1)])],512),[[$,e(u)==="qrcode"]])])}}});export{ge as _};
