
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-DAEt_wLQ.js";import{d as j,aW as A,N as M,r as S,l as P,b1 as k,y as L,o as v,h as N,w as t,e as b,t as H,j as e,f as a,c as V,F as T,aa as G,ae as W,aJ as q,a6 as K,p as g,af as F,_ as J,m as Q,B as u,L as X}from"./index-DAA47o_S.js";import Y from"./HDropdown-BuW1yDf2.js";import{_ as Z}from"./HDialog.vue_vue_type_script_setup_true_lang-_c9ugc3f.js";import{_ as ee}from"./HInput.vue_vue_type_script_setup_true_lang-vBuEOvXi.js";import{S as te}from"./sortable.esm-C0-Qcoum.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-CyPx8pFQ.js";const ae={class:"w-40"},ne={class:"flex items-center justify-between px-4 py-3"},se={class:"text-sm font-bold"},de=["title","onClick"],ie={class:"name flex-1 truncate pe-4"},re={class:"right-1 h-5 w-6 rounded-full text-stone-3 !absolute dark-text-stone-7 hover-text-stone-7 dark-hover-text-stone-3"},ue={key:1,flex:"center col","py-6":"","text-stone-5":""},me=j({name:"StorageBox",__name:"index",props:{data:{},name:{},title:{default:"储存箱"}},emits:["takeOut"],setup(U,{emit:B}){const s=U,E=B,C=A(),p=M(),o=S([]),i=S({visible:!1,name:""});P(()=>{c()});function $(){i.value.name?(o.value.push({title:i.value.name,content:JSON.stringify(s.data)}),m(),i.value.visible=!1,i.value.name=""):F.warning("名称不能为空",{zIndex:2e3})}function y(n){E("takeOut",JSON.parse(n))}function w(n){o.value.splice(n,1),m()}function I(n,l){o.value.splice(n,0,o.value.splice(l,1)[0]),m()}function m(){const n=k.session.has("storageBoxData")?JSON.parse(k.session.get("storageBoxData")):{};n[p.account]=n[p.account]||{},n[p.account][s.name]=o.value,k.session.set("storageBoxData",JSON.stringify(n))}function c(){k.session.has("storageBoxData")&&(o.value=JSON.parse(k.session.get("storageBoxData"))[p.account][s.name]||[])}const _=S();return L(()=>_.value,n=>{n&&new te(_.value,{animation:200,ghostClass:"draggable-ghost",draggable:".draggable-item",onUpdate:l=>{l.newIndex!==void 0&&l.oldIndex!==void 0&&I(l.newIndex,l.oldIndex)}})}),(n,l)=>{const f=J,h=ee,x=Q,O=Z,D=Y;return v(),N(D,{placement:"bottom"},{dropdown:t(()=>[b("div",ae,[b("div",ne,[b("div",se,H(n.title),1),e(f,{name:"i-ep:plus",class:"cursor-pointer text-base",onClick:l[3]||(l[3]=r=>a(i).visible=!0)})]),e(a(q),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"max-h-200px"},{default:t(()=>[a(o).length>0?(v(),V("div",{key:0,ref_key:"containerRef",ref:_,class:"flex flex-col gap-2 px-4 pb-4"},[(v(!0),V(T,null,G(a(o),(r,d)=>(v(),V("div",{key:`${d}_${r.title}`,title:r.title,class:"draggable-item relative flex cursor-pointer items-center rounded px-2 py-2 ring-1 ring-stone-3 ring-inset hover-bg-stone-1 dark-ring-stone-7 dark-hover-bg-dark/50",onClick:z=>y(r.content)},[b("div",ie,H(r.title),1),b("div",re,[e(f,{name:"i-ep:delete",size:14,onClick:W(z=>w(d),["stop"])},null,8,["onClick"])])],8,de))),128))],512)):(v(),V("div",ue,[e(f,{name:"i-tabler:mood-empty",size:40}),l[6]||(l[6]=b("p",{"m-2":"","text-base":""}," 空空如也 ",-1))]))]),_:1})])]),default:t(()=>[a(C).default?K(n.$slots,"default",{key:0},void 0,!0):(v(),N(f,{key:1,name:"i-ep:message-box",size:16})),e(O,{modelValue:a(i).visible,"onUpdate:modelValue":l[2]||(l[2]=r=>a(i).visible=r),title:"请输入一个方便记忆的名称"},{footer:t(()=>[e(x,{outline:"",class:"mr-2",onClick:l[1]||(l[1]=r=>a(i).visible=!1)},{default:t(()=>l[4]||(l[4]=[g(" 取消 ")])),_:1}),e(x,{onClick:$},{default:t(()=>l[5]||(l[5]=[g(" 确定 ")])),_:1})]),default:t(()=>[e(h,{modelValue:a(i).name,"onUpdate:modelValue":l[0]||(l[0]=r=>a(i).name=r),class:"w-full!"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:3})}}}),pe=oe(me,[["__scopeId","data-v-fd473d96"]]),Ve=j({name:"StorageBox",__name:"storagebox",setup(U){const B=S([]),s=S({name:"",department_id:"",department_job_id:"",role_id:"",check1:!0,check2:!1});function E(){F.info("模拟触发搜索")}function C(p){s.value=p,E()}return(p,o)=>{const i=le,$=u("ElAlert"),y=pe,w=X,I=u("ElInput"),m=u("ElFormItem"),c=u("ElCol"),_=u("ElRow"),n=u("ElOption"),l=u("ElSelect"),f=u("ElCheckbox"),h=J,x=u("ElButton"),O=u("ElSpace"),D=u("ElForm"),r=R;return v(),V("div",null,[e(i,{title:"储存箱",content:"StorageBox"}),e(w,{title:"你可以将页面中的数据（object/array）储存到该组件内，并在需要的时候取出来"},{default:t(()=>[e($,{"show-icon":"",title:"该组件需要搭配业务场景使用。",closable:!1}),e(y,{data:a(B),name:"box1","mt2.5":""},null,8,["data"])]),_:1}),e(w,{title:"推荐场景：具有复杂筛选项的页面，并记录常用的筛选条件"},{default:t(()=>[e(r,{"show-toggle":!1},{default:t(()=>[e(D,{model:a(s),size:"default","label-width":"120px"},{default:t(()=>[e(_,null,{default:t(()=>[e(c,{span:24},{default:t(()=>[e(m,{label:"姓名 / 手机号",class:"search-form-item-name"},{default:t(()=>[e(I,{modelValue:a(s).name,"onUpdate:modelValue":o[0]||(o[0]=d=>a(s).name=d),placeholder:"请输入姓名或者手机号，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{span:6},{default:t(()=>[e(m,{label:"部门"},{default:t(()=>[e(l,{modelValue:a(s).department_id,"onUpdate:modelValue":o[1]||(o[1]=d=>a(s).department_id=d),clearable:"",placeholder:"请选择部门"},{default:t(()=>[e(n,{label:"技术部",value:1}),e(n,{label:"设计部",value:2}),e(n,{label:"行政部",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:6},{default:t(()=>[e(m,{label:"职位"},{default:t(()=>[e(l,{modelValue:a(s).department_job_id,"onUpdate:modelValue":o[2]||(o[2]=d=>a(s).department_job_id=d),clearable:"",placeholder:"请选择职位"},{default:t(()=>[e(n,{label:"程序员",value:1}),e(n,{label:"设计师",value:2}),e(n,{label:"人事",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:6},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(l,{modelValue:a(s).role_id,"onUpdate:modelValue":o[3]||(o[3]=d=>a(s).role_id=d),clearable:"",placeholder:"请选择角色"},{default:t(()=>[e(n,{label:"主管",value:1}),e(n,{label:"普通职员",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{span:24},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(f,{modelValue:a(s).check1,"onUpdate:modelValue":o[4]||(o[4]=d=>a(s).check1=d)},{default:t(()=>o[6]||(o[6]=[g(" 备选项 ")])),_:1},8,["modelValue"]),e(f,{modelValue:a(s).check2,"onUpdate:modelValue":o[5]||(o[5]=d=>a(s).check2=d)},{default:t(()=>o[7]||(o[7]=[g(" 备选项 ")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(O,null,{default:t(()=>[e(x,{type:"primary",onClick:E},{icon:t(()=>[e(h,{name:"i-ep:search"})]),default:t(()=>[o[8]||(o[8]=g(" 筛选 "))]),_:1}),e(y,{data:a(s),name:"box2",title:"我的快捷筛选",onTakeOut:C},{default:t(()=>[e(x,{link:""},{default:t(()=>o[9]||(o[9]=[g(" 保存当前筛选 ")])),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}});export{Ve as default};
