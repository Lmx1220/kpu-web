
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as L,r as u,$ as t,o as K,a as R,b as r,N as i,e,i as s,w as a,A as C,T as m,M as p,W as z,p as U}from"./bootstrap-CKvMAU9X.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-CsmDEr-2.js";import{u as A,t as D,o as E,s as f,_,a as w,c as v,F as x}from"./vee-validate-zod-BNmr89XN.js";const M={class:"min-h-500px w-full flex-col-stretch-center p-12"},W={class:"mb-8 space-y-2"},q={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},G={class:"flex-start-between gap-2"},H={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},X=L({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(N,{emit:S}){const T=N,b=S,h=u(!1),y=A({validationSchema:D(E({account:f().min(1,t("resetPasswordForm.rules.account")),captcha:f().min(6,t("resetPasswordForm.rules.captcha")),newPassword:f().min(1,t("resetPasswordForm.rules.newPassword")).min(6,t("resetPasswordForm.rules.newPasswordLength")).max(18,t("resetPasswordForm.rules.newPasswordLength"))})),initialValues:{account:T.account??"",captcha:"",newPassword:""}}),P=y.handleSubmit(F=>{h.value=!0,b("onResetPassword",F.account)}),n=u(0),g=u(Number.NaN);function V(){n.value=60,g.value=window.setInterval(()=>{n.value--,n.value===0&&clearInterval(g.value)},1e3)}return(F,l)=>{const $=z,k=j,d=U;return K(),R("div",M,[r("form",{onSubmit:l[1]||(l[1]=(...o)=>e(P)&&e(P)(...o))},[r("div",W,[r("h3",q,i(e(t)("resetPasswordForm.intro")),1),l[2]||(l[2]=r("p",{class:"text-sm text-muted-foreground lg:text-base"}," 演示系统未提供该功能 ",-1))]),s(e(x),{name:"account"},{default:a(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s($,C({type:"text",placeholder:e(t)("resetPasswordForm.form.account"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),r("div",G,[s(e(x),{name:"captcha"},{default:a(({componentField:o,value:c,setValue:I})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s(k,{"model-value":c,name:o.name,length:6,class:"border-destructive","onUpdate:modelValue":B=>I(B)},null,8,["model-value","name","onUpdate:modelValue"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{variant:"outline",size:"lg",disabled:e(n)>0,class:"flex-1 px-4",onClick:V},{default:a(()=>[p(i(e(n)===0?e(t)("resetPasswordForm.form.sendCaptcha"):e(t)("resetPasswordForm.form.captchaCountdown",{countdown:e(n)})),1)]),_:1},8,["disabled"])]),s(e(x),{name:"newPassword"},{default:a(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:a(()=>[s(e(w),null,{default:a(()=>[s($,C({type:"password",placeholder:e(t)("resetPasswordForm.form.newPassword"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(m,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{loading:e(h),size:"lg",class:"mt-4 w-full",type:"submit"},{default:a(()=>[p(i(e(t)("resetPasswordForm.form.confirm")),1)]),_:1},8,["loading"]),r("div",H,[s(d,{variant:"link",class:"h-auto p-0",onClick:l[0]||(l[0]=o=>b("onLogin",e(y).values.account))},{default:a(()=>[p(i(e(t)("resetPasswordForm.login")),1)]),_:1})])],32)])}}});export{X as _};
