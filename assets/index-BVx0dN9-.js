
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as O,u as L,c as U,D as B,F as j,G as k,j as x,o as _,M,w as C,h as F,f as V,X as G,q as H,t as z,O as K,a5 as X,K as q,N as J,z as Q}from"./index-B3Xk5Nw4.js";import W from"./index-CJZPKg16.js";import{_ as Y}from"./item.vue_vue_type_script_setup_true_lang-qbQEt4gM.js";var $={};Object.defineProperty($,"__esModule",{value:!0});$.TokenData=void 0;$.parse=T;var Z=$.compile=oe;$.match=ce;$.pathToRegexp=pe;const ee="/",P=n=>n,te=new RegExp("^\\p{XID_Continue}$","u"),E="https://git.new/pathToRegexpError",ne={"!":"!","@":"@",";":";",",":",","*":"*","+":"+","?":"?","{":"{","}":"}"};function re(n){const e=[...n],t=[];let r=0;for(;r<e.length;){const a=e[r],c=ne[a];if(c){t.push({type:c,index:r++,value:a});continue}if(a==="\\"){t.push({type:"ESCAPED",index:r++,value:e[r++]});continue}if(a===":"){let p="";for(;te.test(e[++r]);)p+=e[r];if(!p)throw new TypeError(`Missing parameter name at ${r}`);t.push({type:"NAME",index:r,value:p});continue}if(a==="("){const p=r++;let i=1,o="";if(e[r]==="?")throw new TypeError(`Pattern cannot start with "?" at ${r}`);for(;r<e.length;){if(e[r]==="\\"){o+=e[r++]+e[r++];continue}if(e[r]===")"){if(i--,i===0){r++;break}}else if(e[r]==="("&&(i++,e[r+1]!=="?"))throw new TypeError(`Capturing groups are not allowed at ${r}`);o+=e[r++]}if(i)throw new TypeError(`Unbalanced pattern at ${p}`);if(!o)throw new TypeError(`Missing pattern at ${p}`);t.push({type:"PATTERN",index:r,value:o});continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),new se(t)}class se{constructor(e){this.tokens=e,this.index=0}peek(){return this.tokens[this.index]}tryConsume(e){const t=this.peek();if(t.type===e)return this.index++,t.value}consume(e){const t=this.tryConsume(e);if(t!==void 0)return t;const{type:r,index:a}=this.peek();throw new TypeError(`Unexpected ${r} at ${a}, expected ${e}: ${E}`)}text(){let e="",t;for(;t=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)e+=t;return e}modifier(){return this.tryConsume("?")||this.tryConsume("*")||this.tryConsume("+")}}class b{constructor(e,t){this.tokens=e,this.delimiter=t}}$.TokenData=b;function T(n,e={}){const{encodePath:t=P,delimiter:r=t(ee)}=e,a=[],c=re(n);let p=0;do{const i=c.text();i&&a.push(t(i));const o=c.tryConsume("NAME"),f=c.tryConsume("PATTERN");if(o||f){a.push({name:o||String(p++),pattern:f});const l=c.peek();if(l.type==="*")throw new TypeError(`Unexpected * at ${l.index}, you probably want \`/*\` or \`{/:foo}*\`: ${E}`);continue}if(c.tryConsume("*")){a.push({name:String(p++),pattern:`(?:(?!${w(r)}).)*`,modifier:"*",separator:r});continue}if(c.tryConsume("{")){const l=c.text(),d=c.tryConsume("NAME"),h=c.tryConsume("PATTERN"),m=c.text(),g=c.tryConsume(";")&&c.text();c.consume("}");const y=c.modifier();a.push({name:d||(h?String(p++):""),prefix:t(l),suffix:t(m),pattern:h,modifier:y,separator:g});continue}c.consume("END");break}while(!0);return new b(a,r)}function oe(n,e={}){const t=n instanceof b?n:T(n,e);return ae(t,e)}function ie(n,e){if(typeof n=="string")return()=>n;const t=e||P,r=n.modifier==="+"||n.modifier==="*",a=n.modifier==="?"||n.modifier==="*",{prefix:c="",suffix:p="",separator:i=p+c}=n;if(e&&r){const f=(s,l)=>{if(typeof s!="string")throw new TypeError(`Expected "${n.name}/${l}" to be a string`);return t(s)},u=s=>{if(!Array.isArray(s))throw new TypeError(`Expected "${n.name}" to be an array`);return s.length===0?"":c+s.map(f).join(i)+p};return a?s=>{const l=s[n.name];return l==null?"":l.length?u(l):""}:s=>{const l=s[n.name];return u(l)}}const o=f=>{if(typeof f!="string")throw new TypeError(`Expected "${n.name}" to be a string`);return c+t(f)+p};return a?f=>{const u=f[n.name];return u==null?"":o(u)}:f=>{const u=f[n.name];return o(u)}}function ae(n,e){const{encode:t=encodeURIComponent,loose:r=!0,validate:a=!0,strict:c=!1}=e,p=N(e),i=v(r,n.delimiter),o=D(n,i,[],p,c),f=n.tokens.map((u,s)=>{const l=ie(u,t);if(!a||typeof u=="string")return l;const d=new RegExp(`^${o[s]}$`,p);return h=>{const m=l(h);if(!d.test(m))throw new TypeError(`Invalid value for "${u.name}": ${JSON.stringify(m)}`);return m}});return function(s={}){let l="";for(const d of f)l+=d(s);return l}}function ce(n,e={}){const{decode:t=decodeURIComponent,loose:r=!0}=e,a=n instanceof b?n:T(n,e),c=v(r,a.delimiter),p=[],i=S(a,p,e),o=p.map(f=>{if(t&&(f.modifier==="+"||f.modifier==="*")){const{prefix:u="",suffix:s="",separator:l=s+u}=f,d=new RegExp(c(l),"g");return h=>h.split(d).map(t)}return t||P});return function(u){const s=i.exec(u);if(!s)return!1;const{0:l,index:d}=s,h=Object.create(null);for(let m=1;m<s.length;m++){if(s[m]===void 0)continue;const g=p[m-1],y=o[m-1];h[g.name]=y(s[m])}return{path:l,index:d,params:h}}}function w(n){return n.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function ue(n,e){const t=w(n);return e?`(?:${t})+(?!${t})`:t}function v(n,e){if(!n)return w;const t=new RegExp(`(?:(?!${w(e)}).)+|(.)`,"g");return r=>r.replace(t,ue)}function N(n){return n.sensitive?"":"i"}function S(n,e,t){const{trailing:r=!0,loose:a=!0,start:c=!0,end:p=!0,strict:i=!1}=t,o=N(t),f=v(a,n.delimiter),u=D(n,f,e,o,i);let s=c?"^":"";return s+=u.join(""),r&&(s+=`(?:${f(n.delimiter)})?`),s+=p?"$":`(?=${w(n.delimiter)}|$)`,new RegExp(s,o)}function D(n,e,t,r,a){const c=`(?:(?!${w(n.delimiter)}).)+?`;let p="",i=!0;return n.tokens.map((o,f)=>{if(typeof o=="string")return p=o,e(o);const{prefix:u="",suffix:s="",separator:l=s+u,modifier:d=""}=o,h=e(u),m=e(s);if(o.name){const g=o.pattern?`(?:${o.pattern})`:c,y=fe(g,o.name,r);if(i||(i=R(y,u||p)),!i)throw new TypeError(`Ambiguous pattern for "${o.name}": ${E}`);if(i=!a||R(y,s),p="",t.push(o),d==="+"||d==="*"){const I=d==="*"?"?":"",A=e(l);if(!A)throw new TypeError(`Missing separator for "${o.name}": ${E}`);if(i||(i=!a||R(y,l)),!i)throw new TypeError(`Ambiguous pattern for "${o.name}" separator: ${E}`);return i=!a,`(?:${h}(${g}(?:${A}${g})*)${m})${I}`}return`(?:${h}(${g})${m})${d}`}return`(?:${h}${m})${d}`})}function fe(n,e,t){try{return new RegExp(`^${n}$`,t)}catch(r){throw new TypeError(`Invalid pattern for "${e}": ${r.message}`)}}function R(n,e){return e?!n.test(e):!1}function pe(n,e={}){const t=n instanceof b?n:T(n,e),r=[],a=S(t,r,e);return Object.assign(a,{keys:r})}const le=O({name:"Breadcrumb",__name:"index",setup(n){const e=L(),t=U(),r=B(),{generateI18nTitle:a}=j(),c=k(()=>{var o,f;const i=[];if(t.settings.home.enable&&i.push({path:t.settings.home.fullPath,title:a(t.settings.home.title)}),e.fullPath!==t.settings.home.fullPath&&t.settings.breadcrumb.enableMainMenu&&!["single"].includes(t.settings.menu.mode)){const u=r.allMenus.findIndex(s=>s.children.some(l=>e.fullPath.indexOf(`${l.path}/`)===0||e.fullPath===l.path));(o=r.allMenus[u])!=null&&o.meta&&i.push({path:"",title:a((f=r.allMenus[u].meta)==null?void 0:f.title)})}if(e.meta.breadcrumbNeste){e.meta.breadcrumbNeste.forEach(s=>{s.hide===!1&&i.push({path:s.path,title:a(s.title)})});const u=t.customTitleList.find(s=>s.fullPath===e.fullPath);u&&(i[i.length-1].title=u.title)}return i});function p(i){return Z(i)(e.params)}return(i,o)=>x(t).mode==="pc"&&x(t).settings.app.routeBaseOn!=="filesystem"?(_(),M(W,{key:0,class:q(["breadcrumb whitespace-nowrap px-2",{[`breadcrumb-${x(t).settings.breadcrumb.style}`]:x(t).settings.breadcrumb.style!==""}])},{default:C(()=>[F(X,{name:"breadcrumb"},{default:C(()=>[(_(!0),V(K,null,G(x(c),(f,u)=>(_(),M(Y,{key:`${u}_${f.path}_${f.title}`,to:u<x(c).length-1&&f.path!==""?p(f.path):""},{default:C(()=>[H(z(f.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1},8,["class"])):J("",!0)}}),ge=Q(le,[["__scopeId","data-v-fa888e60"]]);export{ge as default};
