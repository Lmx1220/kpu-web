
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-ia1rdtXp.js";import{d as M,a$ as j,r as $,a8 as z,o as C,a as y,R as Z,S as G,e as i,p as J,M as Q,g as T,q as U,h,w as tt}from"./bootstrap-BssOdyNs.js";import{_ as et}from"./index.vue_vue_type_script_setup_true_lang-CJRusrx0.js";import"./index-CI4shd_A.js";function L(t,o,e,a){return Number.parseFloat((o-a*o/t+e).toFixed(2))}function ot(t){[...t.querySelectorAll("*")].forEach(o=>t.removeChild(o))}function at(t){return t.value}function _(t,o){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const a in o)e.setAttribute(a,o[a]);return e}function lt(t,o,e){if(ot(t),o.length<=1)return;e=e||{},typeof o[0]=="number"&&(o=o.map(n=>({value:n})));const a=e.onmousemove,l=e.onmouseout,f="interactive"in e?e.interactive:!!a,s=e.spotRadius||2,u=s*2,P=e.cursorWidth||2,S=Number.parseFloat(t.attributes["stroke-width"].value),R=e.fetch||at,b=o.map(n=>R(n)),W=Number.parseFloat(t.attributes.width.value)-u*2,w=Number.parseFloat(t.attributes.height.value),N=w-S*2-u,D=Math.max(...b),c=-1e3,F=b.length-1,V=W/F,m=[],B=L(D,N,S+s,b[0]);let g=`M${u} ${B}`;b.forEach((n,d)=>{const r=d*V+u,p=L(D,N,S+s,n);m.push(Object.assign({},o[d],{index:d,x:r,y:p})),g+=` L ${r} ${p}`});const I=_("path",{class:"sparkline--line",d:g,fill:"none"}),X=`${g} V ${w} L ${u} ${w} Z`,Y=_("path",{class:"sparkline--fill",d:X,stroke:"none"});if(t.appendChild(Y),t.appendChild(I),!f)return;const v=_("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:w,"stroke-width":P}),x=_("circle",{class:"sparkline--spot",cx:c,cy:c,r:s});t.appendChild(v),t.appendChild(x);const A=_("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(A),A.addEventListener("mouseout",n=>{v.setAttribute("x1",c.toString()),v.setAttribute("x2",c.toString()),x.setAttribute("cx",c.toString()),l&&l(n)}),A.addEventListener("mousemove",n=>{const d=n.offsetX;let r=m.find(H=>H.x>=d);r||(r=m[F]);const p=m[m.indexOf(r)-1];let k,K;p?(K=p.x+(r.x-p.x)/2,k=d>=K?r:p):k=r;const E=k.x,q=k.y;x.setAttribute("cx",E),x.setAttribute("cy",q),v.setAttribute("x1",E),v.setAttribute("x2",E),a&&a(n,k)})}const nt={class:"sparkline"},st=["width","height","stroke-width","stroke","fill"],rt=M({name:"KSparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){j(l=>({"4b5a1b0a":l.cursorColor,"426f941e":l.spotColor}));const o=t,e=$(),a=$({show:!1,content:"",top:0,left:0});return z(()=>{lt(e.value,o.value,o.tooltip&&{onmousemove:(l,f)=>{a.value.show=!0,a.value.content=f.tooltip,a.value.top=l.offsetY,a.value.left=l.offsetX+20},onmouseout:()=>{a.value.show=!1}})}),(l,f)=>(C(),y("div",nt,[(C(),y("svg",{ref_key:"sparklineRef",ref:e,width:l.width,height:l.height,"stroke-width":l.strokeWidth,stroke:l.strokeColor,fill:l.fillColor},null,8,st)),l.tooltip?Z((C(),y("span",{key:0,class:"tooltip",style:J([`left: ${i(a).left}px`,`top: ${i(a).top}px`])},Q(i(a).content),5)),[[G,i(a).show]]):T("",!0)]))}}),it=U(rt,[["__scopeId","data-v-5f575780"]]),dt=M({name:"ComponentExampleSparkline",__name:"sparkline",setup(t){const o=$([1,5,2,4,8,3,7]),e=$([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(a,l)=>{const f=et,s=it,u=O;return C(),y("div",null,[h(f,{title:"迷你图",content:"KpuSparkline"}),h(u,null,{default:tt(()=>[h(s,{value:i(o)},null,8,["value"]),h(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(s,{value:i(e),tooltip:""},null,8,["value"]),h(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});export{dt as default};
