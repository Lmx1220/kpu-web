
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as N}from"./sub.vue_vue_type_script_setup_true_lang-Dj5ECgVo.js";import{r as P,I as S}from"./item-UPME_XWm.js";import{d as B,r as f,y as m,a4 as E,aY as O,o as c,c as d,F as y,aa as b,h as g,i as w,n as J,$ as q}from"./index-CzepmmFI.js";const F=B({name:"MainMenu",__name:"index",props:{menu:{},value:{},mode:{default:"vertical"},collapse:{type:Boolean,default:!1},showCollapseName:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},direction:{default:"ltr"}},setup(C){const u=C,o=f(u.value),s=f({}),t=f({}),i=f([]),I=f([]);function k(e,l=[]){e.forEach(a=>{const n=a.path??JSON.stringify(a);if(a.children){const r=[...l,n];t.value[n]={index:n,indexPath:r,active:!1},k(a.children,r)}else s.value[n]={index:n,indexPath:l}})}const h=e=>{i.value.includes(e)||i.value.push(e)},v=e=>{if(Array.isArray(e)){q(()=>{v(e.at(-1)),e.length>1&&v(e.slice(0,-1))});return}Object.keys(t.value).forEach(l=>{t.value[l].indexPath.includes(e)&&(i.value=i.value.filter(a=>a!==e))})};function M(e){var l,a;for(const n in t.value)t.value[n].active=!1;(l=t.value[e])==null||l.indexPath.forEach(n=>{t.value[n].active=!0}),(a=s.value[e])==null||a.indexPath.forEach(n=>{t.value[n].active=!0})}const _=e=>{(u.mode==="horizontal"||u.collapse)&&(i.value=[]),M(e)},x=(e,l)=>{i.value.includes(e)?v(e):h(e)};function p(){const e=o.value&&s.value[o.value];M(o.value),!(!e||u.collapse)&&e.indexPath.forEach(l=>{const a=t.value[l];a&&h(l,a.indexPath)})}return m(()=>u.menu,e=>{k(e),p()},{deep:!0,immediate:!0}),m(()=>u.value,e=>{s.value[e]||(o.value="");const l=s.value[e]||o.value&&s.value[o.value]||s.value[u.value];l?o.value=l.index:o.value=e,p()}),m(()=>u.collapse,e=>{e&&(i.value=[]),p()}),E(P,O({props:u,items:s,subMenus:t,activeIndex:o,openedMenus:i,mouseInMenu:I,openMenu:h,closeMenu:v,handleMenuItemClick:_,handleSubMenuClick:x})),(e,l)=>(c(),d("div",{class:J(["h-full w-full flex flex-col of-hidden transition-all",{"flex-row! w-auto":u.mode==="horizontal","py-1":u.mode==="vertical"}])},[(c(!0),d(y,null,b(e.menu,a=>{var n,r;return c(),d(y,{key:a.path??JSON.stringify(a)},[((n=a.meta)==null?void 0:n.menu)!==!1?(c(),d(y,{key:0},[(r=a.children)!=null&&r.length?(c(),g(N,{key:0,menu:a,"unique-key":[a.path??JSON.stringify(a)]},null,8,["menu","unique-key"])):(c(),g(S,{key:1,item:a,"unique-key":[a.path??JSON.stringify(a)],onClick:z=>_(a.path??JSON.stringify(a))},null,8,["item","unique-key","onClick"]))],64)):w("",!0)],64)}),128))],2))}});export{F as _};
