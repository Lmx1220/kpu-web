
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as W,aU as O,r as $,B as U,o as C,f as y,k as q,v as Z,j as i,L as G,t as J,N as K,z as Q,h,w as T,U as tt}from"./index-DtuMVnuH.js";import{_ as et}from"./index.vue_vue_type_script_setup_true_lang-CAPDcj2Q.js";function P(t,o,e,l){return Number.parseFloat((o-l*o/t+e).toFixed(2))}function ot(t){[...t.querySelectorAll("*")].forEach(o=>t.removeChild(o))}function lt(t){return t.value}function _(t,o){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in o)e.setAttribute(l,o[l]);return e}function at(t,o,e){if(ot(t),o.length<=1)return;e=e||{},typeof o[0]=="number"&&(o=o.map(n=>({value:n})));const l=e.onmousemove,a=e.onmouseout,f="interactive"in e?e.interactive:!!l,s=e.spotRadius||2,u=s*2,B=e.cursorWidth||2,S=Number.parseFloat(t.attributes["stroke-width"].value),M=e.fetch||lt,b=o.map(n=>M(n)),R=Number.parseFloat(t.attributes.width.value)-u*2,w=Number.parseFloat(t.attributes.height.value),N=w-S*2-u,D=Math.max(...b),c=-1e3,F=b.length-1,V=R/F,m=[],I=P(D,N,S+s,b[0]);let g=`M${u} ${I}`;b.forEach((n,d)=>{const r=d*V+u,p=P(D,N,S+s,n);m.push(Object.assign({},o[d],{index:d,x:r,y:p})),g+=` L ${r} ${p}`});const X=_("path",{class:"sparkline--line",d:g,fill:"none"}),Y=`${g} V ${w} L ${u} ${w} Z`,j=_("path",{class:"sparkline--fill",d:Y,stroke:"none"});if(t.appendChild(j),t.appendChild(X),!f)return;const v=_("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:w,"stroke-width":B}),x=_("circle",{class:"sparkline--spot",cx:c,cy:c,r:s});t.appendChild(v),t.appendChild(x);const A=_("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(A),A.addEventListener("mouseout",n=>{v.setAttribute("x1",c.toString()),v.setAttribute("x2",c.toString()),x.setAttribute("cx",c.toString()),a&&a(n)}),A.addEventListener("mousemove",n=>{const d=n.offsetX;let r=m.find(H=>H.x>=d);r||(r=m[F]);const p=m[m.indexOf(r)-1];let k,L;p?(L=p.x+(r.x-p.x)/2,k=d>=L?r:p):k=r;const E=k.x,z=k.y;x.setAttribute("cx",E),x.setAttribute("cy",z),v.setAttribute("x1",E),v.setAttribute("x2",E),l&&l(n,k)})}const nt={class:"sparkline"},st=["width","height","stroke-width","stroke","fill"],rt=W({name:"Sparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){O(a=>({"614d65b6":a.cursorColor,"4d3a90f9":a.spotColor}));const o=t,e=$(),l=$({show:!1,content:"",top:0,left:0});return U(()=>{at(e.value,o.value,o.tooltip&&{onmousemove:(a,f)=>{l.value.show=!0,l.value.content=f.tooltip,l.value.top=a.offsetY,l.value.left=a.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(a,f)=>(C(),y("div",nt,[(C(),y("svg",{ref_key:"sparklineRef",ref:e,width:a.width,height:a.height,"stroke-width":a.strokeWidth,stroke:a.strokeColor,fill:a.fillColor},null,8,st)),a.tooltip?q((C(),y("span",{key:0,class:"tooltip",style:G([`left: ${i(l).left}px`,`top: ${i(l).top}px`])},J(i(l).content),5)),[[Z,i(l).show]]):K("",!0)]))}}),it=Q(rt,[["__scopeId","data-v-54449392"]]),pt=W({name:"ComponentExampleSparkline",__name:"sparkline.demo",setup(t){const o=$([1,5,2,4,8,3,7]),e=$([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,a)=>{const f=et,s=it,u=tt;return C(),y("div",null,[h(f,{title:"迷你图",content:"Sparkline"}),h(u,null,{default:T(()=>[h(s,{value:i(o)},null,8,["value"]),h(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(s,{value:i(e),tooltip:""},null,8,["value"]),h(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});export{pt as default};
