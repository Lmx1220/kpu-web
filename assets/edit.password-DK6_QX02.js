
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as x,P,r as w,b as y,j as e,w as r,L as l,o as h,f as a,x as B,O as C,Q as i}from"./index-putfknEa.js";const F=x({name:"PersonalEditPassword",__name:"edit.password",setup(I){const c=P(),d=w(),o=w({password:"",newpassword:"",checkpassword:""}),f=w({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(p,s,n)=>{s!==o.value.newpassword?n(new Error("请确认新密码")):n()}}]});function _(){d.value&&d.value.validate(p=>{p&&c.editPassword({password:o.value.password,newPassword:o.value.newpassword}).then(()=>{C({type:"success",message:"模拟修改成功，请重新登录"}),c.logout()})})}return(p,s)=>{const n=l("PageHeader"),u=l("ElInput"),m=l("ElFormItem"),g=l("ElForm"),E=l("ElCol"),V=l("ElRow"),b=l("PageMain"),k=l("ElButton"),v=l("FixedActionBar");return h(),y("div",null,[e(n,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(b,null,{default:r(()=>[e(V,null,{default:r(()=>[e(E,{md:24,lg:12},{default:r(()=>[e(g,{ref_key:"formRef",ref:d,model:a(o),rules:a(f),"label-width":"120px"},{default:r(()=>[e(m,{label:"原密码",prop:"password"},{default:r(()=>[e(u,{modelValue:a(o).password,"onUpdate:modelValue":s[0]||(s[0]=t=>a(o).password=t),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(m,{label:"新密码",prop:"newpassword"},{default:r(()=>[e(u,{modelValue:a(o).newpassword,"onUpdate:modelValue":s[1]||(s[1]=t=>a(o).newpassword=t),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(m,{label:"确认新密码",prop:"checkpassword"},{default:r(()=>[e(u,{modelValue:a(o).checkpassword,"onUpdate:modelValue":s[2]||(s[2]=t=>a(o).checkpassword=t),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(v,null,{default:r(()=>[e(k,{type:"primary",size:"large",onClick:_},{default:r(()=>s[3]||(s[3]=[B(" 提交 ")])),_:1})]),_:1})])}}});typeof i=="function"&&i(F);export{F as default};
