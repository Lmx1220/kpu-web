
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-cZb7P6ts.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-D_6FKGZK.js";import{d as ee,u as oe,a as te,b as le,r as u,s as h,e as v,f as ae,h as e,w as t,i as s,j as o,k as U,v as q,m as se,o as re,t as $,n as ne,q as i,x as I,y as z,_ as ie,p as ue,l as de,z as pe}from"./index-Cv74hUM5.js";import ce from"./index-cdpAbwkz.js";import"./HDropdownMenu.vue_vue_type_script_setup_true_lang-CuSAKVBE.js";const y=b=>(ue("data-v-6c274a28"),b=b(),de(),b),me={id:"login-box"},ge={class:"login-banner"},fe=["src"],_e=["src"],ve={class:"title-container"},we={class:"title"},he={class:"flex-bar"},be={class:"sub-link"},xe=y(()=>s("span",{class:"text"},"还没有帐号?",-1)),ye={style:{"margin-top":"20px","margin-bottom":"-20px","text-align":"center"}},ke=y(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),Ve={class:"sub-link"},Ee=y(()=>s("span",{class:"text"},"已经有帐号?",-1)),Ce=y(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),Re={class:"sub-link"},Fe=ee({name:"Login",__name:"login2",setup(b){var P;const{t:k}=se(),L=new URL("/assets/logo-BGVN89r2.png",import.meta.url).href,B=new URL("/assets/login-banner-ZfMZACb6.png",import.meta.url).href,D="kpu-web",N=oe(),M=te(),A=le(),m=u("login"),w=u(!1),K=u(((P=N.query.redirect)==null?void 0:P.toString())??"/"),V=u(),r=u({account:h.local.get("login_account")??"",password:"",remember:h.local.has("login_account")}),T=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]});function E(){V.value&&V.value.validate(f=>{f&&(w.value=!0,A.login({username:r.value.account,password:r.value.password}).then(()=>{w.value=!1,r.value.remember?h.local.set("login_account",r.value.account??""):h.local.remove("login_account"),M.push(K.value)}).catch(()=>{w.value=!1}))})}const C=u(),d=u({account:"",captcha:"",password:"",checkPassword:""}),Z=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(f,l,n)=>{l!==d.value.password?n(new Error("两次输入的密码不一致")):n()}}]});function j(){z({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),C.value&&C.value.validate(f=>{})}const R=u(),g=u({account:h.local.get("login_account")??"",captcha:"",newPassword:""}),G=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function H(){z({message:"重置密码模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),R.value&&R.value.validate(f=>{})}function S(f){r.value.account=f,r.value.password="kpu",E()}return(f,l)=>{const n=ie,J=Y,p=v("ElInput"),c=v("ElFormItem"),O=v("ElCheckbox"),x=v("ElLink"),_=v("ElButton"),Q=v("ElDivider"),F=v("ElForm"),W=X;return re(),ae("div",null,[e(J,{class:"i18n-selector"},{default:t(()=>[e(n,{name:"i-ri:translate"})]),_:1}),s("div",me,[s("div",ge,[s("img",{src:o(L),class:"logo"},null,8,fe),s("img",{src:o(B),class:"banner"},null,8,_e)]),U(e(F,{ref_key:"loginFormRef",ref:V,model:o(r),rules:o(T),class:"login-form",autocapitalize:"on"},{default:t(()=>[s("div",ve,[s("h3",we," 欢迎来到 "+$(o(D))+" ! 👋🏻 ",1)]),s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(r).account,"onUpdate:modelValue":l[0]||(l[0]=a=>o(r).account=a),placeholder:o(k)("app.account"),autocomplete:"on",tabindex:"1",text:""},{prefix:t(()=>[e(n,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(c,{prop:"password"},{default:t(()=>[e(p,{modelValue:o(r).password,"onUpdate:modelValue":l[1]||(l[1]=a=>o(r).password=a),type:"password",placeholder:o(k)("app.password"),tabindex:"2",autocomplete:"on","show-password":"",onKeyup:ne(E,["enter"])},{prefix:t(()=>[e(n,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),s("div",he,[e(O,{modelValue:o(r).remember,"onUpdate:modelValue":l[2]||(l[2]=a=>o(r).remember=a)},{default:t(()=>[i(" 记住我 ")]),_:1},8,["modelValue"]),e(x,{underline:!1,type:"primary",onClick:l[3]||(l[3]=a=>m.value="reset")},{default:t(()=>[i(" 忘记密码了? ")]),_:1})]),e(_,{loading:o(w),size:"large",style:{width:"100%"},type:"primary",onClick:I(E,["prevent"])},{default:t(()=>[i($(o(k)("app.login")),1)]),_:1},8,["loading"]),s("div",be,[xe,e(x,{underline:!1,type:"primary",onClick:l[4]||(l[4]=a=>m.value="register")},{default:t(()=>[i(" 创建新帐号 ")]),_:1})]),s("div",ye,[e(Q,null,{default:t(()=>[i("演示账号一键登录")]),_:1}),e(_,{plain:"",size:"small",type:"primary",onClick:l[5]||(l[5]=a=>S("kpu"))},{default:t(()=>[i(" kpu ")]),_:1}),e(_,{plain:"",size:"small",onClick:l[6]||(l[6]=a=>S("test"))},{default:t(()=>[i(" test ")]),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="login"]]),U(e(F,{ref_key:"registerFormRef",ref:C,model:o(d),rules:o(Z),class:"login-form","auto-complete":"on"},{default:t(()=>[ke,s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(d).account,"onUpdate:modelValue":l[7]||(l[7]=a=>o(d).account=a),autocomplete:"on",placeholder:"用户名",tabindex:"1"},{prefix:t(()=>[e(n,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"captcha"},{default:t(()=>[e(p,{modelValue:o(d).captcha,"onUpdate:modelValue":l[8]||(l[8]=a=>o(d).captcha=a),autocomplete:"on",placeholder:"验证码",tabindex:"2"},{prefix:t(()=>[e(n,{name:"ep:key"})]),append:t(()=>[e(_,null,{default:t(()=>[i("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"password"},{default:t(()=>[e(p,{modelValue:o(d).password,"onUpdate:modelValue":l[9]||(l[9]=a=>o(d).password=a),type:"password",placeholder:"密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:t(()=>[e(n,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"checkPassword"},{default:t(()=>[e(p,{modelValue:o(d).checkPassword,"onUpdate:modelValue":l[10]||(l[10]=a=>o(d).checkPassword=a),type:"password",placeholder:"确认密码",tabindex:"4",autocomplete:"on","show-password":""},{prefix:t(()=>[e(n,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(_,{loading:o(w),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:I(j,["prevent"])},{default:t(()=>[i(" 注册 ")]),_:1},8,["loading"]),s("div",Ve,[Ee,e(x,{underline:!1,type:"primary",onClick:l[11]||(l[11]=a=>m.value="login")},{default:t(()=>[i(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="register"]]),U(e(F,{ref_key:"resetFormRef",ref:R,model:o(g),rules:o(G),class:"login-form","auto-complete":"on"},{default:t(()=>[Ce,s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(g).account,"onUpdate:modelValue":l[12]||(l[12]=a=>o(g).account=a),autocomplete:"on",placeholder:"用户名",tabindex:"1"},{prefix:t(()=>[e(n,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"captcha"},{default:t(()=>[e(p,{modelValue:o(g).captcha,"onUpdate:modelValue":l[13]||(l[13]=a=>o(g).captcha=a),autocomplete:"on",placeholder:"验证码",tabindex:"2"},{prefix:t(()=>[e(n,{name:"ep:key"})]),append:t(()=>[e(_,null,{default:t(()=>[i("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"newPassword"},{default:t(()=>[e(p,{modelValue:o(g).newPassword,"onUpdate:modelValue":l[14]||(l[14]=a=>o(g).newPassword=a),type:"password",placeholder:"新密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:t(()=>[e(n,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(_,{loading:o(w),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:I(H,["prevent"])},{default:t(()=>[i(" 确认 ")]),_:1},8,["loading"]),s("div",Re,[e(x,{underline:!1,type:"primary",onClick:l[15]||(l[15]=a=>m.value="login")},{default:t(()=>[i(" 返回登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="reset"]])]),e(ce),e(W,{class:"login-switcher"})])}}}),$e=pe(Fe,[["__scopeId","data-v-6c274a28"]]);export{$e as default};
