
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as S}from"./index.vue_vue_type_script_setup_true_lang-ia1rdtXp.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-CJRusrx0.js";import{d as B,u as L,r as V,c as H,aH as s,ca as N,o as l,a as r,h as t,w as n,L as i,e as g,b as m,M as p,R as D,a7 as K,l as M}from"./bootstrap-BssOdyNs.js";import"./index-CI4shd_A.js";const I={key:0},P={key:0},j={style:{"white-space":"pre-wrap"}},J=["title"],O={key:1},R={key:1},q="production",U=B({__name:"bug",setup(z){const v=L(),c=V(""),k=H(()=>c.value?[JSON.parse(c.value)]:[]);function f(d){switch(K(()=>{c.value=sessionStorage.getItem("errorLog")||""}),d){case 1:a=abc;break;case 2:testMethod();break}}function b(d){window.open(d,"_blank")}return(d,o)=>{const E=M,u=s("ElButton"),h=$,y=s("ElTag"),_=s("ElTableColumn"),w=s("ElLink"),C=s("ElTable"),T=S,x=N("timeago");return l(),r("div",null,[t(h,{title:"错误日志",content:"错误日志通过 Vue 提供的全局错误钩子 errorHandler 进行拦截，如果需要上报给后端，需自行实现"},{default:n(()=>[t(u,{onClick:o[0]||(o[0]=e=>b("https://cn.vuejs.org/api/application.html#app-config-errorhandler"))},{icon:n(()=>[t(E,{name:"i-ep:link"})]),default:n(()=>[o[3]||(o[3]=i(" Vue errorHandler 说明 "))]),_:1})]),_:1}),t(T,null,{default:n(()=>[q!=="development"?(l(),r("div",I,[g(v).settings.app.enableErrorLog?(l(),r("div",P,[t(u,{type:"danger",onClick:o[1]||(o[1]=e=>f(1))},{default:n(()=>o[4]||(o[4]=[i(" 模拟触发错误1 ")])),_:1}),t(u,{type:"danger",onClick:o[2]||(o[2]=e=>f(2))},{default:n(()=>o[5]||(o[5]=[i(" 模拟触发错误2 ")])),_:1}),t(C,{data:g(k),border:""},{default:n(()=>[t(_,{label:"错误信息",width:"200",align:"center"},{default:n(({row:e})=>[m("div",null,p(e.err.message),1),t(y,{type:"danger"},{default:n(()=>[i(p(e.info),1)]),_:2},1024)]),_:1}),t(_,{label:"错误详情"},{default:n(({row:e})=>[m("div",j,p(e.err.stack),1)]),_:1}),t(_,{label:"错误链接",width:"200",align:"center"},{default:n(({row:e})=>[t(w,{href:e.url,target:"_blank"},{default:n(()=>[i(p(e.url),1)]),_:2},1032,["href"])]),_:1}),t(_,{label:"时间",prop:"datetime",width:"200",align:"center"},{default:n(({row:e})=>[D(m("span",{title:e.datetime},null,8,J),[[x,e.datetime]])]),_:1})]),_:1},8,["data"])])):(l(),r("div",O," 请到 /src/settings.ts 里打开错误日志功能，再进入该页面查看演示 "))])):(l(),r("div",R," 当前为开发环境，该功能关闭演示 "))]),_:1})])}}});export{U as default};
