
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{aT as vq,H as Oj,d as nq,bo as yq,r as Dj,a3 as YG,B as oq,aq as Cq,b6 as wq,bs as Sq,av as XG,c as xq,e as kj,o as Tq,f as Eq,h as ry,w as Fw,i as _j,q as Uk,j as a6,Y as kq,_ as _q,U as Aq,z as Oq,V as JG}from"./index-BVRkYg_n.js";import{_ as Dq}from"./index.vue_vue_type_script_setup_true_lang-DWSGjijE.js";import Rq from"./alert-CXy0YJCp.js";var sq={exports:{}};(function(Gt){(function(){var uo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Fn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},eo=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Yn=function(e,n){return ro(function(o,r){return e.eq(n(o),n(r))})},ro=function(e){return{eq:e}},In=ro(function(e,n){return e===n}),We=In,tn=function(e){return ro(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},Oo=function(e,n){return Yn(tn(e),function(o){return eo(o,n)})},Zo=function(e){return ro(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!Oo(We).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Do=ro(function(e,n){if(e===n)return!0;var o=uo(e),r=uo(n);return o!==r?!1:Fn(o)?e===n:o==="array"?tn(Do).eq(e,n):o==="object"?Zo(Do).eq(e,n):!1});const Ro=Object.getPrototypeOf,Nn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},jo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Nn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Wn=e=>n=>jo(n)===e,Ct=e=>n=>typeof n===e,zn=e=>n=>e===n,Ue=(e,n)=>st(e)&&Nn(e,n,(o,r)=>Ro(o)===r),ee=Wn("string"),st=Wn("object"),Zn=e=>Ue(e,Object),it=Wn("array"),W=zn(null),Dt=Ct("boolean"),cn=zn(void 0),xn=e=>e==null,Re=e=>!xn(e),ie=Ct("function"),Go=Ct("number"),co=(e,n)=>{if(it(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Pt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),To=(e,n)=>o=>e(n(o)),rt=e=>()=>e,Ho=e=>e,Yt=(e,n)=>e===n;function Ke(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const go=e=>n=>!e(n),Vs=e=>()=>{throw new Error(e)},ft=e=>e(),pn=e=>{e()},Me=rt(!1),Je=rt(!0);class I{constructor(n,o){this.tag=n,this.value=o}static some(n){return new I(!0,n)}static none(){return I.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?I.some(n(this.value)):I.none()}bind(n){return this.tag?n(this.value):I.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:I.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Re(n)?I.some(n):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const Ns=Array.prototype.slice,ao=Array.prototype.indexOf,bo=Array.prototype.push,zo=(e,n)=>ao.call(e,n),Gc=(e,n)=>{const o=zo(e,n);return o===-1?I.none():I.some(o)},He=(e,n)=>zo(e,n)>-1,vt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},je=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},ye=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},ln=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},vo=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Lt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},hs=(e,n,o)=>(ln(e,(r,a)=>{o=n(o,r,a)}),o),jn=(e,n,o)=>(ye(e,(r,a)=>{o=n(o,r,a)}),o),fr=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return I.some(u);if(o(u,r))break}return I.none()},Vo=(e,n)=>fr(e,n,Me),xs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return I.some(o)}return I.none()},oa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!it(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);bo.apply(n,e[o])}return n},Us=(e,n)=>oa(je(e,n)),Bs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},ps=e=>{const n=Ns.call(e,0);return n.reverse(),n},wc=(e,n)=>Lt(e,o=>!He(n,o)),cs=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},ns=(e,n)=>{const o=Ns.call(e,0);return o.sort(n),o},lr=(e,n)=>n>=0&&n<e.length?I.some(e[n]):I.none(),lo=e=>lr(e,0),Cs=e=>lr(e,e.length-1),gr=ie(Array.from)?Array.from:e=>Ns.call(e),$c=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return I.none()},dc=(e,n)=>{const o=[],r=ie(n)?a=>vt(o,u=>n(u,a)):a=>He(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},ws=Object.keys,ir=Object.hasOwnProperty,ht=(e,n)=>{const o=ws(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},Mo=(e,n)=>_r(e,(o,r)=>({k:r,v:n(o,r)})),_r=(e,n)=>{const o={};return ht(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},Kr=e=>(n,o)=>{e[o]=n},Zr=(e,n,o,r)=>{ht(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Hr=(e,n)=>{const o={},r={};return Zr(e,n,Kr(o),Kr(r)),{t:o,f:r}},Jo=(e,n)=>{const o={};return Zr(e,n,Kr(o),Pt),o},sc=(e,n)=>{const o=[];return ht(e,(r,a)=>{o.push(n(r,a))}),o},jr=e=>sc(e,Ho),os=(e,n)=>un(e,n)?I.from(e[n]):I.none(),un=(e,n)=>ir.call(e,n),tr=(e,n)=>un(e,n)&&e[n]!==void 0&&e[n]!==null,rc=(e,n,o=Do)=>Zo(o).eq(e,n),Ga=e=>{const n={};return ye(e,o=>{n[o]={}}),ws(n)},qa=e=>e.length!==void 0,as=Array.isArray,Ws=e=>{if(as(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ps=(e,n,o)=>{if(!e)return!1;if(o=o||e,qa(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(un(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},mc=(e,n)=>{const o=[];return Ps(e,(r,a)=>{o.push(n(r,a,e))}),o},sa=(e,n)=>{const o=[];return Ps(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},hr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},de=(e,n,o,r)=>{let a=cn(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},re=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Oe=e=>e[e.length-1],ze=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},sn=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=a||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!C,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,N=!E&&!C&&!M;return{isiPad:rt(a),isiPhone:rt(u),isTablet:rt(C),isPhone:rt(E),isTouch:rt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:rt(M),isDesktop:rt(N)}},vn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Xn=(e,n)=>{const o=vn(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Hn(r(1),r(2))},Ts=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?be():Xn(e,o)},be=()=>Hn(0,0),Hn=(e,n)=>({major:e,minor:n}),ue={nu:Hn,detect:Ts,unknown:be},fe=(e,n)=>$c(n.brands,o=>{const r=o.brand.toLowerCase();return Vo(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:ue.nu(parseInt(o.version,10),0)}))}),tt=(e,n)=>{const o=String(n).toLowerCase();return Vo(e,r=>r.search(o))},lt=(e,n)=>tt(e,n).map(o=>{const r=ue.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ft=(e,n)=>tt(e,n).map(o=>{const r=ue.detect(o.versionRegexes,n);return{current:o.name,version:r}}),dn=(e,n)=>e.substring(n),nn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,on=(e,n)=>yn(e,n)?dn(e,n.length):e,an=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?cn(r)?!0:a+n.length<=r:!1},yn=(e,n)=>nn(e,n,0),yo=(e,n)=>nn(e,n,e.length-n.length),bs=e=>n=>n.replace(e,""),Sc=bs(/^\s+|\s+$/g),ra=bs(/^\s+/g),ca=bs(/\s+$/g),Bn=e=>e.length>0,mo=e=>!Bn(e),Qo=(e,n)=>n<=0?"":new Array(n+1).join(e),fc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?I.none():I.some(o)},Br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zs=e=>n=>an(n,e),Es=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>an(e,"edge/")&&an(e,"chrome")&&an(e,"safari")&&an(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Br],search:e=>an(e,"chrome")&&!an(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>an(e,"msie")||an(e,"trident")},{name:"Opera",versionRegexes:[Br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zs("firefox")},{name:"Safari",versionRegexes:[Br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(an(e,"safari")||an(e,"mobile/"))&&an(e,"applewebkit")}],Fc=[{name:"Windows",search:Zs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>an(e,"iphone")||an(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zs("linux"),versionRegexes:[]},{name:"Solaris",search:Zs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vl={browsers:rt(Es),oses:rt(Fc)},ss="Edge",Yr="Chromium",Ic="IE",Ar="Opera",aa="Firefox",$a="Safari",xc=()=>la({current:void 0,version:ue.unknown()}),la=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(ss),isChromium:r(Yr),isIE:r(Ic),isOpera:r(Ar),isFirefox:r(aa),isSafari:r($a)}},wa={unknown:xc,nu:la,edge:rt(ss),chromium:rt(Yr),ie:rt(Ic),opera:rt(Ar),firefox:rt(aa),safari:rt($a)},_i="Windows",qc="iOS",ll="Android",gc="Linux",Sa="macOS",Cl="Solaris",Ul="FreeBSD",wu="ChromeOS",Ai=()=>Kc({current:void 0,version:ue.unknown()}),Kc=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(_i),isiOS:r(qc),isAndroid:r(ll),isMacOS:r(Sa),isLinux:r(gc),isSolaris:r(Cl),isFreeBSD:r(Ul),isChromeOS:r(wu)}},Yi={unknown:Ai,nu:Kc,windows:rt(_i),ios:rt(qc),android:rt(ll),linux:rt(gc),macos:rt(Sa),solaris:rt(Cl),freebsd:rt(Ul),chromeos:rt(wu)},ce={detect:(e,n,o)=>{const r=Vl.browsers(),a=Vl.oses(),u=n.bind(C=>fe(r,C)).orThunk(()=>lt(r,e)).fold(wa.unknown,wa.nu),f=Ft(a,e).fold(Yi.unknown,Yi.nu),b=sn(f,u,e,o);return{browser:u,os:f,deviceType:b}}},we=e=>window.matchMedia(e).matches;let qe=ze(()=>ce.detect(navigator.userAgent,I.from(navigator.userAgentData),we));const gt=()=>qe(),Qt=navigator.userAgent,xo=gt(),Po=xo.browser,so=xo.os,vs=xo.deviceType,nr=Qt.indexOf("Windows Phone")!==-1,St={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Po.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Po.isIE(),windowsPhone:nr,browser:{current:Po.current,version:Po.version,isChromium:Po.isChromium,isEdge:Po.isEdge,isFirefox:Po.isFirefox,isIE:Po.isIE,isOpera:Po.isOpera,isSafari:Po.isSafari},os:{current:so.current,version:so.version,isAndroid:so.isAndroid,isChromeOS:so.isChromeOS,isFreeBSD:so.isFreeBSD,isiOS:so.isiOS,isLinux:so.isLinux,isMacOS:so.isMacOS,isSolaris:so.isSolaris,isWindows:so.isWindows},deviceType:{isDesktop:vs.isDesktop,isiPad:vs.isiPad,isiPhone:vs.isiPhone,isPhone:vs.isPhone,isTablet:vs.isTablet,isTouch:vs.isTouch,isWebView:vs.isWebView}},Su=/^\s*|\s*$/g,_s=e=>xn(e)?"":(""+e).replace(Su,""),$=(e,n)=>n?n==="array"&&as(e)?!0:typeof e===n:e!==void 0,X=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},oe=un,Ne=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(un(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Bt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ps(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Bt(a,n,o,r),!0)))},dt={trim:_s,isArray:as,is:$,toArray:Ws,makeMap:X,each:Ps,map:mc,grep:sa,inArray:hr,hasOwn:oe,extend:Ne,walk:Bt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>it(e)?e:e===""?[]:mc(e.split(n||","),_s),_addCacheSuffix:e=>{const n=St.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},$s=(e,n,o=Yt)=>e.exists(r=>o(r,n)),Yc=(e,n,o=Yt)=>zr(e,n,o).getOr(e.isNone()&&n.isNone()),Ys=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},zr=(e,n,o)=>e.isSome()&&n.isSome()?I.some(o(e.getOrDie(),n.getOrDie())):I.none(),il=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?I.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):I.none(),$o=(e,n)=>e?I.some(n):I.none(),Xc=typeof window<"u"?window:Function("return this;")(),sr=(e,n)=>{let o=n??Xc;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Wl=(e,n)=>{const o=e.split(".");return sr(o,n)},ur=(e,n)=>Wl(e,n),xu=(e,n)=>{const o=ur(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},hm=Object.getPrototypeOf,ug=e=>xu("HTMLElement",e),pr=e=>{const n=Wl("ownerDocument.defaultView",e);return st(e)&&(ug(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(hm(e).constructor.name))},wl=8,hc=9,Tc=11,Jc=1,Rd=3,No=e=>e.dom.nodeName.toLowerCase(),ia=e=>e.dom.nodeType,Lc=e=>n=>ia(n)===e,K=e=>ia(e)===wl||No(e)==="#comment",se=e=>ke(e)&&pr(e.dom),ke=Lc(Jc),Be=Lc(Rd),mn=Lc(hc),Co=Lc(Tc),Xs=e=>n=>ke(n)&&No(n)===e,pc=(e,n,o)=>{if(ee(o)||Dt(o)||Go(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Eo=(e,n,o)=>{pc(e.dom,n,o)},Xr=(e,n)=>{const o=e.dom;ht(n,(r,a)=>{pc(o,a,r)})},rr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Pr=(e,n)=>I.from(rr(e,n)),Dr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Or=(e,n)=>{e.dom.removeAttribute(n)},Fa=e=>{const n=e.dom.attributes;return n==null||n.length===0},Zl=e=>jn(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Ec=(e,n)=>{const o=rr(e,n);return o===void 0||o===""?[]:o.split(" ")},Ia=(e,n,o)=>{const a=Ec(e,n).concat([o]);return Eo(e,n,a.join(" ")),!0},oi=(e,n,o)=>{const r=Lt(Ec(e,n),a=>a!==o);return r.length>0?Eo(e,n,r.join(" ")):Or(e,n),!1},si=e=>e.dom.classList!==void 0,Jm=e=>Ec(e,"class"),Tu=(e,n)=>Ia(e,"class",n),jl=(e,n)=>oi(e,"class",n),xa=(e,n)=>He(Jm(e),n)?jl(e,n):Tu(e,n),Eu=(e,n)=>{si(e)?e.dom.classList.add(n):Tu(e,n)},Md=e=>{(si(e)?e.dom.classList:Jm(e)).length===0&&Or(e,"class")},Oi=(e,n)=>{si(e)?e.dom.classList.remove(n):jl(e,n),Md(e)},dg=(e,n)=>{const o=si(e)?e.dom.classList.toggle(n):xa(e,n);return Md(e),o},Nd=(e,n)=>si(e)&&e.dom.classList.contains(n),mg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Ju(r.childNodes[0])},Xu=(e,n)=>{const r=(n||document).createElement(e);return Ju(r)},fg=(e,n)=>{const r=(n||document).createTextNode(e);return Ju(r)},Ju=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},me={fromHtml:mg,fromTag:Xu,fromText:fg,fromDom:Ju,fromPoint:(e,n,o)=>I.from(e.dom.elementFromPoint(n,o)).map(Ju)},pm=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Ka=(e,n)=>{const o=e.dom;if(o.nodeType!==Jc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Xi=e=>e.nodeType!==Jc&&e.nodeType!==hc&&e.nodeType!==Tc||e.childElementCount===0,gg=(e,n)=>{const o=n===void 0?document:n.dom;return Xi(o)?[]:je(o.querySelectorAll(e),me.fromDom)},wh=(e,n)=>{const o=n===void 0?document:n.dom;return Xi(o)?I.none():I.from(o.querySelector(e)).map(me.fromDom)},ls=(e,n)=>e.dom===n.dom,Ta=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ul=e=>me.fromDom(e.dom.ownerDocument),kc=e=>mn(e)?e:ul(e),Qu=e=>me.fromDom(kc(e).dom.documentElement),ri=e=>me.fromDom(kc(e).dom.defaultView),ua=e=>I.from(e.dom.parentNode).map(me.fromDom),ci=e=>I.from(e.dom.parentElement).map(me.fromDom),hg=(e,n)=>{const o=ie(n)?n:Me;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=me.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Sh=e=>{const n=o=>Lt(o,r=>!ls(e,r));return ua(e).map(_c).map(n).getOr([])},Sl=e=>I.from(e.dom.previousSibling).map(me.fromDom),ai=e=>I.from(e.dom.nextSibling).map(me.fromDom),Qm=e=>ps(pm(e,Sl)),Ea=e=>pm(e,ai),_c=e=>je(e.dom.childNodes,me.fromDom),ku=(e,n)=>{const o=e.dom.childNodes;return I.from(o[n]).map(me.fromDom)},Bd=e=>ku(e,0),Gl=e=>ku(e,e.dom.childNodes.length-1),Qc=e=>e.dom.childNodes.length,ef=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return me.fromDom(n)},tf=e=>Co(e)&&Re(e.dom.host),nf=ie(Element.prototype.attachShadow)&&ie(Node.prototype.getRootNode),bm=rt(nf),xl=nf?e=>me.fromDom(e.dom.getRootNode()):kc,of=e=>tf(e)?e:ef(kc(e)),xh=e=>tf(e)?e:me.fromDom(kc(e).dom.body),Wp=e=>{const n=xl(e);return tf(n)?I.some(n):I.none()},Th=e=>me.fromDom(e.dom.host),sf=e=>{if(bm()&&Re(e.target)){const n=me.fromDom(e.target);if(ke(n)&&vm(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return lo(o)}}return I.from(e.target)},vm=e=>Re(e.dom.shadowRoot),Ji=e=>{const n=Be(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Wp(me.fromDom(n)).fold(()=>o.body.contains(n),To(Ji,Th))};var pg=(e,n,o,r,a)=>e(o,r)?I.some(o):ie(a)&&a(o)?I.none():n(o,r,a);const cr=(e,n,o)=>{let r=e.dom;const a=ie(o)?o:Me;for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r);if(n(u))return I.some(u);if(a(u))break}return I.none()},Rr=(e,n,o)=>pg((a,u)=>u(a),cr,e,n,o),Ya=(e,n)=>{const o=e.dom;return o.parentNode?bg(me.fromDom(o.parentNode),r=>!ls(e,r)&&n(r)):I.none()},bg=(e,n)=>{const o=a=>n(me.fromDom(a));return Vo(e.dom.childNodes,o).map(me.fromDom)},vg=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=me.fromDom(r.childNodes[a]);if(n(u))return I.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return I.none()};return o(e.dom)},cc=(e,n,o)=>cr(e,r=>Ka(r,n),o),fn=(e,n)=>wh(n,e),Di=(e,n,o)=>pg((a,u)=>Ka(a,u),cc,e,n,o),Eh=e=>Di(e,"[contenteditable]"),bc=(e,n=!1)=>Ji(e)?e.dom.isContentEditable:Eh(e).fold(rt(n),o=>Fs(o)==="true"),Fs=e=>e.dom.contentEditable,ed=e=>e.style!==void 0&&ie(e.style.getPropertyValue),yg=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ed(e)&&e.style.setProperty(n,o)},rf=(e,n)=>{ed(e)&&e.style.removeProperty(n)},cf=(e,n,o)=>{const r=e.dom;yg(r,n,o)},to=(e,n)=>{const o=e.dom;ht(n,(r,a)=>{yg(o,a,r)})},$r=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!Ji(e)?Pd(o,n):a},Pd=(e,n)=>ed(e)?e.style.getPropertyValue(n):"",Xa=(e,n)=>{const o=e.dom,r=Pd(o,n);return I.from(r).filter(a=>a.length>0)},La=e=>{const n={},o=e.dom;if(ed(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},Ja=(e,n)=>{const o=e.dom;rf(o,n),$s(Pr(e,"style").map(Sc),"")&&Or(e,"style")},ac=e=>e.dom.offsetWidth,ka=(e,n)=>{ua(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Tl=(e,n)=>{ai(e).fold(()=>{ua(e).each(a=>{xr(a,n)})},r=>{ka(r,n)})},ym=(e,n)=>{Bd(e).fold(()=>{xr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},xr=(e,n)=>{e.dom.appendChild(n.dom)},Cg=(e,n)=>{ka(e,n),xr(n,e)},Gr=(e,n)=>{ye(n,(o,r)=>{const a=r===0?e:n[r-1];Tl(a,o)})},_u=(e,n)=>{ye(n,o=>{xr(e,o)})},li=e=>{e.dom.textContent="",ye(_c(e),n=>{js(n)})},js=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ii=e=>{const n=_c(e);n.length>0&&Gr(e,n),js(e)},$d=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,_c(me.fromDom(r))},Qi=e=>je(e,me.fromDom),ar=e=>e.dom.innerHTML,Au=(e,n)=>{const r=ul(e).dom,a=me.fromDom(r.createDocumentFragment()),u=$d(n,r);_u(a,u),li(e),xr(e,a)},El=e=>{const n=me.fromTag("div"),o=me.fromDom(e.dom.cloneNode(!0));return xr(n,o),ar(n)},ko=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),td=e=>{const n=me.fromDom(sf(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=A(r,o);return ko(n,e.clientX,e.clientY,o,r,a,e)},Cm=(e,n)=>o=>{e(o)&&n(td(o))},af=(e,n,o,r,a)=>{const u=Cm(o,r);return e.dom.addEventListener(n,u,a),{unbind:Ke(lf,e,n,u,a)}},kh=(e,n,o,r)=>af(e,n,o,r,!1),lf=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},_h=(e,n)=>({left:e,top:n,translate:(r,a)=>_h(e+r,n+a)}),x=_h,R=e=>{const n=e.getBoundingClientRect();return x(n.left,n.top)},z=(e,n)=>e!==void 0?e:n!==void 0?n:0,ae=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return x(o.offsetLeft,o.offsetTop);const u=z(r==null?void 0:r.pageYOffset,a.scrollTop),f=z(r==null?void 0:r.pageXOffset,a.scrollLeft),b=z(a.clientTop,o.clientTop),C=z(a.clientLeft,o.clientLeft);return pe(e).translate(f-C,u-b)},pe=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?x(r.offsetLeft,r.offsetTop):Ji(e)?R(n):x(0,0)},nt=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return x(o,r)},_n=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},Jn=(e,n)=>{gt().browser.isSafari()&&ie(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Gn=e=>{const n=e===void 0?window:e;return gt().browser.isFirefox()?I.none():I.from(n.visualViewport)},kn=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),br=e=>{const n=e===void 0?window:e,o=n.document,r=nt(me.fromDom(o));return Gn(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return kn(r.left,r.top,u,f)},a=>kn(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Fr=(e,n)=>Lt(_c(e),n),Qa=(e,n)=>{let o=[];return ye(_c(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Qa(r,n))}),o},Vr=(e,n)=>gg(n,e),Ah=(e,n,o)=>cr(e,n,o).isSome(),Nb=(e,n)=>Ya(e,n).isSome(),Zp=(e,n)=>vg(e,n).isSome();class da{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Oh="\uFEFF",Ac=" ",jp=e=>e===Oh,ma=e=>e.replace(/\uFEFF/g,""),Dn=/^[ \t\r\n]*$/,ui=e=>Dn.test(e),uf=e=>{for(const n of e)if(!jp(n))return!1;return!0},df=e=>" \f	\v".indexOf(e)!==-1,Bb=e=>e===`
`||e==="\r",Gp=(e,n)=>n<e.length&&n>=0?Bb(e[n]):!1,Ri=(e,n=4,o=!0,r=!0)=>{const a=Qo(" ",n),u=e.replace(/\t/g,a);return jn(u,(b,C)=>df(C)||C===Ac?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Gp(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Ac}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Bb(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},Ou=e=>n=>!!n&&n.nodeType===e,Fd=e=>!!e&&!Object.getPrototypeOf(e),Ht=Ou(1),ql=e=>Ht(e)&&se(me.fromDom(e)),qp=e=>Ht(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",wm=e=>{const n=e.toLowerCase();return o=>Re(o)&&o.nodeName.toLowerCase()===n},Mi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return He(n,r)}return!1}},wg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ht(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Id=e=>n=>Ht(n)&&n.hasAttribute(e),Sm=e=>Ht(e)&&e.hasAttribute("data-mce-bogus"),Sg=e=>Ht(e)&&e.getAttribute("data-mce-bogus")==="all",eu=e=>Ht(e)&&e.tagName==="TABLE",Pb=e=>n=>!!(ql(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Mr=Mi(["textarea","input"]),ut=Ou(3),el=Ou(4),tu=Ou(7),Hc=Ou(8),mf=Ou(9),Oc=Ou(11),ms=wm("br"),Dh=wm("img"),Ye=Pb("true"),is=Pb("false"),Rh=Mi(["td","th"]),vc=Mi(["td","th","caption"]),_a=Mi(["video","audio","object","embed"]),cy=wm("li"),Kl=wm("details"),ay=wm("summary"),nd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},$b=(e,n,o)=>{const r=me.fromDom(n),a=me.fromDom(e),u=o.getWhitespaceElements();return Ah(a,b=>un(u,No(b)),Ke(ls,r))},Yl=e=>Ht(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),us=(e,n)=>Ht(e)&&un(n.getNonEmptyElements(),e.nodeName),Du=Id("data-mce-bookmark"),xm=e=>ci(me.fromDom(e)).exists(n=>!bc(n)),yc=(e,n,o)=>ui(e.data)&&!$b(e,n,o),Kp=(e,n,o,r)=>ut(e)&&!yc(e,n,o)&&(!r.includeZwsp||!uf(e.data)),Ru=(e,n,o,r)=>ie(r.isContent)&&r.isContent(n)||us(n,e)||Du(n)||Yl(n)||Kp(n,o,e,r)||is(n)||Ye(n)&&xm(n),nu=(e,n,o)=>{const r={...nd,...o};if(r.checkRootAsContent&&Ru(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new da(a,n);do{if(r.skipBogus&&Ht(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Hc(a)){a=f.next(!0);continue}if(ms(a)){u++,a=f.next();continue}if(Ru(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},Js=(e,n,o)=>nu(e,n.dom,{checkRootAsContent:!0,...o}),ff=(e,n,o)=>Ru(e,n,n,{includeZwsp:nd.includeZwsp,...o}),Te=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},di=e=>{const n=Te(I.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(I.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(I.some(b))}}},gf=e=>{const n=Te(I.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(I.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(I.some(setInterval(b,e)))}}},fa=()=>{const e=di(Pt);return{...e,on:o=>e.get().each(o)}},Ni=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Jr=e=>Ni(e)!=="html",qr=e=>Jr(e.nodeName),S=e=>Ni(e.nodeName),k=["svg","math"],L=()=>{const e=fa(),n=()=>e.get().map(S).getOr("html");return{track:a=>(qr(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Y="data-mce-block",he=e=>Lt(ws(e),n=>!/[A-Z]/.test(n)),Ge=e=>je(he(e),n=>{const o=CSS.escape(n);return`${o}:`+je(k,r=>`not(${r} ${o})`).join(":")}).join(","),xt=(e,n)=>Re(n.querySelector(e))?(n.setAttribute(Y,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Y),!1),Kt=(e,n)=>{const o=Ge(e.getTransparentElements()),r=Ge(e.getBlockElements());return Lt(n.querySelectorAll(o),a=>xt(r,a))},Vn=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(nu(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},wo=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();Vn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();Vn(e,f,!1),nu(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),nu(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),nu(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},As=(e,n,o)=>{const r=e.getBlockElements(),a=me.fromDom(n),u=b=>No(b)in r,f=b=>ls(b,a);ye(Qi(o),b=>{cr(b,u,f).each(C=>{const E=Fr(b,M=>u(M)&&!e.isValidChild(No(C),No(M)));if(E.length>0){const M=ci(C);ye(E,N=>{cr(N,u,f).each(B=>{wo(e,B.dom,N.dom)})}),M.each(N=>Kt(e,N.dom))}})})},fs=(e,n,o)=>{ye([...o,...ou(e,n)?[n]:[]],r=>ye(Vr(me.fromDom(r),r.nodeName.toLowerCase()),a=>{hf(e,a.dom)&&ii(a)}))},dr=(e,n)=>{const o=Kt(e,n);As(e,n,o),fs(e,n,o)},kl=(e,n)=>{if(Ld(e,n)){const o=Ge(e.getBlockElements());xt(o,n)}},Mu=(e,n,o)=>{const r=u=>ls(u,me.fromDom(n)),a=hg(me.fromDom(o),r);lr(a,a.length-2).filter(ke).fold(()=>dr(e,n),u=>dr(e,u.dom))},Ha=e=>e.hasAttribute(Y),Nu=(e,n)=>un(e.getTransparentElements(),n),Ld=(e,n)=>Ht(n)&&Nu(e,n.nodeName),ou=(e,n)=>Ld(e,n)&&Ha(n),hf=(e,n)=>Ld(e,n)&&!Ha(n),mi=(e,n)=>n.type===1&&Nu(e,n.name)&&ee(n.attr(Y)),Mh=gt().browser,xg=e=>Vo(e,ke),Nh=e=>Mh.isFirefox()&&No(e)==="table"?xg(_c(e)).filter(n=>No(n)==="caption").bind(n=>xg(Ea(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,Bh=(e,n)=>e.children&&He(e.children,n),zc=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&$r(me.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!Bh(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Bh(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=Nh(me.fromDom(n))}return{x:r,y:a}},Fo=(e,n={})=>{let o=0;const r={},a=me.fromDom(e),u=kc(a),f=ve=>{n.referrerPolicy=ve},b=ve=>{n.contentCssCors=ve},C=ve=>{xr(of(a),ve)},E=ve=>{const xe=of(a);fn(xe,"#"+ve).each(js)},M=ve=>os(r,ve).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=ve=>new Promise((xe,Ce)=>{let De;const ct=dt._addCacheSuffix(ve),Tt=M(ct);r[ct]=Tt,Tt.count++;const Vt=(Xt,Cn)=>{ye(Xt,pn),Tt.status=Cn,Tt.passed=[],Tt.failed=[],De&&(De.onload=null,De.onerror=null,De=null)},Ze=()=>Vt(Tt.passed,2),Ie=()=>Vt(Tt.failed,3);if(xe&&Tt.passed.push(xe),Ce&&Tt.failed.push(Ce),Tt.status===1)return;if(Tt.status===2){Ze();return}if(Tt.status===3){Ie();return}Tt.status=1;const ot=me.fromTag("link",u.dom);Xr(ot,{rel:"stylesheet",type:"text/css",id:Tt.id}),n.contentCssCors&&Eo(ot,"crossOrigin","anonymous"),n.referrerPolicy&&Eo(ot,"referrerpolicy",n.referrerPolicy),De=ot.dom,De.onload=Ze,De.onerror=Ie,C(ot),Eo(ot,"href",ct)}),B=(ve,xe)=>{const Ce=M(ve);r[ve]=Ce,Ce.count++;const De=me.fromTag("style",u.dom);Xr(De,{rel:"stylesheet",type:"text/css",id:Ce.id}),De.dom.innerHTML=xe,C(De)},j=ve=>Promise.allSettled(je(ve,Ce=>N(Ce).then(rt(Ce)))).then(Ce=>{const De=vo(Ce,ct=>ct.status==="fulfilled");return De.fail.length>0?Promise.reject(je(De.fail,ct=>ct.reason)):je(De.pass,ct=>ct.value)}),Q=ve=>{const xe=dt._addCacheSuffix(ve);os(r,xe).each(Ce=>{--Ce.count===0&&(delete r[xe],E(Ce.id))})};return{load:N,loadRawCss:B,loadAll:j,unload:Q,unloadRawCss:ve=>{os(r,ve).each(xe=>{--xe.count===0&&(delete r[ve],E(xe.id))})},unloadAll:ve=>{ye(ve,xe=>{Q(xe)})},_setReferrerPolicy:f,_setContentCssCors:b}},Dc=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=xl(o).dom;return I.from(e.get(u)).getOrThunk(()=>{const f=Fo(u,r);return e.set(u,f),f})}}})(),Xl=e=>e.nodeName.toLowerCase()==="span",_l=(e,n)=>Re(e)&&(ff(n,e)||n.isInline(e.nodeName.toLowerCase())),Ph=(e,n,o)=>{const r=new da(e,n).prev(!1),a=new da(e,n).next(!1),u=cn(r)||_l(r,o),f=cn(a)||_l(a,o);return u&&f},Bu=e=>Xl(e)&&e.getAttribute("data-mce-type")==="bookmark",Tm=(e,n,o)=>ut(e)&&e.data.length>0&&Ph(e,n,o),Hd=e=>Ht(e)?e.childNodes.length>0:!1,od=e=>Oc(e)||mf(e),zd=(e,n,o,r)=>{var a;const u=r||n;if(Ht(n)&&Bu(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)zd(e,f[b],o,u);if(Ht(n)){const b=n.childNodes;b.length===1&&Bu(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!od(n)&&!ff(o,n)&&!Hd(n)&&!Tm(n,u,o)&&e.remove(n),n},Pu=dt.makeMap,Yp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$h=/[<>&\"\']/g,Tg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Lw={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},sd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Hw={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ly=e=>{const n=me.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Qr=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!sd[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},Fb=Qr("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rd=(e,n)=>e.replace(n?Yp:Vd,o=>sd[o]||o),pf=e=>(""+e).replace($h,n=>sd[n]||n),Em=(e,n)=>e.replace(n?Yp:Vd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":sd[o]||"&#"+o.charCodeAt(0)+";"),su=(e,n,o)=>{const r=o||Fb;return e.replace(n?Yp:Vd,a=>sd[a]||r[a]||a)},cd={encodeRaw:rd,encodeAllRaw:pf,encodeNumeric:Em,encodeNamed:su,getEncodeFunc:(e,n)=>{const o=Qr(n)||Fb,r=(f,b)=>f.replace(b?Yp:Vd,C=>sd[C]!==void 0?sd[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),a=(f,b)=>su(f,b,o),u=Pu(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:su:u.numeric?Em:rd},decode:e=>e.replace(Tg,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Lw[o]||String.fromCharCode(o)):Hw[n]||Fb[n]||ly(n))},tl=(e,n)=>(e=dt.trim(e),e?e.split(n||" "):[]),Jp=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),iy=e=>st(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Qp=e=>{const n=o=>it(o)?je(o,n):iy(o)?new RegExp(o.source,o.flags):st(o)?Mo(o,n):o;return n(e)},e1=e=>{const n=/^(~)?(.+)$/;return Us(tl(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},uy=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Eg=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},ad=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Eg(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},Al={html4:ze(()=>ad("html4")),html5:ze(()=>ad("html5")),"html5-strict":ze(()=>ad("html5-strict"))},cu=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=Al[e]();return n==="blocks"?I.some(o):n==="phrasing"?I.some(r):n==="flow"?I.some(a):I.none()},bf=e=>{const n=uy(e),{phrasingContent:o,flowContent:r}=Eg(e),a={},u=(C,E,M)=>{a[C]={attributes:cs(E,rt({})),attributesOrder:E,children:cs(M,rt({}))}},f=(C,E="",M="")=>{const N=tl(M),B=tl(C);let j=B.length;const Q=[...n,...tl(E)];for(;j--;)u(B[j],Q.slice(),N)},b=(C,E)=>{const M=tl(C),N=tl(E);let B=M.length;for(;B--;){const j=a[M[B]];for(let Q=0,q=N.length;Q<q;Q++)j.attributes[N[Q]]={},j.attributesOrder.push(N[Q])}};return e!=="html5-strict"&&(ye(tl("acronym applet basefont big font strike tt"),M=>{f(M,"",o)}),ye(tl("center dir isindex noframes"),M=>{f(M,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ye([a.video,a.audio],C=>{delete C.children.audio,delete C.children.video}),ye(tl("a form meter progress dfn"),C=>{a[C]&&delete a[C].children[C]}),delete a.caption.children.table,delete a.script,a},dy=e=>e==="-"?"remove":"add",kg=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return I.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},my=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Us(tl(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?dy(a):"replace",f=r[2],b=Us(tl(r[3],"|"),C=>kg(C).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},zw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return ye(tl(e,"|"),f=>{const b=o.exec(f);if(b){const C={},E=b[1],M=b[2].replace(/[\\:]:/g,":"),N=b[3],B=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(M),C.required=!0),E==="-"){delete a[M],u.splice(dt.inArray(u,M),1);return}if(N&&(N==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:M,value:B}),C.defaultValue=B):N==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:M,value:B}),C.forcedValue=B):N==="<"&&(C.validValues=dt.makeMap(B,"?"))),r.test(M)){const j=C;n.attributePatterns=n.attributePatterns||[],j.pattern=Jp(M),n.attributePatterns.push(j)}else a[M]||u.push(M),a[M]=C}})},Vw=(e,n)=>{ht(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Uw=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Us(tl(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],C=a[4],E=a[5],M={attributes:{},attributesOrder:[]};if(e.each(N=>Vw(N,M)),u==="#"?M.paddEmpty=!0:u==="-"&&(M.removeEmpty=!0),C==="!"&&(M.removeEmptyAttrs=!0),E&&zw(E,M),b&&(M.outputName=f),f==="@")if(e.isNone())e=I.some(M);else return[];return[b?{name:f,element:M,aliasName:b}:{name:f,element:M}]}else return[]})},vf={},_g=dt.makeMap,po=dt.each,Tn=dt.extend,yf=dt.explode,t1=(e,n={})=>{const o=_g(e," ",_g(e.toUpperCase()," "));return Tn(o,n)},Ib=e=>t1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),fy=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),po(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?_g(r,/[, ]/):yf(r,/[, ]/)}),o}else return},Ud=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(wn,ts,Wr)=>{const oc=e[wn];if(oc)return _g(oc,/[, ]/,_g(oc.toUpperCase(),/[, ]/));{let Pc=vf[wn];return Pc||(Pc=t1(ts,Wr),vf[wn]=Pc),Pc}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",E=bf(C);e.verify_html===!1&&(e.valid_elements="*[*]");const M=fy(e.valid_styles),N=fy(e.invalid_styles,"map"),B=fy(e.valid_classes,"map"),j=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Q=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),te=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ve="td th iframe video audio object script code",xe=b("non_empty_elements",ve+" pre svg textarea summary",q),Ce=b("move_caret_before_on_enter_elements",ve+" table",q),De="h1 h2 h3 h4 h5 h6",ct=b("text_block_elements",De+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Tt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ct),Vt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ze=b("transparent_elements","a ins del canvas map"),Ie=b("wrap_block_elements","pre "+De);po("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),wn=>{f[wn]=new RegExp("</"+wn+"[^>]*>","gi")});const ot=wn=>{const ts=I.from(o["@"]),Wr=/[*?+]/;ye(Uw(ts,wn??""),({name:oc,element:Pc,aliasName:Pa})=>{if(Pa&&(o[Pa]=Pc),Wr.test(oc)){const Cc=Pc;Cc.pattern=Jp(oc),a.push(Cc)}else o[oc]=Pc})},Xt=wn=>{a=[],ye(ws(o),ts=>{delete o[ts]}),ot(wn)},Cn=(wn,ts)=>{var Wr,oc;delete vf.text_block_elements,delete vf.block_elements;const Pc=ts.extends?!Zi(ts.extends):!1,Pa=ts.extends;if(r[wn]=Pa?r[Pa]:{},u[wn]=Pa??wn,xe[wn.toUpperCase()]={},xe[wn]={},Pc||(Tt[wn.toUpperCase()]={},Tt[wn]={}),Pa&&!o[wn]&&o[Pa]){const Cc=Qp(o[Pa]);delete Cc.removeEmptyAttrs,delete Cc.removeEmpty,o[wn]=Cc}else o[wn]={attributesOrder:[],attributes:{}};if(it(ts.attributes)){const Cc=vl=>{uc.attributesOrder.push(vl),uc.attributes[vl]={}},uc=(Wr=o[wn])!==null&&Wr!==void 0?Wr:{};delete uc.attributesDefault,delete uc.attributesForced,delete uc.attributePatterns,delete uc.attributesRequired,uc.attributesOrder=[],uc.attributes={},ye(ts.attributes,vl=>{const Cu=uy(C);kg(vl).each(({preset:_d,name:Ad})=>{_d?Ad==="global"&&ye(Cu,Cc):Cc(Ad)})}),o[wn]=uc}if(Dt(ts.padEmpty)){const Cc=(oc=o[wn])!==null&&oc!==void 0?oc:{};Cc.paddEmpty=ts.padEmpty,o[wn]=Cc}if(it(ts.children)){const Cc={},uc=Cu=>{Cc[Cu]={}},vl=Cu=>{cu(C,Cu).each(_d=>{ye(_d,uc)})};ye(ts.children,Cu=>{kg(Cu).each(({preset:_d,name:Ad})=>{_d?vl(Ad):uc(Ad)})}),r[wn]=Cc}Pa&&ht(r,(Cc,uc)=>{Cc[Pa]&&(r[uc]=Cc=Tn({},r[uc]),Cc[wn]=Cc[Pa])})},fo=wn=>{ye(e1(wn??""),({name:ts,cloneName:Wr})=>{Cn(ts,{extends:Wr})})},Lo=wn=>{st(wn)?ht(wn,(ts,Wr)=>Cn(Wr,ts)):ee(wn)&&fo(wn)},ks=wn=>{ye(my(wn??""),({operation:ts,name:Wr,validChildren:oc})=>{const Pc=ts==="replace"?{"#comment":{}}:r[Wr],Pa=uc=>{ts==="remove"?delete Pc[uc]:Pc[uc]={}},Cc=uc=>{cu(C,uc).each(vl=>{ye(vl,Pa)})};ye(oc,({preset:uc,name:vl})=>{uc?Cc(vl):Pa(vl)}),r[Wr]=Pc})},Ks=wn=>{const ts=o[wn];if(ts)return ts;let Wr=a.length;for(;Wr--;){const oc=a[Wr];if(oc.pattern.test(wn))return oc}},nc=()=>{e.valid_elements?(Xt(e.valid_elements),po(E,(wn,ts)=>{r[ts]=wn.children})):(po(E,(wn,ts)=>{o[ts]={attributes:wn.attributes,attributesOrder:wn.attributesOrder},r[ts]=wn.children}),po(tl("strong/b em/i"),wn=>{const ts=tl(wn,"/");o[ts[1]].outputName=ts[0]}),po(Vt,(wn,ts)=>{o[ts]&&(e.padd_empty_block_inline_children&&(o[ts].paddInEmptyBlock=!0),o[ts].removeEmpty=!0)}),po(tl("ol ul blockquote a table tbody"),wn=>{o[wn]&&(o[wn].removeEmpty=!0)}),po(tl("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),wn=>{o[wn]&&(o[wn].paddEmpty=!0)}),po(tl("span"),wn=>{o[wn].removeEmptyAttrs=!0})),delete o.svg,Lo(e.custom_elements),ks(e.valid_children),ot(e.extended_valid_elements),ks("+ol[ul|ol],+ul[ul|ol]"),po({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(wn,ts)=>{o[ts]&&(o[ts].parentsRequired=tl(wn))}),e.invalid_elements&&po(yf(e.invalid_elements),wn=>{o[wn]&&delete o[wn]}),Ks("span")||ot("span[!data-mce-type|*]")},ja=rt(M),zs=rt(N),Ot=rt(B),hn=rt(te),ds=rt(Tt),$t=rt(ct),An=rt(Vt),_o=rt(Object.seal(q)),zt=rt(Q),Ao=rt(xe),Uo=rt(Ce),Ca=rt(j),Ms=rt(Ze),Zc=rt(Ie),ju=rt(Object.seal(f)),fm=(wn,ts)=>{const Wr=r[wn.toLowerCase()];return!!(Wr&&Wr[ts.toLowerCase()])},Ll=(wn,ts)=>{const Wr=Ks(wn);if(Wr)if(ts){if(Wr.attributes[ts])return!0;const oc=Wr.attributePatterns;if(oc){let Pc=oc.length;for(;Pc--;)if(oc[Pc].pattern.test(ts))return!0}}else return!0;return!1},Zi=wn=>un(ds(),wn),yu=wn=>!yn(wn,"#")&&Ll(wn)&&!Zi(wn),ji=wn=>un(Zc(),wn)||yu(wn),Gu=rt(u);return nc(),{type:C,children:r,elements:o,getValidStyles:ja,getValidClasses:Ot,getBlockElements:ds,getInvalidStyles:zs,getVoidElements:_o,getTextBlockElements:$t,getTextInlineElements:An,getBoolAttrs:hn,getElementRule:Ks,getSelfClosingElements:zt,getNonEmptyElements:Ao,getMoveCaretBeforeOnEnterElements:Uo,getWhitespaceElements:Ca,getTransparentElements:Ms,getSpecialElements:ju,isValidChild:fm,isValid:Ll,isBlock:Zi,isInline:yu,isWrapper:ji,getCustomElements:Gu,addValidElements:ot,setValidElements:Xt,addCustomElements:Lo,addValidChildren:ks}},vr=e=>({value:Ww(e)}),Ww=e=>on(e,"#").toUpperCase(),gy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Lb=e=>{const n=gy(e.red)+gy(e.green)+gy(e.blue);return vr(n)},Qe=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ag=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Wk=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Cf=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Wk(a,u,f,b)},Zk=e=>Qe.test(e)?"rgb":Ag.test(e)?"rgba":"other",Og=e=>{const n=Qe.exec(e);if(n!==null)return I.some(Cf(n[1],n[2],n[3],"1"));const o=Ag.exec(e);return o!==null?I.some(Cf(o[1],o[2],o[3],o[4])):I.none()},hy=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,ld=e=>Og(e).map(Lb).map(n=>"#"+n.value).getOr(e),py=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const C=Oh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let N=0;N<E.length;N++)u[E[N]]=C+N,u[C+N]=E[N];const M={parse:N=>{const B={};let j=!1;const Q=e.url_converter,q=e.url_converter_scope||M,te=(Ze,Ie,ot)=>{const Xt=B[Ze+"-top"+Ie];if(!Xt)return;const Cn=B[Ze+"-right"+Ie];if(!Cn)return;const fo=B[Ze+"-bottom"+Ie];if(!fo)return;const Lo=B[Ze+"-left"+Ie];if(!Lo)return;const ks=[Xt,Cn,fo,Lo];let Ks=ks.length-1;for(;Ks--&&ks[Ks]===ks[Ks+1];);Ks>-1&&ot||(B[Ze+Ie]=Ks===-1?ks[0]:ks.join(" "),delete B[Ze+"-top"+Ie],delete B[Ze+"-right"+Ie],delete B[Ze+"-bottom"+Ie],delete B[Ze+"-left"+Ie])},ve=Ze=>{const Ie=B[Ze];if(!Ie)return;const ot=Ie.indexOf(",")>-1?[Ie]:Ie.split(" ");let Xt=ot.length;for(;Xt--;)if(ot[Xt]!==ot[0])return!1;return B[Ze]=ot[0],!0},xe=(Ze,Ie,ot,Xt)=>{ve(Ie)&&ve(ot)&&ve(Xt)&&(B[Ze]=B[Ie]+" "+B[ot]+" "+B[Xt],delete B[Ie],delete B[ot],delete B[Xt])},Ce=Ze=>(j=!0,u[Ze]),De=(Ze,Ie)=>(j&&(Ze=Ze.replace(/\uFEFF[0-9]/g,ot=>u[ot])),Ie||(Ze=Ze.replace(/\\([\'\";:])/g,"$1")),Ze),ct=Ze=>String.fromCharCode(parseInt(Ze.slice(1),16)),Tt=Ze=>Ze.replace(/\\[0-9a-f]+/gi,ct),Vt=(Ze,Ie,ot,Xt,Cn,fo)=>{if(Cn=Cn||fo,Cn)return Cn=De(Cn),"'"+Cn.replace(/\'/g,"\\'")+"'";if(Ie=De(Ie||ot||Xt||""),!e.allow_script_urls){const Lo=Ie.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Lo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Lo))return""}return Q&&(Ie=Q.call(q,Ie,"style")),"url('"+Ie.replace(/\'/g,"\\'")+"')"};if(N){N=N.replace(/[\u0000-\u001F]/g,""),N=N.replace(/\\[\"\';:\uFEFF]/g,Ce).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ie=>Ie.replace(/[;:]/g,Ce));let Ze;for(;Ze=r.exec(N);){r.lastIndex=Ze.index+Ze[0].length;let Ie=Ze[1].replace(a,"").toLowerCase(),ot=Ze[2].replace(a,"");if(Ie&&ot){if(Ie=Tt(Ie),ot=Tt(ot),Ie.indexOf(C)!==-1||Ie.indexOf('"')!==-1||!e.allow_script_urls&&(Ie==="behavior"||/expression\s*\(|\/\*|\*\//.test(ot)))continue;Ie==="font-weight"&&ot==="700"?ot="bold":(Ie==="color"||Ie==="background-color")&&(ot=ot.toLowerCase()),Zk(ot)==="rgb"&&Og(ot).each(Xt=>{ot=ld(hy(Xt)).toLowerCase()}),ot=ot.replace(o,Vt),B[Ie]=j?De(ot,!0):ot}}te("border","",!0),te("border","-width"),te("border","-color"),te("border","-style"),te("padding",""),te("margin",""),xe("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(N,B)=>{let j="";const Q=(te,ve)=>{const xe=ve[te];if(xe)for(let Ce=0,De=xe.length;Ce<De;Ce++){const ct=xe[Ce],Tt=N[ct];Tt&&(j+=(j.length>0?" ":"")+ct+": "+Tt+";")}},q=(te,ve)=>{if(!b||!ve)return!0;let xe=b["*"];return xe&&xe[te]?!1:(xe=b[ve],!(xe&&xe[te]))};return B&&f?(Q("*",f),Q(B,f)):ht(N,(te,ve)=>{te&&q(ve,B)&&(j+=(j.length>0?" ":"")+ve+": "+te+";")}),j}};return M},Fh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Er=e=>e instanceof Event||ie(e.initEvent),Wd=e=>e.isDefaultPrevented===Je||e.isDefaultPrevented===Me,Zw=e=>xn(e.preventDefault)||Er(e),$u=(e,n)=>{const o=n??{};for(const r in e)un(Fh,r)||(o[r]=e[r]);return Re(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Re(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Re(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},by=(e,n,o,r)=>{var a;const u=$u(n,r);return u.type=e,xn(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Zw(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Je,ie(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Je,ie(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Je,u.stopPropagation()},Wd(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Je:Me,u.isPropagationStopped=u.cancelBubble===!0?Je:Me,u.isImmediatePropagationStopped=Me)),u},n1="mce-data-",Ih=/^(?:mouse|contextmenu)|click/,o1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},fi=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},jw=e=>Re(e)&&Ih.test(e.type),s1=(e,n)=>{const o=by(e.type,e,document,n);if(jw(e)&&cn(e.pageX)&&!cn(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},vy=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{fi(e,"DOMContentLoaded",f),fi(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():o1(e,"DOMContentLoaded",f),o.domLoaded||o1(e,"load",f)};class wf{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=n1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,C=B=>{u.executeHandlers(s1(B||b.event),E)};if(!n||ut(n)||Hc(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),a=a||n;const M=o.split(" ");let N=M.length;for(;N--;){let B=M[N],j=C,Q=!1,q=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(a,s1({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(Q=!0,q=B==="focusin"?"focus":"blur",j=te=>{const ve=s1(te||b.event);ve.type=ve.type==="focus"?"focusin":"focusout",u.executeHandlers(ve,E)}),f=u.events[E][B],f?B==="ready"&&u.domLoaded?r(s1({type:B})):f.push({func:r,scope:a}):(u.events[E][B]=f=[{func:r,scope:a}],f.fakeName=q,f.capture=Q,f.nativeHandler=j,B==="ready"?vy(n,j,u):o1(n,q||B,j,Q))}return n=f=null,r}unbind(n,o,r){if(!n||ut(n)||Hc(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],E=u[C];if(E){if(r){let M=E.length;for(;M--;)if(E[M].func===r){const N=E.nativeHandler,B=E.fakeName,j=E.capture,Q=E.slice(0,M).concat(E.slice(M+1));Q.nativeHandler=N,Q.fakeName=B,Q.capture=j,u[C]=Q}}(!r||E.length===0)&&(delete u[C],fi(n,E.fakeName||C,E.nativeHandler,E.capture))}}}else ht(u,(f,b)=>{fi(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(un(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ut(n)||Hc(n))return this;const a=s1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||ut(n)||Hc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}wf.Event=new wf;const yy=dt.each,Gw=dt.grep,Cy="data-mce-style",qw=dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),dl=(e,n,o)=>{xn(o)||o===""?Or(e,n):Eo(e,n,o)},gi=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),bt=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&ut(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},Hb=(e,n)=>{const o=rr(n,"style"),r=e.serialize(e.parse(o),No(n));dl(n,Cy,r)},Aa=(e,n)=>Go(e)?un(qw,n)?e+"":e+"px":e,zb=(e,n,o)=>{const r=gi(n);xn(o)||o===""?Ja(e,r):cf(e,r,Aa(o,r))},Kw=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,C)=>{const E=me.fromDom(f);ie(n.url_converter)&&Re(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const M="data-mce-"+C;dl(E,M,b),dl(E,C,b)},get:(f,b)=>{const C=me.fromDom(f);return rr(C,"data-mce-"+b)||rr(C,b)}},u={style:{set:(f,b)=>{const C=me.fromDom(f);r&&dl(C,Cy,b),Or(C,"style"),ee(b)&&to(C,e.parse(b))},get:f=>{const b=me.fromDom(f),C=rr(b,Cy)||rr(b,"style");return e.serialize(e.parse(C),No(b))}}};return r&&(u.href=u.src=a),u},kr=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,C=Dc.forElement(me.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],M=n.schema?n.schema:Ud({}),N=py({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new wf:wf.Event,j=M.getBlockElements(),Q=Pe=>ee(Pe)?un(j,Pe):Ht(Pe)&&(un(j,Pe.nodeName)||ou(M,Pe)),q=Pe=>Pe&&e&&ee(Pe)?e.getElementById(Pe):Pe,te=Pe=>{const Le=q(Pe);return Re(Le)?me.fromDom(Le):null},ve=(Pe,Le,At="")=>{let wt;const $n=te(Pe);if(Re($n)&&ke($n)){const qo=Bw[Le];qo&&qo.get?wt=qo.get($n.dom,Le):wt=rr($n,Le)}return Re(wt)?wt:At},xe=Pe=>{const Le=q(Pe);return xn(Le)?[]:Le.attributes},Ce=(Pe,Le,At)=>{hn(Pe,wt=>{if(Ht(wt)){const $n=me.fromDom(wt),qo=At===""?null:At,Lr=rr($n,Le),gm=Bw[Le];gm&&gm.set?gm.set($n.dom,qo,Le):dl($n,Le,qo),Lr!==qo&&n.onSetAttrib&&n.onSetAttrib({attrElm:$n.dom,attrName:Le,attrValue:qo})}})},De=(Pe,Le)=>Pe.cloneNode(Le),ct=()=>n.root_element||e.body,Tt=Pe=>{const Le=br(Pe);return{x:Le.x,y:Le.y,w:Le.width,h:Le.height}},Vt=(Pe,Le)=>zc(e.body,q(Pe),Le),Ze=(Pe,Le,At)=>{hn(Pe,wt=>{const $n=me.fromDom(wt);zb($n,Le,At),n.update_styles&&Hb(N,$n)})},Ie=(Pe,Le)=>{hn(Pe,At=>{const wt=me.fromDom(At);ht(Le,($n,qo)=>{zb(wt,qo,$n)}),n.update_styles&&Hb(N,wt)})},ot=(Pe,Le,At)=>{const wt=q(Pe);if(!(xn(wt)||!ql(wt)&&!qp(wt)))return At?$r(me.fromDom(wt),gi(Le)):(Le=Le.replace(/-(\D)/g,($n,qo)=>qo.toUpperCase()),Le==="float"&&(Le="cssFloat"),wt.style?wt.style[Le]:void 0)},Xt=Pe=>{const Le=q(Pe);if(!Le)return{w:0,h:0};let At=ot(Le,"width"),wt=ot(Le,"height");return(!At||At.indexOf("px")===-1)&&(At="0"),(!wt||wt.indexOf("px")===-1)&&(wt="0"),{w:parseInt(At,10)||Le.offsetWidth||Le.clientWidth,h:parseInt(wt,10)||Le.offsetHeight||Le.clientHeight}},Cn=Pe=>{const Le=q(Pe),At=Vt(Le),wt=Xt(Le);return{x:At.x,y:At.y,w:wt.w,h:wt.h}},fo=(Pe,Le)=>{if(!Pe)return!1;const At=it(Pe)?Pe:[Pe];return vt(At,wt=>Ka(me.fromDom(wt),Le))},Lo=(Pe,Le,At,wt)=>{const $n=[];let qo=q(Pe);wt=wt===void 0;const Lr=At||(ct().nodeName!=="BODY"?ct().parentNode:null);if(ee(Le))if(Le==="*")Le=Ht;else{const gm=Le;Le=$k=>fo($k,gm)}for(;qo&&!(qo===Lr||xn(qo.nodeType)||mf(qo)||Oc(qo));){if(!Le||Le(qo))if(wt)$n.push(qo);else return[qo];qo=qo.parentNode}return wt?$n:null},ks=(Pe,Le,At)=>{const wt=Lo(Pe,Le,At,!1);return wt&&wt.length>0?wt[0]:null},Ks=(Pe,Le,At)=>{let wt=Le;if(Pe){ee(Le)&&(wt=$n=>fo($n,Le));for(let $n=Pe[At];$n;$n=$n[At])if(ie(wt)&&wt($n))return $n}return null},nc=(Pe,Le)=>Ks(Pe,Le,"nextSibling"),ja=(Pe,Le)=>Ks(Pe,Le,"previousSibling"),zs=Pe=>ie(Pe.querySelectorAll),Ot=(Pe,Le)=>{var At,wt;const $n=(wt=(At=q(Le))!==null&&At!==void 0?At:n.root_element)!==null&&wt!==void 0?wt:e;return zs($n)?gr($n.querySelectorAll(Pe)):[]},hn=function(Pe,Le,At){const wt=At??this;if(it(Pe)){const $n=[];return yy(Pe,(qo,Lr)=>{const gm=q(qo);gm&&$n.push(Le.call(wt,gm,Lr))}),$n}else{const $n=q(Pe);return $n?Le.call(wt,$n):!1}},ds=(Pe,Le)=>{hn(Pe,At=>{ht(Le,(wt,$n)=>{Ce(At,$n,wt)})})},$t=(Pe,Le)=>{hn(Pe,At=>{const wt=me.fromDom(At);Au(wt,Le)})},An=(Pe,Le,At,wt,$n)=>hn(Pe,qo=>{const Lr=ee(Le)?e.createElement(Le):Le;return Re(At)&&ds(Lr,At),wt&&(!ee(wt)&&wt.nodeType?Lr.appendChild(wt):ee(wt)&&$t(Lr,wt)),$n?Lr:qo.appendChild(Lr)}),_o=(Pe,Le,At)=>An(e.createElement(Pe),Pe,Le,At,!0),zt=cd.decode,Ao=cd.encodeAllRaw,Uo=(Pe,Le,At="")=>{let wt="<"+Pe;for(const $n in Le)tr(Le,$n)&&(wt+=" "+$n+'="'+Ao(Le[$n])+'"');return mo(At)&&un(M.getVoidElements(),Pe)?wt+" />":wt+">"+At+"</"+Pe+">"},Ca=Pe=>{const Le=e.createElement("div"),At=e.createDocumentFragment();At.appendChild(Le),Pe&&(Le.innerHTML=Pe);let wt;for(;wt=Le.firstChild;)At.appendChild(wt);return At.removeChild(Le),At},Ms=(Pe,Le)=>hn(Pe,At=>{const wt=me.fromDom(At);return Le&&ye(_c(wt),$n=>{Be($n)&&$n.dom.length===0?js($n):ka(wt,$n)}),js(wt),wt.dom}),Zc=Pe=>hn(Pe,Le=>{const At=Le.attributes;for(let wt=At.length-1;wt>=0;wt--)Le.removeAttributeNode(At.item(wt))}),ju=Pe=>N.parse(Pe),fm=(Pe,Le)=>N.serialize(Pe,Le),Ll=Pe=>{if(Od!==kr.DOM&&e===document){if(o[Pe])return;o[Pe]=!0}let Le=e.getElementById("mceDefaultStyles");if(!Le){Le=e.createElement("style"),Le.id="mceDefaultStyles",Le.type="text/css";const At=e.head;At.firstChild?At.insertBefore(Le,At.firstChild):At.appendChild(Le)}Le.styleSheet?Le.styleSheet.cssText+=Pe:Le.appendChild(e.createTextNode(Pe))},Zi=Pe=>{Pe||(Pe=""),ye(Pe.split(","),Le=>{a[Le]=!0,C.load(Le).catch(Pt)})},yu=(Pe,Le,At)=>{hn(Pe,wt=>{if(Ht(wt)){const $n=me.fromDom(wt),qo=Le.split(" ");ye(qo,Lr=>{Re(At)?(At?Eu:Oi)($n,Lr):dg($n,Lr)})}})},ji=(Pe,Le)=>{yu(Pe,Le,!0)},Gu=(Pe,Le)=>{yu(Pe,Le,!1)},wn=(Pe,Le)=>{const At=te(Pe),wt=Le.split(" ");return Re(At)&&Bs(wt,$n=>Nd(At,$n))},ts=Pe=>{hn(Pe,Le=>Ja(me.fromDom(Le),"display"))},Wr=Pe=>{hn(Pe,Le=>cf(me.fromDom(Le),"display","none"))},oc=Pe=>{const Le=te(Pe);return Re(Le)&&$s(Xa(Le,"display"),"none")},Pc=Pe=>(Pe||"mce_")+u++,Pa=Pe=>{const Le=te(Pe);return Re(Le)?Ht(Le.dom)?Le.dom.outerHTML:El(Le):""},Cc=(Pe,Le)=>{hn(Pe,At=>{Ht(At)&&(At.outerHTML=Le)})},uc=(Pe,Le)=>{const At=q(Le);return hn(Pe,wt=>{const $n=At==null?void 0:At.parentNode,qo=At==null?void 0:At.nextSibling;return $n&&(qo?$n.insertBefore(wt,qo):$n.appendChild(wt)),wt})},vl=(Pe,Le,At)=>hn(Le,wt=>{var $n;const qo=it(Le)?Pe.cloneNode(!0):Pe;return At&&yy(Gw(wt.childNodes),Lr=>{qo.appendChild(Lr)}),($n=wt.parentNode)===null||$n===void 0||$n.replaceChild(qo,wt),wt}),Cu=(Pe,Le)=>{if(Pe.nodeName!==Le.toUpperCase()){const At=_o(Le);return yy(xe(Pe),wt=>{Ce(At,wt.nodeName,ve(Pe,wt.nodeName))}),vl(At,Pe,!0),At}else return Pe},_d=(Pe,Le)=>{let At=Pe;for(;At;){let wt=Le;for(;wt&&At!==wt;)wt=wt.parentNode;if(At===wt)break;At=At.parentNode}return!At&&Pe.ownerDocument?Pe.ownerDocument.documentElement:At},Ad=(Pe,Le,At)=>Zn(Le)?nu(M,Pe,{...At,isContent:$n=>{const qo=$n.nodeName.toLowerCase();return!!Le[qo]}}):nu(M,Pe,At),qu=()=>e.createRange(),rg=(Pe,Le,At)=>{let wt=qu(),$n,qo;if(Pe&&Le&&Pe.parentNode&&Le.parentNode){const Lr=Pe.parentNode;return wt.setStart(Lr,bt(Pe)),wt.setEnd(Le.parentNode,bt(Le)),$n=wt.extractContents(),wt=qu(),wt.setStart(Le.parentNode,bt(Le)+1),wt.setEnd(Lr,bt(Pe)+1),qo=wt.extractContents(),Lr.insertBefore(zd(Od,$n,M),Pe),At?Lr.insertBefore(At,Pe):Lr.insertBefore(Le,Pe),Lr.insertBefore(zd(Od,qo,M),Pe),Ms(Pe),At||Le}else return},Ab=(Pe,Le,At,wt)=>{if(it(Pe)){let $n=Pe.length;const qo=[];for(;$n--;)qo[$n]=Ab(Pe[$n],Le,At,wt);return qo}else return n.collect&&(Pe===e||Pe===r)&&E.push([Pe,Le,At,wt]),B.bind(Pe,Le,At,wt||Od)},Ob=(Pe,Le,At)=>{if(it(Pe)){let wt=Pe.length;const $n=[];for(;wt--;)$n[wt]=Ob(Pe[wt],Le,At);return $n}else{if(E.length>0&&(Pe===e||Pe===r)){let wt=E.length;for(;wt--;){const[$n,qo,Lr]=E[wt];Pe===$n&&(!Le||Le===qo)&&(!At||At===Lr)&&B.unbind($n,qo,Lr)}}return B.unbind(Pe,Le,At)}},eR=(Pe,Le,At)=>B.dispatch(Pe,Le,At),cg=(Pe,Le,At)=>B.dispatch(Pe,Le,At),Bk=Pe=>{if(Pe&&ql(Pe)){const Le=Pe.getAttribute("data-mce-contenteditable");return Le&&Le!=="inherit"?Le:Pe.contentEditable!=="inherit"?Pe.contentEditable:null}else return null},Od={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:E,styles:N,schema:M,events:B,isBlock:Q,root:null,clone:De,getRoot:ct,getViewPort:Tt,getRect:Cn,getSize:Xt,getParent:ks,getParents:Lo,get:q,getNext:nc,getPrev:ja,select:Ot,is:fo,add:An,create:_o,createHTML:Uo,createFragment:Ca,remove:Ms,setStyle:Ze,getStyle:ot,setStyles:Ie,removeAllAttribs:Zc,setAttrib:Ce,setAttribs:ds,getAttrib:ve,getPos:Vt,parseStyle:ju,serializeStyle:fm,addStyle:Ll,loadCSS:Zi,addClass:ji,removeClass:Gu,hasClass:wn,toggleClass:yu,show:ts,hide:Wr,isHidden:oc,uniqueId:Pc,setHTML:$t,getOuterHTML:Pa,setOuterHTML:Cc,decode:zt,encode:Ao,insertAfter:uc,replace:vl,rename:Cu,findCommonAncestor:_d,run:hn,getAttribs:xe,isEmpty:Ad,createRng:qu,nodeIndex:bt,split:rg,bind:Ab,unbind:Ob,fire:cg,dispatch:eR,getContentEditable:Bk,getContentEditableParent:Pe=>{const Le=ct();let At=null;for(let wt=Pe;wt&&wt!==Le&&(At=Bk(wt),At===null);wt=wt.parentNode);return At},isEditable:Pe=>{if(Re(Pe)){const Le=Ht(Pe)?Pe:Pe.parentElement;return Re(Le)&&ql(Le)&&bc(me.fromDom(Le))}else return!1},destroy:()=>{if(E.length>0){let Pe=E.length;for(;Pe--;){const[Le,At,wt]=E[Pe];B.unbind(Le,At,wt)}}ht(a,(Pe,Le)=>{C.unload(Le),delete a[Le]})},isChildOf:(Pe,Le)=>Pe===Le||Le.contains(Pe),dumpRng:Pe=>"startContainer: "+Pe.startContainer.nodeName+", startOffset: "+Pe.startOffset+", endContainer: "+Pe.endContainer.nodeName+", endOffset: "+Pe.endOffset},Bw=Kw(N,n,rt(Od));return Od};kr.DOM=kr(document),kr.nodeIndex=bt;const km=kr.DOM,Vb=0,jk=1,_m=2,Ub=3;class id{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=km;let u;const f=()=>{a.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},E=a.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=dt._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===_m}markDone(n){this.states[n]=_m}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Vb),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,E)=>{os(o.scriptLoadedCallbacks,E).each(M=>{ye(M,N=>N[C](E))}),delete o.scriptLoadedCallbacks[E]},a=C=>{const E=Lt(C,M=>M.status==="rejected");return E.length>0?Promise.reject(Us(E,({reason:M})=>it(M)?M:[M])):Promise.resolve()},u=C=>Promise.allSettled(je(C,E=>o.states[E]===_m?(r("resolve",E),Promise.resolve()):o.states[E]===Ub?(r("reject",E),Promise.reject(E)):(o.states[E]=jk,o.loadScript(E).then(()=>{o.states[E]=_m,r("resolve",E);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(a)):Promise.resolve()},()=>(o.states[E]=Ub,r("reject",E),Promise.reject(E)))))),f=C=>(o.loading=!0,u(C).then(E=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return I.from(M).each(pn),a(E)})),b=Ga(n);return o.loading?new Promise((C,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,E)})}):f(b)}}id.ScriptLoader=new id;const Yw=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},wy=e=>st(e)&&un(e,"raw"),yr=e=>it(e)&&e.length>1,Lh={},Ur=Te("en"),Xw=()=>os(Lh,Ur.get()),ga={getData:()=>Mo(Lh,e=>({...e})),setCode:e=>{e&&Ur.set(e)},getCode:()=>Ur.get(),add:(e,n)=>{let o=Lh[e];o||(Lh[e]=o={});const r=je(ws(n),a=>a.toLowerCase());ht(n,(a,u)=>{const f=u.toLowerCase();f!==u&&Yw(r,f)?(un(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=Xw().getOr({}),o=f=>ie(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return un(n,b)?o(n[b]):os(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(wy(e))return o(e.raw);if(yr(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(C,E)=>un(f,E)?o(f[E]):C);return u(b)}return u(a(e))},isRtl:()=>Xw().bind(e=>os(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>un(Lh,e)},Ol=()=>{const e=[],n={},o={},r=[],a=(q,te)=>{const ve=Lt(r,xe=>xe.name===q&&xe.state===te);ye(ve,xe=>xe.resolve())},u=q=>un(n,q),f=q=>un(o,q),b=q=>{if(o[q])return o[q].instance},C=(q,te)=>{const ve=ga.getCode(),xe=","+(te||"")+",";!ve||te&&xe.indexOf(","+ve+",")===-1||id.ScriptLoader.add(n[q]+"/langs/"+ve+".js")},E=(q,te)=>{Ol.languageLoad!==!1&&(u(q)?C(q,te):Q(q,"loaded").then(()=>C(q,te)))},M=(q,te)=>(e.push(te),o[q]={instance:te},a(q,"added"),te),N=q=>{delete n[q],delete o[q]},B=(q,te)=>ee(te)?ee(q)?{prefix:"",resource:te,suffix:""}:{prefix:q.prefix,resource:te,suffix:q.suffix}:te,j=(q,te)=>{if(n[q])return Promise.resolve();let ve=ee(te)?te:te.prefix+te.resource+te.suffix;ve.indexOf("/")!==0&&ve.indexOf("://")===-1&&(ve=Ol.baseURL+"/"+ve),n[q]=ve.substring(0,ve.lastIndexOf("/"));const xe=()=>(a(q,"loaded"),Promise.resolve());return o[q]?xe():id.ScriptLoader.add(ve).then(xe)},Q=(q,te="added")=>te==="added"&&f(q)||te==="loaded"&&u(q)?Promise.resolve():new Promise(ve=>{r.push({name:q,state:te,resolve:ve})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:M,remove:N,createUrl:B,load:j,waitFor:Q}};Ol.languageLoad=!0,Ol.baseURL="",Ol.PluginManager=Ol(),Ol.ThemeManager=Ol(),Ol.ModelManager=Ol();const r1=(e,n)=>{let o=null;return{cancel:()=>{W(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{W(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Sf=(e,n)=>{let o=null;const r=()=>{W(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Sy=(e,n,o)=>cc(e,n,o).isSome(),zh=rt("mce-annotation"),Zd=rt("data-mce-annotation"),Vh=rt("data-mce-annotation-uid"),Dg=rt("data-mce-annotation-active"),xf=rt("data-mce-annotation-classes"),jd=rt("data-mce-annotation-attrs"),Rg=e=>n=>ls(n,e),Mg=(e,n)=>{const o=e.selection.getRng(),r=me.fromDom(o.startContainer),a=me.fromDom(e.getBody()),u=n.fold(()=>"."+zh(),C=>`[${Zd()}="${C}"]`),f=ku(r,o.startOffset).getOr(r);return Di(f,u,Rg(a)).bind(C=>Pr(C,`${Vh()}`).bind(E=>Pr(C,`${Zd()}`).map(M=>{const N=Wb(e,E);return{uid:E,name:M,elements:N}})))},Xk=e=>ke(e)&&Nd(e,zh()),xy=(e,n)=>Dr(e,"data-mce-bogus")||Sy(e,'[data-mce-bogus="all"]',Rg(n)),Wb=(e,n)=>{const o=me.fromDom(e.getBody()),r=Vr(o,`[${Vh()}="${n}"]`);return Lt(r,a=>!xy(a,o))},Jw=(e,n)=>{const o=me.fromDom(e.getBody()),r=Vr(o,`[${Zd()}="${n}"]`),a={};return ye(r,u=>{if(!xy(u,o)){const f=rr(u,Vh()),b=os(a,f).getOr([]);a[f]=b.concat([u])}}),a},Ty=(e,n)=>{const o=Te({}),r=()=>({listeners:[],previous:fa()}),a=(N,B)=>{u(N,j=>(B(j),j))},u=(N,B)=>{const j=o.get(),Q=os(j,N).getOrThunk(r),q=B(Q);j[N]=q,o.set(j)},f=(N,B,j)=>{a(N,Q=>{ye(Q.listeners,q=>q(!0,N,{uid:B,nodes:je(j,te=>te.dom)}))})},b=N=>{a(N,B=>{ye(B.listeners,j=>j(!1,N))})},C=(N,B)=>{ye(Wb(e,N),j=>{B?Eo(j,Dg(),"true"):Or(j,Dg())})},E=Sf(()=>{const N=ns(n.getNames());ye(N,B=>{u(B,j=>{const Q=j.previous.get();return Mg(e,I.some(B)).fold(()=>{Q.each(q=>{b(B),j.previous.clear(),C(q,!1)})},({uid:q,name:te,elements:ve})=>{$s(Q,q)||(Q.each(xe=>C(xe,!1)),f(te,q,ve),j.previous.set(q),C(q,!0))}),{previous:j.previous,listeners:j.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(N,B)=>{u(N,j=>({previous:j.previous,listeners:j.listeners.concat([B])}))}}},Zb=(e,n)=>{const o=Zd(),r=u=>I.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(Vh(),null),u.attr(Zd(),null),u.attr(Dg(),null);const C=I.from(u.attr(jd())).map(B=>B.split(",")).getOr([]),E=I.from(u.attr(xf())).map(B=>B.split(",")).getOr([]);ye(C,B=>u.attr(B,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],N=wc(M,[zh()].concat(E));u.attr("class",N.length>0?N.join(" "):null),u.attr(xf(),null),u.attr(jd(),null)};e.serializer.addTempAttr(Dg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},Ey=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>os(e,a).map(u=>u.settings),getNames:()=>ws(e)}};let jb=0;const Uh=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return jb++,e+"_"+r+jb+String(o)},Gb=(e,n)=>{ye(n,o=>{Eu(e,o)})},cR=(e,n)=>{ye(n,o=>{Oi(e,o)})},Jk=(e,n)=>me.fromDom(e.dom.cloneNode(n)),ud=e=>Jk(e,!1),Wh=e=>Jk(e,!0),Qw=(e,n)=>{const o=me.fromTag(n),r=Zl(e);return Xr(o,r),o},eS=(e,n)=>{const o=Qw(e,n);Tl(e,o);const r=_c(e);return _u(o,r),js(e),o},qb=(e,n,o=Me)=>{const r=new da(e,n),a=u=>{let f;do f=r[u]();while(f&&!ut(f)&&!o(f));return I.from(f).filter(ut)};return{current:()=>I.from(r.current()).filter(ut),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Tf=(e,n)=>{const o=n||(f=>e.isBlock(f)||ms(f)||is(f)),r=(f,b,C,E)=>{if(ut(f)){const M=E(f,b,f.data);if(M!==-1)return I.some({container:f,offset:M})}return C().bind(M=>r(M.container,M.offset,C,E))};return{backwards:(f,b,C,E)=>{const M=qb(f,E??e.getRoot(),o);return r(f,b,()=>M.prev().map(N=>({container:N,offset:N.length})),C).getOrNull()},forwards:(f,b,C,E)=>{const M=qb(f,E??e.getRoot(),o);return r(f,b,()=>M.next().map(N=>({container:N,offset:0})),C).getOrNull()}}},ky=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?I.from(u.dom.nodeValue):I.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Be,"text"),c1=e=>ky.get(e),e_=e=>ky.getOption(e),Kb=(e,n)=>ky.set(e,n),Zh=["td","th"],tS=["thead","tbody","tfoot"],Yb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],_y=["li","dd","dt"],nS=["ul","ol","dl"],nl=["pre","script","textarea","style"],a1=e=>{let n;return o=>(n=n||cs(e,Je),un(n,No(o)))},Ay=e=>No(e)==="table",jh=e=>ke(e)&&No(e)==="br",oS=a1(Yb),dd=a1(nS),Jl=a1(_y),Gh=a1(tS),qh=a1(Zh),l1=a1(nl),t_=e=>{const n=[];let o=e.dom;for(;o;)n.push(me.fromDom(o)),o=o.lastChild;return n},n_=e=>{const n=Vr(e,"br"),o=Lt(t_(e).slice(-1),jh);n.length===o.length&&ye(o,js)},Ng=()=>{const e=me.fromTag("br");return Eo(e,"data-mce-bogus","1"),e},bi=e=>{li(e),xr(e,Ng())},sS=(e,n)=>{Gl(e).each(o=>{Sl(o).each(r=>{n.isBlock(No(e))&&jh(o)&&n.isBlock(No(r))&&js(o)})})},lc=Oh,Bg=jp,vi=ma,aR=e=>e.insertContent(lc,{preserve_zwsp:!0}),Xb=Ht,Kh=ut,Pg=e=>(Kh(e)&&(e=e.parentNode),Xb(e)&&e.hasAttribute("data-mce-caret")),md=e=>Kh(e)&&Bg(e.data),yi=e=>Pg(e)||md(e),Oy=e=>e.firstChild!==e.lastChild||!ms(e.firstChild),Dy=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(lc),u=e.parentNode;if(n){const f=e.previousSibling;if(Kh(f)){if(yi(f))return f;if(Gd(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Kh(f)){if(yi(f))return f;if(Fg(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},Ry=e=>{const n=e.container();return ut(n)?n.data.charAt(e.offset())===lc||e.isAtStart()&&md(n.previousSibling):!1},$g=e=>{const n=e.container();return ut(n)?n.data.charAt(e.offset()-1)===lc||e.isAtEnd()&&md(n.nextSibling):!1},o_=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ng().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Fg=e=>Kh(e)&&e.data[0]===lc,Gd=e=>Kh(e)&&e.data[e.data.length-1]===lc,i1=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Sm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Yo=e=>e&&e.hasAttribute("data-mce-caret")?(i1(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Dl=e=>Pg(e.startContainer),au=Math.round,Am=e=>e?{left:au(e.left),top:au(e.top),bottom:au(e.bottom),right:au(e.right),width:au(e.width),height:au(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Cr=(e,n)=>(e=Am(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),rS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Jb=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,u1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Jb(n.top-e.bottom,e,n)},Qb=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Jb(n.bottom-e.top,e,n),s_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Ir=e=>jn(e,(n,o)=>n.fold(()=>I.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return I.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),I.none()),My=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},r_=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),c_=(e,n,o)=>Math.min(Math.max(e,n),o),Yh=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Ut=(e,n)=>{if(Ht(e)&&e.hasChildNodes()){const o=e.childNodes,r=c_(n,0,o.length-1);return o[r]}else return e},a_=(e,n)=>{if(!(n<0&&Ht(e)&&e.hasChildNodes()))return Ut(e,n)},cS=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),e0=e=>ee(e)&&e.charCodeAt(0)>=768&&cS.test(e),Ny=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},l_=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},d1=Ye,m1=is,Ig=ms,lR=ut,qd=Mi(["script","style","textarea"]),i_=Mi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Om=Mi(["table"]),aS=yi,fd=e=>aS(e)?!1:lR(e)?!qd(e.parentNode):i_(e)||Ig(e)||Om(e)||Xh(e),lS=e=>Ht(e)&&e.getAttribute("unselectable")==="true",Xh=e=>!lS(e)&&m1(e),u_=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Xh(o))return!1;if(d1(o))return!0}return!0},d_=e=>Xh(e)?!jn(gr(e.getElementsByTagName("*")),(n,o)=>n||d1(o),!1):!1,m_=e=>i_(e)||d_(e),By=(e,n)=>fd(e)&&u_(e,n),t0=Ht,iS=fd,Py=wg("display","block table"),f_=wg("float","left right"),f1=l_(t0,iS,go(f_)),Ef=go(wg("white-space","pre pre-line pre-wrap")),Jh=ut,n0=ms,$y=kr.nodeIndex,o0=a_,Fy=e=>e?e.createRange():kr.DOM.createRng(),Iy=e=>ee(e)&&/[\r\n\t ]/.test(e),Ly=e=>!!e.setStart&&!!e.setEnd,uS=e=>{const n=e.startContainer,o=e.startOffset;if(Iy(e.toString())&&Ef(n.parentNode)&&ut(n)){const r=n.data;if(Iy(r[o-1])||Iy(r[o+1]))return!0}return!1},Oa=e=>{const n=e.ownerDocument,o=Fy(n),r=n.createTextNode(Ac),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Am(o.getBoundingClientRect());return a.removeChild(r),u},g_=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&ut(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),kf(u)}else return null},dS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,kf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Am(r[0]):o=Am(e.getBoundingClientRect()),!Ly(e)&&n0(e)&&dS(o)?Oa(e):dS(o)&&Ly(e)&&(n=g_(e))!==null&&n!==void 0?n:o},Lg=(e,n)=>{const o=Cr(e,n);return o.width=1,o.right=o.left+1,o},Hy=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&rS(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=Fy(f.ownerDocument);if(b<f.data.length){if(e0(f.data[b]))return;if(e0(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!uS(C))){o(Lg(kf(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),uS(C)||o(Lg(kf(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),uS(C)||o(Lg(kf(C),!0)))},a=e.container(),u=e.offset();if(Jh(a))return r(a,u),n;if(t0(a))if(e.isAtEnd()){const f=o0(a,u);Jh(f)&&r(f,f.data.length),f1(f)&&!n0(f)&&o(Lg(kf(f),!1))}else{const f=o0(a,u);if(Jh(f)&&r(f,0),f1(f)&&e.isAtEnd())return o(Lg(kf(f),!1)),n;const b=o0(e.container(),e.offset()-1);f1(b)&&!n0(b)&&(Py(b)||Py(f)||!f1(f))&&o(Lg(kf(b),!1)),f1(f)&&o(Lg(kf(f),!0))}return n},Fe=(e,n,o)=>{const r=()=>(Jh(e),n===0),a=()=>Jh(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=Fy(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=Hy(Fe(e,n))),o),b=()=>f().length>0,C=M=>M&&e===M.container()&&n===M.offset(),E=M=>o0(e,M?n-1:n);return{container:rt(e),offset:rt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:C,getNode:E}};Fe.fromRangeStart=e=>Fe(e.startContainer,e.startOffset),Fe.fromRangeEnd=e=>Fe(e.endContainer,e.endOffset),Fe.after=e=>Fe(e.parentNode,$y(e)+1),Fe.before=e=>Fe(e.parentNode,$y(e)),Fe.isAbove=(e,n)=>zr(lo(n.getClientRects()),Cs(e.getClientRects()),u1).getOr(!1),Fe.isBelow=(e,n)=>zr(Cs(n.getClientRects()),lo(e.getClientRects()),Qb).getOr(!1),Fe.isAtStart=e=>e?e.isAtStart():!1,Fe.isAtEnd=e=>e?e.isAtEnd():!1,Fe.isTextPosition=e=>e?ut(e.container()):!1,Fe.isElementPosition=e=>!Fe.isTextPosition(e);const Kd=(e,n)=>{ut(n)&&n.data.length===0&&e.remove(n)},h_=(e,n,o)=>{n.insertNode(o),Kd(e,o.previousSibling),Kd(e,o.nextSibling)},mS=(e,n,o)=>{const r=I.from(o.firstChild),a=I.from(o.lastChild);n.insertNode(o),r.each(u=>Kd(e,u.previousSibling)),a.each(u=>Kd(e,u.nextSibling))},g1=(e,n,o)=>{Oc(o)?mS(e,n,o):h_(e,n,o)},lu=ut,h1=Sm,fS=kr.nodeIndex,zy=e=>{const n=e.parentNode;return h1(n)?zy(n):n},ml=e=>e?de(e.childNodes,(n,o)=>(h1(o)&&o.nodeName!=="BR"?n=n.concat(ml(o)):n.push(o),n),[]):[],s0=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&lu(o);)n+=o.data.length;return n},gS=e=>n=>e===n,p_=e=>{let n,o;n=ml(zy(e)),o=re(n,gS(e),e),n=n.slice(0,o+1);const r=de(n,(a,u,f)=>(lu(u)&&lu(n[f-1])&&a++,a),0);return n=sa(n,Mi([e.nodeName])),o=re(n,gS(e),e),o-r},hS=e=>(lu(e)?"text()":e.nodeName.toLowerCase())+"["+p_(e)+"]",b_=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},pS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(lu(r))u=s0(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(hS(r));let f=b_(e,r);return f=sa(f,go(Sm)),o=o.concat(mc(f,b=>hS(b))),o.reverse().join("/")+","+u},v_=(e,n,o)=>{let r=ml(e);return r=sa(r,(a,u)=>!lu(a)||!lu(r[u-1])),r=sa(r,Mi([n])),r[o]},y_=(e,n)=>{let o=e,r=0;for(;lu(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!lu(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return lu(e)&&n>e.data.length&&(n=e.data.length),Fe(e,n)},bS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=de(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),v_(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!lu(u)&&u.parentNode){let f;return a==="after"?f=fS(u)+1:f=fS(u),Fe(u.parentNode,f)}return y_(u,parseInt(a,10))},Qh=is,C_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&ut(a);a=a.previousSibling)r+=e(a.data).length;return r},vS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(ut(u))b.push(o?C_(n,u,f):f);else{let E=0;const M=u.childNodes;f>=M.length&&M.length&&(E=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+E)}for(let E=u;E&&E!==C;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},ec=(e,n,o,r)=>{const a=n.dom,u=vS(a,e,o,r,!0),f=n.isForward(),b=Dl(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=vS(a,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},r0=(e,n,o)=>{let r=0;return dt.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},yS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ht(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},CS=e=>(yS(e,!0),yS(e,!1),e),c0=(e,n)=>{if(Ht(e)&&(e=Ut(e,n),Qh(e)))return e;if(yi(e)){ut(e)&&Pg(e)&&(e=e.parentNode);let o=e.previousSibling;if(Qh(o)||(o=e.nextSibling,Qh(o)))return o}},ol=e=>c0(e.startContainer,e.startOffset)||c0(e.endContainer,e.endOffset),fl=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||Qh(r)){const f=r.nodeName;return{name:f,index:r0(o.dom,f,r)}}const u=ol(a);if(u){const f=u.tagName;return{name:f,index:r0(o.dom,f,u)}}return ec(e,o,n,a)},wS=e=>{const n=e.getRng();return{start:pS(e.dom.getRoot(),Fe.fromRangeStart(n)),end:pS(e.dom.getRoot(),Fe.fromRangeEnd(n)),forward:e.isForward()}},SS=e=>({rng:e.getRng(),forward:e.isForward()}),Vy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},xS=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:r0(o,b,f)};const E=CS(r.cloneRange());if(!u){E.collapse(!1);const N=Vy(o,a+"_end",n);g1(o,E,N)}r=CS(r),r.collapse(!0);const M=Vy(o,a+"_start",n);return g1(o,r,M),e.moveToBookmark({id:a,keep:!0,forward:C}),{id:a,forward:C}},TS=(e,n,o=!1)=>n===2?fl(vi,o,e):n===3?wS(e):n?SS(e):xS(e,!1),Uy=Ke(fl,Ho,!0),Wy=e=>{const n=u=>u(e),o=rt(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Je,isError:Me,map:u=>Rl.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>I.some(e)};return a},a0=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:Me,isError:Je,map:n,mapError:r=>Rl.error(r(e)),bind:n,exists:Me,forall:Je,getOr:Ho,or:Ho,getOrThunk:ft,orThunk:ft,getOrDie:Vs(String(e)),each:Pt,toOptional:I.none};return o},Rl={value:Wy,error:a0,fromOption:(e,n)=>e.fold(()=>a0(n),Wy)},Os={generate:e=>{if(!it(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ye(e,(r,a)=>{const u=ws(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!it(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const E=C.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...N)=>{if(N.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+N.length);return N[a].apply(null,C)},match:N=>{const B=ws(N);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!Bs(n,Q=>He(B,Q)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return N[f].apply(null,C)},log:N=>{console.log(N,{constructors:n,constructor:f,params:C})}}}}),o}};Os.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const gd=e=>{const n=[],o=[];return ye(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},p1=e=>e.type==="inline-command"||e.type==="inline-format",ES=e=>e.type==="block-command"||e.type==="block-format",l0=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,i0=e=>{var n;const o=a=>Rl.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(it(e.format)){if(!Bs(e.format,ee))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(ee(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return Rl.value(u(b))}else return e.cmd!==void 0?ee(e.cmd)?Rl.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!st(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Rl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},_f=e=>Lt(e,ES),Da=e=>Lt(e,p1),Af=(e,n)=>({inlinePatterns:Da(e),blockPatterns:_f(e),dynamicPatternsLookup:n}),jy=(e,n)=>({...e,blockPatterns:Lt(e.blockPatterns,o=>l0(o,n))}),kS=e=>{const n=gd(je(e,i0));return ye(n.errors,o=>console.error(o.message,o.pattern)),n.values},w_=e=>n=>{const o=e(n);return kS(o)},ep=gt().deviceType,Gy=ep.isTouch(),qy=kr.DOM,Ky=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return jn(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[Sc(u)]=Sc(f),o},{})},Yy=e=>Ue(e,RegExp),jt=e=>n=>n.options.get(e),b1=e=>ee(e)||st(e),Xy=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const a=Ky(o);return{value:os(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},tp=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Xy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Xy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&Bn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=He(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Dt(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||co(o,ee);return r?ee(o)?{value:je(o.split(","),Sc),valid:r}:it(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ug(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||co(o,ee);return r?{value:it(o)?o:je(o.split(","),Sc),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Dt(o)||ee(o);return r?o===!1||ep.isiPhone()||ep.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Gy}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||ie(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:b1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:b1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:b1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:b1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>co(o,st)||o===!1?{value:kS(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ie(o)?{value:w_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>co(o,Yy)?{value:o,valid:!0}:Yy(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=He(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=He(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ga.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:qy.getAttrib(e.getElement(),"placeholder")})})},Fu=jt("iframe_attrs"),S_=jt("doctype"),Ra=jt("document_base_url"),x_=jt("body_id"),Of=jt("body_class"),Jy=jt("content_security_policy"),_S=jt("br_in_pre"),sl=jt("forced_root_block"),Df=jt("forced_root_block_attrs"),u0=jt("newline_behavior"),Rf=jt("br_newline_selector"),T_=jt("no_newline_selector"),E_=jt("keep_styles"),Vc=jt("end_container_on_empty_block"),Rc=jt("automatic_uploads"),Uc=jt("images_reuse_filename"),Gs=jt("images_replace_blob_uris"),ea=jt("icons"),Mc=jt("icons_url"),Qy=jt("images_upload_url"),d0=jt("images_upload_base_path"),eC=jt("images_upload_credentials"),AS=jt("images_upload_handler"),OS=jt("content_css_cors"),m0=jt("referrer_policy"),f0=jt("language"),Hg=jt("language_url"),tC=jt("indent_use_margin"),l6=jt("indentation"),zg=jt("content_css"),k_=jt("content_style"),Ql=jt("font_css"),iR=jt("directionality"),__=jt("inline_boundaries_selector"),Bi=jt("object_resizing"),v1=jt("resize_img_proportional"),y1=jt("placeholder"),hd=jt("event_root"),Ml=jt("service_message"),Mf=jt("theme"),nC=jt("theme_url"),g0=jt("model"),DS=jt("model_url"),Vg=jt("inline_boundaries"),oC=jt("formats"),sC=jt("preview_styles"),RS=jt("format_empty_lines"),MS=jt("format_noneditable_selector"),C1=jt("custom_ui_selector"),Ug=jt("inline"),rC=jt("hidden_input"),cC=jt("submit_patch"),NS=jt("add_form_submit_trigger"),BS=jt("add_unload_trigger"),A_=jt("custom_undo_redo_levels"),h0=jt("disable_nodechange"),PS=jt("readonly"),O_=jt("editable_root"),$S=jt("content_css_cors"),w1=jt("plugins"),D_=jt("external_plugins"),FS=jt("block_unsupported_drop"),Nl=jt("visual"),aC=jt("visual_table_class"),lC=jt("visual_anchor_class"),iC=jt("iframe_aria_text"),p0=jt("setup"),R_=jt("init_instance_callback"),M_=jt("urlconverter_callback"),b0=jt("auto_focus"),IS=jt("browser_spellcheck"),uC=jt("protect"),dC=jt("paste_block_drop"),S1=jt("paste_data_images"),mC=jt("paste_preprocess"),LS=jt("paste_postprocess"),HS=jt("newdocument_content"),zS=jt("paste_webkit_styles"),N_=jt("paste_remove_styles_if_webkit"),VS=jt("paste_merge_formats"),US=jt("smart_paste"),WS=jt("paste_as_text"),v0=jt("paste_tab_spaces"),np=jt("allow_html_data_urls"),ZS=jt("text_patterns"),B_=jt("text_patterns_lookup"),y0=jt("noneditable_class"),P_=jt("editable_class"),Iu=jt("noneditable_regexp"),C0=jt("preserve_cdata"),w0=jt("highlight_on_focus"),S0=jt("xss_sanitization"),Bl=jt("init_content_sync"),Nf=e=>e.options.isSet("text_patterns_lookup"),Bf=e=>dt.explode(e.options.get("font_size_style_values")),$_=e=>dt.explode(e.options.get("font_size_classes")),Pf=e=>e.options.get("encoding")==="xml",x1=e=>dt.explode(e.options.get("images_file_types")),F_=jt("table_tab_navigation"),I_=jt("details_initial_state"),jS=jt("details_serialized_state"),x0=jt("sandbox_iframes"),T0=e=>e.options.get("sandbox_iframes_exclusions"),L_=jt("convert_unsafe_embeds"),T1=jt("license_key"),fC=jt("api_key"),H_=Ht,gC=ut,hC=e=>{const n=e.parentNode;n&&n.removeChild(e)},E0=e=>{const n=vi(e);return{count:e.length-n.length,text:n}},z_=e=>{let n;for(;(n=e.data.lastIndexOf(lc))!==-1;)e.deleteData(n,1)},Wg=(e,n)=>($f(e),n),GS=(e,n)=>{const o=E0(e.data.substr(0,n.offset())),r=E0(e.data.substr(n.offset()));return(o.text+r.text).length>0?(z_(e),Fe(e,n.offset()-o.count)):n},pC=(e,n)=>{const o=n.container(),r=Gc(gr(o.childNodes),e).map(a=>a<n.offset()?Fe(o,n.offset()-1):n).getOr(n);return $f(e),r},qS=(e,n)=>gC(e)&&n.container()===e?GS(e,n):Wg(e,n),k0=(e,n)=>n.container()===e.parentNode?pC(e,n):Wg(e,n),V_=(e,n)=>Fe.isTextPosition(n)?qS(e,n):k0(e,n),$f=e=>{H_(e)&&yi(e)&&(Oy(e)?e.removeAttribute("data-mce-caret"):hC(e)),gC(e)&&(z_(e),e.data.length===0&&hC(e))},uR=is,op=_a,_0=Rh,sp="*[contentEditable=false],video,audio,embed,object",rp=(e,n,o)=>{const r=Cr(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},U_=e=>{var n,o;const r=Vr(me.fromDom(e),sp);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(Gd(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Fg(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},KS=(e,n,o,r)=>{const a=fa();let u,f;const b=sl(e),C=e.dom,E=(q,te)=>{let ve;if(M(),_0(te))return null;if(o(te)){const xe=o_(b,te,q),Ce=rp(n,te,q);C.setStyle(xe,"top",Ce.top),C.setStyle(xe,"caret-color","transparent"),f=xe;const De=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(De,{...Ce}),C.add(n,De),a.set({caret:De,element:te,before:q}),q&&C.addClass(De,"mce-visual-caret-before"),N(),ve=te.ownerDocument.createRange(),ve.setStart(xe,0),ve.setEnd(xe,0)}else return f=Dy(te,q),ve=te.ownerDocument.createRange(),A0(f.nextSibling)?(ve.setStart(f,0),ve.setEnd(f,0)):(ve.setStart(f,1),ve.setEnd(f,1)),ve;return ve},M=()=>{U_(n),f&&($f(f),f=null),a.on(q=>{C.remove(q.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},N=()=>{u=setInterval(()=>{a.on(q=>{r()?C.toggleClass(q.caret,"mce-visual-caret-hidden"):C.addClass(q.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(q=>{const te=rp(n,q.element,q.before);C.setStyles(q.caret,{...te})})},destroy:()=>clearInterval(u)}},W_=()=>St.browser.isFirefox(),A0=e=>uR(e)||op(e),Rm=e=>(A0(e)||eu(e)&&W_())&&ci(me.fromDom(e)).exists(bc),bC=Ye,vC=is,Z_=_a,yC=wg("display","block table table-cell table-caption list-item"),YS=yi,XS=Pg,JS=Ht,cp=ut,O0=fd,Zg=e=>e>0,Mm=e=>e<0,E1=(e,n)=>{let o;for(;o=e(n);)if(!XS(o))return o;return null},ap=(e,n,o,r,a)=>{const u=new da(e,r),f=vC(e)||XS(e);let b;if(Mm(n)){if(f&&(b=E1(u.prev.bind(u),!0),o(b)))return b;for(;b=E1(u.prev.bind(u),a);)if(o(b))return b}if(Zg(n)){if(f&&(b=E1(u.next.bind(u),!0),o(b)))return b;for(;b=E1(u.next.bind(u),a);)if(o(b))return b}return null},j_=(e,n)=>{const o=a=>bC(a.dom),r=a=>a.dom===n;return cr(me.fromDom(e),o,r).map(a=>a.dom).getOr(n)},pd=(e,n)=>{for(;e&&e!==n;){if(yC(e))return e;e=e.parentNode}return null},Pi=(e,n,o)=>pd(e.container(),o)===pd(n.container(),o),D0=(e,n)=>{if(!n)return I.none();const o=n.container(),r=n.offset();return JS(o)?I.from(o.childNodes[r+e]):I.none()},G_=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},dR=(e,n,o)=>pd(n,e)===pd(o,e),jg=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&YS(u)&&(u=u[r]),vC(u)||Z_(u)){if(dR(n,u,a))return u;break}if(O0(u))break;a=a.parentNode}return null},lp=Ke(G_,!0),ip=Ke(G_,!1),rl=(e,n,o)=>{let r;const a=Ke(jg,!0,n),u=Ke(jg,!1,n),f=o.startContainer,b=o.startOffset;if(Pg(f)){const C=cp(f)?f.parentNode:f,E=C.getAttribute("data-mce-caret");if(E==="before"&&(r=C.nextSibling,Rm(r)))return lp(r);if(E==="after"&&(r=C.previousSibling,Rm(r)))return ip(r)}if(!o.collapsed)return o;if(ut(f)){if(YS(f)){if(e===1){if(r=u(f),r)return lp(r);if(r=a(f),r)return ip(r)}if(e===-1){if(r=a(f),r)return ip(r);if(r=u(f),r)return lp(r)}return o}if(Gd(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?lp(r):o;if(Fg(f)&&b<=1)return e===-1&&(r=a(f),r)?ip(r):o;if(b===f.data.length)return r=u(f),r?lp(r):o;if(b===0)return r=a(f),r?ip(r):o}return o},R0=(e,n)=>D0(e?0:-1,n).filter(vC),Gg=(e,n,o)=>{const r=rl(e,n,o);return e===-1?Fe.fromRangeStart(r):Fe.fromRangeEnd(r)},M0=e=>I.from(e.getNode()).map(me.fromDom),QS=e=>I.from(e.getNode(!0)).map(me.fromDom),CC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},N0=(e,n)=>{const o=Pi(e,n);return!o&&ms(e.getNode())?!0:o};var ha;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ha||(ha={}));const B0=is,Lu=ut,wC=Ht,SC=ms,Nm=fd,ex=m_,Ff=By,P0=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},$0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,xC=(e,n)=>{if(Zg(e)){if(Nm(n.previousSibling)&&!Lu(n.previousSibling))return Fe.before(n);if(Lu(n))return Fe(n,0)}if(Mm(e)){if(Nm(n.nextSibling)&&!Lu(n.nextSibling))return Fe.after(n);if(Lu(n))return Fe(n,n.data.length)}return Mm(e)?SC(n)?Fe.before(n):Fe.after(n):Fe.before(n)},qg=(e,n)=>{const o=n.nextSibling;return o&&Nm(o)?Lu(o)?Fe(o,0):Fe.before(o):up(ha.Forwards,Fe.after(n),e)},up=(e,n,o)=>{let r,a,u,f;if(!wC(o)||!n)return null;if(n.isEqual(Fe.after(o))&&o.lastChild){if(f=Fe.after(o.lastChild),Mm(e)&&Nm(o.lastChild)&&wC(o.lastChild))return SC(o.lastChild)?Fe.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(Lu(b)){if(Mm(e)&&C>0)return Fe(b,--C);if(Zg(e)&&C<b.length)return Fe(b,++C);r=b}else{if(Mm(e)&&C>0&&(a=$0(b,C-1),Nm(a)))return!ex(a)&&(u=ap(a,e,Ff,a),u)?Lu(u)?Fe(u,u.data.length):Fe.after(u):Lu(a)?Fe(a,a.data.length):Fe.before(a);if(Zg(e)&&C<b.childNodes.length&&(a=$0(b,C),Nm(a)))return SC(a)?qg(o,a):!ex(a)&&(u=ap(a,e,Ff,a),u)?Lu(u)?Fe(u,0):Fe.before(u):Lu(a)?Fe(a,0):Fe.after(a);r=a||f.getNode()}if(r&&(Zg(e)&&f.isAtEnd()||Mm(e)&&f.isAtStart())&&(r=ap(r,e,Je,o,!0),Ff(r,o)))return xC(e,r);a=r&&ap(r,e,Ff,o);const E=Oe(Lt(P0(b,o),B0));return E&&(!a||!E.contains(a))?(Zg(e)?f=Fe.after(E):f=Fe.before(E),f):a?xC(e,a):null},za=e=>({next:n=>up(ha.Forwards,n,e),prev:n=>up(ha.Backwards,n,e)}),tx=(e,n,o)=>{const r=e?Fe.before(o):Fe.after(o);return $i(e,n,r)},TC=e=>ms(e)?Fe.before(e):Fe.after(e),EC=e=>Fe.isTextPosition(e)?e.offset()===0:fd(e.getNode()),nx=e=>{if(Fe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return fd(e.getNode(!0))},kC=(e,n)=>!Fe.isTextPosition(e)&&!Fe.isTextPosition(n)&&e.getNode()===n.getNode(!0),ox=e=>!Fe.isTextPosition(e)&&ms(e.getNode()),sx=(e,n,o)=>e?!kC(n,o)&&!ox(n)&&nx(n)&&EC(o):!kC(o,n)&&EC(n)&&nx(o),$i=(e,n,o)=>{const r=za(n);return I.from(e?r.next(o):r.prev(o))},Bm=(e,n,o)=>$i(e,n,o).bind(r=>Pi(o,r,n)&&sx(e,o,r)?$i(e,n,r):I.some(r)),rx=(e,n,o,r)=>Bm(e,n,o).bind(a=>r(a)?rx(e,n,a,r):I.some(a)),Kg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ut(o)?I.some(Fe(o,e?0:o.data.length)):o?fd(o)?I.some(e?Fe.before(o):TC(o)):tx(e,n,o):I.none()},gl=Ke($i,!0),Ci=Ke($i,!1),hl=Ke(Kg,!0),Fi=Ke(Kg,!1),F0="_mce_caret",Ii=e=>Ht(e)&&e.id===F0,Yg=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ii(o))return o;o=o.parentNode}return null},q_=e=>ee(e.start),cx=e=>un(e,"rng"),K_=e=>un(e,"id"),ax=e=>un(e,"name"),lx=e=>dt.isArray(e.start),_C=e=>!ax(e)&&Dt(e.forward)?e.forward:!0,AC=(e,n)=>(Ht(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Ma=(e,n)=>{const o=I.from(bS(e.getRoot(),n.start)),r=I.from(bS(e.getRoot(),n.end));return zr(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:_C(n)}})},OC=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(lc);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},If=e=>!e.hasChildNodes(),dp=(e,n)=>Fi(e).fold(Me,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),DC=(e,n,o)=>If(n)&&Yg(e,n)?(OC(n,o),!0):!1,I0=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let C=a.length-1;f&&C>=1;C--){const E=f.childNodes;if(DC(u,f,r))return!0;if(a[C]>E.length-1)return DC(u,f,r)?!0:dp(f,r);f=E[a[C]]}ut(f)&&(b=Math.min(a[0],f.data.length)),Ht(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},k1=e=>ut(e)&&e.data.length>0,RC=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):k1(r.nextSibling)?(f=r.nextSibling,b=0):k1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):k1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const C=r.previousSibling,E=r.nextSibling;dt.each(dt.grep(r.childNodes),N=>{ut(N)&&(N.data=N.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(ut(E)&&ut(C)&&!St.browser.isOpera()){const N=C.data.length;C.appendData(E.data),e.remove(E),f=C,b=N}}return I.some(Fe(f,b))}else return I.none()},mp=(e,n)=>{const o=e.createRng();return I0(e,!0,n,o)&&I0(e,!1,n,o)?I.some({range:o,forward:_C(n)}):I.none()},MC=(e,n)=>{const o=RC(e,"start",n),r=RC(e,"end",n);return zr(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(AC(e,a.container()),a.offset()),f.setEnd(AC(e,u.container()),u.offset()),{range:f,forward:_C(n)}})},Yd=(e,n)=>I.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Xg=(e,n)=>{const o=e.dom;if(n){if(lx(n))return mp(o,n);if(q_(n))return Ma(o,n);if(K_(n))return MC(o,n);if(ax(n))return Yd(o,n);if(cx(n))return I.some({range:n.rng,forward:_C(n)})}return I.none()},ix=(e,n,o)=>TS(e,n,o),Pm=(e,n)=>{Xg(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Li=e=>Ht(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Xd=(e=>n=>e===n)(Ac),Jg=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,NC=e=>!Jg(e)&&!Xd(e)&&!jp(e),L0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},dx=e=>Us(e,n=>{const o=Yh(n);return o?[me.fromDom(o)]:[]}),Y_=e=>L0(e).length>1,X_=e=>Lt(dx(e),qh),mx=e=>Vr(e,"td[data-mce-selected],th[data-mce-selected]"),Lf=(e,n)=>{const o=mx(n);return o.length>0?o:X_(e)},fp=e=>Lf(L0(e.selection.getSel()),me.fromDom(e.getBody())),_1=(e,n)=>cc(e,"table",n),J_=e=>{const n=e.startContainer,o=e.startOffset;return ut(n)?o===0?I.some(me.fromDom(n)):I.none():I.from(n.childNodes[o]).map(me.fromDom)},Q_=e=>{const n=e.endContainer,o=e.endOffset;return ut(n)?o===n.data.length?I.some(me.fromDom(n)):I.none():I.from(n.childNodes[o-1]).map(me.fromDom)},gp=e=>Bd(e).fold(rt([e]),n=>[e].concat(gp(n))),BC=e=>Gl(e).fold(rt([e]),n=>No(n)==="br"?Sl(n).map(o=>[e].concat(BC(o))).getOr([]):[e].concat(BC(n))),H0=(e,n)=>zr(J_(n),Q_(n),(o,r)=>{const a=Vo(gp(e),Ke(ls,o)),u=Vo(BC(e),Ke(ls,r));return a.isSome()&&u.isSome()}).getOr(!1),PC=(e,n,o,r)=>{const a=o,u=new da(o,a),f=Jo(e.schema.getMoveCaretBeforeOnEnterElements(),(C,E)=>!He(["td","th","table"],E.toLowerCase()));let b=o;do{if(ut(b)&&dt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},$C=e=>{const n=e.selection.getSel();return Re(n)&&n.rangeCount>0},hp=(e,n)=>{const o=fp(e);o.length>0?ye(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},FC=(e,n,o)=>{const r=xS(e,n);o(r),e.moveToBookmark(r)},pp=e=>Go(e==null?void 0:e.nodeType),IC=e=>Ht(e)&&!Li(e)&&!Ii(e)&&!Sm(e),es=(e,n)=>{if(IC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Jd=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=is(u);FC(r,!0,()=>{n()}),f&&is(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Qg(a,r)},Qg=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!es(e,b)&&Ht(u)){const C=u.childNodes,E=e.getRoot();let M;if(f<C.length){const N=C[f];M=new da(N,(o=e.getParent(N,e.isBlock))!==null&&o!==void 0?o:E)}else{const N=C[C.length-1];M=new da(N,(r=e.getParent(N,e.isBlock))!==null&&r!==void 0?r:E),M.next(!0)}for(let N=M.current();N;N=M.next()){if(e.getContentEditable(N)==="false")return;if(ut(N)&&!HC(N)){a.setStart(N,0),n.setRng(a);return}}}},A1=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ht(e)||!HC(e))return e}},LC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ou(e,n),$m=(e,n,o)=>e.schema.isValidChild(n,o),HC=(e,n=!1)=>{if(Re(e)&&ut(e)){const o=n?e.data.replace(/ /g," "):e.data;return ui(o)}else return!1},z0=e=>Re(e)&&ut(e)&&e.length===0,zC=(e,n)=>{const o="[data-mce-cef-wrappable]",r=MS(e),a=mo(r)?o:`${o},${r}`;return Ka(me.fromDom(n),a)},VC=(e,n)=>{const o=e.dom;return IC(n)&&o.getContentEditable(n)==="false"&&zC(e,n)&&o.select('[contenteditable="true"]',n).length===0},eh=(e,n)=>ie(e)?e(n):(Re(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),V0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),th=(e,n)=>{if(xn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=ld(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},U0=(e,n,o)=>{const r=e.getStyle(n,o);return th(r,o)},fx=(e,n)=>{let o;return e.getParent(n,r=>Ht(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},bp=(e,n,o)=>e.getParents(n,o,e.getRoot()),W0=(e,n,o)=>{const r=e.formatter.get(n);return Re(r)&&vt(r,o)},eA=(e,n)=>W0(e,n,r=>{const a=u=>ie(u)||u.length>1&&u.charAt(0)==="%";return vt(["styles","attributes"],u=>os(r,u).exists(f=>{const b=it(f)?f:jr(f);return vt(b,a)}))}),Z0=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Jo(u,(f,b)=>vt(r,C=>C===b));return W0(e,n,u=>{const f=a(u);return W0(e,o,b=>{const C=a(b);return rc(f,C)})})},Fm=e=>tr(e,"block"),tA=e=>Fm(e)&&e.wrapper===!0,O1=e=>Fm(e)&&e.wrapper!==!0,iu=e=>tr(e,"selector"),pa=e=>tr(e,"inline"),nA=e=>iu(e)&&pa(e)&&$s(os(e,"mixed"),!0),bd=e=>iu(e)&&e.expand!==!1&&!pa(e),oA=e=>{const n=[];let o=e;for(;o;){if(ut(o)&&o.data!==lc||o.childNodes.length>1)return[];Ht(o)&&n.push(o),o=o.firstChild}return n},gx=e=>oA(e).length>0,D1=e=>Ii(e.dom)&&gx(e.dom),vp=Li,hx=bp,px=HC,mR=LC,fR=e=>ms(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,bx=(e,n)=>{let o=n;for(;o;){if(Ht(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},vx=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},Wt=(e,n,o)=>vx(e,n,o,r=>Xd(r)||Jg(r)),ba=(e,n,o)=>vx(e,n,o,NC),R1=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(M,N,B)=>{const j=Tf(e),Q=a?j.backwards:j.forwards;return I.from(Q(M,N,(q,te)=>vp(q.parentNode)?-1:(f=q,B(a,q,te)),b))};return C(o,r,Wt).bind(M=>u?C(M.container,M.offset+(a?-1:0),ba):I.some(M)).orThunk(()=>f?I.some({container:f,offset:a?0:f.length}):I.none())},va=(e,n,o,r,a)=>{const u=r[a];ut(r)&&mo(r.data)&&u&&(r=u);const f=hx(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const E=n[C];if(!(Re(E.collapsed)&&E.collapsed!==o.collapsed)&&iu(E)&&e.is(f[b],E.selector))return f[b]}return r},uu=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(Fm(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(ut(o)?o.parentNode:o,E=>E!==f&&mR(e.schema,E),C)}if(u&&Fm(b)&&b.wrapper&&(u=hx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!V0(u,"br")););return u||o},UC=(e,n,o,r)=>{const a=o.parentNode;return Re(o[r])?!1:a===n||xn(a)||e.isBlock(a)?!0:UC(e,n,a,r)},nh=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(ut(o)&&!px(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const E=ut(C)&&!UC(e,b,C,f);if(!vp(C)&&!fR(C)&&!px(C,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},j0=e=>vp(e.parentNode)||vp(e),Hf=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return Ht(a)&&a.hasChildNodes()&&(a=Ut(a,u),ut(a)&&(u=0)),Ht(f)&&f.hasChildNodes()&&(f=Ut(f,n.collapsed?b:b-1),ut(f)&&(b=f.data.length)),a=bx(e,a),f=bx(e,f),j0(a)&&(a=vp(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,ut(a)&&(u=n.collapsed?a.length:0)),j0(f)&&(f=vp(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,ut(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(R1(e,e.getRoot(),a,u,!0,r).each(({container:N,offset:B})=>{a=N,u=B}),R1(e,e.getRoot(),f,b,!1,r).each(({container:N,offset:B})=>{f=N,b=B})),(pa(C)||C.block_expand)&&((!pa(C)||!ut(a)||u===0)&&(a=nh(e,o,a,u,!0)),(!pa(C)||!ut(f)||b===f.data.length)&&(f=nh(e,o,f,b,!1))),bd(C)&&(a=va(e,o,n,a,"previousSibling"),f=va(e,o,n,f,"nextSibling")),(Fm(C)||iu(C))&&(a=uu(e,o,a,"previousSibling"),f=uu(e,o,f,"nextSibling"),Fm(C)&&(e.isBlock(a)||(a=nh(e,o,a,u,!0),ut(a)&&(u=0)),e.isBlock(f)||(f=nh(e,o,f,b,!1),ut(f)&&(b=f.data.length)))),Ht(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),Ht(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},M1=(e,n,o)=>{var r;const a=n.startOffset,u=Ut(n.startContainer,a),f=n.endOffset,b=Ut(n.endContainer,f-1),C=te=>{const ve=te[0];ut(ve)&&ve===u&&a>=ve.data.length&&te.splice(0,1);const xe=te[te.length-1];return f===0&&te.length>0&&xe===b&&ut(xe)&&te.splice(te.length-1,1),te},E=(te,ve,xe)=>{const Ce=[];for(;te&&te!==xe;te=te[ve])Ce.push(te);return Ce},M=(te,ve)=>e.getParent(te,xe=>xe.parentNode===ve,ve),N=(te,ve,xe)=>{const Ce=xe?"nextSibling":"previousSibling";for(let De=te,ct=De.parentNode;De&&De!==ve;De=ct){ct=De.parentNode;const Tt=E(De===te?De:De[Ce],Ce);Tt.length&&(xe||Tt.reverse(),o(C(Tt)))}};if(u===b)return o(C([u]));const B=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return N(u,B,!0);if(e.isChildOf(b,u))return N(b,B);const j=M(u,B)||u,Q=M(b,B)||b;N(u,j,!0);const q=E(j===u?j:j.nextSibling,"nextSibling",Q===b?Q.nextSibling:Q);q.length&&o(C(q)),N(b,Q)},yx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],sA=e=>Be(e)&&c1(e)===lc,rA=(e,n,o,r)=>ua(n).fold(()=>"skipping",a=>r==="br"||sA(n)?"valid":Xk(n)?"existing":Ii(n.dom)?"caret":vt(yx,u=>Ka(n,u))?"valid-block":!$m(e,o,r)||!$m(e,No(a),o)?"invalid-child":"valid"),cA=(e,n)=>{const o=Hf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},zf=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;Eu(e,zh()),Eo(e,`${Vh()}`,f),Eo(e,`${Zd()}`,r);const{attributes:C={},classes:E=[]}=a(f,b);if(Xr(e,C),Gb(e,E),u){E.length>0&&Eo(e,`${xf()}`,E.join(","));const M=ws(C);M.length>0&&Eo(e,`${jd()}`,M.join(","))}},N1=e=>{Oi(e,zh()),Or(e,`${Vh()}`),Or(e,`${Zd()}`),Or(e,`${Dg()}`);const n=Pr(e,`${jd()}`).map(r=>r.split(",")).getOr([]),o=Pr(e,`${xf()}`).map(r=>r.split(",")).getOr([]);ye(n,r=>Or(e,r)),cR(e,o),Or(e,`${xf()}`),Or(e,`${jd()}`)},B1=(e,n,o,r,a)=>{const u=me.fromTag("span",e);return zf(u,n,o,r,a,!1),u},G0=(e,n,o,r,a,u)=>{const f=[],b=B1(e.getDoc(),o,u,r,a),C=fa(),E=()=>{C.clear()},M=()=>C.get().getOrThunk(()=>{const Q=ud(b);return f.push(Q),C.set(Q),Q}),N=Q=>{ye(Q,B)},B=Q=>{switch(rA(e,Q,"span",No(Q))){case"invalid-child":{E();const te=_c(Q);N(te),E();break}case"valid-block":{E(),zf(Q,o,u,r,a,!0);break}case"valid":{const te=M();Cg(Q,te);break}}},j=Q=>{const q=je(Q,me.fromDom);N(q)};return M1(e.dom,n,Q=>{E(),j(Q)}),f},wi=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=fp(e).length>0,b=Uh("mce-annotation");if(u.collapsed&&!f&&cA(e,u),a.getRng().collapsed&&!f){const C=B1(e.getDoc(),b,r,n,o.decorate);Au(C,Ac),a.getRng().insertNode(C.dom),a.select(C.dom)}else FC(a,!1,()=>{hp(e,C=>{G0(e,C,b,n,o.decorate,r)})})})},Qd=e=>{const n=Ey();Zb(e,n);const o=Ty(e,n),r=Xs("span"),a=u=>{ye(u,f=>{r(f)?ii(f):N1(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{wi(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Mg(e,I.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();ht(Jw(e,u),(b,C)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Jw(e,u);return Mo(f,b=>je(b,C=>C.dom))}}},Vf=e=>({getBookmark:Ke(ix,e),moveToBookmark:Ke(Pm,e)});Vf.isBookmarkNode=Li;const Uf=(e,n,o)=>o.collapsed?!1:vt(o.getClientRects(),r=>s_(r,e,n)),aA=(e,n)=>e.dispatch("PreProcess",n),q0=(e,n)=>e.dispatch("PostProcess",n),K0=e=>{e.dispatch("remove")},lA=e=>{e.dispatch("detach")},iA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},uA=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},dA=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},Cx=e=>{e.dispatch("PreInit")},Y0=e=>{e.dispatch("PostRender")},mA=e=>{e.dispatch("Init")},X0=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Va=(e,n,o)=>{e.dispatch(n,o)},du=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Hi=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},J0=(e,n)=>e.dispatch("BeforeSetContent",n),Q0=(e,n)=>e.dispatch("SetContent",n),wx=(e,n)=>e.dispatch("BeforeGetContent",n),WC=(e,n)=>e.dispatch("GetContent",n),Sx=(e,n)=>{e.dispatch("AutocompleterStart",n)},ZC=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},xx=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Tx=e=>{e.dispatch("AutocompleterEnd")},fA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),gA=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ev=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),jC=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),pt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||pt.metaKeyPressed(e),metaKeyPressed:e=>St.os.isMacOS()||St.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Pl="data-mce-selected",Ex="table,img,figure.image,hr,video,span.mce-preview-object,details",GC=Math.abs,P1=Math.round,$1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},tv=e=>e.type==="longpress"||e.type.indexOf("touch")===0,F1=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,C,E,M,N,B,j,Q,q,te,ve,xe,Ce,De,ct,Tt;const Vt=zt=>Re(zt)&&(Dh(zt)||o.is(zt,"figure.image")),Ze=zt=>_a(zt)||o.hasClass(zt,"mce-preview-object"),Ie=(zt,Ao)=>{if(tv(zt)){const Uo=zt.touches[0];return Vt(zt.target)&&!Uf(Uo.clientX,Uo.clientY,Ao)}else return Vt(zt.target)&&!Uf(zt.clientX,zt.clientY,Ao)},ot=zt=>{const Ao=zt.target;Ie(zt,n.selection.getRng())&&!zt.isDefaultPrevented()&&n.selection.select(Ao)},Xt=zt=>o.hasClass(zt,"mce-preview-object")&&Re(zt.firstElementChild)?[zt,zt.firstElementChild]:o.is(zt,"figure.image")?[zt.querySelector("img")]:[zt],Cn=zt=>{const Ao=Bi(n);return!Ao||zt.getAttribute("data-mce-resize")==="false"||zt===n.getBody()?!1:o.hasClass(zt,"mce-preview-object")&&Re(zt.firstElementChild)?Ka(me.fromDom(zt.firstElementChild),Ao):Ka(me.fromDom(zt),Ao)},fo=(zt,Ao)=>{if(Ze(Ao))return zt.create("img",{src:St.transparentSrc});if(eu(Ao)){const Ca=yn(E.name,"n")?lo:Cs,Ms=Ao.cloneNode(!0);return Ca(zt.select("tr",Ms)).each(Zc=>{const ju=zt.select("td,th",Zc);zt.setStyle(Zc,"height",null),ye(ju,fm=>zt.setStyle(fm,"height",null))}),Ms}else return Ao.cloneNode(!0)},Lo=(zt,Ao,Uo)=>{if(Re(Uo)){const Ca=Xt(zt);ye(Ca,Ms=>{Ms.style[Ao]||!n.schema.isValid(Ms.nodeName.toLowerCase(),Ao)?o.setStyle(Ms,Ao,Uo):o.setAttrib(Ms,Ao,""+Uo)})}},ks=(zt,Ao,Uo)=>{Lo(zt,"width",Ao),Lo(zt,"height",Uo)},Ks=zt=>{let Ao,Uo,Ca,Ms,Zc;Ao=zt.screenX-N,Uo=zt.screenY-B,Ce=Ao*E[2]+q,De=Uo*E[3]+te,Ce=Ce<5?5:Ce,De=De<5?5:De,(Vt(f)||Ze(f))&&v1(n)!==!1?Ca=!pt.modifierPressed(zt):Ca=pt.modifierPressed(zt),Ca&&(GC(Ao)>GC(Uo)?(De=P1(Ce*ve),Ce=P1(De/ve)):(Ce=P1(De/ve),De=P1(Ce*ve))),ks(b,Ce,De),Ms=E.startPos.x+Ao,Zc=E.startPos.y+Uo,Ms=Ms>0?Ms:0,Zc=Zc>0?Zc:0,o.setStyles(C,{left:Ms,top:Zc,display:"block"}),C.innerHTML=Ce+" &times; "+De,E[2]<0&&b.clientWidth<=Ce&&o.setStyle(b,"left",j+(q-Ce)),E[3]<0&&b.clientHeight<=De&&o.setStyle(b,"top",Q+(te-De)),Ao=u.scrollWidth-ct,Uo=u.scrollHeight-Tt,Ao+Uo!==0&&o.setStyles(C,{left:Ms-Ao,top:Zc-Uo}),xe||(uA(n,f,q,te,"corner-"+E.name),xe=!0)},nc=()=>{const zt=xe;xe=!1,zt&&(Lo(f,"width",Ce),Lo(f,"height",De)),o.unbind(r,"mousemove",Ks),o.unbind(r,"mouseup",nc),a!==r&&(o.unbind(a,"mousemove",Ks),o.unbind(a,"mouseup",nc)),o.remove(b),o.remove(C),o.remove(M),ja(f),zt&&(dA(n,f,Ce,De,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},ja=zt=>{$t();const Ao=o.getPos(zt,u),Uo=Ao.x,Ca=Ao.y,Ms=zt.getBoundingClientRect(),Zc=Ms.width||Ms.right-Ms.left,ju=Ms.height||Ms.bottom-Ms.top;f!==zt&&(Ot(),f=zt,Ce=De=0);const fm=n.dispatch("ObjectSelected",{target:zt});Cn(zt)&&!fm.isDefaultPrevented()?ht($1,(Ll,Zi)=>{const yu=Gu=>{const wn=Xt(f)[0];N=Gu.screenX,B=Gu.screenY,q=wn.clientWidth,te=wn.clientHeight,ve=te/q,E=Ll,E.name=Zi,E.startPos={x:Zc*Ll[0]+Uo,y:ju*Ll[1]+Ca},ct=u.scrollWidth,Tt=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=fo(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Uo,top:Ca,margin:0}),ks(b,Zc,ju),b.removeAttribute(Pl),u.appendChild(b),o.bind(r,"mousemove",Ks),o.bind(r,"mouseup",nc),a!==r&&(o.bind(a,"mousemove",Ks),o.bind(a,"mouseup",nc)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},q+" &times; "+te)};let ji=o.get("mceResizeHandle"+Zi);ji&&o.remove(ji),ji=o.add(u,"div",{id:"mceResizeHandle"+Zi,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Zi+"-resize; margin:0; padding:0"}),o.bind(ji,"mousedown",Gu=>{Gu.stopImmediatePropagation(),Gu.preventDefault(),yu(Gu)}),Ll.elm=ji,o.setStyles(ji,{left:Zc*Ll[0]+Uo-ji.offsetWidth/2,top:ju*Ll[1]+Ca-ji.offsetHeight/2})}):Ot(!1)},zs=r1(ja,0),Ot=(zt=!0)=>{zs.cancel(),$t(),f&&zt&&f.removeAttribute(Pl),ht($1,(Ao,Uo)=>{const Ca=o.get("mceResizeHandle"+Uo);Ca&&(o.unbind(Ca),o.remove(Ca))})},hn=(zt,Ao)=>o.isChildOf(zt,Ao),ds=zt=>{if(xe||n.removed||n.composing)return;const Ao=zt.type==="mousedown"?zt.target:e.getNode(),Uo=Di(me.fromDom(Ao),Ex).map(Ms=>Ms.dom).filter(Ms=>o.isEditable(Ms.parentElement)||Ms.nodeName==="IMG"&&o.isEditable(Ms)).getOrUndefined(),Ca=Re(Uo)?o.getAttrib(Uo,Pl,"1"):"1";if(ye(o.select(`img[${Pl}],hr[${Pl}]`),Ms=>{Ms.removeAttribute(Pl)}),Re(Uo)&&hn(Uo,u)&&n.hasFocus()){An();const Ms=e.getStart(!0);if(hn(Ms,Uo)&&hn(e.getEnd(!0),Uo)){o.setAttrib(Uo,Pl,Ca),zs.throttle(Uo);return}}Ot()},$t=()=>{ht($1,zt=>{zt.elm&&(o.unbind(zt.elm),delete zt.elm)})},An=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{An(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ds),n.on("keyup compositionend",zt=>{f&&f.nodeName==="TABLE"&&ds(zt)}),n.on("hide blur",Ot),n.on("contextmenu longpress",ot,!0)}),n.on("remove",$t),{isResizable:Cn,showResizeRect:ja,hideResizeRect:Ot,updateResizeRect:ds,destroy:()=>{zs.cancel(),f=b=M=null}}},kx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},_x=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},qC=(e,n,o)=>{const r=e.document.createRange();return kx(r,n),_x(r,o),r},KC=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},Im=Os.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),YC=(e,n,o)=>n(me.fromDom(o.startContainer),o.startOffset,me.fromDom(o.endContainer),o.endOffset),Ax=(e,n)=>n.match({domRange:o=>({ltr:rt(o),rtl:I.none}),relative:(o,r)=>({ltr:ze(()=>qC(e,o,r)),rtl:ze(()=>I.some(qC(e,r,o)))}),exact:(o,r,a,u)=>({ltr:ze(()=>KC(e,o,r,a,u)),rtl:ze(()=>I.some(KC(e,a,u,o,r)))})}),hA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>Im.rtl(me.fromDom(a.endContainer),a.endOffset,me.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>YC(e,Im.ltr,o)):YC(e,Im.ltr,o)},pA=(e,n)=>{const o=Ax(e,n);return hA(e,o)};Im.ltr,Im.rtl;const ei={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},pl=(e,n,o)=>{var r,a;return I.from((a=(r=e.dom).caretPositionFromPoint)===null||a===void 0?void 0:a.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return I.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),I.some(f)})},yp=(e,n,o)=>{var r,a;return I.from((a=(r=e.dom).caretRangeFromPoint)===null||a===void 0?void 0:a.call(r,n,o))},gR=document.caretPositionFromPoint?pl:document.caretRangeFromPoint?yp:I.none,bA=(e,n,o)=>{const r=me.fromDom(e.document);return gR(r,n,o).map(a=>ei.create(me.fromDom(a.startContainer),a.startOffset,me.fromDom(a.endContainer),a.endOffset))},XC=Os.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xo=(e,n,o,r)=>e.fold(n,o,r),hR=e=>e.fold(Ho,Ho,Ho),Dx=XC.before,Rx=XC.on,pR=XC.after,Wf={before:Dx,on:Rx,after:pR,cata:Xo,getStart:hR},I1=Os.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vA=e=>I1.exact(e.start,e.soffset,e.finish,e.foffset),yA=e=>e.match({domRange:n=>me.fromDom(n.startContainer),relative:(n,o)=>Wf.getStart(n),exact:(n,o,r,a)=>n}),CA=I1.domRange,nv=I1.relative,L1=I1.exact,Mx=e=>{const n=yA(e);return ri(n)},bR=ei.create,Cp={domRange:CA,relative:nv,exact:L1,exactFromRange:vA,getWin:Mx,range:bR},JC=(e,n)=>{const o=No(e);return o==="input"?Wf.after(e):He(["br","img"],o)?n===0?Wf.before(e):Wf.after(e):Wf.on(e,n)},vR=(e,n)=>{const o=e.fold(Wf.before,JC,Wf.after),r=n.fold(Wf.before,JC,Wf.after);return Cp.relative(o,r)},Nx=(e,n,o,r)=>{const a=JC(e,n),u=JC(o,r);return Cp.relative(a,u)},wA=e=>e.match({domRange:n=>{const o=me.fromDom(n.startContainer),r=me.fromDom(n.endContainer);return Nx(o,n.startOffset,r,n.endOffset)},relative:vR,exact:Nx}),Pn=(e,n)=>{const r=document.createDocumentFragment();return ye(e,a=>{r.appendChild(a.dom)}),me.fromDom(r)},i=e=>{const n=Cp.getWin(e).dom,o=(a,u,f,b)=>KC(n,a,u,f,b),r=wA(e);return pA(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>bA(e,n,o),p=(e,n,o)=>{const r=ri(me.fromDom(o));return m(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},v=(e,n)=>Re(e)&&Re(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,T=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},D=(e,n,o)=>T(e,n,o)!==null,F=(e,n,o)=>D(e,n,r=>r.nodeName===o),Z=(e,n)=>yi(e)&&!D(e,n,Ii),J=(e,n,o)=>{const r=n.parentNode;if(r){const a=new da(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(ms(u))return!0}return!1},ge=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Ae=(e,n)=>{let o=n;for(;o&&o!==e;){if(is(o))return!0;o=o.parentNode}return!1},mt=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let C,E;if(!b)return I.none();const M=e.getParent(b,e.isBlock)||u;if(r&&ms(a)&&n&&e.isEmpty(M))return I.some(Fe(b,e.nodeIndex(a)));const N=new da(a,M);for(;E=N[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||Z(E,u))return I.none();if(ut(E)&&E.data.length>0)return F(E,u,"A")?I.none():I.some(Fe(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return I.none();C=E}return Hc(C)?I.none():o&&C?I.some(Fe(C,0)):I.none()},It=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const E=Ht(b)&&C===b.childNodes.length,M=e.schema.getNonEmptyElements();let N=o;if(yi(b))return I.none();if(Ht(b)&&C>b.childNodes.length-1&&(N=!1),mf(b)&&(b=a,C=0),b===a){if(N&&(u=b.childNodes[C>0?C-1:0],u&&(yi(u)||M[u.nodeName]||eu(u))))return I.none();if(b.hasChildNodes()){if(C=Math.min(!N&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=ut(b)&&E?b.data.length:0,!n&&b===a.lastChild&&eu(b)||Ae(a,b)||yi(b)||Kl(b))return I.none();if(b.hasChildNodes()&&!eu(b)){u=b;const B=new da(b,a);do{if(is(u)||yi(u)){f=!1;break}if(ut(u)&&u.data.length>0){C=N?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!vc(u)){C=e.nodeIndex(u),b=u.parentNode,N||C++,f=!0;break}}while(u=N?B.next():B.prev())}}}return n&&(ut(b)&&C===0&&mt(e,E,n,!0,b).each(B=>{b=B.container(),C=B.offset(),f=!0}),Ht(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&ms(u)&&!ge(u,"A")&&!J(e,u,!1)&&!J(e,u,!0)&&mt(e,E,n,!0,u).each(B=>{b=B.container(),C=B.offset(),f=!0}))),N&&!n&&ut(b)&&C===b.data.length&&mt(e,E,n,!1,b).each(B=>{b=B.container(),C=B.offset(),f=!0}),f&&b?I.some(Fe(b,C)):I.none()},Rt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Fe.fromRangeStart(n);return It(e,o,!0,r).each(u=>{(!o||!Fe.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||It(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?I.none():I.some(r)},Et=(e,n)=>e.splitText(n),en=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&ut(n)){if(o>0&&o<n.data.length)if(r=Et(n,o),n=r.previousSibling,a>o){a=a-o;const u=Et(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(ut(n)&&o>0&&o<n.data.length&&(n=Et(n,o),o=0),ut(r)&&a>0&&a<r.data.length){const u=Et(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},at=e=>({walk:(u,f)=>M1(e,u,f),split:en,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Hf(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>Rt(e,u).fold(Me,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});at.compareRanges=v,at.getCaretRangeFromPoint=p,at.getSelectedNode=Yh,at.getNode=Ut;const Rn=((e,n)=>{const o=(b,C)=>{if(!Go(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const E=b.dom;ed(E)&&(E.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const E=$r(b,e);return parseFloat(E)||0}return C},a=r,u=(b,C)=>jn(C,(E,M)=>{const N=$r(b,M),B=N===void 0?0:parseInt(N,10);return isNaN(B)?E:E+B},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,C,E)=>{const M=u(b,E);return C>M?C-M:0}}})("height",e=>{const n=e.dom;return Ji(e)?n.getBoundingClientRect().height:n.offsetHeight}),Nt=e=>Rn.get(e),ys=()=>me.fromDom(document),qs=(e,n)=>e.view(n).fold(rt([]),r=>{const a=e.owner(r),u=qs(e,a);return[r].concat(u)}),Is=(e,n)=>{const o=n.owner(e);return qs(n,o)};var em=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?I.none():I.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(me.fromDom)},owner:e=>kc(e)});const Zf=e=>{const n=ys(),o=nt(n),r=Is(e,em),a=pe(e),u=hs(r,(f,b)=>{const C=pe(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return x(u.left+a.left+o.left,u.top+a.top+o.top)},jf=e=>No(e)==="textarea",Ds=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),$l=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Fl=(e,n)=>{const o=_c(e);if(o.length===0||jf(e))return{element:e,offset:n};if(n<o.length&&!jf(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return jf(r)?{element:e,offset:n}:No(r)==="img"?{element:r,offset:1}:Be(r)?{element:r,offset:c1(r).length}:{element:r,offset:_c(r).length}}},mu=(e,n)=>{const o=ae(e),r=Nt(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},fu=(e,n)=>{const o=Fl(e,n),r=me.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+lc+"</span>");return ka(o.element,r),mu(r,()=>js(r))},Io=e=>mu(me.fromDom(e),Pt),tc=(e,n,o,r)=>{no(e,(a,u)=>H1(e,n,o,r),o)},tm=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(Ds(e,u))return;const f=nt(n).top;o(e,n,f,r,a),$l(e,u)},H1=(e,n,o,r)=>{const a=me.fromDom(e.getBody()),u=me.fromDom(e.getDoc());ac(a);const f=fu(me.fromDom(o.startContainer),o.startOffset);tm(e,u,n,f,r),f.cleanup()},Si=(e,n,o,r)=>{const a=me.fromDom(e.getDoc());tm(e,a,o,Io(n),r)},no=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(me.fromDom(r),me.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},QC=(e,n,o,r,a)=>{const u=n.pos;if(r)_n(u.left,u.top,a);else{const f=u.top-o+n.height;_n(-e.getBody().getBoundingClientRect().left,f,a)}},e2=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,C=a.bottom,E=C-b>=r;b<o?QC(e,a,r,u!==!1,n):b>f?QC(e,a,r,E?u!==!1:u===!0,n):C>f&&!E&&QC(e,a,r,u===!0,n)},ov=(e,n,o,r,a)=>{const u=ri(n).dom.innerHeight;e2(e,n,o,u,r,a)},Bx=(e,n,o,r,a)=>{const u=ri(n).dom.innerHeight;e2(e,n,o,u,r,a);const f=Zf(r.element),b=br(window);f.top<b.y?Jn(r.element,a!==!1):f.top>b.bottom&&Jn(r.element,a===!0)},oh=(e,n,o)=>tc(e,ov,n,o),Lm=(e,n,o)=>Si(e,n,ov,o),Px=(e,n,o)=>tc(e,Bx,n,o),z1=(e,n,o)=>Si(e,n,Bx,o),i6=(e,n,o)=>{(e.inline?Lm:z1)(e,n,o)},t2=(e,n,o)=>{(e.inline?oh:Px)(e,n,o)},sv=(e,n=!1)=>e.dom.focus({preventScroll:n}),V1=e=>{const n=xl(e).dom;return e.dom===n.activeElement},SA=(e=ys())=>I.from(e.dom.activeElement).map(me.fromDom),yR=e=>SA(xl(e)).filter(n=>e.dom.contains(n.dom)),CR=(e,n)=>{const o=Be(n)?c1(n).length:_c(n).length+1;return e>o?o:e<0?0:e},u6=e=>Cp.range(e.start,CR(e.soffset,e.start),e.finish,CR(e.foffset,e.finish)),wR=(e,n)=>!Fd(n.dom)&&(Ta(e,n)||ls(e,n)),xA=e=>n=>wR(e,n.start)&&wR(e,n.finish),Rj=e=>e.inline||St.browser.isFirefox(),d6=e=>Cp.range(me.fromDom(e.startContainer),e.startOffset,me.fromDom(e.endContainer),e.endOffset),SR=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?I.none():I.from(n.getRangeAt(0))).map(d6)},TA=e=>{const n=ri(e);return SR(n.dom).filter(xA(e))},EA=(e,n)=>I.from(n).filter(xA(e)).map(u6),kA=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),I.some(n)}catch{return I.none()}},n2=e=>{const n=Rj(e)?TA(me.fromDom(e.getBody())):I.none();e.bookmark=n.isSome()?n:e.bookmark},$x=e=>(e.bookmark?e.bookmark:I.none()).bind(o=>EA(me.fromDom(e.getBody()),o)).bind(kA),xR=e=>{$x(e).each(n=>e.selection.setRng(n))},TR={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},ER=(e,n)=>(Go(n)||(n=0),setTimeout(e,n)),m6=(e,n)=>(Go(n)||(n=0),setInterval(e,n)),Hu={setEditorTimeout:(e,n,o)=>ER(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=m6(()=>{e.removed?clearInterval(r):n()},o);return r}},kR=e=>e.type==="nodechange"&&e.selectionChange,_R=(e,n)=>{const o=()=>{n.throttle()};kr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{kr.DOM.unbind(document,"mouseup",o)})},AR=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},OR=(e,n)=>{AR(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{kR(o)||n2(e)})},f6=e=>{const n=r1(()=>{n2(e)},0);e.on("init",()=>{e.inline&&_R(e,n),OR(e,n)}),e.on("remove",()=>{n.cancel()})};let rv;const AA=kr.DOM,g6=e=>Ht(e)&&TR.isEditorUIElement(e),OA=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Fx=(e,n)=>{const o=C1(e);return AA.getParent(n,a=>g6(a)||(o?e.dom.is(a,o):!1))!==null},DA=e=>{try{const n=xl(me.fromDom(e.getElement()));return SA(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},h6=(e,n)=>{const o=n.editor;f6(o);const r=(a,u)=>{if(w0(a)&&a.inline!==!0){const f=me.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;OA(DA(o))&&r(o,Eu),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Hu.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!OA(DA(o))||a!==o)&&r(o,Oi),!Fx(o,DA(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),rv||(rv=a=>{const u=e.activeEditor;u&&sf(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!Fx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},AA.bind(document,"focusin",rv))},Ix=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&rv&&(AA.unbind(document,"focusin",rv),rv=null)},DR=e=>{e.on("AddEditor",Ke(h6,e)),e.on("RemoveEditor",Ke(Ix,e))},p6=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),RR=e=>e.collapsed?I.from(Ut(e.startContainer,e.startOffset)).map(me.fromDom):I.none(),MR=(e,n)=>RR(n).bind(o=>Gh(o)?I.some(o):Ta(e,o)?I.none():I.some(e)),NR=(e,n)=>{MR(me.fromDom(e.getBody()),n).bind(o=>hl(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},RA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},b6=e=>V1(e)||yR(e).isSome(),v6=e=>Re(e.iframeElement)&&V1(me.fromDom(e.iframeElement)),y6=e=>{const n=e.getBody();return n&&b6(me.fromDom(n))},BR=e=>{const n=xl(me.fromDom(e.getElement()));return SA(n).filter(o=>!OA(o.dom)&&Fx(e,o.dom)).isSome()},U1=e=>e.inline?y6(e):v6(e),o2=e=>U1(e)||BR(e),C6=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{$x(f).each(b=>{f.selection.setRng(b),r=b})};!U1(e)&&e.hasEditableRoot()&&a(e);const u=p6(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){RA(u),e.hasEditableRoot()||a(e),NR(e,r),MA(e);return}e.inline||(St.browser.isOpera()||RA(o),e.getWin().focus()),(St.browser.isFirefox()||e.inline)&&(RA(o),NR(e,r)),MA(e)},MA=e=>e.editorManager.setActive(e),NA=(e,n)=>{e.removed||(n?MA(e):C6(e))},PR=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),BA=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return I.from(u).map(me.fromDom).map(b=>!r||!n.collapsed?ku(b,a(b,f)).getOr(b):b).bind(b=>ke(b)?I.some(b):ua(b).filter(ke)).map(b=>b.dom).getOr(e)},PA=(e,n,o=!1)=>BA(e,n,!0,o,(r,a)=>Math.min(Qc(r),a)),$A=(e,n,o=!1)=>BA(e,n,!1,o,(r,a)=>a>0?a-1:a),$R=(e,n)=>{const o=e;for(;e&&ut(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},w6=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),ut(o)&&ut(r)&&(o.length===a?o=$R(o.nextSibling,!0):o=o.parentNode,u===0?r=$R(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=ut(f)?f.parentNode:f;return ql(b)?b:e},S6=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||PA(u,n,n.collapsed),e.isBlock),b=e.getParent(r||$A(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let C;const E=new da(f,u);for(;(C=E.next())&&C!==b;)e.isBlock(C)&&a.push(C)}return b&&f!==b&&b!==u&&a.push(b),a},x6=(e,n,o)=>I.from(n).bind(r=>I.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(PC(e,f,r,!0),PC(e,f,r,!1)),f})),cv=(e,n)=>je(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),FR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},s2=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},IR=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!ui(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},FA=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class xi{static create(n,o){const r=new xi(n,FR[n]||1);return o&&ht(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Re(n)&&ht(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new xi(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=s2(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=s2(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(FA(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||FA(f))return!1}if(f.type===8||f.type===3&&!IR(f)||f.type===3&&f.parent&&o[f.parent.name]&&ui((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=s2(f,u));return!0}walk(n){return s2(this,null,n)}}const T6=dt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),LR=e=>ee(e.nodeValue)&&e.nodeValue.includes(lc),HR=e=>`${e.length===0?"":`${je(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,E6=(e,n)=>n.querySelectorAll(HR(e)),zR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>LR(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),VR=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(LR(n)){const o=n.parentNode;return o&&un(T6,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),k6=e=>zR(e).nextNode()!==null,_6=e=>VR(e).nextNode()!==null,A6=(e,n)=>n.querySelector(HR(e))!==null,O6=(e,n)=>{ye(E6(e,n),o=>{const r=me.fromDom(o);rr(r,"data-mce-bogus")==="all"?js(r):ye(e,a=>{Dr(r,a)&&Or(r,a)})})},UR=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},Lx=A(UR,zR),WR=A(UR,VR),IA=(e,n)=>{const o=[{condition:Ke(A6,n),action:Ke(O6,n)},{condition:k6,action:Lx},{condition:_6,action:WR}];let r=e,a=!1;return ye(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},ZR=e=>{const n=Vr(e,"[data-mce-bogus]");ye(n,o=>{rr(o,"data-mce-bogus")==="all"?js(o):jh(o)?(ka(o,me.fromText(Oh)),js(o)):ii(o)})},jR=e=>{const n=Vr(e,"input");ye(n,o=>{Or(o,"name")})},D6=(e,n)=>{const o=sl(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},R6=(e,n)=>{const o=e.getDoc(),r=xl(me.fromDom(e.getBody())),a=me.fromTag("div",o);Eo(a,"data-mce-bogus","all"),to(a,{position:"fixed",left:"-9999999px",top:"0"}),Au(a,n.innerHTML),ZR(a),jR(a);const u=xh(r);xr(u,a);const f=vi(a.dom.innerText);return js(a),f},M6=(e,n,o)=>{let r;return n.format==="raw"?r=dt.trim(vi(IA(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=R6(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=D6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!l1(me.fromDom(o))&&ee(r)?dt.trim(r):r},N6=(e,n)=>I.from(e.getBody()).fold(rt(n.format==="tree"?new xi("body",11):""),o=>M6(e,n,o)),LA=dt.makeMap,GR=e=>{const n=[];e=e||{};const o=e.indent,r=LA(e.indent_before||""),a=LA(e.indent_after||""),u=cd.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,E)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let M=0,N=C.length;M<N;M++){const B=C[M];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&a[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&a[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},sh=(e={},n=Ud())=>{const o=GR(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:C=>{var E;o.text((E=C.value)!==null&&E!==void 0?E:"",C.raw)},8:C=>{var E;o.comment((E=C.value)!==null&&E!==void 0?E:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var E;o.doctype((E=C.value)!==null&&E!==void 0?E:"")},4:C=>{var E;o.cdata((E=C.value)!==null&&E!==void 0?E:"")},11:C=>{let E=C;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=C=>{var E;const M=f[C.type];if(M)M(C);else{const N=C.name,B=N in n.getVoidElements();let j=C.attributes;if(u&&j&&j.length>1){const Q=[];Q.map={};const q=n.getElementRule(C.name);if(q){for(let te=0,ve=q.attributesOrder.length;te<ve;te++){const xe=q.attributesOrder[te];if(xe in j.map){const Ce=j.map[xe];Q.map[xe]=Ce,Q.push({name:xe,value:Ce})}}for(let te=0,ve=j.length;te<ve;te++){const xe=j[te].name;if(!(xe in Q.map)){const Ce=j.map[xe];Q.map[xe]=Ce,Q.push({name:xe,value:Ce})}}j=Q}}if(o.start(N,j,B),Jr(N))ee(C.value)&&o.text(C.value,!0),o.end(N);else if(!B){let Q=C.firstChild;if(Q){(N==="pre"||N==="textarea")&&Q.type===3&&((E=Q.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(Q);while(Q=Q.next)}o.end(N)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},HA=new Set;ye(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{HA.add(n)});const qR=new Set;ye(["background-color"],n=>{qR.add(n)});const KR=["font","text-decoration","text-emphasis"],B6=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),av=(e,n)=>ws(B6(e,n)),P6=e=>HA.has(e),$6=e=>qR.has(e),YR=(e,n)=>vt(av(e,n),o=>P6(o)),F6=(e,n)=>YR(e,n)&&vt(av(e,n),o=>$6(o)),I6=e=>Lt(e,n=>vt(KR,o=>yn(n,o))),L6=(e,n,o)=>{const r=av(e,n),a=av(e,o),u=f=>{var b,C;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return Bn(E)&&Bn(M)&&E!==M};return vt(r,f=>{const b=C=>vt(C,E=>E===f);if(!b(a)&&b(KR)){const C=I6(a);return vt(C,u)}else return u(f)})},XR=(e,n,o)=>I.from(o.container()).filter(ut).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),zA=Ke(XR,!0,Jg),VA=Ke(XR,!1,Jg),H6=e=>{const n=e.container();return ut(n)&&(n.data.length===0||Bg(n.data)&&Vf.isBookmarkNode(n.parentNode))},wp=(e,n)=>o=>D0(e?0:-1,o).filter(n).isSome(),JR=e=>Dh(e)&&$r(me.fromDom(e),"display")==="block",QR=e=>is(e)&&!Sg(e),z6=wp(!0,JR),V6=wp(!1,JR),gn=wp(!0,_a),lv=wp(!1,_a),UA=wp(!0,eu),WA=wp(!1,eu),Gf=wp(!0,QR),Sp=wp(!1,QR),U6=e=>e.slice(0,-1),W6=(e,n,o)=>Ta(n,e)?U6(hg(e,r=>o(r)||ls(r,n))):[],eM=(e,n)=>W6(e,n,Me),rh=(e,n)=>[e].concat(eM(e,n)),iv=(e,n,o)=>rx(e,n,o,H6),tM=e=>n=>e.isBlock(No(n)),Z6=(e,n,o)=>Vo(rh(me.fromDom(n.container()),e),tM(o)),nM=(e,n,o,r)=>iv(e,n.dom,o).forall(a=>Z6(n,o,r).fold(()=>!Pi(a,o,n.dom),u=>!Pi(a,o,n.dom)&&Ta(u,me.fromDom(a.container())))),Un=(e,n,o,r)=>Z6(n,o,r).fold(()=>iv(e,n.dom,o).forall(a=>!Pi(a,o,n.dom)),a=>iv(e,a.dom,o).isNone()),ZA=Ke(Un,!1),io=Ke(Un,!0),oM=Ke(nM,!1),Mj=Ke(nM,!0),Nj=e=>M0(e).exists(jh),Hx=(e,n,o,r)=>{const a=Lt(rh(me.fromDom(o.container()),n),f=>r.isBlock(No(f))),u=lo(a).getOr(n);return $i(e,u.dom,o).filter(Nj)},sM=(e,n,o)=>M0(n).exists(jh)||Hx(!0,e,n,o).isSome(),jA=(e,n,o)=>QS(n).exists(jh)||Hx(!1,e,n,o).isSome(),rM=Ke(Hx,!1),j6=Ke(Hx,!0),Ln=e=>Fe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),cM=(e,n,o)=>{const r=Lt(rh(me.fromDom(n.container()),e),a=>o.isBlock(No(a)));return lo(r).getOr(e)},aM=(e,n,o)=>Ln(n)?VA(n):VA(n)||Ci(cM(e,n,o).dom,n).exists(VA),lM=(e,n,o)=>Ln(n)?zA(n):zA(n)||gl(cM(e,n,o).dom,n).exists(zA),r2=e=>He(["pre","pre-wrap"],e),zx=e=>M0(e).bind(n=>Rr(n,ke)).exists(n=>r2($r(n,"white-space"))),G6=(e,n)=>Ci(e.dom,n).isNone(),q6=(e,n)=>gl(e.dom,n).isNone(),K6=(e,n,o)=>G6(e,n)||q6(e,n)||ZA(e,n,o)||io(e,n,o)||jA(e,n,o)||sM(e,n,o),iM=e=>Re(e)&&is(e)&&yC(e),uM=(e,n)=>o=>iM(new da(o,e)[n]()),Bj=(e,n)=>{const o=gl(e.dom,n).getOr(n),r=uM(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},Pj=(e,n)=>{const o=Ci(e.dom,n).getOr(n),r=uM(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},dM=(e,n,o)=>zx(n)?!1:K6(e,n,o)||aM(e,n,o)||lM(e,n,o),c2=(e,n,o)=>zx(n)?!1:ZA(e,n,o)||oM(e,n,o)||jA(e,n,o)||aM(e,n,o)||Pj(e,n),Y6=e=>{const n=e.container(),o=e.offset();return ut(n)&&o<n.data.length?Fe(n,o+1):e},a2=(e,n,o)=>zx(n)?!1:io(e,n,o)||Mj(e,n,o)||sM(e,n,o)||lM(e,n,o)||Bj(e,n),Vx=(e,n,o)=>c2(e,n,o)||a2(e,Y6(n),o),mM=(e,n)=>Xd(e.charAt(n)),So=(e,n)=>Jg(e.charAt(n)),fM=e=>{const n=e.container();return ut(n)&&an(n.data,Ac)},Ux=e=>{const n=e.split("");return je(n,(o,r)=>Xd(o)&&r>0&&r<n.length-1&&NC(n[r-1])&&NC(n[r+1])?" ":o).join("")},GA=(e,n,o,r)=>{const a=n.data,u=Fe(n,0);return!o&&mM(a,0)&&!Vx(e,u,r)?(n.data=" "+a.slice(1),!0):o&&So(a,0)&&c2(e,u,r)?(n.data=Ac+a.slice(1),!0):!1},gM=e=>{const n=e.data,o=Ux(n);return o!==n?(e.data=o,!0):!1},qA=(e,n,o,r)=>{const a=n.data,u=Fe(n,a.length-1);return!o&&mM(a,a.length-1)&&!Vx(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&So(a,a.length-1)&&a2(e,u,r)?(n.data=a.slice(0,-1)+Ac,!0):!1},hM=(e,n,o)=>{const r=n.container();if(!ut(r))return I.none();if(fM(n)){const a=GA(e,r,!1,o)||gM(r)||qA(e,r,!1,o);return $o(a,n)}else if(Vx(e,n,o)){const a=GA(e,r,!0,o)||qA(e,r,!0,o);return $o(a,n)}else return I.none()},pM=e=>{const n=me.fromDom(e.getBody());e.selection.isCollapsed()&&hM(n,Fe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},bM=(e,n,o,r)=>{if(o===0)return;const a=me.fromDom(e),u=cr(a,E=>r.isBlock(No(E))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&a2(u,Fe(e,e.data.length),r),C=n===0&&c2(u,Fe(e,0),r);e.replaceData(n,o,Ri(f,4,C,b))},l2=(e,n,o)=>{const r=e.data.slice(n),a=r.length-ra(r).length;bM(e,n,a,o)},KA=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-ca(r).length;bM(e,n-a,a,o)},YA=(e,n,o,r,a=!0)=>{const u=ca(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),js(me.fromDom(b)),r&&l2(f,u,o),f},X6=(e,n)=>{const o=e.container(),r=e.offset();return!Fe.isTextPosition(e)&&o===n.parentNode&&r>Fe.before(n).offset()},J6=(e,n)=>X6(n,e)?Fe(n.container(),n.offset()-1):n,Q6=e=>ut(e)?Fe(e,0):Fe.before(e),eL=e=>ut(e)?Fe(e,e.data.length):Fe.after(e),vM=e=>fd(e.previousSibling)?I.some(eL(e.previousSibling)):e.previousSibling?Fi(e.previousSibling):I.none(),yM=e=>fd(e.nextSibling)?I.some(Q6(e.nextSibling)):e.nextSibling?hl(e.nextSibling):I.none(),XA=(e,n)=>I.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ci(e,Fe.before(o))).orThunk(()=>gl(e,Fe.after(n))),JA=(e,n)=>gl(e,Fe.after(n)).orThunk(()=>Ci(e,Fe.before(n))),tL=(e,n)=>vM(n).orThunk(()=>yM(n)).orThunk(()=>XA(e,n)),nL=(e,n)=>yM(n).orThunk(()=>vM(n)).orThunk(()=>JA(e,n)),oL=(e,n,o)=>e?nL(n,o):tL(n,o),sL=(e,n,o)=>oL(e,n,o).map(Ke(J6,o)),CM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},rL=e=>n=>n.dom===e,cL=(e,n)=>n&&un(e.schema.getBlockElements(),No(n)),aL=(e,n,o)=>{if(Js(e,n)){const r=me.fromHtml('<br data-mce-bogus="1">');return o?ye(_c(n),a=>{D1(a)||js(a)}):li(n),xr(n,r),I.some(Fe.before(r.dom))}else return I.none()},wM=(e,n,o,r)=>{const a=Sl(e).filter(Be),u=ai(e).filter(Be);return js(e),il(a,u,n,(f,b,C)=>{const E=f.dom,M=b.dom,N=E.data.length;return YA(E,M,o,r),C.container()===M?Fe(E,N):C}).orThunk(()=>(r&&(a.each(f=>KA(f.dom,f.dom.length,o)),u.each(f=>l2(f.dom,0,o))),n))},lL=(e,n)=>un(e.schema.getTextInlineElements(),No(n)),W1=(e,n,o,r=!0,a=!1)=>{const u=sL(n,e.getBody(),o.dom),f=cr(o,Ke(cL,e),rL(e.getBody())),b=wM(o,u,e.schema,lL(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>aL(e.schema,C,a)).fold(()=>{r&&CM(e,n,b)},C=>{r&&CM(e,n,I.some(C))})},Z1=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,iL=e=>Z1.test(e),xp=(e,n)=>Ka(me.fromDom(n),__(e))&&!ou(e.schema,n)&&e.dom.isEditable(n),SM=e=>{var n;return kr.DOM.getStyle(e,"direction",!0)==="rtl"||iL((n=e.textContent)!==null&&n!==void 0?n:"")},uL=(e,n,o)=>Lt(kr.DOM.getParents(o.container(),"*",n),e),ch=(e,n,o)=>{const r=uL(e,n,o);return I.from(r[r.length-1])},xM=(e,n,o)=>{const r=pd(n,e),a=pd(o,e);return Re(r)&&r===a},TM=e=>Ry(e)||$g(e),zu=(e,n)=>{const o=n.container(),r=n.offset();return e?md(o)?ut(o.nextSibling)?Fe(o.nextSibling,0):Fe.after(o):Ry(n)?Fe(o,r+1):n:md(o)?ut(o.previousSibling)?Fe(o.previousSibling,o.previousSibling.data.length):Fe.before(o):$g(n)?Fe(o,r-1):n},ti=Ke(zu,!0),EM=Ke(zu,!1),kM=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},dL=e=>{e.execCommand("delete")},Wx=e=>kM(e,"Delete"),_M=e=>kM(e,"ForwardDelete"),j1=e=>n=>$s(ua(n),e,ls),mL=e=>oS(e)||Jl(e),Zx=(e,n)=>Ta(e,n)?Rr(n,mL,j1(e)):I.none(),Nr=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},i2=(e,n,o)=>zr(hl(o),Fi(o),(r,a)=>{const u=zu(!0,r),f=zu(!1,a),b=zu(!1,n);return e?gl(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):Ci(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),G1=e=>(K(e)?Sl(e):Gl(e)).bind(G1).orThunk(()=>I.some(e)),AM=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=G1(o).getOr(o),f=me.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?Nr(e,r):Js(e.schema,f,{checkRootAsContent:!1})&&(bi(f),r&&e.selection.setCursorLocation(f.dom,0)),!ls(o,f)){const b=$s(ua(f),o)?[]:Sh(f);ye(b.concat(_c(o)),C=>{!ls(C,f)&&!Ta(C,f)&&Js(e.schema,C)&&js(C)})}},uv=e=>n=>ls(e,n),gu=e=>Vr(e,"td,th"),dv=(e,n)=>_1(me.fromDom(e),n),mr=e=>zr(e.startTable,e.endTable,(n,o)=>{const r=Zp(n,u=>ls(u,o)),a=Zp(o,u=>ls(u,n));return!r&&!a?e:{...e,startTable:r?I.none():e.startTable,endTable:a?I.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),u2=e=>mr(e),OM=(e,n)=>{const o=dv(e.startContainer,n),r=dv(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=zr(o,r,ls).getOr(!1);return u2({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},jx=(e,n)=>({start:e,end:n}),QA=(e,n,o)=>({rng:e,table:n,cells:o}),q1=Os.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),mv=(e,n)=>Di(me.fromDom(e),"td,th",n),Gx=e=>!ls(e.start,e.end),d2=(e,n)=>_1(e.start,n).bind(o=>_1(e.end,n).bind(r=>$o(ls(o,r),o))),e4=(e,n)=>!Gx(e)&&d2(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),DM=(e,n)=>{const o=mv(e.startContainer,n),r=mv(e.endContainer,n);return zr(o,r,jx)},RM=e=>n=>_1(n,e).bind(o=>Cs(gu(o)).map(r=>jx(n,r))),MM=e=>n=>_1(n,e).bind(o=>lo(gu(o)).map(r=>jx(r,n))),qx=e=>n=>d2(n,e).map(o=>QA(n,o,gu(o))),t4=(e,n,o,r)=>{if(o.collapsed||!e.forall(Gx))return I.none();if(n.isSameTable){const a=e.bind(qx(r));return I.some({start:a,end:a})}else{const a=mv(o.startContainer,r),u=mv(o.endContainer,r),f=a.bind(RM(r)).bind(qx(r)),b=u.bind(MM(r)).bind(qx(r));return I.some({start:f,end:b})}},K1=(e,n)=>xs(e,o=>ls(o,n)),Kx=e=>zr(K1(e.cells,e.rng.start),K1(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),n4=(e,n,o)=>e.exists(r=>e4(r,o)&&H0(r.start,n)),NM=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},fL=(e,n,o,r)=>t4(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=Kx(a).getOr([]);if(u&&a.cells.length===f.length)return I.some(q1.fullTable(a.table));if(f.length>0){if(u)return I.some(q1.partialTable(f,I.none()));{const b=NM(o,n);return I.some(q1.partialTable(f,I.some({...n,rng:b})))}}else return I.none()}),BM=(e,n,o,r)=>t4(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(Kx).getOr([]),b=u.bind(Kx).getOr([]);if(f.length>0&&b.length>0){const C=NM(o,n);return I.some(q1.multiTable(f,b,C))}else return I.none()}),PM=(e,n)=>{const o=uv(e),r=DM(n,o),a=OM(n,o);return n4(r,n,o)?r.map(u=>q1.singleCellTable(n,u.start)):a.isMultiTable?BM(r,a,n,o):fL(r,a,n,o)},o4=e=>ye(e,n=>{Or(n,"contenteditable"),bi(n)}),Yx=(e,n)=>I.from(e.dom.getParent(n,e.dom.isBlock)).map(me.fromDom),$M=(e,n,o)=>{o.each(r=>{n?js(r):(bi(r),e.selection.setCursorLocation(r.dom,0))})},Xx=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),Jx(e,a,n,!1).each(u=>u())},s4=e=>{const n=fp(e),o=me.fromDom(e.selection.getNode());Rh(o.dom)&&Js(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&vt(n,r=>ls(r,o))&&Eo(o,"data-mce-selected","1")},r4=(e,n,o)=>I.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=Yx(e,f?u.endContainer:u.startContainer);u.deleteContents(),$M(e,f,b.filter(Ke(Js,e.schema)));const C=f?n[0]:n[n.length-1];return Xx(e,C,r,f),Js(e.schema,C)?I.none():I.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);o4(a),s4(e)}),FM=(e,n,o,r)=>I.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];Xx(e,u,a,!0),Xx(e,f,a,!1);const b=Js(e.schema,u)?n:n.slice(1),C=Js(e.schema,f)?o:o.slice(0,-1);o4(b.concat(C)),r.deleteContents(),s4(e)}),Jx=(e,n,o,r=!0)=>I.some(()=>{AM(e,n,o,r)}),IM=(e,n)=>I.some(()=>W1(e,!1,n)),LM=(e,n,o)=>PM(n,o).bind(r=>r.fold(Ke(Jx,e),Ke(IM,e),Ke(r4,e),Ke(FM,e))),HM=(e,n)=>m2(e,n),zM=(e,n,o,r)=>Qx(n,r).fold(()=>LM(e,n,o),a=>HM(e,a)),c4=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?r4(e,o,I.none()):zM(e,r,a,n)},a4=(e,n)=>Vo(rh(n,e),qh),Qx=(e,n)=>Vo(rh(n,e),Xs("caption")),VM=(e,n,o,r,a)=>Bm(o,e.getBody(),a).bind(u=>a4(n,me.fromDom(u.getNode())).bind(f=>ls(f,r)?I.none():I.some(Pt))),m2=(e,n)=>I.some(()=>{bi(n),e.selection.setCursorLocation(n.dom,0)}),UM=(e,n,o,r)=>hl(e.dom).bind(a=>Fi(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),WM=(e,n)=>m2(e,n),l4=(e,n,o)=>Qx(e,me.fromDom(o.getNode())).fold(()=>I.some(Pt),r=>$o(!ls(r,n),Pt)),eT=(e,n,o,r,a)=>Bm(o,e.getBody(),a).fold(()=>I.some(Pt),u=>UM(r,o,a,u)?WM(e,r):l4(n,r,u)),i4=(e,n,o,r)=>{const a=Fe.fromRangeStart(e.selection.getRng());return a4(o,r).bind(u=>Js(e.schema,u,{checkRootAsContent:!1})?m2(e,u):VM(e,o,n,u,a))},tT=(e,n,o,r)=>{const a=Fe.fromRangeStart(e.selection.getRng());return Js(e.schema,r)?m2(e,r):eT(e,o,n,r,a)},u4=(e,n)=>e?UA(n):WA(n),nT=(e,n)=>{const o=Fe.fromRangeStart(e.selection.getRng());return u4(n,o)||$i(n,e.getBody(),o).exists(r=>u4(n,r))},d4=(e,n,o)=>{const r=me.fromDom(e.getBody());return Qx(r,o).fold(()=>i4(e,n,r,o).orThunk(()=>$o(nT(e,n),Pt)),a=>tT(e,n,r,a))},Y1=(e,n)=>{const o=me.fromDom(e.selection.getStart(!0)),r=fp(e);return e.selection.isCollapsed()&&r.length===0?d4(e,n,o):c4(e,o,r)},ah=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ye(o)||is(o))return o;o=o.parentNode}return null},ZM=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fv=dt.each,f2=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const M={};return fv(n.getAttribs(E),N=>{const B=N.nodeName.toLowerCase();B!=="style"&&!a(B)&&(M[B]=n.getAttrib(E,B))}),M},C=(E,M)=>{for(const N in E)if(un(E,N)){const B=M[N];if(cn(B)||E[N]!==B)return!1;delete M[N]}for(const N in M)if(un(M,N))return!1;return!0};return Ht(u)&&Ht(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Li(u)&&!Li(f)},a=u=>vt(ZM,f=>yn(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},oT=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),gv=e=>e.name==="summary",Tp=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},m4=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const C=r.nodes[a];C?C.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const E=r.attributes[C];E?E.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},gL=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Tp(o,a=>{m4(e,n,a,r)}),r},jM=(e,n)=>{const o=(r,a)=>{ht(r,u=>{const f=gr(u.nodes);ye(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const E=f[C];(!(a?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||xn(E.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},f4=(e,n,o,r={})=>{const a=gL(e,n,o);jM(a,r)},sT=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new xi("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new xi("#text",3)).value=Ac},hL=e=>{var n;return lh(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Ac},lh=(e,n)=>{const o=e==null?void 0:e.firstChild;return Re(o)&&o===e.lastChild&&o.name===n},X1=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},rT=(e,n,o,r)=>r.isEmpty(n,o,a=>X1(e,a)),cl=(e,n)=>Re(e)&&(n(e)||e.name==="br"),pL=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return I.from(n)},g4=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&g4(a,n,o);e.unwrap()}},Hm=(e,n,o,r=Pt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=dt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,E=M=>M!==o&&!b[M.name];for(let M=0;M<e.length;M++){const N=e[M];let B,j,Q;if(!N.parent||C.has(N))continue;if(a[N.name]&&N.parent.name==="li"){let te=N.next;for(;te&&a[te.name];){te.name="li",C.add(te),N.parent.insert(te,N.parent);te=te.next}N.unwrap();continue}const q=[N];for(B=N.parent;B&&!n.isValidChild(B.name,N.name)&&E(B);B=B.parent)q.push(B);if(B&&q.length>1)if(GM(n,N,B))g4(N,n);else{q.reverse(),j=q[0].clone(),r(j);let te=j;for(let ve=0;ve<q.length-1;ve++){n.isValidChild(te.name,q[ve].name)&&ve>0?(Q=q[ve].clone(),r(Q),te.append(Q)):Q=te;for(let xe=q[ve].firstChild;xe&&xe!==q[ve+1];){const Ce=xe.next;Q.append(xe),xe=Ce}te=Q}rT(n,u,f,j)?B.insert(N,q[0],!0):(B.insert(j,q[0],!0),B.insert(N,j)),B=q[0],(rT(n,u,f,B)||lh(B,"br"))&&B.empty().remove()}else if(N.parent){if(N.name==="li"){let te=N.prev;if(te&&(te.name==="ul"||te.name==="ol")){te.append(N);continue}if(te=N.next,te&&(te.name==="ul"||te.name==="ol")&&te.firstChild){te.insert(N,te.firstChild,!0);continue}const ve=new xi("ul",1);r(ve),N.wrap(ve);continue}if(n.isValidChild(N.parent.name,"div")&&n.isValidChild("div",N.name)){const te=new xi("div",1);r(te),N.wrap(te)}else g4(N,n)}}},Rs=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},GM=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&Rs(o,"a")?!0:gv(o)&&oT(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,bL=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},vL=e=>{const n=Fe.fromRangeStart(e),o=Fe.fromRangeEnd(e),r=e.commonAncestorContainer;return $i(!1,r,o).map(a=>!Pi(n,o,r)&&Pi(n,a,r)?bL(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},wr=e=>e.collapsed?e:vL(e),qM=e=>Re(e.firstChild)&&e.firstChild===e.lastChild,g2=e=>e.name==="br"||e.value===Ac,h2=(e,n)=>e.getBlockElements()[n.name]&&qM(n)&&g2(n.firstChild),cT=(e,n)=>{const o=e.getNonEmptyElements();return Re(n)&&(n.isEmpty(o)||h2(e,n))},aT=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),cT(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},KM=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},$j=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return KM(a)},yL=e=>{var n;return Lt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},Fj=e=>e.data===Ac||ms(e),CL=e=>Re(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Fj(e.firstChild),wL=e=>!e.firstChild||CL(e),Ij=e=>e.length>0&&wL(e[e.length-1])?e.slice(0,-1):e,h4=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},Ua=(e,n)=>!!h4(e,n),YM=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},XM=(e,n)=>{const o=Fe.before(e),a=za(n).next(o);return a?a.toRange():null},JM=(e,n)=>{const o=Fe.after(e),a=za(n).prev(o);return a?a.toRange():null},SL=(e,n,o,r)=>{const a=YM(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),dt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),JM(n[n.length-1],o)},xL=(e,n,o)=>{const r=e.parentNode;return r&&dt.each(n,a=>{r.insertBefore(a,e)}),XM(e,o)},hu=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),JM(n[0],o)),zm=(e,n,o,r)=>{const a=$j(n,e,r),u=h4(n,o.startContainer),f=Ij(yL(a.firstChild)),b=1,C=2,E=n.getRoot(),M=N=>{const B=Fe.fromRangeStart(o),j=za(n.getRoot()),Q=N===b?j.prev(B):j.next(B),q=Q==null?void 0:Q.getNode();return q?h4(n,q)!==u:!0};return u?M(b)?xL(u,f,E):M(C)?hu(u,f,E,n):SL(u,f,E,o):null},TL=["pre"],p4=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,E=He(TL,u.name);if(C&&E){const M=u.attr("contenteditable")!=="false",N=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,B=I.from(ah(r,o)).forall(Ye);return M&&N&&B}else return!1},p2=Rh,EL=(e,n,o)=>{if(Re(o)){const r=e.getParent(n.endContainer,p2);return o===r&&H0(me.fromDom(o),n)}else return!1},kL=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},b2=(e,n,o)=>{I.from(e.getParent(n,"td,th")).map(me.fromDom).each(r=>sS(r,o))},lT=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=f2(e),f="*[data-mce-fragment]",b=r.select(f);dt.each(b,C=>{const E=B=>Re(o[B.nodeName.toLowerCase()]),M=B=>B.childNodes.length===1;if((B=>!(YR(r,B)||F6(r,B)))(C)&&E(C)&&M(C)){const B=av(r,C),j=(ve,xe)=>Bs(ve,Ce=>He(xe,Ce)),Q=ve=>M(C)&&r.is(ve,f)&&E(ve)&&(ve.nodeName===C.nodeName&&j(B,av(r,ve))||Q(ve.children[0])),q=ve=>Re(ve)&&ve!==a&&(u.compare(C,ve)||q(ve.parentElement)),te=ve=>Re(ve)&&ve!==a&&r.is(ve,f)&&(L6(r,C,ve)||te(ve.parentElement));(Q(C.children[0])||q(C.parentElement)&&!te(C.parentElement))&&r.remove(C,!0)}})}},b4=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},_L=e=>{dt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Vm=e=>!!e.getAttribute("data-mce-fragment"),AL=(e,n)=>Re(n)&&!e.schema.getVoidElements()[n.nodeName],OL=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=ah(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let E=f.createRng();const M=n.previousSibling;if(ut(M)){E.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const j=n.nextSibling;ut(j)&&(M.appendData(j.data),(a=j.parentNode)===null||a===void 0||a.removeChild(j))}else E.setStartBefore(n),E.setEndBefore(n);const N=j=>{let Q=Fe.fromRangeStart(j);return Q=za(e.getBody()).next(Q),Q==null?void 0:Q.toRange()},B=f.getParent(n,f.isBlock);if(f.remove(n),B&&f.isEmpty(B)){const j=p2(B);li(me.fromDom(B)),E.setStart(B,0),E.setEnd(B,0),!j&&!Vm(B)&&(u=N(E))?(E=u,f.remove(B)):f.add(B,f.create("br",j?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},vd=e=>{const n=e.dom,o=wr(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,p2);EL(n,o,r)?Jx(e,o,me.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&ut(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},v2=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return I.some(n);return I.none()},nm=(e,n,o)=>{var r;return vt(o.children(),oT)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},DL=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,E=sh({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=vi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let N=u.getRng();const B=N.startContainer,j=e.getBody();B===j&&u.isCollapsed()&&f.isBlock(j.firstChild)&&AL(e,j.firstChild)&&f.isEmpty(j.firstChild)&&(N=f.createRng(),N.setStart(j.firstChild,0),N.setEnd(j.firstChild,0),u.setRng(N)),u.isCollapsed()||vd(e);const Q=u.getNode(),q={context:Q.nodeName.toLowerCase(),data:o.data,insert:!0},te=b.parse(n,q);if(o.paste===!0&&aT(e.schema,te)&&Ua(f,Q))return N=zm(E,f,u.getRng(),te),N&&u.setRng(N),n;o.paste===!0&&p4(f,te,Q,e.getBody())&&((r=te.firstChild)===null||r===void 0||r.unwrap()),b4(te);let ve=te.lastChild;if(ve&&ve.attr("id")==="mce_marker"){const xe=ve;for(ve=ve.prev;ve;ve=ve.walk(!0))if(ve.type===3||!f.isBlock(ve.name)){ve.parent&&e.schema.isValidChild(ve.parent.name,"span")&&ve.parent.insert(xe,ve,ve.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(Q),!q.invalid&&!nm(f,Q,te))n=E.serialize(te),kL(e,n,Q);else{e.selection.setContent(M);let xe=u.getNode(),Ce;const De=e.getBody();for(mf(xe)?xe=Ce=De:Ce=xe;Ce&&Ce!==De;)xe=Ce,Ce=Ce.parentNode;n=xe===De?De.innerHTML:f.getOuterHTML(xe);const ct=b.parse(n),Tt=v2(ct),Vt=Tt.bind(pL).getOr(ct);Tt.each(Xt=>Xt.replace(te));const Ze=te.children(),Ie=(a=te.parent)!==null&&a!==void 0?a:ct;te.unwrap();const ot=Lt(Ze,Xt=>GM(e.schema,Xt,Ie));Hm(ot,e.schema,Vt),f4(b.getNodeFilters(),b.getAttributeFilters(),ct),n=E.serialize(ct),xe===De?f.setHTML(De,n):f.setOuterHTML(xe,n)}return lT(e,C),OL(e,f.get("mce_marker")),_L(e.getBody()),b2(f,u.getStart(),e.schema),Mu(e.schema,e.getBody(),u.getStart()),n},Ls=e=>e instanceof xi,hv=e=>{U1(e)&&hl(e.getBody()).each(n=>{const o=n.getNode(),r=eu(o)?hl(o).getOr(n):n;e.selection.setRng(r.toRange())})},pv=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&hv(e)},QM=(e,n,o,r)=>{if(o=vi(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=sl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Df(e),o)):o||(o=a),pv(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=sh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=l1(me.fromDom(n))?o:dt.trim(o);return pv(e,a,r.no_selection),{content:a,html:a}}},v4=(e,n,o,r)=>{f4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=sh({validate:!1},e.schema).serialize(o),u=vi(l1(me.fromDom(n))?a:dt.trim(a));return pv(e,u,r.no_selection),{content:o,html:u}},y4=(e,n,o)=>I.from(e.getBody()).map(r=>Ls(n)?v4(e,r,n,o):QM(e,r,n,o)).getOr({content:n,html:Ls(o.content)?"":o.content}),eN=e=>ie(e)?e:Me,C4=(e,n,o)=>{let r=e.dom;const a=eN(o);for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return I.none()},w4=(e,n,o)=>{const r=n(e),a=eN(o);return r.orThunk(()=>a(e)?I.none():C4(e,n,a))},iT=V0,S4=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(iu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},y2=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>S4(e,b,o)?!0:b.parentNode===u||!!qf(e,b,o,r,!0));return!!qf(e,f,o,r,a)},C2=(e,n,o)=>pa(o)&&iT(n,o.inline)||Fm(o)&&iT(n,o.block)?!0:iu(o)?Ht(n)&&e.is(n,o.selector):!1,w2=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(ie(o.onmatch))return o.onmatch(n,o,r);if(f){if(qa(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):U0(e,n,f[C]))return!0}else for(const C in f)if(un(f,C)){const E=b?e.getAttrib(n,C):U0(e,n,C),M=eh(f[C],u),N=xn(E)||mo(E);if(N&&xn(M))continue;if(a&&N&&!o.exact||(!a||o.exact)&&!iT(E,th(M,C)))return!1}}return!0},qf=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ht(n))for(let b=0;b<u.length;b++){const C=u[b];if(C2(e.dom,n,C)&&w2(f,n,C,"attributes",a,r)&&w2(f,n,C,"styles",a,r)){const E=C.classes;if(E){for(let M=0;M<E.length;M++)if(!e.dom.hasClass(n,eh(E[M],r)))return}return C}}},x4=(e,n,o,r,a)=>{if(r)return y2(e,r,n,o,a);if(r=e.selection.getNode(),y2(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&y2(e,u,n,o,a))},RL=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!a[C]&&qf(e,f,C,o)&&(a[C]=!0,r.push(C))}},e.dom.getRoot()),r},ML=(e,n)=>{const o=a=>ls(a,me.fromDom(e.getBody())),r=(a,u)=>qf(e,a.dom,u)?I.some(u):I.none();return I.from(e.selection.getStart(!0)).bind(a=>w4(me.fromDom(a),u=>$c(n,f=>r(u,f)),o)).getOrNull()},NL=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=bp(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!iu(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},tN=(e,n,o)=>jn(o,(r,a)=>{const u=eA(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),S2=lc,BL=(e,n)=>e.importNode(n,!0),T4=e=>{if(e){const n=new da(e,e);for(let o=n.current();o;o=n.next())if(ut(o))return o}return null},uT=e=>{const n=me.fromTag("span");return Xr(n,{id:F0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&xr(n,me.fromText(S2)),n},PL=e=>{const n=T4(e);return n&&n.data.charAt(0)===S2&&n.deleteData(0,1),n},E4=(e,n,o)=>{const r=e.dom,a=e.selection;if(gx(n))W1(e,!1,me.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,E=u.endContainer,M=u.endOffset,N=PL(n);r.remove(n,!0),b===N&&C>0&&u.setStart(N,C-1),E===N&&M>0&&u.setEnd(N,M-1),f&&r.isEmpty(f)&&bi(me.fromDom(f)),a.setRng(u)}},dT=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)E4(e,n,o);else if(n=Yg(e.getBody(),a.getStart()),!n)for(;n=r.get(F0);)E4(e,n,o)},$L=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Ke(LC,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(n_(me.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},k4=(e,n)=>(e.appendChild(n),n),Vu=(e,n)=>{var o;const r=hs(e,(u,f)=>k4(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return k4(r,a.createTextNode(S2))},FL=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,C=Lt(ws(f.get()),N=>N!==r&&!an(N,"removeformat")),E=tN(e,o,C);if(Lt(E,N=>!Z0(e,N,r)).length>0){const N=o.cloneNode(!1);return b.add(n,N),f.remove(r,a,N,u),b.remove(N),I.some(N)}else return I.none()},nN=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=Yg(e.getBody(),a.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&M.test(E.charAt(b))&&M.test(E.charAt(b-1))){const N=a.getBookmark();f.collapse(!0);let B=Hf(e.dom,f,u);B=en(B),e.formatter.apply(n,o,B),a.moveToBookmark(N)}else{let N=r?T4(r):null;(!r||(N==null?void 0:N.data)!==S2)&&(r=BL(e.getDoc(),uT(!0).dom),N=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),a.setCursorLocation(N,b)}},_4=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),E=C.startContainer,M=C.startOffset;let N=E;ut(E)&&(M!==E.data.length&&(f=!0),N=N.parentNode);const B=[];let j;for(;N;){if(qf(e,N,n,o,r)){j=N;break}N.nextSibling&&(f=!0),B.push(N),N=N.parentNode}if(j)if(f){const Q=u.getBookmark();C.collapse(!0);let q=Hf(a,C,b,!0);q=en(q),e.formatter.remove(n,o,q,r),u.moveToBookmark(Q)}else{const Q=Yg(e.getBody(),j),q=Re(Q)?a.getParents(j.parentNode,Je,Q):[],te=uT(!1).dom;$L(e,te,Q??j);const ve=FL(e,te,j,n,o,r),xe=Vu([...B,...ve.toArray(),...q],te);Q&&E4(e,Q,Re(Q)),u.setCursorLocation(xe,1),a.isEmpty(j)&&a.remove(j)}},A4=(e,n,o)=>{const r=e.selection,a=e.getBody();dT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===S2&&dT(e,Yg(a,r.getStart()),!0),(n===37||n===39)&&dT(e,Yg(a,r.getStart()),!0)},oN=e=>ut(e)&&yo(e.data,Ac),sN=e=>{e.on("mouseup keydown",n=>{A4(e,n.keyCode,oN(e.selection.getRng().endContainer))})},rN=e=>{const n=uT(!1),o=Vu(e,n.dom);return{caretContainer:n,caretPosition:Fe(o,0)}},cN=(e,n)=>{const{caretContainer:o,caretPosition:r}=rN(n);return ka(me.fromDom(e),o),js(me.fromDom(e)),r},O4=(e,n)=>{const{caretContainer:o,caretPosition:r}=rN(n);return e.insertNode(o.dom),r},D4=(e,n)=>{if(Ii(n.dom))return!1;const o=e.schema.getTextInlineElements();return un(o,No(n))&&!Ii(n.dom)&&!Sm(n.dom)},zi={},aN=Mi(["pre"]),IL=(e,n)=>{zi[e]||(zi[e]=[]),zi[e].push(n)},Lj=(e,n)=>{un(zi,e)&&ye(zi[e],o=>{o(n)})};IL("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return aN(f)&&He(a,f)},r=(a,u)=>{const f=me.fromDom(u),b=kc(f).dom;js(f),_u(me.fromDom(a),[me.fromTag("br",b),me.fromTag("br",b),..._c(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Lt(Lt(a,aN),o(a));ye(u,f=>{r(f.previousSibling,f)})}});const mT=["fontWeight","fontStyle","color","fontSize","fontFamily"],LL=e=>st(e.styles)&&vt(ws(e.styles),n=>He(mT,n)),Hj=e=>Vo(e,n=>pa(n)&&n.inline==="span"&&LL(n)),lN=(e,n)=>{const o=e.get(n);return it(o)?Hj(o):I.none()},fT=(e,n)=>Ci(n,Fe.fromRangeStart(e)).isNone(),om=(e,n)=>gl(n,Fe.fromRangeEnd(e)).exists(o=>!ms(o.getNode())||gl(n,o).isSome())===!1,gT=e=>n=>cy(n)&&e.isEditable(n),hT=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return fT(o,n[0])&&om(o,n[0])?n:[];{const r=lo(n).filter(f=>fT(o,f)).toArray(),a=Cs(n).filter(f=>om(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},R4=e=>Lt(hT(e),gT(e.dom)),iN=e=>Lt(e.getSelectedBlocks(),gT(e.dom)),pT=dt.each,M4=e=>Ht(e)&&!Li(e)&&!Ii(e)&&!Sm(e),N4=(e,n)=>{for(let o=e;o;o=o[n]){if(ut(o)&&Bn(o.data))return e;if(Ht(o)&&!Li(o))return o}return e},bT=(e,n,o)=>{const r=f2(e),a=ql(n)&&e.dom.isEditable(n),u=ql(o)&&e.dom.isEditable(o);if(a&&u){const f=N4(n,"previousSibling"),b=N4(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const E=C;C=C.nextSibling,f.appendChild(E)}return e.dom.remove(b),dt.each(dt.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},uN=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=bT(e,A1(r),r))!==null&&a!==void 0?a:r;bT(e,u,A1(u,!0))}},dN=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";pT(e.select(r,o),a=>{M4(a)&&e.isEditable(a)&&pT(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},B4=(e,n,o)=>{pT(e.childNodes,r=>{M4(r)&&(n(r)&&o(r),r.hasChildNodes()&&B4(r,n,o))})},J1=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},P4=(e,n)=>o=>!!(o&&U0(e,o,n)),mN=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),J1(e,r)},Ep=Os.generate([{keep:[]},{rename:["name"]},{removed:[]}]),HL=/^(src|href|style)$/,$4=dt.each,vT=V0,zL=e=>/^(TR|TH|TD)$/.test(e.nodeName),fN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),F4=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(Ht(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return ut(r)&&o&&a>=r.data.length&&(r=new da(r,e.getBody()).next()||r),ut(r)&&!o&&a===0&&(r=new da(r,e.getBody()).prev()||r),r},gN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return zL(e)&&r?e.nodeName==="TR"&&r[o]||r:e},x2=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},kp=(e,n,o,r,a)=>{const u=me.fromDom(n),f=me.fromDom(e.create(r,a)),b=o?Ea(u):Qm(u);return _u(f,b),o?(ka(u,f),ym(f,u)):(Tl(u,f),xr(f,u)),f.dom},VL=(e,n)=>n.links&&e.nodeName==="A",hN=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=sl(e);Fm(o)&&r===u.getRoot()&&(!o.list_block||!vT(n,o.list_block))&&ye(gr(n.childNodes),b=>{$m(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=x2(u,b,f),u.setAttribs(a,Df(e))):a=null}),!(nA(o)&&!vT(o.inline,n))&&u.remove(n,!0)},T2=(e,n,o)=>Go(e)?{name:n,value:null}:{name:e,value:eh(n,o)},I4=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},L4=(e,n,o,r,a)=>{let u=!1;$4(o.styles,(f,b)=>{const{name:C,value:E}=T2(b,f,r),M=th(E,C);(o.remove_similar||W(E)||!Ht(a)||vT(U0(e,a,C),M))&&e.setStyle(n,C,""),u=!0}),u&&I4(e,n)},UL=(e,n,o)=>{n==="removeformat"?ye(iN(e.selection),r=>{ye(mT,a=>e.dom.setStyle(r,a,"")),I4(e.dom,r)}):lN(e.formatter,n).each(r=>{ye(iN(e.selection),a=>L4(e.dom,a,r,o,null))})},H4=(e,n,o,r,a)=>{const u=e.dom,f=f2(e),b=e.schema;if(pa(n)&&Nu(b,n.inline)&&ou(b,r)&&r.parentElement===e.getBody())return hN(e,r,n),Ep.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!C2(u,r,n)&&!VL(r,n))return Ep.keep();const C=r,E=n.preserve_attributes;if(pa(n)&&n.remove==="all"&&it(E)){const M=Lt(u.getAttribs(C),N=>He(E,N.name.toLowerCase()));if(u.removeAllAttribs(C),ye(M,N=>u.setAttrib(C,N.name,N.value)),M.length>0)return Ep.rename("span")}if(n.remove!=="all"){L4(u,C,n,o,a),$4(n.attributes,(N,B)=>{const{name:j,value:Q}=T2(B,N,o);if(n.remove_similar||W(Q)||!Ht(a)||vT(u.getAttrib(a,j),Q)){if(j==="class"){const q=u.getAttrib(C,j);if(q){let te="";if(ye(q.split(/\s+/),ve=>{/mce\-\w+/.test(ve)&&(te+=(te?" ":"")+ve)}),te){u.setAttrib(C,j,te);return}}}if(HL.test(j)&&C.removeAttribute("data-mce-"+j),j==="style"&&Mi(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(j),u.setStyle(C,"list-style-type","none");return}j==="class"&&C.removeAttribute("className"),C.removeAttribute(j)}}),$4(n.classes,N=>{N=eh(N,o),(!Ht(a)||u.hasClass(a,N))&&u.removeClass(C,N)});const M=u.getAttribs(C);for(let N=0;N<M.length;N++){const B=M[N].nodeName;if(!f.isAttributeInternal(B))return Ep.keep()}}return n.remove!=="none"?(hN(e,C,n),Ep.removed()):Ep.keep()},WL=(e,n,o,r,a)=>{let u;return n.parentNode&&ye(bp(e.dom,n.parentNode).reverse(),f=>{if(!u&&Ht(f)&&f.id!=="_start"&&f.id!=="_end"){const b=qf(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},Q1=(e,n,o,r)=>H4(e,n,o,r,r).fold(rt(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),rt(null)),pN=(e,n,o,r,a,u,f,b)=>{var C,E;let M,N;const B=e.dom;if(o){const j=o.parentNode;for(let Q=r.parentNode;Q&&Q!==j;Q=Q.parentNode){let q=B.clone(Q,!1);for(let te=0;te<n.length&&(q=Q1(e,n[te],b,q),q!==null);te++);q&&(M&&q.appendChild(M),N||(N=q),M=q)}(!f.mixed||!B.isBlock(o))&&(r=(C=B.split(o,r))!==null&&C!==void 0?C:r),M&&N&&((E=a.parentNode)===null||E===void 0||E.insertBefore(M,a),N.appendChild(a),pa(f)&&uN(e,f,b,M))}return r},bN=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,E=q=>{const te=WL(e,q,n,o,a);return pN(e,u,te,q,q,!0,f,o)},M=q=>Li(q)&&Ht(q)&&(q.id==="_start"||q.id==="_end"),N=q=>vt(u,te=>_p(e,te,o,q,q)),B=q=>{const te=gr(q.childNodes),xe=N(q)||vt(u,ct=>C2(b,q,ct)),Ce=q.parentNode;if(!xe&&Re(Ce)&&bd(f)&&N(Ce),f.deep&&te.length)for(let ct=0;ct<te.length;ct++)B(te[ct]);ye(["underline","line-through","overline"],ct=>{Ht(q)&&e.dom.getStyle(q,"text-decoration")===ct&&q.parentNode&&fx(b,q.parentNode)===ct&&_p(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ct}},void 0,q)})},j=q=>{const te=b.get(q?"_start":"_end");if(te){let ve=te[q?"firstChild":"lastChild"];return M(ve)&&(ve=ve[q?"firstChild":"lastChild"]),ut(ve)&&ve.data.length===0&&(ve=q?te.previousSibling||te.nextSibling:te.nextSibling||te.previousSibling),b.remove(te,!0),ve}else return null},Q=q=>{let te,ve,xe=Hf(b,q,u,q.collapsed);if(f.split){if(xe=en(xe),te=F4(e,xe,!0),ve=F4(e,xe),te!==ve){if(te=gN(te,!0),ve=gN(ve,!1),fN(b,te,ve)){const De=I.from(te.firstChild).getOr(te);E(kp(b,De,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(fN(b,ve,te)){const De=I.from(ve.lastChild).getOr(ve);E(kp(b,De,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}te=x2(b,te,"span",{id:"_start","data-mce-type":"bookmark"}),ve=x2(b,ve,"span",{id:"_end","data-mce-type":"bookmark"});const Ce=b.createRng();Ce.setStartAfter(te),Ce.setEndBefore(ve),M1(b,Ce,De=>{ye(De,ct=>{!Li(ct)&&!Li(ct.parentNode)&&E(ct)})}),E(te),E(ve),te=j(!0),ve=j()}else te=ve=E(te);xe.startContainer=te.parentNode?te.parentNode:te,xe.startOffset=b.nodeIndex(te),xe.endContainer=ve.parentNode?ve.parentNode:ve,xe.endOffset=b.nodeIndex(ve)+1}M1(b,xe,Ce=>{ye(Ce,B)})};if(r){if(pp(r)){const q=b.createRng();q.setStartBefore(r),q.setEndAfter(r),Q(q)}else Q(r);Hi(e,n,r,o);return}!C.isCollapsed()||!pa(f)||fp(e).length?(Jd(e,()=>hp(e,Q),q=>pa(f)&&x4(e,n,o,q)),e.nodeChanged()):_4(e,n,o,a),UL(e,n,o),Hi(e,n,r,o)},z4=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&bN(e,n,o,r,a)},_p=(e,n,o,r,a)=>H4(e,n,o,r,a).fold(Me,u=>(e.dom.rename(r,u),!0),Je),V4=dt.each,ZL=(e,n,o,r)=>{const a=u=>{if(ql(u)&&Ht(u.parentNode)&&e.isEditable(u)){const f=fx(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(dt.walk(r,a,"childNodes"),a(r))},vN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=P4(e,"fontSize");B4(r,u=>a(u)&&e.isEditable(u),mN(e,"backgroundColor",eh(n.styles.backgroundColor,o)))}},jL=(e,n,o,r)=>{if(pa(n)&&(n.inline==="sub"||n.inline==="sup")){const a=P4(e,"fontSize");B4(r,f=>a(f)&&e.isEditable(f),mN(e,"fontSize",""));const u=Lt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},GL=(e,n,o,r)=>{V4(n,a=>{pa(a)&&V4(e.dom.select(a.inline,r),u=>{M4(u)&&_p(e,a,o,u,a.exact?u:null)}),dN(e.dom,a,r)})},yT=(e,n,o,r,a)=>{const u=a.parentNode;qf(e,u,o,r)&&_p(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>qf(e,f,o,r)?(_p(e,n,r,a),!0):!1)},E2=dt.each,U4=(e,n,o,r)=>{if(RS(e)&&pa(n)&&o.parentNode){const a=Ib(e.schema),u=Nb(me.fromDom(o),f=>Ii(f.dom));return tr(a,r)&&nu(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},yN=(e,n,o,r)=>{if(E2(o.styles,(a,u)=>{e.setStyle(n,u,eh(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},qL=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,E=(Q,q=u)=>{ie(q.onformat)&&q.onformat(Q,q,o,r),yN(b,Q,q,o),E2(q.attributes,(te,ve)=>{b.setAttrib(Q,ve,eh(te,o))}),E2(q.classes,te=>{const ve=eh(te,o);b.hasClass(Q,ve)||b.addClass(Q,ve)})},M=(Q,q)=>{let te=!1;return E2(Q,ve=>iu(ve)?b.getContentEditable(q)==="false"&&!ve.ceFalseOverride||Re(ve.collapsed)&&ve.collapsed!==f?!0:b.is(q,ve.selector)&&!Ii(q)?(E(q,ve),te=!0,!1):!0:!1),te},N=Q=>{if(ee(Q)){const q=b.create(Q);return E(q),q}else return null},B=(Q,q,te)=>{const ve=[];let xe=!0;const Ce=u.inline||u.block,De=N(Ce),ct=Ze=>tA(u)&&qf(e,Ze,n,o),Tt=(Ze,Ie,ot)=>{const Xt=O1(u)&&LC(e.schema,Ze)&&$m(e,Ie,Ce);return ot&&Xt},Vt=(Ze,Ie,ot,Xt)=>{const Cn=Ze.nodeName.toLowerCase(),fo=$m(e,Ce,Cn)&&$m(e,Ie,Ce),Lo=!te&&ut(Ze)&&Bg(Ze.data),ks=Ii(Ze),Ks=!pa(u)||!Q.isBlock(Ze);return(ot||Xt)&&fo&&!Lo&&!ks&&Ks};M1(Q,q,Ze=>{let Ie;const ot=Xt=>{let Cn=!1,fo=xe,Lo=!1;const ks=Xt.parentNode,Ks=ks.nodeName.toLowerCase(),nc=Q.getContentEditable(Xt);Re(nc)&&(fo=xe,xe=nc==="true",Cn=!0,Lo=VC(e,Xt));const ja=xe&&!Cn;if(ms(Xt)&&!U4(e,u,Xt,Ks)){Ie=null,Fm(u)&&Q.remove(Xt);return}if(ct(Xt)){Ie=null;return}if(Tt(Xt,Ks,ja)){const zs=Q.rename(Xt,Ce);E(zs),ve.push(zs),Ie=null;return}if(iu(u)){let zs=M(a,Xt);if(!zs&&Re(ks)&&bd(u)&&(zs=M(a,ks)),!pa(u)||zs){Ie=null;return}}Re(De)&&Vt(Xt,Ks,ja,Lo)?(Ie||(Ie=Q.clone(De,!1),ks.insertBefore(Ie,Xt),ve.push(Ie)),Lo&&Cn&&(xe=fo),Ie.appendChild(Xt)):(Ie=null,ye(gr(Xt.childNodes),ot),Cn&&(xe=fo),Ie=null)};ye(Ze,ot)}),u.links===!0&&ye(ve,Ze=>{const Ie=ot=>{ot.nodeName==="A"&&E(ot,u),ye(gr(ot.childNodes),Ie)};Ie(Ze)}),ye(ve,Ze=>{const Ie=Cn=>{let fo=0;return ye(Cn.childNodes,Lo=>{!z0(Lo)&&!Li(Lo)&&fo++}),fo},ot=Cn=>Vo(Cn.childNodes,IC).filter(Lo=>Q.getContentEditable(Lo)!=="false"&&C2(Q,Lo,u)).map(Lo=>{const ks=Q.clone(Lo,!1);return E(ks),Q.replace(ks,Cn,!0),Q.remove(Lo,!0),ks}).getOr(Cn),Xt=Ie(Ze);if((ve.length>1||!Q.isBlock(Ze))&&Xt===0){Q.remove(Ze,!0);return}(pa(u)||Fm(u)&&u.wrapper)&&(!u.exact&&Xt===1&&(Ze=ot(Ze)),GL(e,a,o,Ze),yT(e,u,n,o,Ze),vN(Q,u,o,Ze),ZL(Q,u,o,Ze),jL(Q,u,o,Ze),uN(e,u,o,Ze))})},j=pp(r)?r:C.getNode();if(b.getContentEditable(j)==="false"&&!VC(e,j)){r=j,M(a,r),du(e,n,r,o);return}if(u){if(r)if(pp(r)){if(!M(a,r)){const Q=b.createRng();Q.setStartBefore(r),Q.setEndAfter(r),B(b,Hf(b,Q,a),!0)}}else B(b,r,!0);else!f||!pa(u)||fp(e).length?(C.setRng(wr(C.getRng())),Jd(e,()=>{hp(e,(Q,q)=>{const te=q?Q:Hf(b,Q,a);B(b,te,!1)})},Je),e.nodeChanged()):nN(e,n,o),lN(e.formatter,n).each(Q=>{ye(R4(e.selection),q=>yN(b,q,Q,o))});Lj(n,e)}du(e,n,r,o)},W4=(e,n,o,r)=>{(r||e.selection.isEditable())&&qL(e,n,o,r)},CT=e=>un(e,"vars"),CN=(e,n)=>{e.set({}),n.on("NodeChange",o=>{k2(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=I.from(o.node).map(a=>pp(a)?a:a.startContainer).bind(a=>Ht(a)?I.some(a):I.from(a.parentElement)).getOrThunk(()=>wN(n));k2(n,r,e.get())})},wN=e=>e.selection.getStart(),SN=(e,n,o,r,a)=>fr(n,b=>{const C=e.formatter.matchNode(b,o,a??{},r);return!cn(C)},b=>S4(e,b,o)?!0:r?!1:Re(e.formatter.matchNode(b,o,a,!0))),xN=(e,n)=>{const o=n??wN(e);return Lt(bp(e.dom,o),r=>Ht(r)&&!Sm(r))},k2=(e,n,o)=>{const r=xN(e,n);ht(o,(a,u)=>{const f=b=>{const C=SN(e,r,u,b.similar,CT(b)?b.vars:void 0),E=C.isSome();if(b.state.get()!==E){b.state.set(E);const M=C.getOr(n);CT(b)?b.callback(E,{node:M,format:u,parents:r}):ye(b.callbacks,N=>N(E,{node:M,format:u,parents:r}))}};ye([a.withSimilar,a.withoutSimilar],f),ye(a.withVars,f)})},ih=(e,n,o,r,a,u)=>{const f=n.get();ye(o.split(","),b=>{const C=os(f,b).getOrThunk(()=>{const M={withSimilar:{state:Te(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Te(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),E=()=>{const M=xN(e);return SN(e,M,b,a,u).isSome()};if(cn(u)){const M=a?C.withSimilar:C.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(E())}else C.withVars.push({state:Te(E()),similar:a,vars:u,callback:r})}),n.set(f)},KL=(e,n,o)=>{const r=e.get();ye(n.split(","),a=>os(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Lt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Lt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Lt(u.withVars,f=>f.callback!==o)}})),e.set(r)},Z4=(e,n,o,r,a,u)=>(ih(e,n,o,r,a,u),{unbind:()=>KL(n,o,r)}),Bc=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(x4(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?z4(e,n,o,r):W4(e,n,o,r))},wT=dt.explode,ST=()=>{const e={};return{addFilter:(a,u)=>{ye(wT(a),f=>{un(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>jr(e),removeFilter:(a,u)=>{ye(wT(a),f=>{if(un(e,f))if(Re(u)){const b=e[f],C=Lt(b.callbacks,E=>E!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},uh=(e,n)=>{ye(n,o=>{e.attr(o,null)})},TN=(e,n,o)=>{e.addNodeFilter("font",r=>{ye(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),C=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&fc(C).each(E=>{u["font-size"]=o[E-1]}),a.name="span",a.attr("style",n.serialize(u)),uh(a,["color","face","size"])})})},EN=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";ye(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},_2=(e,n,o)=>{var r;const a=py();n.convert_fonts_to_spans&&TN(e,a,dt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),EN(e,o,a)},YL=(e,n,o)=>{n.inline_styles&&_2(e,n,o)},XL=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),bv=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},j4=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?bv(r):decodeURIComponent(r);return I.some({type:a[1],data:f,base64Encoded:u})}else return I.none()},Ap=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return I.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return I.some(new Blob([a],{type:e}))},JL=e=>new Promise((n,o)=>{j4(e).bind(({type:r,data:a,base64Encoded:u})=>Ap(r,a,u)).fold(()=>o("Invalid data URI"),n)}),Op=e=>yn(e,"blob:")?XL(e):yn(e,"data:")?JL(e):Promise.reject("Unknown URI format"),kN=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let yd=0;const A2=e=>"blobid"+yd++,xT=(e,n,o)=>j4(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return I.none();{const f=u?r:btoa(r);return o(f,a)}}),TT=(e,n,o)=>{const r=e.create(A2(),n,o);return e.add(r),r},_N=(e,n,o=!1)=>xT(n,o,(r,a)=>I.from(e.getByData(r,a)).orThunk(()=>Ap(a,r).map(u=>TT(e,u,r)))),ET=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(yn(n,"blob:")){const r=e.getByUri(n);return Re(r)?Promise.resolve(r):Op(n).then(a=>kN(a).then(u=>xT(u,!1,f=>I.some(TT(e,a,f))).getOrThunk(o)))}else return yn(n,"data:")?_N(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},QL=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,sm=e=>I.from(e.match(QL)).bind(n=>lr(n,1)).map(n=>yn(n,"www.")?n.substring(4):n),O2=(e,n)=>{I.from(e.attr("src")).bind(sm).forall(o=>!He(n,o))&&e.attr("sandbox","")},kT=(e,n)=>yn(e,`${n}/`),G4=e=>cn(e)?"iframe":kT(e,"image")?"img":kT(e,"video")?"video":kT(e,"audio")?"audio":"iframe",q4=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=G4(e),b=new xi(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&O2(b,u),b},eb=e=>Re(e.attr("data-mce-bogus")),K4=e=>e.attr("src")===St.transparentSrc||Re(e.attr("data-mce-placeholder")),e8=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");K4(a)||eb(a)||xn(u)||_N(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>ye(a,r))}},AN=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",C=>{let E=C.length;const M=B=>B.split(" ").filter(Q=>Q.length>0).concat(["noopener"]).sort().join(" "),N=B=>{const j=B?dt.trim(B):"";return/\b(noopener)\b/g.test(j)?j:M(j)};if(!n.allow_unsafe_link_target)for(;E--;){const B=C[E];B.name==="a"&&B.attr("target")==="_blank"&&B.attr("rel",N(B.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let E=C.length,M,N,B,j;for(;E--;)if(j=C[E],j.name==="a"&&j.firstChild&&!j.attr("href"))for(B=j.parent,M=j.lastChild;M&&B;)N=M.prev,B.insert(M,j),M=N}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let E=C.length,M,N;for(;E--;)if(M=C[E],N=M.parent,N&&(N.name==="ul"||N.name==="ol"))if(M.prev&&M.prev.name==="li")M.prev.append(M);else{const B=new xi("li",1);B.attr("style","list-style-type: none"),M.wrap(B)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var E;let M=C.length;for(;M--;){const N=C[M],B=(E=N.attr("class"))!==null&&E!==void 0?E:"",j=dt.explode(B," ");let Q="";for(let q=0;q<j.length;q++){const te=j[q];let ve=!1,xe=u["*"];xe&&xe[te]&&(ve=!0),xe=u[N.name],!ve&&xe&&xe[te]&&(ve=!0),ve&&(Q&&(Q+=" "),Q+=te)}Q.length||(Q=null),N.attr("class",Q)}}),e8(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=dc((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>ye(C,E=>{E.replace(q4({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",C=>ye(C,E=>O2(E,b)))},{entries:ON,setPrototypeOf:DN,isFrozen:t8,getPrototypeOf:n8,getOwnPropertyDescriptor:D2}=Object;let{freeze:pu,seal:rm,create:Y4}=Object,{apply:X4,construct:_T}=typeof Reflect<"u"&&Reflect;X4||(X4=function(n,o,r){return n.apply(o,r)}),pu||(pu=function(n){return n}),rm||(rm=function(n){return n}),_T||(_T=function(n,o){return new n(...o)});const RN=cm(Array.prototype.forEach),o8=cm(Array.prototype.pop),R2=cm(Array.prototype.push),AT=cm(String.prototype.toLowerCase),J4=cm(String.prototype.toString),s8=cm(String.prototype.match),Um=cm(String.prototype.replace),r8=cm(String.prototype.indexOf),c8=cm(String.prototype.trim),Cd=cm(RegExp.prototype.test),M2=a8(TypeError);function cm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return X4(e,n,r)}}function a8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return _T(e,o)}}function Qs(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:AT,DN&&DN(e,null);let a=n.length;for(;a--;){let u=n[a];if(typeof u=="string"){const f=o(u);f!==u&&(t8(n)||(n[a]=f),u=f)}e[u]=!0}return e}function tb(e){const n=Y4(null);for(const[o,r]of ON(e))n[o]=r;return n}function OT(e,n){for(;e!==null;){const r=D2(e,n);if(r){if(r.get)return cm(r.get);if(typeof r.value=="function")return cm(r.value)}e=n8(e)}function o(r){return console.warn("fallback value for",r),null}return o}const nb=pu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Q4=pu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),e3=pu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),l8=pu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),t3=pu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),MN=pu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NN=pu(["#text"]),BN=pu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),n3=pu(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PN=pu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),DT=pu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),i8=rm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),u8=rm(/<%[\w\W]*|[\w\W]*%>/gm),d8=rm(/\${[\w\W]*}/gm),m8=rm(/^data-[\-\w.\u00B7-\uFFFF]/),f8=rm(/^aria-[\-\w]+$/),RT=rm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$N=rm(/^(?:\w+script|data):/i),zj=rm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vv=rm(/^html$/i);var FN=Object.freeze({__proto__:null,MUSTACHE_EXPR:i8,ERB_EXPR:u8,TMPLIT_EXPR:d8,DATA_ATTR:m8,ARIA_ATTR:f8,IS_ALLOWED_URI:RT,IS_SCRIPT_OR_DATA:$N,ATTR_WHITESPACE:zj,DOCTYPE_NAME:vv});const IN=()=>typeof window>"u"?null:window,g8=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function N2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IN();const n=Wo=>N2(Wo);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:a}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:C,NodeFilter:E,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:B,trustedTypes:j}=e,Q=C.prototype,q=OT(Q,"cloneNode"),te=OT(Q,"nextSibling"),ve=OT(Q,"childNodes"),xe=OT(Q,"parentNode");if(typeof f=="function"){const Wo=a.createElement("template");Wo.content&&Wo.content.ownerDocument&&(a=Wo.content.ownerDocument)}let Ce,De="";const{implementation:ct,createNodeIterator:Tt,createDocumentFragment:Vt,getElementsByTagName:Ze}=a,{importNode:Ie}=o;let ot={};n.isSupported=typeof ON=="function"&&typeof xe=="function"&&ct&&ct.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Xt,ERB_EXPR:Cn,TMPLIT_EXPR:fo,DATA_ATTR:Lo,ARIA_ATTR:ks,IS_SCRIPT_OR_DATA:Ks,ATTR_WHITESPACE:nc}=FN;let{IS_ALLOWED_URI:ja}=FN,zs=null;const Ot=Qs({},[...nb,...Q4,...e3,...t3,...NN]);let hn=null;const ds=Qs({},[...BN,...n3,...PN,...DT]);let $t=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),An=null,_o=null,zt=!0,Ao=!0,Uo=!1,Ca=!0,Ms=!1,Zc=!1,ju=!1,fm=!1,Ll=!1,Zi=!1,yu=!1,ji=!0,Gu=!1;const wn="user-content-";let ts=!0,Wr=!1,oc={},Pc=null;const Pa=Qs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Cc=null;const uc=Qs({},["audio","video","img","source","image","track"]);let vl=null;const Cu=Qs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_d="http://www.w3.org/1998/Math/MathML",Ad="http://www.w3.org/2000/svg",qu="http://www.w3.org/1999/xhtml";let rg=qu,Ab=!1,Ob=null;const eR=Qs({},[_d,Ad,qu],J4);let cg;const Bk=["application/xhtml+xml","text/html"],JI="text/html";let Hl,zp=null;const QI=a.createElement("form"),Pk=function(t){return t instanceof RegExp||t instanceof Function},Od=function(t){if(!(zp&&zp===t)){if((!t||typeof t!="object")&&(t={}),t=tb(t),cg=Bk.indexOf(t.PARSER_MEDIA_TYPE)===-1?cg=JI:cg=t.PARSER_MEDIA_TYPE,Hl=cg==="application/xhtml+xml"?J4:AT,zs="ALLOWED_TAGS"in t?Qs({},t.ALLOWED_TAGS,Hl):Ot,hn="ALLOWED_ATTR"in t?Qs({},t.ALLOWED_ATTR,Hl):ds,Ob="ALLOWED_NAMESPACES"in t?Qs({},t.ALLOWED_NAMESPACES,J4):eR,vl="ADD_URI_SAFE_ATTR"in t?Qs(tb(Cu),t.ADD_URI_SAFE_ATTR,Hl):Cu,Cc="ADD_DATA_URI_TAGS"in t?Qs(tb(uc),t.ADD_DATA_URI_TAGS,Hl):uc,Pc="FORBID_CONTENTS"in t?Qs({},t.FORBID_CONTENTS,Hl):Pa,An="FORBID_TAGS"in t?Qs({},t.FORBID_TAGS,Hl):{},_o="FORBID_ATTR"in t?Qs({},t.FORBID_ATTR,Hl):{},oc="USE_PROFILES"in t?t.USE_PROFILES:!1,zt=t.ALLOW_ARIA_ATTR!==!1,Ao=t.ALLOW_DATA_ATTR!==!1,Uo=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ca=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ms=t.SAFE_FOR_TEMPLATES||!1,Zc=t.WHOLE_DOCUMENT||!1,Ll=t.RETURN_DOM||!1,Zi=t.RETURN_DOM_FRAGMENT||!1,yu=t.RETURN_TRUSTED_TYPE||!1,fm=t.FORCE_BODY||!1,ji=t.SANITIZE_DOM!==!1,Gu=t.SANITIZE_NAMED_PROPS||!1,ts=t.KEEP_CONTENT!==!1,Wr=t.IN_PLACE||!1,ja=t.ALLOWED_URI_REGEXP||RT,rg=t.NAMESPACE||qu,$t=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Pk(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($t.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Pk(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($t.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($t.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ms&&(Ao=!1),Zi&&(Ll=!0),oc&&(zs=Qs({},[...NN]),hn=[],oc.html===!0&&(Qs(zs,nb),Qs(hn,BN)),oc.svg===!0&&(Qs(zs,Q4),Qs(hn,n3),Qs(hn,DT)),oc.svgFilters===!0&&(Qs(zs,e3),Qs(hn,n3),Qs(hn,DT)),oc.mathMl===!0&&(Qs(zs,t3),Qs(hn,PN),Qs(hn,DT))),t.ADD_TAGS&&(zs===Ot&&(zs=tb(zs)),Qs(zs,t.ADD_TAGS,Hl)),t.ADD_ATTR&&(hn===ds&&(hn=tb(hn)),Qs(hn,t.ADD_ATTR,Hl)),t.ADD_URI_SAFE_ATTR&&Qs(vl,t.ADD_URI_SAFE_ATTR,Hl),t.FORBID_CONTENTS&&(Pc===Pa&&(Pc=tb(Pc)),Qs(Pc,t.FORBID_CONTENTS,Hl)),ts&&(zs["#text"]=!0),Zc&&Qs(zs,["html","head","body"]),zs.table&&(Qs(zs,["tbody"]),delete An.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw M2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw M2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ce=t.TRUSTED_TYPES_POLICY,De=Ce.createHTML("")}else Ce===void 0&&(Ce=g8(j,r)),Ce!==null&&typeof De=="string"&&(De=Ce.createHTML(""));pu&&pu(t),zp=t}},Bw=Qs({},["mi","mo","mn","ms","mtext"]),Pe=Qs({},["foreignobject","desc","title","annotation-xml"]),Le=Qs({},["title","style","font","a","script"]),At=Qs({},Q4);Qs(At,e3),Qs(At,l8);const wt=Qs({},t3);Qs(wt,MN);const $n=function(t){let s=xe(t);(!s||!s.tagName)&&(s={namespaceURI:rg,tagName:"template"});const c=AT(t.tagName),l=AT(s.tagName);return Ob[t.namespaceURI]?t.namespaceURI===Ad?s.namespaceURI===qu?c==="svg":s.namespaceURI===_d?c==="svg"&&(l==="annotation-xml"||Bw[l]):!!At[c]:t.namespaceURI===_d?s.namespaceURI===qu?c==="math":s.namespaceURI===Ad?c==="math"&&Pe[l]:!!wt[c]:t.namespaceURI===qu?s.namespaceURI===Ad&&!Pe[l]||s.namespaceURI===_d&&!Bw[l]?!1:!wt[c]&&(Le[c]||!At[c]):!!(cg==="application/xhtml+xml"&&Ob[t.namespaceURI]):!1},qo=function(t){R2(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},Lr=function(t,s){try{R2(n.removed,{attribute:s.getAttributeNode(t),from:s})}catch{R2(n.removed,{attribute:null,from:s})}if(s.removeAttribute(t),t==="is"&&!hn[t])if(Ll||Zi)try{qo(s)}catch{}else try{s.setAttribute(t,"")}catch{}},gm=function(t){let s,c;if(fm)t="<remove></remove>"+t;else{const g=s8(t,/^[\r\n\t ]+/);c=g&&g[0]}cg==="application/xhtml+xml"&&rg===qu&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const l=Ce?Ce.createHTML(t):t;if(rg===qu)try{s=new B().parseFromString(l,cg)}catch{}if(!s||!s.documentElement){s=ct.createDocument(rg,"template",null);try{s.documentElement.innerHTML=Ab?De:l}catch{}}const d=s.body||s.documentElement;return t&&c&&d.insertBefore(a.createTextNode(c),d.childNodes[0]||null),rg===qu?Ze.call(s,Zc?"html":"body")[0]:Zc?s.documentElement:d},$k=function(t){return Tt.call(t.ownerDocument||t,t,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},bj=function(t){return t instanceof N&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof M)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},Fk=function(t){return typeof b=="object"?t instanceof b:t&&typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},Ch=function(t,s,c){ot[t]&&RN(ot[t],l=>{l.call(n,s,c,zp)})},tR=function(t){let s;if(Ch("beforeSanitizeElements",t,null),bj(t))return qo(t),!0;const c=Hl(t.nodeName);if(Ch("uponSanitizeElement",t,{tagName:c,allowedTags:zs}),t.hasChildNodes()&&!Fk(t.firstElementChild)&&(!Fk(t.content)||!Fk(t.content.firstElementChild))&&Cd(/<[/\w]/g,t.innerHTML)&&Cd(/<[/\w]/g,t.textContent))return qo(t),!0;if(!zs[c]||An[c]){if(!An[c]&&e6(c)&&($t.tagNameCheck instanceof RegExp&&Cd($t.tagNameCheck,c)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(c)))return!1;if(ts&&!Pc[c]){const l=xe(t)||t.parentNode,d=ve(t)||t.childNodes;if(d&&l){const g=d.length;for(let h=g-1;h>=0;--h)l.insertBefore(q(d[h],!0),te(t))}}return qo(t),!0}return t instanceof C&&!$n(t)||(c==="noscript"||c==="noembed"||c==="noframes")&&Cd(/<\/no(script|embed|frames)/i,t.innerHTML)?(qo(t),!0):(Ms&&t.nodeType===3&&(s=t.textContent,s=Um(s,Xt," "),s=Um(s,Cn," "),s=Um(s,fo," "),t.textContent!==s&&(R2(n.removed,{element:t.cloneNode()}),t.textContent=s)),Ch("afterSanitizeElements",t,null),!1)},nR=function(t,s,c){if(ji&&(s==="id"||s==="name")&&(c in a||c in QI))return!1;if(!(Ao&&!_o[s]&&Cd(Lo,s))){if(!(zt&&Cd(ks,s))){if(!hn[s]||_o[s]){if(!(e6(t)&&($t.tagNameCheck instanceof RegExp&&Cd($t.tagNameCheck,t)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(t))&&($t.attributeNameCheck instanceof RegExp&&Cd($t.attributeNameCheck,s)||$t.attributeNameCheck instanceof Function&&$t.attributeNameCheck(s))||s==="is"&&$t.allowCustomizedBuiltInElements&&($t.tagNameCheck instanceof RegExp&&Cd($t.tagNameCheck,c)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(c))))return!1}else if(!vl[s]){if(!Cd(ja,Um(c,nc,""))){if(!((s==="src"||s==="xlink:href"||s==="href")&&t!=="script"&&r8(c,"data:")===0&&Cc[t])){if(!(Uo&&!Cd(Ks,Um(c,nc,"")))){if(c)return!1}}}}}}return!0},e6=function(t){return t.indexOf("-")>0},t6=function(t){let s,c,l,d;Ch("beforeSanitizeAttributes",t,null);const{attributes:g}=t;if(!g)return;const h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:hn};for(d=g.length;d--;){s=g[d];const{name:y,namespaceURI:w}=s;c=y==="value"?s.value:c8(s.value);const _=c;if(l=Hl(y),h.attrName=l,h.attrValue=c,h.keepAttr=!0,h.forceKeepAttr=void 0,Ch("uponSanitizeAttribute",t,h),c=h.attrValue,h.forceKeepAttr)continue;if(!h.keepAttr){Lr(y,t);continue}if(!Ca&&Cd(/\/>/i,c)){Lr(y,t);continue}Ms&&(c=Um(c,Xt," "),c=Um(c,Cn," "),c=Um(c,fo," "));const O=Hl(t.nodeName);if(!nR(O,l,c)){Lr(y,t);continue}if(Gu&&(l==="id"||l==="name")&&(Lr(y,t),c=wn+c),Ce&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!w)switch(j.getAttributeType(O,l)){case"TrustedHTML":{c=Ce.createHTML(c);break}case"TrustedScriptURL":{c=Ce.createScriptURL(c);break}}if(c!==_)try{w?t.setAttributeNS(w,y,c):t.setAttribute(y,c)}catch{Lr(y,t)}}Ch("afterSanitizeAttributes",t,null)},vj=function Wo(t){let s;const c=$k(t);for(Ch("beforeSanitizeShadowDOM",t,null);s=c.nextNode();)Ch("uponSanitizeShadowNode",s,null),!tR(s)&&(s.content instanceof u&&Wo(s.content),t6(s));Ch("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(Wo){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,c,l,d;if(Ab=!Wo,Ab&&(Wo="<!-->"),typeof Wo!="string"&&!Fk(Wo))if(typeof Wo.toString=="function"){if(Wo=Wo.toString(),typeof Wo!="string")throw M2("dirty is not a string, aborting")}else throw M2("toString is not a function");if(!n.isSupported)return Wo;if(ju||Od(t),n.removed=[],typeof Wo=="string"&&(Wr=!1),Wr){if(Wo.nodeName){const y=Hl(Wo.nodeName);if(!zs[y]||An[y])throw M2("root node is forbidden and cannot be sanitized in-place")}}else if(Wo instanceof b)s=gm("<!---->"),c=s.ownerDocument.importNode(Wo,!0),c.nodeType===1&&c.nodeName==="BODY"||c.nodeName==="HTML"?s=c:s.appendChild(c);else{if(!Ll&&!Ms&&!Zc&&Wo.indexOf("<")===-1)return Ce&&yu?Ce.createHTML(Wo):Wo;if(s=gm(Wo),!s)return Ll?null:yu?De:""}s&&fm&&qo(s.firstChild);const g=$k(Wr?Wo:s);for(;l=g.nextNode();)tR(l)||(l.content instanceof u&&vj(l.content),t6(l));if(Wr)return Wo;if(Ll){if(Zi)for(d=Vt.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return(hn.shadowroot||hn.shadowrootmode)&&(d=Ie.call(o,d,!0)),d}let h=Zc?s.outerHTML:s.innerHTML;return Zc&&zs["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&Cd(vv,s.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+s.ownerDocument.doctype.name+`>
`+h),Ms&&(h=Um(h,Xt," "),h=Um(h,Cn," "),h=Um(h,fo," ")),Ce&&yu?Ce.createHTML(h):h},n.setConfig=function(Wo){Od(Wo),ju=!0},n.clearConfig=function(){zp=null,ju=!1},n.isValidAttribute=function(Wo,t,s){zp||Od({});const c=Hl(Wo),l=Hl(t);return nR(c,l,s)},n.addHook=function(Wo,t){typeof t=="function"&&(ot[Wo]=ot[Wo]||[],R2(ot[Wo],t))},n.removeHook=function(Wo){if(ot[Wo])return o8(ot[Wo])},n.removeHooks=function(Wo){ot[Wo]&&(ot[Wo]=[])},n.removeAllHooks=function(){ot={}},n}var MT=N2();const ta=dt.each,Vj=dt.trim,Uj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Wj={ftp:21,http:80,https:443,mailto:25},Zj=["img","video"],am=(e,n)=>Re(e)?!e:Re(n)?!He(Zj,n):!0,NT=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},dh=(e,n,o)=>{const r=NT(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?am(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Il{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=cd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!dh(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Vj(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Il(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&ta(Uj,(b,C)=>{let E=f[C];E&&(E=E.replace(/\(mce_at\)/g,"@@")),a[b]=E}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Il(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Il(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Wj[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?a+="/"+C[u]:a+=C[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];ta(u,N=>{N&&b.push(N)});const C=[];for(let N=f.length-1;N>=0;N--)if(!(f[N].length===0||f[N]===".")){if(f[N]===".."){r++;continue}if(r>0){r--;continue}C.push(f[N])}const E=b.length-r;let M;return E<=0?M=ps(C).join("/"):M=b.slice(0,E).join("/")+"/"+ps(C).join("/"),M.indexOf("/")!==0&&(M="/"+M),a&&M.lastIndexOf("/")!==M.length-1&&(M+=a),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const h8=dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),o3="data-mce-type";let ob=0;const sb=(e,n,o,r,a)=>{var u,f,b,C;const E=n.validate,M=o.getSpecialElements();e.nodeType===wl&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const N=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Re(a)&&(a.allowedTags[N]=!0);return}if(e.nodeType!==Jc||N==="body")return;const B=me.fromDom(e),j=Dr(B,o3),Q=rr(B,"data-mce-bogus");if(!j&&ee(Q)){Q==="all"?js(B):ii(B);return}const q=o.getElementRule(N);if(E&&!q){un(M,N)?js(B):ii(B);return}else Re(a)&&(a.allowedTags[N]=!0);if(E&&q&&!j){if(ye((b=q.attributesForced)!==null&&b!==void 0?b:[],te=>{Eo(B,te.name,te.value==="{$uid}"?`mce_${ob++}`:te.value)}),ye((C=q.attributesDefault)!==null&&C!==void 0?C:[],te=>{Dr(B,te.name)||Eo(B,te.name,te.value==="{$uid}"?`mce_${ob++}`:te.value)}),q.attributesRequired&&!vt(q.attributesRequired,te=>Dr(B,te))){ii(B);return}if(q.removeEmptyAttrs&&Fa(B)){ii(B);return}q.outputName&&q.outputName!==N&&eS(B,q.outputName)}},yv=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=BT(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,s3(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&yn(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):PT(e,f)&&(a.forceKeepAttr=!0)},BT=(e,n,o,r,a,u)=>o!=="html"&&!Jr(r)?!0:!(a in h8&&dh(e,u,r))&&(!e.validate||n.isValid(r,a)||yn(a,"data-")||yn(a,"aria-")),PT=(e,n)=>e.hasAttribute(o3)&&(n==="id"||n==="class"||n==="style"),s3=(e,n)=>e in n.getBoolAttrs(),LN=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,C=f.value;!BT(n,o,r,e.tagName.toLowerCase(),b,C)&&!PT(e,b)?e.removeAttribute(b):s3(b,o)&&e.setAttribute(b,b)}},p8=(e,n,o)=>{const r=MT();return r.addHook("uponSanitizeElement",(a,u)=>{sb(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{yv(a,e,n,o.current(),u)}),r},b8=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},HN=e=>{const n=S(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};MT().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};MT().sanitize(e,o)}else throw new Error("Not a namespace element")},v8=(e,n)=>{const o=L();if(e.sanitize){const r=p8(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,b8(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:HN}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=b.nextNode();){const E=o.track(C);sb(C,e,n,E),Ht(C)&&LN(C,e,n,E)}o.reset()},sanitizeNamespaceElement:Pt}},zN=dt.makeMap,VN=dt.extend,UN=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,C=f.length;b<C;b++){const E=f[b],M=new xi(E.nodeName.toLowerCase(),E.nodeType);if(Ht(E)){const N=E.attributes;for(let B=0,j=N.length;B<j;B++){const Q=N[B];M.attr(Q.name,Q.value)}Jr(M.name)&&(r(E),M.value=E.innerHTML)}else ut(E)?(M.value=E.data,u&&(M.raw=!0)):(Hc(E)||el(E)||tu(E))&&(M.value=E.data);Jr(M.name)||UN(M,E,o,r),e.append(M)}},y8=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;ye(n,b=>b(f)),xn(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];ye(o,f=>f(u))}},WN=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=VN(zN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=Ib(n),E=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,B=xe=>{let Ce=xe.parent;for(;Re(Ce);){if(Ce.name in f)return!0;Ce=Ce.parent}return!1},j=xe=>{let Ce=xe;for(;Re(Ce);){if(Ce.name in C)return rT(n,u,f,Ce);Ce=Ce.parent}return!1},Q=xe=>xe.name in b||mi(n,xe)||Jr(xe.name)&&xe.parent===e,q=(xe,Ce)=>{const De=Ce?xe.prev:xe.next;return Re(De)||xn(xe.parent)?!1:Q(xe.parent)&&(xe.parent!==e||r.isRootContent===!0)};return[xe=>{var Ce;if(xe.type===3&&!B(xe)){let De=(Ce=xe.value)!==null&&Ce!==void 0?Ce:"";De=De.replace(E," "),(cl(xe.prev,Q)||q(xe,!0))&&(De=De.replace(M,"")),De.length===0?xe.remove():xe.value=De}},xe=>{var Ce;if(xe.type===1){const De=n.getElementRule(xe.name);if(a&&De){const ct=rT(n,u,f,xe);De.paddInEmptyBlock&&ct&&j(xe)?sT(o,r,Q,xe):De.removeEmpty&&ct?Q(xe)?xe.remove():xe.unwrap():De.paddEmpty&&(ct||hL(xe))&&sT(o,r,Q,xe)}}else if(xe.type===3&&!B(xe)){let De=(Ce=xe.value)!==null&&Ce!==void 0?Ce:"";(xe.next&&Q(xe.next)||q(xe,!1))&&(De=De.replace(N,"")),De.length===0?xe.remove():xe.value=De}}]},C8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Kf=(e={},n=Ud())=>{const o=ST(),r=ST(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=v8(a,n),b=(Ce,De,ct="html")=>{const Tt=ct==="xhtml"?"application/xhtml+xml":"text/html",Vt=un(n.getSpecialElements(),De.toLowerCase()),Ze=Vt?`<${De}>${Ce}</${De}>`:Ce,Ie=ct==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ze}</body></html>`:`<body>${Ze}</body>`,ot=u.parseFromString(Ie,Tt).body;return f.sanitizeHtmlElement(ot,Tt),Vt?ot.firstChild:ot},C=o.addFilter,E=o.getFilters,M=o.removeFilter,N=r.addFilter,B=r.getFilters,j=r.removeFilter,Q=(Ce,De)=>{GM(n,Ce)&&De.push(Ce)},q=(Ce,De)=>{const ct=ee(De.attr(o3)),Tt=De.type===1&&!un(Ce,De.name)&&!mi(n,De)&&!Jr(De.name);return De.type===3||Tt&&!ct},te=(Ce,De)=>{const ct=VN(zN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Tt=/^[ \t\r\n]+/,Vt=/[ \t\r\n]+$/;let Ze=Ce.firstChild,Ie=null;const ot=Xt=>{var Cn,fo;Xt&&(Ze=Xt.firstChild,Ze&&Ze.type===3&&(Ze.value=(Cn=Ze.value)===null||Cn===void 0?void 0:Cn.replace(Tt,"")),Ze=Xt.lastChild,Ze&&Ze.type===3&&(Ze.value=(fo=Ze.value)===null||fo===void 0?void 0:fo.replace(Vt,"")))};if(n.isValidChild(Ce.name,De.toLowerCase())){for(;Ze;){const Xt=Ze.next;q(ct,Ze)?(Ie||(Ie=new xi(De,1),Ie.attr(a.forced_root_block_attrs),Ce.insert(Ie,Ze)),Ie.append(Ze)):(ot(Ie),Ie=null),Ze=Xt}ot(Ie)}},xe={schema:n,addAttributeFilter:N,getAttributeFilters:B,removeAttributeFilter:j,addNodeFilter:C,getNodeFilters:E,removeNodeFilter:M,parse:(Ce,De={})=>{var ct;const Tt=a.validate,Vt=(ct=De.context)!==null&&ct!==void 0?ct:a.root_name,Ze=b(Ce,Vt,De.format);dr(n,Ze);const Ie=new xi(Vt,11);UN(Ie,Ze,n.getSpecialElements(),f.sanitizeNamespaceElement),Ze.innerHTML="";const[ot,Xt]=WN(Ie,n,a,De),Cn=[],fo=Tt?nc=>Q(nc,Cn):Pt,Lo={nodes:{},attributes:{}},ks=nc=>m4(E(),B(),nc,Lo);if(y8(Ie,[ot,ks],[Xt,fo]),Cn.reverse(),Tt&&Cn.length>0)if(De.context){const{pass:nc,fail:ja}=vo(Cn,zs=>zs.parent===Ie);Hm(ja,n,Ie,ks),De.invalid=nc.length>0}else Hm(Cn,n,Ie,ks);const Ks=C8(a,De);return Ks&&(Ie.name==="body"||De.isRootContent)&&te(Ie,Ks),De.invalid||jM(Lo,De),Ie}};return AN(xe,a),YL(xe,a,n),xe},ZN=e=>Ls(e)?sh({validate:!1}).serialize(e):e,jN=(e,n,o)=>{const r=ZN(e),a=n(r);if(a.isDefaultPrevented())return a;if(Ls(e))if(a.content!==r){const u=Kf({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},r3=e=>({sanitize:S0(e),sandbox_iframes:x0(e),sandbox_iframes_exclusions:T0(e)}),GN=(e,n)=>{if(n.no_events)return Rl.value(n);{const o=wx(e,n);return o.isDefaultPrevented()?Rl.error(WC(e,{content:"",...o}).content):Rl.value(o)}},c3=(e,n,o)=>o.no_events?n:jN(n,a=>WC(e,{...o,content:a}),r3(e)).content,a3=(e,n)=>{if(n.no_events)return Rl.value(n);{const o=jN(n.content,r=>J0(e,{...n,content:r}),r3(e));return o.isDefaultPrevented()?(Q0(e,o),Rl.error(void 0)):Rl.value(o)}},l3=(e,n,o)=>{o.no_events||Q0(e,{...o,content:n})},$T=(e,n,o)=>({element:e,width:n,rows:o}),i3=(e,n)=>({element:e,cells:n}),qN=(e,n)=>({x:e,y:n}),u3=(e,n)=>Pr(e,n).bind(fc).getOr(1),KN=(e,n,o,r,a)=>{const u=u3(a,"rowspan"),f=u3(a,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=i3(Wh(r),[]));for(let E=n;E<n+f;E++){const M=b[C].cells;M[E]=C===o&&E===n?a:ud(a)}}},YN=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},w8=(e,n,o)=>{for(;YN(e,n,o);)n++;return n},XN=e=>jn(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),JN=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(ls(a[u],n))return I.some(qN(u,r))}return I.none()},FT=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const C=f[b].cells,E=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(i3(f[b].element,E))}return u},B2=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?FT(e,r,a,u,f):FT(e,r,f,u,a);return $T(e.element,XN(b),b)},QN=(e,n)=>{const o=ud(e.element),r=me.fromTag("tbody");return _u(r,n),xr(o,r),o},eB=e=>je(e.rows,n=>{const o=je(n.cells,a=>{const u=Wh(a);return Or(u,"colspan"),Or(u,"rowspan"),u}),r=ud(n.element);return _u(r,o),r}),IT=e=>{const n=$T(ud(e),0,[]);return ye(Vr(e,"tr"),(o,r)=>{ye(Vr(o,"td,th"),(a,u)=>{KN(n,w8(n,u,r),r,o,a)})}),$T(n.element,XN(n.rows),n.rows)},S8=e=>QN(e,eB(e)),x8=(e,n,o)=>JN(e,n).bind(r=>JN(e,o).map(a=>B2(e,r,a))),rb=e=>Vo(e,n=>No(n)==="ul"||No(n)==="ol"),d3=(e,n)=>Vo(e,o=>No(o)==="li"&&H0(o,n)).fold(rt([]),o=>rb(e).map(r=>{const a=me.fromTag(No(r)),u=Jo(La(r),(f,b)=>yn(b,"list-style"));return to(a,u),[me.fromTag("li"),a]}).getOr([])),tB=(e,n)=>{const o=jn(n,(r,a)=>(xr(a,r),a),e);return n.length>0?Pn([o]):o},P2=e=>Jl(e)?ua(e).filter(dd).fold(rt([]),n=>[e,n]):dd(e)?[e]:[],nB=(e,n,o)=>{const r=me.fromDom(n.commonAncestorContainer),a=rh(r,e),u=Lt(a,C=>o.isWrapper(No(C))),f=d3(a,n),b=u.concat(f.length?f:P2(r));return je(b,ud)},LT=()=>Pn([]),oB=(e,n,o)=>tB(me.fromDom(n.cloneContents()),nB(e,n,o)),sB=(e,n)=>cc(n,"table",Ke(ls,e)),T8=(e,n)=>sB(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=IT(o);return x8(u,r,a).map(f=>Pn([S8(f)]))}).getOrThunk(LT),E8=(e,n,o)=>n.length>0&&n[0].collapsed?LT():oB(e,n[0],o),k8=(e,n,o)=>{const r=Lf(n,e);return r.length>0?T8(e,r):E8(e,n,o)},Cv=(e,n)=>n>=0&&n<e.length&&Jg(e.charAt(n)),rB=e=>vi(e.innerText),cB=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),_8=e=>I.from(e.selection.getRng()).map(n=>{var o;const r=I.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=cB(r),f=me.fromDom(n.cloneContents());ZR(f),jR(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=rB(b),E=vi((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),Cv(E,0)||Cv(E,E.length-1)){const M=r.getOr(a),N=rB(M),B=N.indexOf(C);if(B===-1)return C;{const j=Cv(N,B-1),Q=Cv(N,B+C.length);return(j?" ":"")+C+(Q?" ":"")}}else return C}).getOr(""),A8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=cv(e,L0(a)),f=n.contextual?k8(me.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},O8=(e,n)=>{if(n.format==="text")return _8(e);{const o=A8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},D8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),R8=(e,n,o={})=>{const r=D8(o,n);return GN(e,r).fold(Ho,a=>{const u=O8(e,a);return c3(e,u,a)})},m3=0,aB=1,lB=2,M8=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(M,N,B)=>({start:M,end:N,diag:B}),f=(M,N,B,j,Q)=>{const q=C(M,N,B,j);if(q===null||q.start===N&&q.diag===N-j||q.end===M&&q.diag===M-B){let te=M,ve=B;for(;te<N||ve<j;)te<N&&ve<j&&e[te]===n[ve]?(Q.push([m3,e[te]]),++te,++ve):N-M>j-B?(Q.push([lB,e[te]]),++te):(Q.push([aB,n[ve]]),++ve)}else{f(M,q.start,B,q.start-q.diag,Q);for(let te=q.start;te<q.end;++te)Q.push([m3,e[te]]);f(q.end,N,q.end-q.diag,j,Q)}},b=(M,N,B,j)=>{let Q=M;for(;Q-N<j&&Q<B&&e[Q]===n[Q-N];)++Q;return u(M,Q,N)},C=(M,N,B,j)=>{const Q=N-M,q=j-B;if(Q===0||q===0)return null;const te=Q-q,ve=q+Q,xe=(ve%2===0?ve:ve+1)/2;r[1+xe]=M,a[1+xe]=N+1;let Ce,De,ct,Tt,Vt;for(Ce=0;Ce<=xe;++Ce){for(De=-Ce;De<=Ce;De+=2){for(ct=De+xe,De===-Ce||De!==Ce&&r[ct-1]<r[ct+1]?r[ct]=r[ct+1]:r[ct]=r[ct-1]+1,Tt=r[ct],Vt=Tt-M+B-De;Tt<N&&Vt<j&&e[Tt]===n[Vt];)r[ct]=++Tt,++Vt;if(te%2!==0&&te-Ce<=De&&De<=te+Ce&&a[ct-te]<=r[ct])return b(a[ct-te],De+M-B,N,j)}for(De=te-Ce;De<=te+Ce;De+=2){for(ct=De+xe-te,De===te-Ce||De!==te+Ce&&a[ct+1]<=a[ct-1]?a[ct]=a[ct+1]-1:a[ct]=a[ct-1],Tt=a[ct]-1,Vt=Tt-M+B-De;Tt>=M&&Vt>=B&&e[Tt]===n[Vt];)a[ct]=Tt--,Vt--;if(te%2===0&&-Ce<=De&&De<=Ce&&a[ct]<=r[ct+te])return b(a[ct],De+M-B,N,j)}}return null},E=[];return f(0,e.length,0,n.length,E),E},$2=e=>Ht(e)?e.outerHTML:ut(e)?cd.encodeRaw(e.data,!1):Hc(e)?"<!--"+e.data+"-->":"",ni=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},N8=(e,n,o)=>{const r=ni(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},HT=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},cb=(e,n)=>{let o=0;ye(e,r=>{r[0]===m3?o++:r[0]===aB?(N8(n,r[1],o),o++):r[0]===lB&&HT(n,o)})},iB=(e,n)=>Lt(je(gr(e.childNodes),A(vi,$2)),o=>o.length>0),bu=(e,n)=>{const o=je(gr(n.childNodes),$2);return cb(M8(o,e),n),n},ab=ze(()=>document.implementation.createHTMLDocument("undo")),uB=e=>e.querySelector("iframe")!==null,B8=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),dB=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),zT=e=>{const n=e.serializer.getTempAttrs(),o=IA(e.getBody(),n);return uB(o)?B8(iB(o)):dB(vi(o.innerHTML))},VT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?bu(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Re(r)&&lx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},lb=e=>e.type==="fragmented"?e.fragments.join(""):e.content,UT=e=>{const n=me.fromTag("body",ab());return Au(n,lb(e)),ye(Vr(n,"*[data-mce-bogus]"),ii),ar(n)},P8=(e,n)=>lb(e)===lb(n),mB=(e,n)=>UT(e)===UT(n),f3=(e,n)=>!e||!n?!1:P8(e,n)?!0:mB(e,n),F2=e=>e.get()===0,wv=(e,n,o)=>{F2(o)&&(e.typing=n)},fB=(e,n)=>{e.typing&&(wv(e,!1,n),e.add())},$8=e=>{e.typing&&(e.typing=!1,e.add())},Yf=(e,n,o)=>{F2(n)&&o.set(Uy(e.selection))},g3=(e,n,o,r,a,u,f)=>{const b=zT(e),C=dt.extend(u||{},b);if(!F2(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&f3(E,C))return null;n.data[o.get()]&&a.get().each(B=>{n.data[o.get()].beforeBookmark=B});const M=A_(e);if(M&&n.data.length>M){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}C.bookmark=Uy(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const N={level:C,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",N),e.dispatch("change",N)):e.dispatch("AddUndo",N),C},F8=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},WT=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];VT(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},h3=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],VT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},gB=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,wv(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],VT(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},hB=e=>{e.clear(),e.add()},pB=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!f3(zT(e),n.data[0]),I8=(e,n)=>n.get()<e.data.length-1&&!e.typing,L8=(e,n,o)=>(fB(e,n),e.beforeChange(),e.ignore(o),e.add()),H8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},z8=(e,n)=>{const o=e.dom,r=Re(n)?n:e.getBody();ye(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=aC(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,C=lC(e);b&&e.hasVisual?o.addClass(a,C):o.removeClass(a,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},bB=e=>({init:{bindEvents:Pt},undoManager:{beforeChange:(n,o)=>Yf(e,n,o),add:(n,o,r,a,u,f)=>g3(e,n,o,r,a,u,f),undo:(n,o,r)=>gB(e,n,o,r),redo:(n,o)=>h3(e,n,o),clear:(n,o)=>F8(e,n,o),reset:n=>hB(n),hasUndo:(n,o)=>pB(e,n,o),hasRedo:(n,o)=>I8(n,o),transact:(n,o,r)=>L8(n,o,r),ignore:(n,o)=>H8(n,o),extra:(n,o,r,a)=>WT(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>x4(e,n,o,r,a),matchAll:(n,o)=>RL(e,n,o),matchNode:(n,o,r,a)=>qf(e,n,o,r,a),canApply:n=>NL(e,n),closest:n=>ML(e,n),apply:(n,o,r)=>W4(e,n,o,r),remove:(n,o,r,a)=>z4(e,n,o,r,a),toggle:(n,o,r)=>Bc(e,n,o,r),formatChanged:(n,o,r,a,u)=>Z4(e,n,o,r,a,u)},editor:{getContent:n=>N6(e,n),setContent:(n,o)=>y4(e,n,o),insertContent:(n,o)=>DL(e,n,o),addVisual:n=>z8(e,n)},selection:{getContent:(n,o)=>R8(e,n,o)},autocompleter:{addDecoration:Pt,removeDecoration:Pt},raw:{getModel:()=>I.none()}}),vB=e=>{const n=E=>st(E)?E:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,M,N)=>r.transact(N),ignore:(E,M)=>r.ignore(M),extra:(E,M,N,B)=>r.extra(N,B)},formatter:{match:(E,M,N,B)=>a.match(E,n(M),B),matchAll:a.matchAll,matchNode:a.matchNode,canApply:E=>a.canApply(E),closest:E=>a.closest(E),apply:(E,M,N)=>a.apply(E,n(M)),remove:(E,M,N,B)=>a.remove(E,n(M)),toggle:(E,M,N)=>a.toggle(E,n(M)),formatChanged:(E,M,N,B,j)=>a.formatChanged(M,N,B,j)},editor:{getContent:E=>u.getContent(E),setContent:(E,M)=>({content:u.setContent(E,M),html:""}),insertContent:(E,M)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>I.some(C.getRawModel())}}},V8=()=>{const e=rt(null),n=rt("");return{init:{bindEvents:Pt},undoManager:{beforeChange:Pt,add:e,undo:e,redo:e,clear:Pt,reset:Pt,hasUndo:Me,hasRedo:Me,transact:e,ignore:Pt,extra:Pt},formatter:{match:Me,matchAll:rt([]),matchNode:rt(void 0),canApply:Me,closest:n,apply:Pt,remove:Pt,toggle:Pt,formatChanged:rt({unbind:Pt})},editor:{getContent:n,setContent:rt({content:"",html:""}),insertContent:rt(""),addVisual:Pt},selection:{getContent:n},autocompleter:{addDecoration:Pt,removeDecoration:Pt},raw:{getModel:rt(I.none())}}},Xf=e=>un(e.plugins,"rtc"),U8=e=>os(e.plugins,"rtc").bind(n=>I.from(n.setup)),yB=e=>{const n=e;return U8(e).fold(()=>(n.rtcInstance=bB(e),I.none()),o=>(n.rtcInstance=V8(),I.some(()=>o().then(r=>(n.rtcInstance=vB(r),r.rtc.isRemote)))))},I2=e=>e.rtcInstance?e.rtcInstance:bB(e),na=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},CB=(e,n,o)=>{na(e).undoManager.beforeChange(n,o)},p3=(e,n,o,r,a,u,f)=>na(e).undoManager.add(n,o,r,a,u,f),wB=(e,n,o,r)=>na(e).undoManager.undo(n,o,r),SB=(e,n,o)=>na(e).undoManager.redo(n,o),b3=(e,n,o)=>{na(e).undoManager.clear(n,o)},xB=(e,n)=>{na(e).undoManager.reset(n)},TB=(e,n,o)=>na(e).undoManager.hasUndo(n,o),EB=(e,n,o)=>na(e).undoManager.hasRedo(n,o),W8=(e,n,o,r)=>na(e).undoManager.transact(n,o,r),v3=(e,n,o)=>{na(e).undoManager.ignore(n,o)},Z8=(e,n,o,r,a)=>{na(e).undoManager.extra(n,o,r,a)},ZT=(e,n,o,r,a)=>na(e).formatter.match(n,o,r,a),j8=(e,n,o)=>na(e).formatter.matchAll(n,o),G8=(e,n,o,r,a)=>na(e).formatter.matchNode(n,o,r,a),q8=(e,n)=>na(e).formatter.canApply(n),kB=(e,n)=>na(e).formatter.closest(n),_B=(e,n,o,r)=>{na(e).formatter.apply(n,o,r)},K8=(e,n,o,r,a)=>{na(e).formatter.remove(n,o,r,a)},Y8=(e,n,o,r)=>{na(e).formatter.toggle(n,o,r)},X8=(e,n,o,r,a,u)=>na(e).formatter.formatChanged(n,o,r,a,u),J8=(e,n)=>I2(e).editor.getContent(n),Q8=(e,n,o)=>I2(e).editor.setContent(n,o),AB=(e,n,o)=>I2(e).editor.insertContent(n,o),jj=(e,n,o)=>na(e).selection.getContent(n,o),e7=(e,n)=>na(e).editor.addVisual(n),OB=e=>na(e).init.bindEvents(),t7=(e,n={})=>{const o=n.format?n.format:"html";return jj(e,o,n)},DB=e=>e.dom.length===0?(js(e),I.none()):I.some(e),n7=(e,n)=>e.filter(o=>Vf.isBookmarkNode(o.dom)).bind(n?ai:Sl),o7=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(YA(u,f,a,!1,!r),o.setStart(f,b)):(YA(f,u,a,!1,!r),o.setEnd(f,b))},s7=(e,n,o)=>{ua(e).each(r=>{const a=e.dom;n&&c2(r,Fe(a,0),o)?l2(a,0,o):!n&&a2(r,Fe(a,a.length),o)&&KA(a,a.length,o)})},y3=(e,n,o,r,a)=>{e.bind(u=>((r?KA:l2)(u.dom,r?u.dom.length:0,a),n.filter(Be).map(b=>o7(u,b,o,r,a)))).orThunk(()=>n7(n,r).or(n).filter(Be).map(f=>s7(f,r,a)))},r7=(e,n,o)=>{const r=I.from(n.firstChild).map(me.fromDom),a=I.from(n.lastChild).map(me.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Sl).filter(Be).bind(DB),f=a.bind(ai).filter(Be).bind(DB);y3(u,r,e,!0,o),y3(f,a,e,!1,o),e.collapse(!1)},c7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),a7=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return sh({validate:!1},e.schema).serialize(u)}else return n.content},l7=(e,n,o={})=>{const r=c7(o,n);a3(e,r).each(a=>{const u=a7(e,a),f=e.selection.getRng();r7(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),t2(e,f),l3(e,u,a)})},RB=(e,n,o)=>{if(un(e,n)){const r=Lt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var Gj=(e,n)=>{let o,r;const a=(b,C)=>Vo(C,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,E=u(C),M={};ht(o,(N,B)=>{a(B,E).each(j=>{r[B]||(ye(N,Q=>{Q(!0,{node:j,selector:B,parents:E})}),r[B]=N),M[B]=N})}),ht(r,(N,B)=>{M[B]||(delete r[B],ye(N,j=>{j(!1,{node:C,selector:B,parents:E})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{RB(o,b,C),RB(r,b,C)}})}};const i7=e=>!!(e&&e.ownerDocument)&&Ta(me.fromDom(e.ownerDocument),me.fromDom(e)),u7=e=>e?i7(e.startContainer)&&i7(e.endContainer):!1,MB=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=Gj(e,r),b=(Ot,hn)=>{const ds=e.createRng();Re(Ot)&&Re(hn)?(ds.setStart(Ot,hn),ds.setEnd(Ot,hn),De(ds),ve(!1)):(PC(e,ds,r.getBody(),!0),De(ds))},C=Ot=>t7(r,Ot),E=(Ot,hn)=>l7(r,Ot,hn),M=Ot=>PA(r.getBody(),Ce(),Ot),N=Ot=>$A(r.getBody(),Ce(),Ot),B=(Ot,hn)=>ja.getBookmark(Ot,hn),j=Ot=>ja.moveToBookmark(Ot),Q=(Ot,hn)=>(x6(e,Ot,hn).each(De),Ot),q=()=>{const Ot=Ce(),hn=xe();return!Ot||Ot.item?!1:Ot.compareEndPoints?Ot.compareEndPoints("StartToEnd",Ot)===0:!hn||Ot.collapsed},te=()=>{const Ot=Ce(),hn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return hn.length>0?Bs(hn,ds=>e.isEditable(ds.parentElement)):PR(e,Ot)},ve=Ot=>{const hn=Ce();hn.collapse(!!Ot),De(hn)},xe=()=>n.getSelection?n.getSelection():n.document.selection,Ce=()=>{let Ot;const hn=($t,An,_o)=>{try{return An.compareBoundaryPoints($t,_o)}catch{return-1}},ds=n.document;if(Re(r.bookmark)&&!U1(r)){const $t=$x(r);if($t.isSome())return $t.map(An=>cv(r,[An])[0]).getOr(ds.createRange())}try{const $t=xe();$t&&!Fd($t.anchorNode)&&($t.rangeCount>0?Ot=$t.getRangeAt(0):Ot=ds.createRange(),Ot=cv(r,[Ot])[0])}catch{}if(Ot||(Ot=ds.createRange()),mf(Ot.startContainer)&&Ot.collapsed){const $t=e.getRoot();Ot.setStart($t,0),Ot.setEnd($t,0)}return a&&u&&(hn(Ot.START_TO_START,Ot,a)===0&&hn(Ot.END_TO_END,Ot,a)===0?Ot=u:(a=null,u=null)),Ot},De=(Ot,hn)=>{if(!u7(Ot))return;const ds=xe();if(Ot=r.dispatch("SetSelectionRange",{range:Ot,forward:hn}).range,ds){u=Ot;try{ds.removeAllRanges(),ds.addRange(Ot)}catch{}hn===!1&&ds.extend&&(ds.collapse(Ot.endContainer,Ot.endOffset),ds.extend(Ot.startContainer,Ot.startOffset)),a=ds.rangeCount>0?ds.getRangeAt(0):null}if(!Ot.collapsed&&Ot.startContainer===Ot.endContainer&&(ds!=null&&ds.setBaseAndExtent)&&Ot.endOffset-Ot.startOffset<2&&Ot.startContainer.hasChildNodes()){const An=Ot.startContainer.childNodes[Ot.startOffset];An&&An.nodeName==="IMG"&&(ds.setBaseAndExtent(Ot.startContainer,Ot.startOffset,Ot.endContainer,Ot.endOffset),(ds.anchorNode!==Ot.startContainer||ds.focusNode!==Ot.endContainer)&&ds.setBaseAndExtent(An,0,An,1))}r.dispatch("AfterSetSelectionRange",{range:Ot,forward:hn})},ct=Ot=>(E(e.getOuterHTML(Ot)),Ot),Tt=()=>w6(r.getBody(),Ce()),Vt=(Ot,hn)=>S6(e,Ce(),Ot,hn),Ze=()=>{const Ot=xe(),hn=Ot==null?void 0:Ot.anchorNode,ds=Ot==null?void 0:Ot.focusNode;if(!Ot||!hn||!ds||Fd(hn)||Fd(ds))return!0;const $t=e.createRng(),An=e.createRng();try{$t.setStart(hn,Ot.anchorOffset),$t.collapse(!0),An.setStart(ds,Ot.focusOffset),An.collapse(!0)}catch{return!0}return $t.compareBoundaryPoints($t.START_TO_START,An)<=0},nc={dom:e,win:n,serializer:o,editor:r,expand:(Ot={type:"word"})=>De(at(e).expand(Ce(),Ot)),collapse:ve,setCursorLocation:b,getContent:C,setContent:E,getBookmark:B,moveToBookmark:j,select:Q,isCollapsed:q,isEditable:te,isForward:Ze,setNode:ct,getNode:Tt,getSel:xe,setRng:De,getRng:Ce,getStart:M,getEnd:N,getSelectedBlocks:Vt,normalize:()=>{const Ot=Ce(),hn=xe();if(!Y_(hn)&&$C(r)){const ds=Rt(e,Ot);return ds.each($t=>{De($t,Ze())}),ds.getOr(Ot)}return Ot},selectorChanged:(Ot,hn)=>(f(Ot,hn),nc),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Ot,hn=e.getRoot();for(;hn&&hn.nodeName!=="BODY";){if(hn.scrollHeight>hn.clientHeight){Ot=hn;break}hn=hn.parentNode}return Ot},scrollIntoView:(Ot,hn)=>{Re(Ot)?i6(r,Ot,hn):t2(r,Ce(),hn)},placeCaretAt:(Ot,hn)=>De(p(Ot,hn,r.getDoc())),getBoundingClientRect:()=>{const Ot=Ce();return Ot.collapsed?Fe.fromRangeStart(Ot).getClientRects()[0]:Ot.getBoundingClientRect()},destroy:()=>{n=a=u=null,zs.destroy()}},ja=Vf(nc),zs=F1(nc,r);return nc.bookmarkManager=ja,nc.controlSelection=zs,nc},qj=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=dt.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const E=M=>M.name in f||mi(o,M);for(let M=0,N=r.length;M<N;M++){let B=r[M],j=B.parent;if(j&&E(j)&&B===j.lastChild){let Q=B.prev;for(;Q;){const q=Q.name;if(q!=="span"||Q.attr("data-mce-type")!=="bookmark"){q==="br"&&(B=null);break}Q=Q.prev}if(B&&(B.remove(),rT(o,b,C,j))){const q=o.getElementRule(j.name);q&&(q.removeEmpty?j.remove():q.paddEmpty&&sT(e,u,E,j))}}else{let Q=B;for(;j&&j.firstChild===Q&&j.lastChild===Q&&(Q=j,!f[j.name]);)j=j.parent;if(Q===j){const q=new xi("#text",3);q.value=Ac,B.replace(q)}}}})},d7=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const E=r[C];let M=E.attr(u);M!==void 0?(E.attr(a,M.length>0?M:null),E.attr(u,null)):(M=E.attr(a),a==="style"?M=o.serializeStyle(o.parseStyle(M),E.name):f&&(M=f.call(b,M,a,E.name)),E.attr(a,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(I.from(b.firstChild).exists(E=>{var M;return!Bg((M=E.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],E=C.firstChild,M=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(a==="script"){const N=C.attr("type");N&&C.attr("type",N==="mce-no/type"?null:N.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ye(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&qj(n,e,e.schema)},ic=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},C3=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");dt.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return aA(e,{...o,node:u}),r&&(a.doc=r),u},Kj=(e,n)=>Re(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,m7=(e,n,o)=>Kj(e,o)?C3(e,n,o):n,f7=(e,n,o)=>{dt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},Sv=(e,n,o)=>!n.no_events&&e?q0(e,{...n,content:o}).content:o,Yj=(e,n,o)=>{const r=vi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||l1(me.fromDom(n))?r:dt.trim(r)},Xj=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return ic(a),a},bl=(e,n,o)=>sh(e,n).serialize(o),NB=(e,n,o,r,a)=>{const u=bl(n,o,r);return Sv(e,a,u)},BB=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:kr.DOM,u=n&&n.schema?n.schema:Ud(r),f=Kf(r,u);d7(f,r,a);const b=(C,E={})=>{const M={format:"html",...E},N=m7(n,C,M),B=Yj(a,N,M),j=Xj(f,B,M);return M.format==="tree"?j:NB(n,r,u,j,M)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ke(f7,f,o),getTempAttrs:rt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},w3=(e,n)=>{const o=BB(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},g7="html",h7=(e,n)=>({...e,format:n,get:!0,getInner:!0}),jT=(e,n={})=>{const o=n.format?n.format:g7,r=h7(n,o);return GN(e,r).fold(Ho,a=>{const u=J8(e,a);return c3(e,u,a)})},p7="html",S3=(e,n)=>({format:p7,...e,set:!0,content:n}),x3=(e,n,o={})=>{const r=S3(o,n);return a3(e,r).map(a=>{const u=Q8(e,a.content,a);return l3(e,u.html,a),u.content}).getOr(n)},PB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),$B=[],T3="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),E3=[],GT=(e,n)=>{const o=Lt(n,r=>un(e,r));return ns(o)},b7=e=>{const n=GT(e,PB),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),ns(n)},v7=e=>GT(e,$B),FB=(e,n)=>{const o=dt.makeMap(e.plugins," "),a=Lt(n,u=>un(o,u));return ns(a)},wd=e=>FB(e,T3),y7=e=>FB(e,E3.map(n=>n.name)),C7=(e,n)=>{const o=b7(e),r=wd(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",E=a?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+E+M)}},w7=e=>Vo(E3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),S7=(e,n)=>{const o=v7(e),r=y7(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(w7).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},x7=(e,n)=>{C7(e,n),S7(e,n)},L2=kr.DOM,T7=e=>{L2.setStyle(e.id,"display",e.orgDisplay)},qT=e=>I.from(e).each(n=>n.destroy()),E7=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},KT=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),L2.unbind(n,"submit reset",e.formEventDelegate))},k7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Re(a==null?void 0:a.nextSibling)&&L2.remove(a.nextSibling),K0(e),e.editorManager.remove(e),!e.inline&&r&&T7(e),lA(e),L2.remove(e.getContainer()),qT(n),qT(o),e.destroy()}},_7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),qT(o),qT(r)),KT(e),E7(e),e.destroyed=!0}},xv=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>un(e,a)}})(),Tv=Ol.ModelManager,IB=(e,n)=>n.dom[e],O7=(e,n)=>parseInt($r(n,e),10),D7=Ke(IB,"clientWidth"),H2=Ke(IB,"clientHeight"),LB=Ke(O7,"margin-top"),HB=Ke(O7,"margin-left"),R7=e=>e.dom.getBoundingClientRect(),zB=(e,n,o)=>{const r=D7(e),a=H2(e);return n>=0&&o>=0&&n<=r&&o<=a},M7=(e,n,o,r)=>{const a=R7(n),u=e?a.left+n.dom.clientLeft+HB(n):0,f=e?a.top+n.dom.clientTop+LB(n):0,b=o-u,C=r-f;return{x:b,y:C}},N7=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.inline?r:Qu(r),u=M7(e.inline,a,n,o);return zB(a,u.x,u.y)},B7=e=>I.from(e).map(me.fromDom),P7=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return B7(n).map(Ji).getOr(!1)};var VB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const UB=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():VB()},r=()=>I.from(n[0]),a=(B,j)=>B.type===j.type&&B.text===j.text&&!B.progressBar&&!B.timeout&&!j.progressBar&&!j.timeout,u=()=>{r().each(B=>{B.reposition()})},f=B=>{n.push(B)},b=B=>{xs(n,j=>j===B).each(j=>{n.splice(j,1)})},C=(B,j=!0)=>e.removed||!P7(e)?{}:(j&&e.dispatch("BeforeOpenNotification",{notification:B}),Vo(n,Q=>a(o().getArgs(Q),B)).getOrThunk(()=>{e.editorManager.setActive(e);const Q=o().open(B,()=>{b(Q)},()=>o2(e));return f(Q),u(),e.dispatch("OpenNotification",{notification:{...Q}}),Q})),E=()=>{r().each(B=>{o().close(B),b(B),u()})},M=rt(n);return(B=>{B.on("SkinLoaded",()=>{const j=Ml(B);j&&C({text:j,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{ye(n.slice(),j=>{o().close(j)})}),B.addShortcut("alt+F12","Focus to notification",()=>r().map(j=>me.fromDom(j.getEl())).each(j=>sv(j)))})(e),{open:C,close:E,getNotifications:M}},Ev=Ol.PluginManager,Wm=Ol.ThemeManager;var WB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const k3=e=>{let n=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():WB()},r=(q,te)=>(...ve)=>te?te.apply(q,ve):void 0,a=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=q=>{n.push(q),a(q)},b=q=>{u(q),n=Lt(n,te=>te!==q),n.length===0&&e.focus()},C=()=>I.from(n[n.length-1]),E=q=>{e.editorManager.setActive(e),n2(e),e.ui.show();const te=q();return f(te),te},M=(q,te)=>E(()=>o().open(q,te,b)),N=q=>E(()=>o().openUrl(q,b)),B=(q,te,ve)=>{const xe=o();xe.alert(q,r(ve||xe,te))},j=(q,te,ve)=>{const xe=o();xe.confirm(q,r(ve||xe,te))},Q=()=>{C().each(q=>{o().close(q),b(q)})};return e.on("remove",()=>{ye(n,q=>{o().close(q)})}),{open:M,openUrl:N,alert:B,confirm:j,close:Q}},ZB=(e,n)=>{e.notificationManager.open({type:"error",text:n})},YT=(e,n)=>{e._skinLoaded?ZB(e,n):e.on("SkinLoaded",()=>{ZB(e,n)})},$7=(e,n)=>{YT(e,ga.translate(["Failed to upload image: {0}",n]))},kv=(e,n,o)=>{Va(e,n,{message:o}),console.error(o)},z2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,F7=(e,n,o)=>{kv(e,"PluginLoadError",z2("plugin",n,o))},I7=(e,n,o)=>{kv(e,"IconsLoadError",z2("icons",n,o))},L7=(e,n,o)=>{kv(e,"LanguageLoadError",z2("language",n,o))},Jj=(e,n,o)=>{kv(e,"ThemeLoadError",z2("theme",n,o))},Zm=(e,n,o)=>{kv(e,"ModelLoadError",z2("model",n,o))},_3=(e,n,o)=>{const r=ga.translate(["Failed to initialize plugin: {0}",n]);Va(e,"PluginLoadError",{message:r}),XT(r,o),YT(e,r)},XT=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},H7=e=>/^[a-z0-9\-]+$/i.test(e),A3=e=>"content/"+e+"/content.css",z7=e=>tinymce.Resource.has(A3(e)),Hs=e=>_v(e,zg(e)),V7=e=>_v(e,Ql(e)),_v=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return je(n,u=>z7(u)?u:H7(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},U7=e=>{e.contentCSS=e.contentCSS.concat(Hs(e),V7(e))},W7=e=>e?gr(e.getElementsByTagName("img")):[],Z7=(e,n)=>{const o={};return{findAll:(a,u=Je)=>{const f=Lt(W7(a),C=>{const E=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!E||E===St.transparentSrc?!1:yn(E,"blob:")?!e.isUploaded(E)&&u(C):yn(E,"data:")?u(C):!1}),b=je(f,C=>{const E=C.src;if(un(o,E))return o[E].then(M=>ee(M)?M:{image:C,blobInfo:M.blobInfo});{const M=ET(n,E).then(N=>(delete o[E],{image:C,blobInfo:N})).catch(N=>(delete o[E],N));return o[E]=M,M}});return Promise.all(b)}}},O3=()=>{let o={};const r=(B,j)=>({status:B,resultUri:j}),a=B=>B in o;return{hasBlobUri:a,getResultUri:B=>{const j=o[B];return j?j.resultUri:null},isPending:B=>a(B)?o[B].status===1:!1,isUploaded:B=>a(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,j)=>{o[B]=r(2,j)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let Dp=0;const Vi=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},V2=e=>e+Dp+++Vi(),Rp=()=>{let e=[];const n=N=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[N.toLowerCase()]||"dat",o=(N,B,j,Q,q)=>{if(ee(N))return r({id:N,name:Q,filename:q,blob:B,base64:j});if(st(N))return r(N);throw new Error("Unknown input type")},r=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=N.id||V2("blobid"),j=N.name||B,Q=N.blob;return{id:rt(B),name:rt(j),filename:rt(N.filename||j+"."+n(Q.type)),blob:rt(Q),base64:rt(N.base64),blobUri:rt(N.blobUri||URL.createObjectURL(Q)),uri:rt(N.uri)}},a=N=>{f(N.id())||e.push(N)},u=N=>Vo(e,N).getOrUndefined(),f=N=>u(B=>B.id()===N);return{create:o,add:a,get:f,getByUri:N=>u(B=>B.blobUri()===N),getByData:(N,B)=>u(j=>j.base64()===N&&j.blob().type===B),findFirst:u,removeByUri:N=>{e=Lt(e,B=>B.blobUri()===N?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{ye(e,N=>{URL.revokeObjectURL(N.blobUri())}),e=[]}}},Jf=(e,n)=>{const o={},r=(q,te)=>q?q.replace(/\/$/,"")+"/"+te.replace(/^\//,""):te,a=(q,te)=>new Promise((ve,xe)=>{const Ce=new XMLHttpRequest;Ce.open("POST",n.url),Ce.withCredentials=n.credentials,Ce.upload.onprogress=ct=>{te(ct.loaded/ct.total*100)},Ce.onerror=()=>{xe("Image upload failed due to a XHR Transport error. Code: "+Ce.status)},Ce.onload=()=>{if(Ce.status<200||Ce.status>=300){xe("HTTP Error: "+Ce.status);return}const ct=JSON.parse(Ce.responseText);if(!ct||!ee(ct.location)){xe("Invalid JSON: "+Ce.responseText);return}ve(r(n.basePath,ct.location))};const De=new FormData;De.append("file",q.blob(),q.filename()),Ce.send(De)}),u=ie(n.handler)?n.handler:a,f=()=>new Promise(q=>{q([])}),b=(q,te)=>({url:te,blobInfo:q,status:!0}),C=(q,te)=>({url:"",blobInfo:q,status:!1,error:te}),E=(q,te)=>{dt.each(o[q],ve=>{ve(te)}),delete o[q]},M=(q,te,ve)=>(e.markPending(q.blobUri()),new Promise(xe=>{let Ce,De;try{const ct=()=>{Ce&&(Ce.close(),De=Pt)},Tt=Ze=>{ct(),e.markUploaded(q.blobUri(),Ze),E(q.blobUri(),b(q,Ze)),xe(b(q,Ze))},Vt=Ze=>{ct(),e.removeFailed(q.blobUri()),E(q.blobUri(),C(q,Ze)),xe(C(q,Ze))};De=Ze=>{Ze<0||Ze>100||I.from(Ce).orThunk(()=>I.from(ve).map(ft)).each(Ie=>{Ce=Ie,Ie.progressBar.value(Ze)})},te(q,De).then(Tt,Ze=>{Vt(ee(Ze)?{message:Ze}:Ze)})}catch(ct){xe(C(q,ct))}})),N=q=>q===a,B=q=>{const te=q.blobUri();return new Promise(ve=>{o[te]=o[te]||[],o[te].push(ve)})},j=(q,te)=>(q=dt.grep(q,ve=>!e.isUploaded(ve.blobUri())),Promise.all(dt.map(q,ve=>e.isPending(ve.blobUri())?B(ve):M(ve,u,te))));return{upload:(q,te)=>!n.url&&N(u)?f():j(q,te)}},Av=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),JT=(e,n)=>Jf(n,{url:Qy(e),basePath:d0(e),credentials:eC(e),handler:AS(e)}),D3=e=>{const n=O3(),o=JT(e,n);return{upload:(r,a=!0)=>o.upload(r,a?Av(e):void 0)}},jB=(e,n)=>e.dom.isEmpty(n.dom)&&Re(e.schema.getTextBlockElements()[No(n)]),GB=e=>n=>{jB(e,n)&&xr(n,me.fromHtml('<br data-mce-bogus="1" />'))},j7=e=>{const n=Rp();let o,r;const a=O3(),u=[],f=Ce=>De=>e.selection?Ce(De):[],b=Ce=>Ce+(Ce.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(Ce,De,ct)=>{let Tt=0;do Tt=Ce.indexOf(De,Tt),Tt!==-1&&(Ce=Ce.substring(0,Tt)+ct+Ce.substr(Tt+De.length),Tt+=ct.length-De.length+1);while(Tt!==-1);return Ce},E=(Ce,De,ct)=>{const Tt=`src="${ct}"${ct===St.transparentSrc?' data-mce-placeholder="1"':""}`;return Ce=C(Ce,`src="${De}"`,Tt),Ce=C(Ce,'data-mce-src="'+De+'"','data-mce-src="'+ct+'"'),Ce},M=(Ce,De)=>{ye(e.undoManager.data,ct=>{ct.type==="fragmented"?ct.fragments=je(ct.fragments,Tt=>E(Tt,Ce,De)):ct.content=E(ct.content,Ce,De)})},N=(Ce,De)=>{const ct=e.convertURL(De,"src");M(Ce.src,De),Xr(me.fromDom(Ce),{src:Uc(e)?b(De):De,"data-mce-src":ct})},B=()=>(o||(o=JT(e,a)),te().then(f(Ce=>{const De=je(Ce,ct=>ct.blobInfo);return o.upload(De,Av(e)).then(f(ct=>{const Tt=[];let Vt=!1;const Ze=je(ct,(Ie,ot)=>{const{blobInfo:Xt,image:Cn}=Ce[ot];let fo=!1;return Ie.status&&Gs(e)?(Ie.url&&!an(Cn.src,Ie.url)&&(Vt=!0),n.removeByUri(Cn.src),Xf(e)||N(Cn,Ie.url)):Ie.error&&(Ie.error.remove&&(M(Cn.src,St.transparentSrc),Tt.push(Cn),fo=!0),$7(e,Ie.error.message)),{element:Cn,status:Ie.status,uploadUri:Ie.url,blobInfo:Xt,removed:fo}});return Tt.length>0&&!Xf(e)?e.undoManager.transact(()=>{ye(Qi(Tt),Ie=>{const ot=ua(Ie);js(Ie),ot.each(GB(e)),n.removeByUri(Ie.dom.src)})}):Vt&&e.undoManager.dispatchChange(),Ze}))}))),j=()=>Rc(e)?B():Promise.resolve([]),Q=Ce=>Bs(u,De=>De(Ce)),q=Ce=>{u.push(Ce)},te=()=>(r||(r=Z7(a,n)),r.findAll(e.getBody(),Q).then(f(Ce=>{const De=Lt(Ce,ct=>ee(ct)?(YT(e,ct),!1):ct.uriType!=="blob");return Xf(e)||ye(De,ct=>{M(ct.image.src,ct.blobInfo.blobUri()),ct.image.src=ct.blobInfo.blobUri(),ct.image.removeAttribute("data-mce-src")}),De}))),ve=()=>{n.destroy(),a.destroy(),r=o=null},xe=Ce=>Ce.replace(/src="(blob:[^"]+)"/g,(De,ct)=>{const Tt=a.getResultUri(ct);if(Tt)return'src="'+Tt+'"';let Vt=n.getByUri(ct);return Vt||(Vt=jn(e.editorManager.get(),(Ze,Ie)=>Ze||Ie.editorUpload&&Ie.editorUpload.blobCache.getByUri(ct),void 0)),Vt?'src="data:'+Vt.blob().type+";base64,"+Vt.base64()+'"':De});return e.on("SetContent",()=>{Rc(e)?j():te()}),e.on("RawSaveContent",Ce=>{Ce.content=xe(Ce.content)}),e.on("GetContent",Ce=>{Ce.source_view||Ce.format==="raw"||Ce.format==="tree"||(Ce.content=xe(Ce.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ce=>{ye(Ce,De=>{const ct=De.attr("src");if(!ct||n.getByUri(ct))return;const Tt=a.getResultUri(ct);Tt&&De.attr("src",Tt)})})}),{blobCache:n,addFilter:q,uploadImages:B,uploadImagesAuto:j,scanForImages:te,destroy:ve}},G7=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>Ht(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{dt.each(f,(b,C)=>{n.setAttrib(a,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},R3={remove_similar:!0,inherit:!1},ib={selector:"td,th",...R3},qB={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ib},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ib},tablecellbordercolor:{styles:{borderColor:"%value"},...ib},tablecellclass:{classes:["%value"],...ib},tableclass:{selector:"table",classes:["%value"],...R3},tablecellborderstyle:{styles:{borderStyle:"%value"},...ib},tablecellborderwidth:{styles:{borderWidth:"%value"},...ib}},KB=rt(qB),M3=e=>{const n={},o=f=>Re(f)?n[f]:n,r=f=>un(n,f),a=(f,b)=>{f&&(ee(f)?(it(b)||(b=[b]),ye(b,C=>{cn(C.deep)&&(C.deep=!iu(C)),cn(C.split)&&(C.split=!iu(C)||pa(C)),cn(C.remove)&&iu(C)&&!pa(C)&&(C.remove="none"),iu(C)&&pa(C)&&(C.mixed=!0,C.block_expand=!0),ee(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):ht(f,(C,E)=>{a(E,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(G7(e)),a(KB()),a(oC(e)),{get:o,has:r,register:a,unregister:u}},N3=dt.each,Sd=kr.DOM,YB=e=>Re(e)&&st(e),XB=(e,n)=>{const o=n&&n.schema||Ud({}),r=(C,E)=>{E.classes.length>0&&Sd.addClass(C,E.classes.join(" ")),Sd.setAttribs(C,E.attrs)},a=C=>{const E=ee(C)?{name:C,classes:[],attrs:{}}:C,M=Sd.create(E.name);return r(M,E),M},u=(C,E)=>{const M=o.getElementRule(C.nodeName.toLowerCase()),N=M==null?void 0:M.parentsRequired;return N&&N.length?E&&He(N,E)?E:N[0]:!1},f=(C,E,M)=>{let N;const B=E[0],j=YB(B)?B.name:void 0,Q=u(C,j);if(Q)j===Q?(N=B,E=E.slice(1)):N=Q;else if(B)N=B,E=E.slice(1);else if(!M)return C;const q=N?a(N):Sd.create("div");q.appendChild(C),M&&dt.each(M,ve=>{const xe=a(ve);q.insertBefore(xe,C)});const te=YB(N)?N.siblings:void 0;return f(q,E,te)},b=Sd.create("div");if(e.length>0){const C=e[0],E=a(C),M=YB(C)?C.siblings:void 0;b.appendChild(f(E,e.slice(1),M))}return b},q7=e=>{e=dt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":dt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},Qf=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=dt.map(n.split(/(?:~\+|~|\+)/),q7),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Qj=(e,n)=>{let o="",r=sC(e);if(r==="")return"";const a=B=>ee(B)?B.replace(/%(\w+)/g,""):"",u=(B,j)=>Sd.getStyle(j??e.getBody(),B,!0);if(ee(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",b;const C=Qf(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=XB(C,e)):b=XB([f],e);const E=Sd.select(f,b)[0]||b.firstChild;N3(n.styles,(B,j)=>{const Q=a(B);Q&&Sd.setStyle(E,j,Q)}),N3(n.attributes,(B,j)=>{const Q=a(B);Q&&Sd.setAttrib(E,j,Q)}),N3(n.classes,B=>{const j=a(B);Sd.hasClass(E,j)||Sd.addClass(E,j)}),e.dispatch("PreviewFormats"),Sd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),N=/px$/.test(M)?parseInt(M,10):0;return N3(r.split(" "),B=>{let j=u(B,E);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=u(B),ld(j).toLowerCase()==="#ffffff"))&&!(B==="color"&&ld(j).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(j)){if(N===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*N+"px"}B==="border"&&j&&(o+="padding:0 2px;"),o+=B+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),Sd.remove(b),o},eG=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},JB=e=>{const n=M3(e),o=Te({});return eG(e),sN(e),Xf(e)||CN(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{_B(e,r,a,u)},remove:(r,a,u,f)=>{K8(e,r,a,u,f)},toggle:(r,a,u)=>{Y8(e,r,a,u)},match:(r,a,u,f)=>ZT(e,r,a,u,f),closest:r=>kB(e,r),matchAll:(r,a)=>j8(e,r,a),matchNode:(r,a,u,f)=>G8(e,r,a,u,f),canApply:r=>q8(e,r),formatChanged:(r,a,u,f)=>X8(e,o,r,a,u,f),getCssText:Ke(Qj,e)}},Ov=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},K7=(e,n,o)=>{const r=Te(!1),a=C=>{wv(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const E=C.command;Ov(E)||(fB(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const E=C.command;Ov(E)||a(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;const M=St.os.isMacOS()&&C.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||C.ctrlKey||M)&&(a(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!f3(zT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const E=C.keyCode;if(C.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&a(C);return}const M=C.ctrlKey&&!C.altKey||C.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!M){n.beforeChange(),wv(n,!0,o),n.add({},C),r.set(!0);return}(St.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&a(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&a(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},QB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},B3=e=>{const n=fa(),o=Te(0),r=Te(0),a={data:[],typing:!1,beforeChange:()=>{CB(e,o,n)},add:(u,f)=>p3(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=zT(e);u.bookmark=Uy(e.selection),e.dispatch("change",{level:u,lastLevel:lr(a.data,r.get()).getOrUndefined()})},undo:()=>wB(e,a,o,r),redo:()=>SB(e,r,a.data),clear:()=>{b3(e,a,r)},reset:()=>{xB(e,a)},hasUndo:()=>TB(e,a,r),hasRedo:()=>EB(e,a,r),transact:u=>W8(e,a,o,u),ignore:u=>{v3(e,o,u)},extra:(u,f)=>{Z8(e,a,r,u,f)}};return Xf(e)||K7(e,a,o),QB(e),a},eP=[9,27,pt.HOME,pt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,pt.DOWN,pt.UP,pt.LEFT,pt.RIGHT].concat(St.browser.isFirefox()?[224]:[]),tP="data-mce-placeholder",nP=e=>e.type==="keydown"||e.type==="keyup",mh=e=>{const n=e.keyCode;return n===pt.BACKSPACE||n===pt.DELETE},Y7=e=>{if(nP(e)){const n=e.keyCode;return!mh(e)&&(pt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||He(eP,n))}else return!1},X7=e=>nP(e)&&!(mh(e)||e.type==="keyup"&&e.keyCode===229),J7=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},Q7=e=>{var n;const o=e.dom,r=sl(e),a=(n=y1(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(Y7(f))return;const C=e.getBody(),E=X7(f)?!1:J7(o,C,r);(o.getAttrib(C,tP)!==""!==E||b)&&(o.setAttrib(C,tP,E?a:null),X0(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};Bn(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Hu.setEditorTimeout(e,()=>u(b)))})},eH=(e,n)=>({block:e,position:n}),tH=(e,n)=>({from:e,to:n}),P3=(e,n)=>{const o=me.fromDom(e),r=me.fromDom(n.container());return Zx(o,r).map(a=>eH(a,n))},nH=e=>!(Ta(e.to.block,e.from.block)||Ta(e.from.block,e.to.block)),oH=e=>!ls(e.from.block,e.to.block),U2=(e,n)=>Rr(n,a=>qh(a)||Ye(a.dom),a=>ls(a,e)).filter(ke).getOr(e),sH=(e,n)=>{const o=me.fromDom(e);return ls(U2(o,n.from.block),U2(o,n.to.block))},rH=e=>is(e.from.block.dom)===!1&&is(e.to.block.dom)===!1,tG=e=>{const n=o=>oS(o)||Ha(o.dom)||Jl(o);return n(e.from.block)&&n(e.to.block)},W2=(e,n,o,r)=>ms(r.position.getNode())&&!Js(e,r.block)?Kg(!1,r.block.dom).bind(a=>a.isEqual(r.position)?$i(o,n,a).bind(u=>P3(n,u)):I.some(r)).getOr(r):r,cH=(e,n,o,r)=>{const a=P3(n,Fe.fromRangeStart(r)),u=a.bind(f=>$i(o,n,f.position).bind(b=>P3(n,b).map(C=>W2(e,n,o,C))));return zr(a,u,tH).filter(f=>oH(f)&&sH(n,f)&&rH(f)&&tG(f)&&nH(f))},$3=(e,n,o,r)=>r.collapsed?cH(e,n,o,r):I.none(),oP=(e,n,o)=>{const r=o?Qm(e).reverse():Ea(e),a=xs(r,u=>n.isBlock(No(u))).fold(rt(r),u=>r.slice(0,u));return o?a.reverse():a},aH=(e,n,o,r,a)=>{if(a&&Ta(e,n))return oP(n,o,r);if(a&&Ta(n,e))return oP(e,o,r);{const u=_c(n);return xs(u,f=>o.isBlock(No(f))).fold(rt(u),f=>u.slice(0,f))}},sP=(e,n,o,r,a)=>{const u=aH(e,n,o,r,a);return ye(u,js),u},rP=(e,n,o)=>{const r=rh(o,n);return Vo(r.reverse(),a=>Js(e,a)).each(js)},ub=(e,n)=>Lt(Qm(n),o=>!Js(e,o)).length===0,db=(e,n,o,r,a,u)=>{if(Js(r,o))return bi(o),hl(o.dom);ub(r,u)&&Js(r,n)&&ka(u,me.fromTag("br"));const f=Ci(o.dom,Fe.before(u.dom));return ye(sP(o,n,r,a,!1),b=>{ka(u,b)}),rP(r,e,n),f},QT=(e,n)=>e.isInline(No(n)),eE=(e,n,o,r,a)=>{if(Js(r,o)){if(Js(r,n)){const b=hs((C=>{const E=(M,N)=>Bd(M).fold(()=>N,B=>QT(r,B)?E(B,N.concat(ud(B))):N);return E(C,[])})(o),(C,E)=>(Cg(C,E),E),Ng());li(n),xr(n,b)}return js(o),hl(n.dom)}const u=Fi(o.dom);return ye(sP(o,n,r,a,!0),f=>{a&&Ta(n,o)?ym(o,f):xr(o,f)}),rP(r,e,n),u},mb=(e,n)=>{const o=rh(n,e);return I.from(o[o.length-1])},fb=(e,n)=>Ta(n,e)?mb(n,e):I.none(),Z2=(e,n)=>{Kg(e,n.dom).bind(o=>I.from(o.getNode())).map(me.fromDom).filter(jh).each(js)},gb=(e,n,o,r,a)=>(Z2(!0,n),Z2(!1,o),fb(n,o).fold(Ke(eE,e,n,o,r,a),Ke(db,e,n,o,r,a))),F3=(e,n,o,r,a,u=!1)=>{if(u){if(Ta(r,o))return gb(e,r,o,a,!n);if(Ta(o,r))return gb(e,o,r,a,n)}return n?gb(e,r,o,a,n):gb(e,o,r,a,!n)},j2=(e,n)=>{const o=me.fromDom(e.getBody());return $3(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{F3(o,n,a.from.block,a.to.block,e.schema,!0).each(u=>{e.selection.setRng(u.toRange())})})},I3=(e,n,o)=>{const r=n.getRng();return zr(Zx(e,me.fromDom(r.startContainer)),Zx(e,me.fromDom(r.endContainer)),(a,u)=>ls(a,u)?I.none():I.some(()=>{r.deleteContents(),F3(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(I.none())},L3=(e,n)=>{const o=me.fromDom(n),r=Ke(ls,e);return cr(o,qh,r).isSome()},cP=(e,n)=>L3(e,n.startContainer)||L3(e,n.endContainer),Dv=(e,n)=>{const o=Ci(e.dom,Fe.fromRangeStart(n)).isNone(),r=gl(e.dom,Fe.fromRangeEnd(n)).isNone();return!cP(e,n)&&o&&r},aP=e=>I.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),lP=e=>{const n=me.fromDom(e.getBody()),o=e.selection.getRng();return Dv(n,o)?aP(e):I3(n,e.selection,e.schema)},tE=(e,n)=>e.selection.isCollapsed()?I.none():lP(e),lm=(e,n,o,r,a)=>I.from(n._selectionOverrides.showCaret(e,o,r,a)),iP=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},Rv=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?I.none():I.some(iP(n)),uP=(e,n,o)=>{const r=rl(1,e.getBody(),n),a=Fe.fromRangeStart(r),u=a.getNode();if(A0(u))return lm(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(A0(f))return lm(1,e,f,!1,!1);const b=ah(e.dom.getRoot(),a.getNode());return A0(b)?lm(1,e,b,!1,o):I.none()},nE=(e,n,o)=>n.collapsed?uP(e,n,o).getOr(n):n,fh=e=>Gf(e)||gn(e),Mp=e=>Sp(e)||lv(e),im=(e,n)=>{ut(n)&&n.data.length===0&&e.remove(n)},dP=(e,n,o,r,a,u)=>{lm(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),im(e.dom,o)},lH=(e,n)=>{const o=e.selection.getRng();if(!ut(o.commonAncestorContainer))return I.none();const r=n?ha.Forwards:ha.Backwards,a=za(e.getBody()),u=Ke(CC,n?a.next:a.prev),f=n?fh:Mp,b=Gg(r,e.getBody(),o),C=u(b),E=C&&zu(n,C);if(!E||!N0(b,E))return I.none();if(f(E))return I.some(()=>dP(e,o,b.getNode(),r,n,E));const M=u(E);return M&&f(M)&&N0(E,M)?I.some(()=>dP(e,o,b.getNode(),r,n,M)):I.none()},H3=(e,n)=>lH(e,n),z3=(e,n)=>{const o=e.getBody();return n?hl(o).filter(Gf):Fi(o).filter(Sp)},V3=e=>{const n=e.selection.getRng();return!n.collapsed&&(z3(e,!0).exists(o=>o.isEqual(Fe.fromRangeStart(n)))||z3(e,!1).exists(o=>o.isEqual(Fe.fromRangeEnd(n))))},iH=e=>Re(e)&&(qh(me.fromDom(e))||Jl(me.fromDom(e))),Uu=Os.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),uH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ht(o)&&o.getAttribute("data-mce-caret")===r},dH=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Pi(o,r,e);return R0(!n,o).fold(()=>R0(n,r).fold(Me,u),u)},mP=(e,n,o,r,a)=>{const u=a.getNode(!o);return Zx(me.fromDom(n),me.fromDom(r.getNode())).map(f=>Js(e,f)?Uu.remove(f.dom):Uu.moveToElement(u)).orThunk(()=>I.some(Uu.moveToElement(u)))},fP=(e,n,o,r)=>$i(n,e,o).bind(a=>iH(a.getNode())||dH(e,n,o,a,r)?I.none():n&&is(a.getNode())||!n&&is(a.getNode(!0))?mP(r,e,n,o,a):n&&Sp(o)||!n&&Gf(o)?I.some(Uu.moveToPosition(a)):I.none()),mH=(e,n)=>xn(n)?I.none():e&&is(n.nextSibling)?I.some(Uu.moveToElement(n.nextSibling)):!e&&is(n.previousSibling)?I.some(Uu.moveToElement(n.previousSibling)):I.none(),U3=(e,n,o)=>o.fold(r=>I.some(Uu.remove(r)),r=>I.some(Uu.moveToElement(r)),r=>Pi(n,r,e)?I.none():I.some(Uu.moveToPosition(r))),W3=(e,n,o,r)=>uH(n,o)?mH(n,o.getNode(!n)).orThunk(()=>fP(e,n,o,r)):fP(e,n,o,r).bind(a=>U3(e,o,a)),gP=(e,n,o,r)=>{const a=rl(n?1:-1,e,o),u=Fe.fromRangeStart(a),f=me.fromDom(e);return!n&&Sp(u)?I.some(Uu.remove(u.getNode(!0))):n&&Gf(u)?I.some(Uu.remove(u.getNode())):!n&&Gf(u)&&jA(f,u,r)?rM(f,u,r).map(b=>Uu.remove(b.getNode())):n&&Sp(u)&&sM(f,u,r)?j6(f,u,r).map(b=>Uu.remove(b.getNode())):W3(e,n,u,r)},fH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),W1(e,n,me.fromDom(o)),!0),gH=(e,n)=>o=>{const r=n?Fe.before(o):Fe.after(o);return e.selection.setRng(r.toRange()),!0},hP=e=>n=>(e.selection.setRng(n.toRange()),!0),Z3=(e,n)=>I.from(ah(e.getBody(),n)),j3=(e,n)=>{const o=e.selection.getNode();return Z3(e,o).filter(is).fold(()=>gP(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(fH(e,n),gH(e,n),hP(e))),()=>I.some(Pt))},pP=e=>{ye(Vr(e,".mce-offscreen-selection"),js)},bP=(e,n)=>{const o=e.selection.getNode();return is(o)&&!Rh(o)?Z3(e,o.parentNode).filter(is).fold(()=>I.some(()=>{pP(me.fromDom(e.getBody())),W1(e,n,me.fromDom(e.selection.getNode())),Nr(e)}),()=>I.some(Pt)):V3(e)?I.some(()=>{AM(e,e.selection.getRng(),me.fromDom(e.getBody()))}):I.none()},oE=e=>{const n=e.dom,o=e.selection,r=ah(e.getBody(),o.getNode());if(Ye(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Fe.before(a).toRange())}return!0},G3=(e,n)=>e.selection.isCollapsed()?j3(e,n):bP(e,n),vP=e=>e.hasOwnProperty("text"),jm=e=>e.hasOwnProperty("marker"),xd=(e,n)=>{const o=(u,f)=>{if(ut(u))return{text:u,offset:f};{const b=n(),C=u.childNodes;return f<C.length?(u.insertBefore(b,C[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},G2=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return vP(r)?u.setStart(r.text,r.offset):jm(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),vP(a)?u.setEnd(a.text,a.offset):jm(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},sE=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=a.cloneNode(!1),E=()=>{if(n?_M(e):Wx(e),f.firstChild!==a){const M=xd(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(N=>C.appendChild(N)),f.appendChild(C),e.selection.setRng(G2(M))}};return I.some(E)}return I.none()},rE=(e,n)=>{const o=Fe.fromRangeStart(e.selection.getRng());return $i(n,e.getBody(),o).filter(r=>n?z6(r):V6(r)).bind(r=>D0(n?0:-1,r)).map(r=>()=>e.selection.select(r))},cE=(e,n)=>e.selection.isCollapsed()?rE(e,n):I.none(),hb=ut,q3=e=>hb(e)&&e.data[0]===lc,K3=e=>hb(e)&&e.data[e.data.length-1]===lc,Y3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(lc)},yP=e=>{var n;if(hb(e.previousSibling))return K3(e.previousSibling)||e.previousSibling.appendData(lc),e.previousSibling;if(hb(e))return q3(e)||e.insertData(0,lc),e;{const o=Y3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},aE=e=>{var n,o;if(hb(e.nextSibling))return q3(e.nextSibling)||e.nextSibling.insertData(0,lc),e.nextSibling;if(hb(e))return K3(e)||e.appendData(lc),e;{const r=Y3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Mv=(e,n)=>e?yP(n):aE(n),hH=Ke(Mv,!0),pH=Ke(Mv,!1),CP=(e,n)=>ut(e.container())?Mv(n,e.container()):Mv(n,e.getNode()),wP=(e,n)=>{const o=n.get();return o&&e.container()===o&&md(o)},lE=(e,n)=>n.fold(o=>{$f(e.get());const r=hH(o);return e.set(r),I.some(Fe(r,r.length-1))},o=>hl(o).map(r=>{if(wP(r,e)){const a=e.get();return Fe(a,1)}else{$f(e.get());const a=CP(r,!0);return e.set(a),Fe(a,1)}}),o=>Fi(o).map(r=>{if(wP(r,e)){const a=e.get();return Fe(a,a.length-1)}else{$f(e.get());const a=CP(r,!1);return e.set(a),Fe(a,a.length-1)}}),o=>{$f(e.get());const r=pH(o);return e.set(r),I.some(Fe(r,1))}),SP=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return I.none()},Ti=Os.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),iE=(e,n)=>{const o=pd(n,e);return o||e},bH=(e,n,o)=>{const r=ti(o),a=iE(n,r.container());return ch(e,a,r).fold(()=>gl(a,r).bind(Ke(ch,e,a)).map(u=>Ti.before(u)),I.none)},vH=(e,n)=>Yg(e,n)===null,xP=(e,n,o)=>ch(e,n,o).filter(Ke(vH,n)),yH=(e,n,o)=>{const r=EM(o);return xP(e,n,r).bind(a=>Ci(a,r).isNone()?I.some(Ti.start(a)):I.none())},CH=(e,n,o)=>{const r=ti(o);return xP(e,n,r).bind(a=>gl(a,r).isNone()?I.some(Ti.end(a)):I.none())},wH=(e,n,o)=>{const r=EM(o),a=iE(n,r.container());return ch(e,a,r).fold(()=>Ci(a,r).bind(Ke(ch,e,a)).map(u=>Ti.after(u)),I.none)},TP=e=>!SM(q2(e)),Td=(e,n,o)=>SP([bH,yH,CH,wH],[e,n,o]).filter(TP),q2=e=>e.fold(Ho,Ho,Ho,Ho),EP=e=>e.fold(rt("before"),rt("start"),rt("end"),rt("after")),uE=e=>e.fold(Ti.before,Ti.before,Ti.after,Ti.after),X3=e=>e.fold(Ti.start,Ti.start,Ti.end,Ti.end),SH=(e,n)=>EP(e)===EP(n)&&q2(e)===q2(n),kP=(e,n,o,r,a,u)=>zr(ch(n,o,r),ch(n,o,a),(f,b)=>f!==b&&xM(o,f,b)?Ti.after(e?f:b):u).getOr(u),xH=(e,n)=>e.fold(Je,o=>!SH(o,n)),TH=(e,n,o,r,a)=>{const u=zu(e,a);return $i(e,o,u).map(Ke(zu,e)).fold(()=>r.map(uE),C=>Td(n,o,C).map(Ke(kP,e,n,o,u,C)).filter(Ke(xH,r))).filter(TP)},J3=(e,n)=>e?n.fold(A(I.some,Ti.start),I.none,A(I.some,Ti.after),I.none):n.fold(I.none,A(I.some,Ti.before),I.none,A(I.some,Ti.end)),EH=(e,n,o,r)=>{const a=zu(e,r),u=Td(n,o,a);return Td(n,o,a).bind(Ke(J3,e)).orThunk(()=>TH(e,n,o,u,r))},kH=e=>ie(e.selection.getSel().modify),_P=(e,n,o)=>{const r=e?1:-1;return n.setRng(Fe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},_H=(e,n)=>{const o=n.selection.getRng(),r=e?Fe.fromRangeEnd(o):Fe.fromRangeStart(o);return kH(n)?e&&Ry(r)?_P(!0,n.selection,r):!e&&$g(r)?_P(!1,n.selection,r):!1:!1};var eg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(eg||(eg={}));const dE=(e,n)=>e===ha.Backwards?ps(n):n,AH=(e,n,o)=>e===ha.Forwards?n.next(o):n.prev(o),mE=(e,n,o,r)=>ms(r.getNode(n===ha.Forwards))?eg.Br:Pi(o,r)===!1?eg.Block:eg.Wrap,K2=(e,n,o,r)=>{const a=za(o);let u=r;const f=[];for(;u;){const b=AH(n,a,u);if(!b)break;if(ms(b.getNode(!1)))return n===ha.Forwards?{positions:dE(n,f).concat([b]),breakType:eg.Br,breakAt:I.some(b)}:{positions:dE(n,f),breakType:eg.Br,breakAt:I.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=mE(o,n,u,b);return{positions:dE(n,f),breakType:C,breakAt:I.some(b)}}f.push(b),u=b}return{positions:dE(n,f),breakType:eg.Eol,breakAt:I.none()}},AP=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===ha.Backwards?u.concat(a):[a].concat(u)}).getOr([]),Q3=(e,n)=>jn(e,(o,r)=>o.fold(()=>I.some(r),a=>zr(lo(a.getClientRects()),lo(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),I.none()),pb=(e,n)=>lo(n.getClientRects()).bind(o=>Q3(e,o.left)),Y2=Ke(K2,Fe.isAbove,-1),X2=Ke(K2,Fe.isBelow,1),OP=Ke(AP,-1,Y2),DP=Ke(AP,1,X2),RP=(e,n)=>Y2(e,n).breakAt.isNone(),MP=(e,n)=>X2(e,n).breakAt.isNone(),OH=e=>hl(e).map(n=>[n].concat(X2(e,n).positions)).getOr([]),DH=e=>Fi(e).map(n=>Y2(e,n).positions.concat(n)).getOr([]),RH=(e,n)=>pb(OP(e,n),n),MH=(e,n)=>pb(DP(e,n),n),NH=is,BH=(e,n)=>Math.abs(e.left-n),Ed=(e,n)=>Math.abs(e.right-n),eO=e=>tr(e,"node"),tO=(e,n)=>de(e,(o,r)=>{const a=Math.min(BH(o,n),Ed(o,n)),u=Math.min(BH(r,n),Ed(r,n));return u===a&&eO(r)&&NH(r.node)||u<a?r:o}),NP=e=>{const n=o=>je(o,r=>{const a=Am(r);return a.node=e,a});if(Ht(e))return n(e.getClientRects());if(ut(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},BP=e=>Us(e,NP);var Nv;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Nv||(Nv={}));const PH=(e,n,o,r)=>{let a=r;for(;a=ap(a,e,By,n);)if(o(a))return},nO=(e,n,o,r,a,u)=>{let f=0;const b=[],C=N=>{let B=BP([N]);e===-1&&(B=B.reverse());for(let j=0;j<B.length;j++){const Q=B[j];if(!o(Q,E)){if(b.length>0&&n(Q,Oe(b))&&f++,Q.line=f,a(Q))return!0;b.push(Q)}}return!1},E=Oe(u.getClientRects());if(!E)return b;const M=u.getNode();return M&&(C(M),PH(e,r,C,M)),b},$H=(e,n)=>n.line>e,FH=(e,n)=>n.line===e,IH=Ke(nO,Nv.Up,u1,Qb),Bv=Ke(nO,Nv.Down,Qb,u1),oO=e=>Oe(e.getClientRects()),PP=(e,n,o,r)=>{const a=za(n);let u,f,b,C;const E=[];let M=0;e===1?(u=a.next,f=Qb,b=u1,C=Fe.after(r)):(u=a.prev,f=u1,b=Qb,C=Fe.before(r));const N=oO(C);do{if(!C.isVisible())continue;const B=oO(C);if(b(B,N))continue;E.length>0&&f(B,Oe(E))&&M++;const j=Am(B);if(j.position=C,j.line=M,o(j))return E;E.push(j)}while(C=u(C));return E},sO=e=>n=>$H(e,n),J2=e=>n=>FH(e,n),gh=(e,n)=>{e.selection.setRng(n),t2(e,e.selection.getRng())},rO=(e,n,o)=>I.some(nE(e,n,o)),$P=(e,n,o,r,a,u)=>{const f=n===ha.Forwards,b=za(e.getBody()),C=Ke(CC,f?b.next:b.prev),E=f?r:a;if(!o.collapsed){const Q=Yh(o);if(u(Q))return lm(n,e,Q,n===ha.Backwards,!1);if(V3(e)){const q=o.cloneRange();return q.collapse(n===ha.Backwards),I.from(q)}}const M=Gg(n,e.getBody(),o);if(E(M))return Rv(e,M.getNode(!f));let N=C(M);const B=Dl(o);if(N)N=zu(f,N);else return B?I.some(o):I.none();if(E(N))return lm(n,e,N.getNode(!f),f,!1);const j=C(N);return j&&E(j)&&N0(N,j)?lm(n,e,j.getNode(!f),f,!1):B?rO(e,N.toRange(),!1):I.none()},LH=(e,n,o,r,a,u)=>{const f=Gg(n,e.getBody(),o),b=Oe(f.getClientRects()),C=n===Nv.Down,E=e.getBody();if(!b)return I.none();if(V3(e)){const te=C?Fe.fromRangeEnd(o):Fe.fromRangeStart(o);return(C?MH:RH)(E,te).orThunk(()=>I.from(te)).map(xe=>xe.toRange())}const N=(C?Bv:IH)(E,sO(1),f),B=Lt(N,J2(1)),j=b.left,Q=tO(B,j);if(Q&&u(Q.node)){const te=Math.abs(j-Q.left),ve=Math.abs(j-Q.right);return lm(n,e,Q.node,te<ve,!1)}let q;if(r(f)?q=f.getNode():a(f)?q=f.getNode(!0):q=Yh(o),q){const te=PP(n,E,sO(1),q);let ve=tO(Lt(te,J2(1)),j);if(ve||(ve=Oe(Lt(te,J2(0))),ve))return rO(e,ve.position.toRange(),!1)}return B.length===0?FP(e,C).filter(C?a:r).map(te=>nE(e,te.toRange(),!1)):I.none()},FP=(e,n)=>{const o=e.selection.getRng(),r=n?Fe.fromRangeEnd(o):Fe.fromRangeStart(o),a=j_(r.container(),e.getBody());if(n){const u=X2(a,r);return Cs(u.positions)}else{const u=Y2(a,r);return lo(u.positions)}},HH=(e,n,o)=>FP(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),vu=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},IP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},LP=(e,n,o)=>lE(n,o).map(r=>(vu(e,r),o)),bb=(e,n,o)=>{const r=Fe.fromRangeStart(e);if(e.collapsed)return r;{const a=Fe.fromRangeEnd(e);return o?Ci(n,a).getOr(a):gl(n,r).getOr(r)}},HP=(e,n,o)=>{const r=e.getBody(),a=bb(e.selection.getRng(),r,o),u=Ke(xp,e);return EH(o,u,r,a).bind(b=>LP(e,n,b))},zH=(e,n,o)=>{const r=je(Vr(me.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Lt(r,e),u=Lt(o,e);ye(wc(a,u),Ke(IP,!1)),ye(wc(u,a),Ke(IP,!0))},fE=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Fe.fromRangeStart(e.selection.getRng());Fe.isTextPosition(r)&&!TM(r)&&(vu(e,V_(o,r)),n.set(null))}},VH=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Lt(r,e);ye(a,u=>{const f=Fe.fromRangeStart(n.selection.getRng());Td(e,n.getBody(),f).bind(b=>LP(n,o,b))})}},zP=(e,n,o)=>Vg(e)?HP(e,n,o).isSome():!1,VP=(e,n,o)=>Vg(n)?_H(e,n):!1,UH=e=>{const n=Te(null),o=Ke(xp,e);return e.on("NodeChange",r=>{Vg(e)&&(zH(o,e.dom,r.parents),fE(e,n),VH(o,e,n,r.parents))}),n},UP=Ke(VP,!0),WH=Ke(VP,!1),um=(e,n,o)=>{if(Vg(e)){const r=FP(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Fe.fromRangeEnd(a):Fe.fromRangeStart(a)});return Td(Ke(xp,e),e.getBody(),r).exists(a=>{const u=uE(a);return lE(o,u).exists(f=>(vu(e,f),!0))})}else return!1},ZH=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},jH=e=>zr(hl(e),Fi(e),(n,o)=>{const r=zu(!0,n),a=zu(!1,o);return gl(e,r).forall(u=>u.isEqual(a))}).getOr(!0),WP=(e,n)=>o=>lE(n,o).map(r=>()=>vu(e,r)),ZP=(e,n,o,r)=>{const a=e.getBody(),u=Ke(xp,e);e.undoManager.ignore(()=>{e.selection.setRng(ZH(o,r)),Wx(e),Td(u,a,Fe.fromRangeStart(e.selection.getRng())).map(X3).bind(WP(e,n)).each(pn)}),e.nodeChanged()},GH=(e,n)=>{const o=pd(n,e);return o||e},cO=(e,n,o,r)=>{const a=GH(e.getBody(),r.container()),u=Ke(xp,e),f=Td(u,a,r);return f.bind(C=>o?C.fold(rt(I.some(X3(C))),I.none,rt(I.some(uE(C))),I.none):C.fold(I.none,rt(I.some(uE(C))),I.none,rt(I.some(X3(C))))).map(WP(e,n)).getOrThunk(()=>{const C=Bm(o,a,r),E=C.bind(M=>Td(u,a,M));return zr(f,E,()=>ch(u,a,r).bind(M=>jH(M)?I.some(()=>{W1(e,o,me.fromDom(M))}):I.none())).getOrThunk(()=>E.bind(()=>C.map(M=>()=>{o?ZP(e,n,r,M):ZP(e,n,M,r)})))})},Q2=(e,n,o)=>{if(e.selection.isCollapsed()&&Vg(e)){const r=Fe.fromRangeStart(e.selection.getRng());return cO(e,n,o,r)}return I.none()},aO=e=>Qc(e)>1,lO=(e,n)=>{const o=me.fromDom(e.getBody()),r=me.fromDom(e.selection.getStart()),a=rh(r,o);return xs(a,n).fold(rt(a),u=>a.slice(0,u))},jP=e=>Qc(e)===1,GP=e=>lO(e,n=>e.schema.isBlock(No(n))||aO(n)),qH=e=>lO(e,n=>e.schema.isBlock(No(n))),Pv=(e,n)=>{const o=Ke(D4,e);return Us(n,r=>o(r)?[r.dom]:[])},ew=e=>{const n=qH(e);return Pv(e,n)},qP=(e,n,o,r)=>{const a=Pv(n,r);if(a.length===0)W1(n,e,o);else{const u=cN(o.dom,a);n.selection.setRng(u.toRange())}},KP=(e,n)=>{const o=Lt(GP(e),jP);return Cs(o).bind(r=>{const a=Fe.fromRangeStart(e.selection.getRng());return i2(n,a,r.dom)&&!D1(r)?I.some(()=>qP(n,e,r,o)):I.none()})},YP=(e,n)=>{const o=n.parentElement;return ms(n)&&!W(o)&&e.dom.isEmpty(o)},XP=e=>D1(me.fromDom(e)),tw=(e,n)=>{const o=e.selection.getStart(),r=YP(e,o)||XP(o)?cN(o,n):O4(e.selection.getRng(),n);e.selection.setRng(r.toRange())},iO=(e,n)=>{const o=wc(n,ew(e));o.length>0&&tw(e,o)},$v=e=>ut(e.startContainer),KH=e=>e.startOffset===0&&$v(e),JP=(e,n)=>{const o=n.startContainer.parentElement;return!W(o)&&D4(e,me.fromDom(o))},YH=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!W(n)&&!W(o)&&n.isEqualNode(o)},XH=e=>{const n=e.endContainer;return e.endOffset===(ut(n)?n.length:n.childNodes.length)},QP=e=>YH(e)&&XH(e),JH=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),e5=e=>QP(e)||JH(e),nG=e=>{const n=e.selection.getRng();return KH(n)&&JP(e,n)&&e5(n)},QH=e=>{if(nG(e)){const n=ew(e);return I.some(()=>{Wx(e),iO(e,n)})}else return I.none()},uO=(e,n)=>e.selection.isCollapsed()?KP(e,n):QH(e),e9=(e,n)=>Ah(e,o=>Ii(o.dom),o=>n.isBlock(No(o))),t9=e=>e9(me.fromDom(e.selection.getStart()),e.schema),n9=e=>{const n=e.selection.getRng();return n.collapsed&&($v(n)||e.dom.isEmpty(n.startContainer))&&!t9(e)},nw=e=>(n9(e)&&tw(e,[]),!0),dO=(e,n,o)=>Re(o)?I.some(()=>{e._selectionOverrides.hideFakeCaret(),W1(e,n,me.fromDom(o))}):I.none(),o9=(e,n)=>{const o=n?gn:lv,r=n?ha.Forwards:ha.Backwards,a=Gg(r,e.getBody(),e.selection.getRng());return o(a)?dO(e,n,a.getNode(!n)):I.from(zu(n,a)).filter(u=>o(u)&&N0(a,u)).bind(u=>dO(e,n,u.getNode(!n)))},t5=(e,n)=>{const o=e.selection.getNode();return _a(o)?dO(e,n,o):I.none()},mO=(e,n)=>e.selection.isCollapsed()?o9(e,n):t5(e,n),vb=e=>Rr(e,n=>Ye(n.dom)||is(n.dom)).exists(n=>Ye(n.dom)),gE=e=>fc(e??"").getOr(0),hE=(e,n)=>{const o=e||Ay(n)?"margin":"padding",r=$r(n,"direction")==="rtl"?"-right":"-left";return o+r},n5=(e,n,o,r,a,u)=>{const f=hE(o,me.fromDom(u)),b=gE(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+a:"")}else{const C=b+r+a;e.setStyle(u,f,C)}},fO=(e,n)=>Bs(n,o=>{const r=hE(tC(e),o),a=Xa(o,r).map(gE).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),hh=e=>{const n=Np(e);return!e.mode.isReadOnly()&&(n.length>1||fO(e,n))},gO=e=>dd(e)||Jl(e),kd=e=>ua(e).exists(gO),Np=e=>Lt(Qi(e.selection.getSelectedBlocks()),n=>!gO(n)&&!kd(n)&&vb(n)),pE=(e,n)=>{var o,r;const{dom:a}=e,u=l6(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=gE(u),C=tC(e);ye(Np(e),E=>{n5(a,n,C,b,f,E.dom)})},s9=e=>pE(e,"indent"),hO=e=>pE(e,"outdent"),o5=e=>{if(e.selection.isCollapsed()&&hh(e)){const n=e.dom,o=e.selection.getRng(),r=Fe.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&ZA(me.fromDom(a),r,e.schema))return I.some(()=>hO(e))}return I.none()},s5=(e,n,o)=>$c([o5,G3,H3,(r,a)=>Q2(r,n,a),j2,Y1,cE,mO,tE,uO,sE],r=>r(e,o)).filter(r=>e.selection.isEditable()),r9=(e,n)=>{s5(e,n,!1).fold(()=>{e.selection.isEditable()&&(Wx(e),Nr(e))},pn)},c9=(e,n)=>{s5(e,n,!0).fold(()=>{e.selection.isEditable()&&_M(e)},pn)},a9=(e,n)=>{e.addCommand("delete",()=>{r9(e,n)}),e.addCommand("forwardDelete",()=>{c9(e,n)})},pO=5,l9=400,r5=e=>e.touches===void 0||e.touches.length!==1?I.none():I.some(e.touches[0]),Fv=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>pO||r>pO},bE=e=>{const n=fa(),o=Te(!1),r=Sf(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},l9);e.on("touchstart",a=>{r5(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),r5(a).each(u=>{n.on(f=>{Fv(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},vE=(e,n)=>un(e,n.nodeName),c5=(e,n)=>ut(n)?!0:Ht(n)?!vE(e.getBlockElements(),n)&&!Li(n)&&!ou(e,n)&&!qr(n):!1,bO=(e,n,o)=>vt(eM(me.fromDom(o),me.fromDom(n)),r=>vE(e,r.dom)),i9=(e,n)=>{if(ut(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||vE(e,n.nextSibling)||qr(n.nextSibling)}return!1},vO=e=>e.dom.create(sl(e),Df(e)),u9=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,E=null;const M=sl(e);if(!u||!Ht(u))return;const N=f.nodeName.toLowerCase();if(!r.isValidChild(N,M.toLowerCase())||bO(a,f,u))return;if(f.firstChild===f.lastChild&&ms(f.firstChild)){b=vO(e),b.appendChild(Ng().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let B=f.firstChild;for(;B;)if(Ht(B)&&kl(r,B),c5(r,B)){if(i9(a,B)){C=B,B=B.nextSibling,n.remove(C);continue}if(!b){if(!E&&e.hasFocus()&&(E=xd(e.selection.getRng(),()=>document.createElement("span"))),!B.parentNode){B=null;break}b=vO(e),f.insertBefore(b,B)}C=B,B=B.nextSibling,b.appendChild(C)}else b=null,B=B.nextSibling;E&&(e.selection.setRng(G2(E)),e.nodeChanged())},a5=(e,n,o)=>{const r=me.fromDom(vO(e)),a=Ng();xr(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},d9=e=>{e.on("NodeChange",()=>u9(e))},l5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,m9=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},i5=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],m9(e,a,y0(e)));o.content=a}},f9=(e,n)=>Bs(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),g9=e=>{const n="contenteditable",o=" "+dt.trim(P_(e))+" ",r=" "+dt.trim(y0(e))+" ",a=l5(o),u=l5(r),f=Iu(e);f.length>0&&e.on("BeforeSetContent",b=>{i5(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const E=b[C];a(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const E=b[C];if(!a(E)&&!u(E))continue;const M=E.attr("data-mce-content");f.length>0&&M?f9(f,M)?(E.name="#text",E.type=3,E.raw=!0,E.value=M):E.remove():E.attr(n,null)}})},Wu=e=>fn(me.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),u5=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Yo(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},yO=(e,n)=>{const o=Wu(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),u5(e,o);return}Oy(o)&&(u5(e,o),e.undoManager.add())}},d5=e=>{e.on("keyup compositionstart",Ke(yO,e))},yE=is,h9=(e,n,o)=>$P(n,e,o,Gf,Sp,yE),p9=(e,n,o)=>LH(n,e,o,u=>Gf(u)||UA(u),u=>Sp(u)||WA(u),yE),b9=e=>{const n=e.dom.create(sl(e));return n.innerHTML='<br data-mce-bogus="1">',n},m5=(e,n,o)=>{const r=za(e.getBody()),a=Ke(CC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Fe.fromRangeStart(o))){const b=me.fromDom(b9(e));n===1?Tl(me.fromDom(u),b):ka(me.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},v9=(e,n)=>{const o=n?ha.Forwards:ha.Backwards,r=e.selection.getRng();return h9(o,e,r).orThunk(()=>(m5(e,o,r),I.none()))},f5=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return p9(o,e,r).orThunk(()=>(m5(e,o,r),I.none()))},y9=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return SM(o)?!n:n},g5=(e,n)=>v9(e,y9(e.selection,n)).exists(o=>(gh(e,o),!0)),Iv=(e,n)=>f5(e,n).exists(o=>(gh(e,o),!0)),tg=(e,n)=>HH(e,n,n?Sp:Gf),ng=(e,n)=>z3(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(gh(e,o),!0)),CE=e=>He(["figcaption"],No(e)),CO=(e,n,o)=>{const r=Ke(ls,n);return Rr(me.fromDom(e.container()),a=>o.isBlock(No(a)),r).filter(CE)},wO=(e,n,o)=>n?MP(e.dom,o):RP(e.dom,o),h5=(e,n)=>{const o=me.fromDom(e.getBody()),r=Fe.fromRangeStart(e.selection.getRng());return CO(r,o,e.schema).exists(()=>{if(wO(o,n,r)){const u=a5(e,o,n?xr:ym);return e.selection.setRng(u),!0}else return!1})},p5=(e,n)=>e.selection.isCollapsed()?h5(e,n):!1,b5=(e,n,o)=>{const r=e.selection.getRng(),a=Fe.fromRangeStart(r);return e.getBody().firstChild===n&&RP(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},v5=(e,n)=>{const o=e.selection.getRng(),r=Fe.fromRangeStart(o);return e.getBody().lastChild===n&&MP(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},C9=(e,n)=>n?I.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>v5(e,o)).getOr(!1):I.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>I.from(e.dom.getParent(o,"details")).map(r=>b5(e,r,o))).getOr(!1),y5=(e,n)=>C9(e,n),C5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},w9=e=>je(e,n=>({...C5,...n})),S9=e=>je(e,n=>({...C5,...n})),w5=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,S5=(e,n)=>Us(w9(e),o=>w5(o,n)?[o]:[]),x5=(e,n)=>Us(S9(e),o=>w5(o,n)?[o]:[]),qn=(e,...n)=>()=>e.apply(null,n),wE=(e,n)=>Vo(S5(e,n),o=>o.action()),x9=(e,n)=>$c(x5(e,n),o=>o.action()),T5=(e,n)=>{const o=n?ha.Forwards:ha.Backwards,r=e.selection.getRng();return $P(e,o,r,gn,lv,_a).exists(a=>(gh(e,a),!0))},T9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return LH(e,o,r,gn,lv,_a).exists(a=>(gh(e,a),!0))},E9=(e,n)=>HH(e,n,n?lv:gn),E5=Os.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),SE={...E5,none:e=>E5.none(e)},k9=(e,n)=>Ei(e,n,Je),Ei=(e,n,o)=>Us(_c(e),r=>Ka(r,n)?o(r)?[r]:[]:Ei(r,n,o)),k5=(e,n,o=Me)=>{if(o(n))return I.none();if(He(e,No(n)))return I.some(n);const r=a=>Ka(a,"table")||o(a);return cc(n,e.join(","),r)},ow=(e,n)=>k5(["td","th"],e,n),_9=e=>k9(e,"th,td"),SO=(e,n)=>Di(e,"table",n),xE=(e,n,o,r,a=Je)=>{const u=r===1;if(!u&&o<=0)return SE.first(e[0]);if(u&&o>=e.length-1)return SE.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?SE.middle(n,b):xE(e,n,f,r,a)}},TE=(e,n)=>SO(e,n).bind(o=>{const r=_9(o);return xs(r,u=>ls(e,u)).map(u=>({index:u,all:r}))}),A9=(e,n,o)=>TE(e,o).fold(()=>SE.none(e),a=>xE(a.all,e,a.index,1,n)),O9=(e,n,o)=>TE(e,o).fold(()=>SE.none(),a=>xE(a.all,e,a.index,-1,n)),_5=e=>e_(e).filter(n=>n.trim().length!==0||n.indexOf(Ac)>-1).isSome(),D9=e=>se(e)&&rr(e,"contenteditable")==="false",R9=["img","br"],M9=e=>_5(e)||He(R9,No(e))||D9(e),xO=e=>vg(e,M9),N9=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),B9=(e,n)=>Us(n,o=>{const r=N9(Am(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),sG=(e,n,o)=>jn(e,(r,a)=>r.fold(()=>I.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return I.some(b<f?a:u)}),I.none()),A5=(e,n,o,r,a)=>{const u=Vr(me.fromDom(o),"td,th,caption").map(b=>b.dom),f=Lt(B9(e,u),b=>n(b,a));return sG(f,r,a).map(b=>b.cell)},O5=e=>e.bottom,rG=e=>e.top,P9=(e,n)=>e.y<n,$9=(e,n)=>e.y>n,F9=Ke(A5,O5,P9),TO=Ke(A5,rG,$9),EE=(e,n)=>lo(n.getClientRects()).bind(o=>F9(e,o.left,o.top)).bind(o=>pb(DH(o),n)),D5=(e,n)=>Cs(n.getClientRects()).bind(o=>TO(e,o.left,o.top)).bind(o=>pb(OH(o),n)),R5=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),I9=e=>e.breakType===eg.Wrap&&e.positions.length===0,L9=e=>e.breakType===eg.Br&&e.positions.length===1,kE=(e,n,o)=>{const r=e(n,o);return I9(r)||!ms(o.getNode())&&L9(r)?!R5(e,n,r):r.breakAt.isNone()},H9=Ke(kE,Y2),z9=Ke(kE,X2),V9=(e,n,o)=>{const r=Fe.fromRangeStart(n);return Kg(!e,o).exists(a=>a.isEqual(r))},U9=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return W_()&&V9(n,a,o)?(lm(u,e,o,!n,!1).each(f=>{gh(e,f)}),!0):!1},dm=(e,n,o)=>EE(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>Q3(OP(e,Fe.before(n)),r.left))).getOr(Fe.before(n)),M5=(e,n,o)=>D5(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>Q3(DP(e,Fe.after(n)),r.left))).getOr(Fe.after(n)),EO=(e,n)=>{const o=n.getNode(e);return eu(o)?I.some(o):I.none()},cG=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Tl:ka,a=a5(n,me.fromDom(o),r);gh(n,a)})},W9=(e,n,o)=>{const r=EO(!!n,o),a=n===!1;r.fold(()=>gh(e,o.toRange()),u=>Kg(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>gh(e,o.toRange()),f=>cG(n,e,u)))},aG=(e,n,o,r)=>{const a=e.selection.getRng(),u=Fe.fromRangeStart(a),f=e.getBody();if(!n&&H9(r,u)){const b=dm(f,o,u);return W9(e,n,b),!0}else if(n&&z9(r,u)){const b=M5(f,o,u);return W9(e,n,b),!0}else return!1},Z9=(e,n,o)=>I.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>I.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),N5=(e,n)=>Z9(e,n,U9),Lv=(e,n)=>Z9(e,n,aG),j9=e=>{const n=Cp.exact(e,0,e,0);return i(n)},_E=(e,n,o)=>o.fold(I.none,I.none,(r,a)=>xO(a).map(u=>j9(u)),r=>(e.execCommand("mceTableInsertRowAfter"),kO(e,n,r))),kO=(e,n,o)=>_E(e,n,A9(o,bc)),B5=(e,n,o)=>_E(e,n,O9(o,bc)),_O=(e,n)=>{const o=["table","li","dl"],r=me.fromDom(e.getBody()),a=b=>{const C=No(b);return ls(b,r)||He(o,C)},u=e.selection.getRng(),f=me.fromDom(n?u.endContainer:u.startContainer);return ow(f,a).map(b=>(SO(b,a).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?kO:B5)(e,a,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},G9=(e,n,o)=>{const r=St.os.isMacOS()||St.os.isiOS();wE([{keyCode:pt.RIGHT,action:qn(g5,e,!0)},{keyCode:pt.LEFT,action:qn(g5,e,!1)},{keyCode:pt.UP,action:qn(Iv,e,!1)},{keyCode:pt.DOWN,action:qn(Iv,e,!0)},...r?[{keyCode:pt.UP,action:qn(ng,e,!1),metaKey:!0,shiftKey:!0},{keyCode:pt.DOWN,action:qn(ng,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:pt.RIGHT,action:qn(N5,e,!0)},{keyCode:pt.LEFT,action:qn(N5,e,!1)},{keyCode:pt.UP,action:qn(Lv,e,!1)},{keyCode:pt.DOWN,action:qn(Lv,e,!0)},{keyCode:pt.UP,action:qn(Lv,e,!1)},{keyCode:pt.UP,action:qn(y5,e,!1)},{keyCode:pt.DOWN,action:qn(y5,e,!0)},{keyCode:pt.RIGHT,action:qn(T5,e,!0)},{keyCode:pt.LEFT,action:qn(T5,e,!1)},{keyCode:pt.UP,action:qn(T9,e,!1)},{keyCode:pt.DOWN,action:qn(T9,e,!0)},{keyCode:pt.RIGHT,action:qn(zP,e,n,!0)},{keyCode:pt.LEFT,action:qn(zP,e,n,!1)},{keyCode:pt.RIGHT,ctrlKey:!r,altKey:r,action:qn(UP,e,n)},{keyCode:pt.LEFT,ctrlKey:!r,altKey:r,action:qn(WH,e,n)},{keyCode:pt.UP,action:qn(p5,e,!1)},{keyCode:pt.DOWN,action:qn(p5,e,!0)}],o).each(a=>{o.preventDefault()})},q9=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||G9(e,n,o)})},Gm=(e,n)=>({container:e,offset:n}),AE=kr.DOM,yb=e=>n=>e===n?-1:0,K9=e=>n=>e.isBlock(n)||He(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",AO=(e,n,o)=>{if(ut(e)&&n>=0)return I.some(Gm(e,n));{const r=Tf(AE);return I.from(r.backwards(e,n,yb(e),o)).map(a=>Gm(a.container,a.container.data.length))}},Y9=(e,n,o)=>{if(ut(e)&&n>=e.length)return I.some(Gm(e,n));{const r=Tf(AE);return I.from(r.forwards(e,n,yb(e),o)).map(a=>Gm(a.container,0))}},sw=(e,n,o)=>{if(!ut(e))return I.none();const r=e.data;if(n>=0&&n<=r.length)return I.some(Gm(e,n));{const a=Tf(AE);return I.from(a.backwards(e,n,yb(e),o)).bind(u=>{const f=u.container.data;return sw(u.container,n+f.length,o)})}},P5=(e,n,o)=>{if(!ut(e))return I.none();const r=e.data;if(n<=r.length)return I.some(Gm(e,n));{const a=Tf(AE);return I.from(a.forwards(e,n,yb(e),o)).bind(u=>P5(u.container,n-r.length,o))}},OO=(e,n,o,r,a)=>{const u=Tf(e,K9(e));return I.from(u.backwards(n,o,r,a))},$5=e=>e.collapsed&&ut(e.startContainer),X9=e=>vi(e.toString().replace(/\u00A0/g," ")),F5=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,J9=(e,n)=>e.substring(n.length),Q9=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&F5(f))return I.none();if(u===f&&an(e,o,a,n))break}return I.some(a)},DO=(e,n,o,r=!1)=>{if(!$5(n))return I.none();const a={text:"",offset:0},u=(b,C,E)=>(a.text=E+a.text,a.offset+=C,Q9(a.text,a.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return OO(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return I.none();const E=X9(C);return E.lastIndexOf(o)!==0?I.none():I.some({text:J9(E,o),range:C,trigger:o})})},ez=e=>e.nodeType===Rd,RO=e=>e.nodeType===Jc,I5=e=>{if(ez(e))return Gm(e,e.data.length);{const n=e.childNodes;return n.length>0?I5(n[n.length-1]):Gm(e,n.length)}},MO=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?MO(o[n],0):o.length>0&&RO(e)&&o.length===n?I5(o[o.length-1]):Gm(e,n)},tz=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return OO(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!F5(u)}).isSome()},nz=e=>n=>{const o=MO(n.startContainer,n.startOffset);return!tz(e,o)},oz=(e,n,o)=>$c(o.triggers,r=>DO(e,n,r)),sz=(e,n)=>{const o=n(),r=e.selection.getRng();return oz(e.dom,r,o).bind(a=>L5(e,n,a))},L5=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",C=Lt(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>nz(e.dom))(o.range,b,o.text));if(C.length===0)return I.none();const E=Promise.all(je(C,M=>M.fetch(o.text,M.maxResults,r).then(B=>({matchText:o.text,items:B,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return I.some({lookupData:E,context:o})};var qm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(qm||(qm={}));const Wc=(e,n,o)=>e.stype===qm.Error?n(e.serror):o(e.svalue),rz=e=>{const n=[],o=[];return ye(e,r=>{Wc(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},cz=(e,n)=>e.stype===qm.Error?{stype:qm.Error,serror:n(e.serror)}:e,az=(e,n)=>e.stype===qm.Value?{stype:qm.Value,svalue:n(e.svalue)}:e,H5=(e,n)=>e.stype===qm.Value?n(e.svalue):e,NO=(e,n)=>e.stype===qm.Error?n(e.serror):e,BO=e=>({stype:qm.Value,svalue:e}),ph=e=>({stype:qm.Error,serror:e}),Wa={fromResult:e=>e.fold(ph,BO),toResult:e=>Wc(e,Rl.error,Rl.value),svalue:BO,partition:rz,serror:ph,bind:H5,bindError:NO,map:az,mapError:cz,fold:Wc},rw=e=>st(e)&&ws(e).length>100?" removed due to size":JSON.stringify(e,null,2),PO=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:rt("... (only showing first ten failures)")}]):e;return je(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},cw=(e,n)=>Wa.serror([{path:e,getErrorInfo:n}]),OE=(e,n,o)=>cw(e,()=>'Could not find valid *required* value for "'+n+'" in '+rw(o)),DE=(e,n)=>cw(e,()=>'Choice schema did not contain choice key: "'+n+'"'),aw=(e,n,o)=>cw(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+rw(n)),lw=(e,n)=>cw(e,rt(n)),mm=(e,n,o,r)=>os(o,r).fold(()=>aw(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),iw=(e,n)=>({extract:(a,u)=>os(u,e).fold(()=>DE(a,e),b=>mm(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+ws(n)}),V5=(e,n)=>n,U5=(e,n)=>Zn(e)&&Zn(n)?uw(e,n):n,W5=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)un(a,u)&&(o[u]=e(o[u],a[u]))}return o},uw=W5(U5),Z5=W5(V5),j5=()=>({tag:"required",process:{}}),dw=e=>({tag:"defaultedThunk",process:e}),G5=e=>dw(rt(e)),iz=()=>({tag:"option",process:{}}),uz=(e,n)=>e.length>0?Wa.svalue(uw(n,Z5.apply(void 0,e))):Wa.svalue(n),q5=e=>A(Wa.serror,oa)(e),dz={consolidateObj:(e,n)=>{const o=Wa.partition(e);return o.errors.length>0?q5(o.errors):uz(o.values,n)},consolidateArr:e=>{const n=Wa.partition(e);return n.errors.length>0?q5(n.errors):Wa.svalue(n.values)}},mz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),fz=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),K5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},$O=e=>{const n=(r,a)=>Wa.bindError(e(a),u=>lw(r,u)),o=rt("val");return{extract:n,toString:o}},gz=$O(Wa.svalue),hz=(e,n,o,r)=>os(n,o).fold(()=>OE(e,o,n),r),Y5=(e,n,o,r)=>{const a=os(e,n).getOrThunk(()=>o(e));return r(a)},X5=(e,n,o)=>o(os(e,n)),J5=(e,n,o,r)=>{const a=os(e,n).map(u=>u===!0?o(e):u);return r(a)},Q5=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>Wa.svalue(I.none()),C=>{const E=a.extract(n.concat([r]),C);return Wa.map(E,I.some)});switch(e.tag){case"required":return hz(n,o,r,u);case"defaultedThunk":return Y5(o,r,e.process,u);case"option":return X5(o,r,f);case"defaultedOptionThunk":return J5(o,r,e.process,f);case"mergeWithThunk":return Y5(o,r,rt({}),b=>{const C=uw(e.process(o),b);return u(C)})}},pz=(e,n,o)=>{const r={},a=[];for(const u of o)K5(u,(f,b,C,E)=>{const M=Q5(C,e,n,f,E);Wa.fold(M,N=>{a.push(...N)},N=>{r[b]=N})},(f,b)=>{r[f]=b(n)});return a.length>0?Wa.serror(a):Wa.svalue(r)},FO=e=>({extract:(r,a)=>pz(r,a,e),toString:()=>`obj{
`+je(e,a=>K5(a,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),e$=e=>({extract:(r,a)=>{const u=je(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return dz.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),bz=e=>$O(n=>e(n).fold(Wa.serror,Wa.svalue)),t$=(e,n,o)=>{const r=n.extract([e],o);return Wa.mapError(r,a=>({input:o,errors:a}))},vz=(e,n,o)=>Wa.toResult(t$(e,n,o)),n$=e=>`Errors: 
`+PO(e.errors).join(`
`)+`

Input object: `+rw(e.input),o$=(e,n)=>iw(e,Mo(n,FO)),s$=rt(gz),mw=(e,n)=>$O(o=>{const r=typeof o;return e(o)?Wa.svalue(o):Wa.serror(`Expected type: ${n} but got: ${r}`)}),yz=mw(Go,"number"),RE=mw(ee,"string"),Cz=mw(Dt,"boolean"),IO=mw(ie,"function"),Hv=mz,r$=fz,wz=e=>bz(n=>He(e,n)?Rl.value(n):Rl.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),LO=(e,n)=>Hv(e,e,j5(),n),c$=e=>LO(e,RE),a$=e=>LO(e,IO),l$=(e,n)=>Hv(e,e,j5(),e$(n)),HO=(e,n)=>Hv(e,e,iz(),n),ME=e=>HO(e,RE),Sz=e=>HO(e,IO),i$=(e,n)=>Hv(e,e,G5(n),s$()),Cb=(e,n,o)=>Hv(e,e,G5(n),o),u$=(e,n)=>Cb(e,n,yz),xz=(e,n)=>Cb(e,n,RE),d$=(e,n,o)=>Cb(e,n,wz(o)),zO=(e,n)=>Cb(e,n,Cz),VO=(e,n)=>Cb(e,n,IO),Tz=(e,n,o)=>Cb(e,n,e$(o)),Ez=c$("type"),kz=a$("fetch"),m$=a$("onAction"),_z=VO("onSetup",()=>Pt),NE=ME("text"),f$=ME("icon"),g$=ME("tooltip"),Az=ME("label"),h$=zO("active",!1),p$=zO("enabled",!0),b$=zO("primary",!1),Oz=e=>i$("columns",e),fw=e=>xz("type",e),v$=FO([Ez,c$("trigger"),u$("minChars",1),Oz(1),u$("maxResults",10),Sz("matches"),kz,m$,Tz("highlightOn",[],RE)]),Dz=e=>vz("Autocompleter",v$,e),gw=[p$,g$,f$,NE,_z],y$=[h$].concat(gw),Rz=[VO("predicate",Me),d$("scope","node",["node","editor"]),d$("position","selection",["node","selection","line"])],Mz=gw.concat([fw("contextformbutton"),b$,m$,r$("original",Ho)]),C$=y$.concat([fw("contextformbutton"),b$,m$,r$("original",Ho)]),Nz=gw.concat([fw("contextformbutton")]),Bz=y$.concat([fw("contextformtogglebutton")]),Pz=o$("type",{contextformbutton:Mz,contextformtogglebutton:C$});FO([fw("contextform"),VO("initValue",rt("")),Az,l$("commands",Pz),HO("launch",o$("type",{contextformbutton:Nz,contextformtogglebutton:Bz}))].concat(Rz));const $z=e=>{const n=e.ui.registry.getAll().popups,o=Mo(n,f=>Dz(f).fold(b=>{throw new Error(n$(b))},Ho)),r=Ga(sc(o,f=>f.trigger)),a=jr(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Lt(a,b=>b.trigger===f)}},Fz=(e,n)=>{const o=Sf(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Ba=e=>{const n=fa(),o=Te(!1),r=n.isSet,a=()=>{r()&&(Tx(e),o.set(!1),n.clear())},u=N=>{r()||n.set({trigger:N.trigger,matchLength:N.text.length})},f=ze(()=>$z(e)),b=N=>n.get().map(B=>DO(e.dom,e.selection.getRng(),B.trigger,!0).bind(j=>L5(e,f,j,N))).getOrThunk(()=>sz(e,f)),C=N=>{b(N).fold(a,B=>{u(B.context),B.lookupData.then(j=>{n.get().map(Q=>{const q=B.context;Q.trigger===q.trigger&&(n.set({...Q,matchLength:q.text.length}),o.get()?(xx(e,{range:q.range}),ZC(e,{lookupData:j})):(o.set(!0),xx(e,{range:q.range}),Sx(e,{lookupData:j})))})})})},E=(N,B)=>{const j=N.compareBoundaryPoints(window.Range.START_TO_START,B),Q=N.compareBoundaryPoints(window.Range.END_TO_END,B);return j>=0&&Q<=0},M=()=>n.get().bind(({trigger:N})=>{const B=e.selection.getRng();return DO(e.dom,B,N,o.get()).filter(({range:j})=>E(B,j)).map(({range:j})=>j)});e.addCommand("mceAutocompleterReload",(N,B)=>{const j=st(B)?B.fetchOptions:{};C(j)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{M().each(N=>{xx(e,{range:N})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>M().isSome()),Fz(e,{cancelIfNecessary:a,load:C})},Iz=gt().browser.isSafari(),Lz=e=>bi(me.fromDom(e)),w$=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},BE=(e,n)=>I.from(e.getParent(n.container(),"details")),S$=(e,n)=>BE(e,n).isSome(),Hz=(e,n)=>{const o=I.from(e.getParent(n.startContainer,"details")),r=I.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>I.from(e.select("summary",u)[0]));return I.some({startSummary:a,startDetails:o,endDetails:r})}else return I.none()},x$=(e,n)=>hl(n).exists(o=>o.isEqual(e)),zv=(e,n)=>Fi(n).exists(o=>ms(o.getNode())&&Ci(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),uG=(e,n)=>n.startSummary.exists(o=>x$(e,o)),zz=(e,n)=>n.startSummary.exists(o=>zv(e,o)),Vz=(e,n)=>n.startDetails.exists(o=>Ci(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),Km=(e,n,o)=>o.startDetails.exists(r=>gl(e,n).forall(a=>!r.contains(a.container()))),T$=(e,n)=>{const o=n.getNode();cn(o)||e.selection.setCursorLocation(o,n.offset())},E$=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?hl(a):Fi(a)).each(f=>T$(e,f))}else T$(e,n)},k$=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(E=>C!==E));return(a||u)&&!(a&&u)||f},_$=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Fe.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),C=BE(r,f),E=b&&r.isEmpty(b),M=W(b==null?void 0:b.previousSibling),N=W(b==null?void 0:b.nextSibling);return E&&(n?N:M)&&Bm(!n,u,f).exists(Q=>S$(r,Q)&&!Yc(C,BE(r,Q)))?!0:Bm(n,u,f).fold(Me,B=>{const j=BE(r,B);if(S$(r,B)&&!Yc(C,j)){if(n||E$(e,B,!1),b&&E){if(n&&M)return!0;if(!n&&N)return!0;E$(e,B,n),e.dom.remove(b)}return!0}else return!1})}else return!1},UO=(e,n,o,r)=>{const u=e.selection.getRng(),f=Fe.fromRangeStart(u),b=e.getBody();return r==="selection"?k$(u,n):o?zz(f,n)||Km(b,f,n):uG(f,n)||Vz(f,n)},og=(e,n,o)=>Hz(e.dom,e.selection.getRng()).fold(()=>_$(e,n,o),r=>UO(e,r,n,o)||_$(e,n,o)),A$=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Fe.fromRangeStart(u);return ay(a)?(o==="selection"&&w$(u,a)||i2(n,f,a)?Lz(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:E,focusNode:M,focusOffset:N}=b??{};const B=()=>{Re(C)&&Re(E)&&Re(M)&&Re(N)&&(b==null||b.setBaseAndExtent(C,E,M,N))},j=()=>{C=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,M=b==null?void 0:b.focusNode,N=b==null?void 0:b.focusOffset},Q=(te,ve)=>{ye(te.childNodes,xe=>{pp(xe)&&ve.appendChild(xe)})},q=e.dom.create("span",{"data-mce-bogus":"1"});Q(a,q),a.appendChild(q),B(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&w$(r.getRng(),q)?Lz(a):(e.execCommand(n?"ForwardDelete":"Delete"),j(),Q(q,a),B()),e.dom.remove(q)}),!0):!1},Bp=(e,n,o)=>og(e,n,o)||Iz&&A$(e,n,o)?I.some(Pt):I.none(),O$=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:Pt,inputType:o},f=$u(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Pp=O$("input"),Vv=O$("beforeinput"),WO=gt(),ZO=WO.os,D$=ZO.isMacOS()||ZO.isiOS(),Uz=WO.browser.isFirefox(),Wz=(e,n,o)=>{const r=o.keyCode===pt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";x9([{keyCode:pt.BACKSPACE,action:qn(o5,e)},{keyCode:pt.BACKSPACE,action:qn(G3,e,!1)},{keyCode:pt.DELETE,action:qn(G3,e,!0)},{keyCode:pt.BACKSPACE,action:qn(H3,e,!1)},{keyCode:pt.DELETE,action:qn(H3,e,!0)},{keyCode:pt.BACKSPACE,action:qn(Q2,e,n,!1)},{keyCode:pt.DELETE,action:qn(Q2,e,n,!0)},{keyCode:pt.BACKSPACE,action:qn(Y1,e,!1)},{keyCode:pt.DELETE,action:qn(Y1,e,!0)},{keyCode:pt.BACKSPACE,action:qn(Bp,e,!1,u)},{keyCode:pt.DELETE,action:qn(Bp,e,!0,u)},...D$?[{keyCode:pt.BACKSPACE,altKey:!0,action:qn(Bp,e,!1,f(!0))},{keyCode:pt.DELETE,altKey:!0,action:qn(Bp,e,!0,f(!0))},{keyCode:pt.BACKSPACE,metaKey:!0,action:qn(Bp,e,!1,f(!1))}]:[{keyCode:pt.BACKSPACE,ctrlKey:!0,action:qn(Bp,e,!1,f(!0))},{keyCode:pt.DELETE,ctrlKey:!0,action:qn(Bp,e,!0,f(!0))}],{keyCode:pt.BACKSPACE,action:qn(cE,e,!1)},{keyCode:pt.DELETE,action:qn(cE,e,!0)},{keyCode:pt.BACKSPACE,action:qn(mO,e,!1)},{keyCode:pt.DELETE,action:qn(mO,e,!0)},{keyCode:pt.BACKSPACE,action:qn(tE,e,!1)},{keyCode:pt.DELETE,action:qn(tE,e,!0)},{keyCode:pt.BACKSPACE,action:qn(j2,e,!1)},{keyCode:pt.DELETE,action:qn(j2,e,!0)},{keyCode:pt.BACKSPACE,action:qn(uO,e,!1)},{keyCode:pt.DELETE,action:qn(uO,e,!0)},{keyCode:pt.BACKSPACE,action:qn(sE,e,!1)},{keyCode:pt.DELETE,action:qn(sE,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),Vv(e,r).isDefaultPrevented()||(b(),Pp(e,r))})},Zz=(e,n,o)=>wE([{keyCode:pt.BACKSPACE,action:qn(oE,e)},{keyCode:pt.DELETE,action:qn(oE,e)},...D$?[{keyCode:pt.BACKSPACE,altKey:!0,action:qn(nw,e)},{keyCode:pt.DELETE,altKey:!0,action:qn(nw,e)},...o?[{keyCode:Uz?224:91,action:qn(nw,e)}]:[]]:[{keyCode:pt.BACKSPACE,ctrlKey:!0,action:qn(nw,e)},{keyCode:pt.DELETE,ctrlKey:!0,action:qn(nw,e)}]],n),R$=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===pt.BACKSPACE,r.isDefaultPrevented()||Wz(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||Zz(e,r,o),o=!1})},jz=e=>{for(;e;){if(Ht(e)||ut(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Uv=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=jz(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Ac),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new da(n,n);let f=n,b;for(;b=u.current();){if(ut(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else ms(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),t2(e,a)},hw=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},jO=e=>I.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Gz=e=>jO(e).fold(rt(""),n=>n.nodeName.toUpperCase()),M$=e=>jO(e).filter(n=>Jl(me.fromDom(n))).isSome(),PE=e=>{e.innerHTML='<br data-mce-bogus="1">'},qz=(e,n,o)=>{const r=e.dom;I.from(o.style).map(r.parseStyle).each(C=>{const M={...La(me.fromDom(n)),...C};r.setStyles(n,M)});const a=I.from(o.class).map(C=>C.split(/\s+/)),u=I.from(n.className).map(C=>Lt(C.split(/\s+/),E=>E!==""));zr(a,u,(C,E)=>{const M=Lt(E,B=>!He(C,B)),N=[...C,...M];r.setAttrib(n,"class",N.join(" "))});const f=["style","class"],b=Jo(o,(C,E)=>!He(f,E));r.setAttribs(n,b)},pw=(e,n)=>{if(sl(e).toLowerCase()===n.tagName.toLowerCase()){const r=Df(e);qz(e,n,r)}},Kz=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,C=e.schema,E=sl(e),M=o?o.nodeName.toUpperCase():"";let N=n;const B=C.getTextInlineElements();let j;u||M==="TABLE"||M==="HR"?j=b.create(u||E,f||{}):j=o.cloneNode(!1);let Q=j;if(!a)b.setAttrib(j,"style",null),b.setAttrib(j,"class",null);else do if(B[N.nodeName]){if(Ii(N)||Li(N))continue;const q=N.cloneNode(!1);b.setAttrib(q,"id",""),j.hasChildNodes()?(q.appendChild(j.firstChild),j.appendChild(q)):(Q=q,j.appendChild(q))}while((N=N.parentNode)&&N!==r);return pw(e,j),PE(Q),j},GO=(e,n)=>e.dom.getParent(n,Kl),Yz=(e,n,o)=>{let r=n;for(;r&&r!==e&&W(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Kl(a);r=a}return!1},Xz=(e,n,o)=>!n&&o.nodeName.toLowerCase()===sl(e)&&e.dom.isEmpty(o)&&Yz(e.getBody(),o,r=>un(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Jz=(e,n,o)=>{var r,a,u;const f=n(sl(e)),b=GO(e,o);b&&(e.dom.insertAfter(f,b),Uv(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},N$=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,Qz=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},qO=(e,n)=>{const o=e==null?void 0:e.parentNode;return Re(o)&&o.nodeName===n},B$=e=>Re(e)&&/^(OL|UL|LI)$/.test(e.nodeName),KO=e=>Re(e)&&/^(LI|DT|DD)$/.test(e.nodeName),mG=e=>B$(e)&&B$(e.parentNode),Za=e=>{const n=e.parentNode;return KO(n)?n:e},$E=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ht(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},P$=e=>jn(sc(La(me.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),eV=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;mG(o)&&(a="LI");const C=KO(r)?P$(r):void 0;let E=KO(r)&&C?n(a,{style:P$(r)}):n(a);if($E(o,r,!0)&&$E(o,r,!1))if(qO(o,"LI")){const M=Za(o);u.insertAfter(E,M),Qz(o)?u.remove(M):u.remove(o)}else u.replace(E,o);else if($E(o,r,!0))qO(o,"LI")?(u.insertAfter(E,Za(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if($E(o,r,!1))u.insertAfter(E,Za(o)),u.remove(r);else{o=Za(o);const M=f.cloneRange();M.setStartAfter(r),M.setEndAfter(o);const N=M.extractContents();if(a==="LI"&&N$(N,"LI")){const B=Lt(je(E.children,me.fromDom),go(Xs("br")));E=N.firstChild,u.insertAfter(N,o),ye(B,j=>ym(me.fromDom(E),j)),C&&E.setAttribute("style",C)}else u.insertAfter(N,o),u.insertAfter(E,o);u.remove(r)}Uv(e,E)},tV=e=>{ye(Qa(me.fromDom(e),Be),n=>{const o=n.dom;o.nodeValue=vi(o.data)})},nV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},oV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),YO=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,Wv=(e,n)=>Re(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",sV=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ht(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||oV(e,u))&&e.remove(u)},XO=(e,n,o)=>ut(n)?e?o===1&&n.data.charAt(o-1)===lc?0:o:o===n.data.length-1&&n.data.charAt(o)===lc?n.data.length:o:o,JO=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,XO(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,XO(!1,e.endContainer,e.endOffset)),n},QO=e=>{let n=e;do ut(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},rV=(e,n,o,r,a)=>{var u,f;const b=e.dom,C=(u=hw(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!Wv(b,E)){if(E=E||C,!E.hasChildNodes()){const j=b.create(n);return pw(e,j),E.appendChild(j),o.setStart(j,0),o.setEnd(j,0),j}let M=r;for(;M&&M.parentNode!==E;)M=M.parentNode;let N;for(;M&&!b.isBlock(M);)N=M,M=M.previousSibling;const B=(f=N==null?void 0:N.parentElement)===null||f===void 0?void 0:f.nodeName;if(N&&B&&e.schema.isValidChild(B,n.toLowerCase())){const j=N.parentNode,Q=b.create(n);for(pw(e,Q),j.insertBefore(Q,N),M=N;M&&!b.isBlock(M);){const q=M.nextSibling;Q.appendChild(M),M=q}o.setStart(r,a),o.setEnd(r,a)}}return r},fG=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ht(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},gG=(e,n)=>{const o=Vc(e);return xn(n)?!1:ee(o)?He(dt.explode(o),n.nodeName.toLowerCase()):o},$$={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,C=e.schema,E=C.getNonEmptyElements(),M=e.selection.getRng(),N=sl(e),B=me.fromDom(M.startContainer),j=ku(B,M.startOffset),Q=j.exists(ot=>se(ot)&&!bc(ot)),q=M.collapsed&&Q,te=(ot,Xt)=>Kz(e,o,Tt,ct,E_(e),ot,Xt),ve=ot=>{const Xt=XO(ot,o,r);if(ut(o)&&(ot?Xt>0:Xt<o.data.length))return!1;if((o.parentNode===Tt||o===Tt)&&f&&!ot||ot&&Ht(o)&&o===Tt.firstChild)return!0;if(YO(o,"TABLE")||YO(o,"HR"))return f&&!ot||!f&&ot;const Cn=new da(o,Tt);ut(o)&&(ot&&Xt===0?Cn.prev():!ot&&Xt===o.data.length&&Cn.next());let fo;for(;fo=Cn.current();){if(Ht(fo)){if(!fo.getAttribute("data-mce-bogus")){const Lo=fo.nodeName.toLowerCase();if(E[Lo]&&Lo!=="br")return!1}}else if(ut(fo)&&!ui(fo.data))return!1;ot?Cn.prev():Cn.next()}return!0},xe=()=>{let ot;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&Vt!=="HGROUP"?ot=te(N):ot=te(),gG(e,u)&&Wv(b,u)&&b.isEmpty(Tt,void 0,{includeZwsp:!0})?ot=b.split(u,Tt):b.insertAfter(ot,Tt),Uv(e,ot),ot};Rt(b,M).each(ot=>{M.setStart(ot.startContainer,ot.startOffset),M.setEnd(ot.endContainer,ot.endOffset)}),o=M.startContainer,r=M.startOffset;const Ce=!!(n&&n.shiftKey),De=!!(n&&n.ctrlKey);Ht(o)&&o.hasChildNodes()&&!q&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ut(o)?r=o.data.length:r=0);const ct=hw(b,o);if(!ct||nV(e,o))return;Ce||(o=rV(e,N,M,o,r));let Tt=b.getParent(o,b.isBlock)||b.getRoot();u=Re(Tt==null?void 0:Tt.parentNode)?b.getParent(Tt.parentNode,b.isBlock):null,a=Tt?Tt.nodeName.toUpperCase():"";const Vt=u?u.nodeName.toUpperCase():"";if(Vt==="LI"&&!De){const ot=u;Tt=ot,u=ot.parentNode,a=Vt}if(Ht(u)&&Xz(e,Ce,Tt))return Jz(e,te,Tt);if(/^(LI|DT|DD)$/.test(a)&&Ht(u)&&b.isEmpty(Tt)){eV(e,te,u,Tt,N);return}if(!q&&(Tt===e.getBody()||!Wv(b,Tt)))return;const Ze=Tt.parentNode;let Ie;if(q)Ie=te(N),j.fold(()=>{xr(B,me.fromDom(Ie))},ot=>{ka(ot,me.fromDom(Ie))}),e.selection.setCursorLocation(Ie,0);else if(Pg(Tt))Ie=Yo(Tt),b.isEmpty(Tt)&&PE(Tt),pw(e,Ie),Uv(e,Ie);else if(ve(!1))Ie=xe();else if(ve(!0)&&Ze){const ot=Fe.fromRangeStart(M),Xt=WA(ot),Cn=me.fromDom(Tt),Lo=jA(Cn,ot,e.schema)?rM(Cn,ot,e.schema).bind(Ks=>I.from(Ks.getNode())):I.none();Ie=Ze.insertBefore(te(),Tt);const ks=YO(Tt,"HR")||Xt?Ie:Lo.getOr(Tt);Uv(e,ks)}else{const ot=JO(M).cloneRange();ot.setEndAfter(Tt);const Xt=ot.extractContents();tV(Xt),QO(Xt),Ie=Xt.firstChild,b.insertAfter(Xt,Tt),sV(b,E,Ie),fG(b,Tt),b.isEmpty(Tt)&&PE(Tt),Ie.normalize(),b.isEmpty(Ie)?(b.remove(Ie),xe()):(pw(e,Ie),Uv(e,Ie))}b.setAttrib(Ie,"id",""),e.dispatch("NewBlock",{newBlock:Ie})},fakeEventName:"insertParagraph"},pG=(e,n,o)=>{const r=new da(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||ut(a)&&a.length>0)return!0;return!1},F$=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),t2(e,r)},Ym=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;Rt(r,a).each(j=>{a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)});let b=a.startOffset,C=a.startContainer;if(Ht(C)&&C.hasChildNodes()){const j=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,j&&ut(C)?b=C.data.length:b=0}let E=r.getParent(C,r.isBlock);const M=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,N=M?M.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);N==="LI"&&!B&&(E=M),ut(C)&&b>=C.data.length&&(pG(e.schema,C,E||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),g1(r,a,u),F$(e,u,f),e.undoManager.add()},cV=(e,n)=>{const o=me.fromTag("br");ka(me.fromDom(n),o),e.undoManager.add()},I$=(e,n)=>{lV(e.getBody(),n)||Tl(me.fromDom(n),me.fromTag("br"));const o=me.fromTag("br");Tl(me.fromDom(n),o),F$(e,o.dom,!1),e.undoManager.add()},aV=e=>ms(e.getNode()),lV=(e,n)=>aV(Fe.after(n))?!0:gl(e,Fe.after(n)).map(o=>ms(o.getNode())).getOr(!1),L$=e=>e&&e.nodeName==="A"&&"href"in e,iV=e=>e.fold(Me,L$,L$,Me),uV=e=>{const n=Ke(xp,e),o=Fe.fromRangeStart(e.selection.getRng());return Td(n,e.getBody(),o).filter(iV)},dV=(e,n)=>{n.fold(Pt,Ke(cV,e),Ke(I$,e),Pt)},eD={insert:(e,n)=>{const o=uV(e);o.isSome()?o.each(Ke(dV,e)):Ym(e,n)},fakeEventName:"insertLineBreak"},bw=(e,n)=>jO(e).filter(o=>n.length>0&&Ka(me.fromDom(o),n)).isSome(),mV=e=>bw(e,Rf(e)),fV=e=>bw(e,T_(e)),Zu=Os.generate([{br:[]},{block:[]},{none:[]}]),gV=(e,n)=>fV(e),z$=e=>(n,o)=>M$(n)===e,tD=(e,n)=>(o,r)=>Gz(o)===e.toUpperCase()===n,hV=e=>{const n=hw(e.dom,e.selection.getStart());return xn(n)},Zv=e=>tD("pre",e),V$=()=>tD("summary",!0),FE=e=>(n,o)=>_S(n)===e,pV=(e,n)=>mV(e),jv=(e,n)=>n,bV=e=>{const n=sl(e),o=hw(e.dom,e.selection.getStart());return Re(o)&&e.schema.isValidChild(o.nodeName,n)},vV=e=>{const n=e.selection.getRng(),o=me.fromDom(n.startContainer),a=ku(o,n.startOffset).map(u=>se(u)&&!bc(u));return n.collapsed&&a.getOr(!0)},Ui=(e,n)=>(o,r)=>jn(e,(u,f)=>u&&f(o,r),!0)?I.some(n):I.none(),yV=(e,n)=>SP([Ui([gV],Zu.none()),Ui([Zv(!0),hV],Zu.none()),Ui([V$()],Zu.br()),Ui([Zv(!0),FE(!1),jv],Zu.br()),Ui([Zv(!0),FE(!1)],Zu.block()),Ui([Zv(!0),FE(!0),jv],Zu.block()),Ui([Zv(!0),FE(!0)],Zu.br()),Ui([z$(!0),jv],Zu.br()),Ui([z$(!0)],Zu.block()),Ui([pV],Zu.br()),Ui([jv],Zu.br()),Ui([bV],Zu.block()),Ui([vV],Zu.block())],[e,!!(n&&n.shiftKey)]).getOr(Zu.none()),Gv=(e,n,o)=>{n.selection.isCollapsed()||dL(n),!(Re(o)&&Vv(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Re(o)&&Pp(n,e.fakeEventName))},IE=(e,n)=>{const o=()=>Gv(eD,e,n),r=()=>Gv($$,e,n),a=yV(e,n);switch(u0(e)){case"linebreak":a.fold(o,o,Pt);break;case"block":a.fold(r,r,Pt);break;case"invert":a.fold(r,o,Pt);break;default:a.fold(o,r,Pt);break}},nD=gt(),CV=nD.os.isiOS()&&nD.browser.isSafari(),wV=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),$8(e.undoManager),e.undoManager.transact(()=>{IE(e,n)}))},$p=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(ut(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},SV=e=>{let n=I.none();const o=a=>{n=I.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(Pt,f=>a.selection.moveToBookmark(f)),wV(a,u),n=I.none()};e.on("keydown",a=>{a.keyCode===pt.ENTER&&(CV&&$p(e.selection.getRng())?o(e):wV(e,a))}),e.on("keyup",a=>{a.keyCode===pt.ENTER&&n.each(()=>r(e,a))})},xV=(e,n,o)=>{const r=St.os.isMacOS()||St.os.isiOS();wE([{keyCode:pt.END,action:qn(tg,e,!0)},{keyCode:pt.HOME,action:qn(tg,e,!1)},...r?[]:[{keyCode:pt.HOME,action:qn(ng,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:pt.END,action:qn(ng,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:pt.END,action:qn(E9,e,!0)},{keyCode:pt.HOME,action:qn(E9,e,!1)},{keyCode:pt.END,action:qn(um,e,!0,n)},{keyCode:pt.HOME,action:qn(um,e,!1,n)}],o).each(a=>{o.preventDefault()})},TV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||xV(e,n,o)})},LE=e=>{e.on("input",n=>{n.isComposing||pM(e)})},U$=gt(),W$=(e,n,o)=>{wE([{keyCode:pt.PAGE_UP,action:qn(um,e,!1,n)},{keyCode:pt.PAGE_DOWN,action:qn(um,e,!0,n)}],o)},Z$=e=>e.stopImmediatePropagation(),oD=e=>e.keyCode===pt.PAGE_UP||e.keyCode===pt.PAGE_DOWN,j$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",Z$,!0):!o&&e.get()&&n.off("NodeChange",Z$),e.set(o)},EV=(e,n)=>{if(U$.os.isMacOS())return;const o=Te(!1);e.on("keydown",r=>{oD(r)&&j$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||W$(e,n,r),oD(r)&&o.get()&&(j$(o,e,!1),e.nodeChanged())})},kV=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||vt(n.getTargetRanges(),o=>!PR(e.dom,o)))&&n.preventDefault()})},HE=(e,n)=>{const o=n.container(),r=n.offset();return ut(o)?(o.insertData(r,e),I.some(Fe(o,r+e.length))):M0(n).map(a=>{const u=me.fromText(e);return n.isAtEnd()?Tl(a,u):ka(a,u),Fe(u.dom,e.length)})},zE=Ke(HE,Ac),G$=Ke(HE," "),sD=(e,n,o)=>dM(e,n,o)?zE(n):G$(n),q$=e=>n=>n.fold(o=>Ci(e.dom,Fe.before(o)),o=>hl(o),o=>Fi(o),o=>gl(e.dom,Fe.after(o))),VE=(e,n,o)=>r=>dM(e,r,o)?zE(n):G$(n),rD=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},K$=(e,n)=>e.isEditable(e.getParent(n,"summary")),_V=e=>{const n=Fe.fromRangeStart(e.selection.getRng()),o=me.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ke(xp,e),a=Fe.fromRangeStart(e.selection.getRng());return Td(r,e.getBody(),a).bind(q$(o)).map(u=>()=>VE(o,n,e.schema)(u).each(rD(e)))}else return I.none()},AV=e=>{const n=()=>{const o=me.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Fe.fromRangeStart(e.selection.getRng());sD(o,r,e.schema).each(rD(e))};return $o(St.browser.isFirefox()&&e.selection.isEditable()&&K$(e.dom,e.selection.getRng().startContainer),n)},UE=(e,n)=>{x9([{keyCode:pt.SPACEBAR,action:qn(_V,e)},{keyCode:pt.SPACEBAR,action:qn(AV,e)}],n).each(o=>{n.preventDefault(),Vv(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Pp(e,"insertText",{data:" "}))})},Y$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||UE(e,n)})},OV=e=>F_(e)?[{keyCode:pt.TAB,action:qn(_O,e,!0)},{keyCode:pt.TAB,shiftKey:!0,action:qn(_O,e,!1)}]:[],DV=(e,n)=>{wE([...OV(e)],n).each(o=>{n.preventDefault()})},X$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||DV(e,n)})},RV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Ba(e),Xf(e))return Te(null);{const n=UH(e);return kV(e),d5(e),q9(e,n),R$(e,n),SV(e),Y$(e),LE(e),X$(e),TV(e,n),EV(e,n),n}};class MV{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&$C(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&$C(n)&&(n.selection.getNode().nodeName==="IMG"?Hu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!h0(this.editor)&&!this.editor.mode.isReadOnly()){const a=this.editor.getBody();r=o.getStart(!0)||a,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,a))&&(r=a);const u=[];this.editor.dom.getParent(r,f=>f===a?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,a=ps(r.dom.getParents(n,Je,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const J$=Uh("image"),NV=e=>{const n=e;return I.from(n[J$])},BV=(e,n)=>{const o=e;o[J$]=n},WE=Uh("event"),PV=e=>{const n=e;return I.from(n[WE])},vw=e=>n=>{const o=n;o[WE]=e},$V=(e,n)=>vw(n)(e),Q$=vw(0),FV=vw(2),IV=vw(1),qv=(e=>n=>{const o=n;return I.from(o[WE]).exists(r=>r===e)})(0),LV=()=>Object.freeze({length:0,item:e=>null}),cD=Uh("mode"),eF=e=>{const n=e;return I.from(n[cD])},ZE=e=>n=>{const o=n;o[cD]=e},tF=(e,n)=>ZE(n)(e),nF=ZE(0),jE=ZE(2),HV=ZE(1),oF=e=>n=>{const o=n;return I.from(o[cD]).exists(r=>r===e)},yw=oF(0),Cw=oF(1),zV=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(yw(e))if(ee(o)){if(!cn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{yw(e)&&n.remove(o)},clear:()=>{yw(e)&&n.clear()}}),VV=["none","copy","link","move"],UV=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],aD=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){He(VV,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){qv(r)&&He(UV,a)&&(o=a)},get items(){return zV(r,e.items)},get files(){return Cw(r)?LV():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{yw(r)&&(BV(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>Cw(r)?"":e.getData(a),setData:(a,u)=>{yw(r)&&e.setData(a,u)},clearData:a=>{yw(r)&&e.clearData(a)}};return nF(r),r},WV=e=>{const n=aD(),o=eF(e);return jE(e),Q$(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,NV(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ye(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ye(e.files,r=>n.items.add(r)),PV(e).each(r=>{$V(n,r)}),o.each(r=>{tF(e,r),tF(n,r)}),n},ZV=e=>{const n=e.getData("text/html");return n===""?I.none():I.some(n)},sF=(e,n)=>e.setData("text/html",n),rF="x-tinymce/html",GE=rt(rF),lD="<!-- "+rF+" -->",jV=e=>lD+e,GV=e=>e.replace(lD,""),cF=e=>e.indexOf(lD)!==-1,Sr=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),qV=(e,n)=>{let o="<"+e;const r=sc(n,(a,u)=>u+'="'+cd.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},aF=(e,n,o)=>{const r=e.split(/\n\n/),a=qV(n,o),u="</"+n+">",f=je(r,C=>C.split(/\n/).join("<br />")),b=C=>a+C+u;return f.length===1?f[0]:je(f,b).join("")},lF="%MCEPASTEBIN%",iD=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},lF);St.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},iF=(e,n)=>{const o=e.dom;if(uD(e)){let r;const a=n.get();for(;r=uD(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},uD=e=>e.dom.get("mcepastebin"),KV=e=>Re(e)&&e.id==="mcepastebin",uF=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Lt(e.getBody().childNodes,KV);ye(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},qE=e=>e===lF,YV=e=>{const n=Te(null);return{create:()=>iD(e,n),remove:()=>iF(e,n),getEl:()=>uD(e),getHtml:()=>uF(e),getLastRng:n.get}},dF=(e,n)=>(dt.each(n,o=>{Ue(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),XV=e=>{const n=Ud(),o=Kf({},n);let r="";const a=n.getVoidElements(),u=dt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const E=C.name,M=C;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(a[E]&&(r+=" "),u[E]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let N=C.firstChild;if(N)do b(N);while(N=N.next)}f[E]&&M.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=dF(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},dD=e=>(e=dF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":Ac],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),JV=e=>{let n=0;return()=>e+n++},QV=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return dt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},Kv=(e,n)=>{const o=Kf({sanitize:S0(e),sandbox_iframes:x0(e),sandbox_iframes_exclusions:T0(e),convert_unsafe_embeds:L_(e)},e.schema);o.addNodeFilter("meta",a=>{dt.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return sh({validate:!0},e.schema).serialize(r)},mF=(e,n)=>({content:e,cancelled:n}),Yv=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=gA(e,r,o);return mF(a.node.innerHTML,a.isDefaultPrevented())},ww=(e,n,o)=>{const r=fA(e,n,o),a=Kv(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?Yv(e,a,o):mF(a,r.isDefaultPrevented())},eU=(e,n,o)=>ww(e,n,o),mD=(e,n)=>(e.insertContent(n,{merge:VS(e),paste:!0}),!0),Fp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),tU=(e,n)=>Fp(n)&&vt(x1(e),o=>yo(n.toLowerCase(),`.${o.toLowerCase()}`)),fD=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),nU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),fF=(e,n,o)=>!e.selection.isCollapsed()&&Fp(n)?nU(e,n,o):!1,gF=(e,n,o)=>tU(e,n)?fD(e,n,o):!1,gD=(e,n)=>{dt.each([fF,gF,mD],o=>!o(e,n,mD))},hF=(e,n,o)=>{o||!US(e)?mD(e,n):gD(e,n)},oU=JV("mceclip"),sU=e=>{const n=aD();return sF(n,e),jE(n),n},hD=(e,n,o,r,a)=>{const u=eU(e,n,o);if(!u.cancelled){const f=u.content,b=()=>hF(e,f,r);a?Vv(e,"insertFromPaste",{dataTransfer:sU(f)}).isDefaultPrevented()||(b(),Pp(e,"insertFromPaste")):b()}},KE=(e,n,o,r)=>{const a=o||cF(n);hD(e,GV(n),a,!1,r)},YE=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Ri(r,v0(e)),u=aF(a,sl(e),Df(e));hD(e,u,!1,!0,o)},XE=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},vh=(e,n)=>n in e&&e[n].length>0,pF=e=>vh(e,"text/html")||vh(e,"text/plain"),rU=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Re(o)?e.dom.encode(o[1]):void 0},cU=(e,n,o,r)=>{const a=oU(),u=Uc(e)&&Re(o.name),f=u?rU(e,o.name):a,b=u?o.name:void 0,C=n.create(a,o,r,f,b);return n.add(C),C},bF=(e,n)=>{j4(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),E=C??cU(e,b,f,u);KE(e,`<img src="${E.blobUri()}">`,!1,!0)})},pD=e=>e.type==="paste",aU=e=>Promise.all(je(e,n=>kN(n).then(o=>({file:n,uri:o})))),vF=e=>{const n=x1(e);return o=>yn(o.type,"image/")&&vt(n,r=>QV(r)===o.type)},yF=(e,n)=>{const o=n.items?Us(gr(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?gr(n.files):[];return Lt(o.length>0?o:r,vF(e))},CF=(e,n,o)=>{const r=pD(n)?n.clipboardData:n.dataTransfer;if(S1(e)&&r){const a=yF(e,r);if(a.length>0)return n.preventDefault(),aU(a).then(u=>{o&&e.selection.setRng(o),ye(u,f=>{bF(e,f)})}),!0}return!1},wF=e=>{var n,o;return St.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},lU=e=>pt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,bD=(e,n,o,r,a)=>{let u=dD(o);const f=vh(n,GE())||cF(o),b=!f&&Sr(u),C=Fp(u);(qE(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(vh(n,"text/plain")&&b?u=n["text/plain"]:u=XV(u)),!qE(u)&&(r?YE(e,u,a):KE(e,u,f,a))},iU=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{lU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||wF(u))return;const f=o.get()==="text"||r;r=!1;const b=XE(u.clipboardData);!pF(b)&&CF(e,u,a())||(vh(b,"text/html")?(u.preventDefault(),bD(e,b,b["text/html"],f,!0)):vh(b,"text/plain")&&vh(b,"text/uri-list")?(u.preventDefault(),bD(e,b,b["text/plain"],f,!0)):(n.create(),Hu.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),bD(e,b,C,f,!1)},0)))})},uU=e=>{const n=a=>yn(a,"webkit-fake-url"),o=a=>yn(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!S1(e)&&r(f))for(const b of a){const C=b.attr("src");ee(C)&&!b.attr("data-mce-object")&&C!==St.transparentSrc&&(n(C)||!np(e)&&o(C))&&b.remove()}})},dU=(e,n,o)=>{iU(e,n,o),uU(e)},JE=(e,n)=>{n.get()==="text"?(n.set("html"),ev(e,!1)):(n.set("text"),ev(e,!0)),e.focus()},mU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{JE(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&KE(e,r.html,r.internal,!1),r.text&&YE(e,r.text,!1)})},SF=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(GE(),n),!0}catch{return!1}else return!1},xF=(e,n,o,r)=>{SF(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},TF=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),a.setRng(C),Hu.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},vD=e=>({html:jV(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),EF=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),kF=e=>!e.selection.isCollapsed()||EF(e),fU=e=>n=>{!n.isDefaultPrevented()&&kF(e)&&e.selection.isEditable()&&xF(n,vD(e),TF(e),()=>{if(St.browser.isChromium()||St.browser.isFirefox()){const o=e.selection.getRng();Hu.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},gU=e=>n=>{!n.isDefaultPrevented()&&kF(e)&&xF(n,vD(e),TF(e),Pt)},hU=e=>{e.on("cut",fU(e)),e.on("copy",gU(e))},_F=(e,n)=>{var o,r;return at.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},AF=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},OF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},pU=e=>vt(e.files,n=>/^image\//.test(n.type)),bU=(e,n,o,r)=>{const a=e.getParent(o,f=>ou(n,f));if(!W(e.getParent(o,"summary")))return!0;if(a&&un(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!W(f.querySelector(a.nodeName.toLowerCase()))}else return!1},vU=e=>{e.on("input",n=>{const o=r=>W(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Lt(e.dom.select("details"),o);ye(r,a=>{ms(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Ng().dom),a.prepend(u)})}})},yU=(e,n)=>{dC(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),S1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&pU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=_F(e,o);if(xn(r))return;const a=XE(o.dataTransfer),u=vh(a,GE());if((!pF(a)||AF(a))&&CF(e,o,r))return;const f=a[GE()],b=f||a["text/html"]||a["text/plain"],C=bU(e.dom,e.schema,r.startContainer,a),E=n.get();E&&!C||b&&(o.preventDefault(),Hu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&C)&&e.execCommand("Delete"),OF(e,r);const M=dD(b);a["text/html"]?KE(e,M,u,!0):YE(e,M,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{S1(e)&&!n.get()&&(o.preventDefault(),OF(e,_F(e,o))),o.type==="dragend"&&n.set(!1)}),vU(e)},CU=e=>{const n=a=>u=>{a(e,u)},o=mC(e);ie(o)&&e.on("PastePreProcess",n(o));const r=LS(e);ie(r)&&e.on("PastePostProcess",n(r))},wU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},SU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,yD=e=>dt.trim(e).replace(SU,ld).toLowerCase(),DF=(e,n,o)=>{const r=zS(e);if(o||r==="all"||!N_(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,E,M)=>{const N=u.parseStyle(u.decode(E)),B={};for(let Q=0;Q<a.length;Q++){const q=N[a[Q]];let te=q,ve=u.getStyle(f,a[Q],!0);/color/.test(a[Q])&&(te=yD(te),ve=yD(ve)),ve!==te&&(B[a[Q]]=q)}const j=u.serializeStyle(B,"span");return j?C+' style="'+j+'"'+M:C+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},xU=e=>{(St.browser.isChromium()||St.browser.isSafari())&&wU(e,DF)},TU=e=>{const n=Te(!1),o=Te(WS(e)?"text":"html"),r=YV(e);xU(e),mU(e,o),CU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{hU(e),yU(e,n),dU(e,r,o)})},EU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},kU=e=>{e.parser.addNodeFilter("details",n=>{const o=I_(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=jS(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},_U=e=>{EU(e),kU(e)},AU=ms,RF=ut,QE=e=>is(e.dom),MF=e=>Ye(e.dom),NF=e=>n=>ls(me.fromDom(e),n),BF=(e,n,o)=>Rr(me.fromDom(e),r=>MF(r)||o.isBlock(No(r)),NF(n)).getOr(me.fromDom(n)).dom,CD=(e,n)=>Rr(me.fromDom(e),QE,NF(n)),ek=(e,n,o)=>{const r=new da(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!AU(f);f=a())fd(f)&&(u=f);return u},OU=(e,n,o)=>{const a=Fe.fromRangeStart(e).getNode(),u=BF(a,n,o),f=ek(a,u,!1),b=ek(a,u,!0),C=document.createRange();return CD(f,u).fold(()=>{RF(f)?C.setStart(f,0):C.setStartBefore(f)},E=>C.setStartBefore(E.dom)),CD(b,u).fold(()=>{RF(b)?C.setEnd(b,b.data.length):C.setEndAfter(b)},E=>C.setEndAfter(E.dom)),C},PF=e=>{const n=OU(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(wr(n))},DU=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),PF(e))})};var wb;(function(e){e.Before="before",e.After="after"})(wb||(wb={}));const RU=(e,n)=>Math.abs(e.left-n),$F=(e,n)=>Math.abs(e.right-n),MU=(e,n)=>e>=n.top&&e<=n.bottom,NU=(e,n)=>e.top<n.bottom&&e.bottom>n.top,BU=(e,n)=>{const o=r_(e,n)/Math.min(e.height,n.height);return NU(e,n)&&o>.5},Sw=(e,n)=>{const o=Lt(e,r=>MU(n,r));return Ir(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=vo(e,f=>BU(f,r));return[a,u]})},PU=(e,n)=>({node:e.node,position:RU(e,n)<$F(e,n)?wb.Before:wb.After}),$U=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),tk=(e,n,o,r)=>{const a=N=>fd(N.node)?I.some(N):Ht(N.node)?tk(gr(N.node.childNodes),n,o,!1):I.none(),u=(N,B,j)=>a(B).filter(Q=>Math.abs(j(N,n,o)-j(Q,n,o))<2&&ut(Q.node)),f=(N,B)=>{const j=ns(N,(Q,q)=>B(Q,n,o)-B(q,n,o));return $c(j,a).map(Q=>r&&!ut(Q.node)&&j.length>1?u(Q,j[1],B).getOr(Q):Q)},[b,C]=Sw(BP(e),o),{pass:E,fail:M}=vo(C,N=>N.top<o);return f(b,$U).orThunk(()=>f(M,My)).orThunk(()=>f(E,My))},FU=(e,n,o,r)=>{const a=(u,f)=>{const b=E=>Ht(E)&&E.classList.contains("mce-drag-container"),C=Lt(u.dom.childNodes,go(b));return f.fold(()=>tk(C,o,r,!0),E=>{const M=Lt(C,N=>N!==E.dom);return tk(M,o,r,!0)}).orThunk(()=>(ls(u,e)?I.none():ci(u)).bind(M=>a(M,I.some(u))))};return a(n,I.none())},IU=(e,n,o)=>{const r=me.fromDom(e),a=kc(r),f=me.fromPoint(a,n,o).filter(b=>Ta(r,b)).getOr(r);return FU(r,f,n,o)},FF=(e,n,o)=>IU(e,n,o).filter(r=>Rm(r.node)).map(r=>PU(r,n)),IF=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},LU=e=>e.inline?IF(e.getBody()):{left:0,top:0},nk=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},LF=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},HF=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=IF(e.getContentAreaContainer()),r=LF(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},HU=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),zU=(e,n)=>HU(LU(e),nk(e),HF(e,n)),zF=e=>({target:e,srcElement:e}),yG=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...zF(o)}),VU=(e,n,o)=>{const r=Vs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Pt,stopImmediatePropagation:Pt,stopPropagation:Pt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...zF(n)}},VF=(e,n)=>{const o=WV(e);return n==="dragstart"?(Q$(o),nF(o)):n==="drop"?(FV(o),jE(o)):(IV(o),HV(o)),o},wD=(e,n,o,r)=>{const a=VF(o,e);return cn(r)?VU(e,n,a):yG(e,r,n,a)},Sb=32,UU=100,ok=8,xw=16,UF=is,SD=Ny(UF,Ye),WF=(e,n,o)=>UF(o)&&o!==n&&e.isEditable(o.parentElement),WU=(e,n,o)=>xn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),ZU=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},ZF=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},sk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},jU=sk("left",-Sb),jF=sk("left",Sb),GF=sk("top",-Sb),qF=sk("top",Sb),KF=(e,n,o,r,a,u,f,b,C,E,M,N)=>{let B=0,j=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(B=n.pageX+o-a),n.pageY+r>u&&(j=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-j+"px";const Q=C.clientHeight,q=C.clientWidth,te=f+C.getBoundingClientRect().top,ve=b+C.getBoundingClientRect().left;M.on(xe=>{xe.intervalId.clear(),xe.dragging&&N&&(f+ok>=Q?xe.intervalId.set(qF(E)):f-ok<=0?xe.intervalId.set(GF(E)):b+ok>=q?xe.intervalId.set(jF(E)):b-ok<=0?xe.intervalId.set(jU(E)):te+xw>=window.innerHeight?xe.intervalId.set(qF(window)):te-xw<=0?xe.intervalId.set(GF(window)):ve+xw>=window.innerWidth?xe.intervalId.set(jF(window)):ve-xw<=0&&xe.intervalId.set(jU(window)))})},YF=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},XF=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);YF(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&bi(me.fromDom(o))},GU=e=>e.button===0,qU=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),KU=(e,n)=>o=>{if(GU(o)){const r=Vo(n.dom.getParents(o.target),SD).getOr(null);if(Re(r)&&WF(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:aD(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:ZU(n,r,r.offsetWidth,r.offsetHeight),intervalId:gf(UU)})}}},YU=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),FF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===wb.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},Tw=(e,n,o,r,a)=>{n==="dragstart"&&sF(r,e.dom.getOuterHTML(o));const u=wD(n,o,r,a);return e.dispatch(n,u)},JF=(e,n)=>{const o=r1((a,u)=>YU(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=Tw(n,"dragstart",u.element,u.dataTransfer,a);if(Re(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,C=qU(u,zU(n,a));ZF(u.ghost,n.getBody()),KF(u.ghost,C,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},CG=e=>{const n=e.getSel();if(Re(n)){const r=n.getRangeAt(0).startContainer;return ut(r)?r.parentNode:r}else return null},XU=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(WU(n,CG(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();Tw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{XF(n.dom,r.element),ZV(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}Tw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),rk(e)},xD=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Tw(n,"dragend",r.element,r.dataTransfer),a=>Tw(n,"dragend",r.element,r.dataTransfer,a))}),rk(e)},JU=(e,n)=>o=>xD(e,n,I.some(o)),rk=e=>{e.on(n=>{n.intervalId.clear(),YF(n.ghost)}),e.clear()},QU=e=>{const n=fa(),o=kr.DOM,r=document,a=KU(n,e),u=JF(n,e),f=XU(n,e),b=JU(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===pt.ESC&&xD(n,e,I.none())})},eW=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(He(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&YT(e,"Dropped file type is not supported"))}},o=a=>{Fx(e,a.target)&&n(a)},r=()=>{const a=kr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];ye(C,E=>{a.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{ye(C,E=>{a.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{Hu.setEditorTimeout(e,r,0)})},tW=e=>{QU(e),FS(e)&&eW(e)},QF=e=>{const n=r1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=nE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},ck=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(_a(o)){const r=ah(e.getBody(),o),a=is(r)?r:o;e.selection.getNode()!==a&&Rv(e,a).each(u=>e.selection.setRng(u))}})})},Xv=is,TD=(e,n)=>ah(e.getBody(),n),nW=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=KS(e,r,o.isBlock,()=>U1(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=Vt=>Re(Vt)&&o.hasClass(Vt,"mce-offscreen-selection"),E=Vt=>Vt!==r&&(Xv(Vt)||_a(Vt))&&o.isChildOf(Vt,r)&&o.isEditable(Vt.parentNode),M=Vt=>{Vt&&n.setRng(Vt)},N=(Vt,Ze,Ie,ot=!0)=>e.dispatch("ShowCaret",{target:Ze,direction:Vt,before:Ie}).isDefaultPrevented()?null:(ot&&n.scrollIntoView(Ze,Vt===-1),a.show(Ie,Ze)),B=Vt=>{Vt.hasAttribute("data-mce-caret")&&(Yo(Vt),n.scrollIntoView(Vt))},j=()=>{e.on("click",Ze=>{o.isEditable(Ze.target)||(Ze.preventDefault(),e.focus())}),e.on("blur NewBlock",De),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",Ze=>{const Ie=Ze.target,ot=TD(e,Ie);Xv(ot)?(Ze.preventDefault(),Rv(e,ot).each(Ce)):E(Ie)&&Rv(e,Ie).each(Ce)},!0),e.on("mousedown",Ze=>{const Ie=Ze.target;if(Ie!==r&&Ie.nodeName!=="HTML"&&!o.isChildOf(Ie,r)||!N7(e,Ze.clientX,Ze.clientY))return;De(),Tt();const ot=TD(e,Ie);Xv(ot)?(Ze.preventDefault(),Rv(e,ot).each(Ce)):FF(r,Ze.clientX,Ze.clientY).each(Xt=>{Ze.preventDefault();const Cn=N(1,Xt.node,Xt.position===wb.Before,!1);M(Cn),ql(ot)?ot.focus():e.getBody().focus()})}),e.on("keypress",Ze=>{pt.modifierPressed(Ze)||Xv(n.getNode())&&Ze.preventDefault()}),e.on("GetSelectionRange",Ze=>{let Ie=Ze.range;if(b){if(!b.parentNode){b=null;return}Ie=Ie.cloneRange(),Ie.selectNode(b),Ze.range=Ie}}),e.on("SetSelectionRange",Ze=>{Ze.range=te(Ze.range);const Ie=Ce(Ze.range,Ze.forward);Ie&&(Ze.range=Ie)});const Vt=Ze=>Ht(Ze)&&Ze.id==="mcepastebin";e.on("AfterSetSelectionRange",Ze=>{const Ie=Ze.range,ot=Ie.startContainer.parentElement;!q(Ie)&&!Vt(ot)&&Tt(),C(ot)||De()}),tW(e),QF(e),ck(e)},Q=Vt=>yi(Vt)||Fg(Vt)||Gd(Vt),q=Vt=>Q(Vt.startContainer)||Q(Vt.endContainer),te=Vt=>{const Ze=e.schema.getVoidElements(),Ie=o.createRng(),ot=Vt.startContainer,Xt=Vt.startOffset,Cn=Vt.endContainer,fo=Vt.endOffset;return un(Ze,ot.nodeName.toLowerCase())?Xt===0?Ie.setStartBefore(ot):Ie.setStartAfter(ot):Ie.setStart(ot,Xt),un(Ze,Cn.nodeName.toLowerCase())?fo===0?Ie.setEndBefore(Cn):Ie.setEndAfter(Cn):Ie.setEnd(Cn,fo),Ie},ve=(Vt,Ze)=>{const Ie=me.fromDom(e.getBody()),ot=e.getDoc(),Xt=fn(Ie,"#"+u).getOrThunk(()=>{const Lo=me.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ot);return Eo(Lo,"id",u),xr(Ie,Lo),Lo}),Cn=o.createRng();li(Xt),_u(Xt,[me.fromText(Ac,ot),me.fromDom(Ze),me.fromText(Ac,ot)]),Cn.setStart(Xt.dom.firstChild,1),Cn.setEnd(Xt.dom.lastChild,0),to(Xt,{top:o.getPos(Vt,e.getBody()).y+"px"}),sv(Xt);const fo=n.getSel();return fo&&(fo.removeAllRanges(),fo.addRange(Cn)),Cn},xe=Vt=>{const Ze=Vt.cloneNode(!0),Ie=e.dispatch("ObjectSelected",{target:Vt,targetClone:Ze});if(Ie.isDefaultPrevented())return null;const ot=ve(Vt,Ie.targetClone),Xt=me.fromDom(Vt);return ye(Vr(me.fromDom(e.getBody()),`*[${f}]`),Cn=>{ls(Xt,Cn)||Or(Cn,f)}),o.getAttrib(Vt,f)||Vt.setAttribute(f,"1"),b=Vt,Tt(),ot},Ce=(Vt,Ze)=>{if(!Vt)return null;if(Vt.collapsed){if(!q(Vt)){const Cn=Ze?1:-1,fo=Gg(Cn,r,Vt),Lo=fo.getNode(!Ze);if(Re(Lo)){if(Rm(Lo))return N(Cn,Lo,Ze?!fo.isAtEnd():!1,!1);if(md(Lo)&&is(Lo.nextSibling)){const Ks=o.createRng();return Ks.setStart(Lo,0),Ks.setEnd(Lo,0),Ks}}const ks=fo.getNode(Ze);if(Re(ks)){if(Rm(ks))return N(Cn,ks,Ze?!1:!fo.isAtEnd(),!1);if(md(ks)&&is(ks.previousSibling)){const Ks=o.createRng();return Ks.setStart(ks,1),Ks.setEnd(ks,1),Ks}}}return null}let Ie=Vt.startContainer,ot=Vt.startOffset;const Xt=Vt.endOffset;if(ut(Ie)&&ot===0&&Xv(Ie.parentNode)&&(Ie=Ie.parentNode,ot=o.nodeIndex(Ie),Ie=Ie.parentNode),!Ht(Ie))return null;if(Xt===ot+1&&Ie===Vt.endContainer){const Cn=Ie.childNodes[ot];if(E(Cn))return xe(Cn)}return null},De=()=>{b&&b.removeAttribute(f),fn(me.fromDom(e.getBody()),"#"+u).each(js),b=null},ct=()=>{a.destroy(),b=null},Tt=()=>{a.hide()};return Xf(e)||j(),{showCaret:N,showBlockCaretContainer:B,hideFakeCaret:Tt,destroy:ct}},oW=(e,n)=>{let o=n;for(let r=e.previousSibling;ut(r);r=r.previousSibling)o+=r.data.length;return o},ED=(e,n,o,r,a)=>{if(ut(o)&&(r<0||r>o.data.length))return[];const u=a&&ut(o)?[oW(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},kD=(e,n,o,r,a,u,f=!1)=>{const b=ED(e,n,o,r,f),C=ED(e,n,a,u,f);return{start:b,end:C}},eI=(e,n)=>{const o=n.slice(),r=o.pop();return Go(r)?jn(o,(u,f)=>u.bind(b=>I.from(b.childNodes[f])),I.some(e)).bind(u=>ut(u)&&(r<0||r>u.data.length)?I.none():I.some({node:u,offset:r})):I.none()},tI=(e,n)=>eI(e,n.start).bind(({node:o,offset:r})=>eI(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),_D=(e,n,o,r=!1)=>kD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Jv=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,ut(n.firstChild)&&ui(n.firstChild.data)),Jv(e,r,o)}},ak=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ut(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ut(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Jv(e,a,o),a!==u&&Jv(e,u,o))},lk=(e,n)=>I.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),AD=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:_f(r).concat(e.blockPatterns),inlinePatterns:Da(r).concat(e.inlinePatterns)}},OD=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},nI=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ew=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},DD=(e,n,o)=>{const r=tI(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),C=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(nI(e,n+"-end"),f),start:C.insertBefore(nI(e,n+"-start"),b)}},ik=(e,n,o)=>{Jv(e,e.get(n.prefix+"-end"),o),Jv(e,e.get(n.prefix+"-start"),o)},kw=e=>e.start.length===0,sW=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},uk=(e,n,o,r)=>{const a=n.start;return OO(e,r.container,r.offset,sW(a),o).bind(f=>{var b,C;const E=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&C!==void 0?C:-1;if(E!==-1&&f.offset>=E+a.length){const N=e.createRng();return N.setStart(f.container,f.offset-a.length),N.setEnd(f.container,f.offset),I.some(N)}else{const N=f.offset-a.length;return sw(f.container,N,o).map(B=>{const j=e.createRng();return j.setStart(B.container,B.offset),j.setEnd(f.container,f.offset),j}).filter(B=>B.toString()===a).orThunk(()=>uk(e,n,o,Gm(f.container,0)))}})},rW=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),I.some(f)}return AO(o,r,a).bind(f=>uk(e,n,a,f).bind(C=>{var E;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return I.none();if(f.offset===0&&((E=C.endContainer.textContent)===null||E===void 0?void 0:E.length)===C.endOffset)return I.none()}return I.some(C)}))},cW=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return sw(b,C-o.pattern.end.length,n).bind(E=>{const M=kD(a,u,E.container,E.offset,b,C,r);if(kw(f))return I.some({matches:[{pattern:f,startRng:M,endRng:M}],position:E});{const N=_w(e,o.remainingPatterns,E.container,E.offset,n,r),B=N.getOr({matches:[],position:E}),j=B.position;return rW(a,f,j.container,j.offset,n,N.isNone()).map(q=>{const te=_D(a,u,q,r);return{matches:B.matches.concat([{pattern:f,startRng:te,endRng:M}]),position:Gm(q.startContainer,q.startOffset)}})}})},_w=(e,n,o,r,a,u)=>{const f=e.dom;return AO(o,r,f.getRoot()).bind(b=>{const C=OD(f,a,o,r);for(let E=0;E<n.length;E++){const M=n[E];if(!yo(C,M.end))continue;const N=n.slice();N.splice(E,1);const B=cW(e,a,{pattern:M,remainingPatterns:N,position:b},u);if(B.isNone()&&r>0)return _w(e,n,o,r-1,a,u);if(B.isSome())return B}return I.none()})},oI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ye(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},aW=(e,n,o,r)=>{const a=Ew(e.dom,o);ak(e.dom,a,r),oI(e,n,a)},lW=(e,n,o,r,a)=>{const u=e.dom,f=Ew(u,r),b=Ew(u,o);ak(u,b,a),ak(u,f,a);const C={prefix:o.prefix,start:o.end,end:r.start},E=Ew(u,C);oI(e,n,E)},iW=(e,n)=>{const o=Uh("mce_textpattern"),r=hs(n,(a,u)=>{const f=DD(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return hs(r,(a,u)=>{const f=r.length-a.length-1,b=kw(u.pattern)?u.endMarker:DD(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},uW=e=>ns(e,(n,o)=>o.end.length-n.end.length),dW=(e,n)=>{const o=Bs(e,r=>vt(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},sI=(e,n,o,r,a,u)=>{const f=_w(e,a.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=_w(e,uW(a.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return dW(f,b)},RD=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=iW(o,n);ye(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;kw(u.pattern)?aW(e,u.pattern,u.endMarker,b):lW(e,u.pattern,u.startMarker,u.endMarker,b),ik(o,u.endMarker,b),ik(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},rI=(e,n,o)=>Y9(n,0,n).map(r=>{const a=r.container;return P5(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),ak(e,f,b=>b===n)}),a}),dk=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=tI(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,C)=>{const E=C.get(b);return it(E)&&lo(E).exists(M=>un(M,"block"))};return lk(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},mW=e=>ns(e,(n,o)=>o.start.length-n.start.length),cI=e=>(n,o)=>{const r=mW(n),a=o.replace(Ac," ");return Vo(r,u=>e(u,o,a))},aI=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const C=o.dom,E=sl(o);return C.is(r,E)?e(a.blockPatterns,f).map(M=>n&&dt.trim(f).length===M.start.length?[]:[{pattern:M,range:kD(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},fW=e=>/^\s[^\s]/.test(e),gW=dk((e,n,o)=>{rI(e,n,o).each(r=>{const a=me.fromDom(r),u=c1(a);fW(u)&&Kb(a,u.slice(1))})}),mk=cI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),hW=aI(mk,!0),pW=(e,n)=>{const o=e.selection.getRng();return lk(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=AD(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=sI(e,r,o.startContainer,u,f,!0),C=hW(e,r,f,!0);return{inlineMatches:b,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},bW=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ye(n,r=>gW(e,r)),e.selection.moveToBookmark(o)},vW=dk(rI),yW=cI((e,n,o)=>n===e.start||o===e.start),CW=aI(yW,!1),wW=(e,n)=>{const o=e.selection.getRng();return lk(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=OD(e.dom,r,o.startContainer,a),f=AD(n,r,u);return CW(e,r,f,!1,u)}).filter(r=>r.length>0)},SW=(e,n)=>{ye(n,o=>vW(e,o))},xW=(e,n)=>pW(e,n).fold(Me,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{aR(e),RD(e,o),bW(e,r);const a=e.selection.getRng(),u=AO(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Oh&&(b.deleteData(f.offset-1,1),Jv(e.dom,b.parentNode,C=>C===e.dom.getRoot()))})}),!0)),lI=(e,n)=>{const o=e.selection.getRng();lk(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=OD(e.dom,r,o.startContainer,a),f=AD(n,r,u),b=sI(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{RD(e,b)})})},TW=(e,n)=>wW(e,n).fold(Me,o=>(e.undoManager.transact(()=>{SW(e,o)}),!0)),MD=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},EW=(e,n)=>MD(e,n,(o,r)=>o===r.keyCode&&!pt.modifierPressed(r)),kW=(e,n)=>MD(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),iI=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Af(ZS(e),B_(e)),a=()=>Nf(e);e.on("keydown",f=>{if(f.keyCode===13&&!pt.modifierPressed(f)&&e.selection.isCollapsed()){const b=jy(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&xW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const b=jy(r(),"space");(b.blockPatterns.length>0||a())&&TW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=jy(r(),"space");(f.inlinePatterns.length>0||a())&&lI(e,f)}};e.on("keyup",f=>{EW(o,f)&&u()}),e.on("keypress",f=>{kW(n,f)&&Hu.setEditorTimeout(e,u)})},Aw=e=>{iI(e)},_W=e=>{const n=dt.each,o=pt.BACKSPACE,r=pt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=St.browser,C=b.isFirefox(),E=b.isChromium()||b.isSafari(),M=St.deviceType.isiPhone()||St.deviceType.isiPad(),N=St.os.isMacOS()||St.os.isiOS(),B=($t,An)=>{try{e.getDoc().execCommand($t,!1,String(An))}catch{}},j=$t=>$t.isDefaultPrevented(),Q=()=>{const $t=_o=>{const zt=a.create("body"),Ao=_o.cloneContents();return zt.appendChild(Ao),u.serializer.serialize(zt,{format:"html"})},An=_o=>{const zt=$t(_o),Ao=a.createRng();Ao.selectNode(e.getBody());const Uo=$t(Ao);return zt===Uo};e.on("keydown",_o=>{const zt=_o.keyCode;if(!j(_o)&&(zt===r||zt===o)&&e.selection.isEditable()){const Ao=e.selection.isCollapsed(),Uo=e.getBody();if(Ao&&!nu(e.schema,Uo)||!Ao&&!An(e.selection.getRng()))return;_o.preventDefault(),e.setContent(""),Uo.firstChild&&a.isBlock(Uo.firstChild)?e.selection.setCursorLocation(Uo.firstChild,0):e.selection.setCursorLocation(Uo,0),e.nodeChanged()}})},q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},te=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",$t=>{let An;if($t.target===e.getDoc().documentElement)if(An=u.getRng(),e.getBody().focus(),$t.type==="mousedown"){if(yi(An.startContainer))return;u.placeCaretAt($t.clientX,$t.clientY)}else u.setRng(An)})},ve=()=>{e.on("keydown",$t=>{if(!j($t)&&$t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const An=u.getNode(),_o=An.previousSibling;if(An.nodeName==="HR"){a.remove(An),$t.preventDefault();return}_o&&_o.nodeName&&_o.nodeName.toLowerCase()==="hr"&&(a.remove(_o),$t.preventDefault())}}})},xe=()=>{Range.prototype.getClientRects||e.on("mousedown",$t=>{if(!j($t)&&$t.target.nodeName==="HTML"){const An=e.getBody();An.blur(),Hu.setEditorTimeout(e,()=>{An.focus()})}})},Ce=()=>{const $t=lC(e);e.on("click",An=>{const _o=An.target;/^(IMG|HR)$/.test(_o.nodeName)&&a.isEditable(_o)&&(An.preventDefault(),e.selection.select(_o),e.nodeChanged()),_o.nodeName==="A"&&a.hasClass(_o,$t)&&_o.childNodes.length===0&&a.isEditable(_o.parentNode)&&(An.preventDefault(),u.select(_o))})},De=()=>{const $t=()=>{const _o=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const zt=u.getStart();zt!==e.getBody()&&(a.setAttrib(zt,"style",null),n(_o,Ao=>{zt.setAttributeNode(Ao.cloneNode(!0))}))}},An=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",_o=>{let zt;return!j(_o)&&(_o.keyCode===8||_o.keyCode===46)&&An()?(zt=$t(),e.getDoc().execCommand("delete",!1),zt(),_o.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",_o=>{if(!j(_o)&&An()){const zt=$t();Hu.setEditorTimeout(e,()=>{zt()})}})},ct=()=>{e.on("keydown",$t=>{if(!j($t)&&$t.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const An=u.getNode().previousSibling;if(An&&An.nodeName&&An.nodeName.toLowerCase()==="table")return $t.preventDefault(),!1}return!0})},Tt=()=>{e.on("keydown",$t=>{if(j($t)||$t.keyCode!==pt.BACKSPACE)return;let An=u.getRng();const _o=An.startContainer,zt=An.startOffset,Ao=a.getRoot();let Uo=_o;if(!(!An.collapsed||zt!==0)){for(;Uo.parentNode&&Uo.parentNode.firstChild===Uo&&Uo.parentNode!==Ao;)Uo=Uo.parentNode;Uo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Uo),An=a.createRng(),An.setStart(_o,0),An.setEnd(_o,0),u.setRng(An))}})},Vt=()=>{const $t=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),Bi(e)||B("enableObjectResizing",!1)};PS(e)||e.on("BeforeExecCommand mousedown",$t)},Ze=()=>{const $t=()=>{n(a.select("a:not([data-mce-block])"),An=>{var _o;let zt=An.parentNode;const Ao=a.getRoot();if((zt==null?void 0:zt.lastChild)===An){for(;zt&&!a.isBlock(zt);){if(((_o=zt.parentNode)===null||_o===void 0?void 0:_o.lastChild)!==zt||zt===Ao)return;zt=zt.parentNode}a.add(zt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",An=>{(An.type==="setcontent"||An.command==="mceInsertLink")&&$t()})},Ie=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",sl(e))})},ot=$t=>{const An=$t.getBody(),_o=$t.selection.getRng();return _o.startContainer===_o.endContainer&&_o.startContainer===An&&_o.startOffset===0&&_o.endOffset===An.childNodes.length},Xt=()=>{e.on("keyup focusin mouseup",$t=>{!pt.modifierPressed($t)&&!ot(e)&&u.normalize()},!0)},Cn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},fo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Lo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",$t=>{let An;$t.target.nodeName==="HTML"&&(An=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(An),e.selection.normalize(),e.nodeChanged())}))},ks=()=>{N&&e.on("keydown",$t=>{pt.metaKeyPressed($t)&&!$t.shiftKey&&($t.keyCode===37||$t.keyCode===39)&&($t.preventDefault(),e.selection.getSel().modify("move",$t.keyCode===37?"backward":"forward","lineboundary"))})},Ks=()=>{e.on("click",$t=>{let An=$t.target;do if(An.tagName==="A"){$t.preventDefault();return}while(An=An.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},nc=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",$t=>{$t.preventDefault()})})},ja=()=>{f.addNodeFilter("br",$t=>{let An=$t.length;for(;An--;)$t[An].attr("class")==="Apple-interchange-newline"&&$t[An].remove()})},zs=Pt,Ot=()=>{if(!C||e.removed)return!1;const $t=e.selection.getSel();return!$t||!$t.rangeCount||$t.rangeCount===0},hn=()=>{E&&(te(),Ce(),nc(),q(),M&&(fo(),Lo(),Ks())),C&&(xe(),Vt(),Cn(),ks())},ds=()=>{Tt(),Q(),St.windowsPhone||Xt(),E&&(te(),Ce(),Ie(),nc(),ct(),ja(),M?(fo(),Lo(),Ks()):q()),C&&(ve(),xe(),De(),Vt(),Ze(),Cn(),ks(),ct())};return Xf(e)?hn():ds(),{refreshContentEditable:zs,isHidden:Ot}},uI=e=>e.toLowerCase()==="gpl",AW=e=>e.length>=64&&e.length<=255,OW=e=>uI(e)||AW(e)?"VALID":"INVALID",DW=e=>{const n=T1(e);!ee(fC(e))&&(cn(n)||OW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},ND=kr.DOM,dI=(e,n)=>{const o=me.fromDom(e.getBody()),r=of(xl(o)),a=me.fromTag("style");Eo(a,"type","text/css"),xr(a,me.fromText(n)),xr(r,a),e.on("remove",()=>{js(a)})},RW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,fk=e=>Jo(e,n=>cn(n)===!1),mI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return fk({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:RW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:T0(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},fI=e=>{const n=e.options.get;return fk({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},MW=e=>{const n=e.options.get;return{...mI(e),...fI(e),...fk({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},NW=e=>{const n=Kf(mI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=a.serializeStyle(a.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),C0(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new xi("br",1))}}),n},BW=e=>{const n=b0(e);n&&Hu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},PW=e=>{const n=e.dom.getRoot();!e.inline&&(!$C(e)||e.selection.getStart(!0)===n)&&hl(n).each(o=>{const r=o.getNode(),a=eu(r)?hl(r).getOr(o):o;e.selection.setRng(a.toRange())})},$W=e=>{e.bindPendingEventDelegates(),e.initialized=!0,mA(e),e.focus(!0),PW(e),e.nodeChanged({initial:!0});const n=R_(e);ie(n)&&n.call(e,e),BW(e)},BD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,FW=(e,n,o)=>{const{pass:r,fail:a}=vo(n,b=>tinymce.Resource.has(A3(b))),f=[...r.map(b=>{const C=tinymce.Resource.get(A3(b));return ee(C)?Promise.resolve(BD(e).loadRawCss(b,C)):Promise.resolve()}),BD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},PD=e=>{const n=BD(e),o=Ql(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let C="";dt.each(e.contentStyles,E=>{C+=E+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(FW(e,r,o)).then(u).catch(u),b=k_(e);return b&&dI(e,b),f},$D=e=>{const n=e.getDoc(),o=e.getBody();Cx(e),IS(e)||(n.body.spellcheck=!1,ND.setAttrib(o,"spellcheck","false")),e.quirks=_W(e),Y0(e);const r=iR(e);r!==void 0&&(o.dir=r);const a=uC(e);a&&e.on("BeforeSetContent",u=>{dt.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},gI=e=>{Xf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},gk=e=>{e.removed!==!0&&(gI(e),$W(e))},IW=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},hI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(ND.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=PS(e),e._editableRoot=O_(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&ND.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=j7(e),e.schema=Ud(fI(e)),e.dom=kr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:OS(e),referrerPolicy:m0(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=NW(e),e.serializer=w3(MW(e),e),e.selection=MB(e.dom,e.getWin(),e.serializer,e),e.annotator=Qd(e),e.formatter=JB(e),e.undoManager=B3(e),e._nodeChangeDispatcher=new MV(e),e._selectionOverrides=nW(e),bE(e),_U(e),g9(e),Xf(e)||(DU(e),Aw(e));const a=RV(e);a9(e,a),d9(e),Q7(e),TU(e);const u=yB(e);$D(e),DW(e),u.fold(()=>{const f=IW(e);PD(e).then(()=>{gk(e),f()})},f=>{e.setProgressState(!0),PD(e).then(()=>{f().then(b=>{e.setProgressState(!1),gk(e),OB(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),gk(e),OB(e)})})})},LW=Je,pI=(e,n,o)=>kh(e,n,LW,o),hk=kr.DOM,HW=(e,n,o,r)=>{const a=me.fromTag("iframe");return r.each(u=>Eo(a,"tabindex",u)),Xr(a,o),Xr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Eu(a,"tox-edit-area__iframe"),a},zW=e=>{let n=S_(e)+"<html><head>";Ra(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=x_(e),r=Of(e),a=e.translate(iC(e));return Jy(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Jy(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},FD=(e,n)=>{const o=St.browser.isFirefox()?iC(e):"Rich Text Area",r=e.translate(o),a=Pr(me.fromDom(e.getElement()),"tabindex").bind(fc),u=HW(e.id,r,Fu(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=zW(e),hk.add(n.iframeContainer,u)},pk=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,hI(e)};if(Bl(e)||St.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=pI(me.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},bk=(e,n)=>{FD(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=hk.isHidden(n.editorContainer)),e.getElement().style.display="none",hk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,pk(e)},sg=kr.DOM,vk=(e,n,o)=>{const r=Ev.get(o),a=Ev.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=dt.trim(o),r&&dt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,ie(u.init)&&(u.init(e,a),n.push(o))}catch(u){_3(e,o,u)}}},Qv=e=>e.replace(/^\-/,""),bI=e=>{const n=[];ye(w1(e),o=>{vk(e,n,Qv(o))})},VW=e=>{const n=dt.trim(ea(e)),o=e.ui.registry.getAll().icons,r={...xv.get("default").icons,...xv.get(n).icons};ht(r,(a,u)=>{un(o,u)||e.ui.registry.addIcon(u,a)})},UW=e=>{const n=Mf(e);if(ee(n)){const o=Wm.get(n);e.theme=o(e,Wm.urls[n])||{},ie(e.theme.init)&&e.theme.init(e,Wm.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},vI=e=>{const n=g0(e),o=Tv.get(n);e.model=o(e,Tv.urls[n])},WW=e=>{const n=e.theme.renderUI;return n?n():Lp(e)},ID=e=>{const n=e.getElement(),r=Mf(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Ow=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Ip=e=>{const n=sg.create("div");return sg.insertAfter(n,e),Ow(n,n)},Lp=e=>{const n=e.getElement();return e.inline?Ow(null):Ip(n)},yI=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Mf(e))?WW(e):ie(Mf(e))?ID(e):Lp(e)},ZW=(e,n)=>{const o={show:I.from(n.show).getOr(Pt),hide:I.from(n.hide).getOr(Pt),isEnabled:I.from(n.isEnabled).getOr(Je),setEnabled:r=>{e.mode.isReadOnly()||I.from(n.setEnabled).each(a=>a(r))}};e.ui={...e.ui,...o}},jW=async e=>{e.dispatch("ScriptsLoaded"),VW(e),UW(e),vI(e),bI(e);const n=await yI(e);ZW(e,I.from(n.api).getOr({})),e.editorContainer=n.editorContainer,U7(e),e.inline?hI(e):bk(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},xb=kr.DOM,CI=e=>e.charAt(0)==="-",GW=(e,n)=>{const o=f0(n),r=Hg(n);if(!ga.hasCode(o)&&o!=="en"){const a=Bn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{L7(n,a,o)})}},qW=(e,n)=>{const o=Mf(e);if(ee(o)&&!CI(o)&&!un(Wm.urls,o)){const r=nC(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Wm.load(o,a).catch(()=>{Jj(e,a,o)})}},wI=(e,n)=>{const o=g0(e);if(o!=="plugin"&&!un(Tv.urls,o)){const r=DS(e),a=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Tv.load(o,a).catch(()=>{Zm(e,a,o)})}},KW=e=>I.from(Mc(e)).filter(Bn).map(n=>({url:n,name:I.none()})),SI=(e,n,o)=>I.from(n).filter(r=>Bn(r)&&!xv.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:I.some(r)})),YW=(e,n,o)=>{const r=SI(n,"default",o),a=KW(n).orThunk(()=>SI(n,ea(n),""));ye(Ys([r,a]),u=>{e.add(u.url).catch(()=>{I7(n,u.url,u.name.getOrUndefined())})})},SG=(e,n)=>{const o=(r,a)=>{Ev.load(r,a).catch(()=>{F7(e,a,r)})};ht(D_(e),(r,a)=>{o(a,r),e.options.set("plugins",w1(e).concat(a))}),ye(w1(e),r=>{r=dt.trim(r),r&&!Ev.urls[r]&&!CI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},XW=e=>{const n=Mf(e);return!ee(n)||Re(Wm.get(n))},LD=e=>{const n=g0(e);return Re(Tv.get(n))},JW=(e,n)=>{const o=id.ScriptLoader,r=()=>{!e.removed&&XW(e)&&LD(e)&&jW(e)};qW(e,n),wI(e,n),GW(o,e),YW(o,e,n),SG(e,n),o.loadQueue().then(r,r)},QW=(e,n)=>Dc.forElement(e,{contentCssCors:$S(n),referrerPolicy:m0(n)}),xI=e=>{const n=e.id;ga.setCode(f0(e));const o=()=>{xb.unbind(window,"ready",o),e.render()};if(!wf.Event.domLoaded){xb.bind(window,"ready",o);return}if(!e.getElement())return;const r=me.fromDom(e.getElement()),a=Zl(r);e.on("remove",()=>{ln(r.dom.attributes,f=>Or(r,f.name)),Xr(r,a)}),e.ui.styleSheetLoader=QW(r,e),Ug(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||xb.getParent(n,"form");u&&(e.formElement=u,rC(e)&&!Mr(e.getElement())&&(xb.insertAfter(xb.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},xb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),cC(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=k3(e),e.notificationManager=UB(e),Pf(e)&&e.on("GetContent",f=>{f.save&&(f.content=xb.encode(f.content))}),NS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),BS(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),JW(e,e.suffix)},eZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),jC(e,n))},TI=e=>e._editableRoot,tZ=(e,n)=>({sections:rt(e),options:rt(n)}),yk=gt().deviceType,EI=yk.isPhone(),nZ=yk.isTablet(),Dw=e=>{if(xn(e))return[];{const n=it(e)?e:e.split(/[ ,]/),o=je(n,Sc);return Lt(o,Bn)}},oZ=(e,n)=>{const o=Hr(n,(r,a)=>He(e,a));return tZ(o.t,o.f)},kI=(e,n,o={})=>{const r=e.sections(),a=os(r,n).getOr({});return dt.extend({},o,a)},Rw=(e,n)=>un(e.sections(),n),_I=(e,n)=>Rw(e,n)?e.sections()[n]:{},HD=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:os(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),sZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?dt.extend({},e.external_plugins,r):r},xG=(e,n)=>[...Dw(e),...Dw(n)],TG=(e,n,o,r)=>e&&Rw(n,"mobile")?r:o,rZ=(e,n,o,r)=>{const a=Dw(o.forced_plugins),u=Dw(r.plugins),f=_I(n,"mobile"),b=f.plugins?Dw(f.plugins):u,C=TG(e,n,u,b),E=xG(a,C);return dt.extend(r,{forced_plugins:a,plugins:E})},AI=(e,n)=>e&&Rw(n,"mobile"),cZ=(e,n,o,r,a)=>{var u;const f=e?{mobile:HD((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=oZ(["mobile"],uw(f,a)),C=dt.extend(o,r,b.options(),AI(e,b)?kI(b,"mobile"):{},{external_plugins:sZ(r,b.options())});return rZ(e,b,r,C)},aZ=(e,n)=>{const o=Z5(n);return cZ(EI||nZ,EI,o,e,o)},lZ=(e,n)=>e7(e,n),EG=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{ye("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},kG=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return vt(a,u=>Re(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},OI=e=>{EG(e),kG(e)},DI=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(St.os.isMacOS()||St.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},iZ=(e,n,o,r)=>{const a=me.fromDom(e.getRoot());return c2(a,Fe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),a2(a,Fe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},uZ=e=>{if(typeof e!="string"){const n=dt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},dZ=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?iZ(r,o.getRng(),n,e.schema):n},zD=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=uZ(n);a3(e,{...r,content:dZ(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=AB(e,a.content,r);l3(e,u,a),e.addVisual()})}},_G=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{zD(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{zD(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{zD(e,r)},mceInsertContent:(n,o,r)=>{zD(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(HS(e))}})},AG={"font-size":"size","font-family":"face"},mZ=Xs("font"),OG=(e,n,o)=>{const r=u=>Xa(u,e).orThunk(()=>mZ(u)?os(AG,e).bind(f=>Pr(u,f)):I.none()),a=u=>ls(me.fromDom(n),u);return w4(me.fromDom(o),u=>r(u),a)},fZ=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Tb=(e,n)=>I.from(kr.DOM.getStyle(n,e,!0)),Ck=e=>(n,o)=>I.from(o).map(me.fromDom).filter(ke).bind(r=>OG(e,n,r.dom).or(Tb(e,r.dom))).getOr(""),wk=Ck("font-size"),RI=A(fZ,Ck("font-family")),MI=e=>hl(e.getBody()).bind(n=>{const o=n.container();return I.from(ut(o)?o.parentNode:o)}),NI=e=>I.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?I.none():I.from(e.selection.getStart(!0))}),gZ=(e,n)=>NI(e).orThunk(Ke(MI,e)).map(me.fromDom).filter(ke).bind(n),VD=(e,n)=>gZ(e,To(I.some,n)),BI=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Bf(e),a=$_(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},hZ=e=>{const n=e.split(/\s*,\s*/);return je(n,o=>o.indexOf(" ")!==-1&&!(yn(o,'"')||yn(o,"'"))?`'${o}'`:o).join(",")},pZ=(e,n)=>{const o=BI(e,n);e.formatter.toggle("fontname",{value:hZ(o)}),e.nodeChanged()},bZ=e=>VD(e,n=>RI(e.getBody(),n.dom)).getOr(""),Hp=(e,n)=>{e.formatter.toggle("fontsize",{value:BI(e,n)}),e.nodeChanged()},vZ=e=>VD(e,n=>wk(e.getBody(),n.dom)).getOr(""),PI=e=>VD(e,n=>{const o=me.fromDom(e.getBody()),r=w4(n,u=>Xa(u,"line-height"),Ke(ls,o)),a=()=>{const u=parseFloat($r(n,"line-height")),f=parseFloat($r(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),yZ=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Sk=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{pZ(e,a)},FontSize:(o,r,a)=>{Hp(e,a)},LineHeight:(o,r,a)=>{yZ(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(ee(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},CZ=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>bZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>vZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>PI(e))},wZ=e=>{Sk(e),CZ(e)},SZ=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},$I=e=>{e.editorCommands.addCommands({Indent:()=>{s9(e)},Outdent:()=>{hO(e)}}),e.editorCommands.addCommands({Outdent:()=>hh(e)},"state")},xZ=e=>{const n=(o,r,a)=>{const u=ee(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");st(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},TZ=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return I.from(f).map(me.fromDom)},FI=(e,n)=>{const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=hw(o,u);if(!f||!f.isContentEditable)return;const b=n?ka:Tl,C=sl(e);TZ(e,a,f,u).each(E=>{const M=Kz(e,u,E.dom,f,!1,C);b(E,me.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),Pp(e,"insertParagraph")})},EZ=e=>FI(e,!0),UD=e=>FI(e,!1),kZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{EZ(e)},InsertNewBlockAfter:()=>{UD(e)}})},_Z=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Gv($$,e)},mceInsertNewLine:(n,o,r)=>{IE(e,r)},InsertLineBreak:(n,o,r)=>{Gv(eD,e)}})},ya=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>Ht(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ye);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},AZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{NA(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},OZ=e=>{OI(e),DI(e),SZ(e),ya(e),_G(e),xZ(e),$I(e),kZ(e),_Z(e),wZ(e),AZ(e)},WD=["toggleview"],ZD=e=>He(WD,e.toLowerCase());class xk{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():xR(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return ie(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!ZD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ie(r)?r(o):!1}queryCommandValue(n){if(!ZD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ie(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ht(n,(a,u)=>{ye(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Eb="data-mce-contenteditable",DZ=(e,n,o)=>{Nd(e,n)&&!o?Oi(e,n):o&&Eu(e,n)},jD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Tk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},RZ=e=>{ye(Vr(e,'*[contenteditable="true"]'),n=>{Eo(n,Eb,"true"),Tk(n,!1)})},MZ=e=>{ye(Vr(e,`*[${Eb}="true"]`),n=>{Or(n,Eb),Tk(n,!0)})},NZ=e=>{I.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},BZ=e=>{e.selection.setRng(e.selection.getRng())},ey=(e,n)=>{const o=me.fromDom(e.getBody());DZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),NZ(e),e.readonly=!0,Tk(o,!1),RZ(o)):(e.readonly=!1,e.hasEditableRoot()&&Tk(o,!0),MZ(o),jD(e,"StyleWithCSS",!1),jD(e,"enableInlineTableEditing",!1),jD(e,"enableObjectResizing",!1),o2(e)&&e.focus(),BZ(e),e.nodeChanged())},ki=e=>e.readonly,II=e=>{e.parser.addAttributeFilter("contenteditable",n=>{ki(e)&&ye(n,o=>{o.attr(Eb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Eb,n=>{ki(e)&&ye(n,o=>{o.attr("contenteditable",o.attr(Eb))})}),e.serializer.addTempAttr(Eb)},PZ=e=>{e.serializer?II(e):e.on("PreInit",()=>{II(e)})},$Z=e=>e.type==="click",FZ=["copy"],IZ=e=>He(FZ,e.type),LZ=(e,n)=>Di(n,"a",r=>ls(r,me.fromDom(e.getBody()))).bind(r=>Pr(r,"href")),HZ=(e,n)=>{if($Z(n)&&!pt.metaKeyPressed(n)){const o=me.fromDom(n.target);LZ(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${on(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else IZ(n)&&e.dispatch(n.type,n)},zZ=e=>{e.on("ShowCaret",n=>{ki(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{ki(e)&&n.preventDefault()})},VZ=dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class LI{static isNative(n){return!!VZ[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Me}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=by(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),a.isImmediatePropagationStopped())return a;if(C.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=Me),o){const u={func:o,removed:!1};a&&dt.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let E=this.bindings[C];E||(E=[],this.toggleEvent(C,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[C]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return ht(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=vo(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,ye(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ht(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Mw=e=>(e._eventDispatcher||(e._eventDispatcher=new LI({scope:e,toggleEvent:(n,o)=>{LI.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),GD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return by(e.toLowerCase(),n??{},r);const a=Mw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return Mw(this).on(e,n,o)},off(e,n){return Mw(this).off(e,n)},once(e,n){return Mw(this).once(e,n)},hasEventListeners(e){return Mw(this).has(e)}},Ek=kr.DOM;let kb;const kk=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=hd(e);return o?(e.eventRoot||(e.eventRoot=Ek.select(o)[0]),e.eventRoot):e.getBody()},UZ=e=>!e.hidden&&!ki(e),WZ=(e,n,o)=>{UZ(e)?e.dispatch(n,o):ki(e)&&HZ(e,o)},HI=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=kk(e,n);if(hd(e)){if(kb||(kb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||kb&&(ht(kb,(a,u)=>{e.dom.unbind(kk(e,u))}),kb=null)})),kb[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||Ek.isChildOf(u,C))&&WZ(f[b],n,a)}};kb[n]=r,Ek.bind(o,n,r)}else{const r=a=>{WZ(e,n,a)};Ek.bind(o,n,r),e.delegates[n]=r}},zI={...GD,bindPendingEventDelegates(){const e=this;dt.each(e._pendingNativeEvents,n=>{HI(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?HI(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(kk(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ht(e.delegates,(r,a)=>{e.dom.unbind(kk(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},ZZ=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:co(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},jZ=e=>{const n=(()=>{switch(e){case"array":return it;case"boolean":return Dt;case"function":return ie;case"number":return Go;case"object":return st;case"string":return ee;case"string[]":return ZZ;case"object[]":return o=>co(o,st);case"regexp":return o=>Ue(o,RegExp);default:return Je}})();return o=>qD(o,n,`The value must be a ${e}.`)},GZ=e=>ee(e.processor),VI=(e,n)=>{const o=mo(n.message)?"":`. ${n.message}`;return e+o},UI=e=>e.valid,qD=(e,n,o="")=>{const r=n(e);return Dt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},qZ=(e,n,o)=>{if(!cn(n)){const r=qD(n,o);if(UI(r))return r.value;console.error(VI(`Invalid default value passed for the "${e}" option`,r))}},KZ=(e,n,o=n)=>{const r={},a={},u=(j,Q,q)=>{const te=qD(Q,q);return UI(te)?(a[j]=te.value,!0):(console.warn(VI(`Invalid value passed for the ${j} option`,te)),!1)},f=(j,Q)=>{const q=GZ(Q)?jZ(Q.processor):Q.processor,te=qZ(j,Q.default,q);r[j]={...Q,default:te,processor:q},os(a,j).orThunk(()=>os(n,j)).each(xe=>u(j,xe,q))},b=j=>un(r,j);return{register:f,isRegistered:b,get:j=>os(a,j).orThunk(()=>os(r,j).map(Q=>Q.default)).getOrUndefined(),set:(j,Q)=>{if(b(j)){const q=r[j];return q.immutable?(console.error(`"${j}" is an immutable option and cannot be updated`),!1):u(j,Q,q.processor)}else return console.warn(`"${j}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:j=>{const Q=b(j);return Q&&delete a[j],Q},isSet:j=>un(a,j),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(j,Q)=>Dt(Q)||Go(Q)||ee(Q)||W(Q)||it(Q)||Zn(Q)?Q:Object.prototype.toString.call(Q))))}catch(j){console.error(j)}}}},YZ=["design","readonly"],WI=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&ey(e,u.editorReadOnly),n.set(r),iA(e,r)},XZ=(e,n,o,r)=>{if(r!==o.get()){if(!un(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?WI(e,o,n,r):e.on("init",()=>WI(e,o,n,r))}},JZ=(e,n,o)=>{if(He(YZ,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},QZ=e=>{const n=Te("design"),o=Te({design:{activate:Pt,deactivate:Pt,editorReadOnly:!1},readonly:{activate:Pt,deactivate:Pt,editorReadOnly:!0}});return PZ(e),zZ(e),{isReadOnly:()=>ki(e),set:r=>XZ(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(JZ(o.get(),r,a))}}},KD=dt.each,_k=dt.explode,ej={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ZI=dt.makeMap("alt,ctrl,shift,meta,access"),tj=e=>e in ZI,nj=e=>{const n={},o=St.os.isMacOS()||St.os.isiOS();KD(_k(e.toLowerCase(),"+"),u=>{tj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=ej[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in ZI)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class jI{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(KD(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return KD(_k(dt.trim(n)),b=>{const C=u.createShortcut(b,o,f,a);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:dt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=dt.map(_k(n,">"),nj);return u[u.length-1]=dt.extend(u[u.length-1],{func:r,scope:a||this.editor}),dt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const oj=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},C=(M,N)=>(B,j)=>{M[B.toLowerCase()]={...j,type:N}},E=(M,N)=>r[M.toLowerCase()]=N;return{addButton:C(e,"button"),addGroupToolbarButton:C(e,"grouptoolbarbutton"),addToggleButton:C(e,"togglebutton"),addMenuButton:C(e,"menubutton"),addSplitButton:C(e,"splitbutton"),addMenuItem:C(n,"menuitem"),addNestedMenuItem:C(n,"nestedmenuitem"),addToggleMenuItem:C(n,"togglemenuitem"),addAutocompleter:C(o,"autocompleter"),addContextMenu:C(a,"contextmenu"),addContextToolbar:C(u,"contexttoolbar"),addContextForm:C(u,"contextform"),addSidebar:C(f,"sidebar"),addView:C(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:f,views:b})}},sj=()=>{const e=oj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},_b=kr.DOM,YD=dt.extend,rj=dt.each;class Ak{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,YD(this,zI);const a=this;this.id=n,this.hidden=!1;const u=aZ(r.defaultOptions,o);this.options=KZ(a,u,o),tp(a);const f=this.options.get;f("deprecation_warnings")&&x7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const E=m0(a);E&&(id.ScriptLoader._setReferrerPolicy(E),kr.DOM.styleSheetLoader._setReferrerPolicy(E));const M=$S(a);Re(M)&&kr.DOM.styleSheetLoader._setContentCssCors(M),Ol.languageLoad=f("language_load"),Ol.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Il(Ra(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ug(a),this.hasVisual=Nl(a),this.shortcuts=new jI(this),this.editorCommands=new xk(this),OZ(this);const N=f("cache_suffix");N&&(St.cacheSuffix=N.replace(/^[\?\&]+/,"")),this.ui={registry:sj(),styleSheetLoader:void 0,show:Pt,hide:Pt,setEnabled:Pt,isEnabled:Je},this.mode=QZ(a),r.dispatch("SetupEditor",{editor:this});const B=p0(a);ie(B)&&B.call(a,a)}render(){xI(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return U1(this)}translate(n){return ga.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Re(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:Je,default:o})),!a.isSet(n)&&!cn(o)?o:a.get(n)}hasPlugin(n,o){return He(w1(this),n)?o?Ev.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(_b.show(n.getContainer()),_b.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(_b.hide(n.getContainer()),_b.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=Mr(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Mr(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=_b.getParent(o.id,"form");b&&rj(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return x3(this,n,o)}getContent(n){return jT(this,n)}insertContent(n,o){o&&(n=YD({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?x3(this,this.startContent,{format:"raw"}):x3(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||_b.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=_b.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=M_(a);if(ie(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||st(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Il(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){lZ(this,n)}setEditableRoot(n){eZ(this,n)}hasEditableRoot(){return TI(this)}remove(){k7(this)}destroy(n){_7(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ty=kr.DOM,Ok=dt.each;let GI=!1,Dk,Wi=[];const Rk=e=>{const n=e.type;Ok(yh.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},XD=e=>{if(e!==GI){const n=kr.DOM;e?(n.bind(window,"resize",Rk),n.bind(window,"scroll",Rk)):(n.unbind(window,"resize",Rk),n.unbind(window,"scroll",Rk)),GI=e}},cj=e=>{const n=Wi;return Wi=Lt(Wi,o=>e!==o),yh.activeEditor===e&&(yh.activeEditor=Wi.length>0?Wi[0]:null),yh.focusedEditor===e&&(yh.focusedEditor=null),n.length!==Wi.length},qI=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(cj(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},aj=document.compatMode!=="CSS1Compat",yh={...GD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.1",releaseDate:"2024-07-03",i18n:ga,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Il.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Il(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Il(e.baseURL),e.suffix=o,DR(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ht(r,(a,u)=>{Ol.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(M,N)=>M.inline&&N.tagName.toLowerCase()in r,u=M=>{let N=M.id;return N||(N=os(M,"name").filter(B=>!ty.get(B)).getOrThunk(ty.uniqueId),M.setAttribute("id",N)),N},f=M=>{const N=e[M];if(N)return N.apply(n,[])},b=M=>St.browser.isIE()||St.browser.isEdge()?(XT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):aj?(XT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(M.selector)?ty.select(M.selector):Re(M.target)?[M.target]:[];let C=M=>{o=M};const E=()=>{let M=0;const N=[];let B;const j=(Q,q,te)=>{const ve=new Ak(Q,q,n);N.push(ve),ve.on("init",()=>{++M===B.length&&C(N)}),ve.targetElm=ve.targetElm||te,ve.render()};ty.unbind(window,"ready",E),f("onpageload"),B=dc(b(e)),dt.each(B,Q=>{qI(n.get(Q.id))}),B=dt.grep(B,Q=>!n.get(Q.id)),B.length===0?C([]):Ok(B,Q=>{a(e,Q)?XT("Could not initialize inline editor on invalid inline target element",Q):j(u(Q),e,Q)})};return ty.bind(window,"ready",E),new Promise(M=>{o?M(o):C=N=>{M(N)}})},get(e){return arguments.length===0?Wi.slice(0):ee(e)?Vo(Wi,n=>n.id===e).getOr(null):Go(e)&&Wi[e]?Wi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Wi.push(e),XD(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Dk||(Dk=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",Dk))),e},createEditor(e,n){return this.add(new Ak(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Wi.length-1;r>=0;r--)n.remove(Wi[r]);return}if(ee(e)){Ok(ty.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,W(n.get(o.id))?null:(cj(o)&&n.dispatch("RemoveEditor",{editor:o}),Wi.length===0&&window.removeEventListener("beforeunload",Dk),o.remove(),XD(Wi.length>0),o)},execCommand(e,n,o){var r;const a=this,u=st(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new Ak(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Ok(Wi,e=>{e.save()})},addI18n:(e,n)=>{ga.add(e,n)},translate:e=>ga.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Il(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Il(this.baseURL)}};yh.setup();const lj=(()=>{const e=fa(),n=u=>({items:u,types:ws(u),getType:f=>os(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),KI=Math.min,ny=Math.max,Mk=Math.round,YI=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,E=(o||"").split("");return E[0]==="b"&&(a+=C),E[1]==="r"&&(r+=b),E[0]==="c"&&(a+=Mk(C/2)),E[1]==="c"&&(r+=Mk(b/2)),E[3]==="b"&&(a-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(a-=Mk(f/2)),E[4]==="c"&&(r-=Mk(u/2)),oy(r,a,u,f)},JD=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=YI(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},QD=(e,n,o)=>oy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),ij=(e,n)=>{const o=ny(e.x,n.x),r=ny(e.y,n.y),a=KI(e.x+e.w,n.x+n.w),u=KI(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:oy(o,r,a-o,u-r)},XI=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,E=ny(0,n.x-r),M=ny(0,n.y-a),N=ny(0,u-b),B=ny(0,f-C);return r+=E,a+=M,o&&(u+=E,f+=M,r-=N,a-=B),u-=N,f-=B,oy(r,a,u-r,f-a)},oy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),uj={inflate:QD,relativePosition:YI,findBestRelativePosition:JD,intersect:ij,clamp:XI,create:oy,fromClientRect:e=>oy(e.left,e.top,e.width,e.height)},dj=(e,n,o=1e3)=>{let r=!1,a=null;const u=E=>(...M)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),E.apply(null,M))},f=u(e),b=u(n);return{start:(...E)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},mj=(()=>{const e={},n={},o={};return{load:(C,E)=>{const M=`Script at URL "${E}" failed to load`,N=`Script at URL "${E}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const B=new Promise((j,Q)=>{const q=dj(j,Q);n[C]=q.resolve,id.ScriptLoader.loadScript(E).then(()=>q.start(N),()=>q.reject(M))});return e[C]=B,B}},add:(C,E)=>{n[C]!==void 0&&(n[C](E),delete n[C]),e[C]=Promise.resolve(E),o[C]=E},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),fj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Nw;try{const e="__storage_test__";Nw=window.localStorage,Nw.setItem(e,e),Nw.removeItem(e)}catch{Nw=fj()}var gj=Nw;const hj={geom:{Rect:uj},util:{Delay:Hu,Tools:dt,VK:pt,URI:Il,EventDispatcher:LI,Observable:GD,I18n:ga,LocalStorage:gj,ImageUploader:D3},dom:{EventUtils:wf,TreeWalker:da,TextSeeker:Tf,DOMUtils:kr,ScriptLoader:id,RangeUtils:at,Serializer:w3,StyleSheetLoader:Fo,ControlSelection:F1,BookmarkManager:Vf,Selection:MB,Event:wf.Event},html:{Styles:py,Entities:cd,Node:xi,Schema:Ud,DomParser:Kf,Writer:GR,Serializer:sh},Env:St,AddOnManager:Ol,Annotator:Qd,Formatter:JB,UndoManager:B3,EditorCommands:xk,WindowManager:k3,NotificationManager:UB,EditorObservable:zI,Shortcuts:jI,Editor:Ak,FocusManager:TR,EditorManager:yh,DOM:kr.DOM,ScriptLoader:id.ScriptLoader,PluginManager:Ev,ThemeManager:Wm,ModelManager:Tv,IconManager:xv,Resource:mj,FakeClipboard:lj,trim:dt.trim,isArray:dt.isArray,is:dt.is,toArray:dt.toArray,makeMap:dt.makeMap,each:dt.each,map:dt.map,grep:dt.grep,inArray:dt.inArray,extend:dt.extend,walk:dt.walk,resolve:dt.resolve,explode:dt.explode,_addCacheSuffix:dt._addCacheSuffix},Nk=dt.extend(yh,hj),pj=e=>{try{Gt.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Nk),pj(Nk)})()})(sq);var Mq=sq.exports;const Nq=vq(Mq);var Bq=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Pq=function(Gt){return Bq.map(function(uo){return uo.toLowerCase()}).indexOf(Gt.toLowerCase())!==-1},$q=function(Gt,uo,Fn){Object.keys(uo).filter(Pq).forEach(function(eo){var Yn=uo[eo];typeof Yn=="function"&&(eo==="onInit"?Yn(Gt,Fn):Fn.on(eo.substring(2),function(ro){return Yn(ro,Fn)}))})},Fq=function(Gt,uo,Fn,eo){var Yn=Gt.modelEvents?Gt.modelEvents:null,ro=Array.isArray(Yn)?Yn.join(" "):Yn;Oj(eo,function(In,We){Fn&&typeof In=="string"&&In!==We&&In!==Fn.getContent({format:Gt.outputFormat})&&Fn.setContent(In)}),Fn.on(ro||"change input undo redo",function(){uo.emit("update:modelValue",Fn.getContent({format:Gt.outputFormat}))})},Iq=function(Gt,uo,Fn,eo,Yn,ro){eo.setContent(ro()),Fn.attrs["onUpdate:modelValue"]&&Fq(uo,Fn,eo,Yn),$q(Gt,Fn.attrs,eo)},QG=0,rq=function(Gt){var uo=Date.now(),Fn=Math.floor(Math.random()*1e9);return QG++,Gt+"_"+Fn+QG+String(uo)},Lq=function(Gt){return Gt!==null&&Gt.tagName.toLowerCase()==="textarea"},eq=function(Gt){return typeof Gt>"u"||Gt===""?[]:Array.isArray(Gt)?Gt:Gt.split(" ")},Hq=function(Gt,uo){return eq(Gt).concat(eq(uo))},zq=function(Gt){return Gt==null},tq=function(){return{listeners:[],scriptId:rq("tiny-script"),scriptLoaded:!1}},Vq=function(){var Gt=tq(),uo=function(Yn,ro,In,We){var tn=ro.createElement("script");tn.referrerPolicy="origin",tn.type="application/javascript",tn.id=Yn,tn.src=In;var Oo=function(){tn.removeEventListener("load",Oo),We()};tn.addEventListener("load",Oo),ro.head&&ro.head.appendChild(tn)},Fn=function(Yn,ro,In){Gt.scriptLoaded?In():(Gt.listeners.push(In),Yn.getElementById(Gt.scriptId)||uo(Gt.scriptId,Yn,ro,function(){Gt.listeners.forEach(function(We){return We()}),Gt.scriptLoaded=!0}))},eo=function(){Gt=tq()};return{load:Fn,reinitialize:eo}},Uq=Vq(),Wq=function(){return typeof window<"u"?window:global},Iw=function(){var Gt=Wq();return Gt&&Gt.tinymce?Gt.tinymce:null},Zq={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(Gt){return Gt==="html"||Gt==="text"}}},Vp=function(){return Vp=Object.assign||function(Gt){for(var uo,Fn=1,eo=arguments.length;Fn<eo;Fn++){uo=arguments[Fn];for(var Yn in uo)Object.prototype.hasOwnProperty.call(uo,Yn)&&(Gt[Yn]=uo[Yn])}return Gt},Vp.apply(this,arguments)},jq=function(Gt,uo,Fn,eo){return Gt(eo||"div",{id:uo,ref:Fn})},Gq=function(Gt,uo,Fn){return Gt("textarea",{id:uo,visibility:"hidden",ref:Fn})},Aj={selector:void 0,target:void 0},qq=nq({props:Zq,setup:function(Gt,uo){var Fn=Gt.init?Vp(Vp({},Gt.init),Aj):Vp({},Aj),eo=yq(Gt),Yn=eo.disabled,ro=eo.modelValue,In=eo.tagName,We=Dj(null),tn=null,Oo=Gt.id||rq("tiny-vue"),Zo=Gt.init&&Gt.init.inline||Gt.inline,Do=!!uo.attrs["onUpdate:modelValue"],Ro=!0,Nn=Gt.initialValue?Gt.initialValue:"",jo="",Wn=function(Ue){return Do?function(){return ro!=null&&ro.value?ro.value:""}:function(){return Ue?Nn:jo}},Ct=function(){var Ue=Wn(Ro),ee=Vp(Vp({},Fn),{readonly:Gt.disabled,target:We.value,plugins:Hq(Fn.plugins,Gt.plugins),toolbar:Gt.toolbar||Fn.toolbar,inline:Zo,setup:function(st){tn=st,st.on("init",function(Zn){return Iq(Zn,Gt,uo,st,ro,Ue)}),typeof Fn.setup=="function"&&Fn.setup(st)}});Lq(We.value)&&(We.value.style.visibility=""),Iw().init(ee),Ro=!1};Oj(Yn,function(Ue){var ee;tn!==null&&(typeof((ee=tn.mode)===null||ee===void 0?void 0:ee.set)=="function"?tn.mode.set(Ue?"readonly":"design"):tn.setMode(Ue?"readonly":"design"))}),Oj(In,function(Ue){var ee;Do||(jo=tn.getContent()),(ee=Iw())===null||ee===void 0||ee.remove(tn),YG(function(){return Ct()})}),oq(function(){if(Iw()!==null)Ct();else if(We.value&&We.value.ownerDocument){var Ue=Gt.cloudChannel?Gt.cloudChannel:"7",ee=Gt.apiKey?Gt.apiKey:"no-api-key",st=zq(Gt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ee,"/tinymce/").concat(Ue,"/tinymce.min.js"):Gt.tinymceScriptSrc;Uq.load(We.value.ownerDocument,st,Ct)}}),Cq(function(){Iw()!==null&&Iw().remove(tn)}),Zo||(wq(function(){Ro||Ct()}),Sq(function(){var Ue;Do||(jo=tn.getContent()),(Ue=Iw())===null||Ue===void 0||Ue.remove(tn)}));var zn=function(Ue){var ee;jo=tn.getContent(),(ee=Iw())===null||ee===void 0||ee.remove(tn),Fn=Vp(Vp(Vp({},Fn),Ue),Aj),YG(function(){return Ct()})};return uo.expose({rerender:zn,getEditor:function(){return tn}}),function(){return Zo?jq(XG,Oo,We,Gt.tagName):Gq(XG,Oo,We)}}});(function(){const Gt=Object.getPrototypeOf,uo=(t,s,c)=>{var l;return c(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},Fn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&uo(t,String,(c,l)=>l.isPrototypeOf(c))?"string":s},eo=t=>s=>Fn(s)===t,Yn=t=>s=>typeof s===t,ro=t=>s=>t===s,In=(t,s)=>tn(t)&&uo(t,s,(c,l)=>Gt(c)===l),We=eo("string"),tn=eo("object"),Oo=t=>In(t,Object),Zo=eo("array"),Do=ro(null),Ro=Yn("boolean"),Nn=ro(void 0),jo=t=>t==null,Wn=t=>!jo(t),Ct=Yn("function"),zn=Yn("number"),Ue=(t,s)=>{if(Zo(t)){for(let c=0,l=t.length;c<l;++c)if(!s(t[c]))return!1;return!0}return!1},ee=()=>{},st=t=>()=>t(),Zn=(t,s)=>(...c)=>t(s.apply(null,c)),it=(t,s)=>c=>t(s(c)),W=t=>()=>t,Dt=t=>t,cn=(t,s)=>t===s;function xn(t,...s){return(...c)=>{const l=s.concat(c);return t.apply(null,l)}}const Re=t=>s=>!t(s),ie=t=>()=>{throw new Error(t)},Go=t=>t(),co=W(!1),Pt=W(!0);class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Wn(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const To=Array.prototype.slice,rt=Array.prototype.indexOf,Ho=Array.prototype.push,Yt=(t,s)=>rt.call(t,s),Ke=(t,s)=>{const c=Yt(t,s);return c===-1?A.none():A.some(c)},go=(t,s)=>Yt(t,s)>-1,Vs=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return!0}return!1},ft=(t,s)=>{const c=[];for(let l=0;l<t;l++)c.push(s(l));return c},pn=(t,s)=>{const c=[];for(let l=0;l<t.length;l+=s){const d=To.call(t,l,l+s);c.push(d)}return c},Me=(t,s)=>{const c=t.length,l=new Array(c);for(let d=0;d<c;d++){const g=t[d];l[d]=s(g,d)}return l},Je=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];s(d,c)}},I=(t,s)=>{for(let c=t.length-1;c>=0;c--){const l=t[c];s(l,c)}},Ns=(t,s)=>{const c=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:l).push(h)}return{pass:c,fail:l}},ao=(t,s)=>{const c=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&c.push(g)}return c},bo=(t,s,c)=>(I(t,(l,d)=>{c=s(c,l,d)}),c),zo=(t,s,c)=>(Je(t,(l,d)=>{c=s(c,l,d)}),c),Gc=(t,s,c)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(c(g,l))break}return A.none()},He=(t,s)=>Gc(t,s,co),vt=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},je=t=>{const s=[];for(let c=0,l=t.length;c<l;++c){if(!Zo(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Ho.apply(s,t[c])}return s},ye=(t,s)=>je(Me(t,s)),ln=(t,s)=>{for(let c=0,l=t.length;c<l;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},vo=t=>{const s=To.call(t,0);return s.reverse(),s},Lt=(t,s)=>ao(t,c=>!go(s,c)),hs=(t,s)=>{const c={};for(let l=0,d=t.length;l<d;l++){const g=t[l];c[String(g)]=s(g,l)}return c},jn=t=>[t],fr=(t,s)=>{const c=To.call(t,0);return c.sort(s),c},Vo=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),xs=t=>Vo(t,0),oa=t=>Vo(t,t.length-1),Us=Ct(Array.from)?Array.from:t=>To.call(t),Bs=(t,s)=>{for(let c=0;c<t.length;c++){const l=s(t[c],c);if(l.isSome())return l}return A.none()},ps=Object.keys,wc=Object.hasOwnProperty,cs=(t,s)=>{const c=ps(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];s(h,g)}},ns=(t,s)=>lr(t,(c,l)=>({k:l,v:s(c,l)})),lr=(t,s)=>{const c={};return cs(t,(l,d)=>{const g=s(l,d);c[g.k]=g.v}),c},lo=t=>(s,c)=>{t[c]=s},Cs=(t,s,c,l)=>{cs(t,(d,g)=>{(s(d,g)?c:l)(d,g)})},gr=(t,s)=>{const c={},l={};return Cs(t,s,lo(c),lo(l)),{t:c,f:l}},$c=(t,s)=>{const c={};return Cs(t,s,lo(c),ee),c},dc=(t,s)=>{const c=[];return cs(t,(l,d)=>{c.push(s(l,d))}),c},ws=(t,s)=>{const c=ps(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},ir=t=>dc(t,Dt),ht=(t,s)=>Mo(t,s)?A.from(t[s]):A.none(),Mo=(t,s)=>wc.call(t,s),_r=(t,s)=>Mo(t,s)&&t[s]!==void 0&&t[s]!==null,Kr=(t,s,c=cn)=>t.exists(l=>c(l,s)),Zr=(t,s,c=cn)=>sc(t,s,c).getOr(t.isNone()&&s.isNone()),Hr=t=>{const s=[],c=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(c);return s},Jo=t=>{const s=[];for(let c=0;c<t.length;c++){const l=t[c];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},sc=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),jr=(t,s,c,l)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),os=(t,s)=>t!=null?A.some(s(t)):A.none(),un=(t,s)=>t?A.some(s):A.none(),tr=(t,s)=>t+s,rc=(t,s)=>t.substring(s),Ga=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,qa=(t,s)=>Ps(t,s)?rc(t,s.length):t,as=(t,s)=>mc(t,s)?t:tr(t,s),Ws=(t,s,c=0,l)=>{const d=t.indexOf(s,c);return d!==-1?Nn(l)?!0:d+s.length<=l:!1},Ps=(t,s)=>Ga(t,s,0),mc=(t,s)=>Ga(t,s,t.length-s.length),hr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),de=t=>t.length>0,re=t=>!de(t),Oe=t=>t.style!==void 0&&Ct(t.style.getPropertyValue),ze=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Xn(l.childNodes[0])},sn=(t,s)=>{const l=(s||document).createElement(t);return Xn(l)},vn=(t,s)=>{const l=(s||document).createTextNode(t);return Xn(l)},Xn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},be={fromHtml:ze,fromTag:sn,fromText:vn,fromDom:Xn,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(Xn)},Hn=typeof window<"u"?window:Function("return this;")(),ue=(t,s)=>{let c=s??Hn;for(let l=0;l<t.length&&c!==void 0&&c!==null;++l)c=c[t[l]];return c},fe=(t,s)=>{const c=t.split(".");return ue(c,s)},tt=(t,s)=>fe(t,s),lt=(t,s)=>{const c=tt(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},Ft=Object.getPrototypeOf,dn=t=>lt("HTMLElement",t),nn=t=>{const s=fe("ownerDocument.defaultView",t);return tn(t)&&(dn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ft(t).constructor.name))},on=9,an=11,yn=1,yo=3,bs=t=>t.dom.nodeName.toLowerCase(),Sc=t=>t.dom.nodeType,ra=t=>s=>Sc(s)===t,ca=t=>Bn(t)&&nn(t.dom),Bn=ra(yn),mo=ra(yo),Qo=ra(on),fc=ra(an),Br=t=>s=>Bn(s)&&bs(s)===t,Zs=(t,s)=>{const c=t.dom;if(c.nodeType!==yn)return!1;{const l=c;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Es=t=>t.nodeType!==yn&&t.nodeType!==on&&t.nodeType!==an||t.childElementCount===0,Fc=(t,s)=>{const c=s===void 0?document:s.dom;return Es(c)?[]:Me(c.querySelectorAll(t),be.fromDom)},Vl=(t,s)=>{const c=s===void 0?document:s.dom;return Es(c)?A.none():A.from(c.querySelector(t)).map(be.fromDom)},ss=(t,s)=>t.dom===s.dom,Yr=(t,s)=>{const c=t.dom,l=s.dom;return c===l?!1:c.contains(l)},Ic=t=>be.fromDom(t.dom.ownerDocument),Ar=t=>Qo(t)?t:Ic(t),aa=t=>be.fromDom(Ar(t).dom.documentElement),$a=t=>be.fromDom(Ar(t).dom.defaultView),xc=t=>A.from(t.dom.parentNode).map(be.fromDom),la=t=>xc(t),wa=t=>A.from(t.dom.parentElement).map(be.fromDom),_i=(t,s)=>{const c=Ct(s)?s:co;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=be.fromDom(g);if(d.push(h),c(h)===!0)break;l=g}return d},qc=t=>A.from(t.dom.offsetParent).map(be.fromDom),ll=t=>A.from(t.dom.nextSibling).map(be.fromDom),gc=t=>Me(t.dom.childNodes,be.fromDom),Sa=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(be.fromDom)},Cl=t=>Sa(t,0),Ul=(t,s)=>({element:t,offset:s}),wu=(t,s)=>{const c=gc(t);return c.length>0&&s<c.length?Ul(c[s],0):Ul(t,s)},Ai=t=>fc(t)&&Wn(t.dom.host),Kc=Ct(Element.prototype.attachShadow)&&Ct(Node.prototype.getRootNode),Yi=W(Kc),U=Kc?t=>be.fromDom(t.dom.getRootNode()):Ar,ce=t=>Ai(t)?t:be.fromDom(Ar(t).dom.body),we=t=>qe(t).isSome(),qe=t=>{const s=U(t);return Ai(s)?A.some(s):A.none()},gt=t=>be.fromDom(t.dom.host),Qt=t=>{if(Yi()&&Wn(t.target)){const s=be.fromDom(t.target);if(Bn(s)&&xo(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return xs(c)}}return A.from(t.target)},xo=t=>Wn(t.dom.shadowRoot),Po=t=>{const s=mo(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return qe(be.fromDom(s)).fold(()=>c.body.contains(s),it(Po,gt))},so=()=>vs(be.fromDom(document)),vs=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return be.fromDom(s)},nr=(t,s,c)=>{if(We(c)||Ro(c)||zn(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},St=(t,s,c)=>{nr(t.dom,s,c)},Su=(t,s)=>{const c=t.dom;cs(s,(l,d)=>{nr(c,d,l)})},_s=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},$=(t,s)=>A.from(_s(t,s)),X=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},oe=(t,s)=>{t.dom.removeAttribute(s)},Ne=t=>zo(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Bt=(t,s,c)=>{if(!We(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);Oe(t)&&t.style.setProperty(s,c)},ho=(t,s)=>{Oe(t)&&t.style.removeProperty(s)},qt=(t,s,c)=>{const l=t.dom;Bt(l,s,c)},or=(t,s)=>{const c=t.dom;cs(s,(l,d)=>{Bt(c,d,l)})},dt=(t,s)=>{const c=t.dom;cs(s,(l,d)=>{l.fold(()=>{ho(c,d)},g=>{Bt(c,d,g)})})},$s=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!Po(t)?Yc(c,s):d},Yc=(t,s)=>Oe(t)?t.style.getPropertyValue(s):"",Ys=(t,s)=>{const c=t.dom,l=Yc(c,s);return A.from(l).filter(d=>d.length>0)},zr=t=>{const s={},c=t.dom;if(Oe(c))for(let l=0;l<c.style.length;l++){const d=c.style.item(l);s[d]=c.style[d]}return s},il=(t,s,c)=>{const l=be.fromTag(t);return qt(l,s,c),Ys(l,s).isSome()},$o=(t,s)=>{const c=t.dom;ho(c,s),Kr($(t,"style").map(hr),"")&&oe(t,"style")},Xc=t=>t.dom.offsetWidth,sr=(t,s)=>{const c=(y,w)=>{if(!zn(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const _=y.dom;Oe(_)&&(_.style[t]=w+"px")},l=y=>{const w=s(y);if(w<=0||w===null){const _=$s(y,t);return parseFloat(_)||0}return w},d=l,g=(y,w)=>zo(w,(_,O)=>{const P=$s(y,O),H=P===void 0?0:parseInt(P,10);return isNaN(H)?_:_+H},0);return{set:c,get:l,getOuter:d,aggregate:g,max:(y,w,_)=>{const O=g(y,_);return w>O?w-O:0}}},Wl=sr("height",t=>{const s=t.dom;return Po(t)?s.getBoundingClientRect().height:s.offsetHeight}),ur=t=>Wl.get(t),xu=t=>Wl.getOuter(t),hm=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Wl.max(t,s,c);qt(t,"max-height",l+"px")},ug=(t,s)=>({left:t,top:s,translate:(l,d)=>ug(t+l,s+d)}),pr=ug,wl=t=>{const s=t.getBoundingClientRect();return pr(s.left,s.top)},hc=(t,s)=>t!==void 0?t:s!==void 0?s:0,Tc=t=>{const s=t.dom.ownerDocument,c=s.body,l=s.defaultView,d=s.documentElement;if(c===t.dom)return pr(c.offsetLeft,c.offsetTop);const g=hc(l==null?void 0:l.pageYOffset,d.scrollTop),h=hc(l==null?void 0:l.pageXOffset,d.scrollLeft),y=hc(d.clientTop,c.clientTop),w=hc(d.clientLeft,c.clientLeft);return Jc(t).translate(h-w,g-y)},Jc=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?pr(l.offsetLeft,l.offsetTop):Po(t)?wl(s):pr(0,0)},Rd=sr("width",t=>t.dom.offsetWidth),No=(t,s)=>Rd.set(t,s),ia=t=>Rd.get(t),Lc=t=>Rd.getOuter(t),K=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Rd.max(t,s,c);qt(t,"max-width",l+"px")},se=t=>{let s=!1,c;return(...l)=>(s||(s=!0,c=t.apply(null,l)),c)},ke=(t,s,c,l)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),y=h||l("(pointer:coarse)"),w=d||!g&&h&&l("(min-device-width:768px)"),_=g||h&&!w,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,P=!_&&!w&&!O;return{isiPad:W(d),isiPhone:W(g),isTablet:W(w),isPhone:W(_),isTouch:W(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:W(O),isDesktop:W(P)}},Be=(t,s)=>{for(let c=0;c<t.length;c++){const l=t[c];if(l.test(s))return l}},mn=(t,s)=>{const c=Be(t,s);if(!c)return{major:0,minor:0};const l=d=>Number(s.replace(c,"$"+d));return pc(l(1),l(2))},Co=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Xs():mn(t,c)},Xs=()=>pc(0,0),pc=(t,s)=>({major:t,minor:s}),Eo={nu:pc,detect:Co,unknown:Xs},Xr=(t,s)=>Bs(s.brands,c=>{const l=c.brand.toLowerCase();return He(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Eo.nu(parseInt(c.version,10),0)}))}),rr=(t,s)=>{const c=String(s).toLowerCase();return He(t,l=>l.search(c))},Pr=(t,s)=>rr(t,s).map(c=>{const l=Eo.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Dr=(t,s)=>rr(t,s).map(c=>{const l=Eo.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Or=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fa=t=>s=>Ws(s,t),Zl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Ws(t,"edge/")&&Ws(t,"chrome")&&Ws(t,"safari")&&Ws(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Or],search:t=>Ws(t,"chrome")&&!Ws(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Ws(t,"msie")||Ws(t,"trident")},{name:"Opera",versionRegexes:[Or,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fa("firefox")},{name:"Safari",versionRegexes:[Or,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Ws(t,"safari")||Ws(t,"mobile/"))&&Ws(t,"applewebkit")}],Ec=[{name:"Windows",search:Fa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Ws(t,"iphone")||Ws(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fa("linux"),versionRegexes:[]},{name:"Solaris",search:Fa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ia={browsers:W(Zl),oses:W(Ec)},oi="Edge",si="Chromium",Jm="IE",Tu="Opera",jl="Firefox",xa="Safari",Eu=()=>Md({current:void 0,version:Eo.unknown()}),Md=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isEdge:l(oi),isChromium:l(si),isIE:l(Jm),isOpera:l(Tu),isFirefox:l(jl),isSafari:l(xa)}},Oi={unknown:Eu,nu:Md,edge:W(oi),chromium:W(si),ie:W(Jm),opera:W(Tu),firefox:W(jl),safari:W(xa)},dg="Windows",Nd="iOS",mg="Android",Xu="Linux",fg="macOS",Ju="Solaris",Up="FreeBSD",me="ChromeOS",pm=()=>Ka({current:void 0,version:Eo.unknown()}),Ka=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isWindows:l(dg),isiOS:l(Nd),isAndroid:l(mg),isMacOS:l(fg),isLinux:l(Xu),isSolaris:l(Ju),isFreeBSD:l(Up),isChromeOS:l(me)}},Xi={unknown:pm,nu:Ka,windows:W(dg),ios:W(Nd),android:W(mg),linux:W(Xu),macos:W(fg),solaris:W(Ju),freebsd:W(Up),chromeos:W(me)},wh={detect:(t,s,c)=>{const l=Ia.browsers(),d=Ia.oses(),g=s.bind(w=>Xr(l,w)).orThunk(()=>Pr(l,t)).fold(Oi.unknown,Oi.nu),h=Dr(d,t).fold(Xi.unknown,Xi.nu),y=ke(h,g,t,c);return{browser:g,os:h,deviceType:y}}},ls=t=>window.matchMedia(t).matches;let Ta=se(()=>wh.detect(navigator.userAgent,A.from(navigator.userAgentData),ls));const ul=()=>Ta(),kc=(t,s,c,l,d,g,h)=>({target:t,x:s,y:c,stop:l,prevent:d,kill:g,raw:h}),Qu=t=>{const s=be.fromDom(Qt(t).getOr(t.target)),c=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Zn(l,c);return kc(s,t.clientX,t.clientY,c,l,d,t)},ri=(t,s)=>c=>{t(c)&&s(Qu(c))},ua=(t,s,c,l,d)=>{const g=ri(c,l);return t.dom.addEventListener(s,g,d),{unbind:xn(Sh,t,s,g,d)}},ci=(t,s,c,l)=>ua(t,s,c,l,!1),hg=(t,s,c,l)=>ua(t,s,c,l,!0),Sh=(t,s,c,l)=>{t.dom.removeEventListener(s,c,l)},Sl=(t,s)=>{xc(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},ai=(t,s)=>{ll(t).fold(()=>{xc(t).each(d=>{Ea(d,s)})},l=>{Sl(l,s)})},Qm=(t,s)=>{Cl(t).fold(()=>{Ea(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Ea=(t,s)=>{t.dom.appendChild(s.dom)},_c=(t,s,c)=>{Sa(t,c).fold(()=>{Ea(t,s)},l=>{Sl(l,s)})},ku=(t,s)=>{Je(s,c=>{Ea(t,c)})},Bd=t=>{t.dom.textContent="",Je(gc(t),s=>{Gl(s)})},Gl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Qc=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return pr(c,l)},ef=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},tf=t=>{const s=t===void 0?window:t;return ul().browser.isFirefox()?A.none():A.from(s.visualViewport)},nf=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),bm=t=>{const s=t===void 0?window:t,c=s.document,l=Qc(be.fromDom(c));return tf(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return nf(l.left,l.top,g,h)},d=>nf(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},xl=()=>be.fromDom(document),of=(t,s)=>t.view(s).fold(W([]),l=>{const d=t.owner(l),g=of(t,d);return[l].concat(g)}),xh=(t,s)=>{const c=s.owner(t),l=of(s,c);return A.some(l)};var sf=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(be.fromDom)},owner:t=>Ic(t)});const vm=t=>{const s=xl(),c=Qc(s);return xh(t,sf).fold(xn(Tc,t),d=>{const g=Jc(t),h=bo(d,(y,w)=>{const _=Jc(w);return{left:y.left+_.left,top:y.top+_.top}},{left:0,top:0});return pr(h.left+g.left+c.left,h.top+g.top+c.top)})},Ji=(t,s,c)=>({point:t,width:s,height:c}),pg=(t,s,c,l)=>({x:t,y:s,width:c,height:l}),cr=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),Rr=t=>{const s=Tc(t),c=Lc(t),l=xu(t);return cr(s.left,s.top,c,l)},Ya=t=>{const s=vm(t),c=Lc(t),l=xu(t);return cr(s.left,s.top,c,l)},bg=(t,s)=>{const c=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,y=g-l;return cr(c,l,h,y)},vg=(t,s)=>zo(s,(c,l)=>bg(c,l),t),cc=()=>bm(window),fn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Di=t=>{const s=fn(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{c(),s.set(A.some(y))}}},Eh=()=>Di(t=>t.destroy()),bc=()=>Di(t=>t.unbind()),Fs=()=>{const t=Di(ee);return{...t,on:c=>t.get().each(c)}};var ed=tinymce.util.Tools.resolve("tinymce.ThemeManager");const yg=t=>{const s=g=>g(t),c=W(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Pt,isError:co,map:g=>to.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:c,or:l,getOrThunk:c,orThunk:l,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},rf=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:co,isError:Pt,map:s,mapError:l=>to.error(l(t)),bind:s,exists:co,forall:Pt,getOr:Dt,or:Dt,getOrThunk:Go,orThunk:Go,getOrDie:ie(String(t)),each:ee,toOptional:A.none};return c},to={value:yg,error:rf,fromOption:(t,s)=>t.fold(()=>rf(s),yg)};var $r;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})($r||($r={}));const Pd=(t,s,c)=>t.stype===$r.Error?s(t.serror):c(t.svalue),Xa=t=>{const s=[],c=[];return Je(t,l=>{Pd(l,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},La=(t,s)=>t.stype===$r.Error?{stype:$r.Error,serror:s(t.serror)}:t,Ja=(t,s)=>t.stype===$r.Value?{stype:$r.Value,svalue:s(t.svalue)}:t,ac=(t,s)=>t.stype===$r.Value?s(t.svalue):t,ka=(t,s)=>t.stype===$r.Error?s(t.serror):t,Tl=t=>({stype:$r.Value,svalue:t}),ym=t=>({stype:$r.Error,serror:t}),Gr={fromResult:t=>t.fold(ym,Tl),toResult:t=>Pd(t,to.error,to.value),svalue:Tl,partition:Xa,serror:ym,bind:ac,bindError:ka,map:Ja,mapError:La,fold:Pd},_u=(t,s,c,l)=>({tag:"field",key:t,newKey:s,presence:c,prop:l}),li=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),js=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},ii=(t,s)=>s,$d=(t,s)=>Oo(t)&&Oo(s)?ar(t,s):s,Qi=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)Mo(d,g)&&(c[g]=t(c[g],d[g]))}return c},ar=Qi($d),Au=Qi(ii),El=()=>({tag:"required",process:{}}),ko=t=>({tag:"defaultedThunk",process:t}),td=t=>ko(W(t)),Cm=()=>({tag:"option",process:{}}),af=t=>({tag:"mergeWithThunk",process:t}),kh=t=>af(W(t)),lf=(t,s)=>t.length>0?Gr.svalue(ar(s,Au.apply(void 0,t))):Gr.svalue(s),_h=t=>Zn(Gr.serror,je)(t),z={consolidateObj:(t,s)=>{const c=Gr.partition(t);return c.errors.length>0?_h(c.errors):lf(c.values,s)},consolidateArr:t=>{const s=Gr.partition(t);return s.errors.length>0?_h(s.errors):Gr.svalue(s.values)}},ae=t=>tn(t)&&ps(t).length>100?" removed due to size":JSON.stringify(t,null,2),pe=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):t;return Me(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},nt=(t,s)=>Gr.serror([{path:t,getErrorInfo:s}]),_n=(t,s,c)=>nt(t,()=>'Could not find valid *required* value for "'+s+'" in '+ae(c)),Jn=(t,s)=>nt(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Gn=(t,s,c)=>nt(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+ae(s)),kn=(t,s)=>nt(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),br=(t,s)=>nt(t,W(s)),Fr=t=>{const s=(l,d)=>Gr.bindError(t(d),g=>br(l,g)),c=W("val");return{extract:s,toString:c}},Qa=Fr(Gr.svalue),Vr=(t,s,c,l)=>ht(s,c).fold(()=>_n(t,c,s),l),Ah=(t,s,c,l)=>{const d=ht(t,s).getOrThunk(()=>c(t));return l(d)},Nb=(t,s,c)=>c(ht(t,s)),Zp=(t,s,c,l)=>{const d=ht(t,s).map(g=>g===!0?c(t):g);return l(d)},da=(t,s,c,l,d)=>{const g=y=>d.extract(s.concat([l]),y),h=y=>y.fold(()=>Gr.svalue(A.none()),w=>{const _=d.extract(s.concat([l]),w);return Gr.map(_,A.some)});switch(t.tag){case"required":return Vr(s,c,l,g);case"defaultedThunk":return Ah(c,l,t.process,g);case"option":return Nb(c,l,h);case"defaultedOptionThunk":return Zp(c,l,t.process,h);case"mergeWithThunk":return Ah(c,l,W({}),y=>{const w=ar(t.process(c),y);return g(w)})}},Oh=(t,s,c)=>{const l={},d=[];for(const g of c)js(g,(h,y,w,_)=>{const O=da(w,t,s,h,_);Gr.fold(O,P=>{d.push(...P)},P=>{l[y]=P})},(h,y)=>{l[h]=y(s)});return d.length>0?Gr.serror(d):Gr.svalue(l)},Ac=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),jp=t=>ps($c(t,Wn)),ma=t=>{const s=Dn(t),c=bo(t,(d,g)=>js(g,h=>ar(d,{[h]:!0}),W(d)),{});return{extract:(d,g)=>{const h=Ro(g)?[]:jp(g),y=ao(h,w=>!_r(c,w));return y.length===0?s.extract(d,g):kn(d,y)},toString:s.toString}},Dn=t=>({extract:(l,d)=>Oh(l,d,t),toString:()=>`obj{
`+Me(t,d=>js(d,(g,h,y,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),ui=t=>({extract:(l,d)=>{const g=Me(d,(h,y)=>t.extract(l.concat(["["+y+"]"]),h));return z.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),uf=(t,s)=>{const c=s!==void 0?s:Dt;return{extract:(g,h)=>{const y=[];for(const w of t){const _=w.extract(g,h);if(_.stype===$r.Value)return{stype:$r.Value,svalue:c(_.svalue)};y.push(_)}return z.consolidateArr(y)},toString:()=>"oneOf("+Me(t,g=>g.toString()).join(", ")+")"}},df=(t,s)=>{const c=(g,h)=>ui(Fr(t)).extract(g,h);return{extract:(g,h)=>{const y=ps(h),w=c(g,y);return Gr.bind(w,_=>{const O=Me(_,P=>_u(P,P,El(),s));return Dn(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Bb=(t,s)=>{const c=se(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},Gp=Zn(ui,Dn),Ri=W(Qa),Ou=(t,s)=>Fr(c=>{const l=typeof c;return t(c)?Gr.svalue(c):Gr.serror(`Expected type: ${s} but got: ${l}`)}),Fd=Ou(zn,"number"),Ht=Ou(We,"string"),ql=Ou(Ro,"boolean"),qp=Ou(Ct,"function"),wm=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>wm(t[s]));default:return!1}},Mi=Fr(t=>wm(t)?Gr.svalue(t):Gr.serror("Expected value to be acceptable for sending via postMessage")),wg=(t,s,c,l)=>ht(c,l).fold(()=>Gn(t,c,l),g=>g.extract(t.concat(["branch: "+l]),s)),Id=(t,s)=>({extract:(d,g)=>ht(g,t).fold(()=>Jn(d,t),y=>wg(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+ps(s)}),Sm=()=>ui(Qa),Sg=t=>Fr(s=>t(s).fold(Gr.serror,Gr.svalue)),eu=(t,s)=>df(c=>Gr.fromResult(t(c)),s),Pb=(t,s,c)=>{const l=s.extract([t],c);return Gr.mapError(l,d=>({input:c,errors:d}))},Mr=(t,s,c)=>Gr.toResult(Pb(t,s,c)),ut=t=>t.fold(s=>{throw new Error(tu(s))},Dt),el=(t,s,c)=>ut(Mr(t,s,c)),tu=t=>`Errors: 
`+pe(t.errors).join(`
`)+`

Input object: `+ae(t.input),Hc=(t,s)=>Id(t,ns(s,Dn)),mf=(t,s)=>Bb(t,s),Oc=_u,ms=li,Dh=t=>Sg(s=>go(t,s)?to.value(s):to.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ye=t=>Oc(t,t,El(),Ri()),is=(t,s)=>Oc(t,t,El(),s),Rh=t=>is(t,Fd),vc=t=>is(t,Ht),_a=(t,s)=>Oc(t,t,El(),Dh(s)),cy=t=>is(t,ql),Kl=t=>is(t,qp),ay=(t,s)=>Oc(t,t,Cm(),Fr(c=>Gr.serror("The field: "+t+" is forbidden. "+s))),nd=(t,s)=>Oc(t,t,El(),Dn(s)),$b=(t,s)=>Oc(t,t,El(),Gp(s)),Yl=(t,s)=>Oc(t,t,El(),ui(s)),us=t=>Oc(t,t,Cm(),Ri()),Du=(t,s)=>Oc(t,t,Cm(),s),xm=t=>Du(t,Fd),yc=t=>Du(t,Ht),Kp=(t,s)=>Du(t,Dh(s)),Ru=t=>Du(t,qp),nu=(t,s)=>Du(t,ui(s)),Js=(t,s)=>Du(t,Dn(s)),ff=(t,s)=>Du(t,ma(s)),Te=(t,s)=>Oc(t,t,td(s),Ri()),di=(t,s,c)=>Oc(t,t,td(s),c),gf=(t,s)=>di(t,s,Fd),fa=(t,s)=>di(t,s,Ht),Ni=(t,s,c)=>di(t,s,Dh(c)),Jr=(t,s)=>di(t,s,ql),qr=(t,s)=>di(t,s,qp),S=(t,s)=>di(t,s,Mi),k=(t,s,c)=>di(t,s,ui(c)),L=(t,s,c)=>di(t,s,Dn(c)),he={generate:t=>{if(!Zo(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return Je(t,(l,d)=>{const g=ps(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],y=l[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Zo(y))throw new Error("case arguments must be an array");s.push(h),c[h]=(...w)=>{const _=w.length;if(_!==y.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+y.length+" ("+y+"), got "+_);return{fold:(...P)=>{if(P.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+P.length);return P[d].apply(null,w)},match:P=>{const H=ps(P);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!ln(s,G=>go(H,G)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return P[h].apply(null,w)},log:P=>{console.log(P,{constructors:s,constructor:h,params:w})}}}}),c}};he.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ge=t=>{const s=[],c=[];return Je(t,l=>{l.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},xt=(t,s)=>{const c={};return cs(t,(l,d)=>{go(s,d)||(c[d]=l)}),c},Kt=(t,s)=>({[t]:s}),Vn=t=>{const s={};return Je(t,c=>{s[c.key]=c.value}),s},wo=(t,s)=>xt(t,s),As=(t,s)=>Kt(t,s),fs=t=>Vn(t),dr=(t,s)=>t.length===0?to.value(s):to.value(ar(s,Au.apply(void 0,t))),kl=t=>to.error(je(t)),Mu=(t,s)=>{const c=Ge(t);return c.errors.length>0?kl(c.errors):dr(c.values,s)},Ha=t=>Ct(t)?t:co,Nu=(t,s,c)=>{let l=t.dom;const d=Ha(c);for(;l.parentNode;){l=l.parentNode;const g=be.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Ld=(t,s,c)=>{const l=s(t),d=Ha(c);return l.orThunk(()=>d(t)?A.none():Nu(t,s,d))},ou=(t,s)=>ss(t.element,s.event.target),hf={can:Pt,abort:co,run:ee},mi=t=>{if(!_r(t,"can")&&!_r(t,"abort")&&!_r(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...hf,...t}},Mh=(t,s)=>(...c)=>zo(t,(l,d)=>l&&s(d).apply(void 0,c),!0),xg=(t,s)=>(...c)=>zo(t,(l,d)=>l||s(d).apply(void 0,c),!1),Nh=t=>Ct(t)?{can:Pt,abort:co,run:t}:t,Bh=t=>{const s=Mh(t,d=>d.can),c=xg(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{Je(t,g=>{g.run.apply(void 0,d)})}}},zc=W,Fo=zc("touchstart"),Tr=zc("touchmove"),Dc=zc("touchend"),Xl=zc("touchcancel"),_l=zc("mousedown"),Ph=zc("mousemove"),Bu=zc("mouseout"),Tm=zc("mouseup"),Hd=zc("mouseover"),od=zc("focusin"),zd=zc("focusout"),Pu=zc("keydown"),Yp=zc("keyup"),Vd=zc("input"),$h=zc("change"),Tg=zc("click"),Lw=zc("transitioncancel"),sd=zc("transitionend"),Hw=zc("transitionstart"),ly=zc("selectstart"),Qr=t=>W("alloy."+t),Fb={tap:Qr("tap")},rd=Qr("focus"),pf=Qr("blur.post"),Em=Qr("paste.post"),su=Qr("receive"),ru=Qr("execute"),Xp=Qr("focus.item"),cd=Fb.tap,tl=Qr("longpress"),Jp=Qr("sandbox.close"),iy=Qr("typeahead.cancel"),Qp=Qr("system.init"),e1=Qr("system.touchmove"),uy=Qr("system.touchend"),Eg=Qr("system.scroll"),ad=Qr("system.resize"),Al=Qr("system.attached"),cu=Qr("system.detached"),bf=Qr("system.dismissRequested"),dy=Qr("system.repositionRequested"),kg=Qr("focusmanager.shifted"),my=Qr("slotcontainer.visibility"),zw=Qr("system.external.element.scroll"),Vw=Qr("change.tab"),Uw=Qr("dismiss.tab"),vf=Qr("highlight"),_g=Qr("dehighlight"),po=(t,s)=>{Ib(t,t.element,s,{})},Tn=(t,s,c)=>{Ib(t,t.element,s,c)},yf=t=>{po(t,ru())},t1=(t,s,c)=>{Ib(t,s,c,{})},Ib=(t,s,c,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(c,s,d)},fy=(t,s,c,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(c,s,d)},Ud=(t,s,c,l)=>{t.getSystem().triggerEvent(c,s,l.event)},vr=t=>fs(t),Ww=(t,s)=>({key:t,value:mi({abort:s})}),gy=(t,s)=>({key:t,value:mi({can:s})}),Lb=t=>({key:t,value:mi({run:(s,c)=>{c.event.prevent()}})}),Qe=(t,s)=>({key:t,value:mi({run:s})}),Ag=(t,s,c)=>({key:t,value:mi({run:(l,d)=>{s.apply(void 0,[l,d].concat(c))}})}),Wk=t=>s=>Qe(t,s),Cf=t=>s=>({key:t,value:mi({run:(c,l)=>{ou(c,l)&&s(c,l)}})}),Zk=(t,s)=>Qe(t,(c,l)=>{c.getSystem().getByUid(s).each(d=>{Ud(d,d.element,t,l)})}),Og=(t,s,c)=>{const l=s.partUids[c];return Zk(t,l)},hy=(t,s)=>Qe(t,(c,l)=>{const d=l.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Ld(d.target,y=>c.getSystem().getByDom(y).toOptional(),co).getOr(c));s(c,g,l)}),ld=t=>Qe(t,(s,c)=>{c.cut()}),py=t=>Qe(t,(s,c)=>{c.stop()}),Fh=(t,s)=>Cf(t)(s),Er=Cf(Al()),Wd=Cf(cu()),Zw=Cf(Qp()),$u=Wk(ru()),by=(t,s,c)=>{const l=c.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:n1(h.slice(0,1).concat(h.slice(3)))}),t},n1=t=>Me(t,s=>mc(s,"/*")?s.substring(0,s.length-2):s),Ih=(t,s)=>{const c=t.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:n1(g)}),t},o1=(t,s)=>{const c=s.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:n1(g.slice(1))}),t},fi=t=>({classes:Nn(t.classes)?[]:t.classes,attributes:Nn(t.attributes)?{}:t.attributes,styles:Nn(t.styles)?{}:t.styles}),jw=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),s1=(t,s,c)=>$u(l=>{c(l,t,s)}),vy=(t,s,c)=>Zw((l,d)=>{c(l,t,s)}),wf=(t,s,c,l,d,g)=>{const h=ma(t),y=Js(s,[ff("config",t)]);return qw(h,y,s,c,l,d,g)},yy=(t,s,c,l,d,g)=>{const h=t,y=Js(s,[Du("config",t)]);return qw(h,y,s,c,l,d,g)},Gw=(t,s,c)=>by((d,...g)=>{const h=[d].concat(g);return d.config({name:W(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},y=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,y.config,y.state].concat(w))})},c,s),Cy=t=>({key:t,value:void 0}),qw=(t,s,c,l,d,g,h)=>{const y=P=>_r(P,c)?P[c]():A.none(),w=ns(d,(P,H)=>Gw(c,P,H)),O={...ns(g,(P,H)=>Ih(P,H)),...w,revoke:xn(Cy,c),config:P=>{const H=el(c+"-config",t,P);return{key:c,value:{config:H,me:O,configAsRaw:se(()=>el(c+"-config",t,P)),initialConfig:P,state:h}}},schema:W(s),exhibit:(P,H)=>sc(y(P),ht(l,"exhibit"),(V,G)=>G(H,V.config,V.state)).getOrThunk(()=>fi({})),name:W(c),handlers:P=>y(P).map(H=>ht(l,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return O},dl={init:()=>gi({readState:W("No State required")})},gi=t=>t,bt=t=>fs(t),Hb=ma([Ye("fields"),Ye("name"),Te("active",{}),Te("apis",{}),Te("state",dl),Te("extra",{})]),Aa=t=>{const s=el("Creating behaviour: "+t.name,Hb,t);return wf(s.fields,s.name,s.active,s.apis,s.extra,s.state)},zb=ma([Ye("branchKey"),Ye("branches"),Ye("name"),Te("active",{}),Te("apis",{}),Te("state",dl),Te("extra",{})]),Kw=t=>{const s=el("Creating behaviour: "+t.name,zb,t);return yy(Hc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},kr=W(void 0),km=(t,s)=>{const c=_s(t,s);return c===void 0||c===""?[]:c.split(" ")},Vb=(t,s,c)=>{const d=km(t,s).concat([c]);return St(t,s,d.join(" ")),!0},jk=(t,s,c)=>{const l=ao(km(t,s),d=>d!==c);return l.length>0?St(t,s,l.join(" ")):oe(t,s),!1},_m=t=>t.dom.classList!==void 0,Ub=t=>km(t,"class"),id=(t,s)=>Vb(t,"class",s),Yw=(t,s)=>jk(t,"class",s),wy=(t,s)=>go(Ub(t),s)?Yw(t,s):id(t,s),yr=(t,s)=>{_m(t)?t.dom.classList.add(s):id(t,s)},Lh=t=>{(_m(t)?t.dom.classList:Ub(t)).length===0&&oe(t,"class")},Ur=(t,s)=>{_m(t)?t.dom.classList.remove(s):Yw(t,s),Lh(t)},Xw=(t,s)=>{const c=_m(t)?t.dom.classList.toggle(s):wy(t,s);return Lh(t),c},hi=(t,s)=>_m(t)&&t.dom.classList.contains(s),Hh=(t,s)=>{Je(s,c=>{yr(t,c)})},pi=(t,s)=>{Je(s,c=>{Ur(t,c)})},Gk=(t,s)=>{Je(s,c=>{Xw(t,c)})},qk=(t,s)=>ln(s,c=>hi(t,c)),Kk=t=>{const s=t.dom.classList,c=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(c[l]=d)}return c},Yk=t=>_m(t)?Kk(t):Ub(t),ga=(t,s,c,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:l.map(g),bottom:d.map(g)}},Ol=t=>({...t,position:A.some(t.position)}),r1=(t,s)=>{dt(t,Ol(s))},Sf=t=>(Kr(Ys(t,"position"),"fixed")?A.none():qc(t)).orThunk(()=>{const l=be.fromTag("span");return xc(t).bind(d=>{Ea(d,l);const g=qc(l);return Gl(l),g})}),Sy=t=>Sf(t).map(Tc).getOrThunk(()=>pr(0,0)),zh=(t,s)=>{const c=t.element;yr(c,s.transitionClass),Ur(c,s.fadeOutClass),yr(c,s.fadeInClass),s.onShow(t)},Zd=(t,s)=>{const c=t.element;yr(c,s.transitionClass),Ur(c,s.fadeInClass),yr(c,s.fadeOutClass),s.onHide(t)},Vh=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Dg=(t,s)=>t.y>=s.y,xf=(t,s)=>t.bottom<=s.bottom,jd=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),Rg=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),Mg=t=>t.box.x-t.win.x,Xk=(t,s,c)=>{const l=s.win,d=s.box,g=Mg(s);return Bs(t,h=>{switch(h){case"bottom":return xf(d,c.bounds)?A.none():A.some(Rg(l,g,c));case"top":return Dg(d,c.bounds)?A.none():A.some(jd(l,g,c));default:return A.none()}}).getOr({location:"no-dock"})},xy=(t,s,c)=>ln(t,l=>{switch(l){case"bottom":return xf(s,c.bounds);case"top":return Dg(s,c.bounds)}}),Wb=(t,s)=>{const c=s.optScrollEnv.fold(W(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return pr(t.bounds.x,c)},Jw=(t,s)=>{const c=s.optScrollEnv.fold(W(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return pr(t.x,c)},Ty=(t,s,c)=>c.getInitialPos().map(l=>{const d=Wb(l,s);return{box:cr(d.left,d.top,ia(t),ur(t)),location:l.location}}),Zb=(t,s,c,l,d)=>{const g=Jw(s,c),h=cr(g.left,g.top,s.width,s.height);l.setInitialPos({style:zr(t),position:$s(t,"position")||"static",bounds:h,location:d.location})},Ey=(t,s,c,l,d)=>{l.getInitialPos().fold(()=>Zb(t,s,c,l,d),()=>ee)},jb=(t,s,c)=>c.getInitialPos().bind(l=>{var d;switch(c.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=Sf(t).getOr(so()),h=Rr(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:ga("absolute",ht(l.style,"left").map(w=>s.x-h.x),ht(l.style,"top").map(w=>s.y-h.y+y),ht(l.style,"right").map(w=>h.right-s.right),ht(l.style,"bottom").map(w=>h.bottom-s.bottom))});default:return A.none()}}),Uh=(t,s,c)=>Ty(t,s,c).filter(({box:l})=>xy(c.getModes(),l,s)).bind(({box:l})=>jb(t,l,c)),Gb=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:ga("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:ga("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},cR=(t,s,c)=>{const l=Rr(t),d=cc(),g=Xk(c.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(Zb(t,l,s,c,g),Gb(g)):A.none()},Jk=(t,s,c)=>Uh(t,s,c).orThunk(()=>s.optScrollEnv.bind(l=>Ty(t,s,c)).bind(({box:l,location:d})=>{const g=cc(),h=Mg({win:g,box:l}),y=d==="top"?jd(g,h,s):Rg(g,h,s);return Gb(y)})),ud=(t,s,c)=>{const l=t.element;return Kr(Ys(l,"position"),"fixed")?Jk(l,s,c):cR(l,s,c)},Wh=(t,s,c)=>{const l=t.element;return Ty(l,s,c).bind(({box:d})=>jb(l,d,c))},Qw=(t,s,c,l)=>{const d=Rr(t),g=cc(),h=Mg({win:g,box:d}),y=l(g,h,s);return y.location==="bottom"||y.location==="top"?(Ey(t,d,s,c,y),Gb(y)):A.none()},eS=(t,s,c)=>{c.setDocked(!1),Je(["left","right","top","bottom","position"],l=>$o(t.element,l)),s.onUndocked(t)},qb=(t,s,c,l)=>{const d=l.position==="fixed";c.setDocked(d),r1(t.element,l),(d?s.onDocked:s.onUndocked)(t)},Tf=(t,s,c,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const y=Vh(h,l.bounds);y!==c.isVisible()&&(c.setVisible(y),d&&!y?(Hh(t.element,[g.fadeOutClass]),g.onHide(t)):(y?zh:Zd)(t,g))})})},Qk=(t,s,c,l,d)=>{Tf(t,s,c,l,!0),qb(t,s,c,d.positionCss)},ky=(t,s,c,l,d)=>{switch(d.morph){case"static":return eS(t,s,c);case"absolute":return qb(t,s,c,d.positionCss);case"fixed":return Qk(t,s,c,l,d)}},c1=(t,s,c)=>{const l=s.lazyViewport(t);Tf(t,s,c,l),ud(t,l,c).each(d=>{ky(t,s,c,l,d)})},e_=(t,s,c)=>{const l=t.element;c.setDocked(!1);const d=s.lazyViewport(t);Wh(t,d,c).each(g=>{switch(g.morph){case"static":{eS(t,s,c);break}case"absolute":{qb(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{pi(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Kb(t,s,c)},Kb=(t,s,c)=>{t.getSystem().isConnected()&&c1(t,s,c)},Zh=(t,s,c)=>{c.isDocked()&&e_(t,s,c)},tS=t=>(s,c,l)=>{const d=c.lazyViewport(s);Qw(s.element,d,l,t).each(h=>{Qk(s,c,l,d,h)})},Yb=tS(jd),_y=tS(Rg);var Ay=Object.freeze({__proto__:null,refresh:Kb,reset:Zh,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,l)=>c.setModes(l),forceDockToTop:Yb,forceDockToBottom:_y}),oS=Object.freeze({__proto__:null,events:(t,s)=>vr([Fh(sd(),(c,l)=>{t.contextual.each(d=>{hi(c.element,d.transitionClass)&&(pi(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),l.stop()})}),Qe(Eg(),(c,l)=>{Kb(c,t,s)}),Qe(zw(),(c,l)=>{Kb(c,t,s)}),Qe(ad(),(c,l)=>{Zh(c,t,s)})])});const dd=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,gc(be.fromDom(l))},Jl=t=>t.dom.innerHTML,Gh=(t,s)=>{const l=Ic(t).dom,d=be.fromDom(l.createDocumentFragment()),g=dd(s,l);ku(d,g),Bd(t),Ea(t,d)},qh=t=>{const s=be.fromTag("div"),c=be.fromDom(t.dom.cloneNode(!0));return Ea(s,c),Jl(s)},l1=(t,s)=>be.fromDom(t.dom.cloneNode(s)),t_=t=>l1(t,!1),n_=t=>l1(t,!0),Ng=t=>{if(Ai(t))return"#shadow-root";{const s=t_(t);return qh(s)}},bi=t=>Ng(t),sS="unknown";var lc;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(lc||(lc={}));const Bg=fn({}),vi=(t,s)=>{const c=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();go(["mousemove","mouseover","mouseout",Qp()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:Me(c,g=>go(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+bi(g.target)+")":g.outcome)})}}},aR=(t,s,c)=>{switch(ht(Bg.get(),t).orThunk(()=>{const d=ps(Bg.get());return Bs(d,g=>t.indexOf(g)>-1?A.some(Bg.get()[g]):A.none())}).getOr(lc.NORMAL)){case lc.NORMAL:return c(yi());case lc.LOGGING:{const d=vi(t,s),g=c(d);return d.write(),g}case lc.STOP:return!0}},Xb=["alloy/data/Fields","alloy/debugging/Debugging"],Kh=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return He(s,c=>c.indexOf("alloy")>0&&!Vs(Xb,l=>c.indexOf(l)>-1)).getOr(sS)}else return sS},Pg={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},md=(t,s,c)=>aR(t,s,c),yi=W(Pg),Oy=W([Ye("menu"),Ye("selectedMenu")]),Dy=W([Ye("item"),Ye("selectedItem")]);W(Dn(Dy().concat(Oy())));const Ry=W(Dn(Dy())),$g=nd("initSize",[Ye("numColumns"),Ye("numRows")]),o_=()=>is("markers",Ry()),Fg=()=>nd("markers",[Ye("backgroundMenu")].concat(Oy()).concat(Dy())),Gd=t=>nd("markers",Me(t,Ye)),i1=(t,s,c)=>(Kh(),Oc(s,s,c,Sg(l=>to.value((...d)=>l.apply(void 0,d))))),Yo=t=>i1("onHandler",t,td(ee)),Dl=t=>i1("onKeyboardHandler",t,td(A.none)),au=t=>i1("onHandler",t,El()),Am=t=>i1("onKeyboardHandler",t,El()),Cr=(t,s)=>ms(t,W(s)),rS=t=>ms(t,Dt),Jb=W($g);var u1=[Js("contextual",[vc("fadeInClass"),vc("fadeOutClass"),vc("transitionClass"),Kl("lazyContext"),Yo("onShow"),Yo("onShown"),Yo("onHide"),Yo("onHidden")]),qr("lazyViewport",()=>({bounds:cc(),optScrollEnv:A.none()})),k("modes",["top","bottom"],Ht),Yo("onDocked"),Yo("onUndocked")],s_=Object.freeze({__proto__:null,init:t=>{const s=fn(!1),c=fn(!0),l=Fs(),d=fn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return gi({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const Ir=Aa({fields:u1,name:"docking",active:oS,apis:Ay,state:s_}),My=(t,s,c)=>ss(s,t.element)&&!ss(s,c),r_=vr([gy(rd(),(t,s)=>{const c=s.event,l=c.originator,d=c.target;return My(t,l,d)?(console.warn(rd()+` did not get interpreted by the desired target. 
Originator: `+bi(l)+`
Target: `+bi(d)+`
Check the `+rd()+" event handlers"),!1):!0})]);var c_=Object.freeze({__proto__:null,events:r_});let Yh=0;const Ut=t=>{const c=new Date().getTime(),l=Math.floor(Math.random()*1e9);return Yh++,t+"_"+l+Yh+String(c)},a_=W("alloy-id-"),cS=W("data-alloy-id"),e0=a_(),Ny=cS(),l_=(t,s)=>{const c=Ut(e0+t);return d1(s,c),c},d1=(t,s)=>{Object.defineProperty(t.dom,Ny,{value:s,writable:!0})},m1=t=>{const s=Bn(t)?t.dom[Ny]:null;return A.from(s)},Ig=t=>Ut(t),lR=Dt,qd=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+bi(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:W("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:co}},i_=qd(),Om=Ut("alloy-premade"),aS=t=>(Object.defineProperty(t.element.dom,Om,{value:t.uid,writable:!0}),As(Om,t)),fd=t=>Mo(t.dom,Om),lS=t=>ht(t,Om),Xh=t=>o1((s,...c)=>t(s.getApis(),s,...c),t),u_=(t,s)=>{const c=Me(s,d=>Js(d.name(),[Ye("config"),Te("state",dl)])),l=Mr("component.behaviours",Dn(c),t.behaviours).fold(d=>{throw new Error(tu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Dt);return{list:s,data:ns(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return W(g)})}},d_=t=>t.list,m_=t=>t.data,By=(t,s)=>{const c={};return cs(t,(l,d)=>{cs(l,(g,h)=>{const y=ht(c,h).getOr([]);c[h]=y.concat([s(d,g)])})}),c},t0=(t,s,c,l)=>{const d={...s};Je(c,O=>{d[O.name()]=O.exhibit(t,l)});const g=By(d,(O,P)=>({name:O,modification:P})),h=O=>bo(O,(P,H)=>({...H.modification,...P}),{}),y=bo(g.classes,(O,P)=>P.modification.concat(O),[]),w=h(g.attributes),_=h(g.styles);return fi({classes:y,attributes:w,styles:_})},iS=(t,s,c,l)=>{try{const d=fr(c,(g,h)=>{const y=g[s],w=h[s],_=l.indexOf(y),O=l.indexOf(w);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(l,null,2));return _<O?-1:O<_?1:0});return to.value(d)}catch(d){return to.error([d])}},Py=(t,s)=>({handler:t,purpose:s}),f_=(t,s)=>({cHandler:t,purpose:s}),f1=(t,s)=>f_(xn.apply(void 0,[t.handler].concat(s)),t.purpose),Ef=t=>t.cHandler,Jh=(t,s)=>({name:t,handler:s}),n0=(t,s)=>{const c={};return Je(t,l=>{c[l.name()]=l.handlers(s)}),c},$y=(t,s,c)=>{const l={...c,...n0(s,t)};return By(l,Jh)},o0=(t,s,c,l)=>{const d=$y(t,c,l);return uS(d,s)},Fy=t=>{const s=Nh(t);return(c,l,...d)=>{const g=[c,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Iy=(t,s)=>to.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Me(s,c=>c.name),null,2)]),Ly=(t,s,c)=>{const l=s[c];return l?iS("Event: "+c,"name",t,l).map(d=>{const g=Me(d,h=>h.handler);return Bh(g)}):Iy(c,t)},uS=(t,s)=>{const c=dc(t,(l,d)=>(l.length===1?to.value(l[0].handler):Ly(l,s,d)).map(h=>{const y=Fy(h),w=l.length>1?ao(s[d],_=>Vs(l,O=>O.name===_)).join(" > "):l[0].name;return As(d,Py(y,w))}));return Mu(c,{})},Oa="alloy.base.behaviour",g_=Dn([Oc("dom","dom",El(),Dn([Ye("tag"),Te("styles",{}),Te("classes",[]),Te("attributes",{}),us("value"),us("innerHtml")])),Ye("components"),Ye("uid"),Te("events",{}),Te("apis",{}),Oc("eventOrder","eventOrder",kh({[ru()]:["disabling",Oa,"toggling","typeaheadevents"],[rd()]:[Oa,"focusing","keying"],[Qp()]:[Oa,"disabling","toggling","representing"],[Vd()]:[Oa,"representing","streaming","invalidating"],[cu()]:[Oa,"representing","item-events","toolbar-button-events","tooltipping"],[_l()]:["focusing",Oa,"item-type-events"],[Fo()]:["focusing",Oa,"item-type-events"],[Hd()]:["item-type-events","tooltipping"],[su()]:["receiving","reflecting","tooltipping"]}),Ri()),us("domModification")]),dS=t=>Mr("custom.definition",g_,t),kf=t=>({...t.dom,uid:t.uid,domChildren:Me(t.components,s=>s.element)}),Lg=t=>t.domModification.fold(()=>fi({}),fi),Hy=t=>t.events,Fe=t=>t.dom.value,Kd=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},h_=(t,s,c)=>Sa(t,s).map(d=>{if(c.exists(h=>!ss(h,d))){const h=c.map(bs).getOr("span"),y=be.fromTag(h);return Sl(d,y),y}else return d}),mS=(t,s,c)=>{c.fold(()=>Ea(t,s),l=>{ss(l,s)||(Sl(l,s),Gl(l))})},g1=(t,s,c)=>{const l=Me(s,c),d=gc(t);return Je(d.slice(l.length),Gl),l},lu=(t,s,c,l)=>{const d=Sa(t,s),g=l(c,d),h=h_(t,s,d);return mS(t,g.element,h),g},h1=(t,s,c)=>g1(t,s,(l,d)=>lu(t,d,l,c)),fS=(t,s)=>g1(t,s,(c,l)=>{const d=Sa(t,l);return mS(t,c,d),c}),zy=(t,s)=>{const c=ps(t),l=ps(s),d=Lt(l,c),g=gr(t,(h,y)=>!Mo(s,y)||h!==s[y]).t;return{toRemove:d,toSet:g}},ml=(t,s)=>{const{class:c,style:l,...d}=Ne(s),{toSet:g,toRemove:h}=zy(t.attributes,d),y=()=>{Je(h,Se=>oe(s,Se)),Su(s,g)},w=zr(s),{toSet:_,toRemove:O}=zy(t.styles,w),P=()=>{Je(O,Se=>$o(s,Se)),or(s,_)},H=Yk(s),V=Lt(H,t.classes),G=Lt(t.classes,H),ne=()=>{Hh(s,G),pi(s,V)},_e=Se=>{Gh(s,Se)},le=()=>{const Se=t.domChildren;fS(s,Se)},Ee=()=>{const Se=s,et=t.value.getOrUndefined();et!==Fe(Se)&&Kd(Se,et??"")};return y(),ne(),P(),t.innerHtml.fold(le,_e),Ee(),s},s0=t=>{const s=be.fromTag(t.tag);Su(s,t.attributes),Hh(s,t.classes),or(s,t.styles),t.innerHtml.each(l=>Gh(s,l));const c=t.domChildren;return ku(s,c),t.value.each(l=>{Kd(s,l)}),s},gS=(t,s)=>{try{const c=ml(t,s);return A.some(c)}catch{return A.none()}},p_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,hS=(t,s)=>{const c=d=>bs(d)===t.tag&&!p_(t)&&!fd(d),l=s.filter(c).bind(d=>gS(t,d)).getOrThunk(()=>s0(t));return d1(l,t.uid),l},b_=t=>{const s=ht(t,"behaviours").getOr({});return ye(ps(s),c=>{const l=s[c];return Wn(l)?[l.me]:[]})},pS=(t,s)=>u_(t,s),v_=t=>{const s=b_(t);return pS(t,s)},y_=(t,s,c)=>{const l=kf(t),d=Lg(t),g={"alloy.base.modification":d},h=s.length>0?t0(c,g,s,l):d;return jw(l,h)},bS=(t,s,c)=>{const l={"alloy.base.behaviour":Hy(t)};return o0(c,t.eventOrder,s,l).getOrDie()},Qh=(t,s)=>{const c=()=>Se,l=fn(i_),d=ut(dS(t)),g=v_(t),h=d_(g),y=m_(g),w=y_(d,h,y),_=hS(w,s),O=bS(d,h,y),P=fn(d.components),H=et=>{l.set(et)},V=()=>{l.set(qd(c))},G=()=>{const et=gc(_),$e=ye(et,yt=>l.get().getByDom(yt).fold(()=>[],jn));P.set($e)},ne=et=>{const $e=y;return(Ct($e[et.name()])?$e[et.name()]:()=>{throw new Error("Could not find "+et.name()+" in "+JSON.stringify(t,null,2))})()},_e=et=>Ct(y[et.name()]),le=()=>d.apis,Ee=et=>y[et]().map($e=>$e.state.readState()).getOr("not enabled"),Se={uid:t.uid,getSystem:l.get,config:ne,hasConfigured:_e,spec:t,readState:Ee,getApis:le,connect:H,disconnect:V,element:_,syncComponents:G,components:P.get,events:O};return Se},C_=(t,s)=>{const c=ht(t,"components").getOr([]);return s.fold(()=>Me(c,ol),l=>Me(c,(d,g)=>c0(d,Sa(l,g))))},vS=(t,s)=>{const{events:c,...l}=lR(t),d=C_(l,s),g={...l,events:{...c_,...c},components:d};return to.value(Qh(g,s))},ec=t=>{const s=be.fromText(t);return r0({element:s})},r0=t=>{const s=el("external.component",ma([Ye("element"),us("uid")]),t),c=fn(qd()),l=y=>{c.set(y)},d=()=>{c.set(qd(()=>h))},g=s.uid.getOrThunk(()=>Ig("external"));d1(s.element,g);const h={uid:g,getSystem:c.get,config:A.none,hasConfigured:co,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:W("No state"),syncComponents:ee,components:W([]),events:{}};return aS(h)},yS=Ig,CS=t=>Mo(t,"uid"),c0=(t,s)=>lS(t).getOrThunk(()=>{const c=CS(t)?t:{uid:yS(""),...t};return vS(c,s).getOrDie()}),ol=t=>c0(t,A.none()),fl=aS;var wS=(t,s,c,l,d)=>t(c,l)?A.some(c):Ct(d)&&d(c)?A.none():s(c,l,d);const SS=(t,s,c)=>{let l=t.dom;const d=Ct(c)?c:co;for(;l.parentNode;){l=l.parentNode;const g=be.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},Vy=(t,s,c)=>wS((d,g)=>g(d),SS,t,s,c),xS=(t,s)=>{const c=t.dom;return c.parentNode?TS(be.fromDom(c.parentNode),l=>!ss(t,l)&&s(l)):A.none()},TS=(t,s)=>{const c=d=>s(be.fromDom(d));return He(t.dom.childNodes,c).map(be.fromDom)},Uy=(t,s)=>{const c=l=>{for(let d=0;d<l.childNodes.length;d++){const g=be.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=c(l.childNodes[d]);if(h.isSome())return h}return A.none()};return c(t.dom)},Wy=(t,s,c)=>Vy(t,s,c).isSome(),a0=t=>Vl(t),Dm=(t,s,c)=>SS(t,l=>Zs(l,s),c),Rl=(t,s)=>xS(t,c=>Zs(c,s)),Zy=(t,s)=>TS(t,c=>Zs(c,s)),Os=(t,s)=>Vl(s,t),gd=(t,s,c)=>wS((d,g)=>Zs(d,g),Dm,t,s,c),p1="aria-controls",ES=t=>Vy(t,c=>{if(!Bn(c))return!1;const l=_s(c,"id");return l!==void 0&&l.indexOf(p1)>-1}).bind(c=>{const l=_s(c,"id"),d=U(c);return Os(d,`[${p1}="${l}"]`)}),l0=()=>{const t=Ut(p1);return{id:t,link:l=>{St(l,p1,t)},unlink:l=>{oe(l,p1)}}},i0=(t,s)=>ES(s).exists(c=>_f(t,c)),_f=(t,s)=>Wy(s,c=>ss(c,t.element),co)||i0(t,s),Da=(t,s,c,l,d,g,h,y=!1)=>({x:t,y:s,bubble:c,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:y}),Af=he.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),jy=(t,s,c,l,d,g,h,y,w)=>t.fold(s,c,l,d,g,h,y,w),kS=(t,s,c,l)=>t.fold(s,s,l,l,s,l,c,c),w_=(t,s,c,l)=>t.fold(s,l,s,l,c,c,s,l),ep=Af.southeast,Gy=Af.southwest,qy=Af.northeast,Ky=Af.northwest,Yy=Af.south,jt=Af.north,b1=Af.east,Xy=Af.west,tp=(t,s,c,l)=>{const d=t+s;return d>l?c:d<c?l:d},Fu=(t,s,c)=>Math.min(Math.max(t,s),c),S_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ra=(t,s)=>hs(["left","right","top","bottom"],c=>ht(s,c).map(l=>S_(t,l))),x_=(t,s,c)=>{const l=(w,_)=>s[w].map(O=>{const P=w==="top"||w==="bottom",H=P?c.top:c.left,G=(w==="left"||w==="top"?Math.max:Math.min)(O,_)+H;return P?Fu(G,t.y,t.bottom):Fu(G,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),y=l("bottom",t.bottom);return cr(d,g,h-d,y-g)},Of="layout",Jy=t=>t.x,_S=(t,s)=>t.x+t.width/2-s.width/2,sl=(t,s)=>t.x+t.width-s.width,Df=(t,s)=>t.y-s.height,u0=t=>t.y+t.height,Rf=(t,s)=>t.y+t.height/2-s.height/2,T_=t=>t.x+t.width,E_=(t,s)=>t.x-s.width,Vc=(t,s,c)=>Da(Jy(t),u0(t),c.southeast(),ep(),"southeast",Ra(t,{left:1,top:3}),Of),Rc=(t,s,c)=>Da(sl(t,s),u0(t),c.southwest(),Gy(),"southwest",Ra(t,{right:0,top:3}),Of),Uc=(t,s,c)=>Da(Jy(t),Df(t,s),c.northeast(),qy(),"northeast",Ra(t,{left:1,bottom:2}),Of),Gs=(t,s,c)=>Da(sl(t,s),Df(t,s),c.northwest(),Ky(),"northwest",Ra(t,{right:0,bottom:2}),Of),ea=(t,s,c)=>Da(_S(t,s),Df(t,s),c.north(),jt(),"north",Ra(t,{bottom:2}),Of),Mc=(t,s,c)=>Da(_S(t,s),u0(t),c.south(),Yy(),"south",Ra(t,{top:3}),Of),Qy=(t,s,c)=>Da(T_(t),Rf(t,s),c.east(),b1(),"east",Ra(t,{left:0}),Of),d0=(t,s,c)=>Da(E_(t,s),Rf(t,s),c.west(),Xy(),"west",Ra(t,{right:1}),Of),eC=()=>[Vc,Rc,Uc,Gs,Mc,ea,Qy,d0],AS=()=>[Rc,Vc,Gs,Uc,Mc,ea,Qy,d0],OS=()=>[Uc,Gs,Vc,Rc,ea,Mc],m0=()=>[Gs,Uc,Rc,Vc,ea,Mc],f0=()=>[Vc,Rc,Uc,Gs,Mc,ea],Hg=()=>[Rc,Vc,Gs,Uc,Mc,ea],tC=(t,s)=>s.universal?t:ao(t,c=>go(s.channels,c));var zg=Object.freeze({__proto__:null,events:t=>vr([Qe(su(),(s,c)=>{const l=t.channels,d=ps(l),g=c,h=tC(d,g);Je(h,y=>{const w=l[y],_=w.schema,O=el("channel["+y+`] data
Receiver: `+bi(s.element),_,g.data);w.onReceive(s,O)})})])}),k_=[is("channels",eu(to.value,ma([au("onReceive"),Te("schema",Ri())])))];const Ql=Aa({fields:k_,name:"receiving",active:zg});var __=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Bi=(t,s=!1)=>t.dom.focus({preventScroll:s}),v1=t=>t.dom.blur(),y1=t=>{const s=U(t).dom;return t.dom===s.activeElement},hd=(t=xl())=>A.from(t.dom.activeElement).map(be.fromDom),Ml=t=>hd(U(t)).filter(s=>t.dom.contains(s.dom)),Mf=(t,s)=>{const c=U(s),l=hd(c).bind(g=>{const h=y=>ss(g,y);return h(s)?A.some(s):Uy(s,h)}),d=t(s);return l.each(g=>{hd(c).filter(h=>ss(h,g)).fold(()=>{Bi(g)},ee)}),d},nC=he.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),g0=(t,s,c,l,d,g)=>{const h=s.rect,y=h.x-c,w=h.y-l,_=h.width,O=h.height,P=d-(y+_),H=g-(w+O),V=A.some(y),G=A.some(w),ne=A.some(P),_e=A.some(H),le=A.none();return jy(s.direction,()=>ga(t,V,G,le,le),()=>ga(t,le,G,ne,le),()=>ga(t,V,le,le,_e),()=>ga(t,le,le,ne,_e),()=>ga(t,V,G,le,le),()=>ga(t,V,le,le,_e),()=>ga(t,V,G,le,le),()=>ga(t,le,G,ne,le))},DS=(t,s)=>t.fold(()=>{const c=s.rect;return ga("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,l,d,g)=>g0("absolute",s,c,l,d,g),(c,l,d,g)=>g0("fixed",s,c,l,d,g)),Vg=(t,s)=>{const c=xn(vm,s),l=t.fold(c,c,()=>{const h=Qc();return vm(s).translate(-h.left,-h.top)}),d=Lc(s),g=xu(s);return cr(l.left,l.top,d,g)},oC=(t,s)=>s.fold(()=>t.fold(cc,cc,cr),c=>t.fold(W(c),W(c),()=>{const l=sC(t,c.x,c.y);return cr(l.left,l.top,c.width,c.height)})),sC=(t,s,c)=>{const l=pr(s,c),d=()=>{const g=Qc();return l.translate(-g.left,-g.top)};return t.fold(W(l),W(l),d)},RS=(t,s,c,l)=>t.fold(s,c,l);nC.none;const MS=nC.relative,C1=nC.fixed,Ug=(t,s)=>({anchorBox:t,origin:s}),rC=(t,s)=>Ug(t,s),cC="data-alloy-placement",NS=(t,s)=>{St(t,cC,s)},BS=t=>$(t,cC),A_=t=>oe(t,cC),h0=he.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),PS=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y,right:w,bottom:_,width:O,height:P}=t,H=h>=c&&h<=d,V=y>=l&&y<=g,G=H&&V,ne=w<=d&&w>=c,_e=_<=g&&_>=l,le=ne&&_e,Ee=Math.min(O,h>=c?d-h:w-c),Se=Math.min(P,y>=l?g-y:_-l);return{originInBounds:G,sizeInBounds:le,visibleW:Ee,visibleH:Se}},O_=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y,width:w,height:_}=t,O=Math.max(c,d-w),P=Math.max(l,g-_),H=Fu(h,c,O),V=Fu(y,l,P),G=Math.min(H+w,d)-H,ne=Math.min(V+_,g)-V;return cr(H,V,G,ne)},$S=(t,s,c)=>{const l=W(s.bottom-c.y),d=W(c.bottom-s.y),g=kS(t,d,d,l),h=W(s.right-c.x),y=W(c.right-s.x);return{maxWidth:w_(t,y,y,h),maxHeight:g}},w1=(t,s,c,l)=>{const d=t.bubble,g=d.offset,h=x_(l,t.restriction,g),y=t.x+g.left,w=t.y+g.top,_=cr(y,w,s,c),{originInBounds:O,sizeInBounds:P,visibleW:H,visibleH:V}=PS(_,h),G=O&&P,ne=G?_:O_(_,h),_e=ne.width>0&&ne.height>0,{maxWidth:le,maxHeight:Ee}=$S(t.direction,ne,l),Se={rect:ne,maxHeight:Ee,maxWidth:le,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return G||t.alwaysFit?h0.fit(Se):h0.nofit(Se,H,V,_e)},D_=(t,s,c,l,d,g)=>{const h=l.width,y=l.height,w=(O,P,H,V,G)=>{const ne=O(c,l,d,t,g),_e=w1(ne,h,y,g);return _e.fold(W(_e),(le,Ee,Se,et)=>(G===et?Se>V||Ee>H:!G&&et)?_e:h0.nofit(P,H,V,G))};return zo(s,(O,P)=>{const H=xn(w,P);return O.fold(W(O),H)},h0.nofit({rect:c,maxHeight:l.height,maxWidth:l.width,direction:ep(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Dt,Dt)},FS=Pt,Nl=(t,s,c)=>ci(t,s,FS,c),aC=(t,s,c)=>hg(t,s,FS,c),lC=Qu,iC=["top","bottom","right","left"],p0="data-alloy-transition-timer",R_=(t,s)=>qk(t,s.classes),M_=(t,s,c)=>c.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),b0=(t,s)=>{const c=l=>parseFloat(l).toFixed(3);return ws(s,(l,d)=>{const g=t[d].map(c),h=l.map(c);return!Zr(g,h)}).isSome()},IS=t=>{const s=g=>{const y=$s(t,g).split(/\s*,\s*/);return ao(y,de)},c=g=>{if(We(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return mc(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return zo(d,(g,h,y)=>{const w=c(l[y])+c(h);return Math.max(g,w)},0)},uC=(t,s)=>{const c=bc(),l=bc();let d;const g=_=>{var O;const P=(O=_.raw.pseudoElement)!==null&&O!==void 0?O:"";return ss(_.target,t)&&re(P)&&go(iC,_.raw.propertyName)},h=_=>{if(jo(_)||g(_)){c.clear(),l.clear();const O=_==null?void 0:_.raw.type;(jo(O)||O===sd())&&(clearTimeout(d),oe(t,p0),pi(t,s.classes))}},y=Nl(t,Hw(),_=>{g(_)&&(y.unbind(),c.set(Nl(t,sd(),h)),l.set(Nl(t,Lw(),h)))}),w=IS(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),St(t,p0,d)})},dC=(t,s)=>{Hh(t,s.classes),$(t,p0).each(c=>{clearTimeout(parseInt(c,10)),oe(t,p0)}),uC(t,s)},S1=(t,s,c,l,d,g)=>{const h=M_(l,d,g);if(h||R_(t,l)){qt(t,"position",c.position);const y=Vg(s,t),w=DS(s,{...d,rect:y}),_=hs(iC,O=>w[O]);b0(c,_)&&(dt(t,_),h&&dC(t,l),Xc(t))}else pi(t,l.classes)},mC=t=>({width:Lc(t),height:xu(t)}),LS=(t,s,c,l)=>{$o(s,"max-height"),$o(s,"max-width");const d=mC(s);return D_(s,l.preference,t,d,c,l.bounds)},HS=(t,s)=>{const c=s.classes;pi(t,c.off),Hh(t,c.on)},zS=(t,s,c)=>{const l=c.maxHeightFunction;l(t,s.maxHeight)},N_=(t,s,c)=>{const l=c.maxWidthFunction;l(t,s.maxWidth)},VS=(t,s,c)=>{const l=DS(c.origin,s);c.transition.each(d=>{S1(t,c.origin,l,d,s,c.lastPlacement)}),r1(t,l)},US=(t,s)=>{NS(t,s.placement)},WS=(t,s)=>{hm(t,Math.floor(s))},v0=W((t,s)=>{WS(t,s),or(t,{"overflow-x":"hidden","overflow-y":"auto"})}),np=W((t,s)=>{WS(t,s)}),ZS=(t,s,c)=>t[s]===void 0?c:t[s],B_=(t,s,c,l,d,g,h,y)=>{const w=ZS(h,"maxHeightFunction",v0()),_=ZS(h,"maxWidthFunction",ee),O=t.anchorBox,P=t.origin,H={bounds:oC(P,g),origin:P,preference:l,maxHeightFunction:w,maxWidthFunction:_,lastPlacement:d,transition:y};return y0(O,s,c,H)},y0=(t,s,c,l)=>{const d=LS(t,s,c,l);return VS(s,d,l),US(s,d),HS(s,d),zS(s,d,l),N_(s,d,l),{layout:d.layout,placement:d.placement}},P_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Iu=(t,s,c,l=1)=>{const d=t*l,g=s*l,h=w=>ht(c,w).getOr([]),y=(w,_,O)=>{const P=Lt(P_,O);return{offset:pr(w,_),classesOn:ye(O,h),classesOff:ye(P,h)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},C0=()=>Iu(0,0,{}),w0=Dt,S0=(t,s)=>c=>Bl(c)==="rtl"?s:t,Bl=t=>$s(t,"direction")==="rtl"?"rtl":"ltr";var Nf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Nf||(Nf={}));const Bf="data-alloy-vertical-dir",$_=t=>Wy(t,s=>Bn(s)&&_s(s,"data-alloy-vertical-dir")===Nf.BottomToTop),Pf=()=>Js("layouts",[Ye("onLtr"),Ye("onRtl"),us("onBottomLtr"),us("onBottomRtl")]),x1=(t,s,c,l,d,g,h)=>{const y=h.map($_).getOr(!1),w=s.layouts.map(V=>V.onLtr(t)),_=s.layouts.map(V=>V.onRtl(t)),O=y?s.layouts.bind(V=>V.onBottomLtr.map(G=>G(t))).or(w).getOr(d):w.getOr(c),P=y?s.layouts.bind(V=>V.onBottomRtl.map(G=>G(t))).or(_).getOr(g):_.getOr(l);return S0(O,P)(t)},F_=(t,s,c)=>{const l=s.hotspot,d=Vg(c,l.element),g=x1(t.element,s,f0(),Hg(),OS(),m0(),A.some(s.hotspot.element));return A.some(w0({anchorBox:d,bubble:s.bubble.getOr(C0()),overrides:s.overrides,layouts:g}))};var I_=[Ye("hotspot"),us("bubble"),Te("overrides",{}),Pf(),Cr("placement",F_)];const jS=(t,s,c)=>{const l=sC(c,s.x,s.y),d=cr(l.left,l.top,s.width,s.height),g=x1(t.element,s,eC(),AS(),eC(),AS(),A.none());return A.some(w0({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var x0=[Ye("x"),Ye("y"),Te("height",0),Te("width",0),Te("bubble",C0()),Te("overrides",{}),Pf(),Cr("placement",jS)];const T0=he.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),L_=t=>t.fold(Dt,(s,c,l)=>s.translate(-c,-l)),T1=t=>t.fold(Dt,Dt),fC=t=>zo(t,(s,c)=>s.translate(c.left,c.top),pr(0,0)),H_=t=>{const s=Me(t,L_);return fC(s)},gC=t=>{const s=Me(t,T1);return fC(s)},hC=T0.screen,E0=T0.absolute,z_=(t,s,c)=>{const l=$a(c.root).dom,d=g=>{const h=Ic(g),y=Ic(t.element);return ss(h,y)};return A.from(l.frameElement).map(be.fromDom).filter(d).map(Tc)},Wg=(t,s,c)=>{const l=Ic(t.element),d=Qc(l),g=z_(t,s,c).getOr(d);return E0(g,d.left,d.top)},GS=(t,s,c,l)=>{const d=hC(pr(t,s));return A.some(Ji(d,c,l))},pC=(t,s,c,l,d)=>t.map(g=>{const h=[s,g.point],y=RS(l,()=>gC(h),()=>gC(h),()=>H_(h)),w=pg(y.left,y.top,g.width,g.height),_=c.showAbove?OS():f0(),O=c.showAbove?m0():Hg(),P=x1(d,c,_,O,_,O,A.none());return w0({anchorBox:w,bubble:c.bubble.getOr(C0()),overrides:c.overrides,layouts:P})}),qS=(t,s,c)=>{const l=Wg(t,c,s);return s.node.filter(Po).bind(d=>{const g=d.dom.getBoundingClientRect(),h=GS(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return pC(h,l,s,c,y)})};var k0=[Ye("node"),Ye("root"),us("bubble"),Pf(),Te("overrides",{}),Te("showAbove",!1),Cr("placement",qS)];const V_="\uFEFF",$f=" ",op={create:(t,s,c,l)=>({start:t,soffset:s,finish:c,foffset:l})},_0=he.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sp=(t,s,c,l)=>t.fold(s,c,l),rp=t=>t.fold(Dt,Dt,Dt),U_=_0.before,KS=_0.on,W_=_0.after,A0={before:U_,on:KS,after:W_,cata:sp,getStart:rp},Rm=he.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bC=t=>Rm.exact(t.start,t.soffset,t.finish,t.foffset),vC=t=>t.match({domRange:s=>be.fromDom(s.startContainer),relative:(s,c)=>A0.getStart(s),exact:(s,c,l,d)=>s}),Z_=Rm.domRange,yC=Rm.relative,YS=Rm.exact,XS=t=>{const s=vC(t);return $a(s)},JS=op.create,cp={domRange:Z_,relative:yC,exact:YS,exactFromRange:bC,getWin:XS,range:JS},O0=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,l)=>{t.setStart(c.dom,l)},c=>{t.setStartAfter(c.dom)})},Zg=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,l)=>{t.setEnd(c.dom,l)},c=>{t.setEndAfter(c.dom)})},Mm=(t,s,c)=>{const l=t.document.createRange();return O0(l,s),Zg(l,c),l},E1=(t,s,c,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(l.dom,d),g},ap=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),j_=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(ap):A.none()},pd=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(ap):A.none()},Pi=he.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),D0=(t,s,c)=>s(be.fromDom(c.startContainer),c.startOffset,be.fromDom(c.endContainer),c.endOffset),G_=(t,s)=>s.match({domRange:c=>({ltr:W(c),rtl:A.none}),relative:(c,l)=>({ltr:se(()=>Mm(t,c,l)),rtl:se(()=>A.some(Mm(t,l,c)))}),exact:(c,l,d,g)=>({ltr:se(()=>E1(t,c,l,d,g)),rtl:se(()=>A.some(E1(t,d,g,c,l)))})}),dR=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Pi.rtl(be.fromDom(d.endContainer),d.endOffset,be.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>D0(t,Pi.ltr,c)):D0(t,Pi.ltr,c)},jg=(t,s)=>{const c=G_(t,s);return dR(t,c)},lp=(t,s)=>jg(t,s).match({ltr:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(l.dom,d),y.setEnd(g.dom,h),y},rtl:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(g.dom,h),y.setEnd(l.dom,d),y}});Pi.ltr,Pi.rtl;const ip=(t,s,c)=>ao(_i(t,c),s),rl=(t,s)=>Fc(s,t),R0=(t,s,c,l)=>{const g=Ic(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,l),g},Gg=(t,s,c,l)=>{const d=R0(t,s,c,l),g=ss(t,c)&&s===l;return d.collapsed&&!g},M0=t=>A.from(t.getSelection()),QS=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(op.create(be.fromDom(s.startContainer),s.startOffset,be.fromDom(c.endContainer),c.endOffset))}else return A.none()},CC=t=>{if(t.anchorNode===null||t.focusNode===null)return QS(t);{const s=be.fromDom(t.anchorNode),c=be.fromDom(t.focusNode);return Gg(s,t.anchorOffset,c,t.focusOffset)?A.some(op.create(s,t.anchorOffset,c,t.focusOffset)):QS(t)}},N0=t=>M0(t).filter(s=>s.rangeCount>0).bind(CC),ha=(t,s)=>{const c=lp(t,s);return j_(c)},B0=(t,s)=>{const c=lp(t,s);return pd(c)},wC=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(mo,"text"),SC=t=>wC.get(t),Nm=(t,s)=>({element:t,offset:s}),ex=(t,s)=>{const c=gc(t);if(c.length===0)return Nm(t,s);if(s<c.length)return Nm(c[s],0);{const l=c[c.length-1],d=mo(l)?SC(l).length:gc(l).length;return Nm(l,d)}},Ff=(t,s)=>mo(t)?Nm(t,s):ex(t,s),P0=t=>t.foffset!==void 0,$0=(t,s)=>s.getSelection.getOrThunk(()=>()=>N0(t))().map(l=>{if(P0(l)){const d=Ff(l.start,l.soffset),g=Ff(l.finish,l.foffset);return cp.range(d.element,d.offset,g.element,g.offset)}else return l}),xC=(t,s,c)=>{const l=$a(s.root).dom,d=Wg(t,c,s),g=$0(l,s).bind(w=>{if(P0(w))return B0(l,cp.exactFromRange(w)).orThunk(()=>{const O=be.fromText(V_);Sl(w.start,O);const P=ha(l,cp.exact(O,0,O,1));return Gl(O),P}).bind(O=>GS(O.left,O.top,O.width,O.height));{const _=ns(w,P=>P.dom.getBoundingClientRect()),O={left:Math.min(_.firstCell.left,_.lastCell.left),right:Math.max(_.firstCell.right,_.lastCell.right),top:Math.min(_.firstCell.top,_.lastCell.top),bottom:Math.max(_.firstCell.bottom,_.lastCell.bottom)};return GS(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),y=$0(l,s).bind(w=>P0(w)?Bn(w.start)?A.some(w.start):wa(w.start):A.some(w.firstCell)).getOr(t.element);return pC(g,d,s,c,y)};var qg=[us("getSelection"),Ye("root"),us("bubble"),Pf(),Te("overrides",{}),Te("showAbove",!1),Cr("placement",xC)];const up="link-layout",za=t=>t.x+t.width,tx=(t,s)=>t.x-s.width,TC=(t,s)=>t.y-s.height+t.height,EC=t=>t.y,nx=(t,s,c)=>Da(za(t),EC(t),c.southeast(),ep(),"southeast",Ra(t,{left:0,top:2}),up),kC=(t,s,c)=>Da(tx(t,s),EC(t),c.southwest(),Gy(),"southwest",Ra(t,{right:1,top:2}),up),ox=(t,s,c)=>Da(za(t),TC(t,s),c.northeast(),qy(),"northeast",Ra(t,{left:0,bottom:3}),up),sx=(t,s,c)=>Da(tx(t,s),TC(t,s),c.northwest(),Ky(),"northwest",Ra(t,{right:1,bottom:3}),up),$i=()=>[nx,kC,ox,sx],Bm=()=>[kC,nx,sx,ox],rx=(t,s,c)=>{const l=Vg(c,s.item.element),d=x1(t.element,s,$i(),Bm(),$i(),Bm(),A.none());return A.some(w0({anchorBox:l,bubble:C0(),overrides:s.overrides,layouts:d}))};var Kg=[Ye("item"),Pf(),Te("overrides",{}),Cr("placement",rx)],gl=Hc("type",{selection:qg,node:k0,hotspot:I_,submenu:Kg,makeshift:x0});const Ci=[Yl("classes",Ht),Ni("mode","all",["all","layout","placement"])],hl=[Te("useFixed",co),us("getBounds")],Fi=[is("anchor",gl),Js("transition",Ci)],F0=()=>{const t=document.documentElement;return C1(0,0,t.clientWidth,t.clientHeight)},Ii=t=>{const s=Tc(t.element),c=t.element.dom.getBoundingClientRect();return MS(s.left,s.top,c.width,c.height)},Yg=(t,s,c,l,d,g)=>{const h=rC(s.anchorBox,t);return B_(h,l.element,s.bubble,s.layouts,d,c,s.overrides,g)},q_=(t,s,c,l,d)=>{const g=A.none();cx(t,s,c,l,d,g)},cx=(t,s,c,l,d,g)=>{const h=el("placement.info",Dn(Fi),d),y=h.anchor,w=l.element,_=c.get(l.uid);Mf(()=>{qt(w,"position","fixed");const O=Ys(w,"visibility");qt(w,"visibility","hidden");const P=s.useFixed()?F0():Ii(t);y.placement(t,y,P).each(H=>{const V=g.orThunk(()=>s.getBounds.map(Go)),G=Yg(P,H,V,l,_,h.transition);c.set(l.uid,G)}),O.fold(()=>{$o(w,"visibility")},H=>{qt(w,"visibility",H)}),Ys(w,"left").isNone()&&Ys(w,"top").isNone()&&Ys(w,"right").isNone()&&Ys(w,"bottom").isNone()&&Kr(Ys(w,"position"),"fixed")&&$o(w,"position")},w)};var lx=Object.freeze({__proto__:null,position:q_,positionWithinBounds:cx,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,l)=>{const d=l.element;Je(["position","left","right","top","bottom"],g=>$o(d,g)),A_(d),c.clear(l.uid)}}),AC=Object.freeze({__proto__:null,init:()=>{let t={};return gi({readState:()=>t,clear:d=>{Wn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>ht(t,d)})}});const Ma=Aa({fields:hl,name:"positioning",active:__,apis:lx,state:AC}),OC=t=>t.getSystem().isConnected(),If=t=>{po(t,cu());const s=t.components();Je(s,If)},dp=t=>{const s=t.components();Je(s,dp),po(t,Al())},DC=(t,s)=>{t.getSystem().addToWorld(s),Po(t.element)&&dp(s)},I0=t=>{If(t),t.getSystem().removeFromWorld(t)},k1=(t,s)=>{Ea(t.element,s.element)},RC=t=>{Je(t.components(),s=>Gl(s.element)),Bd(t.element),t.syncComponents()},mp=(t,s,c)=>{const l=t.components();RC(t);const d=c(s),g=Lt(l,d);Je(g,h=>{If(h),t.getSystem().removeFromWorld(h)}),Je(d,h=>{OC(h)?k1(t,h):(t.getSystem().addToWorld(h),k1(t,h),Po(t.element)&&dp(h))}),t.syncComponents()},MC=(t,s,c)=>{const l=t.components(),d=ye(s,y=>lS(y).toArray());Je(l,y=>{go(d,y)||I0(y)});const g=c(s),h=Lt(l,g);Je(h,y=>{OC(y)&&I0(y)}),Je(g,y=>{OC(y)||DC(t,y)}),t.syncComponents()},Yd=(t,s)=>{Xg(t,s,Ea)},Xg=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),Po(t.element)&&dp(s),t.syncComponents()},ix=t=>{If(t),Gl(t.element),t.getSystem().removeFromWorld(t)},Pm=t=>{const s=xc(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());ix(t),s.each(c=>{c.syncComponents()})},Li=t=>{const s=t.components();Je(s,ix),Bd(t.element),t.syncComponents()},ux=(t,s)=>{Jg(t,s,Ea)},Xd=(t,s)=>{Jg(t,s,ai)},Jg=(t,s,c)=>{c(t,s.element);const l=gc(s.element);Je(l,d=>{s.getByDom(d).each(dp)})},NC=t=>{const s=gc(t.element);Je(s,c=>{t.getByDom(c).each(If)}),Gl(t.element)},L0=(t,s,c,l)=>{c.get().each(h=>{Li(t)});const d=s.getAttachPoint(t);Yd(d,t);const g=t.getSystem().build(l);return Yd(t,g),c.set(g),g},dx=(t,s,c,l)=>{const d=L0(t,s,c,l);return s.onOpen(t,d),d},Y_=(t,s,c,l)=>c.get().map(()=>L0(t,s,c,l)),X_=(t,s,c,l,d)=>{gp(t,s),dx(t,s,c,l),d(),H0(t,s)},mx=(t,s,c)=>{c.get().each(l=>{Li(t),Pm(t),s.onClose(t,l),c.clear()})},Lf=(t,s,c)=>c.isOpen(),fp=(t,s,c,l)=>Lf(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,l)),_1=(t,s,c)=>c.get(),J_=(t,s,c,l)=>{Ys(t.element,s).fold(()=>{oe(t.element,c)},d=>{St(t.element,c,d)}),qt(t.element,s,l)},Q_=(t,s,c)=>{$(t.element,c).fold(()=>$o(t.element,s),l=>qt(t.element,s,l))},gp=(t,s,c)=>{const l=s.getAttachPoint(t);qt(t.element,"position",Ma.getMode(l)),J_(t,"visibility",s.cloakVisibilityAttr,"hidden")},BC=t=>Vs(["top","left","right","bottom"],s=>Ys(t,s).isSome()),H0=(t,s,c)=>{BC(t.element)||$o(t.element,"position"),Q_(t,"visibility",s.cloakVisibilityAttr)};var PC=Object.freeze({__proto__:null,cloak:gp,decloak:H0,open:dx,openWhileCloaked:X_,close:mx,isOpen:Lf,isPartOf:fp,getState:_1,setContent:Y_}),hp=Object.freeze({__proto__:null,events:(t,s)=>vr([Qe(Jp(),(c,l)=>{mx(c,t,s)})])}),FC=[Yo("onOpen"),Yo("onClose"),Ye("isPartOf"),Ye("getAttachPoint"),Te("cloakVisibilityAttr","data-precloak-visibility")],IC=Object.freeze({__proto__:null,init:()=>{const t=Fs(),s=W("not-implemented");return gi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const es=Aa({fields:FC,name:"sandboxing",active:hp,apis:PC,state:IC}),Jd=W("dismiss.popups"),Qg=W("reposition.popups"),A1=W("mouse.released"),LC=ma([Te("isExtraPart",co),Js("fireEventInstead",[Te("event",bf())])]),$m=t=>{const s=el("Dismissal",LC,t);return{[Jd()]:{schema:ma([Ye("target")]),onReceive:(c,l)=>{es.isOpen(c)&&(es.isPartOf(c,l.target)||s.isExtraPart(c,l.target)||s.fireEventInstead.fold(()=>es.close(c),g=>po(c,g.event)))}}}},HC=ma([Js("fireEventInstead",[Te("event",dy())]),Kl("doReposition")]),z0=t=>{const s=el("Reposition",HC,t);return{[Qg()]:{onReceive:c=>{es.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),l=>po(c,l.event))}}}},zC=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},VC=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var U0=Object.freeze({__proto__:null,onLoad:zC,onUnload:VC,setValue:(t,s,c,l)=>{s.store.manager.setValue(t,s,c,l)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),bp=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[Er((l,d)=>{zC(l,t,s)}),Wd((l,d)=>{VC(l,t,s)})]:[vy(t,s,zC)];return vr(c)}});const W0=()=>{const t=fn(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,l=()=>{t.set(null)};return gi({set:t.set,get:t.get,isNotSet:c,clear:l,readState:s})},eA=()=>gi({readState:ee}),Z0=()=>{const t=fn({}),s=fn({});return gi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>ht(t.get(),h).orThunk(()=>ht(s.get(),h)),update:h=>{const y=t.get(),w=s.get(),_={},O={};Je(h,P=>{_[P.value]=P,ht(P,"meta").each(H=>{ht(H,"text").each(V=>{O[V]=P})})}),t.set({...y,..._}),s.set({...w,...O})},clear:()=>{t.set({}),s.set({})}})};var tA=Object.freeze({__proto__:null,memory:W0,dataset:Z0,manual:eA,init:t=>t.store.manager.state(t)});const O1=(t,s,c,l)=>{const d=s.store;c.update([l]),d.setValue(t,l),s.onSetValue(t,l)},iu=(t,s,c)=>{const l=s.store,d=l.getDataKey(t);return c.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},pa=(t,s,c)=>{s.store.initialValue.each(d=>{O1(t,s,c,d)})},nA=(t,s,c)=>{c.clear()};var bd=[us("initialValue"),Ye("getFallbackEntry"),Ye("getDataKey"),Ye("setValue"),Cr("manager",{setValue:O1,getValue:iu,onLoad:pa,onUnload:nA,state:Z0})];const oA=(t,s,c)=>s.store.getValue(t),gx=(t,s,c,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},D1=(t,s,c)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var vp=[Ye("getValue"),Te("setValue",ee),us("initialValue"),Cr("manager",{setValue:gx,getValue:oA,onLoad:D1,onUnload:ee,state:dl.init})];const hx=(t,s,c,l)=>{c.set(l),s.onSetValue(t,l)},px=(t,s,c)=>c.get(),mR=(t,s,c)=>{s.store.initialValue.each(l=>{c.isNotSet()&&c.set(l)})},fR=(t,s,c)=>{c.clear()};var bx=[us("initialValue"),Cr("manager",{setValue:hx,getValue:px,onLoad:mR,onUnload:fR,state:W0})],vx=[di("store",{mode:"memory"},Hc("mode",{memory:bx,manual:vp,dataset:bd})),Yo("onSetValue"),Te("resetOnDom",!1)];const Wt=Aa({fields:vx,name:"representing",active:bp,apis:U0,extra:{setValueFrom:(t,s)=>{const c=Wt.getValue(s);Wt.setValue(t,c)}},state:tA}),ba=(t,s)=>L(t,{},Me(s,c=>ay(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([ms("dump",Dt)])),R1=t=>t.dump,va=(t,s)=>({...bt(s),...t.dump}),uu={field:ba,augment:va,get:R1},UC="placeholder",nh=he.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),j0=t=>Mo(t,"uiType"),Hf=(t,s,c,l)=>t.exists(d=>d!==c.owner)?nh.single(!0,W(c)):ht(l,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+ps(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),M1=(t,s,c,l)=>j0(c)&&c.uiType===UC?Hf(t,s,c,l):nh.single(!1,W(c)),yx=(t,s,c,l)=>M1(t,s,c,l).fold((g,h)=>{const y=j0(c)?h(s,c.config,c.validated):h(s),w=ht(y,"components").getOr([]),_=ye(w,O=>yx(t,s,O,l));return[{...y,components:_}]},(g,h)=>{if(j0(c)){const y=h(s,c.config,c.validated);return c.validated.preprocess.getOr(Dt)(y)}else return h(s)}),sA=(t,s,c,l)=>ye(c,d=>yx(t,s,d,l)),rA=(t,s)=>{let c=!1;const l=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,y)=>h,(h,y)=>h);return{name:W(t),required:g,used:l,replace:d}},cA=(t,s,c,l)=>{const d=ns(l,(h,y)=>rA(y,h)),g=sA(t,s,c,d);return cs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},zf=nh.single,N1=nh.multiple,B1=W(UC),G0=he.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),wi=Te("factory",{sketch:Dt}),Qd=Te("schema",[]),Vf=Ye("name"),Uf=Oc("pname","pname",ko(t=>"<alloy."+Ut(t.name)+">"),Ri()),aA=ms("schema",()=>[us("preprocess")]),q0=Te("defaults",W({})),K0=Te("overrides",W({})),lA=Dn([wi,Qd,Vf,Uf,q0,K0]),iA=Dn([wi,Qd,Vf,q0,K0]),uA=Dn([wi,Qd,Vf,Uf,q0,K0]),dA=Dn([wi,aA,Vf,Ye("unit"),Uf,q0,K0]),Cx=t=>t.fold(A.some,A.none,A.some,A.some),Y0=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},mA=t=>t.fold(Dt,Dt,Dt,Dt),X0=(t,s)=>c=>{const l=el("Converting part type",s,c);return t(l)},Va=X0(G0.required,lA),du=X0(G0.external,iA),Hi=X0(G0.optional,uA),J0=X0(G0.group,dA),Q0=W("entirety");var wx=Object.freeze({__proto__:null,required:Va,external:du,optional:Hi,group:J0,asNamedPart:Cx,name:Y0,asCommon:mA,original:Q0});const WC=(t,s,c,l)=>ar(s.defaults(t,c,l),c,{uid:t.partUids[s.name]},s.overrides(t,c,l)),Sx=(t,s,c)=>{const l={},d={};return Je(c,g=>{g.fold(h=>{l[h.pname]=zf(!0,(y,w,_)=>h.factory.sketch(WC(y,h,w,_)))},h=>{const y=s.parts[h.name];d[h.name]=W(h.factory.sketch(WC(s,h,y[Q0()]),y))},h=>{l[h.pname]=zf(!1,(y,w,_)=>h.factory.sketch(WC(y,h,w,_)))},h=>{l[h.pname]=N1(!0,(y,w,_)=>{const O=y[h.name];return Me(O,P=>h.factory.sketch(ar(h.defaults(y,P,_),P,h.overrides(y,P))))})})}),{internals:W(l),externals:W(d)}},ZC=(t,s)=>{const c={};return Je(s,l=>{Cx(l).each(d=>{const g=xx(t,d.pname);c[d.name]=h=>{const y=el("Part: "+d.name+" in "+t,Dn(d.schema),h);return{...g,config:h,validated:y}}})}),c},xx=(t,s)=>({uiType:B1(),owner:t,name:s}),Tx=(t,s,c)=>({uiType:B1(),owner:t,name:s,config:c,validated:{}}),fA=t=>ye(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>nd(c.name,c.schema.concat([rS(Q0())]))).toArray()),gA=t=>Me(t,Y0),ev=(t,s,c)=>Sx(t,s,c),jC=(t,s,c)=>cA(A.some(t),s,s.components,c),pt=(t,s,c)=>{const l=s.partUids[c];return t.getSystem().getByUid(l).toOptional()},Pl=(t,s,c)=>pt(t,s,c).getOrDie("Could not find part: "+c),Ex=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return Je(c,h=>{l[h]=W(g.getByUid(d[h]))}),l},GC=(t,s)=>{const c=t.getSystem();return ns(s.partUids,(l,d)=>W(c.getByUid(l)))},P1=t=>ps(t.partUids),$1=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return Je(c,h=>{l[h]=W(g.getByUid(d[h]).getOrDie())}),l},tv=(t,s)=>{const c=gA(s);return fs(Me(c,l=>({key:l,value:t+"-"+l})))},F1=t=>Oc("partUids","partUids",af(s=>tv(s.uid,t)),Ri());var kx=Object.freeze({__proto__:null,generate:ZC,generateOne:Tx,schemas:fA,names:gA,substitutes:ev,components:jC,defaultUids:tv,defaultUidsSchema:F1,getAllParts:GC,getAllPartNames:P1,getPart:pt,getPartOrDie:Pl,getParts:Ex,getPartsOrDie:$1});const _x=(t,s)=>(t.length>0?[nd("parts",t)]:[]).concat([Ye("uid"),Te("dom",{}),Te("components",[]),rS("originalSpec"),Te("debug.sketcher",{})]).concat(s),qC=(t,s,c,l,d)=>{const g=_x(l,d);return el(t+" [SpecSchema]",ma(g.concat(s)),c)},KC=(t,s,c,l)=>{const d=Ax(l),g=qC(t,s,d,[],[]);return c(g,d)},Im=(t,s,c,l,d)=>{const g=Ax(d),h=fA(c),y=F1(c),w=qC(t,s,g,h,[y]),_=ev(t,w,c),O=jC(t,w,_.internals());return l(w,O,g,_.externals())},YC=t=>Mo(t,"uid"),Ax=t=>YC(t)?t:{...t,uid:Ig("uid")},hA=t=>t.uid!==void 0,pA=ma([Ye("name"),Ye("factory"),Ye("configFields"),Te("apis",{}),Te("extraApis",{})]),Ox=ma([Ye("name"),Ye("factory"),Ye("configFields"),Ye("partFields"),Te("apis",{}),Te("extraApis",{})]),ei=t=>{const s=el("Sketcher for "+t.name,pA,t),c=g=>KC(s.name,s.configFields,s.factory,g),l=ns(s.apis,Xh),d=ns(s.extraApis,(g,h)=>Ih(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...l,...d}},pl=t=>{const s=el("Sketcher for "+t.name,Ox,t),c=h=>Im(s.name,s.configFields,s.partFields,s.factory,h),l=ZC(s.name,s.partFields),d=ns(s.apis,Xh),g=ns(s.extraApis,(h,y)=>Ih(h,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:l,...d,...g}},yp=t=>Br("input")(t)&&_s(t,"type")!=="radio"||Br("textarea")(t);var bA=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const XC=[Ye("find")],Xo=Aa({fields:XC,name:"composing",apis:bA}),hR=["input","button","textarea","select"],Dx=(t,s,c)=>{(s.disabled()?nv:L1)(t,s)},Rx=(t,s)=>s.useNative===!0&&go(hR,bs(t.element)),pR=t=>X(t.element,"disabled"),Wf=t=>{St(t.element,"disabled","disabled")},I1=t=>{oe(t.element,"disabled")},vA=t=>_s(t.element,"aria-disabled")==="true",yA=t=>{St(t.element,"aria-disabled","true")},CA=t=>{St(t.element,"aria-disabled","false")},nv=(t,s,c)=>{s.disableClass.each(d=>{yr(t.element,d)}),(Rx(t,s)?Wf:yA)(t),s.onDisabled(t)},L1=(t,s,c)=>{s.disableClass.each(d=>{Ur(t.element,d)}),(Rx(t,s)?I1:CA)(t),s.onEnabled(t)},Mx=(t,s)=>Rx(t,s)?pR(t):vA(t);var Cp=Object.freeze({__proto__:null,enable:L1,disable:nv,isDisabled:Mx,onLoad:Dx,set:(t,s,c,l)=>{(l?nv:L1)(t,s)}}),Nx=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>vr([Ww(ru(),(c,l)=>Mx(c,t)),vy(t,s,Dx)])}),wA=[qr("disabled",co),Te("useNative",!0),us("disableClass"),Yo("onDisabled"),Yo("onEnabled")];const Pn=Aa({fields:wA,name:"disabling",active:Nx,apis:Cp}),i=(t,s,c,l)=>{const d=rl(t.element,"."+s.highlightClass);Je(d,g=>{Vs(l,y=>ss(y.element,g))||(Ur(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),po(y,_g())}))})},m=(t,s,c)=>i(t,s,c,[]),p=(t,s,c,l)=>{J(t,s,c,l)&&(Ur(l.element,s.highlightClass),s.onDehighlight(t,l),po(l,_g()))},v=(t,s,c,l)=>{i(t,s,c,[l]),J(t,s,c,l)||(yr(l.element,s.highlightClass),s.onHighlight(t,l),po(l,vf()))},T=(t,s,c)=>{mt(t,s).each(l=>{v(t,s,c,l)})},D=(t,s,c)=>{It(t,s).each(l=>{v(t,s,c,l)})},F=(t,s,c,l)=>{Ae(t,s,c,l).fold(d=>{throw d},d=>{v(t,s,c,d)})},Z=(t,s,c,l)=>{const d=at(t,s);He(d,l).each(h=>{v(t,s,c,h)})},J=(t,s,c,l)=>hi(l.element,s.highlightClass),ge=(t,s,c)=>Os(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Ae=(t,s,c,l)=>{const d=rl(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>to.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},mt=(t,s,c)=>Os(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),It=(t,s,c)=>{const l=rl(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Rt=(t,s,c,l)=>{const d=rl(t.element,"."+s.itemClass);return vt(d,h=>hi(h,s.highlightClass)).bind(h=>{const y=tp(h,l,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},Et=(t,s,c)=>Rt(t,s,c,-1),en=(t,s,c)=>Rt(t,s,c,1),at=(t,s,c)=>{const l=rl(t.element,"."+s.itemClass);return Hr(Me(l,d=>t.getSystem().getByDom(d).toOptional()))};var _t=Object.freeze({__proto__:null,dehighlightAll:m,dehighlight:p,highlight:v,highlightFirst:T,highlightLast:D,highlightAt:F,highlightBy:Z,isHighlighted:J,getHighlighted:ge,getFirst:mt,getLast:It,getPrevious:Et,getNext:en,getCandidates:at}),Rn=[Ye("highlightClass"),Ye("itemClass"),Yo("onHighlight"),Yo("onDehighlight")];const Nt=Aa({fields:Rn,name:"highlighting",apis:_t}),ys=[8],qs=[9],Is=[13],Na=[27],Nc=[32],em=[37],Zf=[38],jf=[39],Ds=[40],$l=(t,s,c)=>{const l=vo(t.slice(0,s)),d=vo(t.slice(s+1));return He(l.concat(d),c)},Fl=(t,s,c)=>{const l=vo(t.slice(0,s));return He(l,c)},mu=(t,s,c)=>{const l=t.slice(0,s),d=t.slice(s+1);return He(d.concat(l),c)},fu=(t,s,c)=>{const l=t.slice(s+1);return He(l,c)},Io=t=>s=>{const c=s.raw;return go(t,c.which)},tc=t=>s=>ln(t,c=>c(s)),tm=t=>t.raw.shiftKey===!0,H1=t=>t.raw.ctrlKey===!0,Si=Re(tm),no=(t,s)=>({matches:t,classification:s}),QC=(t,s)=>He(t,l=>l.matches(s)).map(l=>l.classification),e2=(t,s,c)=>{s.exists(d=>c.exists(g=>ss(g,d)))||Tn(t,kg(),{prevFocus:s,newFocus:c})},ov=()=>{const t=c=>Ml(c.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().triggerFocus(l,c.element);const g=t(c);e2(c,d,g)}}},Bx=()=>{const t=c=>Nt.getHighlighted(c).map(l=>l.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().getByDom(l).fold(ee,h=>{Nt.highlight(c,h)});const g=t(c);e2(c,d,g)}}};var oh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(oh||(oh={}));const Lm=(t,s,c,l,d)=>{const g=()=>t.concat([Te("focusManager",ov()),di("focusInside","onFocus",Sg(_=>go(["onFocus","onEnterOrSpace","onApi"],_)?to.value(_):to.error("Invalid value for focusInside"))),Cr("handler",w),Cr("state",s),Cr("sendFocusIn",d)]),h=(_,O,P,H,V)=>{const G=P(_,O,H,V);return QC(G,O.event).bind(ne=>ne(_,O,H,V))},w={schema:g,processKey:h,toEvents:(_,O)=>{const P=_.focusInside!==oh.OnFocusMode?A.none():d(_).map(G=>Qe(rd(),(ne,_e)=>{G(ne,_,O),_e.stop()})),H=(G,ne)=>{const _e=Io(Nc.concat(Is))(ne.event);_.focusInside===oh.OnEnterOrSpaceMode&&_e&&ou(G,ne)&&d(_).each(le=>{le(G,_,O),ne.stop()})},V=[Qe(Pu(),(G,ne)=>{h(G,ne,c,_,O).fold(()=>{H(G,ne)},_e=>{ne.stop()})}),Qe(Yp(),(G,ne)=>{h(G,ne,l,_,O).each(_e=>{ne.stop()})})];return vr(P.toArray().concat(V))}};return w},Px=t=>{const s=[us("onEscape"),us("onEnter"),Te("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Te("firstTabstop",0),Te("useTabstopAt",Pt),us("visibilitySelector")].concat([t]),c=(le,Ee)=>{const Se=le.visibilitySelector.bind(et=>gd(Ee,et)).getOr(Ee);return ur(Se)>0},l=(le,Ee)=>{const Se=rl(le.element,Ee.selector),et=ao(Se,$e=>c(Ee,$e));return A.from(et[Ee.firstTabstop])},d=(le,Ee)=>Ee.focusManager.get(le).bind(Se=>gd(Se,Ee.selector)),g=(le,Ee)=>c(le,Ee)&&le.useTabstopAt(Ee),h=(le,Ee,Se)=>{l(le,Ee).each(et=>{Ee.focusManager.set(le,et)})},y=(le,Ee,Se,et,$e)=>$e(Ee,Se,yt=>g(et,yt)).fold(()=>et.cyclic?A.some(!0):A.none(),yt=>(et.focusManager.set(le,yt),A.some(!0))),w=(le,Ee,Se,et)=>{const $e=rl(le.element,Se.selector);return d(le,Se).bind(yt=>vt($e,xn(ss,yt)).bind(Xe=>y(le,$e,Xe,Se,et)))},_=(le,Ee,Se)=>{const et=Se.cyclic?$l:Fl;return w(le,Ee,Se,et)},O=(le,Ee,Se)=>{const et=Se.cyclic?mu:fu;return w(le,Ee,Se,et)},P=le=>la(le).bind(Cl).exists(Ee=>ss(Ee,le)),H=(le,Ee,Se)=>d(le,Se).filter(et=>!Se.useTabstopAt(et)).bind(et=>(P(et)?_:O)(le,Ee,Se)),V=(le,Ee,Se)=>Se.onEnter.bind(et=>et(le,Ee)),G=(le,Ee,Se)=>Se.onEscape.bind(et=>et(le,Ee)),ne=W([no(tc([tm,Io(qs)]),_),no(Io(qs),O),no(tc([Si,Io(Is)]),V)]),_e=W([no(Io(Na),G),no(Io(qs),H)]);return Lm(s,dl.init,ne,_e,()=>A.some(h))};var z1=Px(ms("cyclic",co)),i6=Px(ms("cyclic",Pt));const t2=(t,s,c)=>(t1(t,c,ru()),A.some(!0)),sv=(t,s,c)=>yp(c)&&Io(Nc)(s.event)?A.none():t2(t,s,c),V1=(t,s)=>A.some(!0),SA=[Te("execute",sv),Te("useSpace",!1),Te("useEnter",!0),Te("useControlEnter",!1),Te("useDown",!1)],yR=(t,s,c)=>c.execute(t,s,t.element),CR=(t,s,c,l)=>{const d=c.useSpace&&!yp(t.element)?Nc:[],g=c.useEnter?Is:[],h=c.useDown?Ds:[],y=d.concat(g).concat(h);return[no(Io(y),yR)].concat(c.useControlEnter?[no(tc([H1,Io(Is)]),yR)]:[])},u6=(t,s,c,l)=>c.useSpace&&!yp(t.element)?[no(Io(Nc),V1)]:[];var wR=Lm(SA,dl.init,CR,u6,()=>A.none());const xA=()=>{const t=Fs();return gi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var d6=Object.freeze({__proto__:null,flatgrid:xA,init:t=>t.state(t)});const SR=t=>(s,c,l,d)=>{const g=t(s.element);return n2(g,s,c,l,d)},TA=(t,s)=>{const c=S0(t,s);return SR(c)},EA=(t,s)=>{const c=S0(s,t);return SR(c)},kA=t=>(s,c,l,d)=>n2(t,s,c,l,d),n2=(t,s,c,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),$x=kA,xR=kA,_A=kA,TR=t=>t.offsetWidth<=0&&t.offsetHeight<=0,ER=t=>!TR(t.dom),m6=(t,s)=>vt(t,s).map(c=>({index:c,candidates:t})),Hu=(t,s,c)=>{const l=h=>ss(h,s),d=rl(t,c),g=ao(d,ER);return m6(g,l)},kR=(t,s)=>vt(t,c=>ss(s,c)),_R=(t,s,c,l)=>{const d=Math.floor(s/c),g=s%c;return l(d,g).bind(h=>{const y=h.row*c+h.column;return y>=0&&y<t.length?A.some(t[y]):A.none()})},AR=(t,s,c,l,d)=>_R(t,s,l,(g,h)=>{const w=g===c-1?t.length-g*l:l,_=tp(h,d,0,w-1);return A.some({row:g,column:_})}),OR=(t,s,c,l,d)=>_R(t,s,l,(g,h)=>{const y=tp(g,d,0,c-1),_=y===c-1?t.length-y*l:l,O=Fu(h,0,_-1);return A.some({row:y,column:O})}),f6=(t,s,c,l)=>AR(t,s,c,l,1),rv=(t,s,c,l)=>AR(t,s,c,l,-1),AA=(t,s,c,l)=>OR(t,s,c,l,-1),g6=(t,s,c,l)=>OR(t,s,c,l,1),OA=[Ye("selector"),Te("execute",sv),Dl("onEscape"),Te("captureTab",!1),Jb()],Fx=(t,s,c)=>{Os(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},DA=(t,s)=>s.focusManager.get(t).bind(c=>gd(c,s.selector)),h6=(t,s,c,l)=>DA(t,c).bind(d=>c.execute(t,s,d)),Ix=t=>(s,c,l,d)=>Hu(s,c,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),DR=(t,s,c)=>c.captureTab?A.some(!0):A.none(),p6=(t,s,c)=>c.onEscape(t,s),RR=Ix(rv),MR=Ix(f6),NR=Ix(AA),RA=Ix(g6),b6=W([no(Io(em),TA(RR,MR)),no(Io(jf),EA(RR,MR)),no(Io(Zf),$x(NR)),no(Io(Ds),xR(RA)),no(tc([tm,Io(qs)]),DR),no(tc([Si,Io(qs)]),DR),no(Io(Nc.concat(Is)),h6)]),v6=W([no(Io(Na),p6),no(Io(Nc),V1)]);var y6=Lm(OA,xA,b6,v6,()=>A.some(Fx));const BR=(t,s,c,l,d)=>{const g=y=>bs(y)==="button"&&_s(y,"disabled")==="disabled",h=(y,w,_)=>d(y,w,l,0,_.length-1,_[w],O=>g(_[O])?h(y,O,_):A.from(_[O]));return Hu(t,c,s).bind(y=>{const w=y.index,_=y.candidates;return h(w,w,_)})},U1=(t,s,c,l)=>BR(t,s,c,l,(d,g,h,y,w,_,O)=>{const P=Fu(g+h,y,w);return P===d?A.from(_):O(P)}),o2=(t,s,c,l)=>BR(t,s,c,l,(d,g,h,y,w,_,O)=>{const P=tp(g,h,y,w);return P===d?A.none():O(P)}),C6=[Ye("selector"),Te("getInitial",A.none),Te("execute",sv),Dl("onEscape"),Te("executeOnMove",!1),Te("allowVertical",!0),Te("allowHorizontal",!0),Te("cycles",!0)],MA=(t,s)=>s.focusManager.get(t).bind(c=>gd(c,s.selector)),NA=(t,s,c)=>MA(t,c).bind(l=>c.execute(t,s,l)),PR=(t,s,c)=>{s.getInitial(t).orThunk(()=>Os(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},BA=(t,s,c)=>(c.cycles?o2:U1)(t,c.selector,s,-1),PA=(t,s,c)=>(c.cycles?o2:U1)(t,c.selector,s,1),$A=t=>(s,c,l,d)=>t(s,c,l,d).bind(()=>l.executeOnMove?NA(s,c,l):A.some(!0)),$R=(t,s,c)=>c.onEscape(t,s),w6=(t,s,c,l)=>{const d=[...c.allowHorizontal?em:[]].concat(c.allowVertical?Zf:[]),g=[...c.allowHorizontal?jf:[]].concat(c.allowVertical?Ds:[]);return[no(Io(d),$A(TA(BA,PA))),no(Io(g),$A(EA(BA,PA))),no(Io(Is),NA),no(Io(Nc),NA)]},S6=W([no(Io(Nc),V1),no(Io(Na),$R)]);var x6=Lm(C6,dl.init,w6,S6,()=>A.some(PR));const cv=(t,s,c)=>A.from(t[s]).bind(l=>A.from(l[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),FR=(t,s,c,l)=>{const g=t[s].length,h=tp(c,l,0,g-1);return cv(t,s,h)},s2=(t,s,c,l)=>{const d=tp(c,l,0,t.length-1),g=t[d].length,h=Fu(s,0,g-1);return cv(t,d,h)},IR=(t,s,c,l)=>{const g=t[s].length,h=Fu(c+l,0,g-1);return cv(t,s,h)},FA=(t,s,c,l)=>{const d=Fu(c+l,0,t.length-1),g=t[d].length,h=Fu(s,0,g-1);return cv(t,d,h)},xi=(t,s,c)=>FR(t,s,c,1),T6=(t,s,c)=>FR(t,s,c,-1),LR=(t,s,c)=>s2(t,c,s,-1),HR=(t,s,c)=>s2(t,c,s,1),E6=(t,s,c)=>IR(t,s,c,-1),zR=(t,s,c)=>IR(t,s,c,1),VR=(t,s,c)=>FA(t,c,s,-1),k6=(t,s,c)=>FA(t,c,s,1),_6=[nd("selectors",[Ye("row"),Ye("cell")]),Te("cycles",!0),Te("previousSelector",A.none),Te("execute",sv)],A6=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Os(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},O6=(t,s,c)=>Ml(t.element).bind(l=>c.execute(t,s,l)),UR=(t,s)=>Me(t,c=>rl(c,s.selectors.cell)),Lx=(t,s)=>(c,l,d)=>{const g=d.cycles?t:s;return gd(l,d.selectors.row).bind(h=>{const y=rl(h,d.selectors.cell);return kR(y,l).bind(w=>{const _=rl(c,d.selectors.row);return kR(_,h).bind(O=>{const P=UR(_,d);return g(P,O,w).map(H=>H.cell)})})})},WR=Lx(T6,E6),IA=Lx(xi,zR),ZR=Lx(LR,VR),jR=Lx(HR,k6),D6=W([no(Io(em),TA(WR,IA)),no(Io(jf),EA(WR,IA)),no(Io(Zf),$x(ZR)),no(Io(Ds),xR(jR)),no(Io(Nc.concat(Is)),O6)]),R6=W([no(Io(Nc),V1)]);var M6=Lm(_6,dl.init,D6,R6,()=>A.some(A6));const N6=[Ye("selector"),Te("execute",sv),Te("moveOnTab",!1)],LA=(t,s,c)=>c.focusManager.get(t).bind(l=>c.execute(t,s,l)),GR=(t,s,c)=>{Os(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},sh=(t,s,c)=>o2(t,c.selector,s,-1),HA=(t,s,c)=>o2(t,c.selector,s,1),qR=(t,s,c,l)=>c.moveOnTab?_A(sh)(t,s,c,l):A.none(),KR=(t,s,c,l)=>c.moveOnTab?_A(HA)(t,s,c,l):A.none(),B6=W([no(Io(Zf),_A(sh)),no(Io(Ds),_A(HA)),no(tc([tm,Io(qs)]),qR),no(tc([Si,Io(qs)]),KR),no(Io(Is),LA),no(Io(Nc),LA)]),av=W([no(Io(Nc),V1)]);var P6=Lm(N6,dl.init,B6,av,()=>A.some(GR));const $6=[Dl("onSpace"),Dl("onEnter"),Dl("onShiftEnter"),Dl("onLeft"),Dl("onRight"),Dl("onTab"),Dl("onShiftTab"),Dl("onUp"),Dl("onDown"),Dl("onEscape"),Te("stopSpaceKeyup",!1),us("focusIn")],YR=(t,s,c)=>[no(Io(Nc),c.onSpace),no(tc([Si,Io(Is)]),c.onEnter),no(tc([tm,Io(Is)]),c.onShiftEnter),no(tc([tm,Io(qs)]),c.onShiftTab),no(tc([Si,Io(qs)]),c.onTab),no(Io(Zf),c.onUp),no(Io(Ds),c.onDown),no(Io(em),c.onLeft),no(Io(jf),c.onRight),no(Io(Nc),c.onSpace)],F6=(t,s,c)=>[...c.stopSpaceKeyup?[no(Io(Nc),V1)]:[],no(Io(Na),c.onEscape)];var I6=Lm($6,dl.init,YR,F6,t=>t.focusIn);const L6=z1.schema(),XR=i6.schema(),zA=x6.schema(),VA=y6.schema(),H6=M6.schema(),wp=wR.schema(),JR=P6.schema(),QR=I6.schema();var z6=Object.freeze({__proto__:null,acyclic:L6,cyclic:XR,flow:zA,flatgrid:VA,matrix:H6,execution:wp,menu:JR,special:QR});const V6=t=>_r(t,"setGridSize"),gn=Kw({branchKey:"mode",branches:z6,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,c)})},setGridSize:(t,s,c,l,d)=>{V6(c)?c.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:d6}),lv=(t,s)=>{Mf(()=>{mp(t,s,()=>Me(s,t.getSystem().build))},t.element)},UA=(t,s)=>{Mf(()=>{MC(t,s,()=>h1(t.element,s,t.getSystem().buildOrPatch))},t.element)},WA=(t,s,c,l)=>{I0(s);const d=lu(t.element,c,l,t.getSystem().buildOrPatch);DC(t,d),t.syncComponents()},Gf=(t,s,c)=>{const l=t.getSystem().build(c);Xg(t,l,s)},Sp=(t,s,c,l)=>{Pm(s),Gf(t,(d,g)=>_c(d,g,c),l)},U6=(t,s,c,l)=>(s.reuseDom?UA:lv)(t,l),W6=(t,s,c,l)=>{Gf(t,Ea,l)},eM=(t,s,c,l)=>{Gf(t,Qm,l)},rh=(t,s,c,l)=>{const d=iv(t);He(d,h=>ss(l.element,h.element)).each(Pm)},iv=(t,s)=>t.components(),tM=(t,s,c,l,d)=>{const g=iv(t);return A.from(g[l]).map(h=>(d.fold(()=>Pm(h),y=>{(s.reuseDom?WA:Sp)(t,h,l,y)}),h))};var nM=Object.freeze({__proto__:null,append:W6,prepend:eM,remove:rh,replaceAt:tM,replaceBy:(t,s,c,l,d)=>{const g=iv(t);return vt(g,l).bind(h=>tM(t,s,c,h,d))},set:U6,contents:iv});const Un=Aa({fields:[Jr("reuseDom",!0)],name:"replacing",apis:nM}),ZA=(t,s)=>{const c=vr(s);return Aa({fields:[Ye("enabled")],name:t,active:{events:W(c)}})},io=(t,s)=>{const c=ZA(t,s);return{key:t,value:{config:{},me:c,configAsRaw:W({}),initialConfig:{},state:dl}}},oM=(t,s)=>{s.ignore||(Bi(t.element),s.onFocus(t))};var Hx=Object.freeze({__proto__:null,focus:oM,blur:(t,s)=>{s.ignore||v1(t.element)},isFocused:t=>y1(t.element)}),rM=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return fi(c)},events:t=>vr([Qe(rd(),(s,c)=>{oM(s,t),c.stop()})].concat(t.stopMousedown?[Qe(_l(),(s,c)=>{c.event.prevent()})]:[]))}),j6=[Yo("onFocus"),Te("stopMousedown",!1),Te("ignore",!1)];const Ln=Aa({fields:j6,name:"focusing",active:rM,apis:Hx}),cM=t=>({init:()=>{const c=fn(t);return{get:()=>c.get(),set:y=>c.set(y),clear:()=>c.set(t),readState:()=>c.get()}}}),aM=(t,s,c)=>{const l=s.aria;l.update(t,l,c.get())},lM=(t,s,c)=>{s.toggleClass.each(l=>{c.get()?yr(t.element,l):Ur(t.element,l)})},r2=(t,s,c,l)=>{const d=c.get();c.set(l),lM(t,s,c),aM(t,s,c),d!==l&&s.onToggled(t,l)},zx=(t,s,c)=>{r2(t,s,c,!c.get())},G6=(t,s,c)=>{r2(t,s,c,!0)},q6=(t,s,c)=>{r2(t,s,c,!1)},K6=(t,s,c)=>c.get(),iM=(t,s,c)=>{r2(t,s,c,s.selected)};var uM=Object.freeze({__proto__:null,onLoad:iM,toggle:zx,isOn:K6,on:G6,off:q6,set:r2}),dM=Object.freeze({__proto__:null,exhibit:()=>fi({}),events:(t,s)=>{const c=s1(t,s,zx),l=vy(t,s,iM);return vr(je([t.toggleOnExecute?[c]:[],[l]]))}});const c2=(t,s,c)=>{St(t.element,"aria-pressed",c),s.syncWithExpanded&&Vx(t,s,c)},Y6=(t,s,c)=>{St(t.element,"aria-selected",c)},a2=(t,s,c)=>{St(t.element,"aria-checked",c)},Vx=(t,s,c)=>{St(t.element,"aria-expanded",c)};var mM=[Te("selected",!1),us("toggleClass"),Te("toggleOnExecute",!0),Yo("onToggled"),di("aria",{mode:"none"},Hc("mode",{pressed:[Te("syncWithExpanded",!1),Cr("update",c2)],checked:[Cr("update",a2)],expanded:[Cr("update",Vx)],selected:[Cr("update",Y6)],none:[Cr("update",ee)]}))];const So=Aa({fields:mM,name:"toggling",active:dM,apis:uM,state:cM(!1)}),fM=()=>{const t=(s,c)=>{c.stop(),yf(s)};return[Qe(Tg(),t),Qe(cd(),t),ld(Fo()),ld(_l())]},Ux=t=>{const s=c=>$u((l,d)=>{c(l),d.stop()});return vr(je([t.map(s).toArray(),fM()]))},GA="alloy.item-hover",gM="alloy.item-focus",qA="alloy.item-toggled",hM=t=>{(Ml(t.element).isNone()||Ln.isFocused(t))&&(Ln.isFocused(t)||Ln.focus(t),Tn(t,GA,{item:t}))},pM=t=>{Tn(t,gM,{item:t})},bM=(t,s)=>{Tn(t,qA,{item:t,state:s})},l2=W(GA),KA=W(gM),YA=W(qA),X6=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Dt),J6=(t,s)=>({aria:{mode:s?"selected":"checked"},...$c(t,(c,l)=>l!=="exclusive"),onToggled:(c,l)=>{Ct(t.onToggled)&&t.onToggled(c,l),bM(c,l)}}),Q6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:X6(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:uu.augment(t.itemBehaviours,[t.toggling.fold(So.revoke,s=>So.config(J6(s,t.role.exists(c=>c==="option")))),Ln.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{pM(s)}}),gn.config({mode:"execution"}),Wt.config({store:{mode:"memory",initialValue:t.data}}),io("item-type-events",[...fM(),Qe(Hd(),hM),Qe(Xp(),Ln.focus)])]),components:t.components,eventOrder:t.eventOrder}),eL=[Ye("data"),Ye("components"),Ye("dom"),Te("hasSubmenu",!1),us("toggling"),us("role"),uu.field("itemBehaviours",[So,Ln,gn,Wt]),Te("ignoreFocus",!1),Te("domModification",{}),Cr("builder",Q6),Te("eventOrder",{})],vM=t=>({dom:t.dom,components:t.components,events:vr([py(Xp())])}),yM=[Ye("dom"),Ye("components"),Cr("builder",vM)],XA=W("item-widget"),JA=W([Va({name:"widget",overrides:t=>({behaviours:bt([Wt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),tL=t=>{const s=ev(XA(),t,JA()),c=jC(XA(),t,s.internals()),l=g=>pt(g,t,"widget").map(h=>(gn.focusIn(h),h)),d=(g,h)=>yp(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:c,domModification:t.domModification,events:vr([$u((g,h)=>{l(g).each(y=>{h.stop()})}),Qe(Hd(),hM),Qe(Xp(),(g,h)=>{t.autofocus?l(g):Ln.focus(g)})]),behaviours:uu.augment(t.widgetBehaviours,[Wt.config({store:{mode:"memory",initialValue:t.data}}),Ln.config({ignore:t.ignoreFocus,onFocus:g=>{pM(g)}}),gn.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:kr(),onLeft:d,onRight:d,onEscape:(g,h)=>!Ln.isFocused(g)&&!t.autofocus?(Ln.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},nL=[Ye("uid"),Ye("data"),Ye("components"),Ye("dom"),Te("autofocus",!1),Te("ignoreFocus",!1),uu.field("widgetBehaviours",[Wt,Ln,gn]),Te("domModification",{}),F1(JA()),Cr("builder",tL)],oL=Hc("type",{widget:nL,item:eL,separator:yM}),sL=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),CM=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),rL=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),cL=W([J0({factory:{sketch:t=>{const s=el("menu.spec item",oL,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Mo(s,"uid")?s:{...s,uid:Ig("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),aL=W([yc("role"),Ye("value"),Ye("items"),Ye("dom"),Ye("components"),Te("eventOrder",{}),ba("menuBehaviours",[Nt,Wt,Xo,gn]),di("movement",{mode:"menu",moveOnTab:!0},Hc("mode",{grid:[Jb(),Cr("config",sL)],matrix:[Cr("config",CM),Ye("rowSelector"),Te("previousSelector",A.none)],menu:[Te("moveOnTab",!0),Cr("config",rL)]})),o_(),Te("fakeFocus",!1),Te("focusManager",ov()),Yo("onHighlight"),Yo("onDehighlight"),Te("showMenuRole",!0)]),wM=W("alloy.menu-focus"),lL=(t,s)=>{const c=rl(t.element,'[role="menuitemradio"][aria-checked="true"]');Je(c,l=>{ss(l,s.element)||t.getSystem().getByDom(l).each(d=>{So.off(d)})})},W1=(t,s,c,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:va(t.menuBehaviours,[Nt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Wt.config({store:{mode:"memory",initialValue:t.value}}),Xo.config({find:A.some}),gn.config(t.movement.config(t,t.movement))]),events:vr([Qe(KA(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(y=>{Nt.highlight(d,y),g.stop(),Tn(d,wM(),{menu:d,item:y})})}),Qe(l2(),(d,g)=>{const h=g.event.item;Nt.highlight(d,h)}),Qe(YA(),(d,g)=>{const{item:h,state:y}=g.event;y&&_s(h.element,"role")==="menuitemradio"&&lL(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Z1=pl({name:"Menu",configFields:aL(),partFields:cL(),factory:W1}),iL=t=>lr(t,(s,c)=>({k:s,v:c})),xp=(t,s,c,l)=>ht(c,l).bind(d=>ht(t,d).bind(g=>{const h=xp(t,s,c,g);return A.some([g].concat(h))})).getOr([]),SM=(t,s)=>{const c={};cs(t,(h,y)=>{Je(h,w=>{c[w]=y})});const l=s,d=iL(s),g=ns(d,(h,y)=>[y].concat(xp(c,l,d,y)));return ns(c,h=>ht(g,h).getOr([h]))},uL=()=>{const t=fn({}),s=fn({}),c=fn({}),l=Fs(),d=fn({}),g=()=>{t.set({}),s.set({}),c.set({}),l.clear()},h=()=>l.get().isNone(),y=($e,yt)=>{s.set({...s.get(),[$e]:{type:"prepared",menu:yt}})},w=($e,yt,Mt,Xe)=>{l.set($e),t.set(Mt),s.set(yt),d.set(Xe);const rn=SM(Xe,Mt);c.set(rn)},_=$e=>ws(t.get(),(yt,Mt)=>yt===$e),O=($e,yt,Mt)=>ne($e).bind(Xe=>_($e).bind(rn=>yt(rn).map(Zt=>({triggeredMenu:Xe,triggeringItem:Zt,triggeringPath:Mt})))),P=($e,yt)=>{const Mt=ao(le($e).toArray(),Xe=>ne(Xe).isSome());return ht(c.get(),$e).bind(Xe=>{const rn=vo(Mt.concat(Xe)),Zt=ye(rn,(On,Sn)=>O(On,yt,rn.slice(0,Sn+1)).fold(()=>Kr(l.get(),On)?[]:[A.none()],gs=>[A.some(gs)]));return Jo(Zt)})},H=$e=>ht(t.get(),$e).map(yt=>{const Mt=ht(c.get(),$e).getOr([]);return[yt].concat(Mt)}),V=$e=>ht(c.get(),$e).bind(yt=>yt.length>1?A.some(yt.slice(1)):A.none()),G=$e=>ht(c.get(),$e),ne=$e=>_e($e).bind(ch),_e=$e=>ht(s.get(),$e),le=$e=>ht(t.get(),$e);return{setMenuBuilt:y,setContents:w,expand:H,refresh:G,collapse:V,lookupMenu:_e,lookupItem:le,otherMenus:$e=>{const yt=d.get();return Lt(ps(yt),$e)},getPrimary:()=>l.get().bind(ne),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:P}},ch=t=>t.type==="prepared"?A.some(t.menu):A.none(),xM={init:uL,extractPreparedMenu:ch},TM=Ut("tiered-menu-item-highlight"),zu=Ut("tiered-menu-item-dehighlight");var ti;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ti||(ti={}));const EM=(t,s)=>{const c=Fs(),l=(kt,Jt,oo)=>ns(oo,(Mn,En)=>{const Qn=()=>Z1.sketch({...Mn,value:En,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(er,Ss)=>{Tn(er,TM,{menuComp:er,itemComp:Ss})},onDehighlight:(er,Ss)=>{Tn(er,zu,{menuComp:er,itemComp:Ss})},focusManager:t.fakeFocus?Bx():ov()});return En===Jt?{type:"prepared",menu:kt.getSystem().build(Qn())}:{type:"notbuilt",nbMenu:Qn}}),d=xM.init(),g=kt=>{const Jt=l(kt,t.data.primary,t.data.menus),oo=w();return d.setContents(t.data.primary,Jt,t.data.expansions,oo),d.getPrimary()},h=kt=>Wt.getValue(kt).value,y=(kt,Jt,oo)=>Bs(Jt,Mn=>{if(!Mn.getSystem().isConnected())return A.none();const En=Nt.getCandidates(Mn);return He(En,Qn=>h(Qn)===oo)}),w=kt=>ns(t.data.menus,(Jt,oo)=>ye(Jt.items,Mn=>Mn.type==="separator"?[]:[Mn.data.value])),_=Nt.highlight,O=(kt,Jt)=>{_(kt,Jt),Nt.getHighlighted(Jt).orThunk(()=>Nt.getFirst(Jt)).each(oo=>{t.fakeFocus?Nt.highlight(Jt,oo):t1(kt,oo.element,Xp())})},P=(kt,Jt)=>Hr(Me(Jt,oo=>kt.lookupMenu(oo).bind(Mn=>Mn.type==="prepared"?A.some(Mn.menu):A.none()))),H=(kt,Jt,oo)=>{const Mn=P(Jt,Jt.otherMenus(oo));Je(Mn,En=>{pi(En.element,[t.markers.backgroundMenu]),t.stayInDom||Un.remove(kt,En)})},V=kt=>c.get().getOrThunk(()=>{const Jt={},oo=rl(kt.element,`.${t.markers.item}`),Mn=ao(oo,En=>_s(En,"aria-haspopup")==="true");return Je(Mn,En=>{kt.getSystem().getByDom(En).each(Qn=>{const er=h(Qn);Jt[er]=Qn})}),c.set(Jt),Jt}),G=(kt,Jt)=>{const oo=V(kt);cs(oo,(Mn,En)=>{const Qn=go(Jt,En);St(Mn.element,"aria-expanded",Qn)})},ne=(kt,Jt,oo)=>A.from(oo[0]).bind(Mn=>Jt.lookupMenu(Mn).bind(En=>{if(En.type==="notbuilt")return A.none();{const Qn=En.menu,er=P(Jt,oo.slice(1));return Je(er,Ss=>{yr(Ss.element,t.markers.backgroundMenu)}),Po(Qn.element)||Un.append(kt,fl(Qn)),pi(Qn.element,[t.markers.backgroundMenu]),O(kt,Qn),H(kt,Jt,oo),A.some(Qn)}}));let _e;(function(kt){kt[kt.HighlightSubmenu=0]="HighlightSubmenu",kt[kt.HighlightParent=1]="HighlightParent"})(_e||(_e={}));const le=(kt,Jt,oo)=>{if(oo.type==="notbuilt"){const Mn=kt.getSystem().build(oo.nbMenu());return d.setMenuBuilt(Jt,Mn),Mn}else return oo.menu},Ee=(kt,Jt,oo=_e.HighlightSubmenu)=>{if(Jt.hasConfigured(Pn)&&Pn.isDisabled(Jt))return A.some(Jt);{const Mn=h(Jt);return d.expand(Mn).bind(En=>(G(kt,En),A.from(En[0]).bind(Qn=>d.lookupMenu(Qn).bind(er=>{const Ss=le(kt,Qn,er);return Po(Ss.element)||Un.append(kt,fl(Ss)),t.onOpenSubmenu(kt,Jt,Ss,vo(En)),oo===_e.HighlightSubmenu?(Nt.highlightFirst(Ss),ne(kt,d,En)):(Nt.dehighlightAll(Ss),A.some(Jt))}))))}},Se=(kt,Jt)=>{const oo=h(Jt);return d.collapse(oo).bind(Mn=>(G(kt,Mn),ne(kt,d,Mn).map(En=>(t.onCollapseMenu(kt,Jt,En),En))))},et=(kt,Jt)=>{const oo=h(Jt);return d.refresh(oo).bind(Mn=>(G(kt,Mn),ne(kt,d,Mn)))},$e=(kt,Jt)=>yp(Jt.element)?A.none():Ee(kt,Jt,_e.HighlightSubmenu),yt=(kt,Jt)=>yp(Jt.element)?A.none():Se(kt,Jt),Mt=(kt,Jt)=>Se(kt,Jt).orThunk(()=>t.onEscape(kt,Jt).map(()=>kt)),Xe=kt=>(Jt,oo)=>gd(oo.getSource(),`.${t.markers.item}`).bind(Mn=>Jt.getSystem().getByDom(Mn).toOptional().bind(En=>kt(Jt,En).map(Pt))),rn=vr([Qe(wM(),(kt,Jt)=>{const oo=Jt.event.item;d.lookupItem(h(oo)).each(()=>{const Mn=Jt.event.menu;Nt.highlight(kt,Mn);const En=h(Jt.event.item);d.refresh(En).each(Qn=>H(kt,d,Qn))})}),$u((kt,Jt)=>{const oo=Jt.event.target;kt.getSystem().getByDom(oo).each(Mn=>{h(Mn).indexOf("collapse-item")===0&&Se(kt,Mn),Ee(kt,Mn,_e.HighlightSubmenu).fold(()=>{t.onExecute(kt,Mn)},ee)})}),Er((kt,Jt)=>{g(kt).each(oo=>{Un.append(kt,fl(oo)),t.onOpenMenu(kt,oo),t.highlightOnOpen===ti.HighlightMenuAndItem?O(kt,oo):t.highlightOnOpen===ti.HighlightJustMenu&&_(kt,oo)})}),Qe(TM,(kt,Jt)=>{t.onHighlightItem(kt,Jt.event.menuComp,Jt.event.itemComp)}),Qe(zu,(kt,Jt)=>{t.onDehighlightItem(kt,Jt.event.menuComp,Jt.event.itemComp)}),...t.navigateOnHover?[Qe(l2(),(kt,Jt)=>{const oo=Jt.event.item;et(kt,oo),Ee(kt,oo,_e.HighlightParent),t.onHover(kt,oo)})]:[]]),Zt=kt=>Nt.getHighlighted(kt).bind(Nt.getHighlighted),On=kt=>{Zt(kt).each(Jt=>{Se(kt,Jt)})},Sn=kt=>{d.getPrimary().each(Jt=>{O(kt,Jt)})},gs=kt=>A.from(kt.components()[0]).filter(Jt=>_s(Jt.element,"role")==="menu"),Bo={collapseMenu:On,highlightPrimary:Sn,repositionMenus:kt=>{d.getPrimary().bind(oo=>Zt(kt).bind(Mn=>{const En=h(Mn),Qn=ir(d.getMenus()),er=Hr(Me(Qn,xM.extractPreparedMenu));return d.getTriggeringPath(En,Ss=>y(kt,er,Ss))}).map(Mn=>({primary:oo,triggeringPath:Mn}))).fold(()=>{gs(kt).each(oo=>{t.onRepositionMenu(kt,oo,[])})},({primary:oo,triggeringPath:Mn})=>{t.onRepositionMenu(kt,oo,Mn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:va(t.tmenuBehaviours,[gn.config({mode:"special",onRight:Xe($e),onLeft:Xe(yt),onEscape:Xe(Mt),focusIn:(kt,Jt)=>{d.getPrimary().each(oo=>{t1(kt,oo.element,Xp())})}}),Nt.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Xo.config({find:kt=>Nt.getHighlighted(kt)}),Un.config({})]),eventOrder:t.eventOrder,apis:Bo,events:rn}},kM=W("collapse-item"),dL=(t,s,c)=>({primary:t,menus:s,expansions:c}),Wx=(t,s)=>({primary:t,menus:As(t,s),expansions:{}}),_M=t=>({value:Ut(kM()),meta:{text:t}}),j1=ei({name:"TieredMenu",configFields:[Am("onExecute"),Am("onEscape"),au("onOpenMenu"),au("onOpenSubmenu"),Yo("onRepositionMenu"),Yo("onCollapseMenu"),Te("highlightOnOpen",ti.HighlightMenuAndItem),nd("data",[Ye("primary"),Ye("menus"),Ye("expansions")]),Te("fakeFocus",!1),Yo("onHighlightItem"),Yo("onDehighlightItem"),Yo("onHover"),Fg(),Ye("dom"),Te("navigateOnHover",!0),Te("stayInDom",!1),ba("tmenuBehaviours",[gn,Nt,Xo,Un]),Te("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:EM,extraApis:{tieredData:dL,singleData:Wx,collapseItem:_M}}),mL=(t,s,c,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>f0(),onRtl:()=>Hg()}}:{},y=_=>_.length===2,w=_=>y(_)?h:{};return j1.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(es.close(s),t.onEscape.map(_=>_(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(_,O)=>{Ma.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(_,O,P,H)=>{const V=g().getOrDie();Ma.position(V,P,{anchor:{type:"submenu",item:O,...w(H)}})},onRepositionMenu:(_,O,P)=>{const H=g().getOrDie();Ma.positionWithinBounds(H,O,c,d()),Je(P,V=>{const G=w(V.triggeringPath);Ma.position(H,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...G}})})}})},Zx=(t,s)=>{const c=(H,V)=>t.getRelated(H).exists(ne=>_f(ne,V)),l=(H,V)=>{es.setContent(H,V)},d=(H,V,G)=>{const ne=A.none;g(H,V,G,ne)},g=(H,V,G,ne)=>{const _e=t.lazySink(H).getOrDie();es.openWhileCloaked(H,V,()=>Ma.positionWithinBounds(_e,H,G,ne())),Wt.setValue(H,A.some({mode:"position",config:G,getBounds:ne}))},h=(H,V,G)=>{y(H,V,G,A.none)},y=(H,V,G,ne)=>{const _e=mL(t,H,V,G,ne);es.open(H,_e),Wt.setValue(H,A.some({mode:"menu",menu:_e}))},w=H=>{es.isOpen(H)&&(Wt.setValue(H,A.none()),es.close(H))},_=H=>es.getState(H),O=H=>{es.isOpen(H)&&Wt.getValue(H).each(V=>{switch(V.mode){case"menu":es.getState(H).each(j1.repositionMenus);break;case"position":const G=t.lazySink(H).getOrDie();Ma.positionWithinBounds(G,H,V.config,V.getBounds());break}})},P={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:y,hide:w,getContent:_,reposition:O,isOpen:es.isOpen};return{uid:t.uid,dom:t.dom,behaviours:va(t.inlineBehaviours,[es.config({isPartOf:(H,V,G)=>_f(V,G)||c(H,G),getAttachPoint:H=>t.lazySink(H).getOrDie(),onOpen:H=>{t.onShow(H)},onClose:H=>{t.onHide(H)}}),Wt.config({store:{mode:"memory",initialValue:A.none()}}),Ql.config({channels:{...$m({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...z0({...t.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:P}},Nr=ei({name:"InlineView",configFields:[Ye("lazySink"),Yo("onShow"),Yo("onHide"),Ru("onEscape"),ba("inlineBehaviours",[es,Wt,Ql]),Js("fireDismissalEventInstead",[Te("event",bf())]),Js("fireRepositionEventInstead",[Te("event",dy())]),Te("getRelated",A.none),Te("isExtraPart",co),Te("eventOrder",A.none)],factory:Zx,apis:{showAt:(t,s,c,l)=>{t.showAt(s,c,l)},showWithinBounds:(t,s,c,l,d)=>{t.showWithinBounds(s,c,l,d)},showMenuAt:(t,s,c,l)=>{t.showMenuAt(s,c,l)},showMenuWithinBounds:(t,s,c,l,d)=>{t.showMenuWithinBounds(s,c,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var i2=tinymce.util.Tools.resolve("tinymce.util.Delay"),G1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),AM=tinymce.util.Tools.resolve("tinymce.EditorManager"),uv=tinymce.util.Tools.resolve("tinymce.Env"),gu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(gu||(gu={}));var dv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(dv||(dv={}));const mr=t=>s=>s.options.get(t),u2=t=>s=>A.from(t(s)),OM=t=>{const s=uv.deviceType.isPhone(),c=uv.deviceType.isTablet()||s,l=t.options.register,d=h=>We(h)||h===!1,g=h=>We(h)||zn(h);l("skin",{processor:h=>We(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:G1.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>We(h)||Ro(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>Ro(h)||We(h)||Zo(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),ft(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:dv.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||Ro(h),default:!uv.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},jx=mr("readonly"),QA=mr("height"),q1=mr("width"),mv=u2(mr("min_width")),Gx=u2(mr("min_height")),d2=u2(mr("max_width")),e4=u2(mr("max_height")),DM=u2(mr("style_formats")),RM=mr("style_formats_merge"),MM=mr("style_formats_autohide"),qx=mr("content_langs"),t4=mr("removed_menuitems"),K1=mr("toolbar_mode"),Kx=mr("toolbar_groups"),n4=mr("toolbar_location"),NM=mr("fixed_toolbar_container"),fL=mr("fixed_toolbar_container_target"),BM=mr("toolbar_persist"),PM=mr("toolbar_sticky_offset"),o4=mr("menubar"),Yx=mr("toolbar"),$M=mr("file_picker_callback"),Xx=mr("file_picker_validator_handler"),s4=mr("font_size_input_default_unit"),r4=mr("file_picker_types"),FM=mr("typeahead_urls"),Jx=mr("anchor_top"),IM=mr("anchor_bottom"),LM=mr("draggable_modal"),HM=mr("statusbar"),zM=mr("elementpath"),c4=mr("branding"),a4=mr("resize"),Qx=mr("paste_as_text"),VM=mr("sidebar_show"),m2=mr("promotion"),UM=mr("help_accessibility"),WM=mr("default_font_stack"),l4=t=>t.options.get("skin")===!1,eT=t=>t.options.get("menubar")!==!1,i4=t=>{const s=t.options.get("skin_url");if(l4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return AM.baseURL+"/skins/ui/"+c}},tT=t=>A.from(t.options.get("skin_url")),u4=t=>t.options.get("line_height_formats").split(" "),nT=t=>{const s=Yx(t),c=We(s),l=Zo(s)&&s.length>0;return!Y1(t)&&(l||c||s===!0)},d4=t=>{const s=ft(9,l=>t.options.get("toolbar"+(l+1))),c=ao(s,We);return un(c.length>0,c)},Y1=t=>d4(t).fold(()=>{const s=Yx(t);return Ue(s,We)&&s.length>0},Pt),ah=t=>n4(t)===dv.bottom,ZM=t=>{var s;if(!t.inline)return A.none();const c=(s=NM(t))!==null&&s!==void 0?s:"";if(c.length>0)return Os(so(),c);const l=fL(t);return Wn(l)?A.some(be.fromDom(l)):A.none()},fv=t=>t.inline&&ZM(t).isSome(),f2=t=>ZM(t).getOrThunk(()=>ce(U(be.fromDom(t.getElement())))),oT=t=>t.inline&&!eT(t)&&!nT(t)&&!Y1(t),gv=t=>(t.options.get("toolbar_sticky")||t.inline)&&!fv(t)&&!oT(t),Tp=t=>!fv(t)&&t.options.get("ui_mode")==="split",m4=t=>{const s=t.options.get("menu");return ns(s,c=>({...c,items:c.items}))};var gL=Object.freeze({__proto__:null,get ToolbarMode(){return gu},get ToolbarLocation(){return dv},register:OM,getSkinUrl:i4,getSkinUrlOption:tT,isReadOnly:jx,isSkinDisabled:l4,getHeightOption:QA,getWidthOption:q1,getMinWidthOption:mv,getMinHeightOption:Gx,getMaxWidthOption:d2,getMaxHeightOption:e4,getUserStyleFormats:DM,shouldMergeStyleFormats:RM,shouldAutoHideStyleFormats:MM,getLineHeightFormats:u4,getContentLanguages:qx,getRemovedMenuItems:t4,isMenubarEnabled:eT,isMultipleToolbars:Y1,isToolbarEnabled:nT,isToolbarPersist:BM,getMultipleToolbarsOption:d4,getUiContainer:f2,useFixedContainer:fv,isSplitUiMode:Tp,getToolbarMode:K1,isDraggableModal:LM,isDistractionFree:oT,isStickyToolbar:gv,getStickyToolbarOffset:PM,getToolbarLocation:n4,isToolbarLocationBottom:ah,getToolbarGroups:Kx,getMenus:m4,getMenubar:o4,getToolbar:Yx,getFilePickerCallback:$M,getFilePickerTypes:r4,useTypeaheadUrls:FM,getAnchorTop:Jx,getAnchorBottom:IM,getFilePickerValidatorHandler:Xx,getFontSizeInputDefaultUnit:s4,useStatusBar:HM,useElementPath:zM,promotionEnabled:m2,useBranding:c4,getResize:a4,getPasteAsText:Qx,getSidebarShow:VM,useHelpAccessibility:UM,getDefaultFontStack:WM});const jM=["visible","hidden","clip"],f4=t=>hr(t).length>0&&!go(jM,t),sT=t=>{if(ca(t)){const s=$s(t,"overflow-x"),c=$s(t,"overflow-y");return f4(s)||f4(c)}else return!1},hL=t=>{const s=ip(t,sT),c=s.length===0?qe(t).map(gt).map(l=>ip(l,sT)).getOr([]):s;return xs(c).map(l=>({element:l,others:c.slice(1)}))},lh=(t,s)=>Tp(t)?hL(s):A.none(),X1=t=>{const s=[...Me(t.others,Rr),cc()];return vg(Rr(t.element),s)},cl=ei({name:"Button",factory:t=>{const s=Ux(t.action),c=t.dom.tag,l=g=>ht(t.dom,"attributes").bind(h=>ht(h,g)),d=()=>{if(c==="button"){const g=l("type").getOr("button"),h=l("role").map(y=>({role:y})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:uu.augment(t.buttonBehaviours,[Ln.config({}),gn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Te("uid",void 0),Ye("dom"),Te("components",[]),uu.field("buttonBehaviours",[Ln,gn]),us("action"),us("role"),Te("eventOrder",{})]}),pL=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return zo(s,(c,l)=>l.name==="class"?c:{...c,[l.name]:l.value},{})},g4=t=>Array.prototype.slice.call(t.dom.classList,0),Hm=t=>{const s=be.fromHtml(t),c=gc(s),l=pL(s),d=g4(s),g=c.length===0?{}:{innerHtml:Jl(s)};return{tag:bs(s),classes:d,attributes:l,...g}},Rs=t=>{const s=hA(t)&&_r(t,"uid")?t.uid:Ig("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var bL=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({attributes:fs([{key:s.tabAttr,value:"true"}])})}),vL=[Te("tabAttr","data-alloy-tabstop")];const wr=Aa({fields:vL,name:"tabstopping",active:bL}),qM=Ut("tooltip.exclusive"),g2=Ut("tooltip.show"),h2=Ut("tooltip.hide"),cT=Ut("tooltip.immediateHide"),aT=Ut("tooltip.immediateShow"),KM=(t,s,c)=>{t.getSystem().broadcastOn([qM],{})};var yL=Object.freeze({__proto__:null,hideAllExclusive:KM,setComponents:(t,s,c,l)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&Un.set(d,l)})}}),CL=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(y=>{y.getSystem().isConnected()&&(Pm(y),t.onHide(h,y),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()){KM(h);const y=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:vr(t.mode==="normal"?[Qe(Hd(),_=>{po(h,g2)}),Qe(Bu(),_=>{po(h,h2)})]:[]),behaviours:bt([Un.config({})])});s.setTooltip(w),Yd(y,w),t.onShow(h,w),Ma.position(y,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(y=>{const w=t.lazySink(h).getOrDie();Ma.position(w,y,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Qe(od(),h=>{po(h,aT)}),Qe(pf(),h=>{po(h,cT)}),Qe(Hd(),h=>{po(h,g2)}),Qe(Bu(),h=>{po(h,h2)})];case"follow-highlight":return[Qe(vf(),(h,y)=>{po(h,g2)}),Qe(_g(),h=>{po(h,h2)})];case"children-normal":return[Qe(od(),(h,y)=>{Ml(h.element).each(w=>{Zs(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{po(h,aT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Qe(pf(),h=>{Ml(h.element).fold(()=>{po(h,cT)},ee)}),Qe(Hd(),h=>{Os(h.element,"[data-mce-tooltip]:hover").each(y=>{s.getTooltip().fold(()=>{po(h,g2)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Qe(Bu(),h=>{Os(h.element,"[data-mce-tooltip]:hover").fold(()=>{po(h,h2)},ee)})];default:return[Qe(od(),(h,y)=>{Ml(h.element).each(w=>{Zs(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{po(h,aT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Qe(pf(),h=>{Ml(h.element).fold(()=>{po(h,cT)},ee)})]}};return vr(je([[Qe(g2,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),Qe(h2,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Qe(aT,h=>{s.resetTimer(()=>{l(h)},0)}),Qe(cT,h=>{s.resetTimer(()=>{c(h)},0)}),Qe(su(),(h,y)=>{const w=y;w.universal||go(w.channels,qM)&&c(h)}),Wd(h=>{c(h)})],g()]))}}),wL=[Ye("lazySink"),Ye("tooltipDom"),Te("exclusive",!0),Te("tooltipComponents",[]),qr("delayForShow",W(300)),qr("delayForHide",W(300)),Ni("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Te("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:W([Mc,ea,Vc,Uc,Rc,Gs]),onRtl:W([Mc,ea,Vc,Uc,Rc,Gs])},bubble:Iu(0,-2,{})})),Yo("onHide"),Yo("onShow")],h4=Object.freeze({__proto__:null,init:()=>{const t=Fs(),s=Fs(),c=()=>{t.on(clearTimeout)},l=(g,h)=>{c(),t.set(setTimeout(g,h))},d=W("not-implemented");return gi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:c,resetTimer:l,readState:d})}});const Ua=Aa({fields:wL,name:"tooltipping",active:CL,state:h4,apis:yL}),{entries:YM,setPrototypeOf:XM,isFrozen:JM,getPrototypeOf:SL,getOwnPropertyDescriptor:xL}=Object;let{freeze:hu,seal:zm,create:TL}=Object,{apply:p4,construct:p2}=typeof Reflect<"u"&&Reflect;p4||(p4=function(s,c,l){return s.apply(c,l)}),hu||(hu=function(s){return s}),zm||(zm=function(s){return s}),p2||(p2=function(s,c){return new s(...c)});const EL=nm(Array.prototype.forEach),kL=nm(Array.prototype.pop),b2=nm(Array.prototype.push),lT=nm(String.prototype.toLowerCase),b4=nm(String.prototype.toString),_L=nm(String.prototype.match),Vm=nm(String.prototype.replace),AL=nm(String.prototype.indexOf),OL=nm(String.prototype.trim),vd=nm(RegExp.prototype.test),v2=DL(TypeError);function nm(t){return function(s){for(var c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];return p4(t,s,l)}}function DL(t){return function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return p2(t,c)}}function Ls(t,s,c){var l;c=(l=c)!==null&&l!==void 0?l:lT,XM&&XM(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=c(g);h!==g&&(JM(s)||(s[d]=h),g=h)}t[g]=!0}return t}function hv(t){const s=TL(null);for(const[c,l]of YM(t))s[c]=l;return s}function pv(t,s){for(;t!==null;){const l=xL(t,s);if(l){if(l.get)return nm(l.get);if(typeof l.value=="function")return nm(l.value)}t=SL(t)}function c(l){return console.warn("fallback value for",l),null}return c}const QM=hu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),v4=hu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),y4=hu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),eN=hu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),C4=hu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),w4=hu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),iT=hu(["#text"]),S4=hu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),y2=hu(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C2=hu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),w2=hu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qf=zm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),x4=zm(/<%[\w\W]*|[\w\W]*%>/gm),RL=zm(/\${[\w\W]*}/gm),ML=zm(/^data-[\-\w.\u00B7-\uFFFF]/),NL=zm(/^aria-[\-\w]+$/),tN=zm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),S2=zm(/^(?:\w+script|data):/i),BL=zm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),T4=zm(/^html$/i);var uT=Object.freeze({__proto__:null,MUSTACHE_EXPR:qf,ERB_EXPR:x4,TMPLIT_EXPR:RL,DATA_ATTR:ML,ARIA_ATTR:NL,IS_ALLOWED_URI:tN,IS_SCRIPT_OR_DATA:S2,ATTR_WHITESPACE:BL,DOCTYPE_NAME:T4});const PL=()=>typeof window>"u"?null:window,E4=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(l=c.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function dT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PL();const s=Ko=>dT(Ko);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const c=t.document,l=c.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:y,Element:w,NodeFilter:_,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:P,DOMParser:H,trustedTypes:V}=t,G=w.prototype,ne=pv(G,"cloneNode"),_e=pv(G,"nextSibling"),le=pv(G,"childNodes"),Ee=pv(G,"parentNode");if(typeof h=="function"){const Ko=d.createElement("template");Ko.content&&Ko.content.ownerDocument&&(d=Ko.content.ownerDocument)}let Se,et="";const{implementation:$e,createNodeIterator:yt,createDocumentFragment:Mt,getElementsByTagName:Xe}=d,{importNode:rn}=c;let Zt={};s.isSupported=typeof YM=="function"&&typeof Ee=="function"&&$e&&$e.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:On,ERB_EXPR:Sn,TMPLIT_EXPR:gs,DATA_ATTR:rs,ARIA_ATTR:Bo,IS_SCRIPT_OR_DATA:kt,ATTR_WHITESPACE:Jt}=uT;let{IS_ALLOWED_URI:oo}=uT,Mn=null;const En=Ls({},[...QM,...v4,...y4,...C4,...iT]);let Qn=null;const er=Ls({},[...S4,...y2,...C2,...w2]);let Ss=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),zl=null,Ku=null,Xm=!0,yl=!0,Yu=!1,Dd=!0,Gi=!1,ag=!1,Db=!1,oR=!1,sy=!1,Ik=!1,n6=!1,BG=!0,PG=!1;const lq="user-content-";let yj=!0,sR=!1,Lk={},Hk=null;const $G=Ls({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let FG=null;const IG=Ls({},["audio","video","img","source","image","track"]);let Cj=null;const LG=Ls({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),o6="http://www.w3.org/1998/Math/MathML",s6="http://www.w3.org/2000/svg",Rb="http://www.w3.org/1999/xhtml";let zk=Rb,wj=!1,Sj=null;const iq=Ls({},[o6,s6,Rb],b4);let Pw;const uq=["application/xhtml+xml","text/html"],dq="text/html";let qi,Vk=null;const mq=d.createElement("form"),HG=function(Ve){return Ve instanceof RegExp||Ve instanceof Function},xj=function(Ve){if(!(Vk&&Vk===Ve)){if((!Ve||typeof Ve!="object")&&(Ve={}),Ve=hv(Ve),Pw=uq.indexOf(Ve.PARSER_MEDIA_TYPE)===-1?Pw=dq:Pw=Ve.PARSER_MEDIA_TYPE,qi=Pw==="application/xhtml+xml"?b4:lT,Mn="ALLOWED_TAGS"in Ve?Ls({},Ve.ALLOWED_TAGS,qi):En,Qn="ALLOWED_ATTR"in Ve?Ls({},Ve.ALLOWED_ATTR,qi):er,Sj="ALLOWED_NAMESPACES"in Ve?Ls({},Ve.ALLOWED_NAMESPACES,b4):iq,Cj="ADD_URI_SAFE_ATTR"in Ve?Ls(hv(LG),Ve.ADD_URI_SAFE_ATTR,qi):LG,FG="ADD_DATA_URI_TAGS"in Ve?Ls(hv(IG),Ve.ADD_DATA_URI_TAGS,qi):IG,Hk="FORBID_CONTENTS"in Ve?Ls({},Ve.FORBID_CONTENTS,qi):$G,zl="FORBID_TAGS"in Ve?Ls({},Ve.FORBID_TAGS,qi):{},Ku="FORBID_ATTR"in Ve?Ls({},Ve.FORBID_ATTR,qi):{},Lk="USE_PROFILES"in Ve?Ve.USE_PROFILES:!1,Xm=Ve.ALLOW_ARIA_ATTR!==!1,yl=Ve.ALLOW_DATA_ATTR!==!1,Yu=Ve.ALLOW_UNKNOWN_PROTOCOLS||!1,Dd=Ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Gi=Ve.SAFE_FOR_TEMPLATES||!1,ag=Ve.WHOLE_DOCUMENT||!1,sy=Ve.RETURN_DOM||!1,Ik=Ve.RETURN_DOM_FRAGMENT||!1,n6=Ve.RETURN_TRUSTED_TYPE||!1,oR=Ve.FORCE_BODY||!1,BG=Ve.SANITIZE_DOM!==!1,PG=Ve.SANITIZE_NAMED_PROPS||!1,yj=Ve.KEEP_CONTENT!==!1,sR=Ve.IN_PLACE||!1,oo=Ve.ALLOWED_URI_REGEXP||tN,zk=Ve.NAMESPACE||Rb,Ss=Ve.CUSTOM_ELEMENT_HANDLING||{},Ve.CUSTOM_ELEMENT_HANDLING&&HG(Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ss.tagNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&HG(Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ss.attributeNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&typeof Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ss.allowCustomizedBuiltInElements=Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Gi&&(yl=!1),Ik&&(sy=!0),Lk&&(Mn=Ls({},[...iT]),Qn=[],Lk.html===!0&&(Ls(Mn,QM),Ls(Qn,S4)),Lk.svg===!0&&(Ls(Mn,v4),Ls(Qn,y2),Ls(Qn,w2)),Lk.svgFilters===!0&&(Ls(Mn,y4),Ls(Qn,y2),Ls(Qn,w2)),Lk.mathMl===!0&&(Ls(Mn,C4),Ls(Qn,C2),Ls(Qn,w2))),Ve.ADD_TAGS&&(Mn===En&&(Mn=hv(Mn)),Ls(Mn,Ve.ADD_TAGS,qi)),Ve.ADD_ATTR&&(Qn===er&&(Qn=hv(Qn)),Ls(Qn,Ve.ADD_ATTR,qi)),Ve.ADD_URI_SAFE_ATTR&&Ls(Cj,Ve.ADD_URI_SAFE_ATTR,qi),Ve.FORBID_CONTENTS&&(Hk===$G&&(Hk=hv(Hk)),Ls(Hk,Ve.FORBID_CONTENTS,qi)),yj&&(Mn["#text"]=!0),ag&&Ls(Mn,["html","head","body"]),Mn.table&&(Ls(Mn,["tbody"]),delete zl.tbody),Ve.TRUSTED_TYPES_POLICY){if(typeof Ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw v2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw v2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=Ve.TRUSTED_TYPES_POLICY,et=Se.createHTML("")}else Se===void 0&&(Se=E4(V,l)),Se!==null&&typeof et=="string"&&(et=Se.createHTML(""));hu&&hu(Ve),Vk=Ve}},zG=Ls({},["mi","mo","mn","ms","mtext"]),VG=Ls({},["foreignobject","desc","title","annotation-xml"]),fq=Ls({},["title","style","font","a","script"]),r6=Ls({},v4);Ls(r6,y4),Ls(r6,eN);const Tj=Ls({},C4);Ls(Tj,w4);const gq=function(Ve){let bn=Ee(Ve);(!bn||!bn.tagName)&&(bn={namespaceURI:zk,tagName:"template"});const Kn=lT(Ve.tagName),jc=lT(bn.tagName);return Sj[Ve.namespaceURI]?Ve.namespaceURI===s6?bn.namespaceURI===Rb?Kn==="svg":bn.namespaceURI===o6?Kn==="svg"&&(jc==="annotation-xml"||zG[jc]):!!r6[Kn]:Ve.namespaceURI===o6?bn.namespaceURI===Rb?Kn==="math":bn.namespaceURI===s6?Kn==="math"&&VG[jc]:!!Tj[Kn]:Ve.namespaceURI===Rb?bn.namespaceURI===s6&&!VG[jc]||bn.namespaceURI===o6&&!zG[jc]?!1:!Tj[Kn]&&(fq[Kn]||!r6[Kn]):!!(Pw==="application/xhtml+xml"&&Sj[Ve.namespaceURI]):!1},$w=function(Ve){b2(s.removed,{element:Ve});try{Ve.parentNode.removeChild(Ve)}catch{Ve.remove()}},rR=function(Ve,bn){try{b2(s.removed,{attribute:bn.getAttributeNode(Ve),from:bn})}catch{b2(s.removed,{attribute:null,from:bn})}if(bn.removeAttribute(Ve),Ve==="is"&&!Qn[Ve])if(sy||Ik)try{$w(bn)}catch{}else try{bn.setAttribute(Ve,"")}catch{}},UG=function(Ve){let bn,Kn;if(oR)Ve="<remove></remove>"+Ve;else{const lg=_L(Ve,/^[\r\n\t ]+/);Kn=lg&&lg[0]}Pw==="application/xhtml+xml"&&zk===Rb&&(Ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ve+"</body></html>");const jc=Se?Se.createHTML(Ve):Ve;if(zk===Rb)try{bn=new H().parseFromString(jc,Pw)}catch{}if(!bn||!bn.documentElement){bn=$e.createDocument(zk,"template",null);try{bn.documentElement.innerHTML=wj?et:jc}catch{}}const Ki=bn.body||bn.documentElement;return Ve&&Kn&&Ki.insertBefore(d.createTextNode(Kn),Ki.childNodes[0]||null),zk===Rb?Xe.call(bn,ag?"html":"body")[0]:ag?bn.documentElement:Ki},WG=function(Ve){return yt.call(Ve.ownerDocument||Ve,Ve,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},hq=function(Ve){return Ve instanceof P&&(typeof Ve.nodeName!="string"||typeof Ve.textContent!="string"||typeof Ve.removeChild!="function"||!(Ve.attributes instanceof O)||typeof Ve.removeAttribute!="function"||typeof Ve.setAttribute!="function"||typeof Ve.namespaceURI!="string"||typeof Ve.insertBefore!="function"||typeof Ve.hasChildNodes!="function")},c6=function(Ve){return typeof y=="object"?Ve instanceof y:Ve&&typeof Ve=="object"&&typeof Ve.nodeType=="number"&&typeof Ve.nodeName=="string"},Mb=function(Ve,bn,Kn){Zt[Ve]&&EL(Zt[Ve],jc=>{jc.call(s,bn,Kn,Vk)})},ZG=function(Ve){let bn;if(Mb("beforeSanitizeElements",Ve,null),hq(Ve))return $w(Ve),!0;const Kn=qi(Ve.nodeName);if(Mb("uponSanitizeElement",Ve,{tagName:Kn,allowedTags:Mn}),Ve.hasChildNodes()&&!c6(Ve.firstElementChild)&&(!c6(Ve.content)||!c6(Ve.content.firstElementChild))&&vd(/<[/\w]/g,Ve.innerHTML)&&vd(/<[/\w]/g,Ve.textContent))return $w(Ve),!0;if(!Mn[Kn]||zl[Kn]){if(!zl[Kn]&&GG(Kn)&&(Ss.tagNameCheck instanceof RegExp&&vd(Ss.tagNameCheck,Kn)||Ss.tagNameCheck instanceof Function&&Ss.tagNameCheck(Kn)))return!1;if(yj&&!Hk[Kn]){const jc=Ee(Ve)||Ve.parentNode,Ki=le(Ve)||Ve.childNodes;if(Ki&&jc){const lg=Ki.length;for(let al=lg-1;al>=0;--al)jc.insertBefore(ne(Ki[al],!0),_e(Ve))}}return $w(Ve),!0}return Ve instanceof w&&!gq(Ve)||(Kn==="noscript"||Kn==="noembed"||Kn==="noframes")&&vd(/<\/no(script|embed|frames)/i,Ve.innerHTML)?($w(Ve),!0):(Gi&&Ve.nodeType===3&&(bn=Ve.textContent,bn=Vm(bn,On," "),bn=Vm(bn,Sn," "),bn=Vm(bn,gs," "),Ve.textContent!==bn&&(b2(s.removed,{element:Ve.cloneNode()}),Ve.textContent=bn)),Mb("afterSanitizeElements",Ve,null),!1)},jG=function(Ve,bn,Kn){if(BG&&(bn==="id"||bn==="name")&&(Kn in d||Kn in mq))return!1;if(!(yl&&!Ku[bn]&&vd(rs,bn))){if(!(Xm&&vd(Bo,bn))){if(!Qn[bn]||Ku[bn]){if(!(GG(Ve)&&(Ss.tagNameCheck instanceof RegExp&&vd(Ss.tagNameCheck,Ve)||Ss.tagNameCheck instanceof Function&&Ss.tagNameCheck(Ve))&&(Ss.attributeNameCheck instanceof RegExp&&vd(Ss.attributeNameCheck,bn)||Ss.attributeNameCheck instanceof Function&&Ss.attributeNameCheck(bn))||bn==="is"&&Ss.allowCustomizedBuiltInElements&&(Ss.tagNameCheck instanceof RegExp&&vd(Ss.tagNameCheck,Kn)||Ss.tagNameCheck instanceof Function&&Ss.tagNameCheck(Kn))))return!1}else if(!Cj[bn]){if(!vd(oo,Vm(Kn,Jt,""))){if(!((bn==="src"||bn==="xlink:href"||bn==="href")&&Ve!=="script"&&AL(Kn,"data:")===0&&FG[Ve])){if(!(Yu&&!vd(kt,Vm(Kn,Jt,"")))){if(Kn)return!1}}}}}}return!0},GG=function(Ve){return Ve.indexOf("-")>0},qG=function(Ve){let bn,Kn,jc,Ki;Mb("beforeSanitizeAttributes",Ve,null);const{attributes:lg}=Ve;if(!lg)return;const al={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Qn};for(Ki=lg.length;Ki--;){bn=lg[Ki];const{name:ig,namespaceURI:Ej}=bn;Kn=ig==="value"?bn.value:OL(bn.value);const bq=Kn;if(jc=qi(ig),al.attrName=jc,al.attrValue=Kn,al.keepAttr=!0,al.forceKeepAttr=void 0,Mb("uponSanitizeAttribute",Ve,al),Kn=al.attrValue,al.forceKeepAttr)continue;if(!al.keepAttr){rR(ig,Ve);continue}if(!Dd&&vd(/\/>/i,Kn)){rR(ig,Ve);continue}Gi&&(Kn=Vm(Kn,On," "),Kn=Vm(Kn,Sn," "),Kn=Vm(Kn,gs," "));const KG=qi(Ve.nodeName);if(!jG(KG,jc,Kn)){rR(ig,Ve);continue}if(PG&&(jc==="id"||jc==="name")&&(rR(ig,Ve),Kn=lq+Kn),Se&&typeof V=="object"&&typeof V.getAttributeType=="function"&&!Ej)switch(V.getAttributeType(KG,jc)){case"TrustedHTML":{Kn=Se.createHTML(Kn);break}case"TrustedScriptURL":{Kn=Se.createScriptURL(Kn);break}}if(Kn!==bq)try{Ej?Ve.setAttributeNS(Ej,ig,Kn):Ve.setAttribute(ig,Kn)}catch{rR(ig,Ve)}}Mb("afterSanitizeAttributes",Ve,null)},pq=function Ko(Ve){let bn;const Kn=WG(Ve);for(Mb("beforeSanitizeShadowDOM",Ve,null);bn=Kn.nextNode();)Mb("uponSanitizeShadowNode",bn,null),!ZG(bn)&&(bn.content instanceof g&&Ko(bn.content),qG(bn));Mb("afterSanitizeShadowDOM",Ve,null)};return s.sanitize=function(Ko){let Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bn,Kn,jc,Ki;if(wj=!Ko,wj&&(Ko="<!-->"),typeof Ko!="string"&&!c6(Ko))if(typeof Ko.toString=="function"){if(Ko=Ko.toString(),typeof Ko!="string")throw v2("dirty is not a string, aborting")}else throw v2("toString is not a function");if(!s.isSupported)return Ko;if(Db||xj(Ve),s.removed=[],typeof Ko=="string"&&(sR=!1),sR){if(Ko.nodeName){const ig=qi(Ko.nodeName);if(!Mn[ig]||zl[ig])throw v2("root node is forbidden and cannot be sanitized in-place")}}else if(Ko instanceof y)bn=UG("<!---->"),Kn=bn.ownerDocument.importNode(Ko,!0),Kn.nodeType===1&&Kn.nodeName==="BODY"||Kn.nodeName==="HTML"?bn=Kn:bn.appendChild(Kn);else{if(!sy&&!Gi&&!ag&&Ko.indexOf("<")===-1)return Se&&n6?Se.createHTML(Ko):Ko;if(bn=UG(Ko),!bn)return sy?null:n6?et:""}bn&&oR&&$w(bn.firstChild);const lg=WG(sR?Ko:bn);for(;jc=lg.nextNode();)ZG(jc)||(jc.content instanceof g&&pq(jc.content),qG(jc));if(sR)return Ko;if(sy){if(Ik)for(Ki=Mt.call(bn.ownerDocument);bn.firstChild;)Ki.appendChild(bn.firstChild);else Ki=bn;return(Qn.shadowroot||Qn.shadowrootmode)&&(Ki=rn.call(c,Ki,!0)),Ki}let al=ag?bn.outerHTML:bn.innerHTML;return ag&&Mn["!doctype"]&&bn.ownerDocument&&bn.ownerDocument.doctype&&bn.ownerDocument.doctype.name&&vd(T4,bn.ownerDocument.doctype.name)&&(al="<!DOCTYPE "+bn.ownerDocument.doctype.name+`>
`+al),Gi&&(al=Vm(al,On," "),al=Vm(al,Sn," "),al=Vm(al,gs," ")),Se&&n6?Se.createHTML(al):al},s.setConfig=function(Ko){xj(Ko),Db=!0},s.clearConfig=function(){Vk=null,Db=!1},s.isValidAttribute=function(Ko,Ve,bn){Vk||xj({});const Kn=qi(Ko),jc=qi(Ve);return jG(Kn,jc,bn)},s.addHook=function(Ko,Ve){typeof Ve=="function"&&(Zt[Ko]=Zt[Ko]||[],b2(Zt[Ko],Ve))},s.removeHook=function(Ko){if(Zt[Ko])return kL(Zt[Ko])},s.removeHooks=function(Ko){Zt[Ko]&&(Zt[Ko]=[])},s.removeAllHooks=function(){Zt={}},s}var $L=dT();const k4=t=>$L().sanitize(t);var Vu=tinymce.util.Tools.resolve("tinymce.util.I18n");const FL={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},nN="temporary-placeholder",_4=t=>()=>ht(t,nN).getOr("!not found!"),A4=(t,s)=>{const c=t.toLowerCase();if(Vu.isRtl()){const l=as(c,"-rtl");return Mo(s,l)?l:c}else return c},oN=(t,s)=>ht(s,A4(t,s)),sN=(t,s)=>{const c=s();return oN(t,c).getOrThunk(_4(c))},rN=(t,s,c)=>{const l=s();return oN(t,l).or(c).getOrThunk(_4(l))},cN=t=>Vu.isRtl()?Mo(FL,t):!1,O4=()=>io("add-focusable",[Er(t=>{Zy(t.element,"svg").each(s=>St(s,"focusable","false"))})]),D4=(t,s,c,l)=>{var d,g;const h=cN(s)?["tox-icon--flip"]:[],y=ht(c,A4(s,c)).or(l).getOrThunk(_4(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:y},behaviours:bt([...(g=t.behaviours)!==null&&g!==void 0?g:[],O4()])}},zi=(t,s,c,l=A.none())=>D4(s,t,c(),l),aN=(t,s,c)=>{const l=c(),d=He(t,g=>Mo(l,A4(g,l)));return D4(s,d.getOr(nN),l,A.none())},IL={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},mT=ei({name:"Notification",factory:t=>{const s=Ut("notification-text"),c=Rs({dom:Hm(`<p id=${s}>${k4(t.backstageProvider.translate(t.text))}</p>`),behaviours:bt([Un.config({})])}),l=G=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${G}%`}}}),d=G=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${G}%`}}),g=Rs({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:bt([Un.config({})])}),w={updateProgress:(G,ne)=>{G.getSystem().isConnected()&&g.getOpt(G).each(_e=>{Un.set(_e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ne)]},d(ne)])})},updateText:(G,ne)=>{if(G.getSystem().isConnected()){const _e=c.get(G);Un.set(_e,[ec(ne)])}}},_=je([t.icon.toArray(),t.level.toArray(),t.level.bind(G=>A.from(IL[G])).toArray()]),O=Rs(cl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[zi("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:bt([wr.config({}),Ua.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:G=>{t.onAction(G)}})),P=aN(_,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:bt([Un.config({})])},V=[P,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(G=>["tox-notification","tox-notification--in",`tox-notification--${G}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:bt([wr.config({}),Ln.config({}),gn.config({mode:"special",onEscape:G=>(t.onAction(G),A.some(!0))})]),components:V.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:w}},configFields:[us("level"),Ye("progress"),us("icon"),Ye("onAction"),Ye("text"),Ye("iconProvider"),Ye("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var LL=(t,s,c,l)=>{const d=s.backstage.shared,g=()=>{const O=Rr(be.fromDom(t.getContentAreaContainer()));return A.some(O)},h=O=>{g().each(P=>{Je(O,H=>{ia(H.element)>P.width&&qt(H.element,"width",P.width+"px")})})};return{open:(O,P,H)=>{const V=()=>{const le=$e=>{Un.remove($e,G),ne()},Ee=($e,yt)=>{gc($e.element).length===0?Se($e,yt):et($e,yt)},Se=($e,yt)=>{Nr.hide($e),l.clear(),yt&&t.focus()},et=($e,yt)=>{yt&&gn.focusIn($e)};l.on($e=>{P();const yt=H();le($e),Ee($e,yt)})},G=ol(mT.sketch({text:O.text,level:go(["success","error","warning","warn","info"],O.type)?O.type:void 0,progress:O.progressBar===!0,icon:O.icon,onAction:V,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const le=fl(G);l.on(Ee=>{Un.append(Ee,le),Nr.reposition(Ee),Ir.refresh(Ee),h(Ee.components())})}else{const le=ol(Nr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:bt([gn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Un.config({}),...gv(t)&&!d.header.isPositionedAtTop()?[]:[Ir.config({contextual:{lazyContext:()=>A.some(Rr(be.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:$e=>lh(t,$e.element).map(Mt=>({bounds:X1(Mt),optScrollEnv:A.some({currentScrollTop:Mt.element.dom.scrollTop,scrollElmTop:Tc(Mt.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})]])})),Ee=fl(G),Se={maxHeightFunction:np()},et={...d.anchors.banner(),overrides:Se};l.set(le),c.add(le),Nr.showWithinBounds(le,Ee,{anchor:et},g)}zn(O.timeout)&&O.timeout>0&&i2.setEditorTimeout(t,()=>{V()},O.timeout);const ne=()=>{l.on(le=>{Nr.reposition(le),Ir.refresh(le),h(le.components())})};return{close:V,reposition:ne,text:le=>{mT.updateText(G,le)},settings:O,getEl:()=>G.element.dom,progressBar:{value:le=>{mT.updateProgress(G,le)}}}},close:O=>{O.close()},getArgs:O=>O.settings}};const lN={setup:(t,s)=>{const c=(d,g)=>{Tn(d,Pu(),{raw:g})},l=()=>t.getMenu().bind(Nt.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(yf),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Nt.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var fT;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(fT||(fT={}));var om=fT;const gT="tox-menu-nav__js",hT="tox-collection__item",R4="tox-swatch",iN={normal:gT,color:R4},pT="tox-collection__item--enabled",M4="tox-collection__group-heading",N4="tox-collection__item-icon",bT="tox-collection__item-label",uN="tox-collection__item-accessory",dN="tox-collection__item-caret",B4="tox-collection__item-checkmark",J1="tox-collection__item--active",P4="tox-collection__item-container",mN="tox-collection__item-container--column",Ep="tox-collection__item-container--row",HL="tox-collection__item-container--align-right",$4="tox-collection__item-container--align-left",vT="tox-collection__item-container--valign-top",zL="tox-collection__item-container--valign-middle",fN="tox-collection__item-container--valign-bottom",F4=t=>ht(iN,t).getOr(gT),gN=t=>t==="color"?"tox-swatches":"tox-menu",x2=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:gN(t),tieredMenu:"tox-tiered-menu"}),kp=t=>{const s=x2(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:F4(t)}},VL=(t,s,c)=>{const l=x2(c);return{tag:"div",classes:je([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},hN=[Z1.parts.items({})],T2=(t,s,c)=>{const l=x2(c);return{dom:{tag:"div",classes:je([[l.tieredMenu]])},markers:kp(c)}},I4=W([us("data"),Te("inputAttributes",{}),Te("inputStyles",{}),Te("tag","input"),Te("inputClasses",[]),Yo("onSetValue"),Te("styles",{}),Te("eventOrder",{}),ba("inputBehaviours",[Wt,Ln]),Te("selectOnFocus",!0)]),L4=t=>bt([Ln.config({onFocus:t.selectOnFocus?s=>{const c=s.element,l=Fe(c);c.dom.setSelectionRange(0,l.length)}:ee})]),UL=t=>({...L4(t),...va(t.inputBehaviours,[Wt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Fe(s.element),setValue:(s,c)=>{Fe(s.element)!==c&&Kd(s.element,c)}},onSetValue:t.onSetValue})])}),H4=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),WL=(t,s)=>({uid:t.uid,dom:H4(t),components:[],behaviours:UL(t),eventOrder:t.eventOrder}),Q1=ei({name:"Input",configFields:I4(),factory:WL}),pN=Ut("refetch-trigger-event"),bN=Ut("redirect-menu-item-interaction"),z4="tox-menu__searcher",_p=t=>Os(t.element,`.${z4}`).bind(s=>t.getSystem().getByDom(s).toOptional()),V4=_p,ZL=(t,s)=>{Wt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},vN=t=>{const s=Wt.getValue(t),c=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:l}},jL=(t,s)=>{$(s.element,"id").each(c=>St(t.element,"aria-activedescendant",c))},GL=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Tn(d,bN,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[hT]},components:[Q1.sketch({inputClasses:[z4,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:bt([io(l,[Qe(Vd(),d=>{po(d,pN)}),Qe(Pu(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),gn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[l,gn.name()]}})]}},yT="tox-collection--results__js",E2=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ut("aria-item-search-result-id"),"aria-selected":"false"}}}:t},U4=(t,s)=>c=>{const l=pn(c,s);return Me(l,d=>({dom:t,components:d}))},yN=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Z1.parts.items({preprocess:t!=="auto"?U4({tag:"div",classes:["tox-swatches__row"]},t):Dt})]}]}),qL=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Z1.parts.items({preprocess:U4({tag:"div",classes:["tox-collection__group"]},t)})]}),W4=(t,s)=>{const c=[];let l=[];return Je(t,(d,g)=>{s(d,g)?(l.length>0&&c.push(l),l=[],(Mo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&c.push(l),Me(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},CT=(t,s,c)=>Z1.parts.items({preprocess:l=>{const d=Me(l,c);return t!=="auto"&&t>1?U4({tag:"div",classes:["tox-collection__group"]},t)(d):W4(d,(g,h)=>s[h].type==="separator")}}),CN=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[CT(t,s,Dt)]}),wN=(t,s,c=!0)=>{const l=Ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",yT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[CT(t,s,E2)]}},SN=(t,s,c)=>{const l=Ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[GL({i18n:Vu.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],yT],attributes:{id:l}},components:[CT(t,s,E2)]}]}},xN=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Z1.parts.items({preprocess:c=>W4(c,(l,d)=>t[d].type==="separator")})]}),k2=t=>Vs(t,s=>"icon"in s&&s.icon!==void 0),ih=t=>(console.error(tu(t)),console.log(t),A.none()),KL=(t,s,c,l,d)=>{const g=xN(c);return{value:t,dom:g.dom,components:g.components,items:c}},Z4=(t,s,c,l,d)=>{const g=()=>d.menuType!=="searchable"?CN(l,c):d.searchMode.searchMode==="search-with-field"?SN(l,c,d.searchMode):wN(l,c);if(d.menuType==="color"){const h=yN(l);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&l==="auto"){const h=CN(l,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=qL(l);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:VL(s,l,d.menuType),components:hN,items:c}},Bc=vc("type"),wT=vc("name"),ST=vc("label"),uh=vc("text"),TN=vc("title"),EN=vc("icon"),_2=vc("value"),YL=Kl("fetch"),XL=Kl("getSubmenuItems"),bv=Kl("onAction"),j4=Kl("onItemAction"),Ap=qr("onSetup",()=>ee),JL=yc("name"),Op=yc("text"),kN=yc("role"),yd=yc("icon"),A2=yc("tooltip"),xT=yc("label"),TT=yc("shortcut"),_N=Ru("select"),ET=Jr("active",!1),QL=Jr("borderless",!1),sm=Jr("enabled",!0),O2=Jr("primary",!1),kT=t=>Te("columns",t),G4=Te("meta",{}),q4=qr("onAction",ee),eb=t=>fa("type",t),K4=t=>Oc("name","name",ko(()=>Ut(`${t}-name`)),Ht),e8=t=>Oc("value","value",ko(()=>Ut(`${t}-value`)),Ri()),AN=Dn([Bc,Op]),ON=t=>Mr("separatormenuitem",AN,t),DN=Dn([eb("autocompleteitem"),ET,sm,G4,_2,Op,yd]),t8=t=>Mr("Autocompleter.Separator",AN,t),n8=t=>Mr("Autocompleter.Item",DN,t),D2=[sm,A2,yd,Op,Ap],pu=Dn([Bc,bv,TT].concat(D2)),rm=t=>Mr("toolbarbutton",pu,t),Y4=[ET].concat(D2),X4=Dn(Y4.concat([Bc,bv,TT])),_T=t=>Mr("ToggleButton",X4,t),RN=[qr("predicate",co),Ni("scope","node",["node","editor"]),Ni("position","selection",["node","selection","line"])],o8=D2.concat([eb("contextformbutton"),O2,bv,ms("original",Dt)]),R2=Y4.concat([eb("contextformbutton"),O2,bv,ms("original",Dt)]),AT=D2.concat([eb("contextformbutton")]),J4=Y4.concat([eb("contextformtogglebutton")]),s8=Hc("type",{contextformbutton:o8,contextformtogglebutton:R2}),Um=Dn([eb("contextform"),qr("initValue",W("")),xT,Yl("commands",s8),Du("launch",Hc("type",{contextformbutton:AT,contextformtogglebutton:J4}))].concat(RN)),r8=t=>Mr("ContextForm",Um,t),c8=Dn([eb("contexttoolbar"),vc("items")].concat(RN)),Cd=t=>Mr("ContextToolbar",c8,t),M2=[Bc,vc("src"),yc("alt"),k("classes",[],Ht)],cm=Dn(M2),a8=[Bc,uh,JL,k("classes",["tox-collection__item-label"],Ht)],Qs=Dn(a8),tb=Ac(()=>Id("type",{cardimage:cm,cardtext:Qs,cardcontainer:OT})),OT=Dn([Bc,fa("direction","horizontal"),fa("align","left"),fa("valign","middle"),Yl("items",tb)]),nb=[sm,Op,kN,TT,e8("menuitem"),G4],Q4=Dn([Bc,xT,Yl("items",tb),Ap,q4].concat(nb)),e3=t=>Mr("cardmenuitem",Q4,t),l8=Dn([Bc,ET,yd].concat(nb)),t3=t=>Mr("choicemenuitem",l8,t),MN=[Bc,vc("fancytype"),q4],NN=[Te("initData",{})].concat(MN),BN=[Ru("select"),L("initData",{},[Jr("allowCustomColors",!0),fa("storageKey","default"),nu("colors",Ri())])].concat(MN),n3=Hc("fancytype",{inserttable:NN,colorswatch:BN}),PN=t=>Mr("fancymenuitem",n3,t),DT=Dn([Bc,Ap,q4,yd].concat(nb)),i8=t=>Mr("menuitem",DT,t),u8=Dn([Bc,XL,Ap,yd].concat(nb)),d8=t=>Mr("nestedmenuitem",u8,t),m8=Dn([Bc,yd,ET,Ap,bv].concat(nb)),f8=t=>Mr("togglemenuitem",m8,t),RT=(t,s,c)=>{const l=rl(t.element,"."+c);if(l.length>0){const d=vt(l,g=>{const h=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(h-y)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},$N=(t,s)=>bt([io(t,s)]),vv={namedEvents:$N,unnamedEvents:t=>$N(Ut("unnamed-events"),t)},FN=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),IN="silver.readonly",g8=Dn([cy("readonly")]),N2=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&Je(d,g=>{g.broadcastOn([Jd()],{target:l})}),Je(d,g=>{g.broadcastOn([IN],{readonly:s})})},MT=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&N2(s,!0)}),t.on("SwitchMode",()=>N2(s,t.mode.isReadOnly())),jx(t)&&t.mode.set("readonly")},ta=()=>Ql.config({channels:{[IN]:{schema:g8,onReceive:(t,s)=>{Pn.set(t,s.readonly)}}}}),am={item:t=>Pn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Pn.config({disabled:t}),splitButton:t=>Pn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Pn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},NT=(t,s)=>{const c=t.getApi(s);return l=>{l(c)}},dh=(t,s)=>Er(c=>{NT(t,c)(d=>{const g=t.onSetup(d);Ct(g)&&s.set(g)})}),Il=(t,s)=>Wd(c=>NT(t,c)(s.get())),h8=(t,s)=>$u((c,l)=>{NT(t,c)(t.onAction),!t.triggersSubmenu&&s===om.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&po(c,Jp()),l.stop())}),o3={[ru()]:["disabling","alloy.base.behaviour","toggling","item-events"]},ob=Hr,sb=(t,s,c,l)=>{const d=fn(ee);return{type:"item",dom:s.dom,components:ob(s.optComponents),data:t.data,eventOrder:o3,hasSubmenu:t.triggersSubmenu,itemBehaviours:bt([io("item-events",[h8(t,c),dh(t,d),Il(t,d)]),am.item(()=>!t.enabled||l.isDisabled()),ta(),Un.config({})].concat(t.itemBehaviours))}},yv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),BT=t=>{const s=uv.os.isMacOS()||uv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Me(g,y=>{const w=y.toLowerCase().trim();return Mo(d,w)?d[w]:y});return s?h.join(""):h.join("+")},PT=(t,s,c=[N4])=>zi(t,{tag:"div",classes:c},s),s3=t=>({dom:{tag:"div",classes:[bT]},components:[ec(Vu.translate(t))]}),LN=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),p8=(t,s)=>({dom:{tag:"div",classes:[bT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ec(Vu.translate(s))]}]}),b8=t=>({dom:{tag:"div",classes:[uN]},components:[ec(BT(t))]}),HN=t=>PT("checkmark",t,[B4]),v8=t=>PT("chevron-right",t,[dN]),zN=t=>PT("chevron-down",t,[dN]),VN=(t,s)=>{const c=t.direction==="vertical"?mN:Ep,l=t.align==="left"?$4:HL;return{dom:{tag:"div",classes:[P4,c,l,(()=>{switch(t.valign){case"top":return vT;case"middle":return zL;case"bottom":return fN}})()]},components:s}},UN=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),y8=(t,s,c)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(_=>rN(_,s.icons,c)),y=t.ariaLabel.map(_=>({"aria-label":s.translate(_),"data-mce-name":_})).getOr({});return{dom:(()=>{const _=R4,O=h.getOr(""),P={tag:"div",attributes:y,classes:[_]};return g===l?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:O}:Wn(g)?{...P,attributes:{...P.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:P})(),optComponents:[]}},WN=t=>{const s=t.map(c=>({attributes:{id:Ut("menu-item"),"aria-label":Vu.translate(c)}})).getOr({});return{tag:"div",classes:[gT,hT],...s}},C8=(t,s,c,l)=>{const d={tag:"div",classes:[N4]},g=H=>zi(H,d,s.icons,l),h=()=>A.some({dom:d}),y=c?t.iconContent.map(g).orThunk(h):A.none(),w=t.checkMark,_=A.from(t.meta).fold(()=>s3,H=>Mo(H,"style")?xn(p8,H.style):s3),O=t.htmlContent.fold(()=>t.textContent.map(_),H=>A.some(LN(H,[bT])));return{dom:WN(t.ariaLabel),optComponents:[y,O,t.shortcutContent.map(b8),w,t.caret]}},Kf=(t,s,c,l=A.none())=>t.presets==="color"?y8(t,s,l):C8(t,s,c,l),ZN=(t,s,c)=>ht(t,"tooltipWorker").map(l=>[Ua.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:np}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{Ua.setComponents(d,[r0({element:be.fromDom(h)})])})}})]).getOrThunk(()=>c.map(l=>[Ua.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),jN=t=>G1.DOM.encode(t),r3=(t,s)=>{const c=Vu.translate(t),l=jN(c);if(s.length>0){const d=new RegExp(FN(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},GN=(t,s,c,l,d,g,h,y=!0)=>{const w=Kf({presets:l,textContent:A.none(),htmlContent:c?t.text.map(O=>r3(O,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,y,t.icon),_=t.text.filter(O=>!c&&O!=="");return sb({data:yv(t),enabled:t.enabled,getApi:W({}),onAction:O=>d(t.value,t.meta),onSetup:W(ee),triggersSubmenu:!1,itemBehaviours:ZN(t,h,_)},w,g,h.providers)},c3=(t,s)=>Me(t,c=>{switch(c.type){case"cardcontainer":return VN(c,c3(c.items,s));case"cardimage":return UN(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>go(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return LN(r3(c.text,d),c.classes)}}),a3=(t,s,c,l)=>{const d=h=>({isEnabled:()=>!Pn.isDisabled(h),setEnabled:y=>{Pn.set(h,!y),Je(rl(h.element,"*"),w=>{h.getSystem().getByDom(w).each(_=>{_.hasConfigured(Pn)&&Pn.set(_,!y)})})}}),g={dom:WN(t.label),optComponents:[A.some({dom:{tag:"div",classes:[P4,Ep]},components:c3(t.items,l)})]};return sb({data:yv({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,c.providers)},l3=(t,s,c,l,d,g,h,y=!0)=>{const w=P=>({setActive:H=>{So.set(P,H)},isActive:()=>So.isOn(P),isEnabled:()=>!Pn.isDisabled(P),setEnabled:H=>Pn.set(P,!H)}),_=Kf({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(HN(h.icons)):A.none(),caret:A.none(),value:t.value},h,y),O=t.text.filter(W(!s)).map(P=>Ua.config(h.tooltips.getConfig({tooltipText:h.translate(P)})));return ar(sb({data:yv(t),enabled:t.enabled,getApi:w,onAction:P=>l(t.value),onSetup:P=>(P.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},_,g,h),{toggling:{toggleClass:pT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},$T=ZC(XA(),JA()),i3=t=>({value:YN(t)}),qN=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,u3=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,KN=t=>qN.test(t)||u3.test(t),YN=t=>qa(t,"#").toUpperCase(),w8=t=>KN(t)?A.some({value:YN(t)}):A.none(),XN=t=>({value:t.value.replace(qN,(c,l,d,g)=>l+l+d+d+g+g)}),JN=t=>{const s=XN(t),c=u3.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},FT=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},B2=t=>{const s=FT(t.red)+FT(t.green)+FT(t.blue);return i3(s)},QN=Math.min,eB=Math.max,IT=Math.round,S8=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,x8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,rb=(t,s,c,l)=>({red:t,green:s,blue:c,alpha:l}),d3=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},tB=t=>{let s,c,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=eB(0,QN(g,1)),h=eB(0,QN(h,1)),g===0)return s=c=l=IT(255*h),rb(s,c,l,1);const y=d/60,w=h*g,_=w*(1-Math.abs(y%2-1)),O=h-w;switch(Math.floor(y)){case 0:s=w,c=_,l=0;break;case 1:s=_,c=w,l=0;break;case 2:s=0,c=w,l=_;break;case 3:s=0,c=_,l=w;break;case 4:s=_,c=0,l=w;break;case 5:s=w,c=0,l=_;break;default:s=c=l=0}return s=IT(255*(s+O)),c=IT(255*(c+O)),l=IT(255*(l+O)),rb(s,c,l,1)},P2=t=>{const s=JN(t),c=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return rb(c,l,d,1)},nB=(t,s,c,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),y=parseFloat(l);return rb(d,g,h,y)},LT=t=>{const s=S8.exec(t);if(s!==null)return A.some(nB(s[1],s[2],s[3],"1"));const c=x8.exec(t);return c!==null?A.some(nB(c[1],c[2],c[3],c[4])):A.none()},oB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,sB=rb(255,0,0,1),T8=t=>{t.dispatch("SkinLoaded")},E8=(t,s)=>{t.dispatch("SkinLoadError",s)},k8=t=>{t.dispatch("ResizeEditor")},Cv=(t,s)=>{t.dispatch("ResizeContent",s)},rB=(t,s)=>{t.dispatch("ScrollContent",s)},cB=(t,s)=>{t.dispatch("TextColorChange",s)},_8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},A8=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),O8=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},D8=(t,s)=>{t.dispatch("StylesTextUpdate",s)},R8=(t,s)=>{t.dispatch("AlignTextUpdate",s)},m3=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},aB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},lB=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},M8=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},$2=(t,s)=>()=>{t(),s()},ni=t=>cb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),N8=(t,s)=>c=>{const l=bc(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},HT=(t,s)=>c=>{const l=ni(t)(c),d=N8(t,s)(c);return()=>{l(),d()}},cb=(t,s,c)=>l=>{const d=()=>c(l),g=()=>{c(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},iB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},bu=(t,s)=>()=>t.execCommand(s);var ab=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const uB={},B8=(t,s=10)=>{const c=ab.getItem(t),l=We(c)?JSON.parse(c):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),h=_=>{Ke(g,_).each(y),g.unshift(_),g.length>s&&g.pop(),ab.setItem(t,JSON.stringify(g))},y=_=>{g.splice(_,1)};return{add:h,state:()=>g.slice(0)}},dB=t=>ht(uB,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=ab.getItem(s);if(jo(c)){const d=ab.getItem("tinymce-custom-colors");ab.setItem(s,Wn(d)?d:"[]")}const l=B8(s,10);return uB[t]=l,l}),zT=t=>Me(dB(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),VT=(t,s)=>{dB(t).add(s)},lb=(t,s,c)=>({hue:t,saturation:s,value:c}),UT=t=>{let s=0,c=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,y=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(y===w)return l=y,lb(0,0,l*100);const _=d===y?g-h:h===y?d-g:h-d;return s=d===y?3:h===y?1:5,s=60*(s-_/(w-y)),c=(w-y)/w,l=w,lb(Math.round(s),Math.round(c*100),Math.round(l*100))},P8=t=>UT(P2(t)),mB=t=>B2(tB(t)),f3=t=>w8(t).orThunk(()=>LT(t).map(B2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const l=c.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],y=l[3];return B2(rb(d,g,h,y))}),F2="forecolor",wv="hilitecolor",fB=5,$8=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+f3(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},Yf=t=>s=>s.options.get(t),g3="#000000",F8=t=>{const s=t.options.register,c=d=>Ue(d,We)?{value:$8(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=d=>zn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:l,default:h3(t)}),s("color_cols_foreground",{processor:l,default:gB(t,F2)}),s("color_cols_background",{processor:l,default:gB(t,wv)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:g3}),s("color_default_background",{processor:"string",default:g3})},WT=(t,s)=>s===F2&&t.options.isSet("color_map_foreground")?Yf("color_map_foreground")(t):s===wv&&t.options.isSet("color_map_background")?Yf("color_map_background")(t):Yf("color_map")(t),h3=(t,s="default")=>Math.max(fB,Math.ceil(Math.sqrt(WT(t,s).length))),gB=(t,s)=>{const c=Yf("color_cols")(t),l=h3(t,s);return c===h3(t)?l:c},hB=(t,s="default")=>Math.round(s===F2?Yf("color_cols_foreground")(t):s===wv?Yf("color_cols_background")(t):Yf("color_cols")(t)),pB=Yf("custom_colors"),I8=Yf("color_default_foreground"),L8=Yf("color_default_background"),H8="rgba(0, 0, 0, 0)",z8=t=>LT(t).exists(s=>s.alpha!==0),bB=t=>Ld(t,s=>{if(Bn(s)){const c=$s(s,"background-color");return un(z8(c),c)}else return A.none()}).getOr(H8),vB=(t,s)=>{const c=be.fromDom(t.selection.getStart()),l=s==="hilitecolor"?bB(c):$s(c,"color");return LT(l).map(d=>"#"+B2(d).value)},V8=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},Xf=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},U8=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{V8(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{Xf(t,s)})},yB=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},I2=(t,s,c,l)=>{c==="custom"?EB(t)(g=>{g.each(h=>{VT(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},vB(t,s).getOr(g3)):c==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(c),t.execCommand("mceApplyTextcolor",s,c))},na=(t,s,c)=>t.concat(zT(s).concat(yB(c))),CB=(t,s,c)=>l=>{l(na(t,s,c))},p3=(t,s,c)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,c)},wB=(t,s)=>{t.setTooltip(s)},SB=(t,s)=>c=>{const l=vB(t,s);return Kr(l,c.toUpperCase())},b3=(t,s,c)=>{if(re(c))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=na(WT(t,s),s,!1),g=He(d,h=>h.value===c).getOr({text:""}).text;return t.translate([l,t.translate(g)])},xB=(t,s,c,l)=>{t.ui.registry.addSplitButton(s,{tooltip:b3(t,c,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:SB(t,c),columns:hB(t,c),fetch:CB(WT(t,c),c,pB(t)),onAction:d=>{I2(t,c,l.get(),ee)},onItemAction:(d,g)=>{I2(t,c,g,h=>{l.set(h),cB(t,{name:s,color:h})})},onSetup:d=>{p3(d,s,l.get());const g=h=>{h.name===s&&(p3(d,h.name,h.color),wB(d,b3(t,c,h.color)))};return t.on("TextColorChange",g),$2(ni(t)(d),()=>{t.off("TextColorChange",g)})}})},TB=(t,s,c,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(wB(g,b3(t,c,d.get())),p3(g,s,d.get()),ni(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:SB(t,c),initData:{storageKey:c},onAction:g=>{I2(t,c,g.value,h=>{d.set(h),cB(t,{name:s,color:h})})}}]})},EB=t=>(s,c)=>{let l=!1;const d=y=>{const _=y.getData().colorpicker;l?(s(A.from(_)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(y,w)=>{w.name==="hex-valid"&&(l=w.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ee,onCancel:()=>{s(A.none())}})},W8=t=>{U8(t);const s=I8(t),c=L8(t),l=fn(s),d=fn(c);xB(t,"forecolor","forecolor",l),xB(t,"backcolor","hilitecolor",d),TB(t,"forecolor","forecolor","Text color",l),TB(t,"backcolor","hilitecolor","Background color",d)},v3=(t,s,c,l,d,g,h,y)=>{const w=k2(s),O=Z8(s,c,l,d!=="color"?"normal":"color",g,h,y);return Z4(t,w,O,l,{menuType:d})},Z8=(t,s,c,l,d,g,h)=>Hr(Me(t,y=>y.type==="choiceitem"?t3(y).fold(ih,w=>A.some(l3(w,c===1,l,s,g(w.value),d,h,k2(t)))):A.none())),ZT=(t,s)=>{const c=kp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Os(d.element,"[aria-checked=true]"):A.none()}},j8=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${R4}`:`.${hT}`}},G8=(t,s)=>{const c=q8(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...v3(Ut("menu-value"),c,y=>{t.onAction({value:y})},l,d,om.CLOSE_ON_EXECUTE,t.select.getOr(co),s.shared.providers),markers:kp(d),movement:ZT(l,d),showMenuRole:!1};return{type:"widget",data:{value:Ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$T.widget(Z1.sketch(h))]}},q8=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>na(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),l=>l.concat(yB(c)))},kB=Ut("cell-over"),_B=Ut("cell-execute"),K8=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),Y8=(t,s,c)=>{const l=h=>Tn(h,kB,{row:t,col:s}),d=h=>Tn(h,_B,{row:t,col:s}),g=(h,y)=>{y.stop(),d(h)};return ol({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:bt([io("insert-table-picker-cell",[Qe(Hd(),Ln.focus),Qe(ru(),d),Qe(Tg(),g),Qe(cd(),g)]),So.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ln.config({onFocus:l})])})},X8=(t,s,c)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const y=t(d+1,h+1);g.push(Y8(d,h,y))}l.push(g)}return l},J8=(t,s,c,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)So.set(t[g][h],g<=s&&h<=c)},Q8=t=>ye(t,s=>Me(s,fl)),AB=(t,s)=>ec(`${s}x${t}`),e7={inserttable:(t,s)=>{const d=K8(s),g=X8(d,10,10),h=AB(0,0),y=Rs({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:bt([Un.config({})])});return{type:"widget",data:{value:Ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$T.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Q8(g).concat(y.asSpec()),behaviours:bt([io("insert-table-picker",[Er(w=>{Un.set(y.get(w),[h])}),hy(kB,(w,_,O)=>{const{row:P,col:H}=O.event;J8(g,P,H,10,10),Un.set(y.get(w),[AB(P+1,H+1)])}),hy(_B,(w,_,O)=>{const{row:P,col:H}=O.event;t.onAction({numRows:P+1,numColumns:H+1}),po(w,Jp())})]),gn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:G8},OB=(t,s)=>ht(e7,t.fancytype).map(c=>c(t,s)),t7=(t,s,c,l=!0,d=!1)=>{const g=d?zN(c.icons):v8(c.icons),h=w=>({isEnabled:()=>!Pn.isDisabled(w),setEnabled:_=>Pn.set(w,!_),setIconFill:(_,O)=>{Os(w.element,`svg path[class="${_}"], rect[class="${_}"]`).each(P=>{St(P,"fill",O)})},setTooltip:_=>{const O=c.translate(_);St(w.element,"aria-label",O)}}),y=Kf({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return sb({data:yv(t),getApi:h,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,c)},DB=(t,s,c,l=!0)=>{const d=h=>({isEnabled:()=>!Pn.isDisabled(h),setEnabled:y=>Pn.set(h,!y)}),g=Kf({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return sb({data:yv(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},n7=t=>({type:"separator",dom:{tag:"div",classes:[hT,M4]},components:t.text.map(ec).toArray()}),o7=(t,s,c,l=!0)=>{const d=h=>({setActive:y=>{So.set(h,y)},isActive:()=>So.isOn(h),isEnabled:()=>!Pn.isDisabled(h),setEnabled:y=>Pn.set(h,!y)}),g=Kf({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(HN(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,l);return ar(sb({data:yv(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:pT,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},s7=GN,y3=n7,r7=DB,c7=t7,a7=o7,l7=OB,RB=a3;var u7=Object.freeze({__proto__:null,getCoupled:(t,s,c,l)=>c.getOrCreate(t,s,l),getExistingCoupled:(t,s,c,l)=>c.getExisting(t,s,l)}),MB=[is("others",eu(to.value,Ri()))],d7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(ps(g.others).length===0)throw new Error("Cannot find any known coupled components");return ht(t,h)},c=(g,h,y)=>s(h,y).getOrThunk(()=>{const _=ht(h.others,y).getOrDie("No information found for coupled component: "+y)(g),O=g.getSystem().build(_);return t[y]=O,O}),l=(g,h,y)=>s(h,y).orThunk(()=>(ht(h.others,y).getOrDie("No information found for coupled component: "+y),A.none())),d=W({});return gi({readState:d,getExisting:l,getOrCreate:c})}});const ic=Aa({fields:MB,name:"coupling",apis:u7,state:d7}),C3=t=>{let s=A.none(),c=[];const l=_=>C3(O=>{d(P=>{O(_(P))})}),d=_=>{h()?w(_):c.push(_)},g=_=>{h()||(s=A.some(_),y(c),c=[])},h=()=>s.isSome(),y=_=>{Je(_,w)},w=_=>{s.each(O=>{setTimeout(()=>{_(O)},0)})};return t(g),{get:d,map:l,isReady:h}},m7={nu:C3,pure:t=>C3(s=>{s(t)})},f7=t=>{setTimeout(()=>{throw t},0)},Sv=t=>{const s=w=>{t().then(w,f7)};return{map:w=>Sv(()=>t().then(w)),bind:w=>Sv(()=>t().then(_=>w(_).toPromise())),anonBind:w=>Sv(()=>t().then(()=>w.toPromise())),toLazy:()=>m7.nu(s),toCached:()=>{let w=null;return Sv(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},bl={nu:t=>Sv(()=>new Promise(t)),pure:t=>Sv(()=>Promise.resolve(t))},NB=W("sink"),BB=W(Hi({name:NB(),overrides:W({dom:{tag:"div"},behaviours:bt([Ma.config({useFixed:Pt})]),events:vr([ld(Pu()),ld(_l()),ld(Tg())])})})),w3=(t,s)=>{const c=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:c,overrides:d}),g=>({type:l,hotspot:c,overrides:d,layouts:g}))},g7=(t,s,c)=>{const l=t.fetch;return l(c).map(s)},h7=(t,s,c,l,d,g,h)=>{const y=g7(t,s,l),w=PB(l,t);return y.map(_=>_.bind(O=>{const P=O.menus[O.primary];return A.from(P).each(H=>{t.listRole.each(V=>{H.role=V})}),A.from(j1.sketch({...g.menu(),uid:Ig(""),data:O,highlightOnOpen:h,onOpenMenu:(H,V)=>{const G=w().getOrDie();Ma.position(G,V,{anchor:c}),es.decloak(d)},onOpenSubmenu:(H,V,G)=>{const ne=w().getOrDie();Ma.position(ne,G,{anchor:{type:"submenu",item:V}}),es.decloak(d)},onRepositionMenu:(H,V,G)=>{const ne=w().getOrDie();Ma.position(ne,V,{anchor:c}),Je(G,_e=>{Ma.position(ne,_e.triggeredMenu,{anchor:{type:"submenu",item:_e.triggeringItem}})})},onEscape:()=>(Ln.focus(l),es.close(d),A.some(!0))}))}))},jT=(t,s,c,l,d,g,h)=>{const y=w3(t,c);return h7(t,s,y,c,l,d,h).map(_=>(_.fold(()=>{es.isOpen(l)&&es.close(l)},O=>{es.cloak(l),es.open(l,O),g(l)}),l))},p7=(t,s,c,l,d,g,h)=>(es.close(l),bl.pure(l)),S3=(t,s,c,l,d,g)=>{const h=ic.getCoupled(c,"sandbox");return(es.isOpen(h)?p7:jT)(t,s,c,h,l,d,g)},x3=(t,s,c)=>{const l=Xo.getCurrent(s).getOr(s),d=ia(t.element);c?qt(l.element,"min-width",d+"px"):No(l.element,d)},PB=(t,s)=>t.getSystem().getByUid(s.uid+"-"+NB()).map(c=>()=>to.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>to.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),$B=t=>{es.getState(t).each(s=>{j1.repositionMenus(s)})},T3=(t,s,c)=>{const l=l0(),d=(y,w)=>{const _=w3(t,s);l.link(s.element),t.matchWidth&&x3(_.hotspot,w,t.useMinWidth),t.onOpen(_,y,w),c!==void 0&&c.onOpen!==void 0&&c.onOpen(y,w)},g=(y,w)=>{l.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(y,w)},h=PB(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:uu.augment(t.sandboxBehaviours,[Wt.config({store:{mode:"memory",initialValue:s}}),es.config({onOpen:d,onClose:g,isPartOf:(y,w,_)=>_f(w,_)||_f(s,_),getAttachPoint:()=>h().getOrDie()}),Xo.config({find:y=>es.getState(y).bind(w=>Xo.getCurrent(w))}),Ql.config({channels:{...$m({isExtraPart:co}),...z0({doReposition:$B})}})])}},E3=t=>{const s=ic.getCoupled(t,"sandbox");$B(s)},GT=()=>[Te("sandboxClasses",[]),uu.field("sandboxBehaviours",[Xo,Ql,es,Wt])],b7=W([Ye("dom"),Ye("fetch"),Yo("onOpen"),Dl("onExecute"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Pf(),ba("dropdownBehaviours",[So,ic,gn,Ln]),Ye("toggleClass"),Te("eventOrder",{}),us("lazySink"),Te("matchWidth",!1),Te("useMinWidth",!1),us("role"),us("listRole")].concat(GT())),v7=W([du({schema:[Fg(),Te("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),BB()]),FB=(t,s,c,l)=>{const d=O=>ht(t.dom,"attributes").bind(P=>ht(P,O)),g=O=>{es.getState(O).each(P=>{j1.highlightPrimary(P)})},h=(O,P,H)=>S3(t,Dt,O,l,P,H),y=O=>{h(O,g,ti.HighlightMenuAndItem).get(ee)},w={expand:O=>{So.isOn(O)||h(O,ee,ti.HighlightNone).get(ee)},open:O=>{So.isOn(O)||h(O,ee,ti.HighlightMenuAndItem).get(ee)},refetch:O=>ic.getExistingCoupled(O,"sandbox").fold(()=>h(O,ee,ti.HighlightMenuAndItem).map(ee),H=>jT(t,Dt,O,H,l,ee,ti.HighlightMenuAndItem).map(ee)),isOpen:So.isOn,close:O=>{So.isOn(O)&&h(O,ee,ti.HighlightMenuAndItem).get(ee)},repositionMenus:O=>{So.isOn(O)&&E3(O)}},_=(O,P)=>(yf(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.dropdownBehaviours,[So.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ic.config({others:{sandbox:O=>T3(t,O,{onOpen:()=>So.on(O),onClose:()=>So.off(O)})}}),gn.config({mode:"special",onSpace:_,onEnter:_,onDown:(O,P)=>{if(wd.isOpen(O)){const H=ic.getCoupled(O,"sandbox");g(H)}else wd.open(O);return A.some(!0)},onEscape:(O,P)=>wd.isOpen(O)?(wd.close(O),A.some(!0)):A.none()}),Ln.config({})]),events:Ux(A.some(y)),eventOrder:{...t.eventOrder,[ru()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},wd=pl({name:"Dropdown",configFields:b7(),partFields:v7(),factory:FB,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),y7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},C7=t=>{const s=Wt.getValue(t),c=_p(t).map(vN);wd.refetch(s).get(()=>{const l=ic.getCoupled(s,"sandbox");c.each(d=>_p(l).each(g=>ZL(g,d)))})},w7=(t,s)=>{S7(t).each(c=>{fy(t,c.element,s.event.eventType,s.event.interactionEvent)})},S7=t=>es.getState(t).bind(Nt.getHighlighted).bind(Nt.getHighlighted),x7=t=>hi(t.element,yT)?A.some(t.element):Os(t.element,"."+yT),L2=(t,s,c)=>{V4(t).each(l=>{jL(l,c),x7(s).each(g=>{$(g,"id").each(h=>St(l.element,"aria-controls",h))})}),St(c.element,"aria-selected","true")},T7=(t,s,c)=>{St(c.element,"aria-selected","false")},qT=t=>{V4(t).each(s=>Ln.focus(s))},E7=t=>ic.getExistingCoupled(t,"sandbox").bind(_p).map(vN).map(c=>c.fetchPattern).getOr("");var KT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(KT||(KT={}));const k7=(t,s,c,l,d)=>{const g=c.shared.providers,h=y=>d?{...y,shortcut:A.none(),icon:y.text.isSome()?A.none():y.icon}:y;switch(t.type){case"menuitem":return i8(t).fold(ih,y=>A.some(r7(h(y),s,g,l)));case"nestedmenuitem":return d8(t).fold(ih,y=>A.some(c7(h(y),s,g,l,d)));case"togglemenuitem":return f8(t).fold(ih,y=>A.some(a7(h(y),s,g,l)));case"separator":return ON(t).fold(ih,y=>A.some(y3(y)));case"fancymenuitem":return PN(t).fold(ih,y=>l7(y,c));default:return console.error("Unknown item in general menu",t),A.none()}},_7=(t,s,c,l,d,g,h)=>{const y=l===1,w=!y||k2(t);return Hr(Me(t,_=>{switch(_.type){case"separator":return t8(_).fold(ih,O=>A.some(y3(O)));case"cardmenuitem":return e3(_).fold(ih,O=>A.some(RB({...O,onAction:P=>{O.onAction(P),c(O.value,O.meta)}},d,g,{itemBehaviours:ZN(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return n8(_).fold(ih,O=>A.some(s7(O,s,y,"normal",c,d,g,w)))}}))},A7=(t,s,c,l,d,g)=>{const h=k2(s),y=Hr(Me(s,O=>{const P=V=>d?!Mo(V,"text"):h,H=V=>k7(V,c,l,P(V),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?H({...O,enabled:!1}):H(O)})),w=y7(g);return(d?KL:Z4)(t,h,y,1,w)},xv=t=>j1.singleData(t.value,t),Tv=(t,s,c,l)=>{const d=ZT(s,l),g=kp(l);return{data:xv({...t,movement:d,menuBehaviours:vv.unnamedEvents(s!=="auto"?[]:[Er((h,y)=>{RT(h,4,g.item).each(({numColumns:w,numRows:_})=>{gn.setGridSize(h,_,w)})})])}),menu:{markers:kp(l),fakeFocus:c===KT.ContentFocus}}},IB=t=>op.create(be.fromDom(t.startContainer),t.startOffset,be.fromDom(t.endContainer),t.endOffset),D7={register:(t,s)=>{const c=Ut("autocompleter"),l=fn(!1),d=fn(!1),g=Fs(),h=ol(Nr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:bt([io("dismissAutocompleter",[Qe(bf(),()=>P()),Qe(vf(),(le,Ee)=>{$(Ee.event.target,"id").each(Se=>St(be.fromDom(t.getBody()),"aria-activedescendant",Se))})])]),lazySink:s.getSink})),y=()=>Nr.isOpen(h),w=d.get,_=()=>{if(y()){Nr.hide(h),t.dom.remove(c,!1);const le=be.fromDom(t.getBody());$(le,"aria-owns").filter(Ee=>Ee===c).each(()=>{oe(le,"aria-owns"),oe(le,"aria-activedescendant")})}},O=()=>Nr.getContent(h).bind(le=>Vo(le.components(),0)),P=()=>t.execCommand("mceAutocompleterClose"),H=le=>{const Ee=Bs(le,Se=>A.from(Se.columns)).getOr(1);return ye(le,Se=>{const et=Se.items;return _7(et,Se.matchText,($e,yt)=>{const Mt={hide:()=>P(),reload:Xe=>{_(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Xe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Xe=>{l.set(!0),Se.onAction(Mt,Xe,$e,yt),l.set(!1)})},Ee,om.BUBBLE_TO_SANDBOX,s,Se.highlightOn)})},V=(le,Ee)=>{const Se=Bs(le,et=>A.from(et.columns)).getOr(1);Nr.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(IB),root:be.fromDom(t.getBody())}},Tv(Z4("autocompleter-value",!0,Ee,Se,{menuType:"normal"}),Se,KT.ContentFocus,"normal")),O().each(Nt.highlightFirst)},G=le=>{const Ee=H(le);Ee.length>0?(V(le,Ee),St(be.fromDom(t.getBody()),"aria-owns",c),t.inline||ne()):_()},ne=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const le=t.getDoc().documentElement,Ee=t.selection.getNode(),Se=n_(h.element);or(Se,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Ee.offsetTop}px`,left:`${Ee.offsetLeft}px`}),t.dom.add(le,Se.dom),Os(Se,'[role="menu"]').each(et=>{$o(et,"position"),$o(et,"max-height")})};t.on("AutocompleterStart",({lookupData:le})=>{d.set(!0),l.set(!1),G(le)}),t.on("AutocompleterUpdate",({lookupData:le})=>G(le)),t.on("AutocompleterUpdateActiveRange",({range:le})=>g.set(le)),t.on("AutocompleterEnd",()=>{_(),d.set(!1),l.set(!1),g.clear()});const _e={cancelIfNecessary:P,isMenuOpen:y,isActive:w,isProcessingAction:l.get,getMenu:O};lN.setup(_e,t)}},H2=(t,s,c)=>gd(t,s,c).isSome(),LB=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},HB=5,R7=400,zB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},M7=(t,s)=>{const c=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return c>HB||l>HB},N7=t=>{const s=Fs(),c=fn(!1),l=LB(_=>{t.triggerEvent(tl(),_),c.set(!0)},R7),d=_=>(zB(_).each(O=>{l.cancel();const P={x:O.clientX,y:O.clientY,target:_.target};l.schedule(_),c.set(!1),s.set(P)}),A.none()),g=_=>(l.cancel(),zB(_).each(O=>{s.on(P=>{M7(O,P)&&s.clear()})}),A.none()),h=_=>{l.cancel();const O=P=>ss(P.target,_.target);return s.get().filter(O).map(P=>c.get()?(_.prevent(),!1):t.triggerEvent(cd(),_))},y=fs([{key:Fo(),value:d},{key:Tr(),value:g},{key:Dc(),value:h}]);return{fireIfReady:(_,O)=>ht(y,O).bind(P=>P(_))}},B7=t=>t.raw.which===ys[0]&&!go(["input","textarea"],bs(t.target))&&!H2(t.target,'[contenteditable="true"]'),P7=(t,s)=>{const c={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=N7(c),g=Me(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>Nl(t,V,G=>{d.fireIfReady(G,V).each(_e=>{_e&&G.kill()}),c.triggerEvent(V,G)&&G.kill()})),h=Fs(),y=Nl(t,"paste",V=>{d.fireIfReady(V,"paste").each(ne=>{ne&&V.kill()}),c.triggerEvent("paste",V)&&V.kill(),h.set(setTimeout(()=>{c.triggerEvent(Em(),V)},0))}),w=Nl(t,"keydown",V=>{c.triggerEvent("keydown",V)?V.kill():c.stopBackspace&&B7(V)&&V.prevent()}),_=Nl(t,"focusin",V=>{c.triggerEvent("focusin",V)&&V.kill()}),O=Fs(),P=Nl(t,"focusout",V=>{c.triggerEvent("focusout",V)&&V.kill(),O.set(setTimeout(()=>{c.triggerEvent(pf(),V)},0))});return{unbind:()=>{Je(g,V=>{V.unbind()}),w.unbind(),_.unbind(),P.unbind(),y.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},VB=(t,s)=>{const c=ht(t,"target").getOr(s);return fn(c)},UB=(t,s)=>{const c=fn(!1),l=fn(!1);return{stop:()=>{c.set(!0)},cut:()=>{l.set(!0)},isStopped:c.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},Ev=t=>{const s=fn(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:co,event:t,setSource:ie("Cannot set source of a broadcasted event"),getSource:ie("Cannot get source of a broadcasted event")}},Wm=he.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),WB=(t,s,c,l,d,g)=>{const h=t(s,l),y=UB(c,d);return h.fold(()=>(g.logEventNoHandlers(s,l),Wm.complete()),w=>{const _=w.descHandler;return Ef(_)(y),y.isStopped()?(g.logEventStopped(s,w.element,_.purpose),Wm.stopped()):y.isCut()?(g.logEventCut(s,w.element,_.purpose),Wm.complete()):xc(w.element).fold(()=>(g.logNoParent(s,w.element,_.purpose),Wm.complete()),P=>(g.logEventResponse(s,w.element,_.purpose),Wm.resume(P)))})},k3=(t,s,c,l,d,g)=>WB(t,s,c,l,d,g).fold(Pt,h=>k3(t,s,c,h,d,g),co),ZB=(t,s,c,l,d)=>{const g=VB(c,l);return WB(t,s,c,l,g,d)},YT=(t,s,c)=>{const l=Ev(s);return Je(t,d=>{const g=d.descHandler;Ef(g)(l)}),l.isStopped()},$7=(t,s,c,l)=>kv(t,s,c,c.target,l),kv=(t,s,c,l,d)=>{const g=VB(c,l);return k3(t,s,c,l,g,d)},z2=(t,s)=>({element:t,descHandler:s}),F7=(t,s)=>({id:t,descHandler:s}),I7=()=>{const t={},s=(h,y,w)=>{cs(w,(_,O)=>{const P=t[O]!==void 0?t[O]:{};P[y]=f1(_,h),t[O]=P})},c=(h,y)=>m1(y).bind(w=>ht(h,w)).map(w=>z2(y,w));return{registerId:s,unregisterId:h=>{cs(t,(y,w)=>{Mo(y,h)&&delete y[h]})},filterByType:h=>ht(t,h).map(y=>dc(y,(w,_)=>F7(_,w))).getOr([]),find:(h,y,w)=>ht(t,y).bind(_=>Ld(w,O=>c(_,O),h))}},L7=()=>{const t=I7(),s={},c=_=>{const O=_.element;return m1(O).getOrThunk(()=>l_("uid-",_.element))},l=(_,O)=>{const P=s[O];if(P===_)g(_);else throw new Error('The tagId "'+O+'" is already used by: '+bi(P.element)+`
Cannot use it for: `+bi(_.element)+`
The conflicting element is`+(Po(P.element)?" ":" not ")+"already in the DOM")},d=_=>{const O=c(_);_r(s,O)&&l(_,O);const P=[_];t.registerId(P,O,_.events),s[O]=_},g=_=>{m1(_.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(_,O,P)=>t.find(_,O,P),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>ht(s,_)}},Zm=ei({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:R1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Te("components",[]),ba("containerBehaviours",[]),Te("events",{}),Te("domModification",{}),Te("eventOrder",{})]}),_3=t=>{const s=le=>xc(t.element).fold(Pt,Ee=>ss(le,Ee)),c=L7(),l=(le,Ee)=>c.find(s,le,Ee),d=P7(t.element,{triggerEvent:(le,Ee)=>md(le,Ee.target,Se=>$7(l,le,Ee,Se))}),g={debugInfo:W("real"),triggerEvent:(le,Ee,Se)=>{md(le,Ee,et=>kv(l,le,Se,Ee,et))},triggerFocus:(le,Ee)=>{m1(le).fold(()=>{Bi(le)},Se=>{md(rd(),le,et=>(ZB(l,rd(),{originator:Ee,kill:ee,prevent:ee,target:le},le,et),!1))})},triggerEscape:(le,Ee)=>{g.triggerEvent("keydown",le.element,Ee.event)},getByUid:le=>ne(le),getByDom:le=>_e(le),build:ol,buildOrPatch:c0,addToGui:le=>{w(le)},removeFromGui:le=>{_(le)},addToWorld:le=>{h(le)},removeFromWorld:le=>{y(le)},broadcast:le=>{H(le)},broadcastOn:(le,Ee)=>{V(le,Ee)},broadcastEvent:(le,Ee)=>{G(le,Ee)},isConnected:Pt},h=le=>{le.connect(g),mo(le.element)||(c.register(le),Je(le.components(),h),g.triggerEvent(Qp(),le.element,{target:le.element}))},y=le=>{mo(le.element)||(Je(le.components(),y),c.unregister(le)),le.disconnect()},w=le=>{Yd(t,le)},_=le=>{Pm(le)},O=()=>{d.unbind(),Gl(t.element)},P=le=>{const Ee=c.filter(su());Je(Ee,Se=>{const et=Se.descHandler;Ef(et)(le)})},H=le=>{P({universal:!0,data:le})},V=(le,Ee)=>{P({universal:!1,channels:le,data:Ee})},G=(le,Ee)=>{const Se=c.filter(le);return YT(Se,Ee)},ne=le=>c.getById(le).fold(()=>to.error(new Error('Could not find component with uid: "'+le+'" in system.')),to.value),_e=le=>{const Ee=m1(le).getOr("not found");return ne(Ee)};return h(t),{root:t,element:t.element,destroy:O,add:w,remove:_,getByUid:ne,getByDom:_e,addToWorld:h,removeFromWorld:y,broadcast:H,broadcastOn:V,broadcastEvent:G}},XT=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Me(t.items,s.interpreter)}),H7=W([Te("prefix","form-field"),ba("fieldBehaviours",[Xo,Wt])]),A3=W([Hi({schema:[Ye("dom")],name:"label"}),Hi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ye("text")],name:"aria-descriptor"}),Va({factory:{sketch:t=>{const s=wo(t,["factory"]);return t.factory.sketch(s)}},schema:[Ye("factory")],name:"field"})]),z7=(t,s,c,l)=>{const d=va(t.fieldBehaviours,[Xo.config({find:y=>pt(y,t,"field")}),Wt.config({store:{mode:"manual",getValue:y=>Xo.getCurrent(y).bind(Wt.getValue),setValue:(y,w)=>{Xo.getCurrent(y).each(_=>{Wt.setValue(_,w)})}}})]),g=vr([Er((y,w)=>{const _=Ex(y,t,["label","field","aria-descriptor"]);_.field().each(O=>{const P=Ut(t.prefix);_.label().each(H=>{St(H.element,"for",P),St(O.element,"id",P)}),_["aria-descriptor"]().each(H=>{const V=Ut(t.prefix);St(H.element,"id",V),St(O.element,"aria-describedby",V)})})})]),h={getField:y=>pt(y,t,"field"),getLabel:y=>pt(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Hs=pl({name:"FormField",configFields:H7(),partFields:A3(),factory:z7,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var V7=tinymce.util.Tools.resolve("tinymce.html.Entities");const _v=(t,s,c,l)=>{const d=W7(t,s,c,l);return Hs.sketch(d)},U7=(t,s)=>_v(t,s,[],[]),W7=(t,s,c,l)=>({dom:O3(c),components:t.toArray().concat([s]),fieldBehaviours:bt(l)}),Z7=()=>O3([]),O3=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Dp=(t,s)=>Hs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ec(s.translate(t))]}),Vi=Ut("form-component-change"),V2=Ut("form-close"),Rp=Ut("form-cancel"),Jf=Ut("form-action"),Av=Ut("form-submit"),JT=Ut("form-block"),D3=Ut("form-unblock"),jB=Ut("form-tabchange"),GB=Ut("form-resize"),j7=(t,s,c)=>{const l=t.label.map(V=>Dp(V,s)),d=s.icons(),g=V=>{var G;return(G=d[V])!==null&&G!==void 0?G:V},h=V=>(G,ne)=>{gd(ne.event.target,"[data-collection-item-value]").each(_e=>{V(G,ne,_e,_s(_e,"data-collection-item-value"))})},y=(V,G)=>{const ne=Me(G,Ee=>{const Se=Vu.translate(Ee.text),et=t.columns===1?`<div class="tox-collection__item-label">${Se}</div>`:"",$e=`<div class="tox-collection__item-icon">${g(Ee.icon)}</div>`,yt={_:" "," - ":" ","-":" "},Mt=Se.replace(/\_| \- |\-/g,rn=>yt[rn]),Xe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Mt}" class="tox-collection__item${Xe}" tabindex="-1" data-collection-item-value="${V7.encodeAllRaw(Ee.value)}" aria-label="${Mt}">${$e}${et}</div>`}),_e=t.columns!=="auto"&&t.columns>1?pn(ne,t.columns):[ne],le=Me(_e,Ee=>`<div class="tox-collection__group">${Ee.join("")}</div>`);Gh(V.element,le.join(""))},w=h((V,G,ne,_e)=>{G.stop(),s.isDisabled()||Tn(V,Jf,{name:t.name,value:_e})}),_=[Qe(Hd(),h((V,G,ne)=>{Bi(ne)})),Qe(Tg(),w),Qe(cd(),w),Qe(od(),h((V,G,ne)=>{Os(V.element,"."+J1).each(_e=>{Ur(_e,J1)}),yr(ne,J1)})),Qe(zd(),h(V=>{Os(V.element,"."+J1).each(G=>{Ur(G,J1),v1(G)})})),$u(h((V,G,ne,_e)=>{Tn(V,Jf,{name:t.name,value:_e})}))],O=(V,G)=>Me(rl(V.element,".tox-collection__item"),G),P=Hs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Dt},behaviours:bt([Pn.config({disabled:s.isDisabled,onDisabled:V=>{O(V,G=>{yr(G,"tox-collection__item--state-disabled"),St(G,"aria-disabled",!0)})},onEnabled:V=>{O(V,G=>{Ur(G,"tox-collection__item--state-disabled"),oe(G,"aria-disabled")})}}),ta(),Un.config({}),Ua.config({...s.tooltips.getConfig({tooltipText:"",onShow:V=>{Os(V.element,"."+J1+"[data-mce-tooltip]").each(G=>{$(G,"data-mce-tooltip").each(ne=>{Ua.setComponents(V,s.tooltips.getComponents({tooltipText:ne}))})})}}),mode:"children-keyboard-focus",anchor:V=>({type:"node",node:Os(V.element,"."+J1).orThunk(()=>a0(".tox-collection__item")),root:V.element,layouts:{onLtr:W([Mc,ea,Vc,Uc,Rc,Gs]),onRtl:W([Mc,ea,Vc,Uc,Rc,Gs])},bubble:Iu(0,-2,{})})}),Wt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(V,G)=>{y(V,G),t.columns==="auto"&&RT(V,5,"tox-collection__item").each(({numRows:ne,numColumns:_e})=>{gn.setGridSize(V,ne,_e)}),po(V,GB)}}),wr.config({}),gn.config(j8(t.columns,"normal")),io("collection-events",_)]),eventOrder:{[ru()]:["disabling","alloy.base.behaviour","collection-events"],[od()]:["collection-events","tooltipping"]}});return _v(l,P,["tox-form__group--collection"],[])},G7=["input","textarea"],R3=t=>{const s=bs(t);return go(G7,s)},ib=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Ur(c,s.invalidClass),s.notify.each(l=>{R3(t.element)&&St(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{Gh(d,l.validHtml)}),l.onValid(t)})},qB=(t,s,c,l)=>{const d=s.getRoot(t).getOr(t.element);yr(d,s.invalidClass),s.notify.each(g=>{R3(t.element)&&St(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Gh(h,l)}),g.onInvalid(t,l)})},KB=(t,s,c)=>s.validator.fold(()=>bl.pure(to.value(!0)),l=>l.validate(t)),M3=(t,s,c)=>(s.notify.each(l=>{l.onValidate(t)}),KB(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(qB(t,s,c,d),to.error(d)),d=>(ib(t,s),to.value(d))):to.error("No longer in system")));var Sd=Object.freeze({__proto__:null,markValid:ib,markInvalid:qB,query:KB,run:M3,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return hi(c,s.invalidClass)}}),XB=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>vr([Qe(c.onEvent,l=>{M3(l,t,s).get(Dt)})].concat(c.validateOnLoad?[Er(l=>{M3(l,t,s).get(ee)})]:[]))).getOr({})}),q7=[Ye("invalidClass"),Te("getRoot",A.none),Js("notify",[Te("aria","alert"),Te("getContainer",A.none),Te("validHtml",""),Yo("onValid"),Yo("onInvalid"),Yo("onValidate")]),Js("validator",[Ye("validate"),Te("onEvent","input"),Te("validateOnLoad",!0)])];const Qf=Aa({fields:q7,name:"invalidating",active:XB,apis:Sd,extra:{validation:t=>s=>{const c=Wt.getValue(s);return bl.pure(t(c))}}});var JB=Object.freeze({__proto__:null,events:()=>vr([Ww(ly(),Pt)]),exhibit:()=>fi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Ov=Aa({fields:[],name:"unselecting",active:JB}),K7=(t,s)=>wd.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:bt([am.button(s.providers.isDisabled),ta(),Ov.config({}),wr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>bl.nu(l=>t.fetch(l)).map(l=>A.from(xv(ar(v3(Ut("menu-value"),l,d=>{t.onItemAction(c,d)},t.columns,t.presets,om.CLOSE_ON_EXECUTE,co,s.providers),{movement:ZT(t.columns,t.presets)})))),parts:{menu:T2(!1,1,t.presets)}}),QB=Ut("color-input-change"),B3=Ut("color-swatch-change"),eP=Ut("color-picker-cancel"),tP=(t,s,c,l)=>{const d=Hs.parts.field({factory:Q1,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Qf.run(_).get(ee),inputBehaviours:bt([Pn.config({disabled:s.providers.isDisabled}),ta(),wr.config({}),Qf.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>wa(_.element),notify:{onValid:_=>{const O=Wt.getValue(_);Tn(_,QB,{color:O})}},validator:{validateOnLoad:!1,validate:_=>{const O=Wt.getValue(_);if(O.length===0)return bl.pure(to.value(!0));{const P=be.fromTag("span");qt(P,"background-color",O);const H=Ys(P,"background-color").fold(()=>to.error("blah"),V=>to.value(O));return bl.pure(H)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>Dp(_,s.providers)),h=(_,O)=>{Tn(_,B3,{value:O})},y=(_,O)=>{w.getOpt(_).each(P=>{O==="custom"?c.colorPicker(H=>{H.fold(()=>po(P,eP),V=>{h(P,V),VT(t.storageKey,V)})},"#ffffff"):O==="remove"?h(P,""):h(P,O)})},w=Rs(K7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Rc,Vc,Mc],onLtr:()=>[Vc,Rc,Mc]},components:[],fetch:CB(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:y},s));return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:bt([io("form-field-events",[Qe(QB,(_,O)=>{w.getOpt(_).each(P=>{qt(P.element,"background-color",O.event.color)}),Tn(_,Vi,{name:t.name})}),Qe(B3,(_,O)=>{Hs.getField(_).each(P=>{Wt.setValue(P,O.event.value),Xo.getCurrent(_).each(Ln.focus)})}),Qe(eP,(_,O)=>{Hs.getField(_).each(P=>{Xo.getCurrent(_).each(Ln.focus)})})])])})},nP=Hi({schema:[Ye("dom")],name:"label"}),mh=t=>Hi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:vr([Ag(Fo(),(d,g,h)=>l(d,h),[s]),Ag(_l(),(d,g,h)=>l(d,h),[s]),Ag(Ph(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),Y7=mh("top-left"),X7=mh("top"),J7=mh("top-right"),Q7=mh("right"),eH=mh("bottom-right"),tH=mh("bottom"),P3=mh("bottom-left"),nH=mh("left"),oH=Va({name:"thumb",defaults:W({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:vr([Og(Fo(),t,"spectrum"),Og(Tr(),t,"spectrum"),Og(Dc(),t,"spectrum"),Og(_l(),t,"spectrum"),Og(Ph(),t,"spectrum"),Og(Tm(),t,"spectrum")])})}),U2=t=>tm(t.event),sH=Va({schema:[ms("mouseIsDown",()=>fn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,l=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:bt([gn.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,U2(g)),onRight:(d,g)=>c.onRight(d,t,U2(g)),onUp:(d,g)=>c.onUp(d,t,U2(g)),onDown:(d,g)=>c.onDown(d,t,U2(g))}),wr.config({}),Ln.config({})]),events:vr([Qe(Fo(),l),Qe(Tr(),l),Qe(_l(),l),Qe(Ph(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var rH=[nP,nH,Q7,X7,tH,Y7,J7,P3,eH,oH,sH];const W2=W("slider.change.value"),cH=t=>t.type.indexOf("touch")!==-1,$3=t=>{const s=t.event.raw;if(cH(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(l=>pr(l.clientX,l.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(l=>pr(l.clientX,l.clientY)):A.none()}},oP="top",aH="right",sP="bottom",rP="left",ub=t=>t.model.minX,db=t=>t.model.minY,QT=t=>t.model.minX-1,eE=t=>t.model.minY-1,mb=t=>t.model.maxX,fb=t=>t.model.maxY,Z2=t=>t.model.maxX+1,gb=t=>t.model.maxY+1,F3=(t,s,c)=>s(t)-c(t),j2=t=>F3(t,mb,ub),I3=t=>F3(t,fb,db),L3=t=>j2(t)/2,cP=t=>I3(t)/2,Dv=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,aP=t=>t.snapToGrid,lP=t=>t.snapStart,tE=t=>t.rounded,lm=(t,s)=>t[s+"-edge"]!==void 0,iP=t=>lm(t,rP),Rv=t=>lm(t,aH),uP=t=>lm(t,oP),nE=t=>lm(t,sP),fh=t=>t.model.value.get(),Mp=(t,s)=>({x:t,y:s}),im=(t,s)=>{Tn(t,W2(),{value:s})},dP=(t,s)=>{im(t,Mp(QT(s),eE(s)))},lH=(t,s)=>{im(t,eE(s))},H3=(t,s)=>{im(t,Mp(L3(s),eE(s)))},z3=(t,s)=>{im(t,Mp(Z2(s),eE(s)))},V3=(t,s)=>{im(t,Z2(s))},iH=(t,s)=>{im(t,Mp(Z2(s),cP(s)))},Uu=(t,s)=>{im(t,Mp(Z2(s),gb(s)))},uH=(t,s)=>{im(t,gb(s))},dH=(t,s)=>{im(t,Mp(L3(s),gb(s)))},mP=(t,s)=>{im(t,Mp(QT(s),gb(s)))},fP=(t,s)=>{im(t,QT(s))},mH=(t,s)=>{im(t,Mp(QT(s),cP(s)))},U3=(t,s,c,l)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-l),W3=(t,s,c,l)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+l),gP=(t,s,c)=>Math.max(s,Math.min(c,t)),fH=(t,s,c,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return gP(s+h,s-1,c+1)},g=>{const h=(t-g)%l,y=Math.round(h/l),w=Math.floor((t-g)/l),_=Math.floor((c-g)/l),O=Math.min(_,w+y),P=g+O*l;return Math.max(g,P)}),gH=(t,s,c)=>Math.min(c,Math.max(t,s))-s,hP=t=>{const{min:s,max:c,range:l,value:d,step:g,snap:h,snapStart:y,rounded:w,hasMinEdge:_,hasMaxEdge:O,minBound:P,maxBound:H,screenRange:V}=t,G=_?s-1:s,ne=O?c+1:c;if(d<P)return G;if(d>H)return ne;{const _e=gH(d,P,H),le=gP(_e/V*l+s,G,ne);return h&&le>=s&&le<=c?fH(le,s,c,g,y):w?Math.round(le):le}},Z3=t=>{const{min:s,max:c,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:y,maxOffset:w,centerMinEdge:_,centerMaxEdge:O}=t;return d<s?g?0:_:d>c?h?y:O:(d-s)/l*w},j3="top",pP="right",bP="bottom",oE="left",G3="width",vP="height",jm=t=>t.element.dom.getBoundingClientRect(),xd=(t,s)=>t[s],G2=t=>{const s=jm(t);return xd(s,oE)},sE=t=>{const s=jm(t);return xd(s,pP)},rE=t=>{const s=jm(t);return xd(s,j3)},cE=t=>{const s=jm(t);return xd(s,bP)},hb=t=>{const s=jm(t);return xd(s,G3)},q3=t=>{const s=jm(t);return xd(s,vP)},K3=(t,s,c)=>(t+s)/2-c,Y3=(t,s)=>{const c=jm(t),l=jm(s),d=xd(c,oE),g=xd(c,pP),h=xd(l,oE);return K3(d,g,h)},yP=(t,s)=>{const c=jm(t),l=jm(s),d=xd(c,j3),g=xd(c,bP),h=xd(l,j3);return K3(d,g,h)},aE=(t,s)=>{Tn(t,W2(),{value:s})},Mv=(t,s,c)=>{const l={min:ub(s),max:mb(s),range:j2(s),value:c,step:Dv(s),snap:aP(s),snapStart:lP(s),rounded:tE(s),hasMinEdge:iP(s),hasMaxEdge:Rv(s),minBound:G2(t),maxBound:sE(t),screenRange:hb(t)};return hP(l)},hH=(t,s,c)=>{const l=Mv(t,s,c);return aE(t,l),l},pH=(t,s)=>{const c=ub(s);aE(t,c)},CP=(t,s)=>{const c=mb(s);aE(t,c)},wP=(t,s,c,l)=>{const g=(t>0?W3:U3)(fh(c),ub(c),mb(c),Dv(c,l));return aE(s,g),A.some(g)},lE=t=>(s,c,l)=>wP(t,s,c,l).map(Pt),SP=t=>$3(t).map(c=>c.left),Ti=(t,s,c,l,d)=>{const h=hb(t),y=l.bind(O=>A.some(Y3(O,t))).getOr(0),w=d.bind(O=>A.some(Y3(O,t))).getOr(h),_={min:ub(s),max:mb(s),range:j2(s),value:c,hasMinEdge:iP(s),hasMaxEdge:Rv(s),minBound:G2(t),minOffset:0,maxBound:sE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return Z3(_)},iE=(t,s,c,l,d,g)=>{const h=Ti(s,g,c,l,d);return G2(s)-G2(t)+h},bH=(t,s,c,l)=>{const d=fh(c),g=iE(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),c),h=ia(s.element)/2;qt(s.element,"left",g-h+"px")},vH=lE(-1),xP=lE(1),yH=A.none,CH=A.none,wH={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(V3),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(fP)};var TP=Object.freeze({__proto__:null,setValueFrom:hH,setToMin:pH,setToMax:CP,findValueOfOffset:Mv,getValueFromEvent:SP,findPositionOfValue:iE,setPositionFromValue:bH,onLeft:vH,onRight:xP,onUp:yH,onDown:CH,edgeActions:wH});const Td=(t,s)=>{Tn(t,W2(),{value:s})},q2=(t,s,c)=>{const l={min:db(s),max:fb(s),range:I3(s),value:c,step:Dv(s),snap:aP(s),snapStart:lP(s),rounded:tE(s),hasMinEdge:uP(s),hasMaxEdge:nE(s),minBound:rE(t),maxBound:cE(t),screenRange:q3(t)};return hP(l)},EP=(t,s,c)=>{const l=q2(t,s,c);return Td(t,l),l},uE=(t,s)=>{const c=db(s);Td(t,c)},X3=(t,s)=>{const c=fb(s);Td(t,c)},SH=(t,s,c,l)=>{const g=(t>0?W3:U3)(fh(c),db(c),fb(c),Dv(c,l));return Td(s,g),A.some(g)},kP=t=>(s,c,l)=>SH(t,s,c,l).map(Pt),xH=t=>$3(t).map(c=>c.top),TH=(t,s,c,l,d)=>{const h=q3(t),y=l.bind(O=>A.some(yP(O,t))).getOr(0),w=d.bind(O=>A.some(yP(O,t))).getOr(h),_={min:db(s),max:fb(s),range:I3(s),value:c,hasMinEdge:uP(s),hasMaxEdge:nE(s),minBound:rE(t),minOffset:0,maxBound:cE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return Z3(_)},J3=(t,s,c,l,d,g)=>{const h=TH(s,g,c,l,d);return rE(s)-rE(t)+h},EH=(t,s,c,l)=>{const d=fh(c),g=J3(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),c),h=ur(s.element)/2;qt(s.element,"top",g-h+"px")},kH=A.none,_P=A.none,_H=kP(-1),eg=kP(1),dE={"top-left":A.none(),top:A.some(lH),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(uH),"bottom-left":A.none(),left:A.none()};var AH=Object.freeze({__proto__:null,setValueFrom:EP,setToMin:uE,setToMax:X3,findValueOfOffset:q2,getValueFromEvent:xH,findPositionOfValue:J3,setPositionFromValue:EH,onLeft:kH,onRight:_P,onUp:_H,onDown:eg,edgeActions:dE});const mE=(t,s)=>{Tn(t,W2(),{value:s})},K2=(t,s)=>({x:t,y:s}),AP=(t,s,c)=>{const l=Mv(t,s,c.left),d=q2(t,s,c.top),g=K2(l,d);return mE(t,g),g},Q3=(t,s,c,l,d)=>{const g=t>0?W3:U3,h=s?fh(l).x:g(fh(l).x,ub(l),mb(l),Dv(l,d)),y=s?g(fh(l).y,db(l),fb(l),Dv(l,d)):fh(l).y;return mE(c,K2(h,y)),A.some(h)},pb=(t,s)=>(c,l,d)=>Q3(t,s,c,l,d).map(Pt),Y2=(t,s)=>{const c=ub(s),l=db(s);mE(t,K2(c,l))},X2=(t,s)=>{const c=mb(s),l=fb(s);mE(t,K2(c,l))},OP=t=>$3(t),DP=(t,s,c,l)=>{const d=fh(c),g=iE(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),c),h=J3(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),c),y=ia(s.element)/2,w=ur(s.element)/2;qt(s.element,"left",g-y+"px"),qt(s.element,"top",h-w+"px")},RP=pb(-1,!1),MP=pb(1,!1),OH=pb(-1,!0),DH=pb(1,!0),RH={"top-left":A.some(dP),top:A.some(H3),"top-right":A.some(z3),right:A.some(iH),"bottom-right":A.some(Uu),bottom:A.some(dH),"bottom-left":A.some(mP),left:A.some(mH)};var MH=Object.freeze({__proto__:null,setValueFrom:AP,setToMin:Y2,setToMax:X2,getValueFromEvent:OP,setPositionFromValue:DP,onLeft:RP,onRight:MP,onUp:OH,onDown:DH,edgeActions:RH});const NH=[Te("stepSize",1),Te("speedMultiplier",10),Te("onChange",ee),Te("onChoose",ee),Te("onInit",ee),Te("onDragStart",ee),Te("onDragEnd",ee),Te("snapToGrid",!1),Te("rounded",!0),us("snapStart"),is("model",Hc("mode",{x:[Te("minX",0),Te("maxX",100),ms("value",t=>fn(t.mode.minX)),Ye("getInitialValue"),Cr("manager",TP)],y:[Te("minY",0),Te("maxY",100),ms("value",t=>fn(t.mode.minY)),Ye("getInitialValue"),Cr("manager",AH)],xy:[Te("minX",0),Te("maxX",100),Te("minY",0),Te("maxY",100),ms("value",t=>fn({x:t.mode.minX,y:t.mode.minY})),Ye("getInitialValue"),Cr("manager",MH)]})),ba("sliderBehaviours",[gn,Wt]),ms("mouseIsDown",()=>fn(!1))],Ed=pl({name:"Slider",configFields:NH,partFields:rH,factory:(t,s,c,l)=>{const d=$e=>Pl($e,t,"thumb"),g=$e=>Pl($e,t,"spectrum"),h=$e=>pt($e,t,"left-edge"),y=$e=>pt($e,t,"right-edge"),w=$e=>pt($e,t,"top-edge"),_=$e=>pt($e,t,"bottom-edge"),O=t.model,P=O.manager,H=($e,yt)=>{P.setPositionFromValue($e,yt,t,{getLeftEdge:h,getRightEdge:y,getTopEdge:w,getBottomEdge:_,getSpectrum:g})},V=($e,yt)=>{O.value.set(yt);const Mt=d($e);H($e,Mt)},G=($e,yt)=>{V($e,yt);const Mt=d($e);return t.onChange($e,Mt,yt),A.some(!0)},ne=$e=>{P.setToMin($e,t)},_e=$e=>{P.setToMax($e,t)},le=$e=>{const yt=()=>{pt($e,t,"thumb").each(Xe=>{const rn=O.value.get();t.onChoose($e,Xe,rn)})},Mt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Mt&&yt()},Ee=($e,yt)=>{yt.stop(),t.mouseIsDown.set(!0),t.onDragStart($e,d($e))},Se=($e,yt)=>{yt.stop(),t.onDragEnd($e,d($e)),le($e)},et=$e=>{pt($e,t,"spectrum").map(gn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.sliderBehaviours,[gn.config({mode:"special",focusIn:et}),Wt.config({store:{mode:"manual",getValue:$e=>O.value.get(),setValue:V}}),Ql.config({channels:{[A1()]:{onReceive:le}}})]),events:vr([Qe(W2(),($e,yt)=>{G($e,yt.event.value)}),Er(($e,yt)=>{const Mt=O.getInitialValue();O.value.set(Mt);const Xe=d($e);H($e,Xe);const rn=g($e);t.onInit($e,Xe,rn,O.value.get())}),Qe(Fo(),Ee),Qe(Dc(),Se),Qe(_l(),($e,yt)=>{et($e),Ee($e,yt)}),Qe(Tm(),Se)]),apis:{resetToMin:ne,resetToMax:_e,setValue:V,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),eO=Ut("rgb-hex-update"),tO=Ut("slider-update"),NP=Ut("palette-update"),BP=(t,s)=>{const c=Ed.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Ed.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ed.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:W(0)},components:[c,l],sliderBehaviours:bt([Ln.config({})]),onChange:(d,g,h)=>{St(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Tn(d,tO,{value:h})}})},Nv="form",PH=[ba("formBehaviours",[Wt])],nO=t=>"<alloy.field."+t+">",$H=t=>{const s=(()=>{const g=[];return{field:(y,w)=>(g.push(y),Tx(Nv,nO(y),w)),record:W(g)}})(),c=t(s),l=s.record(),d=Me(l,g=>Va({name:g,pname:nO(g)}));return Im(Nv,PH,d,IH,c)},FH=(t,s)=>t.fold(()=>to.error(s),to.value),IH=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:va(t.formBehaviours,[Wt.config({store:{mode:"manual",getValue:c=>{const l=GC(c,t);return ns(l,(d,g)=>d().bind(h=>{const y=Xo.getCurrent(h);return FH(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+bi(h.element)))}).map(Wt.getValue))},setValue:(c,l)=>{cs(l,(d,g)=>{pt(c,t,g).each(h=>{Xo.getCurrent(h).each(y=>{Wt.setValue(y,d)})})})}}})]),apis:{getField:(c,l)=>pt(c,t,l).bind(Xo.getCurrent)}}),Bv={getField:Xh((t,s,c)=>t.getField(s,c)),sketch:$H},oO=Ut("valid-input"),PP=Ut("invalid-input"),sO=Ut("validating-input"),J2="colorcustom.rgb.",gh=(t,s,c,l)=>{const d=(H,V)=>Qf.config({invalidClass:s("invalid"),notify:{onValidate:G=>{Tn(G,sO,{type:H})},onValid:G=>{Tn(G,oO,{type:H,value:Wt.getValue(G)})},onInvalid:G=>{Tn(G,PP,{type:H,value:Wt.getValue(G)})}},validator:{validate:G=>{const ne=Wt.getValue(G),_e=V(ne)?to.value(!0):to.error(t("aria.input.invalid"));return bl.pure(_e)},validateOnLoad:!1}}),g=(H,V,G,ne,_e)=>{const le=t(J2+"range"),Ee=Hs.parts.label({dom:{tag:"label",attributes:{"aria-label":ne}},components:[ec(G)]}),Se=Hs.parts.field({data:_e,factory:Q1,inputAttributes:{type:"text",...V==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:bt([d(V,H),wr.config({})]),onSetValue:Mt=>{Qf.isInvalid(Mt)&&Qf.run(Mt).get(ee)}}),et=[Ee,Se],$e=V!=="hex"?[Hs.parts["aria-descriptor"]({text:le})]:[],yt=et.concat($e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:yt}},h=(H,V)=>{const G=B2(V);return Bv.getField(H,"hex").each(ne=>{Ln.isFocused(ne)||Wt.setValue(H,{hex:G.value})}),G},y=(H,V)=>{const G=V.red,ne=V.green,_e=V.blue;Wt.setValue(H,{red:G,green:ne,blue:_e})},w=Rs({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(H,V)=>{w.getOpt(H).each(G=>{qt(G.element,"background-color","#"+V.value)})};return ei({factory:()=>{const H={red:fn(A.some(255)),green:fn(A.some(255)),blue:fn(A.some(255)),hex:fn(A.some("ffffff"))},V=(Sn,gs)=>{const rs=P2(gs);y(Sn,rs),le(rs)},G=Sn=>H[Sn].get(),ne=(Sn,gs)=>{H[Sn].set(gs)},_e=()=>G("red").bind(Sn=>G("green").bind(gs=>G("blue").map(rs=>rb(Sn,gs,rs,1)))),le=Sn=>{const gs=Sn.red,rs=Sn.green,Bo=Sn.blue;ne("red",A.some(gs)),ne("green",A.some(rs)),ne("blue",A.some(Bo))},Ee=(Sn,gs)=>{const rs=gs.event;rs.type!=="hex"?ne(rs.type,A.none()):l(Sn)},Se=(Sn,gs)=>{c(Sn);const rs=i3(gs);ne("hex",A.some(rs.value));const Bo=P2(rs);y(Sn,Bo),le(Bo),Tn(Sn,eO,{hex:rs}),_(Sn,rs)},et=(Sn,gs,rs)=>{const Bo=parseInt(rs,10);ne(gs,A.some(Bo)),_e().each(kt=>{const Jt=h(Sn,kt);Tn(Sn,eO,{hex:Jt}),_(Sn,Jt)})},$e=Sn=>Sn.type==="hex",yt=(Sn,gs)=>{const rs=gs.event;$e(rs)?Se(Sn,rs.value):et(Sn,rs.type,rs.value)},Mt=Sn=>({label:t(J2+Sn+".label"),description:t(J2+Sn+".description")}),Xe=Mt("red"),rn=Mt("green"),Zt=Mt("blue"),On=Mt("hex");return ar(Bv.sketch(Sn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Sn.field("red",Hs.sketch(g(d3,"red",Xe.label,Xe.description,255))),Sn.field("green",Hs.sketch(g(d3,"green",rn.label,rn.description,255))),Sn.field("blue",Hs.sketch(g(d3,"blue",Zt.label,Zt.description,255))),Sn.field("hex",Hs.sketch(g(KN,"hex",On.label,On.description,"ffffff"))),w.asSpec()],formBehaviours:bt([Qf.config({invalidClass:s("form-invalid")}),io("rgb-form-events",[Qe(oO,yt),Qe(PP,Ee),Qe(sO,Ee)])])})),{apis:{updateHex:(Sn,gs)=>{Wt.setValue(Sn,{hex:gs.value}),V(Sn,gs),_(Sn,gs)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(H,V,G)=>{H.updateHex(V,G)}},extraApis:{}})},rO=(t,s)=>{const c=Ed.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Ed.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,O)=>{const{width:P,height:H}=_,V=_.getContext("2d");if(V===null)return;V.fillStyle=O,V.fillRect(0,0,P,H);const G=V.createLinearGradient(0,0,P,0);G.addColorStop(0,"rgba(255,255,255,1)"),G.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=G,V.fillRect(0,0,P,H);const ne=V.createLinearGradient(0,0,0,H);ne.addColorStop(0,"rgba(0,0,0,0)"),ne.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=ne,V.fillRect(0,0,P,H)},g=(_,O)=>{const P=_.components()[0].element.dom,H=lb(O,100,100),V=tB(H);d(P,oB(V))},h=(_,O)=>{const P=UT(P2(O));Ed.setValue(_,{x:P.saturation,y:100-P.value}),St(_.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",P.saturation,P.value]))};return ei({factory:_=>{const O=W({x:0,y:0}),P=(G,ne,_e)=>{zn(_e)||St(G.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(_e.x),Math.floor(100-_e.y)])),Tn(G,NP,{value:_e})},H=(G,ne,_e,le)=>{d(_e.element.dom,oB(sB))},V=bt([Xo.config({find:A.some}),Ln.config({})]);return Ed.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,l],onChange:P,onInit:H,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,O,P)=>{g(O,P)},setThumb:(_,O,P)=>{h(O,P)}},extraApis:{}})},$P=(t,s)=>{const c=d=>{const g=gh(t,s,d.onValidHex,d.onInvalidHex),h=rO(t,s),y=yt=>(100-yt)/100*360,w=yt=>100-yt/360*100,_={paletteRgba:fn(sB),paletteHue:fn(0)},O=Rs(BP(t,s)),P=Rs(h.sketch({})),H=Rs(g.sketch({})),V=(yt,Mt,Xe)=>{P.getOpt(yt).each(rn=>{h.setHue(rn,Xe)})},G=(yt,Mt)=>{H.getOpt(yt).each(Xe=>{g.updateHex(Xe,Mt)})},ne=(yt,Mt,Xe)=>{O.getOpt(yt).each(rn=>{Ed.setValue(rn,w(Xe))})},_e=(yt,Mt)=>{P.getOpt(yt).each(Xe=>{h.setThumb(Xe,Mt)})},le=(yt,Mt)=>{const Xe=P2(yt);_.paletteRgba.set(Xe),_.paletteHue.set(Mt)},Ee=(yt,Mt,Xe,rn)=>{le(Mt,Xe),Je(rn,Zt=>{Zt(yt,Mt,Xe)})},Se=()=>{const yt=[G];return(Mt,Xe)=>{const rn=Xe.event.value,Zt=_.paletteHue.get(),On=lb(Zt,rn.x,100-rn.y),Sn=mB(On);Ee(Mt,Sn,Zt,yt)}},et=()=>{const yt=[V,G];return(Mt,Xe)=>{const rn=y(Xe.event.value),Zt=_.paletteRgba.get(),On=UT(Zt),Sn=lb(rn,On.saturation,On.value),gs=mB(Sn);Ee(Mt,gs,rn,yt)}},$e=()=>{const yt=[V,ne,_e];return(Mt,Xe)=>{const rn=Xe.event.hex,Zt=P8(rn);Ee(Mt,rn,Zt.hue,yt)}};return{uid:d.uid,dom:d.dom,components:[P.asSpec(),O.asSpec(),H.asSpec()],behaviours:bt([io("colour-picker-events",[Qe(eO,$e()),Qe(NP,Se()),Qe(tO,et())]),Xo.config({find:yt=>H.getOpt(yt)}),gn.config({mode:"acyclic"})])}};return ei({name:"ColourPicker",configFields:[Ye("dom"),Te("onValidHex",ee),Te("onInvalidHex",ee)],factory:c})},vu={self:()=>Xo.config({find:A.some}),memento:t=>Xo.config({find:t.getOpt}),childAt:t=>Xo.config({find:s=>Sa(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},IP=Dn([Te("preprocess",Dt),Te("postprocess",Dt)]),LP=(t,s)=>{const c=el("RepresentingConfigs.memento processors",IP,s);return Wt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=Wt.getValue(d);return c.postprocess(g)},setValue:(l,d)=>{const g=c.preprocess(d),h=t.get(l);Wt.setValue(h,g)}}})},bb=(t,s,c)=>Wt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:c}}),HP=(t,s,c)=>bb(t,l=>s(l.element),(l,d)=>c(l.element,d)),zH=t=>HP(t,Jl,Gh),fE=t=>Wt.config({store:{mode:"memory",initialValue:t}}),VH={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},zP=t=>s=>We(s)?t.translate(VH[s]):t.translate(s),VP=(t,s,c)=>{const l=w=>"tox-"+w,d=$P(zP(s),l),g=w=>{Tn(w,Jf,{name:"hex-valid",value:!0})},h=w=>{Tn(w,Jf,{name:"hex-valid",value:!1})},y=Rs(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:h}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:bt([bb(c,w=>{const _=y.get(w);return Xo.getCurrent(_).bind(H=>Wt.getValue(H).hex).map(H=>"#"+qa(H,"#")).getOr("")},(w,_)=>{const O=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=A.from(O.exec(_)).bind(G=>Vo(G,1)),H=y.get(w);Xo.getCurrent(H).fold(()=>{console.log("Can not find form")},G=>{Wt.setValue(G,{hex:P.getOr("")}),Bv.getField(G,"hex").each(ne=>{po(ne,Vd())})})}),vu.self()])}};var UH=tinymce.util.Tools.resolve("tinymce.Resource");const UP=t=>Mo(t,"init"),WH=t=>{const s=Fs(),c=Rs({dom:{tag:t.tag}}),l=Fs(),d=!UP(t)&&t.onFocus.isSome()?[Ln.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),wr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:bt([io("custom-editor-events",[Er(g=>{c.getOpt(g).each(h=>{(UP(t)?t.init(h.element.dom):UH.load(t.scriptId,t.scriptUrl).then(y=>y(h.element.dom,t.settings))).then(y=>{l.on(w=>{y.setValue(w)}),l.clear(),s.set(y)})})})]),bb(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),y=>y.setValue(h))}),vu.self()].concat(d)),components:[c.asSpec()]}};var um=tinymce.util.Tools.resolve("tinymce.util.Tools");const ZH=(t,s)=>{const c=um.explode(s.getOption("images_file_types")),l=d=>Vs(c,g=>mc(d.name.toLowerCase(),`.${g.toLowerCase()}`));return ao(Us(t),l)},jH=(t,s,c)=>{const l=(H,V)=>{V.stop()},d=H=>(V,G)=>{Je(H,ne=>{ne(V,G)})},g=(H,V)=>{var G;if(!Pn.isDisabled(H)){const ne=V.event.raw;y(H,(G=ne.dataTransfer)===null||G===void 0?void 0:G.files)}},h=(H,V)=>{const G=V.event.raw.target;y(H,G.files)},y=(H,V)=>{V&&(Wt.setValue(H,ZH(V,s)),Tn(H,Vi,{name:t.name}))},w=Rs({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:bt([io("input-file-events",[ld(Tg()),ld(cd())])])}),_=H=>({uid:H.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:bt([fE(c.getOr([])),vu.self(),Pn.config({}),So.config({toggleClass:"dragenter",toggleOnExecute:!1}),io("dropzone-events",[Qe("dragenter",d([l,So.toggle])),Qe("dragleave",d([l,So.toggle])),Qe("dragover",l),Qe("drop",d([l,g])),Qe($h(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[ec(s.translate("Drop an image here"))]},cl.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[ec(s.translate("Browse for an image")),w.asSpec()],action:V=>{w.get(V).element.dom.click()},buttonBehaviours:bt([wr.config({}),am.button(s.isDisabled),ta()])})]}]}),O=t.label.map(H=>Dp(H,s)),P=Hs.parts.field({factory:{sketch:_}});return _v(O,P,["tox-form__group--stretched"],[])},WP=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Me(t.items,s.interpreter)}),ZP=(t,s)=>{let c=null,l=null;return{cancel:()=>{Do(c)||(clearTimeout(c),c=null,l=null)},throttle:(...h)=>{l=h,Do(c)&&(c=setTimeout(()=>{const y=l;c=null,l=null,t.apply(null,y)},s))}}},GH=(t,s)=>{let c=null;return{cancel:()=>{Do(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Do(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},cO=(t,s)=>{let c=null;const l=()=>{Do(c)||(clearTimeout(c),c=null)};return{cancel:l,throttle:(...g)=>{l(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},Q2=Ut("alloy-fake-before-tabstop"),aO=Ut("alloy-fake-after-tabstop"),lO=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:bt([Ln.config({ignore:!0}),wr.config({})])}),jP=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[lO([Q2]),s,lO([aO])],behaviours:bt([vu.childAt(1)])}),GP=(t,s)=>{Tn(t,Pu(),{raw:{which:9,shiftKey:s}})},qH=(t,s)=>{const c=s.element;hi(c,Q2)?GP(t,!0):hi(c,aO)&&GP(t,!1)},Pv=t=>H2(t,["."+Q2,"."+aO].join(","),co),ew=Ut("update-dialog"),qP=Ut("update-title"),KP=Ut("update-body"),YP=Ut("update-footer"),XP=Ut("body-send-message"),tw=Ut("dialog-focus-shifted"),iO=ul().browser,$v=iO.isSafari(),KH=iO.isFirefox(),JP=$v||KH,YH=iO.isChromium(),XH=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,QP=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),JH=(t,s)=>{const c=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!YH&&!$v||Wn(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},e5=(t,s,c)=>{const l=t.dom;A.from(l.contentDocument).fold(c,d=>{let g=0;const h=JH(d,s).map(w=>(g=w.scrollTop,w)).forall(XH),y=()=>{const w=l.contentWindow;Wn(w)&&(h?QP(w,"bottom"):!h&&JP&&g!==0&&QP(w,g))};$v&&l.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),$v||y()})},QH=un(JP,$v?500:200).map(t=>ZP(e5,t)),uO=(t,s)=>{const c=fn(t.getOr(""));return{getValue:l=>c.get(),setValue:(l,d)=>{if(c.get()!==d){const g=l.element,h=()=>St(g,"srcdoc",d);s?QH.fold(W(e5),y=>y.throttle)(g,d,h):h()}c.set(d)}}},e9=(t,s,c)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(P=>({title:P})).getOr({}),...c.map(P=>({srcdoc:P})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=uO(c,t.streamContent),w=t.label.map(P=>Dp(P,s)),_=P=>jP(A.from(g),{uid:P.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:bt([wr.config({}),Ln.config({}),bb(c,y.getValue,y.setValue),Ql.config({channels:{[tw]:{onReceive:(H,V)=>{V.newFocus.each(G=>{wa(H.element).each(ne=>{(ss(H.element,G)?yr:Ur)(ne,"tox-navobj-bordered-focus")})})}}}})])}),O=Hs.parts.field({factory:{sketch:_}});return _v(w,O,["tox-form__group--stretched"],[])},t9=t=>new Promise((s,c)=>{const l=()=>{g(),s(t)},d=[Nl(t,"load",l),Nl(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>Je(d,h=>h.unbind());t.dom.complete&&l()}),n9=(t,s,c,l,d)=>{const g=c*d,h=l*d,y=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:y.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},nw=(t,s,c)=>{const l=ia(t),d=ur(t);return Math.min(l/s,d/c,1)},dO=(t,s)=>{const c=fn(s.getOr({url:""})),l=Rs({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=Rs({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(w,_)=>{const O={url:_.url};_.zoom.each(H=>O.zoom=H),_.cachedWidth.each(H=>O.cachedWidth=H),_.cachedHeight.each(H=>O.cachedHeight=H),c.set(O);const P=()=>{const{cachedWidth:H,cachedHeight:V,zoom:G}=O;if(!Nn(H)&&!Nn(V)){if(Nn(G)){const _e=nw(w.element,H,V);O.zoom=_e}const ne=n9(ia(w.element),ur(w.element),H,V,O.zoom);d.getOpt(w).each(_e=>{or(_e.element,ne)})}};l.getOpt(w).each(H=>{const V=H.element;_.url!==_s(V,"src")&&(St(V,"src",_.url),Ur(w.element,"tox-imagepreview__loaded")),P(),t9(V).then(G=>{w.getSystem().isConnected()&&(yr(w.element,"tox-imagepreview__loaded"),O.cachedWidth=G.dom.naturalWidth,O.cachedHeight=G.dom.naturalHeight,P())})})},h={};t.height.each(w=>h.height=w);const y=s.map(w=>({url:w.url,zoom:A.from(w.zoom),cachedWidth:A.from(w.cachedWidth),cachedHeight:A.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:bt([vu.self(),bb(y,()=>c.get(),g)])}},o9=(t,s,c)=>{const l="tox-label",d=t.align==="center"?[`${l}--center`]:[],g=t.align==="end"?[`${l}--end`]:[],h=Rs({dom:{tag:"label",classes:[l,...d,...g]},components:[ec(s.providers.translate(t.label))]}),y=Me(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...y],behaviours:bt([vu.self(),Un.config({}),zH(A.none()),gn.config({mode:"acyclic"}),io("label",[Er(w=>{t.for.each(_=>{c(_).each(O=>{h.getOpt(w).each(P=>{var H;const V=(H=_s(O.element,"id"))!==null&&H!==void 0?H:Ut("form-field");St(O.element,"id",V),St(P.element,"for",V)})})})})])])}},t5=Ut("toolbar.button.execute"),mO=t=>$u((s,c)=>{NT(t,s)(l=>{Tn(s,t5,{buttonApi:l}),t.onAction(l)})}),vb=Ut("common-button-display-events"),gE={[ru()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Al()]:["toolbar-button-events",vb],[cu()]:["toolbar-button-events","dropdown-events","tooltipping"],[_l()]:["focusing","alloy.base.behaviour",vb]},hE=t=>qt(t.element,"width",$s(t.element,"width")),n5=(t,s,c)=>zi(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),fO=(t,s)=>n5(t,s,[]),hh=(t,s)=>n5(t,s,[Un.config({})]),gO=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[ec(c.translate(t))],behaviours:bt([Un.config({})])}),kd=Ut("update-menu-text"),Np=Ut("update-menu-icon"),pE=(t,s,c,l)=>{const d=fn(ee),g=t.text.map(ne=>Rs(gO(ne,s,c.providers))),h=t.icon.map(ne=>Rs(hh(ne,c.providers.icons))),y=(ne,_e)=>{const le=Wt.getValue(ne);return Ln.focus(le),Tn(le,"keydown",{raw:_e.event.raw}),wd.close(le),A.some(!0)},w=t.role.fold(()=>({}),ne=>({role:ne})),_=A.from(t.listRole).map(ne=>({listRole:ne})).getOr({}),O=t.ariaLabel.fold(()=>({}),ne=>({"aria-label":c.providers.translate(ne)})),P=zi("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),H=Ut("common-button-display-events"),V="dropdown-events";return Rs(wd.sketch({...t.uid?{uid:t.uid}:{},...w,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(Me(t.classes,ne=>`${s}--${ne}`)),attributes:{...O,...Wn(l)?{"data-mce-name":l}:{}}},components:ob([h.map(ne=>ne.asSpec()),g.map(ne=>ne.asSpec()),A.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(ne,_e,le)=>{t.searchable&&qT(le)},dropdownBehaviours:bt([...t.dropdownBehaviours,am.button(()=>t.disabled||c.providers.isDisabled()),ta(),Ov.config({}),Un.config({}),...t.tooltip.map(ne=>Ua.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(ne)}))).toArray(),io(V,[dh(t,d),Il(t,d)]),io(H,[Er((ne,_e)=>hE(ne))]),io("menubutton-update-display-text",[Qe(kd,(ne,_e)=>{g.bind(le=>le.getOpt(ne)).each(le=>{Un.set(le,[ec(c.providers.translate(_e.event.text))])})}),Qe(Np,(ne,_e)=>{h.bind(le=>le.getOpt(ne)).each(le=>{Un.set(le,[hh(_e.event.icon,c.providers.icons)])})})])]),eventOrder:ar(gE,{[_l()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Al()]:["toolbar-button-events",Ua.name(),V,H]}),sandboxBehaviours:bt([gn.config({mode:"special",onLeft:y,onRight:y}),io("dropdown-sandbox-events",[Qe(pN,(ne,_e)=>{C7(ne),_e.stop()}),Qe(bN,(ne,_e)=>{w7(ne,_e),_e.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...T2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:L2,onCollapseMenu:(ne,_e,le)=>{Nt.getHighlighted(le).each(Ee=>{L2(ne,le,Ee)})},onDehighlightItem:T7}}},getAnchorOverrides:()=>({maxHeightFunction:(ne,_e)=>{v0()(ne,_e-10)}}),fetch:ne=>bl.nu(xn(t.fetch,ne))})).asSpec()},s9=t=>We(t),hO=t=>t.type==="separator",o5=t=>Mo(t,"getSubmenuItems"),s5={type:"separator"},r9=(t,s)=>{const c=zo(t,(l,d)=>s9(d)?d===""?l:d==="|"?l.length>0&&!hO(l[l.length-1])?l.concat([s5]):l:Mo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return c.length>0&&hO(c[c.length-1])&&c.pop(),c},c9=(t,s)=>{const c=t.getSubmenuItems(),l=pO(c,s),d=ar(l.menus,{[t.value]:l.items}),g=ar(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},a9=t=>{const s=ht(t,"value").getOrThunk(()=>Ut("generated-menu-item"));return ar({value:s},t)},pO=(t,s)=>{const c=r9(We(t)?t.split(" "):t,s);return bo(c,(l,d)=>{if(o5(d)){const g=a9(d),h=c9(g,s);return{menus:ar(l.menus,h.menus),items:[h.item,...l.items],expansions:ar(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},l9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),r5=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Fv=(t,s,c,l)=>{const d=Ut("primary-menu"),g=pO(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=l9(l),y=A7(d,g.items,s,c,l.isHorizontalMenu,h),w=r5(l),_=ns(g.menus,(P,H)=>A7(H,P,s,c,!1,w)),O=ar(_,As(d,y));return A.from(j1.tieredData(d,O,g.expansions))},bE=t=>!Mo(t,"items"),vE="data-value",c5=(t,s,c,l,d)=>Me(c,g=>bE(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{Wt.setValue(t,g.value),Tn(t,Vi,{name:s}),Ln.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>c5(t,s,g.items,l,d)}),bO=(t,s)=>Bs(t,c=>bE(c)?un(c.value===s,c):bO(c.items,s)),i9=(t,s,c)=>{const l=Vs(t.items,_=>!bE(_)),d=s.shared.providers,g=c.bind(_=>bO(t.items,_)).orThunk(()=>xs(t.items).filter(bE)),h=t.label.map(_=>Dp(_,d)),y=Hs.parts.field({dom:{},factory:{sketch:_=>pE({uid:_.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:un(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,P)=>{const H=c5(O,t.name,t.items,Wt.getValue(O),l);P(Fv(H,om.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:W(ee),getApi:W({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[wr.config({}),bb(g.map(O=>O.value),O=>_s(O.element,vE),(O,P)=>{bO(t.items,P).each(H=>{St(O.element,vE,H.value),Tn(O,kd,{text:H.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[y]};return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:je([h.toArray(),[w]]),fieldBehaviours:bt([Pn.config({disabled:W(!t.enabled),onDisabled:_=>{Hs.getField(_).each(Pn.disable)},onEnabled:_=>{Hs.getField(_).each(Pn.enable)}})])})},vO=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Me(t.items,s.shared.interpreter)}),u9=(t,s)=>{const c=Me(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>As("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:va(t.selectBehaviours,[Ln.config({}),Wt.config({store:{mode:"manual",getValue:d=>Fe(d.element),setValue:(d,g)=>{const h=xs(t.options);He(t.options,w=>w.value===g).isSome()?Kd(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>Kd(d.element,w.value))},...l}})])}},a5=ei({name:"HtmlSelect",configFields:[Ye("options"),ba("selectBehaviours",[Ln,Wt]),Te("selectClasses",[]),Te("selectAttributes",{}),us("data")],factory:u9}),d9=(t,s,c)=>{const l=Me(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>Dp(w,s)),g=Hs.parts.field({dom:{},...c.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:l,factory:a5,selectBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled()}),wr.config({}),io("selectbox-change",[Qe($h(),(w,_)=>{Tn(w,Vi,{name:t.name})})])])}),h=t.size>1?A.none():A.some(zi("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:je([[g],h.toArray()])};return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:je([d.toArray(),[y]]),fieldBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{Hs.getField(w).each(Pn.disable)},onEnabled:w=>{Hs.getField(w).each(Pn.enable)}}),ta()])})},l5=W([Te("field1Name","field1"),Te("field2Name","field2"),au("onLockedChange"),Gd(["lockClass"]),Te("locked",!1),uu.field("coupledFieldBehaviours",[Xo,Wt])]),m9=(t,s,c)=>pt(t,s,c).bind(Xo.getCurrent),i5=(t,s)=>Va({factory:Hs,name:t,overrides:c=>({fieldBehaviours:bt([io("coupled-input-behaviour",[Qe(Vd(),l=>{m9(l,c,s).each(d=>{pt(l,c,"lock").each(g=>{So.isOn(g)&&c.onLockedChange(l,d,g)})})})])])})}),f9=W([i5("field1","field2"),i5("field2","field1"),Va({factory:cl,schema:[Ye("dom")],name:"lock",overrides:t=>({buttonBehaviours:bt([So.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),g9=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:uu.augment(t.coupledFieldBehaviours,[Xo.config({find:A.some}),Wt.config({store:{mode:"manual",getValue:d=>{const g=$1(d,t,["field1","field2"]);return{[t.field1Name]:Wt.getValue(g.field1()),[t.field2Name]:Wt.getValue(g.field2())}},setValue:(d,g)=>{const h=$1(d,t,["field1","field2"]);_r(g,t.field1Name)&&Wt.setValue(h.field1(),g[t.field1Name]),_r(g,t.field2Name)&&Wt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>pt(d,t,"field1"),getField2:d=>pt(d,t,"field2"),getLock:d=>pt(d,t,"lock")}}),Wu=pl({name:"FormCoupledInputs",configFields:l5(),partFields:f9(),factory:g9,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),u5=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let l=t.value.toFixed(c(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},yO=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const l=parseFloat(c[1]),d=c[2];return to.value({value:l,unit:d})}else return to.error(t)},d5=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>Mo(c,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},yE=t=>A.none(),h9=(t,s)=>c=>d5(c,s).map(l=>({value:l*t,unit:s})),p9=(t,s)=>{const c=yO(t).toOptional(),l=yO(s).toOptional();return sc(c,l,(d,g)=>d5(d,g.unit).map(h=>g.value/h).map(h=>h9(h,g.unit)).getOr(yE)).getOr(yE)},b9=(t,s)=>{let c=yE;const l=Ut("ratio-event"),d=V=>zi(V,{tag:"span",classes:["tox-icon","tox-lock-icon__"+V]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),y=Wu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled()}),ta(),wr.config({}),Ua.config(s.tooltips.getConfig({tooltipText:h}))])}),w=V=>({dom:{tag:"div",classes:["tox-form__group"]},components:V}),_=V=>Hs.parts.field({factory:Q1,inputClasses:["tox-textfield"],inputBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled()}),ta(),wr.config({}),io("size-input-events",[Qe(od(),(G,ne)=>{Tn(G,l,{isField1:V})}),Qe($h(),(G,ne)=>{Tn(G,Vi,{name:t.name})})])]),selectOnFocus:!1}),O=V=>({dom:{tag:"label",classes:["tox-label"]},components:[ec(s.translate(V))]}),P=Wu.parts.field1(w([Hs.parts.label(O("Width")),_(!0)])),H=Wu.parts.field2(w([Hs.parts.label(O("Height")),_(!1)]));return Wu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[P,H,w([O($f),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(V,G,ne)=>{yO(Wt.getValue(V)).each(_e=>{c(_e).each(le=>{Wt.setValue(G,u5(le))})})},coupledFieldBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:V=>{Wu.getField1(V).bind(Hs.getField).each(Pn.disable),Wu.getField2(V).bind(Hs.getField).each(Pn.disable),Wu.getLock(V).each(Pn.disable)},onEnabled:V=>{Wu.getField1(V).bind(Hs.getField).each(Pn.enable),Wu.getField2(V).bind(Hs.getField).each(Pn.enable),Wu.getLock(V).each(Pn.enable)}}),ta(),io("size-input-events2",[Qe(l,(V,G)=>{const ne=G.event.isField1,_e=ne?Wu.getField1(V):Wu.getField2(V),le=ne?Wu.getField2(V):Wu.getField1(V),Ee=_e.map(Wt.getValue).getOr(""),Se=le.map(Wt.getValue).getOr("");c=p9(Ee,Se)})])])})},m5=(t,s,c)=>{const l=Ed.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ec(s.translate(t.label))]}),d=Ed.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Ed.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ed.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:W(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:bt([vu.self(),Ln.config({})]),onChoose:(h,y,w)=>{Tn(h,Vi,{name:t.name,value:w})},onChange:(h,y,w)=>{Tn(h,Vi,{name:t.name,value:w})}})},v9=(t,s)=>{const c=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Me(y,c)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:Me(y,d)}),h=y=>({dom:{tag:"tbody"},components:Me(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:bt([wr.config({}),Ln.config({})])}},f5=(t,s)=>{const c=t.label.map(V=>Dp(V,s)),l=[Pn.config({disabled:()=>t.disabled||s.isDisabled()}),ta(),gn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(po(V,Av),A.some(!0))}),io("textfield-change",[Qe(Vd(),(V,G)=>{Tn(V,Vi,{name:t.name})}),Qe(Em(),(V,G)=>{Tn(V,Vi,{name:t.name})})]),wr.config({})],d=t.validation.map(V=>Qf.config({getRoot:G=>wa(G.element),invalidClass:"tox-invalid",validator:{validate:G=>{const ne=Wt.getValue(G),_e=V.validator(ne);return bl.pure(_e===!0?to.value(ne):to.error(_e))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(W({}),V=>({placeholder:s.translate(V)})),h=t.inputMode.fold(W({}),V=>({inputmode:V})),y={...g,...h},w=Hs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:bt(je([l,d])),selectOnFocus:!1,factory:Q1}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,P=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),H=[Pn.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{Hs.getField(V).each(Pn.disable)},onEnabled:V=>{Hs.getField(V).each(Pn.enable)}}),ta()];return _v(c,_,P,H)},y9=(t,s,c)=>f5({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c},s),g5=(t,s,c)=>f5({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c},s),Iv=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),tg=t=>t.dimension.property,ng=(t,s)=>t.dimension.getDimension(s),CE=(t,s)=>{const c=Iv(t,s);pi(c,[s.shrinkingClass,s.growingClass])},CO=(t,s)=>{Ur(t.element,s.openClass),yr(t.element,s.closedClass),qt(t.element,tg(s),"0px"),Xc(t.element)},wO=(t,s)=>{Ur(t.element,s.closedClass),yr(t.element,s.openClass),$o(t.element,tg(s))},h5=(t,s,c,l)=>{c.setCollapsed(),qt(t.element,tg(s),ng(s,t.element)),CE(t,s),CO(t,s),s.onStartShrink(t),s.onShrunk(t)},p5=(t,s,c,l)=>{const d=l.getOrThunk(()=>ng(s,t.element));c.setCollapsed(),qt(t.element,tg(s),d),Xc(t.element);const g=Iv(t,s);Ur(g,s.growingClass),yr(g,s.shrinkingClass),CO(t,s),s.onStartShrink(t)},b5=(t,s,c)=>{const l=ng(s,t.element);(l==="0px"?h5:p5)(t,s,c,A.some(l))},v5=(t,s,c)=>{const l=Iv(t,s),d=hi(l,s.shrinkingClass),g=ng(s,t.element);wO(t,s);const h=ng(s,t.element);(d?()=>{qt(t.element,tg(s),g),Xc(t.element)}:()=>{CO(t,s)})(),Ur(l,s.shrinkingClass),yr(l,s.growingClass),wO(t,s),qt(t.element,tg(s),h),c.setExpanded(),s.onStartGrow(t)},C9=(t,s,c)=>{if(c.isExpanded()){$o(t.element,tg(s));const l=ng(s,t.element);qt(t.element,tg(s),l)}},y5=(t,s,c)=>{c.isExpanded()||v5(t,s,c)},C5=(t,s,c)=>{c.isExpanded()&&b5(t,s,c)},w9=(t,s,c)=>{c.isExpanded()&&h5(t,s,c)},S9=(t,s,c)=>c.isExpanded(),w5=(t,s,c)=>c.isCollapsed(),S5=(t,s,c)=>{const l=Iv(t,s);return hi(l,s.growingClass)===!0},x5=(t,s,c)=>{const l=Iv(t,s);return hi(l,s.shrinkingClass)===!0};var T5=Object.freeze({__proto__:null,refresh:C9,grow:y5,shrink:C5,immediateShrink:w9,hasGrown:S9,hasShrunk:w5,isGrowing:S5,isShrinking:x5,isTransitioning:(t,s,c)=>S5(t,s)||x5(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?b5:v5)(t,s,c)},disableTransitions:CE,immediateGrow:(t,s,c)=>{c.isExpanded()||(wO(t,s),qt(t.element,tg(s),ng(s,t.element)),CE(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),E5=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const l=s.expanded;return fi(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:As(s.dimension.property,"0px")})},events:(t,s)=>vr([Fh(sd(),(c,l)=>{l.event.raw.propertyName===t.dimension.property&&(CE(c,t),s.isExpanded()&&$o(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),oG=[Ye("closedClass"),Ye("openClass"),Ye("shrinkingClass"),Ye("growingClass"),us("getAnimationRoot"),Yo("onShrunk"),Yo("onStartShrink"),Yo("onGrown"),Yo("onStartGrow"),Te("expanded",!1),is("dimension",Hc("property",{width:[Cr("property","width"),Cr("getDimension",t=>ia(t)+"px")],height:[Cr("property","height"),Cr("getDimension",t=>ur(t)+"px")]}))],k9=Object.freeze({__proto__:null,init:t=>{const s=fn(t.expanded),c=()=>"expanded: "+s.get();return gi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:xn(s.set,!1),setExpanded:xn(s.set,!0),readState:c})}});const Ei=Aa({fields:oG,name:"sliding",active:E5,apis:T5,state:k9}),k5=t=>({isEnabled:()=>!Pn.isDisabled(t),setEnabled:s=>Pn.set(t,!s),setActive:s=>{const c=t.element;s?(yr(c,"tox-tbtn--enabled"),St(c,"aria-pressed",!0)):(Ur(c,"tox-tbtn--enabled"),oe(c,"aria-pressed"))},isActive:()=>hi(t.element,"tox-tbtn--enabled"),setText:s=>{Tn(t,kd,{text:s})},setIcon:s=>Tn(t,Np,{icon:s})}),ow=(t,s,c,l,d=!0,g)=>pE({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,y)=>{const w={pattern:t.search.isSome()?E7(h):""};t.fetch(_=>{y(Fv(_,om.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},w,k5(h))},onSetup:t.onSetup,getApi:k5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[wr.config({})]:[]]},s,c.shared,g),_9=(t,s,c)=>{const l=g=>h=>{const y=!h.isActive();h.setActive(y),g.storage.set(y),c.shared.getSink().each(w=>{s().getOpt(w).each(_=>{Bi(_.element),Tn(_,Jf,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Me(t,h=>{const y=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...y,onAction:l(h),onSetup:d(h)}}))}},SO=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[ec(t)]}),xE=Ut("leaf-label-event-id"),TE=({leaf:t,onLeafAction:s,visible:c,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>ow(w,"tox-mbtn",g,A.none(),c)),y=[SO(t.title)];return h.each(w=>y.push(w)),cl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Pu()]:[xE,"keying"]},buttonBehaviours:bt([...c?[wr.config({})]:[],So.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ql.config({channels:{[`update-active-item-${l}`]:{onReceive:(w,_)=>{(_.value===t.id?So.on:So.off)(w)}}}}),io(xE,[Er((w,_)=>{d.each(O=>{(O===t.id?So.on:So.off)(w)})}),Qe(Pu(),(w,_)=>{const O=_.event.raw.code==="ArrowLeft",P=_.event.raw.code==="ArrowRight";O?(Dm(w.element,".tox-tree--directory").each(H=>{w.getSystem().getByDom(H).each(V=>{Zy(H,".tox-tree--directory__label").each(G=>{V.getSystem().getByDom(G).each(Ln.focus)})})}),_.stop()):P&&_.stop()})])])})},A9=(t,s,c)=>zi(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:c},s),O9=(t,s)=>A9(t,s,[]),_5=Ut("directory-label-event-id"),D9=({directory:t,visible:s,noChildren:c,backstage:l})=>{const d=t.menu.map(y=>ow(y,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[O9("chevron-right",l.shared.providers.icons)]},SO(t.title)];d.each(y=>{g.push(y)});const h=y=>{Dm(y.element,".tox-tree--directory").each(w=>{y.getSystem().getByDom(w).each(_=>{const O=!So.isOn(_);So.toggle(_),Tn(y,"expand-tree-node",{expanded:O,node:t.id})})})};return cl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Pu()]:[_5,"keying"]},buttonBehaviours:bt([...s?[wr.config({})]:[],io(_5,[Qe(Pu(),(y,w)=>{const _=w.event.raw.code==="ArrowRight",O=w.event.raw.code==="ArrowLeft";_&&c&&w.stop(),(_||O)&&Dm(y.element,".tox-tree--directory").each(P=>{y.getSystem().getByDom(P).each(H=>{!So.isOn(H)&&_||So.isOn(H)&&O?(h(y),w.stop()):O&&!So.isOn(H)&&(Dm(H.element,".tox-tree--directory").each(V=>{Zy(V,".tox-tree--directory__label").each(G=>{H.getSystem().getByDom(G).each(Ln.focus)})}),w.stop())})})})])])})},R9=({children:t,onLeafAction:s,visible:c,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?TE({leaf:y,selectedId:g,onLeafAction:s,visible:c,treeId:l,backstage:h}):xO({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:h})),behaviours:bt([Ei.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),Un.config({})])}),M9=Ut("directory-event-id"),xO=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:y}=t,w=fn(g),_=P=>y.map(H=>H.type==="leaf"?TE({leaf:H,selectedId:h,onLeafAction:s,visible:P,treeId:l,backstage:d}):xO({directory:H,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:P,treeId:l,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[D9({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),R9({children:y,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:l,backstage:d})],behaviours:bt([io(M9,[Er((P,H)=>{So.set(P,O)}),Qe("expand-tree-node",(P,H)=>{const{expanded:V,node:G}=H.event;w.set(V?[...w.get(),G]:w.get().filter(ne=>ne!==G))})]),So.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(P,H)=>{const V=P.components()[1],G=_(H);H?Ei.grow(V):Ei.shrink(V),Un.set(V,G)}})])}},N9=Ut("tree-event-id"),B9=(t,s)=>{const c=t.onLeafAction.getOr(ee),l=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,g=fn(d),h=fn(t.defaultSelectedId),y=Ut("tree-id"),w=(_,O)=>t.items.map(P=>P.type==="leaf"?TE({leaf:P,selectedId:_,onLeafAction:c,visible:!0,treeId:y,backstage:s}):xO({directory:P,selectedId:_,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:bt([gn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),io(N9,[Qe("expand-tree-node",(_,O)=>{const{expanded:P,node:H}=O.event;g.set(P?[...g.get(),H]:g.get().filter(V=>V!==H)),l(g.get(),{expanded:P,node:H})})]),Ql.config({channels:{[`update-active-item-${y}`]:{onReceive:(_,O)=>{h.set(A.some(O.value)),Un.set(_,w(A.some(O.value),g.get()))}}}}),Un.config({})])}};var A5=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return vr([Qe(t.event,l),Wd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Qe(d,()=>s.cancel())]).getOr([])))}});const O5=t=>{const s=fn(null);return gi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var P9=Object.freeze({__proto__:null,throttle:O5,init:t=>t.stream.streams.state(t)});const $9=(t,s)=>{const c=t.stream,l=cO(t.onStream,c.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),c.stopEvent&&g.stop()}};var F9=[is("stream",Hc("mode",{throttle:[Ye("delay"),Te("stopEvent",!0),Cr("streams",{setup:$9,state:O5})]})),Te("event","input"),us("cancelEvent"),au("onStream")];const TO=Aa({fields:F9,name:"streaming",active:A5,state:P9}),EE=(t,s,c)=>{const l=Wt.getValue(c);Wt.setValue(s,l),R5(s)},D5=(t,s)=>{const c=t.element,l=Fe(c),d=c.dom;_s(c,"type")!=="number"&&s(d,l)},R5=t=>{D5(t,(s,c)=>s.setSelectionRange(c.length,c.length))},I9=(t,s)=>{D5(t,(c,l)=>c.setSelectionRange(s,l.length))},L9=(t,s,c)=>{if(t.selectsOver){const l=Wt.getValue(s),d=t.getDisplayText(l),g=Wt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{EE(t,s,c),I9(s,d.length)}):A.none()}else return A.none()},kE=W("alloy.typeahead.itemexecute"),H9=(t,s,c,l)=>{const d=(P,H,V)=>{t.previewing.set(!1);const G=ic.getCoupled(P,"sandbox");if(es.isOpen(G))Xo.getCurrent(G).each(ne=>{Nt.getHighlighted(ne).fold(()=>{V(ne)},()=>{Ud(G,ne.element,"keydown",H)})});else{const ne=_e=>{Xo.getCurrent(_e).each(V)};jT(t,h(P),P,G,l,ne,ti.HighlightMenuAndItem).get(ee)}},g=L4(t),h=P=>H=>H.map(V=>{const G=ir(V.menus),ne=ye(G,le=>ao(le.items,Ee=>Ee.type==="item"));return Wt.getState(P).update(Me(ne,le=>le.data)),V}),y=P=>Xo.getCurrent(P),w="typeaheadevents",_=[Ln.config({}),Wt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:P=>Fe(P.element),getFallbackEntry:P=>({value:P,meta:{}}),setValue:(P,H)=>{Kd(P.element,t.model.getDisplayText(H))},...t.initialData.map(P=>As("initialValue",P)).getOr({})}}),TO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(P,H)=>{const V=ic.getCoupled(P,"sandbox");if(Ln.isFocused(P)&&Fe(P.element).length>=t.minChars){const ne=y(V).bind(le=>Nt.getHighlighted(le).map(Wt.getValue));t.previewing.set(!0);const _e=le=>{y(V).each(Ee=>{ne.fold(()=>{t.model.selectsOver&&Nt.highlightFirst(Ee)},Se=>{Nt.highlightBy(Ee,et=>Wt.getValue(et).value===Se.value),Nt.getHighlighted(Ee).orThunk(()=>(Nt.highlightFirst(Ee),A.none()))})})};jT(t,h(P),P,V,l,_e,ti.HighlightJustMenu).get(ee)}},cancelEvent:iy()}),gn.config({mode:"special",onDown:(P,H)=>(d(P,H,Nt.highlightFirst),A.some(!0)),onEscape:P=>{const H=ic.getCoupled(P,"sandbox");return es.isOpen(H)?(es.close(H),A.some(!0)):A.none()},onUp:(P,H)=>(d(P,H,Nt.highlightLast),A.some(!0)),onEnter:P=>{const H=ic.getCoupled(P,"sandbox"),V=es.isOpen(H);if(V&&!t.previewing.get())return y(H).bind(G=>Nt.getHighlighted(G)).map(G=>(Tn(P,kE(),{item:G}),!0));{const G=Wt.getValue(P);return po(P,iy()),t.onExecute(H,P,G),V&&es.close(H),A.some(!0)}}}),So.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ic.config({others:{sandbox:P=>T3(t,P,{onOpen:()=>So.on(P),onClose:()=>{t.lazyTypeaheadComp.get().each(H=>oe(H.element,"aria-activedescendant")),So.off(P)}})}}),io(w,[Er(P=>{t.lazyTypeaheadComp.set(A.some(P))}),Wd(P=>{t.lazyTypeaheadComp.set(A.none())}),$u(P=>{const H=ee;S3(t,h(P),P,l,H,ti.HighlightMenuAndItem).get(ee)}),Qe(kE(),(P,H)=>{const V=ic.getCoupled(P,"sandbox");EE(t.model,P,H.event.item),po(P,iy()),t.onItemExecute(P,V,H.event.item,Wt.getValue(P)),es.close(V),R5(P)})].concat(t.dismissOnBlur?[Qe(pf(),P=>{const H=ic.getCoupled(P,"sandbox");Ml(H.element).isNone()&&es.close(H)})]:[]))],O={[cu()]:[Wt.name(),TO.name(),w],...t.eventOrder};return{uid:t.uid,dom:H4(ar(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...va(t.typeaheadBehaviours,_)},eventOrder:O}},z9=W([us("lazySink"),Ye("fetch"),Te("minChars",5),Te("responseTime",1e3),Yo("onOpen"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Te("layouts",A.none()),Te("eventOrder",{}),L("model",{},[Te("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Te("selectsOver",!0),Te("populateFromBrowse",!0)]),Yo("onSetValue"),Dl("onExecute"),Yo("onItemExecute"),Te("inputClasses",[]),Te("inputAttributes",{}),Te("inputStyles",{}),Te("matchWidth",!0),Te("useMinWidth",!1),Te("dismissOnBlur",!0),Gd(["openClass"]),us("initialData"),us("listRole"),ba("typeaheadBehaviours",[Ln,Wt,TO,gn,So,ic]),ms("lazyTypeaheadComp",()=>fn(A.none)),ms("previewing",()=>fn(!0))].concat(I4()).concat(GT())),V9=W([du({schema:[Fg()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{L9(t.model,d,l).fold(()=>{t.model.selectsOver?(Nt.dehighlight(c,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&EE(t.model,d,l),$(l.element,"id").each(g=>St(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(l=>(Tn(l,kE(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&EE(t.model,l,c)})}})})]),U9=pl({name:"Typeahead",configFields:z9(),partFields:V9(),factory:H9}),dm=t=>({...t,toCached:()=>dm(t.toCached()),bindFuture:w=>dm(t.bind(_=>_.fold(O=>bl.pure(to.error(O)),O=>w(O)))),bindResult:w=>dm(t.map(_=>_.bind(w))),mapResult:w=>dm(t.map(_=>_.map(w))),mapError:w=>dm(t.map(_=>_.mapError(w))),foldResult:(w,_)=>t.map(O=>O.fold(w,_)),withTimeout:(w,_)=>dm(bl.nu(O=>{let P=!1;const H=setTimeout(()=>{P=!0,O(to.error(_()))},w);t.get(V=>{P||(clearTimeout(H),O(V))})}))}),M5=t=>dm(bl.nu(t)),EO=t=>dm(bl.pure(to.value(t))),N5={nu:M5,wrap:dm,pure:EO,value:EO,error:t=>dm(bl.pure(to.error(t))),fromResult:t=>dm(bl.pure(t)),fromFuture:t=>dm(t.map(to.value)),fromPromise:t=>M5(s=>{t.then(c=>{s(to.value(c))},c=>{s(to.error(c))})})},Lv=(t,s,c=[],l,d,g,h)=>{const y=s.fold(()=>({}),O=>({action:O})),w={buttonBehaviours:bt([am.button(()=>!t.enabled||h.isDisabled()),ta(),wr.config({}),...g.map(O=>Ua.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),io("button press",[Lb("click"),Lb("mousedown")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...y},_=ar(w,{dom:l});return ar(_,{components:d})},j9=(t,s,c,l=[],d)=>{const g=t.tooltip.map(_=>({"aria-label":c.translate(_)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},y=t.icon.map(_=>fO(_,c.icons)),w=ob([y]);return Lv(t,s,l,h,w,t.tooltip,c)},_E=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},kO=(t,s,c,l=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(V=>fO(V,c.icons)),y=[h.getOrThunk(()=>ec(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),P={tag:"button",classes:[..._E(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},H=t.icon.map(W(g));return Lv(t,s,l,P,y,H,c)},B5=(t,s,c,l=[],d=[])=>{const g=kO(t,A.some(s),c,l,d);return cl.sketch(g)},_O=(t,s)=>c=>{s==="custom"?Tn(c,Jf,{name:t,value:{}}):s==="submit"?po(c,Av):s==="cancel"?po(c,Rp):console.error("Unknown button type: ",s)},G9=(t,s)=>s==="menu",q9=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Gm=(t,s)=>s==="togglebutton",AE=(t,s,c)=>{var l,d;const g=t.icon.map(Se=>hh(Se,s.icons)).map(Rs),h=Se=>{Tn(Se,Jf,{name:t.name,value:{setIcon:et=>{g.map($e=>$e.getOpt(Se).each(yt=>{Un.set(yt,[hh(et,s.icons)])}))}}})},y=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:y==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},_=w.tooltip.or(t.text).map(Se=>({"aria-label":s.translate(Se)})).getOr({}),O=_E(y??"secondary"),P=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...P?["tox-button--icon-and-text"]:[]],attributes:{..._,...Wn(c)?{"data-mce-name":c}:{}}},V=[],G=s.translate(t.text.getOr("")),ne=ec(G),le=[...ob([g.map(Se=>Se.asSpec())]),...t.text.isSome()?[ne]:[]],Ee=Lv(w,A.some(h),V,H,le,t.tooltip,s);return cl.sketch(Ee)},yb=(t,s,c)=>{if(G9(t,s)){const l=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:y=>(y.setEnabled(t.enabled),ee),fetch:_9(d.items,l,c)},h=Rs(ow(g,"tox-tbtn",c,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(q9(t,s)){const l=_O(t.name,s),d={...t,borderless:!1};return B5(d,l,c.shared.providers,[])}else{if(Gm(t,s))return AE(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},K9=(t,s)=>{const c=_O(t.name,"custom");return U7(A.none(),Hs.parts.field({factory:cl,...kO(t,A.some(c),s,[fE(""),vu.self()])}))},AO={type:"separator"},Y9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),sw=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),P5=t=>Me(t,Y9),OO=(t,s)=>ao(s,c=>c.type===t),$5=(t,s)=>P5(OO(t,s)),X9=t=>$5("header",t.targets),F5=t=>$5("anchor",t.targets),J9=t=>A.from(t.anchorTop).map(s=>sw("<top>",s)).toArray(),Q9=t=>A.from(t.anchorBottom).map(s=>sw("<bottom>",s)).toArray(),DO=t=>Me(t,s=>sw(s,s)),ez=t=>zo(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(AO,c),[]),RO=(t,s)=>{const c=t.toLowerCase();return ao(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return Ws(g.toLowerCase(),c)||Ws(h.toLowerCase(),c)})},I5=(t,s,c)=>{var l,d;const g=Wt.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],w=>{const _=RO(h,DO(c.getHistory(t)));return t==="file"?ez([_,RO(h,X9(w)),RO(h,je([J9(w),F5(w),Q9(w)]))]):_})},MO=Ut("aria-invalid"),tz=(t,s,c,l)=>{const d=s.shared.providers,g=Ee=>{const Se=Wt.getValue(Ee);c.addToHistory(Se.value,t.filetype)},h={...l.map(Ee=>({initialData:Ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":MO,type:"url"},minChars:0,responseTime:0,fetch:Ee=>{const Se=I5(t.filetype,Ee,c),et=Fv(Se,om.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return bl.pure(et)},getHotspot:Ee=>G.getOpt(Ee),onSetValue:(Ee,Se)=>{Ee.hasConfigured(Qf)&&Qf.run(Ee).get(ee)},typeaheadBehaviours:bt([...c.getValidationHandler().map(Ee=>Qf.config({getRoot:Se=>wa(Se.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Se,et)=>{O.getOpt(Se).each($e=>{St($e.element,"title",d.translate(et))})}},validator:{validate:Se=>{const et=Wt.getValue(Se);return N5.nu($e=>{Ee({type:t.filetype,url:et.value},yt=>{if(yt.status==="invalid"){const Mt=to.error(yt.message);$e(Mt)}else{const Mt=to.value(yt.message);$e(Mt)}})})},validateOnLoad:!1}})).toArray(),Pn.config({disabled:()=>!t.enabled||d.isDisabled()}),wr.config({}),io("urlinput-events",[Qe(Vd(),Ee=>{const Se=Fe(Ee.element),et=Se.trim();et!==Se&&Kd(Ee.element,et),t.filetype==="file"&&Tn(Ee,Vi,{name:t.name})}),Qe($h(),Ee=>{Tn(Ee,Vi,{name:t.name}),g(Ee)}),Qe(Em(),Ee=>{Tn(Ee,Vi,{name:t.name}),g(Ee)})])]),eventOrder:{[Vd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ee=>Ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:T2(!1,1,"normal")},onExecute:(Ee,Se,et)=>{Tn(Se,Av,{})},onItemExecute:(Ee,Se,et,$e)=>{g(Ee),Tn(Ee,Vi,{name:t.name})}},y=Hs.parts.field({...h,factory:U9}),w=t.label.map(Ee=>Dp(Ee,d)),O=Rs(((Ee,Se,et=Ee,$e=Ee)=>zi(et,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ee],attributes:{title:d.translate($e),"aria-live":"polite",...Se.fold(()=>({}),yt=>({id:yt}))}},d.icons))("invalid",A.some(MO),"warning")),P=Rs({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),H=c.getUrlPicker(t.filetype),V=Ut("browser.url.event"),G=Rs({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,P.asSpec()],behaviours:bt([Pn.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ne=Rs(B5({name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},Ee=>po(Ee,V),d,[],["tox-browse-url"])),_e=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:je([[G.asSpec()],H.map(()=>ne.asSpec()).toArray()])}),le=Ee=>{Xo.getCurrent(Ee).each(Se=>{const et=Wt.getValue(Se),$e={fieldname:t.name,...et};H.each(yt=>{yt($e).get(Mt=>{Wt.setValue(Se,Mt),Tn(Ee,Vi,{name:t.name})})})})};return Hs.sketch({dom:Z7(),components:w.toArray().concat([_e()]),fieldBehaviours:bt([Pn.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Ee=>{Hs.getField(Ee).each(Pn.disable),ne.getOpt(Ee).each(Pn.disable)},onEnabled:Ee=>{Hs.getField(Ee).each(Pn.enable),ne.getOpt(Ee).each(Pn.enable)}}),ta(),io("url-input-events",[Qe(V,le)])])})},nz=(t,s)=>{const c=sN(t.icon,s.icons);return Zm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[cl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:l=>Tn(l,Jf,{name:"alert-banner",value:t.url}),buttonBehaviours:bt([O4()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},oz=(t,s)=>{t.dom.checked=s},sz=t=>t.dom.checked,L5=(t,s,c)=>{const l=w=>(w.element.dom.click(),A.some(!0)),d=Hs.parts.field({factory:{sketch:Dt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:bt([vu.self(),Pn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{wa(w.element).each(_=>yr(_,"tox-checkbox--disabled"))},onEnabled:w=>{wa(w.element).each(_=>Ur(_,"tox-checkbox--disabled"))}}),wr.config({}),Ln.config({}),HP(c,sz,oz),gn.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),io("checkbox-events",[Qe($h(),(w,_)=>{Tn(w,Vi,{name:t.name})})])])}),g=Hs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[ec(s.translate(t.label))],behaviours:bt([Ov.config({})])}),h=w=>zi(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),y=Rs({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Hs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:bt([Pn.config({disabled:()=>!t.enabled||s.isDisabled()}),ta()])})},qm=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=io("htmlpanel",[Er(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?Zm.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:bt([Ua.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Os(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ml(d.element)).each(g=>{$(g,"data-mce-tooltip").each(h=>{Ua.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Os(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ml(d.element).filter(g=>$(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:W([Mc,ea,Vc,Uc,Rc,Gs]),onRtl:W([Mc,ea,Vc,Uc,Rc,Gs])},bubble:Iu(0,-2,{})})}),l])}):Zm.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:bt([wr.config({}),Ln.config({}),l])})},Wc=t=>(s,c,l,d,g)=>ht(c,"name").fold(()=>t(c,d,A.none(),g),h=>s.field(h,t(c,d,ht(l,h),g))),rz=t=>(s,c,l,d,g)=>{const h=ar(c,{source:"dynamic"});return Wc(t)(s,h,l,d,g)},cz={bar:Wc((t,s)=>XT(t,s.shared)),collection:Wc((t,s,c)=>j7(t,s.shared.providers,c)),alertbanner:Wc((t,s)=>nz(t,s.shared.providers)),input:Wc((t,s,c)=>y9(t,s.shared.providers,c)),textarea:Wc((t,s,c)=>g5(t,s.shared.providers,c)),label:Wc((t,s,c,l)=>o9(t,s.shared,l)),iframe:rz((t,s,c)=>e9(t,s.shared.providers,c)),button:Wc((t,s)=>K9(t,s.shared.providers)),checkbox:Wc((t,s,c)=>L5(t,s.shared.providers,c)),colorinput:Wc((t,s,c)=>tP(t,s.shared,s.colorinput,c)),colorpicker:Wc((t,s,c)=>VP(t,s.shared.providers,c)),dropzone:Wc((t,s,c)=>jH(t,s.shared.providers,c)),grid:Wc((t,s)=>WP(t,s.shared)),listbox:Wc((t,s,c)=>i9(t,s,c)),selectbox:Wc((t,s,c)=>d9(t,s.shared.providers,c)),sizeinput:Wc((t,s)=>b9(t,s.shared.providers)),slider:Wc((t,s,c)=>m5(t,s.shared.providers,c)),urlinput:Wc((t,s,c)=>tz(t,s,s.urlinput,c)),customeditor:Wc(WH),htmlpanel:Wc((t,s)=>qm(t,s.shared.providers)),imagepreview:Wc((t,s,c)=>dO(t,c)),table:Wc((t,s)=>v9(t,s.shared.providers)),tree:Wc((t,s)=>B9(t,s)),panel:Wc((t,s)=>vO(t,s))},az={field:(t,s)=>s,record:W([])},H5=(t,s,c,l,d)=>{const g=ar(l,{shared:{interpreter:h=>NO(t,h,c,g,d)}});return NO(t,s,c,g,d)},NO=(t,s,c,l,d)=>ht(cz,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,l,d)),BO=(t,s,c,l)=>NO(az,t,s,c,l),ph="layout-inset",z5=t=>t.x,lz=(t,s)=>t.x+t.width/2-s.width/2,Wa=(t,s)=>t.x+t.width-s.width,rw=t=>t.y,PO=(t,s)=>t.y+t.height-s.height,cw=(t,s)=>t.y+t.height/2-s.height/2,OE=(t,s,c)=>Da(Wa(t,s),PO(t,s),c.insetSouthwest(),Ky(),"southwest",Ra(t,{right:0,bottom:3}),ph),DE=(t,s,c)=>Da(z5(t),PO(t,s),c.insetSoutheast(),qy(),"southeast",Ra(t,{left:1,bottom:3}),ph),aw=(t,s,c)=>Da(Wa(t,s),rw(t),c.insetNorthwest(),Gy(),"northwest",Ra(t,{right:0,top:2}),ph),lw=(t,s,c)=>Da(z5(t),rw(t),c.insetNortheast(),ep(),"northeast",Ra(t,{left:1,top:2}),ph),mm=(t,s,c)=>Da(lz(t,s),rw(t),c.insetNorth(),Yy(),"north",Ra(t,{top:2}),ph),iw=(t,s,c)=>Da(lz(t,s),PO(t,s),c.insetSouth(),jt(),"south",Ra(t,{bottom:3}),ph),V5=(t,s,c)=>Da(Wa(t,s),cw(t,s),c.insetEast(),Xy(),"east",Ra(t,{right:0}),ph),U5=(t,s,c)=>Da(z5(t),cw(t,s),c.insetWest(),b1(),"west",Ra(t,{left:1}),ph),W5=t=>{switch(t){case"north":return mm;case"northeast":return lw;case"northwest":return aw;case"south":return iw;case"southeast":return DE;case"southwest":return OE;case"east":return V5;case"west":return U5}},uw=(t,s,c,l,d)=>BS(l).map(W5).getOr(mm)(t,s,c,l,d),Z5=t=>{switch(t){case"north":return iw;case"northeast":return DE;case"northwest":return OE;case"south":return mm;case"southeast":return lw;case"southwest":return aw;case"east":return U5;case"west":return V5}},j5=(t,s,c,l,d)=>BS(l).map(Z5).getOr(mm)(t,s,c,l,d),dw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},G5=(t,s,c)=>{const d={maxHeightFunction:np()},g=()=>({type:"node",root:ce(U(t())),node:A.from(t()),bubble:Iu(12,12,dw),layouts:{onRtl:()=>[lw],onLtr:()=>[aw]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Iu(-12,12,dw),layouts:{onRtl:()=>[Vc,Rc,Mc],onLtr:()=>[Rc,Vc,Mc]},overrides:d});return()=>c()?g():h()},iz=(t,s,c,l)=>{const g={maxHeightFunction:np()},h=()=>({type:"node",root:ce(U(s())),node:A.from(s()),bubble:Iu(12,12,dw),layouts:{onRtl:()=>[mm],onLtr:()=>[mm]},overrides:g}),y=()=>t?{type:"node",root:ce(U(s())),node:A.from(s()),bubble:Iu(0,-xu(s()),dw),layouts:{onRtl:()=>[ea],onLtr:()=>[ea]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Iu(0,0,dw),layouts:{onRtl:()=>[ea],onLtr:()=>[ea]},overrides:g};return()=>l()?h():y()},uz=(t,s,c)=>{const l=()=>({type:"node",root:ce(U(t())),node:A.from(t()),layouts:{onRtl:()=>[mm],onLtr:()=>[mm]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Mc],onLtr:()=>[Mc]}});return()=>c()?l():d()},q5=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:be.fromDom(d),lastCell:be.fromDom(g)};return A.some(h)}return A.some(cp.range(be.fromDom(c.startContainer),c.startOffset,be.fromDom(c.endContainer),c.endOffset))}}),lG=t=>s=>({type:"node",root:t(),node:s}),iG=(t,s,c,l)=>{const d=fv(t),g=()=>be.fromDom(t.getBody()),h=()=>be.fromDom(t.getContentAreaContainer()),y=()=>d||!l();return{inlineDialog:G5(h,s,y),inlineBottomDialog:iz(t.inline,h,c,y),banner:uz(h,s,y),cursor:q5(t,g),node:lG(g)}},dz=t=>(s,c)=>{EB(t)(s,c)},mz=t=>()=>pB(t),fz=t=>s=>WT(t,s),K5=t=>s=>hB(t,s),$O=t=>({colorPicker:dz(t),hasCustomColors:mz(t),getColors:fz(t),getColorCols:K5(t)}),gz=t=>()=>LM(t),hz=t=>({isDraggableModal:gz(t)}),Y5=t=>{const s=fn(ah(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},X5=t=>_r(t,"items"),J5=t=>_r(t,"format"),Q5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],pz=t=>Mo(t,"items"),FO=t=>Mo(t,"block"),e$=t=>Mo(t,"inline"),bz=t=>Mo(t,"selector"),t$=t=>zo(t,(s,c)=>{if(pz(c)){const l=t$(c.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:c.title,items:l.formats}])}}else if(e$(c)||FO(c)||bz(c)){const d=`custom-${We(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),vz=(t,s)=>{const c=t$(s),l=d=>{Je(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(c.customFormats):t.on("init",()=>{l(c.customFormats)}),c.formats},n$=t=>DM(t).map(s=>{const c=vz(t,s);return RM(t)?Q5.concat(c):c}).getOr(Q5),o$=t=>{const s=ps(t);return s.length===1&&go(s,"title")},s$=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),mw=(t,s,c,l)=>{const d=w=>s$(w,c,l),g=w=>{const _=y(w.items);return{...w,type:"submenu",getStyleItems:W(_)}},h=w=>{const _=We(w.name)?w.name:Ut(w.title),O=`custom-${_}`,P={...w,type:"formatter",format:O,isSelected:c(O),getStylePreview:l(O)};return t.formatter.register(_,P),P},y=w=>Me(w,_=>X5(_)?g(_):J5(_)?d(_):o$(_)?{..._,type:"separator"}:h(_));return y(s)},yz=t=>{const s=y=>()=>t.formatter.match(y),c=y=>()=>{const w=t.formatter.get(y);return w!==void 0?A.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):A.none()},l=fn([]),d=fn([]),g=fn(!1);return t.on("PreInit",y=>{const w=n$(t),_=mw(t,w,s,c);l.set(_)}),t.on("addStyleModifications",y=>{const w=mw(t,y.items,s,c);d.set(w),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:l.get(),w=d.get();return y.concat(w)}}},RE=t=>{let l=0;const d=()=>l>0,g=y=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[ec(y.tooltipText)]}];return{getConfig:y=>({delayForShow:()=>d()?60:300,delayForHide:W(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(y),onShow:(w,_)=>{l++,y.onShow&&y.onShow(w,_)},onHide:(w,_)=>{l--,y.onHide&&y.onHide(w,_)}}),getComponents:g}},Cz=t=>Wn(t)&&t.nodeType===1,IO=um.trim,Hv=t=>s=>!!(Cz(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),r$=Hv("true"),wz=Hv("false"),LO=(t,s,c,l,d)=>({type:t,title:s,url:c,level:l,attach:d}),c$=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return r$(s)}return!1},a$=(t,s)=>Me(rl(be.fromDom(s),t),c=>c.dom),l$=t=>t.innerText||t.textContent,HO=t=>t.id?t.id:Ut("h"),ME=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Sz=t=>ME(t)&&Cb(t),i$=t=>t&&/^(H[1-6])$/.test(t.nodeName),Cb=t=>c$(t)&&!wz(t),u$=t=>i$(t)&&Cb(t),xz=t=>i$(t)?parseInt(t.nodeName.substr(1),10):0,d$=t=>{var s;const c=HO(t),l=()=>{t.id=c};return LO("header",(s=l$(t))!==null&&s!==void 0?s:"","#"+c,xz(t),l)},zO=t=>{const s=t.id||t.name,c=l$(t);return LO("anchor",c||"#"+s,"#"+s,0,ee)},VO=t=>Me(ao(t,u$),d$),Tz=t=>Me(ao(t,Sz),zO),Ez=t=>a$("h1,h2,h3,h4,h5,h6,a:not([href])",t),kz=t=>IO(t.title).length>0,_z={find:t=>{const s=Ez(t);return ao(VO(s).concat(Tz(s)),kz)}},NE="tinymce-url-history",f$=5,g$=t=>We(t)&&/^https?/.test(t),Az=t=>Zo(t)&&t.length<=f$&&ln(t,g$),h$=t=>tn(t)&&ws(t,s=>!Az(s)).isNone(),p$=()=>{const t=ab.getItem(NE);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+NE+" was not valid JSON",c),{};throw c}return h$(s)?s:(console.log("Local storage "+NE+" was not valid format",s),{})},b$=t=>{if(!h$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));ab.setItem(NE,JSON.stringify(t))},Oz=t=>{const s=p$();return ht(s,t).getOr([])},fw=(t,s)=>{if(!g$(t))return;const c=p$(),l=ht(c,s).getOr([]),d=ao(l,g=>g!==t);c[s]=[t].concat(d).slice(0,f$),b$(c)},v$=t=>!!t,Dz=t=>ns(um.makeMap(t,/[, ]/),v$),gw=t=>A.from($M(t)),y$=t=>{const s=A.from(r4(t)).filter(v$).map(Dz);return gw(t).fold(co,c=>s.fold(Pt,l=>ps(l).length>0?l:!1))},Rz=(t,s)=>{const c=y$(t);return Ro(c)?c?gw(t):A.none():c[s]?gw(t):A.none()},Mz=(t,s)=>Rz(t,s).map(c=>l=>bl.nu(d=>{const g=(y,w)=>{if(!We(y))throw new Error("Expected value to be string");if(w!==void 0&&!tn(w))throw new Error("Expected meta to be a object");d({value:y,meta:w})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};c.call(t,g,l.value,h)})),C$=t=>A.from(t).filter(We).getOrUndefined(),Nz=t=>FM(t)?A.some({targets:_z.find(t.getBody()),anchorTop:C$(Jx(t)),anchorBottom:C$(IM(t))}):A.none(),Bz=t=>A.from(Xx(t)),Pz=t=>({getHistory:Oz,addToHistory:fw,getLinkInformation:()=>Nz(t),getValidationHandler:()=>Bz(t),getUrlPicker:s=>Mz(t,s)}),$z=(t,s,c,l)=>{const d=fn(!1),g=Y5(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Vu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:RE(t.dialog)},y=Pz(s),w=yz(s),_=$O(s),O=hz(s),P=()=>d.get(),H=le=>d.set(le),V={shared:{providers:h,anchors:iG(s,c,l,g.isPositionedAtTop),header:g},urlinput:y,styles:w,colorinput:_,dialog:O,isContextMenuOpen:P,setContextMenuState:H},G=le=>A.none(),ne={...V,shared:{...V.shared,interpreter:le=>BO(le,{},ne,G),getSink:t.popup}},_e={...V,shared:{...V.shared,interpreter:le=>BO(le,{},_e,G),getSink:t.dialog}};return{popup:ne,dialog:_e}},Fz=(t,s,c)=>{const l=(Xe,rn)=>{Je([s,...c],Zt=>{Zt.broadcastEvent(Xe,rn)})},d=(Xe,rn)=>{Je([s,...c],Zt=>{Zt.broadcastOn([Xe],rn)})},g=Xe=>d(Jd(),{target:Xe.target}),h=xl(),y=Nl(h,"touchstart",g),w=Nl(h,"touchmove",Xe=>l(e1(),Xe)),_=Nl(h,"touchend",Xe=>l(uy(),Xe)),O=Nl(h,"mousedown",g),P=Nl(h,"mouseup",Xe=>{Xe.raw.button===0&&d(A1(),{target:Xe.target})}),H=Xe=>d(Jd(),{target:be.fromDom(Xe.target)}),V=Xe=>{Xe.button===0&&d(A1(),{target:be.fromDom(Xe.target)})},G=()=>{Je(t.editorManager.get(),Xe=>{t!==Xe&&Xe.dispatch("DismissPopups",{relatedTarget:t})})},ne=Xe=>l(Eg(),lC(Xe)),_e=Xe=>{d(Qg(),{}),l(ad(),lC(Xe))},le=U(be.fromDom(t.getElement())),Ee=aC(le,"scroll",Xe=>{requestAnimationFrame(()=>{const rn=t.getContainer();if(rn!=null){const On=lh(t,s.element).map(Sn=>[Sn.element,...Sn.others]).getOr([]);Vs(On,Sn=>ss(Sn,Xe.target))&&(t.dispatch("ElementScroll",{target:Xe.target.dom}),l(zw(),Xe))}})}),Se=()=>d(Qg(),{}),et=Xe=>{Xe.state&&d(Jd(),{target:be.fromDom(t.getContainer())})},$e=Xe=>{d(Jd(),{target:be.fromDom(Xe.relatedTarget.getContainer())})},yt=Xe=>t.dispatch("focusin",Xe),Mt=Xe=>t.dispatch("focusout",Xe);t.on("PostRender",()=>{t.on("click",H),t.on("tap",H),t.on("mouseup",V),t.on("mousedown",G),t.on("ScrollWindow",ne),t.on("ResizeWindow",_e),t.on("ResizeEditor",Se),t.on("AfterProgressState",et),t.on("DismissPopups",$e),Je([s,...c],Xe=>{Xe.element.dom.addEventListener("focusin",yt),Xe.element.dom.addEventListener("focusout",Mt)})}),t.on("remove",()=>{t.off("click",H),t.off("tap",H),t.off("mouseup",V),t.off("mousedown",G),t.off("ScrollWindow",ne),t.off("ResizeWindow",_e),t.off("ResizeEditor",Se),t.off("AfterProgressState",et),t.off("DismissPopups",$e),Je([s,...c],Xe=>{Xe.element.dom.removeEventListener("focusin",yt),Xe.element.dom.removeEventListener("focusout",Mt)}),O.unbind(),y.unbind(),w.unbind(),_.unbind(),P.unbind(),Ee.unbind()}),t.on("detach",()=>{Je([s,...c],NC),Je([s,...c],Xe=>Xe.destroy())})},Ba=kx,bh=wx,Iz=W([Te("shell",!1),Ye("makeItem"),Te("setupItem",ee),uu.field("listBehaviours",[Un])]),w$=Hi({name:"items",overrides:()=>({behaviours:bt([Un.config({})])})}),BE=W([w$]),S$=W("CustomList"),Hz=(t,s,c,l)=>{const d=(y,w)=>{h(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const O=Un.contents(_),P=w.length,H=P-O.length,V=H>0?ft(H,()=>t.makeItem()):[],G=O.slice(P);Je(G,_e=>Un.remove(_,_e)),Je(V,_e=>Un.append(_,_e));const ne=Un.contents(_);Je(ne,(_e,le)=>{t.setupItem(y,_e,w[le],le)})})},g=t.shell?{behaviours:[Un.config({})],components:[]}:{behaviours:[],components:s},h=y=>t.shell?A.some(y):pt(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:va(t.listBehaviours,g.behaviours),apis:{setItems:d}}},x$=pl({name:S$(),configFields:Iz(),partFields:BE(),factory:Hz,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),zv=W([Ye("dom"),Te("shell",!0),ba("toolbarBehaviours",[Un])]),zz=W([Hi({name:"groups",overrides:()=>({behaviours:bt([Un.config({})])})})]),Vz=(t,s,c,l)=>{const d=(y,w)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Un.set(_,w)})},g=y=>t.shell?A.some(y):pt(y,t,"groups"),h=t.shell?{behaviours:[Un.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:va(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ee},domModification:{attributes:{role:"group"}}}},Km=pl({name:"Toolbar",configFields:zv(),partFields:zz(),factory:Vz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),T$=ee,E$=co,k$=W([]);var _$=Object.freeze({__proto__:null,setup:T$,isDocked:E$,getBehaviours:k$});const UO=W(Ut("toolbar-height-change")),og={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},A$="tox-tinymce--toolbar-sticky-on",Bp="tox-tinymce--toolbar-sticky-off",O$=(t,s)=>{const c=Ic(s),d=$a(s).dom.innerHeight,g=Qc(c),h=be.fromDom(t.elm),y=Ya(h),w=ur(h),_=y.y,O=_+w,P=Tc(s),H=ur(s),V=P.top,G=V+H,ne=Math.abs(V-g.top)<2,_e=Math.abs(G-(g.top+d))<2;if(ne&&_<G)ef(g.left,_-H,c);else if(_e&&O>V){const le=_-d+w+H;ef(g.left,le,c)}},Pp=(t,s)=>go(Ir.getModes(t),s),Vv=t=>{const s=l=>xu(l)+(parseInt($s(l,"margin-top"),10)||0)+(parseInt($s(l,"margin-bottom"),10)||0),c=t.element;wa(c).each(l=>{const d="padding-"+Ir.getModes(t)[0];if(Ir.isDocked(t)){const g=ia(l);qt(c,"width",g+"px"),qt(l,d,s(c)+"px")}else $o(c,"width"),$o(l,d)})},WO=(t,s)=>{s?(Ur(t,og.fadeOutClass),Hh(t,[og.transitionClass,og.fadeInClass])):(Ur(t,og.fadeInClass),Hh(t,[og.fadeOutClass,og.transitionClass]))},ZO=(t,s)=>{const c=be.fromDom(t.getContainer());s?(yr(c,A$),Ur(c,Bp)):(yr(c,Bp),Ur(c,A$))},D$=(t,s)=>{const c=Ic(s);hd(c).filter(l=>!ss(s,l)).filter(l=>ss(l,be.fromDom(c.dom.body))||Yr(t,l)).each(()=>Bi(s))},dG=(t,s)=>Ml(t).orThunk(()=>s().toOptional().bind(c=>Ml(c.element))),Uz=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(Ir.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(Vv)}),t.on("SkinLoaded",()=>{c().each(l=>{Ir.isDocked(l)?Ir.reset(l):Ir.refresh(l)})}),t.on("FullscreenStateChanged",()=>{c().each(Ir.reset)})),t.on("AfterScrollIntoView",l=>{c().each(d=>{Ir.refresh(d);const g=d.element;ER(g)&&O$(l,g)})}),t.on("PostRender",()=>{ZO(t,!1)})},Wz=t=>t().map(Ir.isDocked).getOr(!1),Zz=()=>[Ql.config({channels:{[UO()]:{onReceive:Vv}}})],R$=(t,s)=>{const c=Fs(),l=s.getSink,d=y=>{l().each(w=>y(w.element))},g=y=>{t.inline||Vv(y),ZO(t,Ir.isDocked(y)),y.getSystem().broadcastOn([Qg()],{}),l().each(w=>w.getSystem().broadcastOn([Qg()],{}))},h=t.inline?[]:Zz();return[Ln.config({}),Ir.config({contextual:{lazyContext:y=>{const w=xu(y.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(_).map(O=>{const P=Rr(be.fromDom(O));return lh(t,y.element).fold(()=>{const V=P.height-w,G=P.y+(Pp(y,"top")?0:w);return cr(P.x,G,P.width,V)},V=>{const G=bg(P,X1(V)),ne=Pp(y,"top")?G.y:G.y+w;return cr(G.x,ne,G.width,G.height-w)})})},onShow:()=>{d(y=>WO(y,!0))},onShown:y=>{d(w=>pi(w,[og.transitionClass,og.fadeInClass])),c.get().each(w=>{D$(y.element,w),c.clear()})},onHide:y=>{dG(y.element,l).fold(c.clear,c.set),d(w=>WO(w,!1))},onHidden:()=>{d(y=>pi(y,[og.transitionClass]))},...og},lazyViewport:y=>lh(t,y.element).fold(()=>{const _=cc(),O=PM(t),P=_.y+(Pp(y,"top")?O:0),H=_.height-(Pp(y,"bottom")?O:0);return{bounds:cr(_.x,P,_.width,H),optScrollEnv:A.none()}},_=>({bounds:X1(_),optScrollEnv:A.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:Tc(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var jz=Object.freeze({__proto__:null,setup:Uz,isDocked:Wz,getBehaviours:R$});const Uv=t=>{const s=t.editor,c=t.sticky?R$:k$;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:bt(c(s,t.sharedBackstage))}},hw=Dn([Bc,is("items",uf([Gp([wT,Yl("items",Ht)]),Ht]))].concat(D2)),jO=t=>Mr("GroupToolbarButton",hw,t),Gz=[yc("text"),yc("tooltip"),yc("icon"),di("search",!1,uf([ql,Dn([yc("placeholder")])],t=>Ro(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Kl("fetch"),qr("onSetup",()=>ee)],M$=Dn([Bc,...Gz]),PE=t=>Mr("menubutton",M$,t),qz=Dn([Bc,A2,yd,Op,_N,YL,Ap,Ni("presets","normal",["normal","color","listpreview"]),kT(1),bv,j4]),pw=t=>Mr("SplitButton",qz,t);var GO=ei({factory:(t,s)=>{const c=(d,g)=>{const h=Me(g,y=>{const w={type:"menubutton",text:y.text,fetch:O=>{O(y.getItems())}},_=PE(w).mapError(O=>tu(O)).getOrDie();return ow(_,"tox-mbtn",s.backstage,A.some("menuitem"))});Un.set(d,h)},l={focus:gn.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:bt([Un.config({}),io("menubar-events",[Er(d=>{t.onSetup(d)}),Qe(Hd(),(d,g)=>{Os(d.element,".tox-mbtn--active").each(h=>{gd(g.event.target,".tox-mbtn").each(y=>{ss(h,y)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(y).each(_=>{wd.expand(_),wd.close(w),Ln.focus(_)})})})})}),Qe(kg(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{wd.isOpen(h)&&(wd.expand(y),wd.close(h))})})})]),gn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),wr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ye("dom"),Ye("uid"),Ye("onEscape"),Ye("backstage"),Te("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const Yz="⚡️Upgrade",Xz="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",Jz=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:Xz,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Yz}}]}),N$="container",Qz=[ba("slotBehaviours",[])],qO=t=>"<alloy.field."+t+">",B$=t=>{const s=(()=>{const g=[];return{slot:(y,w)=>(g.push(y),Tx(N$,qO(y),w)),record:W(g)}})(),c=t(s),l=s.record(),d=Me(l,g=>Va({name:g,pname:qO(g)}));return Im(N$,Qz,d,KO,c)},KO=(t,s)=>{const c=ne=>P1(t),l=(ne,_e)=>pt(ne,t,_e),d=(ne,_e)=>(le,Ee)=>pt(le,t,Ee).map(Se=>ne(Se,Ee)).getOr(_e),g=ne=>(_e,le)=>{Je(le,Ee=>ne(_e,Ee))},h=(ne,_e)=>_s(ne.element,"aria-hidden")!=="true",y=(ne,_e)=>{if(!h(ne)){const le=ne.element;$o(le,"display"),oe(le,"aria-hidden"),Tn(ne,my(),{name:_e,visible:!0})}},w=(ne,_e)=>{if(h(ne)){const le=ne.element;qt(le,"display","none"),St(le,"aria-hidden","true"),Tn(ne,my(),{name:_e,visible:!1})}},_=d(h,!1),O=d(w),P=g(O),H=ne=>P(ne,c()),V=d(y),G={getSlotNames:c,getSlot:l,isShowing:_,hideSlot:O,hideAllSlots:H,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:R1(t.slotBehaviours),apis:G}},Za={...ns({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Xh(t)),sketch:B$},$E=Dn([yd,A2,qr("onShow",ee),qr("onHide",ee),Ap]),P$=t=>Mr("sidebar",$E,t),eV=t=>{const{sidebars:s}=t.ui.registry.getAll();Je(ps(s),c=>{const l=s[c],d=()=>Kr(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},tV=t=>({element:()=>t.element.dom}),nV=(t,s)=>{const c=Me(ps(s),l=>{const d=s[l],g=ut(P$(d));return{name:l,getApi:tV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Me(c,l=>{const d=fn(ee);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:vv.unnamedEvents([dh(l,d),Il(l,d),Qe(my(),(g,h)=>{const y=h.event;He(c,_=>_.name===y.name).each(_=>{(y.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},oV=t=>Za.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:nV(s,t),slotBehaviours:vv.unnamedEvents([Er(c=>Za.hideAllSlots(c))])})),YO=(t,s,c)=>{Xo.getCurrent(t).each(d=>{Un.set(d,[oV(s)]);const g=c==null?void 0:c.toLowerCase();We(g)&&Mo(s,g)&&Xo.getCurrent(d).each(h=>{Za.showSlot(h,g),Ei.immediateGrow(d),$o(d.element,"width"),Wv(t.element,"region")})})},Wv=(t,s)=>{St(t,"role",s)},sV=(t,s)=>{Xo.getCurrent(t).each(l=>{Xo.getCurrent(l).each(g=>{Ei.hasGrown(l)?Za.isShowing(g,s)?(Ei.shrink(l),Wv(t.element,"presentation")):(Za.hideAllSlots(g),Za.showSlot(g,s),Wv(t.element,"region")):(Za.hideAllSlots(g),Za.showSlot(g,s),Ei.grow(l),Wv(t.element,"region"))})})},XO=t=>Xo.getCurrent(t).bind(c=>Ei.isGrowing(c)||Ei.hasGrown(c)?Xo.getCurrent(c).bind(g=>He(Za.getSlotNames(g),h=>Za.isShowing(g,h))):A.none()),JO=Ut("FixSizeEvent"),QO=Ut("AutoSizeEvent"),rV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:bt([wr.config({}),Ln.config({}),Ei.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Xo.getCurrent(s).each(Za.hideAllSlots),po(s,QO)},onGrown:s=>{po(s,QO)},onStartGrow:s=>{Tn(s,JO,{width:Ys(s.element,"width").getOr("")})},onStartShrink:s=>{Tn(s,JO,{width:ia(s.element)+"px"})}}),Un.config({}),Xo.config({find:s=>{const c=Un.contents(s);return xs(c)}})])}],behaviours:bt([vu.childAt(0),io("sidebar-sliding-events",[Qe(JO,(s,c)=>{qt(s.element,"width",c.event.width)}),Qe(QO,(s,c)=>{$o(s.element,"width")})])])});var hG=Object.freeze({__proto__:null,block:(t,s,c,l)=>{St(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=bt([gn.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Ln.config({})]),h=l(d,g),y=d.getSystem().build(h);Un.append(d,fl(y)),y.hasConfigured(gn)&&s.focus&&gn.focusIn(y),c.isBlocked()||s.onBlock(t),c.blockWith(()=>Un.remove(d,y))},unblock:(t,s,c)=>{oe(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),$$=[qr("getRoot",A.none),Jr("focus",!0),Yo("onBlock"),Yo("onUnblock")],F$=Object.freeze({__proto__:null,init:()=>{const t=Eh(),s=c=>{t.set({destroy:c})};return gi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Ym=Aa({fields:$$,name:"blocking",apis:hG,state:F$}),cV=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Hm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),I$=t=>Xo.getCurrent(t).each(s=>Bi(s.element,!0)),aV=(t,s)=>{const c="tabindex",l=`data-mce-${c}`;A.from(t.iframeElement).map(be.fromDom).each(d=>{s?($(d,c).each(g=>St(d,l,g)),St(d,c,-1)):(oe(d,c),$(d,l).each(g=>{St(d,c,g),oe(d,l)}))})},lV=(t,s,c,l)=>{const d=s.element;if(aV(t,c),c)Ym.block(s,cV(l)),$o(d,"display"),oe(d,"aria-hidden"),t.hasFocus()&&I$(s);else{const g=Xo.getCurrent(s).exists(h=>y1(h.element));Ym.unblock(s),qt(d,"display","none"),St(d,"aria-hidden","true"),g&&t.focus()}},L$=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:bt([Un.config({}),Ym.config({focus:!1}),Xo.config({find:s=>xs(s.components())})]),components:[]}),iV=t=>t.type==="focusin",uV=t=>iV(t)?(t.composed?xs(t.composedPath()):A.from(t.target)).map(be.fromDom).filter(Bn).exists(c=>hi(c,"mce-pastebin")):!1,dV=(t,s,c)=>{const l=fn(!1),d=Fs(),g=y=>{l.get()&&!uV(y)&&(y.preventDefault(),I$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const h=y=>{y!==l.get()&&(l.set(y),lV(t,s(),y,c.providers),_8(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),zn(y.time)){const w=i2.setEditorTimeout(t,()=>h(y.state),y.time);d.set(w)}else h(y.state),d.clear()})},bG=(t,s)=>zo(t,(d,g)=>s(g,d.len).fold(W(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,H$=(t,s,c)=>({within:t,extra:s,withinWidth:c}),eD=(t,s,c)=>{const l=bG(t,(y,w)=>{const _=c(y);return A.some({element:y,start:w,finish:w+_,width:_})}),d=ao(l,y=>y.finish<=s),g=bo(d,(y,w)=>y+w.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},bw=t=>Me(t,s=>s.element),mV=(t,s,c)=>{const l=bw(t.concat(s));return H$(l,[],c)},fV=(t,s,c,l)=>{const d=bw(t).concat([c]);return H$(d,bw(s),l)},Zu=(t,s,c)=>H$(bw(t),[],c),gV=(t,s,c)=>{const l=eD(s,t,c);return l.extra.length===0?A.some(l):A.none()},z$=(t,s,c,l)=>{const d=gV(t,s,c).getOrThunk(()=>eD(s,t-c(l),c)),g=d.within,h=d.extra,y=d.withinWidth;return h.length===1&&h[0].width<=c(l)?mV(g,h,y):h.length>=1?fV(g,h,l,y):Zu(g,h,y)},tD=(t,s)=>{const c=Me(s,l=>fl(l));Km.setGroups(t,c)},hV=t=>Bs(t,s=>Ml(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),Zv=(t,s,c)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Pl(t,s,"primary"),g=ic.getCoupled(t,"overflowGroup");qt(d.element,"visibility","hidden");const h=l.concat([g]),y=hV(h);c([]),tD(d,h);const w=ia(d.element),_=z$(w,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);_.extra.length===0?(Un.remove(d,g),c([])):(tD(d,_.within),c(_.extra)),$o(d.element,"visibility"),Xc(d.element),y.each(Ln.focus)},V$=W([ba("splitToolbarBehaviours",[ic]),ms("builtGroups",()=>fn([]))]),FE=W([Gd(["overflowToggledClass"]),Ru("getOverflowBounds"),Ye("lazySink"),ms("overflowGroups",()=>fn([])),Yo("onOpened"),Yo("onClosed")].concat(V$())),pV=W([Va({factory:Km,schema:zv(),name:"primary"}),du({schema:zv(),name:"overflow"}),du({name:"overflow-button"}),du({name:"overflow-group"})]),jv=W((t,s)=>{K(t,Math.floor(s))}),bV=W([Gd(["toggledClass"]),Ye("lazySink"),Kl("fetch"),Ru("getBounds"),Js("fireDismissalEventInstead",[Te("event",bf())]),Pf(),Yo("onToggled")]),vV=W([du({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:bt([So.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),du({factory:Km,schema:zv(),name:"toolbar",overrides:t=>({toolbarBehaviours:bt([gn.config({mode:"cyclic",onEscape:s=>(pt(s,t,"button").each(Ln.focus),A.none())})])})})]),Ui=Fs(),yV=(t,s)=>{Ui.set(!0),Gv(t,s),Ui.clear()},Gv=(t,s)=>{const c=ic.getCoupled(t,"toolbarSandbox");es.isOpen(c)?es.close(c):es.open(c,s.toolbar())},IE=(t,s,c,l)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();Ma.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:jv()}}},d)},nD=(t,s,c,l,d)=>{Km.setGroups(s,d),IE(t,s,c,l),So.on(t)},CV=(t,s,c)=>{const l=l0(),d=(h,y)=>{const w=Ui.get().getOr(!1);c.fetch().get(_=>{nD(t,y,c,s.layouts,_),l.link(t.element),w||gn.focusIn(y)})},g=()=>{So.off(t),Ui.get().getOr(!1)||Ln.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:bt([gn.config({mode:"special",onEscape:h=>(es.close(h),A.some(!0))}),es.config({onOpen:d,onClose:g,isPartOf:(h,y,w)=>_f(y,w)||_f(t,w),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Ql.config({channels:{...$m({isExtraPart:co,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...z0({doReposition:()=>{es.getState(ic.getCoupled(t,"toolbarSandbox")).each(h=>{IE(t,h,c,s.layouts)})}})}})])}},$p=pl({name:"FloatingToolbarButton",factory:(t,s,c,l)=>({...cl.sketch({...l.button(),action:d=>{Gv(d,l)},buttonBehaviours:uu.augment({dump:l.button().buttonBehaviours},[ic.config({others:{toolbarSandbox:d=>CV(d,c,t)}})])}),apis:{setGroups:(d,g)=>{es.getState(ic.getCoupled(d,"toolbarSandbox")).each(h=>{nD(d,h,t,c.layouts,g)})},reposition:d=>{es.getState(ic.getCoupled(d,"toolbarSandbox")).each(g=>{IE(d,g,t,c.layouts)})},toggle:d=>{Gv(d,l)},toggleWithoutFocusing:d=>{yV(d,l)},getToolbar:d=>es.getState(ic.getCoupled(d,"toolbarSandbox")),isOpen:d=>es.isOpen(ic.getCoupled(d,"toolbarSandbox"))}}),configFields:bV(),partFields:vV(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),SV=W([Ye("items"),Gd(["itemSelector"]),ba("tgroupBehaviours",[gn])]),xV=W([J0({name:"items",unit:"item"})]),TV=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:va(t.tgroupBehaviours,[gn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),LE=pl({name:"ToolbarGroup",configFields:SV(),partFields:xV(),factory:TV}),U$=t=>Me(t,s=>fl(s)),W$=(t,s,c)=>{Zv(t,c,l=>{c.overflowGroups.set(l),s.getOpt(t).each(d=>{$p.setGroups(d,U$(l))})})},Z$=(t,s,c,l)=>{const d=Rs($p.sketch({fetch:()=>bl.nu(g=>{g(U$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Rc,Vc],onRtl:()=>[Vc,Rc],onBottomLtr:()=>[Gs,Uc],onBottomRtl:()=>[Uc,Gs]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.splitToolbarBehaviours,[ic.config({others:{overflowGroup:()=>LE.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Me(h,g.getSystem().build)),W$(g,d,t)},refresh:g=>W$(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{$p.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each($p.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map($p.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{$p.reposition(h)})},getOverflow:g=>d.getOpt(g).bind($p.getToolbar)},domModification:{attributes:{role:"group"}}}},oD=pl({name:"SplitFloatingToolbar",configFields:FE(),partFields:pV(),factory:Z$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),j$=W([Gd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Yo("onOpened"),Yo("onClosed")].concat(V$())),EV=W([Va({factory:Km,schema:zv(),name:"primary"}),Va({factory:Km,schema:zv(),name:"overflow",overrides:t=>({toolbarBehaviours:bt([Ei.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{pt(s,t,"overflow-button").each(c=>{So.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{pt(s,t,"overflow-button").each(So.on)}}),gn.config({mode:"acyclic",onEscape:s=>(pt(s,t,"overflow-button").each(Ln.focus),A.some(!0))})])})}),du({name:"overflow-button",overrides:t=>({buttonBehaviours:bt([So.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),du({name:"overflow-group"})]),kV=(t,s)=>pt(t,s,"overflow").map(Ei.hasGrown).getOr(!1),HE=(t,s,c)=>{pt(t,s,"overflow-button").each(l=>{pt(t,s,"overflow").each(d=>{if(zE(t,s),Ei.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||gn.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||Ln.focus(l),g(h),s.onClosed=g}}Ei.toggleGrow(d)})})},zE=(t,s)=>{pt(t,s,"overflow").each(c=>{Zv(t,s,l=>{const d=Me(l,g=>fl(g));Km.setGroups(c,d)}),pt(t,s,"overflow-button").each(l=>{Ei.hasGrown(c)&&So.on(l)}),Ei.refresh(c)})},G$=(t,s,c,l)=>{const d="alloy.toolbar.toggle",g=(h,y)=>{const w=Me(y,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.splitToolbarBehaviours,[ic.config({others:{overflowGroup:h=>LE.sketch({...l["overflow-group"](),items:[cl.sketch({...l["overflow-button"](),action:y=>{po(h,d)}})]})}}),io("toolbar-toggle-events",[Qe(d,h=>{HE(h,t,!1)})])]),apis:{setGroups:(h,y)=>{g(h,y),zE(h,t)},refresh:h=>zE(h,t),toggle:h=>{HE(h,t,!1)},toggleWithoutFocusing:h=>{HE(h,t,!0)},isOpen:h=>kV(h,t)},domModification:{attributes:{role:"group"}}}},sD=pl({name:"SplitSlidingToolbar",configFields:j$(),partFields:EV(),factory:G$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),q$=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[LE.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:bt([wr.config({}),Ln.config({})])}},VE=t=>LE.sketch(q$(t)),rD=(t,s)=>{const c=Er(l=>{const d=Me(t.initGroups,VE);Km.setGroups(l,d)});return bt([am.toolbarButton(t.providers.isDisabled),ta(),gn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),io("toolbar-events",[c])])},K$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":q$({title:A.none(),items:[]}),"overflow-button":j9({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:rD(t,s)}},_V=t=>{const s=K$(t),c=4,l=oD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return oD.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Ya(d),h=aa(d),y=Ya(h),w=Math.max(h.dom.scrollHeight,y.height);return cr(g.x+c,y.y,g.width-c*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},AV=t=>{const s=sD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=sD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=K$(t);return sD.sketch({...l,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([UO()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([UO()],{type:"closed"}),t.onToggled(d,!1)}})},UE=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Km.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===gu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Km.parts.groups({})],toolbarBehaviours:rD(t,s)})},Y$=[Op,yd,yc("tooltip"),Ni("buttonType","secondary",["primary","secondary"]),Jr("borderless",!1),Kl("onAction")],OV=[...Y$,uh,_a("type",["button"])],DV=[...Y$,Jr("active",!1),_a("type",["togglebutton"])],X$={button:OV,togglebutton:DV},RV=[_a("type",["group"]),k("buttons",[],Hc("type",X$))],MV=Hc("type",{...X$,group:RV}),J$=Dn([k("buttons",[],MV),Kl("onShow"),Kl("onHide")]),NV=t=>Mr("view",J$,t),BV=(t,s)=>{var c,l;const d=t.type==="togglebutton",g=t.icon.map(Se=>hh(Se,s.icons)).map(Rs),y=Se=>{const et=Mt=>{g.map(Xe=>Xe.getOpt(Se).each(rn=>{Un.set(rn,[hh(Mt,s.icons)])}))},$e=Mt=>{const Xe=Se.element;Mt?(yr(Xe,"tox-button--enabled"),St(Xe,"aria-pressed",!0)):(Ur(Xe,"tox-button--enabled"),oe(Xe,"aria-pressed"))},yt=()=>hi(Se.element,"tox-button--enabled");if(d)return t.onAction({setIcon:et,setActive:$e,isActive:yt});if(t.type==="button")return t.onAction({setIcon:et})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=_E((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),P=O.map(ec),H=w.tooltip.or(O).map(Se=>({"aria-label":s.translate(Se)})).getOr({}),V=g.map(Se=>Se.asSpec()),G=ob([V,P]),ne=t.icon.isSome()&&P.isSome(),_e={tag:"button",classes:_.concat(...t.icon.isSome()&&!ne?["tox-button--icon"]:[]).concat(...ne?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:H},le=[],Ee=Lv(w,A.some(y),le,_e,G,t.tooltip,s);return cl.sketch(Ee)},WE=(t,s)=>BV(t,s),PV=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Me(t.buttons,c=>WE(c,s))}),vw=ul().deviceType,$V=vw.isPhone(),Q$=vw.isTablet(),FV=t=>{let s=!1;const c=Me(t.buttons,l=>l.type==="group"?(s=!0,PV(l,t.providers)):WE(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...$V||Q$?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:bt([Ln.config({}),gn.config({mode:"flow",selector:"button, .tox-button",focusInside:oh.OnEnterOrSpaceMode})]),components:s?c:[Zm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Zm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},IV=t=>({uid:t.uid,behaviours:bt([Ln.config({}),wr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),vG=(t,s,c,l)=>{const d={getPane:g=>Ba.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:bt([Ln.config({}),gn.config({mode:"cyclic",focusInside:oh.OnEnterOrSpaceMode})]),apis:d}};var qv=pl({name:"silver.View",configFields:[Ye("viewConfig")],partFields:[Hi({factory:{sketch:FV},schema:[Ye("buttons"),Ye("providers")],name:"header"}),Hi({factory:{sketch:IV},schema:[],name:"pane"})],factory:vG,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const LV=(t,s,c)=>dc(s,(l,d)=>{const g=ut(NV(l));return t.slot(d,qv.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[qv.parts.header({buttons:g.buttons,providers:c})]:[],qv.parts.pane({})]}))}),cD=(t,s)=>Za.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:LV(c,t,s),slotBehaviours:vv.unnamedEvents([Er(l=>Za.hideAllSlots(l))])})),eF=t=>He(Za.getSlotNames(t),s=>Za.isShowing(t,s)),ZE=t=>{const s=t.element;qt(s,"display","none"),St(s,"aria-hidden","true")},tF=t=>{const s=t.element;$o(s,"display"),oe(s,"aria-hidden")},nF=t=>({getContainer:W(t)}),jE=(t,s,c)=>{Za.getSlot(t,s).each(l=>{qv.getPane(l).each(d=>{c(l)(nF(d.element.dom))})})},HV=(t,s)=>jE(t,s,qv.getOnShow),oF=(t,s)=>jE(t,s,qv.getOnHide);var Cw=ei({factory:(t,s)=>{const g={setViews:(h,y)=>{Un.set(h,[cD(y,s.backstage.shared.providers)])},whichView:h=>Xo.getCurrent(h).bind(eF),toggleView:(h,y,w,_)=>Xo.getCurrent(h).exists(O=>{const P=eF(O),H=P.exists(G=>_===G),V=Za.getSlot(O,_).isSome();return V&&(Za.hideAllSlots(O),H?(ZE(h),y()):(w(),tF(h),Za.showSlot(O,_),HV(O,_)),P.each(G=>oF(O,G))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:bt([Un.config({}),Xo.config({find:h=>{const y=Un.contents(h);return xs(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ye("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,l,d)=>t.toggleView(s,c,l,d),whichView:(t,s)=>t.whichView(s)}});const zV=(t,s,c)=>{let l=!1;const d=h=>{Rl(h,".tox-statusbar").each(y=>{$s(y,"display")==="none"&&_s(y,"aria-hidden")==="true"?($o(y,"display"),oe(y,"aria-hidden")):(qt(y,"display","none"),St(y,"aria-hidden","true"))})},g={getSocket:h=>Ba.getPart(h,t,"socket"),setSidebar:(h,y,w)=>{Ba.getPart(h,t,"sidebar").each(_=>YO(_,y,w))},toggleSidebar:(h,y)=>{Ba.getPart(h,t,"sidebar").each(w=>sV(w,y))},whichSidebar:h=>Ba.getPart(h,t,"sidebar").bind(XO).getOrNull(),getHeader:h=>Ba.getPart(h,t,"header"),getToolbar:h=>Ba.getPart(h,t,"toolbar"),setToolbar:(h,y)=>{Ba.getPart(h,t,"toolbar").each(w=>{const _=Me(y,VE);w.getApis().setGroups(w,_)})},setToolbars:(h,y)=>{Ba.getPart(h,t,"multiple-toolbar").each(w=>{const _=Me(y,O=>Me(O,VE));x$.setItems(w,_)})},refreshToolbar:h=>{Ba.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{Ba.getPart(h,t,"toolbar").each(y=>{os(y.getApis().toggle,w=>w(y))})},toggleToolbarDrawerWithoutFocusing:h=>{Ba.getPart(h,t,"toolbar").each(y=>{os(y.getApis().toggleWithoutFocusing,w=>w(y))})},isToolbarDrawerToggled:h=>Ba.getPart(h,t,"toolbar").bind(y=>A.from(y.getApis().isOpen).map(w=>w(y))).getOr(!1),getThrobber:h=>Ba.getPart(h,t,"throbber"),focusToolbar:h=>{Ba.getPart(h,t,"toolbar").orThunk(()=>Ba.getPart(h,t,"multiple-toolbar")).each(w=>{gn.focusIn(w)})},setMenubar:(h,y)=>{Ba.getPart(h,t,"menubar").each(w=>{GO.setMenus(w,y)})},focusMenubar:h=>{Ba.getPart(h,t,"menubar").each(y=>{GO.focus(y)})},setViews:(h,y)=>{Ba.getPart(h,t,"viewWrapper").each(w=>{Cw.setViews(w,y)})},toggleView:(h,y)=>Ba.getPart(h,t,"viewWrapper").exists(w=>Cw.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),y)),whichView:h=>Ba.getPart(h,t,"viewWrapper").bind(Cw.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),Ba.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),qt(w,"display","none"),St(w,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),Ba.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),$o(w,"display"),oe(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},VV=bh.optional({factory:GO,name:"menubar",schema:[Ye("backstage")]}),UV=t=>t.type===gu.sliding?AV:t.type===gu.floating?_V:UE,aD=bh.optional({factory:{sketch:t=>x$.sketch({uid:t.uid,dom:t.dom,listBehaviours:bt([gn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>UE({type:t.type,uid:Ut("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,l,d)=>{Km.setGroups(c,l)},shell:!0})},name:"multiple-toolbar",schema:[Ye("dom"),Ye("onEscape")]}),WV=bh.optional({factory:{sketch:t=>{const s=UV(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[Ye("dom"),Ye("onEscape"),Ye("getSink")]}),ZV=bh.optional({factory:{sketch:Uv},name:"header",schema:[Ye("dom")]}),sF=bh.optional({factory:{sketch:Jz},name:"promotion",schema:[Ye("dom")]}),rF=bh.optional({name:"socket",schema:[Ye("dom")]}),GE=bh.optional({factory:{sketch:rV},name:"sidebar",schema:[Ye("dom")]}),lD=bh.optional({factory:{sketch:L$},name:"throbber",schema:[Ye("dom")]}),jV=bh.optional({factory:Cw,name:"viewWrapper",schema:[Ye("backstage")]}),GV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),cF=bh.optional({factory:{sketch:GV},name:"editorContainer",schema:[]});var Sr=pl({name:"OuterContainer",factory:zV,configFields:[Ye("dom"),Ye("behaviours")],partFields:[ZV,VV,WV,aD,rF,GE,sF,lD,jV,cF],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,l)=>{t.setSidebar(s,c,l)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const qV="file edit view insert format tools table help",aF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},lF=(t,s,c)=>{const l=t4(c).split(/[ ,]/);return{text:t.title,getItems:()=>ye(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Vs(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},iD=t=>t.split(" "),iF=(t,s)=>{const c={...aF,...s.menus},l=ps(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?iD(qV):iD(s.menubar===!1?"":s.menubar),g=ao(d,y=>{const w=Mo(aF,y);return l?w||ht(s.menus,y).exists(_=>Mo(_,"items")):w}),h=Me(g,y=>{const w=c[y];return lF({title:w.title,items:iD(w.items)},s,t)});return ao(h,y=>{const w=_=>We(_)||_.type!=="separator";return y.getItems().length>0&&Vs(y.getItems(),w)})},uD=t=>{const s=()=>{t._skinLoaded=!0,T8(t)};return()=>{t.initialized?s():t.on("init",s)}},KV=(t,s)=>()=>E8(t,{message:s}),uF=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),qE=(t,s,c,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,c)),YV=async(t,s)=>{const l="ui/"+tT(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(l);if(We(d))qE(t,l,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return uF(t,h,t.ui.styleSheetLoader)}},dF=async(t,s)=>{if(we(be.fromDom(t.getElement()))){const d="ui/"+tT(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(We(g))qE(t,d,g,G1.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,y=s+`/skin.shadowdom${h}.css`;return uF(t,y,G1.DOM.styleSheetLoader)}}},XV=async(t,s)=>{const c=()=>{const d=i4(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};tT(s).fold(c,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);We(h)?qE(s,g,h,s.ui.styleSheetLoader):c()});const l=i4(s);if(!l4(s)&&We(l))return Promise.all([YV(s,l),dF(s,l)]).then()},dD=(t,s)=>XV(t,s).then(uD(s),KV(s,"Skin could not be loaded")),JV=xn(dD,!1),QV=xn(dD,!0),Kv=(t,s,c)=>re(c)?t.translate(s):t.translate([s,t.translate(c)]),mF=(t,s)=>{const c=(h,y,w,_)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const P=ye(h.getStyleItems(),H=>l(H,y,_));return y===0&&P.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:P.length>0,getSubmenuItems:()=>ye(h.getStyleItems(),H=>l(H,y,_))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(_),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},l=(h,y,w)=>{const _=h.type==="formatter"&&s.isInvalid(h);return y===0?_?[]:c(h,y,!1,w).toArray():c(h,y,_,w).toArray()},d=h=>{const y=s.getCurrentValue(),w=s.shouldHide?0:1;return ye(h,_=>l(_,w,y))};return{validateItems:d,getFetch:(h,y)=>(w,_)=>{const O=y(),P=d(O),H=Fv(P,om.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});_(H)}}},Yv=(t,s)=>{const c=s.dataset,l=c.type==="basic"?()=>Me(c.data,d=>s$(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:mF(t,s),getStyleItems:l}},ww=(t,s,c,l,d,g)=>{const{items:h,getStyleItems:y}=Yv(s,c),w=fn(c.tooltip),_=P=>({getComponent:W(P),setTooltip:H=>{const V=s.shared.providers.translate(H);St(P.element,"aria-label",V),w.set(H)}}),O=P=>{const H=V=>P.setTooltip(Kv(t,l(V.value),V.value));return t.on(d,H),$2(cb(t,"NodeChange",V=>{const G=V.getComponent();c.updateText(G),Pn.set(V.getComponent(),!t.selection.isEditable())})(P),()=>t.off(d,H))};return pE({text:c.icon.isSome()?A.none():c.text,icon:c.icon,ariaLabel:A.some(c.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,y),onSetup:O,getApi:_,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Ua.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:P=>{if(c.tooltip!==w.get()){const H=s.shared.providers.translate(w.get());Ua.setComponents(P,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},eU=t=>Me(t,s=>{let c=s,l=s;const d=s.split("=");return d.length>1&&(c=d[0],l=d[1]),{title:c,format:l}}),mD=t=>({type:"basic",data:t});var Fp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Fp||(Fp={}));const tU=(t,s)=>s===Fp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),fD=(t,s,c)=>{const l=t.options.get(s);return{type:"basic",data:eU(tU(l,c))}},nU="Align",fF=W("Alignment {0}"),gF="left",gD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],hF=t=>{const s=()=>He(gD,y=>t.formatter.match(y.format)),c=y=>()=>t.formatter.match(y),l=y=>A.none,d=y=>{const _=s().fold(W(gF),O=>O.title.toLowerCase());Tn(y,Np,{icon:`align-${_}`}),R8(t,{value:_})},g=mD(gD),h=y=>()=>He(gD,w=>w.format===y.format).each(w=>t.execCommand(w.command));return{tooltip:Kv(t,fF(),gF),text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},oU=(t,s)=>ww(t,s,hF(t),fF,"AlignTextUpdate","align"),sU=(t,s)=>{const c=Yv(s,hF(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(nU),onSetup:ni(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},hD=(t,s)=>{const c=s(),l=Me(c,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>He(c,g=>g.format===d))},KE="Blocks",YE=W("Block {0}"),XE="Paragraph",vh=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const y=hD(t,()=>d.data).fold(W(XE),w=>w.title);Tn(g,kd,{text:y}),lB(t,{value:y})},d=fD(t,"block_formats",Fp.SemiColon);return{tooltip:Kv(t,YE(),XE),text:A.some(XE),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:c,onAction:iB(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},pF=(t,s)=>ww(t,s,vh(t),YE,"BlocksTextUpdate","blocks"),rU=(t,s)=>{const c=Yv(s,vh(t));t.ui.registry.addNestedMenuItem("blocks",{text:KE,onSetup:ni(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},cU="Fonts",bF=W("Font {0}"),pD="System Font",aU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],vF=t=>{const s=t.split(/\s*,\s*/);return Me(s,c=>c.replace(/^['"]+|['"]+$/g,""))},yF=(t,s)=>s.length>0&&ln(s,c=>t.indexOf(c.toLowerCase())>-1),CF=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=vF(t.toLowerCase());return yF(c,aU)||yF(c,s)}else return!1},wF=t=>{const s=()=>{const w=G=>G?vF(G)[0]:"",_=t.queryCommandValue("FontName"),O=y.data,P=_?_.toLowerCase():"",H=WM(t);return{matchOpt:He(O,G=>{const ne=G.format;return ne.toLowerCase()===P||w(ne).toLowerCase()===w(P).toLowerCase()}).orThunk(()=>un(CF(P,H),{title:pD,format:P})),font:_}},c=w=>_=>_.exists(O=>O.format===w),l=()=>{const{matchOpt:w}=s();return w},d=w=>()=>A.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:_,font:O}=s(),P=_.fold(W(O),H=>H.title);Tn(w,kd,{text:P}),M8(t,{value:P})},y=fD(t,"font_family_formats",Fp.SemiColon);return{tooltip:Kv(t,bF(),pD),text:A.some(pD),icon:A.none(),isSelectedFor:c,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:co}},lU=(t,s)=>ww(t,s,wF(t),bF,"FontFamilyTextUpdate","fontfamily"),bD=(t,s)=>{const c=Yv(s,wF(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(cU),onSetup:ni(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},iU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},uU=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),l="\\.",d=y=>`(?:${y})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(c),l+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),dU=(t,s)=>Vs(s,c=>Vs(iU[c],l=>t===l)),JE=(t,s)=>A.from(uU.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return dU(g,s)?A.some({value:d,unit:g}):A.none()}),mU=(t,s)=>JE(t,s).map(({value:c,unit:l})=>c+l),SF={tab:W(9),escape:W(27),enter:W(13),backspace:W(8),delete:W(46),left:W(37),up:W(38),right:W(39),down:W(40),space:W(32),home:W(36),end:W(35),pageUp:W(33),pageDown:W(34)},xF=(t,s,c,l)=>{let d=A.none();const g=Se=>Se.map(et=>Wt.getValue(et)).getOr(""),h=cb(t,"NodeChange SwitchMode",Se=>{const et=Se.getComponent();d=A.some(et),c.updateInputValue(et),Pn.set(et,!t.selection.isEditable())}),y=Se=>({getComponent:W(Se)}),w=fn(ee),_=Ut("custom-number-input-events"),O=(Se,et,$e)=>{const yt=g(d),Mt=c.getNewValue(yt,Se),Xe=yt.length-`${Mt}`.length,rn=d.map(On=>On.element.dom.selectionStart-Xe),Zt=d.map(On=>On.element.dom.selectionEnd-Xe);c.onAction(Mt,$e),d.each(On=>{Wt.setValue(On,Mt),et&&(rn.each(Sn=>On.element.dom.selectionStart=Sn),Zt.each(Sn=>On.element.dom.selectionEnd=Sn))})},P=(Se,et)=>O(($e,yt)=>$e-yt,Se,et),H=(Se,et)=>O(($e,yt)=>$e+yt,Se,et),V=Se=>wa(Se.element).fold(A.none,et=>(Bi(et),A.some(!0))),G=Se=>y1(Se.element)?(Cl(Se.element).each(et=>Bi(et)),A.some(!0)):A.none(),ne=(Se,et,$e,yt)=>{const Mt=fn(ee),Xe=s.shared.providers.translate($e),rn=Ut("altExecuting"),Zt=cb(t,"NodeChange SwitchMode",Sn=>{Pn.set(Sn.getComponent(),!t.selection.isEditable())}),On=Sn=>{Pn.isDisabled(Sn)||Se(!0)};return cl.sketch({dom:{tag:"button",attributes:{"aria-label":Xe,"data-mce-name":et},classes:yt.concat(et)},components:[fO(et,s.shared.providers.icons)],buttonBehaviours:bt([Pn.config({}),Ua.config(s.shared.providers.tooltips.getConfig({tooltipText:Xe})),io(rn,[dh({onSetup:Zt,getApi:y},Mt),Il({getApi:y},Mt),Qe(Pu(),(Sn,gs)=>{(gs.event.raw.keyCode===SF.space()||gs.event.raw.keyCode===SF.enter())&&(Pn.isDisabled(Sn)||Se(!1))}),Qe(Tg(),On),Qe(Dc(),On)])]),eventOrder:{[Pu()]:[rn,"keying"],[Tg()]:[rn,"alloy.base.behaviour"],[Dc()]:[rn,"alloy.base.behaviour"],[Al()]:["alloy.base.behaviour",rn,"tooltipping"],[cu()]:[rn,"tooltipping"]}})},_e=Rs(ne(Se=>P(!1,Se),"minus","Decrease font size",[])),le=Rs(ne(Se=>H(!1,Se),"plus","Increase font size",[])),Ee=Rs({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Q1.sketch({inputBehaviours:bt([Pn.config({}),io(_,[dh({onSetup:h,getApi:y},w),Il({getApi:y},w)]),io("input-update-display-text",[Qe(kd,(Se,et)=>{Wt.setValue(Se,et.event.text)}),Qe(zd(),Se=>{c.onAction(Wt.getValue(Se))}),Qe($h(),Se=>{c.onAction(Wt.getValue(Se))})]),gn.config({mode:"special",onEnter:Se=>(O(Dt,!0,!0),A.some(!0)),onEscape:V,onUp:Se=>(H(!0,!1),A.some(!0)),onDown:Se=>(P(!0,!1),A.some(!0)),onLeft:(Se,et)=>(et.cut(),A.none()),onRight:(Se,et)=>(et.cut(),A.none())})])})],behaviours:bt([Ln.config({}),gn.config({mode:"special",onEnter:G,onSpace:G,onEscape:V}),io("input-wrapper-events",[Qe(Hd(),Se=>{Je([_e,le],et=>{const $e=be.fromDom(et.get(Se).element.dom);y1($e)&&v1($e)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Wn(l)?{"data-mce-name":l}:{}}},components:[_e.asSpec(),Ee.asSpec(),le.asSpec()],behaviours:bt([Ln.config({}),gn.config({mode:"flow",focusInside:oh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Se=>y1(Se.element)?A.none():(Bi(Se.element),A.some(!0))})])}},TF="Font sizes",vD=W("Font size {0}"),EF="12pt",kF={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},fU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},gU=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},hU=(t,s)=>/[0-9.]+px$/.test(t)?gU(parseInt(t,10)*72/96,s||0)+"pt":ht(fU,t).getOr(t),_F=t=>ht(kF,t).getOr(""),AF=t=>{const s=()=>{let w=A.none();const _=y.data,O=t.queryCommandValue("FontSize");if(O)for(let P=3;w.isNone()&&P>=0;P--){const H=hU(O,P),V=_F(H);w=He(_,G=>G.format===O||G.format===H||G.format===V)}return{matchOpt:w,size:O}},c=w=>_=>_.exists(O=>O.format===w),l=()=>{const{matchOpt:w}=s();return w},d=W(A.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:_,size:O}=s(),P=_.fold(W(O),H=>H.title);Tn(w,kd,{text:P}),m3(t,{value:P})},y=fD(t,"font_size_formats",Fp.Space);return{tooltip:Kv(t,vD(),EF),text:A.some(EF),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:co}},OF=(t,s)=>ww(t,s,AF(t),vD,"FontSizeTextUpdate","fontsize"),pU=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},bU=16,vU=t=>t>=0,yU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Tn(l,kd,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{JE(l,["unsupportedLength","empty"]);const g=s(),h=JE(l,["unsupportedLength","empty"]).or(JE(g,["unsupportedLength","empty"])),y=h.map(H=>H.value).getOr(bU),w=s4(t),_=h.map(H=>H.unit).filter(H=>H!=="").getOr(w),O=d(y,pU(_).step),P=`${vU(O)?O:y}${_}`;return P!==g&&aB(t,{value:P}),P}}},CU=(t,s)=>xF(t,s,yU(t),"fontsizeinput"),wU=(t,s)=>{const c=Yv(s,AF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:TF,onSetup:ni(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},SU="Formats",yD=t=>re(t)?"Formats":"Format {0}",DF=(t,s)=>{const c="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const y=t.formatter.get(h);return y!==void 0?A.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const y=P=>X5(P)?ye(P.items,y):J5(P)?[{title:P.title,format:P.format}]:[],w=ye(n$(t),y),O=hD(t,W(w)).fold(W({title:c,tooltipLabel:""}),P=>({title:P.title,tooltipLabel:P.title}));Tn(h,kd,{text:O.title}),D8(t,{value:O.tooltipLabel})};return{tooltip:Kv(t,yD(""),""),text:A.some(c),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:iB(t),updateText:g,shouldHide:MM(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},xU=(t,s)=>{const c={type:"advanced",...s.styles};return ww(t,s,DF(t,c),yD,"StylesTextUpdate","styles")},TU=(t,s)=>{const c={type:"advanced",...s.styles},l=Yv(s,DF(t,c));t.ui.registry.addNestedMenuItem("styles",{text:SU,onSetup:ni(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},EU=W([Ye("toggleClass"),Ye("fetch"),au("onExecute"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Pf(),au("onItemExecute"),us("lazySink"),Ye("dom"),Yo("onOpen"),ba("splitDropdownBehaviours",[ic,gn,Ln]),Te("matchWidth",!1),Te("useMinWidth",!1),Te("eventOrder",{}),us("role"),us("listRole")].concat(GT())),kU=Va({factory:cl,schema:[Ye("dom")],name:"arrow",defaults:()=>({buttonBehaviours:bt([Ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(yf)},buttonBehaviours:bt([So.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),_U=Va({factory:cl,schema:[Ye("dom")],name:"button",defaults:()=>({buttonBehaviours:bt([Ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),AU=W([kU,_U,Hi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ye("text")],name:"aria-descriptor"}),du({schema:[Fg()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,c)})}})}),BB()]),RF=(t,s,c,l)=>{const d=O=>{Xo.getCurrent(O).each(P=>{Nt.highlightFirst(P),gn.focusIn(P)})},g=O=>{S3(t,Dt,O,l,d,ti.HighlightMenuAndItem).get(ee)},h=O=>(g(O),A.some(!0)),y=O=>{const P=Pl(O,t,"button");return yf(P),A.some(!0)},w={...vr([Er((O,P)=>{pt(O,t,"aria-descriptor").each(V=>{const G=Ut("aria");St(V.element,"id",G),St(O.element,"aria-describedby",G)})})]),...Ux(A.some(g))},_={repositionMenus:O=>{So.isOn(O)&&E3(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[ru()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:va(t.splitDropdownBehaviours,[ic.config({others:{sandbox:O=>{const P=Pl(O,t,"arrow");return T3(t,O,{onOpen:()=>{So.on(P),So.on(O)},onClose:()=>{So.off(P),So.off(O)}})}}}),gn.config({mode:"special",onSpace:y,onEnter:y,onDown:h}),Ln.config({}),So.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},QE=pl({name:"SplitDropdown",configFields:EU(),partFields:AU(),factory:RF,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),MF=t=>({isEnabled:()=>!Pn.isDisabled(t),setEnabled:s=>Pn.set(t,!s),setText:s=>Tn(t,kd,{text:s}),setIcon:s=>Tn(t,Np,{icon:s})}),NF=t=>({setActive:s=>{So.set(t,s)},isActive:()=>So.isOn(t),isEnabled:()=>!Pn.isDisabled(t),setEnabled:s=>Pn.set(t,!s),setText:s=>Tn(t,kd,{text:s}),setIcon:s=>Tn(t,Np,{icon:s})}),BF=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),CD=Ut("focus-button"),ek=(t,s,c,l,d,g)=>{const h=s.map(w=>Rs(gO(w,"tox-tbtn",d))),y=t.map(w=>Rs(hh(w,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...BF(c,d),...Wn(g)?{"data-mce-name":g}:{}}},components:ob([y.map(w=>w.asSpec()),h.map(w=>w.asSpec())]),eventOrder:{[_l()]:["focusing","alloy.base.behaviour",vb],[Al()]:[vb,"toolbar-group-button-events"]},buttonBehaviours:bt([am.toolbarButton(d.isDisabled),ta(),io(vb,[Er((w,_)=>hE(w)),Qe(kd,(w,_)=>{h.bind(O=>O.getOpt(w)).each(O=>{Un.set(O,[ec(d.translate(_.event.text))])})}),Qe(Np,(w,_)=>{y.bind(O=>O.getOpt(w)).each(O=>{Un.set(O,[hh(_.event.icon,d.icons)])})}),Qe(_l(),(w,_)=>{_.event.prevent(),po(w,CD)})])].concat(l.getOr([])))}},OU=(t,s,c,l,d)=>{const g=s.shared,h=fn(ee),y={toolbarButtonBehaviours:[],getApi:MF,onSetup:t.onSetup},w=[io("toolbar-group-button-events",[dh(y,h),Il(y,h)])];return $p.sketch({lazySink:g.getSink,fetch:()=>bl.nu(_=>{_(Me(c(t.items),VE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:ek(t.icon,t.text,t.tooltip,A.some(w),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},PF=(t,s,c,l)=>{var d;const g=fn(ee),h=ek(t.icon,t.text,t.tooltip,A.none(),c,l);return cl.sketch({dom:h.dom,components:h.components,eventOrder:gE,buttonBehaviours:{...bt([io("toolbar-button-events",[mO({onAction:t.onAction,getApi:s.getApi}),dh(s,g),Il(s,g)]),...t.tooltip.map(y=>Ua.config(c.tooltips.getConfig({tooltipText:c.translate(y)+t.shortcut.map(w=>` (${BT(w)})`).getOr("")}))).toArray(),am.toolbarButton(()=>!t.enabled||c.isDisabled()),ta()].concat(s.toolbarButtonBehaviours)),[vb]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[vb]}})},DU=(t,s,c)=>wb(t,s,[],c),wb=(t,s,c,l)=>PF(t,{toolbarButtonBehaviours:c.length>0?[io("toolbarButtonWith",c)]:[],getApi:MF,onSetup:t.onSetup},s,l),RU=(t,s,c)=>$F(t,s,[],c),$F=(t,s,c,l)=>PF(t,{toolbarButtonBehaviours:[Un.config({}),So.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[io("toolbarToggleButtonWith",c)]:[]),getApi:NF,onSetup:t.onSetup},s,l),MU=(t,s,c)=>l=>bl.nu(d=>s.fetch(d)).map(d=>A.from(xv(ar(v3(Ut("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,om.CLOSE_ON_EXECUTE,s.select.getOr(co),c),{movement:ZT(s.columns,s.presets),menuBehaviours:vv.unnamedEvents(s.columns!=="auto"?[]:[Er((g,h)=>{RT(g,4,F4(s.presets)).each(({numRows:y,numColumns:w})=>{gn.setGridSize(g,y,w)})})])})))),NU=(t,s,c)=>{const l=fn(t.tooltip.getOr("")),d=y=>({isEnabled:()=>!Pn.isDisabled(y),setEnabled:w=>Pn.set(y,!w),setIconFill:(w,_)=>{Os(y.element,`svg path[class="${w}"], rect[class="${w}"]`).each(O=>{St(O,"fill",_)})},setActive:w=>{St(y.element,"aria-pressed",w),Os(y.element,"span").each(_=>{y.getSystem().getByDom(_).each(O=>So.set(O,w))})},isActive:()=>Os(y.element,"span").exists(w=>y.getSystem().getByDom(w).exists(So.isOn)),setText:w=>Os(y.element,"span").each(_=>y.getSystem().getByDom(_).each(O=>Tn(O,kd,{text:w}))),setIcon:w=>Os(y.element,"span").each(_=>y.getSystem().getByDom(_).each(O=>Tn(O,Np,{icon:w}))),setTooltip:w=>{const _=s.providers.translate(w);St(y.element,"aria-label",_),l.set(w)}}),g=fn(ee),h={getApi:d,onSetup:t.onSetup};return QE.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...BF(t.tooltip,s.providers),...Wn(c)?{"data-mce-name":c}:{}}},onExecute:y=>{const w=d(y);w.isEnabled()&&t.onAction(w)},onItemExecute:(y,w,_)=>{},splitDropdownBehaviours:bt([am.splitButton(s.providers.isDisabled),ta(),io("split-dropdown-events",[Er((y,w)=>hE(y)),Qe(CD,Ln.focus),dh(h,g),Il(h,g)]),Ov.config({}),...t.tooltip.map(y=>Ua.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(y),onShow:w=>{if(l.get()!==y){const _=s.providers.translate(l.get());Ua.setComponents(w,s.providers.tooltips.getComponents({tooltipText:_}))}}})})).toArray()]),eventOrder:{[Al()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[cu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:MU(d,t,s.providers),parts:{menu:T2(!1,t.columns,t.presets)},components:[QE.parts.button(ek(t.icon,t.text,A.none(),A.some([So.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),QE.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:sN("chevron-down",s.providers.icons)},buttonBehaviours:bt([am.splitButton(s.providers.isDisabled),ta(),O4()])}),QE.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},BU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Sw=(t,s)=>(c,l,d,g)=>{const h=t(c).mapError(y=>tu(y)).getOrDie();return s(h,l,d,g)},PU={button:Sw(rm,(t,s,c,l)=>DU(t,s.shared.providers,l)),togglebutton:Sw(_T,(t,s,c,l)=>RU(t,s.shared.providers,l)),menubutton:Sw(PE,(t,s,c,l)=>ow(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:Sw(pw,(t,s,c,l)=>NU(t,s.shared,l)),grouptoolbarbutton:Sw(jO,(t,s,c,l)=>{const d=c.ui.registry.getAll().buttons,g=y=>nk(c,{buttons:d,toolbar:y,allowToolbarGroups:!1},s,A.none()),h={[Bf]:s.shared.header.isPositionedAtTop()?Nf.TopToBottom:Nf.BottomToTop};switch(K1(c)){case gu.floating:return OU(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},$U=(t,s,c,l)=>ht(PU,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,c,l))),tk={styles:xU,fontsize:OF,fontsizeinput:CU,fontfamily:lU,blocks:pF,align:oU},FU=t=>{const s=Me(BU,c=>{const l=ao(c.items,d=>Mo(t,d)||Mo(tk,d));return{name:c.name,items:l}});return ao(s,c=>c.items.length>0)},IU=t=>{const s=t.split("|");return Me(s,c=>({items:c.trim().split(" ")}))},FF=t=>Ue(t,s=>Mo(s,"name")&&Mo(s,"items")),IF=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?FU(c):We(s)?IU(s):FF(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},LU=(t,s,c,l,d,g)=>ht(s,c.toLowerCase()).orThunk(()=>g.bind(h=>Bs(h,y=>ht(s,y+c.toLowerCase())))).fold(()=>ht(tk,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):$U(h,d,t,c.toLowerCase())),nk=(t,s,c,l)=>{const d=IF(s),g=Me(d,h=>{const y=ye(h.items,w=>w.trim().length===0?[]:LU(t,s.buttons,w,s.allowToolbarGroups,c,l).toArray());return{title:A.from(t.translate(h.name)),items:y}});return ao(g,h=>h.items.length>0)},LF=(t,s,c,l)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(Ue(g,We)){const y=g.map(w=>{const _={toolbar:w,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return nk(t,_,l,A.none())});Sr.setToolbars(d,y)}else Sr.setToolbar(d,nk(t,c,l,A.none()))},HF=ul(),HU=HF.os.isiOS()&&HF.os.version.major<=12,zU=(t,s)=>{const{uiMotherships:c}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=fn(pr(d.innerWidth,d.innerHeight)),y=fn(pr(g.offsetWidth,g.offsetHeight)),w=()=>{const H=h.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(h.set(pr(d.innerWidth,d.innerHeight)),Cv(t))},_=()=>{const H=t.getDoc().documentElement,V=y.get();(V.left!==H.offsetWidth||V.top!==H.offsetHeight)&&(y.set(pr(H.offsetWidth,H.offsetHeight)),Cv(t))},O=H=>{rB(t,H)};l.bind(d,"resize",w),l.bind(d,"scroll",O);const P=aC(be.fromDom(t.getBody()),"load",_);t.on("hide",()=>{Je(c,H=>{qt(H.element,"display","none")})}),t.on("show",()=>{Je(c,H=>{$o(H.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{P.unbind(),l.unbind(d,"resize",w),l.unbind(d,"scroll",O),d=null})},zF=(t,s,c)=>{Tp(t)&&Xd(c.mainUi.mothership.element,c.popupUi.mothership),ux(s,c.dialogUi.mothership)};var VU=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=s,y=fn(0),w=g.outerContainer;JV(t);const _=be.fromDom(d.targetNode),O=ce(U(_));Xd(_,g.mothership),zF(t,O,s),t.on("SkinLoaded",()=>{Sr.setSidebar(w,c.sidebar,VM(t)),LF(t,s,c,l),y.set(t.getWin().innerWidth),Sr.setMenubar(w,iF(t,c)),Sr.setViews(w,c.views),zU(t,s)});const P=Sr.getSocket(w).getOrDie("Could not find expected socket element");if(HU){or(P.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ne=GH(()=>{t.dispatch("ScrollContent")},20),_e=Nl(P.element,"scroll",ne.throttle);t.on("remove",_e.unbind)}MT(t,s),t.addCommand("ToggleSidebar",(ne,_e)=>{Sr.toggleSidebar(w,_e),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ne;return(ne=Sr.whichSidebar(w))!==null&&ne!==void 0?ne:""}),t.addCommand("ToggleView",(ne,_e)=>{if(Sr.toggleView(w,_e)){const le=w.element;g.mothership.broadcastOn([Jd()],{target:le}),Je(h,Ee=>{Ee.broadcastOn([Jd()],{target:le})}),Do(Sr.whichView(w))&&(t.focus(),t.nodeChanged(),Sr.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var ne;return(ne=Sr.whichView(w))!==null&&ne!==void 0?ne:""});const H=K1(t),V=()=>{Sr.refreshToolbar(s.mainUi.outerContainer)};(H===gu.sliding||H===gu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ne=t.getWin().innerWidth;ne!==y.get()&&(V(),y.set(ne))});const G={setEnabled:ne=>{N2(s,!ne)},isEnabled:()=>!Pn.isDisabled(w)};return{iframeContainer:P.element.dom,editorContainer:w.element.dom,api:G}}});const VF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),wD=t=>zn(t)?t+"px":t,Sb=(t,s,c)=>{const l=s.filter(g=>t<g),d=c.filter(g=>t>g);return l.or(d).getOr(t)},UU=t=>{const s=QA(t),c=Gx(t),l=e4(t);return VF(s).map(d=>Sb(d,c,l))},ok=t=>UU(t).getOr(QA(t)),xw=t=>{const s=q1(t),c=mv(t),l=d2(t);return VF(s).map(d=>Sb(d,c,l))},UF=t=>xw(t).getOr(q1(t)),{ToolbarLocation:SD,ToolbarMode:WF}=gL,WU=40,ZU=(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=c,y=G1.DOM,w=fv(t),_=gv(t),O=d2(t).or(xw(t)),P=l.shared.header,H=P.isPositionedAtTop,V=150,G=K1(t),ne=G===WF.sliding||G===WF.floating,_e=fn(!1),le=()=>_e.get()&&!t.removed,Ee=Bo=>ne?Bo.fold(W(0),kt=>kt.components().length>1?ur(kt.components()[1].element):0):0,Se=Bo=>{switch(n4(t)){case SD.auto:const kt=Sr.getToolbar(g.outerContainer),Jt=Ee(kt),oo=ur(Bo.element)-Jt,Mn=Rr(s);if(Mn.y>oo)return"top";{const Qn=aa(s),er=Math.max(Qn.dom.scrollHeight,ur(Qn));return Mn.bottom<er-oo||cc().bottom<Mn.bottom-oo?"bottom":"top"}case SD.bottom:return"bottom";case SD.top:default:return"top"}},et=Bo=>{d.on(kt=>{Ir.setModes(kt,[Bo]),P.setDockingMode(Bo);const Jt=H()?Nf.TopToBottom:Nf.BottomToTop;St(kt.element,Bf,Jt)})},$e=()=>{d.on(Bo=>{const kt=O.getOrThunk(()=>bm().width-Jc(s).left-10);qt(Bo.element,"max-width",kt+"px")})},yt=(Bo,kt)=>{d.on(Jt=>{const oo=Sr.getToolbar(g.outerContainer),Mn=Ee(oo),En=Rr(s),Qn=Mt(t,g.outerContainer.element),er=()=>Qn.fold(()=>En.x,yl=>{const Yu=Rr(yl);return ss(yl,so())?En.x:En.x-Yu.x}),Ss=()=>Qn.fold(()=>H()?Math.max(En.y-ur(Jt.element)+Mn,0):En.bottom,yl=>{var Yu;const Dd=Rr(yl),Gi=(Yu=yl.dom.scrollTop)!==null&&Yu!==void 0?Yu:0,Db=ss(yl,so())?Math.max(En.y-ur(Jt.element)+Mn,0):En.y-Dd.y+Gi-ur(Jt.element)+Mn;return H()?Db:En.bottom}),zl=er(),Ku=un(Bo,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(yl=>yl>V).map(yl=>{const Yu=kt.getOr(Qc()),Dd=window.innerWidth-(zl-Yu.left),Gi=Math.max(Math.min(yl,Dd),V);return Dd<yl&&qt(g.outerContainer.element,"width",Gi+"px"),{width:Gi+"px"}}).getOr({width:"max-content"}),Xm={position:"absolute",left:Math.round(zl)+"px",top:Ss()+"px"};or(g.outerContainer.element,{...Xm,...Ku})})},Mt=(Bo,kt)=>Tp(Bo)?Sf(kt):A.none(),Xe=()=>{Je(h,Bo=>{Bo.broadcastOn([Qg()],{})})},rn=()=>!w&&(Tc(g.outerContainer.element).left+Lc(g.outerContainer.element)>=window.innerWidth-WU||Ys(g.outerContainer.element,"width").isSome())?(qt(g.outerContainer.element,"position","absolute"),qt(g.outerContainer.element,"left","0px"),$o(g.outerContainer.element,"width"),!0):!1,Zt=Bo=>{if(!le())return;w||$e();const kt=Qc(),Jt=w?!1:rn();if(ne&&Sr.refreshToolbar(g.outerContainer),!w){const oo=Qc(),Mn=un(kt.left!==oo.left,kt);yt(Jt,Mn),Mn.each(En=>{ef(En.left,oo.top)})}_&&d.on(Bo),Xe()},On=()=>w||!_||!le()?!1:d.get().exists(Bo=>{const kt=P.getDockingMode(),Jt=Se(Bo);return Jt!==kt?(et(Jt),!0):!1});return{isVisible:le,isPositionedAtTop:H,show:()=>{_e.set(!0),qt(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),Je(h,Bo=>{$o(Bo.element,"display")}),On(),Tp(t)?Zt(Bo=>Ir.isDocked(Bo)?Ir.reset(Bo):Ir.refresh(Bo)):Zt(Ir.refresh)},hide:()=>{_e.set(!1),qt(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),Je(h,Bo=>{qt(Bo.element,"display","none")})},update:Zt,updateMode:()=>{On()&&Zt(Ir.reset)},repositionPopups:Xe}},ZF=(t,s)=>{const c=Rr(t);return{pos:s?c.y:c.bottom,bounds:c}},sk=(t,s,c,l)=>{const d=fn(ZF(s,c.isPositionedAtTop())),g=_=>{const{pos:O,bounds:P}=ZF(s,c.isPositionedAtTop()),{pos:H,bounds:V}=d.get(),G=P.height!==V.height||P.width!==V.width;d.set({pos:O,bounds:P}),G&&Cv(t,_),c.isVisible()&&(H!==O?c.update(Ir.reset):G&&(c.updateMode(),c.repositionPopups()))};l||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(Ir.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let h=0;const y=cO(()=>c.update(Ir.refresh),33);t.on("ScrollWindow",()=>{const _=Qc().left;_!==h&&(h=_,y.throttle()),c.updateMode()}),Tp(t)&&t.on("ElementScroll",_=>{c.update(Ir.refresh)});const w=bc();w.set(aC(be.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{w.clear()})};var jF=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g}=s,h=Fs(),y=be.fromDom(d.targetNode),w=ZU(t,y,s,l,h),_=BM(t);QV(t);const O=()=>{if(h.isSet()){w.show();return}h.set(Sr.getHeader(g.outerContainer).getOrDie());const H=f2(t);Tp(t)?(Xd(y,g.mothership),Xd(y,s.popupUi.mothership)):ux(H,g.mothership),ux(H,s.dialogUi.mothership);const V=()=>{LF(t,s,c,l),Sr.setMenubar(g.outerContainer,iF(t,c)),w.show(),sk(t,y,w,_),t.nodeChanged()};_?t.once("SkinLoaded",V):V()};t.on("show",O),t.on("hide",w.hide),_||(t.on("focus",O),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||_)&&O()}),MT(t,s);const P={show:O,hide:w.hide,setEnabled:H=>{N2(s,!H)},isEnabled:()=>!Pn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:P}}});const GF=()=>{const t=Fs(),s=Fs(),c=Fs();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),h=s.get().map(y=>y.mothership);return g.fold(()=>h.toArray(),y=>h.fold(()=>[y],w=>ss(y.element,w.element)?[y]:[y,w]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(y=>h(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},qF="contexttoolbar-show",KF="contexttoolbar-hide",YF=t=>({hide:()=>po(t,Jp()),getValue:()=>Wt.getValue(t)}),XF=(t,s)=>Qe(t5,(c,l)=>{const d=t.get(c),g=YF(d);s.onAction(g,l.event.buttonApi)}),GU=(t,s,c)=>{const{primary:l,...d}=s.original,g=ut(rm({...d,type:"button",onAction:ee}));return wb(g,c,[XF(t,s)])},qU=(t,s,c)=>{const{primary:l,...d}=s.original,g=ut(_T({...d,type:"togglebutton",onAction:ee}));return $F(g,c,[XF(t,s)])},KU=t=>t.type==="contextformtogglebutton",YU=(t,s,c)=>KU(s)?qU(t,s,c):GU(t,s,c),Tw=(t,s,c)=>{const l=Me(s,h=>Rs(YU(t,h,c)));return{asSpecs:()=>Me(l,h=>h.asSpec()),findPrimary:h=>Bs(s,(y,w)=>y.primary?A.from(l[w]).bind(_=>_.getOpt(h)).filter(Re(Pn.isDisabled)):A.none())}},JF=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),l=Rs(Q1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:bt([gn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(yf(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=Tw(l,t.commands,s);return[{title:A.none(),items:[l.asSpec()]},{title:A.none(),items:d.asSpecs()}]},XU={renderContextForm:(t,s,c)=>UE({type:t,uid:Ut("context-toolbar"),initGroups:JF(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:JF},xD=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,JU=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=wu(be.fromDom(t.startContainer),t.startOffset).element;return(mo(c)?xc(c):A.some(c)).filter(Bn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},rk=t=>{const s=t.selection.getRng(),c=JU(s);if(t.inline){const l=Qc();return cr(l.left+c.left,l.top+c.top,c.width,c.height)}else{const l=Ya(be.fromDom(t.getBody()));return cr(l.x+c.left,l.y+c.top,c.width,c.height)}},QU=(t,s)=>s.filter(c=>Po(c)&&ca(c)).map(Ya).getOrThunk(()=>rk(t)),eW=(t,s,c)=>{const l=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:l,width:d-l}},tW=(t,s,c,l,d,g)=>{const h=be.fromDom(t.getContainer()),y=Os(h,".tox-editor-header").getOr(h),w=Rr(y),_=w.y>=s.bottom,O=l&&!_;if(t.inline&&O)return{y:Math.max(w.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(w.y-g,c.bottom)};const P=d==="line"?Rr(h):s;return O?{y:Math.max(w.bottom+g,c.y),bottom:Math.min(P.bottom-g,c.bottom)}:{y:Math.max(P.y+g,c.y),bottom:Math.min(w.y-g,c.bottom)}},QF=(t,s,c,l=0)=>{const d=bm(window),g=Rr(be.fromDom(t.getContentAreaContainer())),h=eT(t)||nT(t)||Y1(t),{x:y,width:w}=eW(g,d,l);if(t.inline&&!h)return cr(y,d.y,w,d.height);{const _=s.header.isPositionedAtTop(),{y:O,bottom:P}=tW(t,g,d,_,c,l);return cr(y,O,w,P-O)}},ck=12,Xv={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},TD={maxHeightFunction:np(),maxWidthFunction:jv()},nW=(t,s)=>{const c=t.selection.getRng(),l=wu(be.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&ss(l.element,s)},oW=(t,s,c)=>{const l=Ys(t,"position");qt(t,"position",s);const d=c(t);return l.each(g=>qt(t,"position",g)),d},ED=t=>t==="node",kD=(t,s,c,l,d)=>{const g=rk(t),h=l.lastElement().exists(y=>ss(c,y));if(nW(t,c))return h?uw:mm;if(h)return oW(s,l.getMode(),()=>xD(g,Rr(s),-20)&&!l.isReposition()?j5:uw);{const y=l.getMode()==="fixed"?d.y+Qc().top:d.y,w=ur(s)+ck;return y+w<=g.y?mm:iw}},eI=(t,s,c,l)=>{const d=w=>(_,O,P,H,V)=>{const G=kD(t,H,w,c,V),ne={..._,y:V.y,height:V.height};return{...G(ne,O,P,H,V),alwaysFit:!0}},g=w=>ED(l)?[d(w)]:[];return s?{onLtr:w=>[Mc,Vc,Rc,Uc,Gs,ea].concat(g(w)),onRtl:w=>[Mc,Rc,Vc,Gs,Uc,ea].concat(g(w))}:{onLtr:w=>[ea,Mc,Uc,Vc,Gs,Rc].concat(g(w)),onRtl:w=>[ea,Mc,Gs,Rc,Uc,Vc].concat(g(w))}},tI=(t,s,c,l)=>s==="line"?{bubble:Iu(ck,0,Xv),layouts:{onLtr:()=>[Qy],onRtl:()=>[d0]},overrides:TD}:{bubble:Iu(0,ck,Xv,1/ck),layouts:eI(t,c,l,s),overrides:TD},_D=(t,s)=>{const c=ao(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Ns(c,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},Jv=t=>{if(t.length<=1)return t;{const s=g=>Vs(t,h=>h.position===g),c=g=>ao(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=c("node"),h=Me(c("selection"),y=>({...y,position:"node"}));return g.concat(h)}else return c(l?"selection":"node");else return c("line")}},ak=t=>{if(t.length<=1)return t;{const s=l=>He(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>ao(t,d=>d.position===l))}},lk=(t,s,c)=>{const l=_D(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=_D(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=Jv(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},AD=(t,s,c)=>t(s)?A.none():Nu(s,l=>{if(Bn(l)){const{contextToolbars:d,contextForms:g}=_D(l,c.inNodeScope),h=g.length>0?g:ak(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),OD=(t,s)=>{const c=be.fromDom(s.getBody()),l=h=>ss(h,c),d=h=>!l(h)&&!Yr(c,h),g=be.fromDom(s.selection.getNode());return d(g)?A.none():lk(g,t.inNodeScope,t.inEditorScope).orThunk(()=>AD(l,g,t))},nI=(t,s)=>{const c={},l=[],d=[],g={},h={},y=(O,P)=>{const H=ut(r8(P));c[O]=H,H.launch.map(V=>{g["form:"+O]={...P.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):l.push(H),h[O]=H},w=(O,P)=>{Cd(P).each(H=>{P.scope==="editor"?d.push(H):l.push(H),h[O]=H})},_=ps(t);return Je(_,O=>{const P=t[O];P.type==="contextform"?y(O,P):P.type==="contexttoolbar"&&w(O,P)}),{forms:c,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},Ew=Ut("forward-slide"),DD=Ut("backward-slide"),ik=Ut("change-slide-event"),kw="tox-pop--resizing",sW=t=>{const s=fn([]);return Nr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Nr.getContent(c).each(l=>{$o(l.element,"visibility")}),Ur(c.element,kw),$o(c.element,"width")},inlineBehaviours:bt([io("context-toolbar-events",[Fh(sd(),(c,l)=>{l.event.raw.propertyName==="width"&&(Ur(c.element,kw),$o(c.element,"width"))}),Qe(ik,(c,l)=>{const d=c.element;$o(d,"width");const g=ia(d);Nr.setContent(c,l.event.contents),yr(d,kw);const h=ia(d);qt(d,"width",g+"px"),Nr.getContent(c).each(y=>{l.event.focus.bind(w=>(Bi(w),Ml(d))).orThunk(()=>(gn.focusIn(y),hd(U(d))))}),setTimeout(()=>{qt(c.element,"width",h+"px")},0)}),Qe(Ew,(c,l)=>{Nr.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:hd(U(c.element))}]))}),Tn(c,ik,{contents:l.event.forwardContents,focus:A.none()})}),Qe(DD,(c,l)=>{oa(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Tn(c,ik,{contents:fl(d.bar),focus:d.focus})})})]),gn.config({mode:"special",onEscape:c=>oa(s.get()).fold(()=>t.onEscape(),l=>(po(c,DD),A.some(!0)))})]),lazySink:()=>to.value(t.sink)})},uk="tox-pop--transition",rW=(t,s,c,l)=>{const d=l.backstage,g=d.shared,h=ul().deviceType.isTouch,y=Fs(),w=Fs(),_=Fs(),O=ol(sW({sink:c,onEscape:()=>(t.focus(),A.some(!0))})),P=()=>{const Zt=_.get().getOr("node"),On=ED(Zt)?1:0;return QF(t,g,Zt,On)},H=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),V=Zt=>Kr(sc(Zt,y.get(),ss),!0),G=()=>{if(H()){const Zt=P(),On=Kr(_.get(),"node")?QU(t,y.get()):rk(t);return Zt.height<=0||!xD(On,Zt,.01)}else return!0},ne=()=>{y.clear(),w.clear(),_.clear(),Nr.hide(O)},_e=()=>{if(Nr.isOpen(O)){const Zt=O.element;$o(Zt,"display"),G()?qt(Zt,"display","none"):(w.set(0),Nr.reposition(O))}},le=Zt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Zt],behaviours:bt([gn.config({mode:"acyclic"}),io("pop-dialog-wrap-events",[Er(On=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>gn.focusIn(On))}),Wd(On=>{t.shortcuts.remove("ctrl+F9")})])])}),Ee=se(()=>nI(s,Zt=>{const On=$e([Zt]);Tn(O,Ew,{forwardContents:le(On)})})),Se=(Zt,On)=>nk(t,{buttons:Zt,toolbar:On.items,allowToolbarGroups:!1},l.backstage,A.some(["form:"])),et=(Zt,On)=>XU.buildInitGroups(Zt,On),$e=Zt=>{const{buttons:On}=t.ui.registry.getAll(),Sn=Ee(),gs={...On,...Sn.formNavigators},rs=K1(t)===gu.scrolling?gu.scrolling:gu.default,Bo=je(Me(Zt,kt=>kt.type==="contexttoolbar"?Se(gs,kt):et(kt,g.providers)));return UE({type:rs,uid:Ut("context-toolbar"),initGroups:Bo,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},yt=(Zt,On)=>{const Sn=Zt==="node"?g.anchors.node(On):g.anchors.cursor(),gs=tI(t,Zt,h(),{lastElement:y.get,isReposition:()=>Kr(w.get(),0),getMode:()=>Ma.getMode(c)});return ar(Sn,gs)},Mt=(Zt,On)=>{if(rn.cancel(),!H())return;const Sn=$e(Zt),gs=Zt[0].position,rs=yt(gs,On);_.set(gs),w.set(1);const Bo=O.element;$o(Bo,"display"),V(On)||(Ur(Bo,uk),Ma.reset(c,O)),Nr.showWithinBounds(O,le(Sn),{anchor:rs,transition:{classes:[uk],mode:"placement"}},()=>A.some(P())),On.fold(y.clear,y.set),G()&&qt(Bo,"display","none")};let Xe=!1;const rn=cO(()=>{if(!(!t.hasFocus()||t.removed||Xe))if(hi(O.element,uk))rn.throttle();else{const Zt=Ee();OD(Zt,t).fold(ne,On=>{Mt(On.toolbars,A.some(On.elem))})}},17);t.on("init",()=>{t.on("remove",ne),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",_e),t.on("click keyup focus SetContent",rn.throttle),t.on(KF,ne),t.on(qF,Zt=>{const On=Ee();ht(On.lookupTable,Zt.toolbarKey).each(Sn=>{Mt([Sn],un(Zt.target!==t,Zt.target)),Nr.getContent(O).each(gn.focusIn)})}),t.on("focusout",Zt=>{i2.setEditorTimeout(t,()=>{Ml(c.element).isNone()&&Ml(O.element).isNone()&&ne()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ne()}),t.on("ExecCommand",({command:Zt})=>{Zt.toLowerCase()==="toggleview"&&ne()}),t.on("AfterProgressState",Zt=>{Zt.state?ne():t.hasFocus()&&rn.throttle()}),t.on("dragstart",()=>{Xe=!0}),t.on("dragend drop",()=>{Xe=!1}),t.on("NodeChange",Zt=>{Ml(O.element).fold(rn.throttle,ee)})})},cW=t=>{Je([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:bu(t,c.cmd),onSetup:HT(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ni(t),onAction:bu(t,"JustifyNone")})},_w=(t,s)=>{const c=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Fs();return Me(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:y=>{const w=O=>{O&&(g.on(P=>P.setActive(!1)),g.set(y)),y.setActive(O)};w(Kr(d,s.hash(h)));const _=s.watcher(t,h,w);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},oI=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:u4,hash:s=>mU(s,["fixed","relative","empty"]).getOr(s),display:Dt,watcher:(s,c,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:c}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:ni(t),onMenuSetup:ni(t)}),aW=t=>A.from(qx(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:W(c),hash:l=>Nn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=be.fromDom(l.selection.getNode());return Ld(d,g=>A.some(g).filter(Bn).bind(h=>$(h,"lang").map(w=>{const _=$(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=bc();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),$2(d.clear,ni(t)(l))},onMenuSetup:ni(t)})),lW=t=>{_w(t,oI(t)),aW(t).each(s=>_w(t,s))},iW=(t,s)=>{sU(t,s),bD(t,s),TU(t,s),rU(t,s),wU(t,s)},uW=t=>cb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),dW=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:uW(t),onAction:bu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ni(t),onAction:bu(t,"indent")})},sI=t=>{dW(t)},RD=(t,s)=>c=>{c.setActive(s.get());const l=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",l),$2(()=>t.off("PastePlainTextToggle",l),ni(t)(c))},rI=t=>{const s=fn(Qx(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:RD(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:RD(t,s)})},dk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},mW=t=>{um.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:HT(t,s.name),onAction:dk(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:HT(t,c),onAction:dk(t,c),shortcut:l})}},cI=t=>{um.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:bu(t,s.action),shortcut:s.shortcut})}),um.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ni(t),onAction:bu(t,s.action)})})},aI=t=>{um.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:bu(t,s.action),onSetup:HT(t,s.name)})})},fW=t=>{mW(t),cI(t),aI(t)},wG=t=>{um.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:bu(t,s.action)})}),um.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ni(t),onAction:bu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ni(t),onAction:dk(t,"code")})},gW=t=>{fW(t),wG(t)},mk=(t,s)=>cb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),hW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:mk(t,"hasUndo"),onAction:bu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:mk(t,"hasRedo"),onAction:bu(t,"redo")})},pW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:mk(t,"hasUndo"),onAction:bu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:mk(t,"hasRedo"),onAction:bu(t,"redo"),shortcut:"Meta+Y"})},bW=t=>{hW(t),pW(t)},vW=t=>cb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),yW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:vW(t),onAction:bu(t,"mceToggleVisualAid")})},CW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:bu(t,"mceToggleVisualAid")})},wW=t=>{CW(t),yW(t)},SW=(t,s)=>{cW(t),gW(t),iW(t,s),bW(t),W8(t),wW(t),sI(t),lW(t),rI(t)},xW=t=>We(t)?t.split(/[ ,]/):t,lI=t=>s=>s.options.get(t),TW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:We(c)||Ue(c,We)?{value:xW(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},MD=lI("contextmenu_never_use_native"),EW=lI("contextmenu_avoid_overlap"),kW=t=>iI(t).length===0,iI=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:ao(c,l=>Mo(s,l))},Aw=(t,s)=>({type:"makeshift",x:t,y:s}),_W=(t,s,c)=>Aw(t.x+s,t.y+c),uI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,AW=t=>{if(uI(t)){const s=t.touches[0];return Aw(s.pageX,s.pageY)}else return Aw(t.pageX,t.pageY)},OW=t=>{if(uI(t)){const s=t.touches[0];return Aw(s.clientX,s.clientY)}else return Aw(t.clientX,t.clientY)},DW=(t,s)=>{const c=G1.DOM.getPos(t);return _W(s,c.x,c.y)},ND=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?AW(s):DW(t.getContentAreaContainer(),OW(s)):dI(t),dI=t=>({type:"selection",root:be.fromDom(t.selection.getNode())}),RW=t=>({type:"node",node:A.some(be.fromDom(t.selection.getNode())),root:be.fromDom(t.getBody())}),fk=(t,s,c)=>{switch(c){case"node":return RW(t);case"point":return ND(t,s);case"selection":return dI(t)}},mI=(t,s,c,l,d,g)=>{const h=c(),y=fk(t,s,g);Fv(h,om.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(w=>{s.preventDefault(),Nr.showMenuAt(d,{anchor:y},{menu:{markers:kp("normal")},data:w})})},fI={onLtr:()=>[Mc,Vc,Rc,Uc,Gs,ea,mm,iw,lw,DE,aw,OE],onRtl:()=>[Mc,Rc,Vc,Gs,Uc,ea,mm,iw,aw,OE,lw,DE]},MW=12,NW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},BW=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=c.getRng();return ha(t.getWin(),cp.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},PW=t=>{const s=t.selection.getRng(),c=()=>{i2.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",l)}},$W=(t,s,c)=>{const l=fk(t,s,c);return{bubble:Iu(0,c==="point"?MW:0,NW),layouts:fI,overrides:{maxWidthFunction:jv(),maxHeightFunction:np()},...l}},BD=(t,s,c,l,d,g,h)=>{const y=$W(t,s,g);Fv(c,om.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(w=>{s.preventDefault();const _=h?ti.HighlightMenuAndItem:ti.HighlightNone;Nr.showMenuWithinBounds(d,{anchor:y},{menu:{markers:kp("normal"),highlightOnOpen:_},data:w,type:"horizontal"},()=>A.some(QF(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(KF)})},FW=(t,s,c,l,d,g)=>{const h=ul(),y=h.os.isiOS(),w=h.os.isMacOS(),_=h.os.isAndroid(),O=h.deviceType.isTouch(),P=()=>!(_||y||w&&O),H=()=>{const V=c();BD(t,s,V,l,d,g,P())};if((w||y)&&g!=="node"){const V=()=>{PW(t),H()};BW(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else H()},PD=t=>We(t)?t==="|":t.type==="separator",$D={type:"separator"},gI=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(We(t))return t;switch(t.type){case"separator":return $D;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return We(l)?l:Me(l,gI)}};default:const c=t;return{type:"menuitem",...s(c),onAction:st(c.onAction)}}},gk=(t,s)=>{if(s.length===0)return t;const l=oa(t).filter(d=>!PD(d)).fold(()=>[],d=>[$D]);return t.concat(l).concat(s).concat([$D])},IW=(t,s,c)=>{const l=zo(s,(d,g)=>ht(t,g.toLowerCase()).map(h=>{const y=h.update(c);if(We(y)&&de(hr(y)))return gk(d,y.split(" "));if(Zo(y)&&y.length>0){const w=Me(y,gI);return gk(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&PD(l[l.length-1])&&l.pop(),l},hI=(t,s)=>s.ctrlKey&&!MD(t),LW=t=>t.type==="longpress"||Mo(t,"touches"),pI=(t,s)=>!LW(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),hk=(t,s)=>pI(t,s)?t.selection.getStart(!0):s.target,HW=(t,s)=>{const c=EW(t),l=pI(t,s)?"selection":"point";if(de(c)){const d=hk(t,s);return H2(be.fromDom(d),c)?"node":l}else return l},zW=(t,s,c)=>{const d=ul().deviceType.isTouch,g=ol(Nr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:bt([io("dismissContextMenu",[Qe(bf(),(w,_)=>{es.close(w),t.focus()})])])})),h=()=>Nr.hide(g),y=w=>{if(MD(t)&&w.preventDefault(),hI(t,w)||kW(t))return;const _=HW(t,w),O=()=>{const H=hk(t,w),V=t.ui.registry.getAll(),G=iI(t);return IW(V.contextMenus,G,H)};(d()?FW:mI)(t,w,O,c,g,_)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",y)})},FD=he.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),pk=t=>s=>s.translate(-t.left,-t.top),bk=t=>s=>s.translate(t.left,t.top),sg=t=>(s,c)=>zo(t,(l,d)=>d(l),pr(s,c)),vk=(t,s,c)=>t.fold(sg([bk(c),pk(s)]),sg([pk(s)]),sg([])),Qv=(t,s,c)=>t.fold(sg([bk(c)]),sg([]),sg([bk(s)])),bI=(t,s,c)=>t.fold(sg([]),sg([pk(c)]),sg([bk(s),pk(c)])),VW=(t,s,c,l,d,g)=>{const h=Qv(t,d,g),y=Qv(s,d,g);return Math.abs(h.left-y.left)<=c&&Math.abs(h.top-y.top)<=l},UW=(t,s,c,l,d,g)=>{const h=Qv(t,d,g),y=Qv(s,d,g),w=Math.abs(h.left-y.left),_=Math.abs(h.top-y.top);return pr(w,_)},vI=(t,s,c)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},WW=(t,s,c)=>t.fold((l,d)=>Ow(l+s,d+c),(l,d)=>Ip(l+s,d+c),(l,d)=>Lp(l+s,d+c)),ID=(t,s,c,l)=>{const d=(g,h)=>(y,w)=>{const _=g(s,c,l);return h(y.getOr(_.left),w.getOr(_.top))};return t.fold(d(bI,Ow),d(Qv,Ip),d(vk,Lp))},Ow=FD.offset,Ip=FD.absolute,Lp=FD.fixed,yI=(t,s)=>{const c=_s(t,s);return Nn(c)?NaN:parseInt(c,10)},ZW=(t,s)=>{const c=t.element,l=yI(c,s.leftAttr),d=yI(c,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(pr(l,d))},jW=(t,s,c)=>{const l=t.element;St(l,s.leftAttr,c.left+"px"),St(l,s.topAttr,c.top+"px")},xb=(t,s)=>{const c=t.element;oe(c,s.leftAttr),oe(c,s.topAttr)},CI=(t,s,c,l)=>ZW(t,s).fold(()=>c,d=>Lp(d.left+l.left,d.top+l.top)),GW=(t,s,c,l,d,g)=>{const h=CI(t,s,c,l),y=s.mustSnap?KW(t,s,h,d,g):SI(t,s,h,d,g),w=vk(h,d,g);return jW(t,s,w),y.fold(()=>({coord:Lp(w.left,w.top),extra:A.none()}),_=>({coord:_.output,extra:_.extra}))},qW=(t,s)=>{xb(t,s)},wI=(t,s,c,l)=>Bs(t,d=>{const g=d.sensor;return VW(s,g,d.range.left,d.range.top,c,l)?A.some({output:ID(d.output,s,c,l),extra:d.extra}):A.none()}),KW=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return wI(g,c,l,d).orThunk(()=>zo(g,(w,_)=>{const O=_.sensor,P=UW(c,O,_.range.left,_.range.top,l,d);return w.deltas.fold(()=>({deltas:A.some(P),snap:A.some(_)}),H=>{const V=(P.left+P.top)/2,G=(H.left+H.top)/2;return V<=G?{deltas:A.some(P),snap:A.some(_)}:w})},{deltas:A.none(),snap:A.none()}).snap.map(w=>({output:ID(w.output,c,l,d),extra:w.extra})))},SI=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return wI(g,c,l,d)},YW=(t,s,c)=>({coord:ID(t.output,t.output,s,c),extra:t.extra});var XW=Object.freeze({__proto__:null,snapTo:(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ic(t.element),h=Qc(g),y=Sy(d),w=YW(l,h,y),_=vI(w.coord,h,y);dt(d,_)}}});const LD="data-initial-z-index",JW=t=>{xc(t.element).filter(Bn).each(s=>{$(s,LD).fold(()=>$o(s,"z-index"),c=>qt(s,"z-index",c)),oe(s,LD)})},QW=t=>{xc(t.element).filter(Bn).each(s=>{Ys(s,"z-index").each(c=>{St(s,LD,c)}),qt(s,"z-index",$s(t.element,"z-index"))})},xI=(t,s)=>{t.getSystem().addToGui(s),QW(s)},eZ=t=>{JW(t),t.getSystem().removeFromGui(t)},TI=(t,s,c)=>t.getSystem().build(Zm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var tZ=Js("snaps",[Ye("getSnapPoints"),Yo("onSensor"),Ye("leftAttr"),Ye("topAttr"),Te("lazyViewport",cc),Te("mustSnap",!1)]);const yk=[Te("useFixed",co),Ye("blockerClass"),Te("getTarget",Dt),Te("onDrag",ee),Te("repositionTarget",!0),Te("onDrop",ee),qr("getBounds",cc),tZ],EI=t=>jr(Ys(t,"left"),Ys(t,"top"),Ys(t,"position"),(s,c,l)=>(l==="fixed"?Lp:Ow)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Tc(t);return Ip(s.left,s.top)}),nZ=(t,s,c,l,d)=>{const g=d.bounds,h=Qv(s,c,l),y=Fu(h.left,g.x,g.x+g.width-d.width),w=Fu(h.top,g.y,g.y+g.height-d.height),_=Ip(y,w);return s.fold(()=>{const O=bI(_,c,l);return Ow(O.left,O.top)},W(_),()=>{const O=vk(_,c,l);return Lp(O.left,O.top)})},Dw=(t,s,c,l,d,g,h)=>{const y=s.fold(()=>{const w=WW(c,g.left,g.top),_=vk(w,l,d);return Lp(_.left,_.top)},w=>{const _=GW(t,w,c,g,l,d);return _.extra.each(O=>{w.onSensor(t,O)}),_.coord});return nZ(t,y,l,d,h)},oZ=(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ic(t.element),h=Qc(g),y=Sy(d),w=EI(d),_=Dw(t,s.snaps,w,h,y,l,c),O=vI(_,h,y);dt(d,O)}s.onDrag(t,d,l)},kI=(t,s)=>({bounds:t.getBounds(),height:xu(s.element),width:Lc(s.element)}),Rw=(t,s,c,l,d)=>{const g=c.update(l,d),h=c.getStartData().getOrThunk(()=>kI(s,t));g.each(y=>{oZ(t,s,h,y)})},_I=(t,s,c,l)=>{s.each(eZ),c.snaps.each(g=>{qW(t,g)});const d=c.getTarget(t.element);l.reset(),c.onDrop(t,d)},HD=t=>(s,c)=>{const l=d=>{c.setStartData(kI(s,d))};return vr([Qe(Eg(),d=>{c.getStartData().each(()=>l(d))}),...t(s,c,l)])},sZ=t=>vr([Qe(_l(),t.forceDrop),Qe(Tm(),t.drop),Qe(Ph(),(s,c)=>{t.move(c.event)}),Qe(Bu(),t.delayDrop)]);var rZ=Object.freeze({__proto__:null,getData:t=>A.from(pr(t.x,t.y)),getDelta:(t,s)=>pr(s.left-t.left,s.top-t.top)});const AI=(t,s,c)=>[Qe(_l(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>_I(l,A.some(_),t,s),y=LB(h,200),w={drop:h,delayDrop:y.schedule,forceDrop:h,move:P=>{y.cancel(),Rw(l,t,s,rZ,P)}},_=TI(l,t.blockerClass,sZ(w));(()=>{c(l),xI(l,_)})()})],cZ=[...yk,Cr("dragger",{handlers:HD(AI)})],aZ=t=>vr([Qe(Fo(),t.forceDrop),Qe(Dc(),t.drop),Qe(Xl(),t.drop),Qe(Tr(),(s,c)=>{t.move(c.event)})]),lZ=t=>{const s=t[0];return A.some(pr(s.clientX,s.clientY))};var OI=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?lZ(c):A.none()},getDelta:(t,s)=>pr(s.left-t.left,s.top-t.top)});const DI=(t,s,c)=>{const l=Fs(),d=g=>{_I(g,l.get(),t,s),l.clear()};return[Qe(Fo(),(g,h)=>{h.stop();const y=()=>d(g),w={drop:y,delayDrop:ee,forceDrop:y,move:P=>{Rw(g,t,s,OI,P)}},_=TI(g,t.blockerClass,aZ(w));l.set(_),(()=>{c(g),xI(g,_)})()}),Qe(Tr(),(g,h)=>{h.stop(),Rw(g,t,s,OI,h.event)}),Qe(Dc(),(g,h)=>{h.stop(),d(g)}),Qe(Xl(),d)]},iZ=[...yk,Cr("dragger",{handlers:HD(DI)})],uZ=(t,s,c)=>[...AI(t,s,c),...DI(t,s,c)],dZ=[...yk,Cr("dragger",{handlers:HD(uZ)})];var mZ=Object.freeze({__proto__:null,mouse:cZ,touch:iZ,mouseOrTouch:dZ}),fZ=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},l=(w,_)=>{const O=t.map(P=>w.getDelta(P,_));return t=A.some(_),O},d=(w,_)=>w.getData(_).bind(O=>l(w,O)),g=w=>{s=A.some(w)},h=()=>s,y=W({});return gi({readState:y,reset:c,update:d,getStartData:h,setStartData:g})}});const Tb=Kw({branchKey:"mode",branches:mZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:fZ,apis:XW}),Ck=40,wk=Ck/2,RI=(t,s,c,l,d,g)=>t.fold(()=>Tb.snap({sensor:Ip(c-wk,l-wk),range:pr(d,g),output:Ip(A.some(c),A.some(l)),extra:{td:s}}),h=>{const y=c-wk,w=l-wk,_=Ck,O=Ck,P=h.element.dom.getBoundingClientRect();return Tb.snap({sensor:Ip(y,w),range:pr(_,O),output:Ip(A.some(c-P.width/2),A.some(l-P.height/2)),extra:{td:s}})}),MI=(t,s,c)=>{const l=(d,g)=>d.exists(h=>ss(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},NI=t=>Rs(cl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:bt([Tb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Ov.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),gZ=(t,s)=>{const c=fn([]),l=fn([]),d=fn(!1),g=Fs(),h=Fs(),y=Mt=>{const Xe=Ya(Mt);return RI(V.getOpt(s),Mt,Xe.x,Xe.y,Xe.width,Xe.height)},w=()=>Me(c.get(),Mt=>y(Mt)),_=Mt=>{const Xe=Ya(Mt);return RI(G.getOpt(s),Mt,Xe.right,Xe.bottom,Xe.width,Xe.height)},O=()=>Me(l.get(),Mt=>_(Mt)),P=MI(w,g,Mt=>{h.get().each(Xe=>{t.dispatch("TableSelectorChange",{start:Mt,finish:Xe})})}),H=MI(O,h,Mt=>{g.get().each(Xe=>{t.dispatch("TableSelectorChange",{start:Xe,finish:Mt})})}),V=NI(P),G=NI(H),ne=ol(V.asSpec()),_e=ol(G.asSpec()),le=(Mt,Xe,rn,Zt)=>{const On=Xe.dom.getBoundingClientRect();$o(Mt.element,"display");const Sn=$a(be.fromDom(t.getBody())).dom.innerHeight,gs=rn(On),rs=Zt(On,Sn);(gs||rs)&&qt(Mt.element,"display","none")},Ee=(Mt,Xe,rn,Zt)=>{const On=rn(Xe);Tb.snapTo(Mt,On),le(Mt,Xe,rs=>rs[Zt]<0,(rs,Bo)=>rs[Zt]>Bo)},Se=Mt=>Ee(ne,Mt,y,"top"),et=()=>g.get().each(Se),$e=Mt=>Ee(_e,Mt,_,"bottom"),yt=()=>h.get().each($e);if(ul().deviceType.isTouch()){const Mt=Xe=>Me(Xe,be.fromDom);t.on("TableSelectionChange",Xe=>{d.get()||(Yd(s,ne),Yd(s,_e),d.set(!0));const rn=be.fromDom(Xe.start),Zt=be.fromDom(Xe.finish);g.set(rn),h.set(Zt),A.from(Xe.otherCells).each(On=>{c.set(Mt(On.upOrLeftCells)),l.set(Mt(On.downOrRightCells)),Se(rn),$e(Zt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{et(),yt()}),t.on("TableSelectionClear",()=>{d.get()&&(Pm(ne),Pm(_e),d.set(!1)),g.clear(),h.clear()})}};var VD=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const BI=(t,s)=>{const c=A.from(_s(t,"id")).getOrThunk(()=>{const l=Ut("aria");return St(s,"id",l),l});St(t,"aria-describedby",c)},hZ=t=>{oe(t,"aria-describedby")},pZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",bZ=(t,s,c)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,O,P)=>cl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":P}},components:[ec(_)],action:H=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:bt([Ua.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(H,V)=>{BI(H.element,V.element)},onHide:H=>{hZ(H.element)}})}),am.button(c.isDisabled),ta()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[ec(` ${d} `)]}),y=_=>zo(_,(O,P,H)=>{const V=g(P.name,P.element,H);return H===0?O.concat([V]):O.concat([h(),V])},[]),w=_=>{const O=[];let P=_.length;for(;P-- >0;){const H=_[P];if(H.nodeType===1&&!pZ(H)){const V=A8(t,H);if(V.isDefaultPrevented()||O.push({name:V.name,element:H}),V.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:bt([gn.config({mode:"flow",selector:"div[role=button]"}),Pn.config({disabled:c.isDisabled}),ta(),wr.config({}),Un.config({}),io("elementPathEvents",[Er((_,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>gn.focusIn(_)),t.on("NodeChange",P=>{const H=w(P.parents),V=H.length>0?y(H):[];Un.set(_,V)})})])]),components:[]}};var Hp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Hp||(Hp={}));const vZ=(t,s,c,l,d)=>{const g={height:Sb(l+s.top,Gx(t),e4(t))};return c===Hp.Both&&(g.width=Sb(d+s.left,mv(t),d2(t))),g},PI=(t,s,c)=>{const l=be.fromDom(t.getContainer()),d=vZ(t,s,c,ur(l),ia(l));cs(d,(g,h)=>{zn(g)&&qt(l,h,wD(g))}),k8(t)},yZ=t=>{const s=a4(t);return s===!1?Hp.None:s==="both"?Hp.Both:Hp.Vertical},Sk=(t,s,c,l)=>{const g=pr(c*20,l*20);return PI(t,g,s),A.some(!0)},CZ=(t,s)=>{const c=yZ(t);if(c===Hp.None)return A.none();const l=c===Hp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(zi("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[Tb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>PI(t,h,c),blockerClass:"tox-blocker"}),gn.config({mode:"special",onLeft:()=>Sk(t,c,-1,0),onRight:()=>Sk(t,c,1,0),onUp:()=>Sk(t,c,0,-1),onDown:()=>Sk(t,c,0,1)}),wr.config({}),Ln.config({}),Ua.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},wZ=(t,s)=>{const c=(l,d,g)=>Un.set(l,[ec(s.translate(["{0} "+g,d[g]]))]);return cl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:bt([am.button(s.isDisabled),ta(),wr.config({}),Un.config({}),Wt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),io("wordcount-events",[$u(l=>{const d=Wt.getValue(l),g=d.mode==="words"?"characters":"words";Wt.setValue(l,{mode:g,count:d.count}),c(l,d.count,g)}),Er(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=Wt.getValue(l);Wt.setValue(l,{mode:g,count:d.wordCount}),c(l,d.wordCount,g)})})])]),eventOrder:{[ru()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},SZ=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",VD.trim()])},behaviours:bt([Ln.config({})])}]}),l=()=>{const y=BT("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[ec(Vu.translate(["Press {0} for help",y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(wZ(t,s)),c4(t)&&y.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],w=UM(t),_=zM(t),O=c4(t)||t.hasPlugin("wordcount"),P=()=>{const H="tox-statusbar__text-container--flex-start",V="tox-statusbar__text-container--flex-end",G="tox-statusbar__text-container--space-around";if(w){const ne="tox-statusbar__text-container-3-cols";return!O&&!_?[ne,G]:O&&!_?[ne,V]:[ne,H]}return[O&&!_?V:H]};return _&&y.push(bZ(t,{},s)),w&&y.push(l()),O&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...P()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),w=CZ(t,s);return y.concat(w.toArray())})()}},$I=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),xZ=(t,s)=>{const c=t.inline,l=c?jF:VU,d=gv(t)?jz:_$,g=GF(),h=Fs(),y=Fs(),w=Fs(),H=ul().deviceType.isTouch()?["tox-platform-touch"]:[],V=ah(t),G=K1(t),ne=Rs({dom:{tag:"div",classes:["tox-anchorbar"]}}),_e=Rs({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),le=()=>g.mainUi.get().map(En=>En.outerContainer).bind(Sr.getHeader),Ee=()=>to.fromOption(g.dialogUi.get().map(En=>En.sink),"UI has not been rendered"),Se=()=>to.fromOption(g.popupUi.get().map(En=>En.sink),"(popup) UI has not been rendered"),et=g.lazyGetInOuterOrDie("anchor bar",ne.getOpt),$e=g.lazyGetInOuterOrDie("bottom anchor bar",_e.getOpt),yt=g.lazyGetInOuterOrDie("toolbar",Sr.getToolbar),Mt=g.lazyGetInOuterOrDie("throbber",Sr.getThrobber),Xe=$z({popup:Se,dialog:Ee},t,et,$e),rn=()=>{const En={attributes:{[Bf]:V?Nf.BottomToTop:Nf.TopToBottom}},Qn=Sr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Xe.popup,onEscape:()=>{t.focus()}}),er=Sr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Xe.popup.shared.getSink,providers:Xe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Db=>{O8(t,Db)},type:G,lazyToolbar:yt,lazyHeader:()=>le().getOrDie("Could not find header element"),...En}),Ss=Sr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Xe.popup.shared.providers,onEscape:()=>{t.focus()},type:G}),zl=Y1(t),Ku=nT(t),Xm=eT(t),yl=m2(t),Yu=Zt(),Dd=zl||Ku||Xm,Gi=()=>zl?[Ss]:Ku?[er]:[],ag=yl?[Yu,Qn]:[Qn];return Sr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Dd?[]:["tox-editor-header--empty"]),...En},components:je([Xm?ag:[],Gi(),fv(t)?[]:[ne.asSpec()]]),sticky:gv(t),editor:t,sharedBackstage:Xe.popup.shared})},Zt=()=>Sr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),On=()=>{const En=Sr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Qn=Sr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[En,Qn]}},Sn=()=>{const En=f2(t),Qn=ss(so(),En)&&$s(En,"display")==="grid",er={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...Vu.isRtl()?{dir:"rtl"}:{}}},behaviours:bt([Ma.config({useFixed:()=>d.isDocked(le)})])},Ss={dom:{styles:{width:document.body.clientWidth+"px"}},events:vr([Qe(ad(),Xm=>{qt(Xm.element,"width",document.body.clientWidth+"px")})])},zl=ol(ar(er,Qn?Ss:{})),Ku=_3(zl);return y.set(Ku),{sink:zl,mothership:Ku}},gs=()=>{const En={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...Vu.isRtl()?{dir:"rtl"}:{}}},behaviours:bt([Ma.config({useFixed:()=>d.isDocked(le),getBounds:()=>s.getPopupSinkBounds()})])},Qn=ol(En),er=_3(Qn);return w.set(er),{sink:Qn,mothership:er}},rs=()=>{const En=rn(),Qn=On(),er=Sr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Xe.popup}),Ss=Sr.parts.viewWrapper({backstage:Xe.popup}),zl=HM(t)&&!c?A.some(SZ(t,Xe.popup.shared.providers)):A.none(),Ku=je([V?[]:[En],c?[]:[Qn],V?[En]:[]]),Xm=Sr.parts.editorContainer({components:je([Ku,c?[]:[_e.asSpec()]])}),yl=oT(t),Yu={role:"application",...Vu.isRtl()?{dir:"rtl"}:{},...yl?{"aria-hidden":"true"}:{}},Dd=ol(Sr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...yl?{opacity:"0",border:"0"}:{}},attributes:Yu},components:[Xm,...c?[]:[Ss,...zl.toArray()],er],behaviours:bt([ta(),Pn.config({disableClass:"tox-tinymce--disabled"}),gn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Gi=_3(Dd);return h.set(Gi),{mothership:Gi,outerContainer:Dd}},Bo=En=>{const Qn=wD(ok(t)),er=wD(UF(t));return t.inline||(il("div","width",er)&&qt(En.element,"width",er),il("div","height",Qn)?qt(En.element,"height",Qn):qt(En.element,"height","400px")),Qn},kt=En=>{t.addShortcut("alt+F9","focus menubar",()=>{Sr.focusMenubar(En)}),t.addShortcut("alt+F10","focus toolbar",()=>{Sr.focusToolbar(En)}),t.addCommand("ToggleToolbarDrawer",(Qn,er)=>{er!=null&&er.skipFocus?Sr.toggleToolbarDrawerWithoutFocusing(En):Sr.toggleToolbarDrawer(En)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Sr.isToolbarDrawerToggled(En))},Jt=En=>{const{mainUi:Qn,popupUi:er,uiMotherships:Ss}=En;ns(Kx(t),(sy,Ik)=>{t.ui.registry.addGroupToolbarButton(Ik,sy)});const{buttons:zl,menuItems:Ku,contextToolbars:Xm,sidebars:yl,views:Yu}=t.ui.registry.getAll(),Dd=d4(t),Gi={menuItems:Ku,menus:m4(t),menubar:o4(t),toolbar:Dd.getOrThunk(()=>Yx(t)),allowToolbarGroups:G===gu.floating,buttons:zl,sidebar:yl,views:Yu};kt(Qn.outerContainer),Fz(t,Qn.mothership,Ss),d.setup(t,Xe.popup.shared,le),SW(t,Xe.popup),zW(t,Xe.popup.shared.getSink,Xe.popup),eV(t),dV(t,Mt,Xe.popup.shared),rW(t,Xm,er.sink,{backstage:Xe.popup}),gZ(t,er.sink);const ag=t.getElement(),Db=Bo(Qn.outerContainer),oR={targetNode:ag,height:Db};return l.render(t,En,Gi,Xe.popup,oR)},oo=En=>(w.set(En.mothership),En),Mn=()=>{const En=rs(),Qn=Sn(),er=Tp(t)?gs():oo(Qn);g.dialogUi.set(Qn),g.popupUi.set(er),g.mainUi.set(En);const Ss={popupUi:er,dialogUi:Qn,mainUi:En,uiMotherships:g.getUiMotherships()};return Jt(Ss)};return{popups:{backstage:Xe.popup,getMothership:()=>$I("popups",w)},dialogs:{backstage:Xe.dialog,getMothership:()=>$I("dialogs",y)},renderUI:Mn}},TZ=t=>t.dom.textContent,FI=(t,s)=>{const c=$(t,"id").fold(()=>{const l=Ut("dialog-label");return St(s,"id",l),l},Dt);St(t,"aria-labelledby",c)},EZ=W([Ye("lazySink"),us("dragBlockClass"),qr("getBounds",cc),Te("useTabstopAt",Pt),Te("firstTabstop",0),Te("eventOrder",{}),ba("modalBehaviours",[gn]),Dl("onExecute"),Am("onEscape")]),UD={sketch:Dt},kZ=W([Hi({name:"draghandle",overrides:(t,s)=>({behaviours:bt([Tb.config({mode:"mouse",getTarget:c=>Dm(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Va({schema:[Ye("dom")],name:"title"}),Va({factory:UD,schema:[Ye("dom")],name:"close"}),Va({factory:UD,schema:[Ye("dom")],name:"body"}),Hi({factory:UD,schema:[Ye("dom")],name:"footer"}),du({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Te("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Te("components",[])],name:"blocker"})]),_Z=(t,s,c,l)=>{const d=Fs(),g=G=>{d.set(G);const ne=t.lazySink(G).getOrDie(),_e=l.blocker(),le=ne.getSystem().build({..._e,components:_e.components.concat([fl(G)]),behaviours:bt([Ln.config({}),io("dialog-blocker-events",[Fh(od(),()=>{Ym.isBlocked(G)?ee():gn.focusIn(G)})])])});Yd(ne,le),gn.focusIn(G)},h=G=>{d.clear(),xc(G.element).each(ne=>{G.getSystem().getByDom(ne).each(_e=>{Pm(_e)})})},y=G=>Pl(G,t,"body"),w=G=>pt(G,t,"footer"),_=(G,ne)=>{Ym.block(G,ne)},O=G=>{Ym.unblock(G)},P=Ut("modal-events"),H={...t.eventOrder,[Al()]:[P].concat(t.eventOrder["alloy.system.attached"]||[])},V=ul();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:y,getFooter:w,setIdle:O,setBusy:_},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:va(t.modalBehaviours,[Un.config({}),gn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Ym.config({getRoot:d.get}),io(P,[Er(G=>{const ne=Pl(G,t,"title").element,_e=TZ(ne);V.os.isMacOS()&&Wn(_e)?St(G.element,"aria-label",_e):FI(G.element,ne)})])])}},ya=pl({name:"ModalDialog",configFields:EZ(),partFields:kZ(),factory:_Z,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),AZ=Dn([Bc,wT].concat(nb)),OZ=ql,WD=[K4("button"),yd,Ni("align","end",["start","end"]),O2,sm,Kp("buttonType",["primary","secondary"])],ZD=[...WD,uh],xk=[_a("type",["submit","cancel","custom"]),...ZD],Eb=[_a("type",["menu"]),Op,A2,yd,Yl("items",AZ),...WD],DZ=[...WD,_a("type",["togglebutton"]),A2,yd,Op,Jr("active",!1)],jD=Hc("type",{submit:xk,cancel:xk,custom:xk,menu:Eb,togglebutton:DZ}),Tk=[Bc,uh,_a("level",["info","warn","error","success"]),EN,Te("url","")],RZ=Dn(Tk),MZ=t=>[Bc,t],NZ=[Bc,uh,sm,K4("button"),yd,QL,Kp("buttonType",["primary","secondary","toolbar"]),O2],BZ=Dn(NZ),ey=[Bc,wT],ki=ey.concat([xT]),II=ey.concat([ST,sm]),PZ=Dn(II),$Z=ql,FZ=ki.concat([kT("auto")]),IZ=Dn(FZ),LZ=Gp([_2,uh,EN]),HZ=ki.concat([fa("storageKey","default")]),zZ=Dn(HZ),VZ=Ht,Mw=Dn(ki),GD=Ht,Ek=ey.concat([fa("tag","textarea"),vc("scriptId"),vc("scriptUrl"),Ru("onFocus"),S("settings",void 0)]),kb=ey.concat([fa("tag","textarea"),Kl("init")]),kk=Sg(t=>Mr("customeditor.old",ma(kb),t).orThunk(()=>Mr("customeditor.new",ma(Ek),t))),UZ=Ht,HI=Dn(ki),zI=Sm(),ZZ=t=>[Bc,Rh("columns"),t],jZ=[Bc,vc("html"),Ni("presets","presentation",["presentation","document"]),qr("onInit",ee),Jr("stretched",!1)],GZ=Dn(jZ),VI=ki.concat([Jr("border",!1),Jr("sandboxed",!0),Jr("streamContent",!1),Jr("transparent",!0)]),UI=Dn(VI),qD=Ht,qZ=Dn(ey.concat([yc("height")])),KZ=Dn([vc("url"),xm("zoom"),xm("cachedWidth"),xm("cachedHeight")]),YZ=ki.concat([yc("inputMode"),yc("placeholder"),Jr("maximized",!1),sm]),WI=Dn(YZ),XZ=Ht,JZ=t=>[Bc,ST,t,Ni("align","start",["start","center","end"]),yc("for")],QZ=[uh,_2],KD=[uh,Yl("items",mf("items",()=>_k))],_k=uf([Dn(QZ),Dn(KD)]),ej=ki.concat([Yl("items",_k),sm]),ZI=Dn(ej),tj=Ht,nj=ki.concat([$b("items",[uh,_2]),gf("size",1),sm]),jI=Dn(nj),oj=Ht,sj=ki.concat([Jr("constrain",!0),sm]),_b=Dn(sj),YD=Dn([vc("width"),vc("height")]),rj=ey.concat([ST,gf("min",0),gf("max",0)]),Ak=Dn(rj),ty=Fd,Ok=[Bc,Yl("header",Ht),Yl("cells",ui(Ht))],GI=Dn(Ok),Dk=ki.concat([yc("placeholder"),Jr("maximized",!1),sm]),Wi=Dn(Dk),Rk=Ht,XD=[_a("type",["directory","leaf"]),TN,vc("id"),Du("menu",M$)],qI=Dn(XD),aj=XD.concat([Yl("children",mf("children",()=>Id("type",{directory:yh,leaf:qI})))]),yh=Dn(aj),DG=Id("type",{directory:yh,leaf:qI}),lj=[Bc,Yl("items",DG),Ru("onLeafAction"),Ru("onToggleExpand"),k("defaultExpandedIds",[],Ht),yc("defaultSelectedId")],KI=Dn(lj),ny=ki.concat([Ni("filetype","file",["image","media","file"]),sm,yc("picker_text")]),Mk=Dn(ny),YI=Dn([_2,G4]),JD=t=>Oc("items","items",El(),ui(Sg(s=>Mr(`Checking item of ${t}`,QD,s).fold(c=>to.error(tu(c)),c=>to.value(c))))),QD=Ac(()=>Id("type",{alertbanner:RZ,bar:Dn(MZ(JD("bar"))),button:BZ,checkbox:PZ,colorinput:zZ,colorpicker:Mw,dropzone:HI,grid:Dn(ZZ(JD("grid"))),iframe:UI,input:WI,listbox:ZI,selectbox:jI,sizeinput:_b,slider:Ak,textarea:Wi,urlinput:Mk,customeditor:kk,htmlpanel:GZ,imagepreview:qZ,collection:IZ,label:Dn(JZ(JD("label"))),table:GI,tree:KI,panel:XI})),ij=[Bc,Te("classes",[]),Yl("items",QD)],XI=Dn(ij),oy=[K4("tab"),TN,Yl("items",QD)],RG=[Bc,$b("tabs",oy)],uj=Dn(RG),dj=ZD,MG=jD,mj=Dn([vc("title"),is("body",Id("type",{panel:XI,tabpanel:uj})),fa("size","normal"),k("buttons",[],MG),Te("initialData",{}),qr("onAction",ee),qr("onChange",ee),qr("onSubmit",ee),qr("onClose",ee),qr("onCancel",ee),qr("onTabChange",ee)]),fj=t=>Mr("dialog",mj,t),Nw=Dn([_a("type",["cancel","custom"]),...dj]),gj=Dn([vc("title"),vc("url"),xm("height"),xm("width"),nu("buttons",Nw),qr("onAction",ee),qr("onCancel",ee),qr("onClose",ee),qr("onMessage",ee)]),hj=t=>Mr("dialog",gj,t),Nk=t=>tn(t)?[t].concat(ye(ir(t),Nk)):Zo(t)?ye(t,Nk):[],pj=t=>We(t.type)&&We(t.name),NG={checkbox:$Z,colorinput:VZ,colorpicker:GD,dropzone:zI,input:XZ,iframe:qD,imagepreview:KZ,selectbox:oj,sizeinput:YD,slider:ty,listbox:tj,size:YD,textarea:Rk,urlinput:YI,customeditor:UZ,collection:LZ,togglemenuitem:OZ},e=t=>A.from(NG[t.type]),n=t=>ao(Nk(t),pj),o=t=>{const s=n(t),c=ye(s,l=>e(l).fold(()=>[],d=>[is(l.name,d)]));return Dn(c)},r=t=>{var s;const c=ut(fj(t)),l=o(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:l,initialData:d}},a={open:(t,s)=>{const c=r(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=ut(hj(s));return t(c)},redial:t=>r(t)};var f=Object.freeze({__proto__:null,events:(t,s)=>{const c=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?UA:lv)(l,h)})};return vr([Qe(su(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;go(g.channels,h)&&c(l,g.data)}}),Er((l,d)=>{t.initialData.each(g=>{c(l,g)})})])}}),C=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),E=[Ye("channel"),us("renderComponents"),us("updateState"),us("initialData"),Jr("reuseDom",!0)],N=Object.freeze({__proto__:null,init:()=>{const t=fn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const B=Aa({fields:E,name:"reflecting",active:f,apis:C,state:N}),j=t=>{const s=[],c={};return cs(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?to.error(s):to.value(c)},Q=(t,s,c,l)=>{const d=Rs(Bv.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Me(t.items,h=>H5(g,h,s,c,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:bt([gn.config({mode:"acyclic",useTabstopAt:Re(Pv)}),vu.memento(d),LP(d,{postprocess:g=>j(g).fold(h=>(console.error(h),{}),Dt)}),io("dialog-body-panel",[Qe(od(),(g,h)=>{g.getSystem().broadcastOn([tw],{newFocus:A.some(h.event.target)})})])])}},q=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Ux(t.action),behaviours:va(t.tabButtonBehaviours,[Ln.config({}),gn.config({mode:"execution",useSpace:!0,useEnter:!0}),Wt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),te=ei({name:"TabButton",configFields:[Te("uid",void 0),Ye("value"),Oc("dom","dom",af(()=>({attributes:{role:"tab",id:Ut("aria"),"aria-selected":"false"}})),Ri()),us("action"),Te("domModification",{}),ba("tabButtonBehaviours",[Ln,gn,Wt]),Ye("view")],factory:q}),ve=W([Ye("tabs"),Ye("dom"),Te("clickToDismiss",!1),ba("tabbarBehaviours",[Nt,gn]),Gd(["tabClass","selectedClass"])]),xe=J0({factory:te,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Nt.dehighlight(l,d),Tn(l,Uw(),{tabbar:l,button:d})},c=(l,d)=>{Nt.highlight(l,d),Tn(l,Vw(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Nt.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?ee:c)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),Ce=W([xe]),De=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:va(t.tabbarBehaviours,[Nt.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{St(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{St(g.element,"aria-selected","false")}}),gn.config({mode:"flow",getInitial:d=>Nt.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ct=pl({name:"Tabbar",configFields:ve(),partFields:Ce(),factory:De}),Tt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:va(t.tabviewBehaviours,[Un.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Vt=ei({name:"Tabview",configFields:[ba("tabviewBehaviours",[Un])],factory:Tt}),Ze=W([Te("selectFirst",!0),Yo("onChangeTab"),Yo("onDismissTab"),Te("tabs",[]),ba("tabSectionBehaviours",[])]),Ie=Va({factory:ct,schema:[Ye("dom"),nd("markers",[Ye("tabClass"),Ye("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),ot=Va({factory:Vt,name:"tabview"}),Xt=W([Ie,ot]),Cn=(t,s,c,l)=>{const d=h=>{const y=Wt.getValue(h);pt(h,t,"tabview").each(w=>{He(t.tabs,O=>O.value===y).each(O=>{const P=O.view();$(h.element,"id").each(H=>{St(w.element,"aria-labelledby",H)}),Un.set(w,P),t.onChangeTab(w,h,P)})})},g=(h,y)=>{pt(h,t,"tabbar").each(w=>{y(w).each(yf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:R1(t.tabSectionBehaviours),events:vr(je([t.selectFirst?[Er((h,y)=>{g(h,Nt.getFirst)})]:[],[Qe(Vw(),(h,y)=>{const w=y.event.button;d(w)}),Qe(Uw(),(h,y)=>{const w=y.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>pt(h,t,"tabview").map(y=>Un.contents(y)).getOr([]),showTab:(h,y)=>{g(h,_=>{const O=Nt.getCandidates(_);return He(O,H=>Wt.getValue(H)===y).filter(H=>!Nt.isHighlighted(_,H))})}}}},fo=pl({name:"TabSection",configFields:Ze(),partFields:Xt(),factory:Cn,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),Lo=(t,s,c)=>Me(t,(l,d)=>{Un.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return Un.set(c,[]),g.height}),ks=t=>xs(fr(t,(s,c)=>s>c?-1:s<c?1:0)),Ks=(t,s,c)=>{const l=aa(t).dom,d=Dm(t,".tox-dialog-wrap").getOr(t),g=$s(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const y=ur(s),_=s.dom.offsetLeft>=c.dom.offsetLeft+ia(c)?Math.max(ur(c),y):y,O=parseInt($s(t,"margin-top"),10)||0,P=parseInt($s(t,"margin-bottom"),10)||0,V=ur(t)+O+P-_;return h-V},nc=(t,s)=>{xs(t).each(c=>fo.showTab(s,c.value))},ja=(t,s)=>{qt(t,"height",s+"px"),qt(t,"flex-basis",s+"px")},zs=(t,s,c)=>{Dm(t,'[role="dialog"]').each(l=>{Os(l,'[role="tablist"]').each(d=>{c.get().map(g=>(qt(s,"height","0"),qt(s,"flex-basis","0"),Math.min(g,Ks(l,s,d)))).each(g=>{ja(s,g)})})})},Ot=t=>Os(t,'[role="tabpanel"]'),hn=t=>{const s=Fs();return{extraEvents:[Er(d=>{const g=d.element;Ot(g).each(h=>{qt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(y=>{const w=Lo(t,h,y);ks(w).fold(s.clear,s.set)}),zs(g,h,s),$o(h,"visibility"),nc(t,d),requestAnimationFrame(()=>{zs(g,h,s)})})}),Qe(ad(),d=>{const g=d.element;Ot(g).each(h=>{zs(g,h,s)})}),Qe(GB,(d,g)=>{const h=d.element;Ot(h).each(y=>{const w=hd(U(y));qt(y,"visibility","hidden");const _=Ys(y,"height").map(H=>parseInt(H,10));$o(y,"height"),$o(y,"flex-basis");const O=y.dom.getBoundingClientRect().height;_.forall(H=>O>H)?(s.set(O),zs(h,y,s)):_.each(H=>{ja(y,H)}),$o(y,"visibility"),w.each(Bi)})})],selectFirst:!1}},ds="send-data-to-section",$t="send-data-to-view",An=(t,s,c,l)=>{const d=fn({}),g=O=>{const P=Wt.getValue(O),H=j(P).getOr({}),V=d.get(),G=ar(V,H);d.set(G)},h=O=>{const P=d.get();Wt.setValue(O,P)},y=fn(null),w=Me(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[ec(c.shared.providers.translate(O.title))],view:()=>[Bv.sketch(P=>({dom:{tag:"div",classes:["tox-form"]},components:Me(O.items,H=>H5(P,H,s,c,l)),formBehaviours:bt([gn.config({mode:"acyclic",useTabstopAt:Re(Pv)}),io("TabView.form.events",[Er(h),Wd(g)]),Ql.config({channels:fs([{key:ds,value:{onReceive:g}},{key:$t,value:{onReceive:h}}])})])}))]})),_=hn(w);return fo.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,P,H)=>{const V=Wt.getValue(P);Tn(O,jB,{name:V,oldName:y.get()}),y.set(V)},tabs:w,components:[fo.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ct.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:bt([wr.config({})])}),fo.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:_.selectFirst,tabSectionBehaviours:bt([io("tabpanel",_.extraEvents),gn.config({mode:"acyclic"}),Xo.config({find:O=>xs(fo.getViewItems(O))}),bb(A.none(),O=>(O.getSystem().broadcastOn([ds],{}),d.get()),(O,P)=>{d.set(P),O.getSystem().broadcastOn([$t],{})})])})},_o=(t,s,c,l,d,g)=>{const h=_=>{const O=_.body;switch(O.type){case"tabpanel":return[An(O,_.initialData,l,g)];default:return[Q(O,_.initialData,l,g)]}},y=(_,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(_=>({id:_})).getOr({}),...d?w:{}}},components:[],behaviours:bt([vu.childAt(0),B.config({channel:`${KP}-${s}`,updateState:y,renderComponents:h,initialData:t})])}},zt=(t,s,c,l,d,g)=>_o(t,s,A.some(c),l,d,g),Ao=(t,s,c,l)=>{const d=_o(t,s,A.none(),c,!1,l);return ya.parts.body(d)},Uo=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[jP(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:bt([wr.config({}),Ln.config({})])})]}],behaviours:bt([gn.config({mode:"acyclic",useTabstopAt:Re(Pv)})])};return ya.parts.body(s)},Ca=uv.deviceType.isTouch(),Ms=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Zc=(t,s)=>ya.parts.close(cl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:bt([wr.config({})])})),ju=()=>ya.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),fm=(t,s)=>ya.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Hm(`<p>${k4(s.translate(t))}</p>`)}]}]}),Ll=t=>ya.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Zi=(t,s)=>[Zm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Zm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],yu=t=>{const s="tox-dialog",c=s+"-wrap",l=c+"__backdrop",d=s+"__disable-scroll";return ya.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!Pv(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Hm(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:Ca?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:c,modalBehaviours:bt([Ln.config({}),io("dialog-events",t.dialogEvents.concat([Fh(od(),(g,h)=>{Ym.isBlocked(g)?ee():gn.focusIn(g)}),Qe(kg(),(g,h)=>{g.getSystem().broadcastOn([tw],{newFocus:h.event.newFocus})})])),io("scroll-lock",[Er(()=>{yr(so(),d)}),Wd(()=>{Ur(so(),d)})]),...t.extraBehaviours]),eventOrder:{[ru()]:["dialog-events"],[Al()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[cu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},ji=t=>cl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:bt([wr.config({}),Ua.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[zi("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{po(s,Rp)}}),Gu=(t,s,c,l)=>{const d=g=>[ec(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:bt([B.config({channel:`${qP}-${s}`,initialData:t,renderComponents:d})])}},wn=()=>({dom:Hm('<div class="tox-dialog__draghandle"></div>')}),ts=(t,s,c,l)=>Zm.sketch({dom:Hm('<div class="tox-dialog__header"></div>'),components:[Gu(t,s,A.some(c),l),wn(),ji(l)],containerBehaviours:bt([Tb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>gd(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Wr=(t,s,c)=>{const l=ya.parts.title(Gu(t,s,A.none(),c)),d=ya.parts.draghandle(wn()),g=ya.parts.close(ji(c)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return Zm.sketch({dom:Hm('<div class="tox-dialog__header"></div>'),components:h})},oc=(t,s,c)=>Wr({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Pc=(t,s,c,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Hm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Pa=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:l=>{const d=Os(t().element,".tox-dialog__header").map(g=>ur(g));ya.setBusy(t(),(g,h)=>Pc(l.message,h,s,d))},onUnblock:()=>{ya.setIdle(t())}}),Cc="tox-dialog--fullscreen",uc="tox-dialog--width-lg",vl="tox-dialog--width-md",Cu=t=>{switch(t){case"large":return A.some(uc);case"medium":return A.some(vl);default:return A.none()}},_d=(t,s)=>{const c=be.fromDom(s.element.dom);hi(c,Cc)||(pi(c,[uc,vl]),Cu(t).each(l=>yr(c,l)))},Ad=(t,s)=>{const c=be.fromDom(t.element.dom),l=Yk(c),d=He(l,g=>g===uc||g===vl).or(Cu(s));Gk(c,[Cc,...d.toArray()])},qu=(t,s,c)=>ol(yu({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[fE({}),...t.extraBehaviours],onEscape:l=>{po(l,Rp)},dialogEvents:s,eventOrder:{[su()]:[B.name(),Ql.name()],[Al()]:["scroll-lock",B.name(),"messages","dialog-events","alloy.base.behaviour"],[cu()]:["alloy.base.behaviour","dialog-events","messages",B.name(),"scroll-lock"]}})),rg=(t,s={})=>{const c=l=>{const d=Me(l.items,g=>{const h=ht(s,g.name).getOr(fn(!1));return{...g,storage:h}});return{...l,items:d}};return Me(t,l=>l.type==="menu"?c(l):l)},Ab=t=>zo(t,(s,c)=>c.type==="menu"?zo(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Ob=(t,s)=>[hy(od(),qH),t(V2,(c,l,d,g)=>{hd(U(g.element)).fold(ee,v1),s.onClose(),l.onClose()}),t(Rp,(c,l,d,g)=>{l.onCancel(c),po(g,V2)}),Qe(D3,(c,l)=>s.onUnblock()),Qe(JT,(c,l)=>s.onBlock(l.event))],eR=(t,s)=>{const c=(d,g)=>Qe(d,(h,y)=>{l(h,(w,_)=>{g(t(),w,y.event,h)})}),l=(d,g)=>{B.getState(d).get().each(h=>{g(h,d)})};return[...Ob(c,s),c(Jf,(d,g,h)=>{g.onAction(d,{name:h.name})})]},cg=(t,s,c)=>{const l=(g,h)=>Qe(g,(y,w)=>{d(y,(_,O)=>{h(t(),_,w.event,y)})}),d=(g,h)=>{B.getState(g).get().each(y=>{h(y.internalDialog,g)})};return[...Ob(l,s),l(Av,(g,h)=>h.onSubmit(g)),l(Vi,(g,h,y)=>{h.onChange(g,{name:y.name})}),l(Jf,(g,h,y,w)=>{const _=()=>w.getSystem().isConnected()?gn.focusIn(w):void 0,O=V=>X(V,"disabled")||$(V,"aria-disabled").exists(G=>G==="true"),P=U(w.element),H=hd(P);h.onAction(g,{name:y.name,value:y.value}),hd(P).fold(_,V=>{O(V)||H.exists(G=>Yr(V,G)&&O(G))?_():c().toOptional().filter(G=>!Yr(G.element,V)).each(_)})}),l(jB,(g,h,y)=>{h.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),Wd(g=>{const h=t();Wt.setValue(g,h.getData())})]},Bk=(t,s)=>yb(t,t.type,s),JI=(t,s,c)=>He(s,l=>l.name===c).bind(l=>l.memento.getOpt(t)),Hl=(t,s)=>{const c=s.map(y=>y.footerButtons).getOr([]),l=Ns(c,y=>y.align==="start"),d=(y,w)=>Zm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:Me(w,_=>_.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},zp=(t,s,c)=>{const l=(d,g)=>{const h=Me(g.buttons,w=>{const _=Rs(Bk(w,c));return{name:w.name,align:w.align,memento:_}}),y=w=>JI(d,h,w);return A.some({lookupByName:y,footerButtons:h})};return{dom:Hm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:bt([B.config({channel:`${YP}-${s}`,initialData:t,updateState:l,renderComponents:Hl})])}},QI=(t,s,c)=>zp(t,s,c),Pk=(t,s,c)=>ya.parts.footer(zp(t,s,c)),Od=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Xo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Bv.getField(l,s).orThunk(()=>t.getFooter().bind(h=>B.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},Bw=(t,s)=>{const c=t.getRoot();return B.getState(c).get().map(l=>ut(Mr("data",l.dataValidator,s))).getOr(s)},Pe=(t,s,c)=>{const l=G=>{const ne=t.getRoot();ne.getSystem().isConnected()&&G(ne)},V={getData:()=>{const G=t.getRoot(),ne=G.getSystem().isConnected()?t.getFormWrapper():G,_e=Wt.getValue(ne),le=ns(c,Ee=>Ee.get());return{..._e,...le}},setData:G=>{l(ne=>{const _e=V.getData(),le=ar(_e,G),Ee=Bw(t,le),Se=t.getFormWrapper();Wt.setValue(Se,Ee),cs(c,(et,$e)=>{Mo(le,$e)&&et.set(le[$e])})})},setEnabled:(G,ne)=>{Od(t,G).each(ne?Pn.enable:Pn.disable)},focus:G=>{Od(t,G).each(Ln.focus)},block:G=>{if(!We(G))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ne=>{Tn(ne,JT,{message:G})})},unblock:()=>{l(G=>{po(G,D3)})},showTab:G=>{l(ne=>{const _e=t.getBody();B.getState(_e).get().exists(Ee=>Ee.isTabPanel())&&Xo.getCurrent(_e).each(Ee=>{fo.showTab(Ee,G)})})},redial:G=>{l(ne=>{const _e=t.getId(),le=s(G),Ee=rg(le.internalDialog.buttons,c);ne.getSystem().broadcastOn([`${ew}-${_e}`],le),ne.getSystem().broadcastOn([`${qP}-${_e}`],le.internalDialog),ne.getSystem().broadcastOn([`${KP}-${_e}`],le.internalDialog),ne.getSystem().broadcastOn([`${YP}-${_e}`],{...le.internalDialog,buttons:Ee}),V.setData(le.initialData)})},close:()=>{l(G=>{po(G,V2)})},toggleFullscreen:t.toggleFullscreen};return V},Le=(t,s,c)=>{const l=Ut("dialog"),d=t.internalDialog,g=oc(d.title,l,c),h=fn(d.size),y=Se=>Od(le,Se),w=Cu(h.get()).toArray(),_=(Se,et)=>(h.set(et.internalDialog.size),_d(et.internalDialog.size,Se),A.some(et)),O=Ao({body:d.body,initialData:d.initialData},l,c,y),P=rg(d.buttons),H=Ab(P),V=un(P.length!==0,Pk({buttons:P},l,c)),G=cg(()=>Ee,Pa(()=>_e,c.shared.providers,s),c.shared.getSink),ne={id:l,header:g,body:O,footer:V,extraClasses:w,extraBehaviours:[B.config({channel:`${ew}-${l}`,updateState:_,initialData:t})],extraStyles:{}},_e=qu(ne,G,c),le=(()=>{const Se=()=>{const $e=ya.getBody(_e);return Xo.getCurrent($e).getOr($e)},et=()=>{Ad(_e,h.get())};return{getId:W(l),getRoot:W(_e),getBody:()=>ya.getBody(_e),getFooter:()=>ya.getFooter(_e),getFormWrapper:Se,toggleFullscreen:et}})(),Ee=Pe(le,s.redial,H);return{dialog:_e,instanceApi:Ee}},At=(t,s,c,l=!1,d)=>{const g=Ut("dialog"),h=Ut("dialog-label"),y=Ut("dialog-content"),w=t.internalDialog,_=rn=>Od(Mt,rn),O=fn(w.size),P=Cu(O.get()).toArray(),H=(rn,Zt)=>(O.set(Zt.internalDialog.size),_d(Zt.internalDialog.size,rn),d(),A.some(Zt)),V=Rs(ts({title:w.title,draggable:!0},g,h,c.shared.providers)),G=Rs(zt({body:w.body,initialData:w.initialData},g,y,c,l,_)),ne=rg(w.buttons),_e=Ab(ne),le=un(ne.length!==0,Rs(QI({buttons:ne},g,c))),Ee=cg(()=>Xe,{onBlock:rn=>{Ym.block($e,(Zt,On)=>{const Sn=V.getOpt($e).map(gs=>ur(gs.element));return Pc(rn.message,On,c.shared.providers,Sn)})},onUnblock:()=>{Ym.unblock($e)},onClose:()=>s.closeWindow()},c.shared.getSink),Se="tox-dialog-inline",et=ul().os,$e=ol({dom:{tag:"div",classes:["tox-dialog",Se,...P],attributes:{role:"dialog",...et.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[su()]:[B.name(),Ql.name()],[ru()]:["execute-on-form"],[Al()]:["reflecting","execute-on-form"]},behaviours:bt([gn.config({mode:"cyclic",onEscape:rn=>(po(rn,V2),A.some(!0)),useTabstopAt:rn=>!Pv(rn)&&(bs(rn)!=="button"||_s(rn,"disabled")!=="disabled"),firstTabstop:1}),B.config({channel:`${ew}-${g}`,updateState:H,initialData:t}),Ln.config({}),io("execute-on-form",Ee.concat([Fh(od(),(rn,Zt)=>{gn.focusIn(rn)}),Qe(kg(),(rn,Zt)=>{rn.getSystem().broadcastOn([tw],{newFocus:Zt.event.newFocus})})])),Ym.config({getRoot:()=>A.some($e)}),Un.config({}),fE({})]),components:[V.asSpec(),G.asSpec(),...le.map(rn=>rn.asSpec()).toArray()]}),yt=()=>{Ad($e,O.get())},Mt={getId:W(g),getRoot:W($e),getFooter:()=>le.map(rn=>rn.get($e)),getBody:()=>G.get($e),getFormWrapper:()=>{const rn=G.get($e);return Xo.getCurrent(rn).getOr(rn)},toggleFullscreen:yt},Xe=Pe(Mt,s.redial,_e);return{dialog:$e,instanceApi:Xe}};var wt=tinymce.util.Tools.resolve("tinymce.util.URI");const $n=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!We(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{Tn(y,JT,{message:h})})},unblock:()=>{s(h=>{po(h,D3)})},close:()=>{s(h=>{po(h,V2)})},sendMessage:h=>{s(y=>{y.getSystem().broadcastOn([XP],h)})}}},qo=["insertContent","setContent","execCommand","close","block","unblock"],Lr=t=>tn(t)&&qo.indexOf(t.mceAction)!==-1,gm=t=>!Lr(t)&&tn(t)&&Mo(t,"mceAction"),$k=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const l=Ro(c.ui)?c.ui:!1;t.execCommand(c.cmd,l,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},bj=(t,s,c,l)=>{const d=Ut("dialog"),g=oc(t.title,d,l),h=Uo(t),y=t.buttons.bind(Se=>Se.length===0?A.none():A.some(Pk({buttons:Se},d,l))),w=eR(()=>Ee,Pa(()=>le,l.shared.providers,s)),_={...t.height.fold(()=>({}),Se=>({height:Se+"px","max-height":Se+"px"})),...t.width.fold(()=>({}),Se=>({width:Se+"px","max-width":Se+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],P=new wt(t.url,{base_uri:new wt(window.location.href)}),H=`${P.protocol}://${P.host}${P.port?":"+P.port:""}`,V=bc(),G=(Se,et)=>A.some(et),ne=[B.config({channel:`${ew}-${d}`,updateState:G,initialData:t}),io("messages",[Er(()=>{const Se=Nl(be.fromDom(window),"message",et=>{if(P.isSameOrigin(new wt(et.raw.origin))){const $e=et.raw.data;Lr($e)?$k(c,Ee,$e):gm($e)&&t.onMessage(Ee,$e)}});V.set(Se)}),Wd(V.clear)]),Ql.config({channels:{[XP]:{onReceive:(Se,et)=>{Os(Se.element,"iframe").each($e=>{const yt=$e.dom.contentWindow;Wn(yt)&&yt.postMessage(et,H)})}}}})],le=qu({id:d,header:g,body:h,footer:y,extraClasses:O,extraBehaviours:ne,extraStyles:_},w,l),Ee=$n(le);return{dialog:le,instanceApi:Ee}},Fk=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{ya.hide(_),d()},h=Rs(yb({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),y=ju(),w=Zc(g,s.providers),_=ol(yu({lazySink:()=>s.getSink(),header:Ms(y,w),body:fm(l,s.providers),footer:A.some(Ll(Zi([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qe(Rp,g)],eventOrder:{}}));ya.show(_);const O=h.get(_);Ln.focus(O)}}},Ch=t=>{const s=t.shared;return{open:(l,d)=>{const g=H=>{ya.hide(O),d(H)},h=Rs(yb({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),y=yb({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),w=ju(),_=Zc(()=>g(!1),s.providers),O=ol(yu({lazySink:()=>s.getSink(),header:Ms(w,_),body:fm(l,s.providers),footer:A.some(Ll(Zi([],[y,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qe(Rp,()=>g(!1)),Qe(Av,()=>g(!0))],eventOrder:{}}));ya.show(O);const P=h.get(O);Ln.focus(P)}}},tR=(t,s)=>ut(Mr("data",s,t)),nR=t=>H2(t,".tox-alert-dialog")||H2(t,".tox-confirm-dialog"),e6=(t,s,c)=>s&&c?[]:[Ir.config({contextual:{lazyContext:()=>A.some(Rr(be.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>lh(t,l.element).map(g=>({bounds:X1(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Tc(g.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})],t6=t=>{const s=t.editor,c=gv(s),l=Fk(t.backstages.dialog),d=Ch(t.backstages.dialog),g=(G,ne,_e)=>{if(!Nn(ne)){if(ne.inline==="toolbar")return _(G,t.backstages.popup.shared.anchors.inlineDialog(),_e,ne);if(ne.inline==="bottom")return O(G,t.backstages.popup.shared.anchors.inlineBottomDialog(),_e,ne);if(ne.inline==="cursor")return _(G,t.backstages.popup.shared.anchors.cursor(),_e,ne)}return w(G,_e)},h=(G,ne)=>y(G,ne),y=(G,ne)=>{const _e=le=>{const Ee=bj(le,{closeWindow:()=>{ya.hide(Ee.dialog),ne(Ee.instanceApi)}},s,t.backstages.dialog);return ya.show(Ee.dialog),Ee.instanceApi};return a.openUrl(_e,G)},w=(G,ne)=>{const _e=(le,Ee,Se)=>{const et=Ee,yt=Le({dataValidator:Se,initialData:et,internalDialog:le},{redial:a.redial,closeWindow:()=>{ya.hide(yt.dialog),ne(yt.instanceApi)}},t.backstages.dialog);return ya.show(yt.dialog),yt.instanceApi.setData(et),yt.instanceApi};return a.open(_e,G)},_=(G,ne,_e,le)=>{const Ee=(Se,et,$e)=>{const yt=tR(et,$e),Mt=Fs(),Xe=t.backstages.popup.shared.header.isPositionedAtTop(),rn={dataValidator:$e,initialData:yt,internalDialog:Se},Zt=()=>Mt.on(rs=>{Nr.reposition(rs),(!c||!Xe)&&Ir.refresh(rs)}),On=At(rn,{redial:a.redial,closeWindow:()=>{Mt.on(Nr.hide),s.off("ResizeEditor",Zt),Mt.clear(),_e(On.instanceApi)}},t.backstages.popup,le.ariaAttrs,Zt),Sn=ol(Nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:le.persistent?{event:"doNotDismissYet"}:{},...Xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:bt([io("window-manager-inline-events",[Qe(bf(),(rs,Bo)=>{po(On.dialog,Rp)})]),...e6(s,c,Xe)]),isExtraPart:(rs,Bo)=>nR(Bo)}));Mt.set(Sn);const gs=()=>{const rs=s.inline?so():be.fromDom(s.getContainer()),Bo=Rr(rs);return A.some(Bo)};return Nr.showWithinBounds(Sn,fl(On.dialog),{anchor:ne},gs),(!c||!Xe)&&(Ir.refresh(Sn),s.on("ResizeEditor",Zt)),On.instanceApi.setData(yt),gn.focusIn(On.dialog),On.instanceApi};return a.open(Ee,G)},O=(G,ne,_e,le)=>{const Ee=(Se,et,$e)=>{const yt=tR(et,$e),Mt=Fs(),Xe=t.backstages.popup.shared.header.isPositionedAtTop(),rn={dataValidator:$e,initialData:yt,internalDialog:Se},Zt=()=>Mt.on(rs=>{Nr.reposition(rs),Ir.refresh(rs)}),On=At(rn,{redial:a.redial,closeWindow:()=>{Mt.on(Nr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Zt),Mt.clear(),_e(On.instanceApi)}},t.backstages.popup,le.ariaAttrs,Zt),Sn=ol(Nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:le.persistent?{event:"doNotDismissYet"}:{},...Xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:bt([io("window-manager-inline-events",[Qe(bf(),(rs,Bo)=>{po(On.dialog,Rp)})]),Ir.config({contextual:{lazyContext:()=>A.some(Rr(be.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:rs=>lh(s,rs.element).map(kt=>({bounds:X1(kt),optScrollEnv:A.some({currentScrollTop:kt.element.dom.scrollTop,scrollElmTop:Tc(kt.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})]),isExtraPart:(rs,Bo)=>nR(Bo)}));Mt.set(Sn);const gs=()=>t.backstages.popup.shared.getSink().toOptional().bind(rs=>{const Bo=lh(s,rs.element),kt=15,Jt=Bo.map(En=>X1(En)).getOr(cc()),oo=Rr(be.fromDom(s.getContentAreaContainer())),Mn=bg(oo,Jt);return A.some(cr(Mn.x,Mn.y,Mn.width,Mn.height-kt))});return Nr.showWithinBounds(Sn,fl(On.dialog),{anchor:ne},gs),Ir.refresh(Sn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Zt),On.instanceApi.setData(yt),gn.focusIn(On.dialog),On.instanceApi};return a.open(Ee,G)};return{open:g,openUrl:h,alert:(G,ne)=>{l.open(G,ne)},close:G=>{G.close()},confirm:(G,ne)=>{d.open(G,ne)}}},vj=t=>{OM(t),F8(t),TW(t)};var Wo=()=>{ed.add("silver",t=>{vj(t);let s=()=>cc();const{dialogs:c,popups:l,renderUI:d}=xZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return lh(t,l.getMothership().element).each(P=>{s=()=>X1(P)}),_};D7.register(t,l.backstage.shared);const h=t6({editor:t,backstages:{popup:l.backstage,dialog:c.backstage}}),y=Fs(),w=()=>LL(t,{backstage:l.backstage},l.getMothership(),y);return{renderUI:g,getWindowManagerImpl:W(h),getNotificationManagerImpl:w}})};Wo()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){var Gt=tinymce.util.Tools.resolve("tinymce.ModelManager");const uo=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},Fn=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&uo(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},eo=i=>m=>Fn(m)===i,Yn=i=>m=>typeof m===i,ro=i=>m=>i===m,In=eo("string"),We=eo("object"),tn=eo("array"),Oo=ro(null),Zo=Yn("boolean"),Do=ro(void 0),Ro=i=>i==null,Nn=i=>!Ro(i),jo=Yn("function"),Wn=Yn("number"),Ct=()=>{},zn=(i,m)=>(...p)=>i(m.apply(null,p)),Ue=(i,m)=>p=>i(m(p)),ee=i=>()=>i,st=i=>i,Zn=(i,m)=>i===m;function it(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const W=i=>m=>!i(m),Dt=i=>()=>{throw new Error(i)},cn=i=>i(),xn=ee(!1),Re=ee(!0);class ie{constructor(m,p){this.tag=m,this.value=p}static some(m){return new ie(!0,m)}static none(){return ie.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ie.some(m(this.value)):ie.none()}bind(m){return this.tag?m(this.value):ie.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ie.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Nn(m)?ie.some(m):ie.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ie.singletonNone=new ie(!1);const Go=Array.prototype.slice,co=Array.prototype.indexOf,Pt=Array.prototype.push,A=(i,m)=>co.call(i,m),To=(i,m)=>A(i,m)>-1,rt=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return!0}return!1},Ho=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},Yt=(i,m)=>{const p=i.length,v=new Array(p);for(let T=0;T<p;T++){const D=i[T];v[T]=m(D,T)}return v},Ke=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];m(T,p)}},go=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},Vs=(i,m)=>{const p=[],v=[];for(let T=0,D=i.length;T<D;T++){const F=i[T];(m(F,T)?p:v).push(F)}return{pass:p,fail:v}},ft=(i,m)=>{const p=[];for(let v=0,T=i.length;v<T;v++){const D=i[v];m(D,v)&&p.push(D)}return p},pn=(i,m,p)=>(go(i,(v,T)=>{p=m(p,v,T)}),p),Me=(i,m,p)=>(Ke(i,(v,T)=>{p=m(p,v,T)}),p),Je=(i,m,p)=>{for(let v=0,T=i.length;v<T;v++){const D=i[v];if(m(D,v))return ie.some(D);if(p(D,v))break}return ie.none()},I=(i,m)=>Je(i,m,xn),Ns=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return ie.some(p)}return ie.none()},ao=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!tn(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);Pt.apply(m,i[p])}return m},bo=(i,m)=>ao(Yt(i,m)),zo=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const T=i[p];if(m(T,p)!==!0)return!1}return!0},Gc=i=>{const m=Go.call(i,0);return m.reverse(),m},He=(i,m)=>{const p={};for(let v=0,T=i.length;v<T;v++){const D=i[v];p[String(D)]=m(D,v)}return p},vt=(i,m)=>{const p=Go.call(i,0);return p.sort(m),p},je=(i,m)=>m>=0&&m<i.length?ie.some(i[m]):ie.none(),ye=i=>je(i,0),ln=i=>je(i,i.length-1),vo=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return ie.none()},Lt=Object.keys,hs=Object.hasOwnProperty,jn=(i,m)=>{const p=Lt(i);for(let v=0,T=p.length;v<T;v++){const D=p[v],F=i[D];m(F,D)}},fr=(i,m)=>Vo(i,(p,v)=>({k:v,v:m(p,v)})),Vo=(i,m)=>{const p={};return jn(i,(v,T)=>{const D=m(v,T);p[D.k]=D.v}),p},xs=i=>(m,p)=>{i[p]=m},oa=(i,m,p,v)=>{jn(i,(T,D)=>{(m(T,D)?p:v)(T,D)})},Us=(i,m)=>{const p={};return oa(i,m,xs(p),Ct),p},Bs=(i,m)=>{const p=[];return jn(i,(v,T)=>{p.push(m(v,T))}),p},ps=i=>Bs(i,st),wc=(i,m)=>cs(i,m)?ie.from(i[m]):ie.none(),cs=(i,m)=>hs.call(i,m),ns=(i,m)=>cs(i,m)&&i[m]!==void 0&&i[m]!==null,lr=i=>{for(const m in i)if(hs.call(i,m))return!1;return!0},lo=typeof window<"u"?window:Function("return this;")(),Cs=(i,m)=>{let p=m??lo;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},gr=(i,m)=>{const p=i.split(".");return Cs(p,m)},$c=(i,m)=>gr(i,m),dc=(i,m)=>{const p=$c(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},ws=Object.getPrototypeOf,ir=i=>dc("HTMLElement",i),ht=i=>{const m=gr("ownerDocument.defaultView",i);return We(i)&&(ir(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(ws(i).constructor.name))},Mo=8,_r=9,Kr=11,Zr=1,Hr=3,Jo=i=>i.dom.nodeName.toLowerCase(),sc=i=>i.dom.nodeType,jr=i=>m=>sc(m)===i,os=i=>sc(i)===Mo||Jo(i)==="#comment",un=i=>tr(i)&&ht(i.dom),tr=jr(Zr),rc=jr(Hr),Ga=jr(_r),qa=jr(Kr),as=i=>m=>tr(m)&&Jo(m)===i,Ws=(i,m,p)=>{if(In(p)||Zo(p)||Wn(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},Ps=(i,m,p)=>{Ws(i.dom,m,p)},mc=(i,m)=>{const p=i.dom;jn(m,(v,T)=>{Ws(p,T,v)})},sa=(i,m)=>{jn(m,(p,v)=>{p.fold(()=>{re(i,v)},T=>{Ws(i.dom,v,T)})})},hr=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},de=(i,m)=>ie.from(hr(i,m)),re=(i,m)=>{i.dom.removeAttribute(m)},Oe=i=>Me(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),ze=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return Xn(v.childNodes[0])},sn=(i,m)=>{const v=(m||document).createElement(i);return Xn(v)},vn=(i,m)=>{const v=(m||document).createTextNode(i);return Xn(v)},Xn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},be={fromHtml:ze,fromTag:sn,fromText:vn,fromDom:Xn,fromPoint:(i,m,p)=>ie.from(i.dom.elementFromPoint(m,p)).map(Xn)},Hn=(i,m)=>{const p=i.dom;if(p.nodeType!==Zr)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},ue=i=>i.nodeType!==Zr&&i.nodeType!==_r&&i.nodeType!==Kr||i.childElementCount===0,fe=(i,m)=>{const p=m===void 0?document:m.dom;return ue(p)?[]:Yt(p.querySelectorAll(i),be.fromDom)},tt=(i,m)=>{const p=m===void 0?document:m.dom;return ue(p)?ie.none():ie.from(p.querySelector(i)).map(be.fromDom)},lt=(i,m)=>i.dom===m.dom,Ft=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},dn=Hn,nn=i=>be.fromDom(i.dom.ownerDocument),on=i=>Ga(i)?i:nn(i),an=i=>be.fromDom(on(i).dom.documentElement),yn=i=>be.fromDom(on(i).dom.defaultView),yo=i=>ie.from(i.dom.parentNode).map(be.fromDom),bs=i=>ie.from(i.dom.parentElement).map(be.fromDom),Sc=(i,m)=>{const p=jo(m)?m:xn;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,F=be.fromDom(D);if(T.push(F),p(F)===!0)break;v=D}return T},ra=i=>ie.from(i.dom.previousSibling).map(be.fromDom),ca=i=>ie.from(i.dom.nextSibling).map(be.fromDom),Bn=i=>Yt(i.dom.childNodes,be.fromDom),mo=(i,m)=>{const p=i.dom.childNodes;return ie.from(p[m]).map(be.fromDom)},Qo=i=>mo(i,0),fc=(i,m)=>{yo(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Br=(i,m)=>{ca(i).fold(()=>{yo(i).each(T=>{Es(T,m)})},v=>{fc(v,m)})},Zs=(i,m)=>{Qo(i).fold(()=>{Es(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},Es=(i,m)=>{i.dom.appendChild(m.dom)},Fc=(i,m,p)=>{mo(i,p).fold(()=>{Es(i,m)},v=>{fc(v,m)})},Vl=(i,m)=>{fc(i,m),Es(m,i)},ss=(i,m)=>{Ke(m,(p,v)=>{const T=v===0?i:m[v-1];Br(T,p)})},Yr=(i,m)=>{Ke(m,p=>{Es(i,p)})},Ic=i=>{i.dom.textContent="",Ke(Bn(i),m=>{Ar(m)})},Ar=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},aa=i=>{const m=Bn(i);m.length>0&&ss(i,m),Ar(i)},$a=(i,m)=>be.fromDom(i.dom.cloneNode(m)),xc=i=>$a(i,!1),la=i=>$a(i,!0),wa=(i,m)=>{const p=be.fromTag(m),v=Oe(i);return mc(p,v),p},_i=(i,m)=>{const p=wa(i,m),v=Bn(la(i));return Yr(p,v),p},qc=(i,m)=>{const p=wa(i,m);Br(i,p);const v=Bn(i);return Yr(p,v),Ar(i),p},ll=["tfoot","thead","tbody","colgroup"],gc=i=>To(ll,i),Sa=(i,m)=>({rows:i,columns:m}),Cl=(i,m)=>({row:i,column:m}),Ul=(i,m,p)=>({element:i,rowspan:m,colspan:p}),wu=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),Ai=(i,m,p,v,T,D)=>({element:i,rowspan:m,colspan:p,row:v,column:T,isLocked:D}),Kc=(i,m,p)=>({element:i,cells:m,section:p}),Yi=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),U=(i,m,p)=>({element:i,isNew:m,isLocked:p}),ce=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),we=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),qe=(i,m,p)=>({element:i,colspan:m,column:p}),gt=(i,m)=>({element:i,columns:m}),Qt=i=>qa(i)&&Nn(i.dom.host),xo=jo(Element.prototype.attachShadow)&&jo(Node.prototype.getRootNode),Po=ee(xo),so=xo?i=>be.fromDom(i.dom.getRootNode()):on,vs=i=>{const m=so(i);return Qt(m)?ie.some(m):ie.none()},nr=i=>be.fromDom(i.dom.host),St=i=>{if(Po()&&Nn(i.target)){const m=be.fromDom(i.target);if(tr(m)&&Su(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return ye(p)}}return ie.from(i.target)},Su=i=>Nn(i.dom.shadowRoot),_s=i=>{const m=rc(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return vs(be.fromDom(m)).fold(()=>p.body.contains(m),Ue(_s,nr))},$=()=>X(be.fromDom(document)),X=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return be.fromDom(m)},oe=(i,m,p)=>ft(Sc(i,p),m),Ne=(i,m)=>ft(Bn(i),m),Bt=(i,m)=>{let p=[];return Ke(Bn(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Bt(v,m))}),p},ho=(i,m,p)=>oe(i,v=>Hn(v,m),p),qt=(i,m)=>Ne(i,p=>Hn(p,m)),or=(i,m)=>fe(m,i);var dt=(i,m,p,v,T)=>i(p,v)?ie.some(p):jo(T)&&T(p)?ie.none():m(p,v,T);const $s=(i,m,p)=>{let v=i.dom;const T=jo(p)?p:xn;for(;v.parentNode;){v=v.parentNode;const D=be.fromDom(v);if(m(D))return ie.some(D);if(T(D))break}return ie.none()},Yc=(i,m,p)=>dt((T,D)=>D(T),$s,i,m,p),Ys=(i,m)=>{const p=T=>m(be.fromDom(T));return I(i.dom.childNodes,p).map(be.fromDom)},zr=(i,m)=>{const p=v=>{for(let T=0;T<v.childNodes.length;T++){const D=be.fromDom(v.childNodes[T]);if(m(D))return ie.some(D);const F=p(v.childNodes[T]);if(F.isSome())return F}return ie.none()};return p(i.dom)},il=(i,m,p)=>$s(i,v=>Hn(v,m),p),$o=(i,m)=>Ys(i,p=>Hn(p,m)),Xc=(i,m)=>tt(m,i),sr=(i,m,p)=>dt((T,D)=>Hn(T,D),il,i,m,p),Wl=(i,m,p=Zn)=>i.exists(v=>p(v,m)),ur=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},xu=(i,m)=>i!=null?m(i):ie.none(),hm=(i,m)=>i?ie.some(m):ie.none(),ug=(i,m)=>i.substring(m),pr=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,wl=(i,m)=>Tc(i,m)?ug(i,m.length):i,hc=(i,m,p=0,v)=>{const T=i.indexOf(m,p);return T!==-1?Do(v)?!0:T+m.length<=v:!1},Tc=(i,m)=>pr(i,m,0),Jc=(i,m)=>pr(i,m,i.length-m.length),No=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),ia=i=>i.length>0,Lc=i=>{const m=parseFloat(i);return isNaN(m)?ie.none():ie.some(m)},K=i=>i.style!==void 0&&jo(i.style.getPropertyValue),se=(i,m,p)=>{if(!In(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);K(i)&&i.style.setProperty(m,p)},ke=(i,m)=>{K(i)&&i.style.removeProperty(m)},Be=(i,m,p)=>{const v=i.dom;se(v,m,p)},mn=(i,m)=>{const p=i.dom;jn(m,(v,T)=>{se(p,T,v)})},Co=(i,m)=>{const p=i.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!_s(i)?Xs(p,m):T},Xs=(i,m)=>K(i)?i.style.getPropertyValue(m):"",pc=(i,m)=>{const p=i.dom,v=Xs(p,m);return ie.from(v).filter(T=>T.length>0)},Eo=(i,m)=>{const p=i.dom;ke(p,m),Wl(de(i,"style").map(No),"")&&re(i,"style")},Xr=(i,m)=>{const p=i.dom,v=m.dom;K(p)&&K(v)&&(v.style.cssText=p.style.cssText)},rr=(i,m,p=0)=>de(i,m).map(v=>parseInt(v,10)).getOr(p),Pr=(i,m)=>rr(i,m,1),Dr=i=>as("col")(i)?rr(i,"span",1)>1:Pr(i,"colspan")>1,Or=i=>Pr(i,"rowspan")>1,Fa=(i,m)=>parseInt(Co(i,m),10),Zl=ee(10),Ec=ee(10),Ia=(i,m)=>oi(i,m,Re),oi=(i,m,p)=>bo(Bn(i),v=>Hn(v,m)?p(v)?[v]:[]:oi(v,m,p)),si=(i,m,p=xn)=>{if(p(m))return ie.none();if(To(i,Jo(m)))return ie.some(m);const v=T=>Hn(T,"table")||p(T);return il(m,i.join(","),v)},Jm=(i,m)=>si(["td","th"],i,m),Tu=i=>Ia(i,"th,td"),jl=i=>Hn(i,"colgroup")?qt(i,"col"):bo(Md(i),m=>qt(m,"col")),xa=(i,m)=>sr(i,"table",m),Eu=i=>Ia(i,"tr"),Md=i=>xa(i).fold(ee([]),m=>qt(m,"colgroup")),Oi=(i,m)=>Yt(i,p=>{if(Jo(p)==="colgroup"){const v=Yt(jl(p),T=>{const D=rr(T,"span",1);return Ul(T,1,D)});return Kc(p,v,"colgroup")}else{const v=Yt(Tu(p),T=>{const D=rr(T,"rowspan",1),F=rr(T,"colspan",1);return Ul(T,D,F)});return Kc(p,v,m(p))}}),dg=i=>yo(i).map(m=>{const p=Jo(m);return gc(p)?p:"tbody"}).getOr("tbody"),Nd=i=>{const m=Eu(i),v=[...Md(i),...m];return Oi(v,dg)},mg=(i,m)=>Oi(i,()=>m),Xu=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},fg=(i,m,p,v)=>{const T=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!T,F=i.isiOS()||i.isAndroid(),Z=F||v("(pointer:coarse)"),J=T||!D&&F&&v("(min-device-width:768px)"),ge=D||F&&!J,Ae=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,mt=!ge&&!J&&!Ae;return{isiPad:ee(T),isiPhone:ee(D),isTablet:ee(J),isPhone:ee(ge),isTouch:ee(Z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:ee(Ae),isDesktop:ee(mt)}},Ju=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},Up=(i,m)=>{const p=Ju(i,m);if(!p)return{major:0,minor:0};const v=T=>Number(m.replace(p,"$"+T));return Ka(v(1),v(2))},me=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?pm():Up(i,p)},pm=()=>Ka(0,0),Ka=(i,m)=>({major:i,minor:m}),Xi={nu:Ka,detect:me,unknown:pm},gg=(i,m)=>vo(m.brands,p=>{const v=p.brand.toLowerCase();return I(i,T=>{var D;return v===((D=T.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(T=>({current:T.name,version:Xi.nu(parseInt(p.version,10),0)}))}),wh=(i,m)=>{const p=String(m).toLowerCase();return I(i,v=>v.search(p))},ls=(i,m)=>wh(i,m).map(p=>{const v=Xi.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Ta=(i,m)=>wh(i,m).map(p=>{const v=Xi.detect(p.versionRegexes,m);return{current:p.name,version:v}}),ul=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,kc=i=>m=>hc(m,i),Qu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>hc(i,"edge/")&&hc(i,"chrome")&&hc(i,"safari")&&hc(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ul],search:i=>hc(i,"chrome")&&!hc(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>hc(i,"msie")||hc(i,"trident")},{name:"Opera",versionRegexes:[ul,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kc("firefox")},{name:"Safari",versionRegexes:[ul,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(hc(i,"safari")||hc(i,"mobile/"))&&hc(i,"applewebkit")}],ri=[{name:"Windows",search:kc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>hc(i,"iphone")||hc(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:kc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kc("linux"),versionRegexes:[]},{name:"Solaris",search:kc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:kc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ua={browsers:ee(Qu),oses:ee(ri)},ci="Edge",hg="Chromium",Sh="IE",Sl="Opera",ai="Firefox",Qm="Safari",Ea=()=>_c({current:void 0,version:Xi.unknown()}),_c=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isEdge:v(ci),isChromium:v(hg),isIE:v(Sh),isOpera:v(Sl),isFirefox:v(ai),isSafari:v(Qm)}},ku={unknown:Ea,nu:_c,edge:ee(ci),chromium:ee(hg),ie:ee(Sh),opera:ee(Sl),firefox:ee(ai),safari:ee(Qm)},Bd="Windows",Gl="iOS",Qc="Android",ef="Linux",tf="macOS",nf="Solaris",bm="FreeBSD",xl="ChromeOS",of=()=>xh({current:void 0,version:Xi.unknown()}),xh=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isWindows:v(Bd),isiOS:v(Gl),isAndroid:v(Qc),isMacOS:v(tf),isLinux:v(ef),isSolaris:v(nf),isFreeBSD:v(bm),isChromeOS:v(xl)}},Wp={unknown:of,nu:xh,windows:ee(Bd),ios:ee(Gl),android:ee(Qc),linux:ee(ef),macos:ee(tf),solaris:ee(nf),freebsd:ee(bm),chromeos:ee(xl)},sf={detect:(i,m,p)=>{const v=ua.browsers(),T=ua.oses(),D=m.bind(J=>gg(v,J)).orThunk(()=>ls(v,i)).fold(ku.unknown,ku.nu),F=Ta(T,i).fold(Wp.unknown,Wp.nu),Z=fg(F,D,i,p);return{browser:D,os:F,deviceType:Z}}},vm=i=>window.matchMedia(i).matches;let Ji=Xu(()=>sf.detect(navigator.userAgent,ie.from(navigator.userAgentData),vm));const pg=()=>Ji(),cr=(i,m)=>{const p=(Z,J)=>{if(!Wn(J)&&!J.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+J);const ge=Z.dom;K(ge)&&(ge.style[i]=J+"px")},v=Z=>{const J=m(Z);if(J<=0||J===null){const ge=Co(Z,i);return parseFloat(ge)||0}return J},T=v,D=(Z,J)=>Me(J,(ge,Ae)=>{const mt=Co(Z,Ae),It=mt===void 0?0:parseInt(mt,10);return isNaN(It)?ge:ge+It},0);return{set:p,get:v,getOuter:T,aggregate:D,max:(Z,J,ge)=>{const Ae=D(Z,ge);return J>Ae?J-Ae:0}}},Rr=(i,m)=>Lc(i).getOr(m),Ya=(i,m,p)=>Rr(Co(i,m),p),bg=(i,m,p,v)=>{const T=Ya(i,`padding-${p}`,0),D=Ya(i,`padding-${v}`,0),F=Ya(i,`border-${p}-width`,0),Z=Ya(i,`border-${v}-width`,0);return m-T-D-F-Z},vg=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:bg(i,v,"left","right")},cc=i=>Ya(i,"height",i.dom.offsetHeight),fn=i=>Ya(i,"width",i.dom.offsetWidth),Di=i=>vg(i,"content-box"),Eh=cr("width",i=>i.dom.offsetWidth),bc=i=>Eh.get(i),Fs=i=>Eh.getOuter(i),ed=Di,yg=fn,rf=(i,m,p)=>{const v=i.cells,T=v.slice(0,m),D=v.slice(m),F=T.concat(p).concat(D);return $r(i,F)},cf=(i,m,p)=>rf(i,m,[p]),to=(i,m,p)=>{const v=i.cells;v[m]=p},$r=(i,m)=>ce(i.element,m,i.section,i.isNew),Pd=(i,m)=>{const p=i.cells,v=Yt(p,m);return ce(i.element,v,i.section,i.isNew)},Xa=(i,m)=>i.cells[m],La=(i,m)=>Xa(i,m).element,Ja=i=>i.cells.length,ac=i=>{const m=Vs(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},ka=(i,m,p)=>{const v=Yt(i.cells,p);return ce(m(i.element),v,i.section,!0)},Tl="data-snooker-locked-cols",ym=i=>de(i,Tl).bind(m=>ie.from(m.match(/\d+/g))).map(m=>He(m,Re)),xr=i=>{const m=Me(ac(i).rows,(v,T)=>(Ke(T.cells,(D,F)=>{D.isLocked&&(v[F]=!0)}),v),{}),p=Bs(m,(v,T)=>parseInt(T,10));return vt(p)},Cg=(i,m)=>i+","+m,Gr=(i,m,p)=>ie.from(i.access[Cg(m,p)]),_u=(i,m,p)=>{const v=li(i,T=>p(m,T.element));return v.length>0?ie.some(v[0]):ie.none()},li=(i,m)=>{const p=bo(i.all,v=>v.cells);return ft(p,m)},js=i=>{const m={};let p=0;return Ke(i.cells,v=>{const T=v.colspan;Ho(T,D=>{const F=p+D;m[F]=qe(v.element,T,F)}),p+=T}),m},ii=i=>{const m={},p=[],T=ye(i).map(Rt=>Rt.element).bind(xa).bind(ym).getOr({});let D=0,F=0,Z=0;const{pass:J,fail:ge}=Vs(i,Rt=>Rt.section==="colgroup");Ke(ge,Rt=>{const Et=[];Ke(Rt.cells,en=>{let at=0;for(;m[Cg(Z,at)]!==void 0;)at++;const _t=ns(T,at.toString()),Rn=Ai(en.element,en.rowspan,en.colspan,Z,at,_t);for(let Nt=0;Nt<en.colspan;Nt++)for(let ys=0;ys<en.rowspan;ys++){const qs=Z+ys,Is=at+Nt,Na=Cg(qs,Is);m[Na]=Rn,F=Math.max(F,Is+1)}Et.push(Rn)}),D++,p.push(Kc(Rt.element,Et,Rt.section)),Z++});const{columns:Ae,colgroups:mt}=ln(J).map(Rt=>{const Et=js(Rt);return{colgroups:[gt(Rt.element,ps(Et))],columns:Et}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Sa(D,F),access:m,all:p,columns:Ae,colgroups:mt}},ko={fromTable:i=>{const m=Nd(i);return ii(m)},generate:ii,getAt:Gr,findItem:_u,filterItems:li,justCells:i=>bo(i.all,m=>m.cells),justColumns:i=>ps(i.columns),hasColumns:i=>Lt(i.columns).length>0,getColumnAt:(i,m)=>ie.from(i.columns[m])},td=(i,m=Re)=>{const p=i.grid,v=Ho(p.columns,st),T=Ho(p.rows,st);return Yt(v,D=>Cm(()=>bo(T,ge=>ko.getAt(i,ge,D).filter(Ae=>Ae.column===D).toArray()),ge=>ge.colspan===1&&m(ge.element),()=>ko.getAt(i,0,D)))},Cm=(i,m,p)=>{const v=i();return I(v,m).orThunk(()=>ie.from(v[0]).orThunk(p)).map(F=>F.element)},af=i=>{const m=i.grid,p=Ho(m.rows,st),v=Ho(m.columns,st);return Yt(p,T=>Cm(()=>bo(v,J=>ko.getAt(i,T,J).filter(ge=>ge.row===T).fold(ee([]),ge=>[ge])),J=>J.rowspan===1,()=>ko.getAt(i,T,0)))},kh=(i,m)=>{if(m<0||m>=i.length-1)return ie.none();const p=i[m].fold(()=>{const T=Gc(i.slice(0,m));return vo(T,(D,F)=>D.map(Z=>({value:Z,delta:F+1})))},T=>ie.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return vo(T,(D,F)=>D.map(Z=>({value:Z,delta:F+1})))},T=>ie.some({value:T,delta:1}));return p.bind(T=>v.map(D=>{const F=D.delta+T.delta;return Math.abs(D.value-T.value)/F}))},lf=(i,m)=>p=>_h(p)==="rtl"?m:i,_h=i=>Co(i,"direction")==="rtl"?"rtl":"ltr",x=cr("height",i=>{const m=i.dom;return _s(i)?m.getBoundingClientRect().height:m.offsetHeight}),R=i=>x.get(i),z=i=>x.getOuter(i),ae=cc,pe=(i,m)=>({left:i,top:m,translate:(v,T)=>pe(i+v,m+T)}),nt=pe,_n=i=>{const m=i.getBoundingClientRect();return nt(m.left,m.top)},Jn=(i,m)=>i!==void 0?i:m!==void 0?m:0,Gn=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,T=m.documentElement;if(p===i.dom)return nt(p.offsetLeft,p.offsetTop);const D=Jn(v==null?void 0:v.pageYOffset,T.scrollTop),F=Jn(v==null?void 0:v.pageXOffset,T.scrollLeft),Z=Jn(T.clientTop,p.clientTop),J=Jn(T.clientLeft,p.clientLeft);return kn(i).translate(F-J,D-Z)},kn=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?nt(v.offsetLeft,v.offsetTop):_s(i)?_n(m):nt(0,0)},br=(i,m)=>({row:i,y:m}),Fr=(i,m)=>({col:i,x:m}),Qa=i=>Gn(i).left+Fs(i),Vr=i=>Gn(i).left,Ah=(i,m)=>Fr(i,Vr(m)),Nb=(i,m)=>Fr(i,Qa(m)),Zp=i=>Gn(i).top,da=(i,m)=>br(i,Zp(m)),Oh=(i,m)=>br(i,Zp(m)+z(m)),Ac=(i,m,p)=>{if(p.length===0)return[];const v=Yt(p.slice(1),(D,F)=>D.map(Z=>i(F,Z))),T=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([T])},jp=i=>-i,ma={delta:st,positions:i=>Ac(da,Oh,i),edge:Zp},uf=lf({delta:st,edge:Vr,positions:i=>Ac(Ah,Nb,i)},{delta:jp,edge:Qa,positions:i=>Ac(Nb,Ah,i)}),df={delta:(i,m)=>uf(m).delta(i,m),positions:(i,m)=>uf(m).positions(i,m),edge:i=>uf(i).edge(i)},Bb={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Gp=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",T=Z=>`(?:${Z})?`,F=`[+-]?(?:${["Infinity",i+v+T(i)+T(p),v+i+T(p),i+T(p)].join("|")})`;return new RegExp(`^(${F})(.*)$`)})(),Ri=(i,m)=>rt(m,p=>rt(Bb[p],v=>i===v)),Ou=(i,m)=>ie.from(Gp.exec(i)).bind(v=>{const T=Number(v[1]),D=v[2];return Ri(D,m)?ie.some({value:T,unit:D}):ie.none()}),Fd=/(\d+(\.\d+)?)%/,Ht=/(\d+(\.\d+)?)px|em/,ql=as("col"),qp=as("tr"),wm=(i,m,p)=>{const v=bs(i).getOrThunk(()=>X(nn(i)));return m(i)/p(v)*100},Mi=(i,m)=>{Be(i,"width",m+"px")},wg=(i,m)=>{Be(i,"width",m+"%")},Id=(i,m)=>{Be(i,"height",m+"px")},Sm=i=>{Eo(i,"height")},Sg=i=>ae(i)+"px",eu=(i,m,p,v)=>{const T=xa(i).map(D=>{const F=p(D);return Math.floor(m/100*F)}).getOr(m);return v(i,T),T},Pb=(i,m,p,v)=>{const T=parseFloat(i);return Jc(i,"%")&&Jo(m)!=="table"?eu(m,T,p,v):T},Mr=i=>{const m=Sg(i);return m?Pb(m,i,R,Id):R(i)},ut=(i,m,p)=>{const v=p(i),T=Pr(i,m);return v/T},el=(i,m)=>pc(i,m).orThunk(()=>de(i,m).map(p=>p+"px")),tu=i=>el(i,"width"),Hc=i=>el(i,"height"),mf=i=>wm(i,bc,ed),Oc=i=>ql(i)?bc(i):yg(i),ms=i=>qp(i)?R(i):ut(i,"rowspan",Mr),Dh=i=>tu(i).bind(p=>Ou(p,["fixed","relative","empty"])),Ye=(i,m,p)=>{Be(i,"width",m+p)},is=i=>bc(i)+"px",Rh=i=>R(i)+"px",vc=i=>wm(i,bc,ed)+"%",_a=i=>tu(i).exists(m=>Fd.test(m)),cy=i=>tu(i).exists(m=>Ht.test(m)),Kl=i=>tu(i).isNone(),ay=ee(Fd),nd=as("col"),$b=i=>tu(i).getOrThunk(()=>Oc(i)+"px"),Yl=i=>Hc(i).getOrThunk(()=>ms(i)+"px"),us=i=>Yt(ko.justColumns(i),m=>ie.from(m.element)),Du=i=>{const m=pg().browser,p=m.isChromium()||m.isFirefox();return nd(i)?p:!0},xm=(i,m,p,v,T,D)=>i.filter(v).fold(()=>D(kh(p,m)),F=>T(F)),yc=(i,m,p,v)=>{const T=td(i),D=ko.hasColumns(i)?us(i):T,F=[ie.some(df.edge(m))].concat(Yt(df.positions(T,m),J=>J.map(ge=>ge.x))),Z=W(Dr);return Yt(D,(J,ge)=>xm(J,ge,F,Z,Ae=>{if(Du(Ae))return p(Ae);{const mt=xu(T[ge],st);return xm(mt,ge,F,Z,It=>v(ie.some(bc(It))),v)}},v))},Kp=i=>i.map(m=>m+"px").getOr(""),Ru=(i,m)=>yc(i,m,$b,Kp),nu=(i,m,p)=>yc(i,m,mf,v=>v.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),Js=(i,m,p)=>yc(i,m,Oc,v=>v.getOrThunk(p.minCellWidth)),ff=(i,m,p,v)=>{const T=af(i),D=Yt(i.all,Z=>ie.some(Z.element)),F=[ie.some(ma.edge(m))].concat(Yt(ma.positions(T,m),Z=>Z.map(J=>J.y)));return Yt(D,(Z,J)=>xm(Z,J,F,Re,p,v))},Te=(i,m)=>ff(i,m,ms,p=>p.getOrThunk(Ec)),di=(i,m)=>ff(i,m,Yl,Kp),gf=(i,m)=>()=>_s(i)?m(i):parseFloat(pc(i,"width").getOr("0")),fa=i=>{const m=gf(i,bc),p=ee(0);return{width:m,pixelWidth:m,getWidths:(T,D)=>Js(T,i,D),getCellDelta:p,singleColumnWidth:ee([0]),minCellWidth:p,setElementWidth:Ct,adjustTableWidth:Ct,isRelative:!0,label:"none"}},Ni=i=>{const m=gf(i,J=>parseFloat(vc(J))),p=gf(i,bc);return{width:m,pixelWidth:p,getWidths:(J,ge)=>nu(J,i,ge),getCellDelta:J=>J/p()*100,singleColumnWidth:(J,ge)=>[100-J],minCellWidth:()=>Zl()/p()*100,setElementWidth:wg,adjustTableWidth:J=>{const ge=m(),Ae=J/100*ge,mt=ge+Ae;wg(i,mt)},isRelative:!0,label:"percent"}},Jr=i=>{const m=gf(i,bc);return{width:m,pixelWidth:m,getWidths:(F,Z)=>Js(F,i,Z),getCellDelta:st,singleColumnWidth:(F,Z)=>[Math.max(Zl(),F+Z)-F],minCellWidth:Zl,setElementWidth:Mi,adjustTableWidth:F=>{const Z=m()+F;Mi(i,Z)},isRelative:!1,label:"pixel"}},qr=(i,m)=>ay().exec(m)!==null?Ni(i):Jr(i),k={getTableSize:i=>tu(i).fold(()=>fa(i),p=>qr(i,p)),pixelSize:Jr,percentageSize:Ni,noneSize:fa},L=(i,m,p,v,T,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:T,selectedCells:D}),Y=(i,m)=>{const p=i.grid.columns;let T=i.grid.rows,D=p,F=0,Z=0;const J=[],ge=[];return jn(i.access,Ae=>{if(J.push(Ae),m(Ae)){ge.push(Ae);const mt=Ae.row,It=mt+Ae.rowspan-1,Rt=Ae.column,Et=Rt+Ae.colspan-1;mt<T?T=mt:It>F&&(F=It),Rt<D?D=Rt:Et>Z&&(Z=Et)}}),L(T,D,F,Z,J,ge)},he=(i,m,p)=>{const v=i[p].element,T=be.fromTag("td");Es(T,be.fromTag("br")),(m?Es:Zs)(v,T)},Ge=(i,m,p,v)=>{const T=ft(i,Z=>Z.section!=="colgroup"),D=m.grid.columns,F=m.grid.rows;for(let Z=0;Z<F;Z++){let J=!1;for(let ge=0;ge<D;ge++)Z<p.minRow||Z>p.maxRow||ge<p.minCol||ge>p.maxCol||(ko.getAt(m,Z,ge).filter(v).isNone()?he(T,J,Z):J=!0)}},xt=(i,m,p,v)=>{jn(p.columns,F=>{(F.column<m.minCol||F.column>m.maxCol)&&Ar(F.element)});const T=ft(Ia(i,"tr"),F=>F.dom.childElementCount===0);Ke(T,Ar),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ke(Ia(i,"th,td"),F=>{re(F,"rowspan"),re(F,"colspan")}),re(i,Tl),re(i,"data-snooker-col-series"),k.getTableSize(i).adjustTableWidth(v)},Kt=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=Js(m,i,p),D=Me(T,(ge,Ae)=>ge+Ae,0),J=Me(T.slice(v.minCol,v.maxCol+1),(ge,Ae)=>ge+Ae,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(J)},Vn=(i,m)=>{const p=It=>Hn(It.element,m),v=la(i),T=Nd(v),D=k.getTableSize(i),F=ko.generate(T),Z=Y(F,p),J="th:not("+m+"),td:not("+m+")",ge=oi(v,"th,td",It=>Hn(It,J));Ke(ge,Ar),Ge(T,F,Z,p);const Ae=ko.fromTable(i),mt=Kt(i,Ae,D,Z);return xt(v,Z,F,mt),v},wo=" ",fs=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>i(D)?ie.from(D.dom.nodeValue):ie.none();return{get:p,getOption:v,set:(D,F)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=F}}})(rc,"text"),dr=i=>fs.get(i),kl=i=>fs.getOption(i),Mu=(i,m)=>fs.set(i,m),Ha=i=>Jo(i)==="img"?1:kl(i).fold(()=>Bn(i).length,m=>m.length),Nu=i=>kl(i).filter(m=>m.trim().length!==0||m.indexOf(wo)>-1).isSome(),Ld=i=>un(i)&&hr(i,"contenteditable")==="false",ou=["img","br"],hf=i=>Nu(i)||To(ou,Jo(i))||Ld(i),mi=i=>zr(i,hf),Mh=i=>xg(i,hf),xg=(i,m)=>{const p=v=>{const T=Bn(v);for(let D=T.length-1;D>=0;D--){const F=T[D];if(m(F))return ie.some(F);const Z=p(F);if(Z.isSome())return Z}return ie.none()};return p(i)},Nh={scope:["row","col"]},Bh=i=>()=>{const m=be.fromTag("td",i.dom);return Es(m,be.fromTag("br",i.dom)),m},zc=i=>()=>be.fromTag("col",i.dom),Fo=i=>()=>be.fromTag("colgroup",i.dom),Tr=i=>()=>be.fromTag("tr",i.dom),Dc=(i,m,p)=>{const v=_i(i,m);return jn(p,(T,D)=>{T===null?re(v,D):Ps(v,D,T)}),v},Xl=i=>i,_l=(i,m,p)=>mi(i).map(T=>{const D=p.join(","),F=ho(T,D,Z=>lt(Z,i));return pn(F,(Z,J)=>{const ge=xc(J);return Es(Z,ge),ge},m)}).getOr(m),Ph=(i,m)=>{jn(Nh,(p,v)=>de(i,v).filter(T=>To(p,T)).each(T=>Ps(m,v,T)))},Bu=(i,m,p)=>{const v=(F,Z)=>{Xr(F.element,Z),Eo(Z,"height"),F.colspan!==1&&Eo(Z,"width")},T=F=>{const Z=be.fromTag(Jo(F.element),m.dom),J=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ge=J.length>0?_l(F.element,Z,J):Z;return Es(ge,be.fromTag("br")),v(F,Z),Ph(F.element,Z),i(F.element,Z),Z};return{col:F=>{const Z=be.fromTag(Jo(F.element),m.dom);return v(F,Z),i(F.element,Z),Z},colgroup:Fo(m),row:Tr(m),cell:T,replace:Dc,colGap:zc(m),gap:Bh(m)}},Tm=i=>({col:zc(i),colgroup:Fo(i),row:Tr(i),cell:Bh(i),replace:Xl,colGap:zc(i),gap:Bh(i)}),Hd=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,Bn(be.fromDom(v))},od=i=>Yt(i,be.fromDom),zd=i=>m=>m.options.get(i),Pu="100%",Yp=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return ed(be.fromDom(v))+"px"},Vd=(i,m)=>su(i)||!Xp(i)?m:Em(i)?{...m,width:Yp(i)}:{...m,width:Pu},$h=(i,m)=>su(i)||Xp(i)?m:Em(i)?{...m,width:Yp(i)}:{...m,width:Pu},Tg=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=To(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=To(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Lw=i=>ie.from(i.options.get("table_clone_elements")),sd=i=>{const m=i.options.get("object_resizing");return To(m.split(","),"table")},Hw=zd("table_header_type"),ly=zd("table_column_resizing"),Qr=i=>ly(i)==="preservetable",Fb=i=>ly(i)==="resizetable",rd=zd("table_sizing_mode"),pf=i=>rd(i)==="relative",Em=i=>rd(i)==="fixed",su=i=>rd(i)==="responsive",ru=zd("table_resize_bars"),Xp=zd("table_style_by_css"),cd=zd("table_merge_content_on_paste"),tl=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:$h(i,p)},Jp=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Vd(i,p)},iy=zd("table_use_colgroups"),Qp=i=>sr(i,"[contenteditable]"),e1=(i,m=!1)=>_s(i)?i.dom.isContentEditable:Qp(i).fold(ee(m),p=>uy(p)==="true"),uy=i=>i.dom.contentEditable,Eg=i=>be.fromDom(i.getBody()),ad=i=>m=>lt(m,Eg(i)),Al=i=>{re(i,"data-mce-style");const m=p=>re(p,"data-mce-style");Ke(Tu(i),m),Ke(jl(i),m),Ke(Eu(i),m)},cu=i=>be.fromDom(i.selection.getStart()),bf=i=>i.getBoundingClientRect().width,dy=i=>i.getBoundingClientRect().height,kg=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return ie.from(v).filter(ia)},my=kg("width"),zw=kg("height"),Vw=i=>/^(\d+(\.\d+)?)%$/.test(i),Uw=i=>/^(\d+(\.\d+)?)px$/.test(i),vf=i=>Yc(i,as("table")).exists(e1),_g=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,T=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&D>=i.startRow},po=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Tn=(i,m)=>{let p=!0;const v=it(po,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&ko.getAt(i,T,D).exists(v);return p?ie.some(m):ie.none()},yf=(i,m)=>we(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),t1=(i,m,p)=>{const v=ko.findItem(i,m,lt),T=ko.findItem(i,p,lt);return v.bind(D=>T.map(F=>yf(D,F)))},Ib=(i,m,p)=>t1(i,m,p).bind(v=>Tn(i,v)),fy=(i,m,p,v)=>ko.findItem(i,m,lt).bind(T=>{const D=p>0?T.row+T.rowspan-1:T.row,F=v>0?T.column+T.colspan-1:T.column;return ko.getAt(i,D+p,F+v).map(J=>J.element)}),Ud=(i,m,p)=>t1(i,m,p).map(v=>{const T=ko.filterItems(i,it(_g,v));return Yt(T,D=>D.element)}),vr=(i,m)=>{const p=(v,T)=>Ft(T,v);return ko.findItem(i,m,p).map(v=>v.element)},Ww=(i,m,p)=>xa(i).bind(v=>{const T=Ag(v);return fy(T,i,m,p)}),gy=(i,m,p)=>{const v=Ag(i);return Ud(v,m,p)},Lb=(i,m,p,v,T)=>{const D=Ag(i),F=lt(i,p)?ie.some(m):vr(D,m),Z=lt(i,T)?ie.some(v):vr(D,v);return F.bind(J=>Z.bind(ge=>Ud(D,J,ge)))},Qe=(i,m,p)=>{const v=Ag(i);return Ib(v,m,p)},Ag=ko.fromTable;var Wk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Cf=()=>{const i=ge=>be.fromDom(ge.dom.cloneNode(!1)),m=ge=>on(ge).dom,p=ge=>tr(ge)?Jo(ge)==="body"?!0:To(Wk,Jo(ge)):!1,v=ge=>tr(ge)?To(["br","img","hr","input"],Jo(ge)):!1,T=ge=>tr(ge)&&hr(ge,"contenteditable")==="false",D=(ge,Ae)=>ge.dom.compareDocumentPosition(Ae.dom),F=(ge,Ae)=>{const mt=Oe(ge);mc(Ae,mt)},Z=ge=>{const Ae=Jo(ge);return To(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ae)},J=ge=>tr(ge)?de(ge,"lang"):ie.none();return{up:ee({selector:il,closest:sr,predicate:$s,all:Sc}),down:ee({selector:or,predicate:Bt}),styles:ee({get:Co,getRaw:pc,set:Be,remove:Eo}),attrs:ee({get:hr,set:Ps,remove:re,copyTo:F}),insert:ee({before:fc,after:Br,afterAll:ss,append:Es,appendAll:Yr,prepend:Zs,wrap:Vl}),remove:ee({unwrap:aa,remove:Ar}),create:ee({nu:be.fromTag,clone:i,text:be.fromText}),query:ee({comparePosition:D,prevSibling:ra,nextSibling:ca}),property:ee({children:Bn,name:Jo,parent:yo,document:m,isText:rc,isComment:os,isElement:tr,isSpecial:Z,getLanguage:J,getText:dr,setText:Mu,isBoundary:p,isEmptyTag:v,isNonEditable:T}),eq:lt,is:dn}};const Zk=(i,m,p,v)=>{const T=p[0],D=p.slice(1);return v(i,m,T,D)},Og=(i,m,p)=>p.length>0?Zk(i,m,p,hy):ie.none(),hy=(i,m,p,v)=>{const T=m(i,p);return pn(v,(D,F)=>{const Z=m(i,F);return ld(i,D,Z)},T)},ld=(i,m,p)=>m.bind(v=>p.filter(it(i.eq,v))),py=(i,m)=>it(i.eq,m),Fh=(i,m,p,v=xn)=>{const T=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),F=Ae=>Ns(Ae,v).fold(()=>Ae,It=>Ae.slice(0,It+1)),Z=F(T),J=F(D),ge=I(Z,Ae=>rt(J,py(i,Ae)));return{firstpath:Z,secondpath:J,shared:ge}},Er=Og,Wd=Fh,Zw=Cf(),$u=(i,m)=>Er(Zw,(p,v)=>i(v),m),by=(i,m,p)=>Wd(Zw,i,m,p),n1=i=>il(i,"table"),Ih=(i,m,p)=>{const v=T=>D=>p!==void 0&&p(D)||lt(D,T);return lt(i,m)?ie.some({boxes:ie.some([i]),start:i,finish:m}):n1(i).bind(T=>n1(m).bind(D=>{if(lt(T,D))return ie.some({boxes:gy(T,i,m),start:i,finish:m});if(Ft(T,D)){const F=ho(m,"td,th",v(T)),Z=F.length>0?F[F.length-1]:m;return ie.some({boxes:Lb(T,i,T,m,D),start:i,finish:Z})}else if(Ft(D,T)){const F=ho(i,"td,th",v(D)),Z=F.length>0?F[F.length-1]:i;return ie.some({boxes:Lb(D,i,T,m,D),start:i,finish:Z})}else return by(i,m).shared.bind(F=>sr(F,"table",p).bind(Z=>{const J=ho(m,"td,th",v(Z)),ge=J.length>0?J[J.length-1]:m,Ae=ho(i,"td,th",v(Z)),mt=Ae.length>0?Ae[Ae.length-1]:i;return ie.some({boxes:Lb(Z,i,T,m,D),start:mt,finish:ge})}))}))},o1=(i,m)=>{const p=or(i,m);return p.length>0?ie.some(p):ie.none()},fi=(i,m)=>I(i,p=>Hn(p,m)),jw=(i,m,p)=>Xc(i,m).bind(v=>Xc(i,p).bind(T=>$u(n1,[v,T]).map(D=>({first:v,last:T,table:D})))),s1=(i,m)=>il(i,"table").bind(p=>Xc(p,m).bind(v=>Ih(v,i).bind(T=>T.boxes.map(D=>({boxes:D,start:T.start,finish:T.finish}))))),vy=(i,m,p,v,T)=>fi(i,T).bind(D=>Ww(D,m,p).bind(F=>s1(F,v))),wf=(i,m)=>o1(i,m),yy=(i,m,p)=>jw(i,m,p).bind(v=>{const T=J=>lt(i,J),D="thead,tfoot,tbody,table",F=il(v.first,D,T),Z=il(v.last,D,T);return F.bind(J=>Z.bind(ge=>lt(J,ge)?Qe(v.table,v.first,v.last):ie.none()))}),Gw=st,Cy=i=>{const m=(v,T)=>de(v,T).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&zo(i,p)?ie.some(i):ie.none()},qw=(i,m,p)=>m.length<=1?ie.none():yy(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),dl="data-mce-selected",gi="td["+dl+"],th["+dl+"]",bt="["+dl+"]",Hb="data-mce-first-selected",Aa="td["+Hb+"],th["+Hb+"]",zb="data-mce-last-selected",Kw="td["+zb+"],th["+zb+"]",kr=bt,km={selected:dl,selectedSelector:gi,firstSelected:Hb,firstSelectedSelector:Aa,lastSelected:zb,lastSelectedSelector:Kw},Vb=(i,m,p)=>({element:p,mergable:qw(m,i,km),unmergable:Cy(i),selection:Gw(i)}),jk=(i,m,p)=>({element:i,clipboard:m,generators:p}),_m=(i,m,p,v)=>({selection:Gw(i),clipboard:p,generators:v}),Ub=i=>xa(i).bind(m=>wf(m,km.firstSelectedSelector)).fold(ee(i),m=>m[0]),id=i=>(m,p)=>{const v=Jo(m),T=v==="col"||v==="colgroup"?Ub(m):m;return sr(T,i,p)},Yw=id("th,td,caption"),wy=id("th,td"),yr=i=>od(i.model.table.getSelectedCells()),Lh=i=>ft(yr(i),m=>Hn(m,km.selectedSelector)),Ur=i=>xa(i[0]).map(m=>{const p=Vn(m,kr);return Al(p),[p]}),Xw=(i,m)=>Yt(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),hi=i=>Yt(i,m=>m.dom.innerText).join(""),Hh=(i,m)=>{i.on("BeforeGetContent",p=>{const v=T=>{p.preventDefault(),Ur(T).each(D=>{p.content=p.format==="text"?hi(D):Xw(i,D)})};if(p.selection===!0){const T=Lh(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=yr(i);ye(v).each(T=>{xa(T).each(D=>{const F=ft(Hd(p.content),J=>Jo(J)!=="meta"),Z=as("table");if(cd(i)&&F.length===1&&Z(F[0])){p.preventDefault();const J=be.fromDom(i.getDoc()),ge=Tm(J),Ae=jk(T,F[0],ge);m.pasteCells(D,Ae).each(()=>{i.focus()})}})})}})},pi=(i,m)=>({element:i,offset:m}),Gk=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>Gk(i,v,p).orThunk(()=>ie.some(v))):ie.none(),qk=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,Kk=(i,m)=>{const p=Gk(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return pi(p,qk(i,p));const v=i.property().children(p);return v.length>0?Kk(i,v[v.length-1]):pi(p,qk(i,p))},Yk=Kk,ga=Cf(),Ol=i=>Yk(ga,i),r1=(i,m)=>{Dr(i)||Dh(i).each(v=>{const T=v.value/2;Ye(i,T,v.unit),Ye(m,T,v.unit)})},Sf=i=>Yt(i,ee(0)),Sy=(i,m,p,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(p))),zh=i=>(m,p,v,T)=>{if(i(v)){const D=Math.max(T,m[p]-Math.abs(v)),F=Math.abs(D-m[p]);return v>=0?F:-F}else return v},Zd=zh(i=>i<0),Vh=zh(Re),Dg=()=>{const i=(Z,J,ge,Ae,mt)=>{const It=Zd(Z,J,Ae,mt);return Sy(Z,J,ge+1,[It,0],Sf)},m=(Z,J,ge,Ae)=>{const mt=(100+ge)/100,It=Math.max(Ae,(Z[J]+ge)/mt);return Yt(Z,(Rt,Et)=>(Et===J?It:Rt/mt)-Rt)},p=(Z,J,ge,Ae,mt,It)=>It?m(Z,J,Ae,mt):i(Z,J,ge,Ae,mt);return{resizeTable:(Z,J)=>Z(J),clampTableDelta:Zd,calcLeftEdgeDeltas:p,calcMiddleDeltas:(Z,J,ge,Ae,mt,It,Rt)=>p(Z,ge,Ae,mt,It,Rt),calcRightEdgeDeltas:(Z,J,ge,Ae,mt,It)=>{if(It)return m(Z,ge,Ae,mt);{const Rt=Zd(Z,ge,Ae,mt);return Sf(Z.slice(0,ge)).concat([Rt])}},calcRedestributedWidths:(Z,J,ge,Ae)=>{if(Ae){const It=(J+ge)/J,Rt=Yt(Z,Et=>Et/It);return{delta:It*100-100,newSizes:Rt}}else return{delta:ge,newSizes:Z}}}},xf=()=>{const i=(F,Z,J,ge,Ae)=>{const mt=ge>=0?J:Z,It=Vh(F,mt,ge,Ae);return Sy(F,Z,J+1,[It,-It],Sf)};return{resizeTable:(F,Z,J)=>{J&&F(Z)},clampTableDelta:(F,Z,J,ge,Ae)=>{if(Ae){if(J>=0)return J;{const mt=Me(F,(It,Rt)=>It+Rt-ge,0);return Math.max(-mt,J)}}else return Zd(F,Z,J,ge)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(F,Z,J,ge,Ae,mt)=>i(F,J,ge,Ae,mt),calcRightEdgeDeltas:(F,Z,J,ge,Ae,mt)=>{if(mt)return Sf(F);{const It=ge/F.length;return Yt(F,ee(It))}},calcRedestributedWidths:(F,Z,J,ge)=>({delta:0,newSizes:F})}},jd=i=>ko.fromTable(i).grid,Rg=as("th"),Mg=i=>zo(i,m=>Rg(m.element)),Xk=(i,m)=>i&&m?"sectionCells":i?"section":"cells",xy=i=>{const m=i.section==="thead",p=Wl(Wb(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Xk(m,p)}:{type:"body"}},Wb=i=>{const m=ft(i,p=>Rg(p.element));return m.length===0?ie.some("td"):m.length===i.length?ie.some("th"):ie.none()},Jw=i=>{const m=Yt(i,T=>xy(T).type),p=To(m,"header"),v=To(m,"footer");if(!p&&!v)return ie.some("body");{const T=To(m,"body");return p&&!T&&!v?ie.some("header"):!p&&!T&&v?ie.some("footer"):ie.none()}},Ty=i=>vo(i.all,m=>{const p=xy(m);return p.type==="header"?ie.from(p.subType):ie.none()}),Zb=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),Ey=(i,m)=>i.section!==m?ce(i.element,i.cells,m,i.isNew):i,jb=()=>({transformRow:Ey,transformCell:(i,m,p)=>{const v=p(i.element,m),T=Jo(v)!=="td"?qc(v,"td"):v;return U(T,i.isNew,i.isLocked)}}),Uh=()=>({transformRow:Ey,transformCell:Zb}),Gb=()=>({transformRow:(i,m)=>Ey(i,m==="thead"?"tbody":m),transformCell:Zb}),ud={getTableSectionType:(i,m)=>{const p=ko.fromTable(i);switch(Ty(p).getOr(m)){case"section":return jb();case"sectionCells":return Uh();case"cells":return Gb()}},section:jb,sectionCells:Uh,cells:Gb,fallback:()=>({transformRow:st,transformCell:Zb})},Wh=(i,m,p,v)=>{p===v?re(i,m):Ps(i,m,p)},Qw=(i,m,p)=>{ln(qt(i,m)).fold(()=>Zs(i,p),v=>Br(v,p))},eS=(i,m)=>{const p=$o(i,m).getOrThunk(()=>{const v=be.fromTag(m,nn(i).dom);return m==="thead"?Qw(i,"caption,colgroup",v):m==="colgroup"?Qw(i,"caption",v):Es(i,v),v});return Ic(p),p},qb=(i,m)=>{const p=[],v=[],T=Rt=>Yt(Rt,Et=>{Et.isNew&&p.push(Et.element);const en=Et.element;return Ic(en),Ke(Et.cells,at=>{at.isNew&&v.push(at.element),Wh(at.element,"colspan",at.colspan,1),Wh(at.element,"rowspan",at.rowspan,1),Es(en,at.element)}),en}),D=Rt=>bo(Rt,Et=>Yt(Et.cells,en=>(Wh(en.element,"span",en.colspan,1),en.element))),F=(Rt,Et)=>{const en=eS(i,Et),_t=(Et==="colgroup"?D:T)(Rt);Yr(en,_t)},Z=Rt=>{$o(i,Rt).each(Ar)},J=(Rt,Et)=>{Rt.length>0?F(Rt,Et):Z(Et)},ge=[],Ae=[],mt=[],It=[];return Ke(m,Rt=>{switch(Rt.section){case"thead":ge.push(Rt);break;case"tbody":Ae.push(Rt);break;case"tfoot":mt.push(Rt);break;case"colgroup":It.push(Rt);break}}),J(It,"colgroup"),J(ge,"thead"),J(Ae,"tbody"),J(mt,"tfoot"),{newRows:p,newCells:v}},Tf=i=>Yt(i,m=>{const p=xc(m.element);return Ke(m.cells,v=>{const T=la(v.element);Wh(T,"colspan",v.colspan,1),Wh(T,"rowspan",v.rowspan,1),Es(p,T)}),p}),Qk=(i,m)=>Yt(i,p=>Xa(p,m)),ky=(i,m)=>i[m],c1=(i,m)=>{if(i.length===0)return 0;const p=i[0];return Ns(i,T=>!m(p.element,T.element)).getOr(i.length)},e_=(i,m,p,v)=>{const T=ky(i,m),D=T.section==="colgroup",F=c1(T.cells.slice(p),v),Z=D?1:c1(Qk(i.slice(m),p),v);return{colspan:F,rowspan:Z}},Kb=(i,m)=>{const p=Yt(i,T=>Yt(T.cells,xn)),v=(T,D,F,Z)=>{for(let J=T;J<T+F;J++)for(let ge=D;ge<D+Z;ge++)p[J][ge]=!0};return Yt(i,(T,D)=>{const F=bo(T.cells,(Z,J)=>{if(p[D][J]===!1){const ge=e_(i,D,J,m);return v(D,J,ge.rowspan,ge.colspan),[wu(Z.element,ge.rowspan,ge.colspan,Z.isNew)]}else return[]});return Yi(T.element,F,T.section,T.isNew)})},Zh=(i,m,p)=>{const v=[];Ke(i.colgroups,T=>{const D=[];for(let F=0;F<i.grid.columns;F++){const Z=ko.getColumnAt(i,F).map(J=>U(J.element,p,!1)).getOrThunk(()=>U(m.colGap(),!0,!1));D.push(Z)}v.push(ce(T.element,D,"colgroup",p))});for(let T=0;T<i.grid.rows;T++){const D=[];for(let J=0;J<i.grid.columns;J++){const ge=ko.getAt(i,T,J).map(Ae=>U(Ae.element,p,Ae.isLocked)).getOrThunk(()=>U(m.gap(),!0,!1));D.push(ge)}const F=i.all[T],Z=ce(F.element,D,F.section,p);v.push(Z)}return v},tS=(i,m)=>Zh(i,m,!1),Yb=i=>Kb(i,lt),_y=(i,m)=>vo(i.all,p=>I(p.cells,v=>lt(m,v.element))),nS=(i,m,p)=>{const v=Yt(m.selection,D=>Jm(D).bind(F=>_y(i,F)).filter(p)),T=ur(v);return hm(T.length>0,T)},nl=(i,m,p,v,T)=>(D,F,Z,J)=>{const ge=ko.fromTable(D),Ae=ie.from(J==null?void 0:J.section).getOrThunk(ud.fallback);return m(ge,F).map(It=>{const Rt=tS(ge,Z),Et=i(Rt,It,lt,T(Z),Ae),en=xr(Et.grid),at=Yb(Et.grid);return{info:It,grid:at,cursor:Et.cursor,lockedColumns:en}}).bind(It=>{const Rt=qb(D,It.grid),Et=ie.from(J==null?void 0:J.sizing).getOrThunk(()=>k.getTableSize(D)),en=ie.from(J==null?void 0:J.resize).getOrThunk(xf);return p(D,It.grid,It.info,{sizing:Et,resize:en,section:Ae}),v(D),re(D,Tl),It.lockedColumns.length>0&&Ps(D,Tl,It.lockedColumns.join(",")),ie.some({cursor:It.cursor,newRows:Rt.newRows,newCells:Rt.newCells})})},a1=(i,m)=>Jm(m.element).bind(p=>_y(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Ay=(i,m)=>nS(i,m,Re).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),jh=(i,m)=>m.mergable,oS=(i,m)=>m.unmergable,dd=(i,m)=>nS(i,m,Re),Jl=(i,m)=>nS(i,m,p=>!p.isLocked),Gh=(i,m)=>_y(i,m).exists(p=>!p.isLocked),qh=(i,m)=>zo(m,p=>Gh(i,p)),l1=(i,m)=>jh(i,m).filter(p=>qh(i,p.cells)),t_=(i,m)=>oS(i,m).filter(p=>qh(i,p)),n_=(i,m,p,v)=>{const T=ac(i).rows;if(T.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let F=m.startCol;F<=m.finishCol;F++){const Z=T[D],J=Xa(Z,F).isLocked;to(Z,F,U(v(),!1,J))}return i},Ng=(i,m,p,v)=>{const T=ac(i).rows;let D=!0;for(let F=0;F<T.length;F++)for(let Z=0;Z<Ja(T[0]);Z++){const J=T[F],ge=Xa(J,Z),Ae=ge.element,mt=p(Ae,m);mt&&!D?to(J,Z,U(v(),!0,ge.isLocked)):mt&&(D=!1)}return i},bi=(i,m)=>Me(i,(p,v)=>rt(p,T=>m(T.element,v.element))?p:p.concat([v]),[]),sS=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&Ke(i,T=>{const D=T.cells[m-1];let F=0;const Z=v();for(;T.cells.length>m+F&&p(D.element,T.cells[m+F].element);)to(T,m+F,U(Z,!0,T.cells[m+F].isLocked)),F++}),i),lc=(i,m,p,v)=>{const T=ac(i).rows;if(m>0&&m<T.length){const D=T[m-1].cells,F=bi(D,p);Ke(F,Z=>{let J=ie.none();for(let ge=m;ge<T.length;ge++)for(let Ae=0;Ae<Ja(T[0]);Ae++){const mt=T[ge],It=Xa(mt,Ae);p(It.element,Z.element)&&(J.isNone()&&(J=ie.some(v())),J.each(Et=>{to(mt,Ae,U(Et,!0,It.isLocked))}))}})}return i},Bg=i=>{const m=D=>D(i),p=ee(i),v=()=>T,T={tag:!0,inner:i,fold:(D,F)=>F(i),isValue:Re,isError:xn,map:D=>Xb.value(D(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(i)},toOptional:()=>ie.some(i)};return T},vi=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:xn,isError:Re,map:m,mapError:v=>Xb.error(v(i)),bind:m,exists:xn,forall:Re,getOr:st,or:st,getOrThunk:cn,orThunk:cn,getOrDie:Dt(String(i)),each:Ct,toOptional:ie.none};return p},Xb={value:Bg,error:vi,fromOption:(i,m)=>i.fold(()=>vi(m),Bg)},Kh=(i,m,p)=>{if(i.row>=m.length||i.column>Ja(m[0]))return Xb.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),D=Ja(p[0]),F=p.length;return Xb.value({rowDelta:v.length-F,colDelta:T.length-D})},Pg=(i,m)=>{const p=Ja(i[0]),v=Ja(m[0]);return{rowDelta:0,colDelta:p-v}},md=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},yi=(i,m,p,v)=>{const T=m.section==="colgroup"?p.col:p.cell;return Ho(i,D=>U(T(),!0,v(D)))},Oy=(i,m,p,v)=>{const T=i[i.length-1];return i.concat(Ho(m,()=>{const D=T.section==="colgroup"?p.colgroup:p.row,F=ka(T,D,st),Z=yi(F.cells.length,F,p,J=>cs(v,J.toString()));return $r(F,Z)}))},Dy=(i,m,p,v)=>Yt(i,T=>{const D=yi(m,T,p,xn);return rf(T,v,D)}),Ry=(i,m,p)=>Yt(i,v=>Me(p,(T,D)=>{const F=yi(1,v,m,Re)[0];return cf(T,D,F)},v)),$g=(i,m,p)=>{const v=m.colDelta<0?Dy:st,T=m.rowDelta<0?Oy:st,D=xr(i),F=Ja(i[0]),Z=rt(D,Ae=>Ae===F-1),J=v(i,Math.abs(m.colDelta),p,Z?F-1:F),ge=xr(J);return T(J,Math.abs(m.rowDelta),p,He(ge,Re))},o_=(i,m,p,v)=>{const T=Xa(i[m],p),D=it(v,T.element),F=i[m];return i.length>1&&Ja(F)>1&&(p>0&&D(La(F,p-1))||p<F.cells.length-1&&D(La(F,p+1))||m>0&&D(La(i[m-1],p))||m<i.length-1&&D(La(i[m+1],p)))},Fg=(i,m,p,v,T,D)=>{const F=i.row,Z=i.column,J=p.length,ge=Ja(p[0]),Ae=F+J,mt=Z+ge+D.length,It=He(D,Re);for(let Rt=F;Rt<Ae;Rt++){let Et=0;for(let en=Z;en<mt;en++){if(It[en]){Et++;continue}o_(m,Rt,en,T)&&Ng(m,La(m[Rt],en),T,v.cell);const at=en-Z-Et,_t=Xa(p[Rt-F],at),Rn=_t.element,Nt=v.replace(Rn);to(m[Rt],en,U(Nt,!0,_t.isLocked))}}return m},Gd=(i,m,p)=>{const v=Ja(m[0]),T=ac(m).cols.length+i.row,D=Ho(v-i.column,Z=>Z+i.column),F=I(D,Z=>zo(p,J=>J!==Z)).getOr(v-1);return{row:T,column:F}},i1=(i,m,p)=>ft(p,v=>v>=i.column&&v<=Ja(m[0])+i.column),Yo=(i,m,p,v,T)=>{const D=xr(m),F=Gd(i,m,D),Z=ac(p).rows,J=i1(F,Z,D);return Kh(F,m,Z).map(Ae=>{const mt={...Ae,colDelta:Ae.colDelta-J.length},It=$g(m,mt,v),Rt=xr(It),Et=i1(F,Z,Rt);return Fg(F,It,Z,v,T,Et)})},Dl=(i,m,p,v,T)=>{sS(m,i,T,v.cell);const D=md(p,m),F=$g(p,D,v),Z=md(m,F),J=$g(m,Z,v);return Yt(J,(ge,Ae)=>rf(ge,i,F[Ae].cells))},au=(i,m,p,v,T)=>{lc(m,i,T,v.cell);const D=xr(m),F=Pg(m,p),Z={...F,colDelta:F.colDelta-D.length},J=$g(m,Z,v),{cols:ge,rows:Ae}=ac(J),mt=xr(J),It=Pg(p,m),Rt={...It,colDelta:It.colDelta+mt.length},Et=Ry(p,v,mt),en=$g(Et,Rt,v);return[...ge,...Ae.slice(0,i),...en,...Ae.slice(i,Ae.length)]},Am=(i,m,p,v)=>ka(i,T=>v(T,p),m),Cr=(i,m,p,v,T)=>{const{rows:D,cols:F}=ac(i),Z=D.slice(0,m),J=D.slice(m),ge=Am(D[p],(Ae,mt)=>m>0&&m<D.length&&v(La(D[m-1],mt),La(D[m],mt))?Xa(D[m],mt):U(T(Ae.element,v),!0,Ae.isLocked),v,T);return[...F,...Z,ge,...J]},rS=(i,m,p,v,T,D,F)=>{if(p==="colgroup"||!v){const Z=Xa(i,T);return U(F(Z.element,D),!0,!1)}else return Xa(i,m)},Jb=(i,m,p,v,T)=>Yt(i,D=>{const F=m>0&&m<Ja(D)&&v(La(D,m-1),La(D,m)),Z=rS(D,m,D.section,F,p,v,T);return cf(D,m,Z)}),u1=(i,m)=>bo(i,p=>{const v=p.cells,T=pn(m,(D,F)=>F>=0&&F<D.length?D.slice(0,F).concat(D.slice(F+1)):D,v);return T.length>0?[ce(p.element,T,p.section,p.isNew)]:[]}),Qb=(i,m,p)=>{const{rows:v,cols:T}=ac(i);return[...T,...v.slice(0,m),...v.slice(p+1)]},s_=(i,m,p,v)=>La(i[m],p)!==void 0&&m>0&&v(La(i[m-1],p),La(i[m],p)),Ir=(i,m,p)=>m>0&&p(La(i,m-1),La(i,m)),My=(i,m,p,v)=>s_(i,m,p,v)||Ir(i[m],p,v),r_=(i,m)=>zo(m,st)&&Mg(i.cells)?Re:(v,T,D)=>!(Jo(v.element)==="th"&&m[D]),c_=(i,m)=>zo(m,st)&&Mg(i)?Re:(v,T,D)=>!(Jo(v.element)==="th"&&m[T]),Yh=(i,m,p,v)=>{const T=F=>F==="row"?Or(m):Dr(m),D=F=>T(F)?`${F}group`:F;return i?Rg(m)?D(p):null:v&&Rg(m)?D(p==="row"?"col":"row"):null},Ut=(i,m)=>(p,v,T)=>ie.some(Yh(i,p.element,"col",m[T])),a_=(i,m)=>(p,v)=>ie.some(Yh(i,p.element,"row",m[v])),cS=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),e0=(i,m,p,v,T,D,F)=>{const Z=J=>rt(m,ge=>p(J.element,ge.element));return Yt(i,(J,ge)=>Pd(J,(Ae,mt)=>{if(Z(Ae)){const It=F(Ae,ge,mt)?T(Ae,p,v):Ae;return D(It,ge,mt).each(Rt=>{sa(It.element,{scope:ie.from(Rt)})}),It}else return Ae}))},Ny=(i,m,p)=>bo(i,(v,T)=>My(i,T,m,p)?[]:[Xa(v,m)]),l_=(i,m,p)=>{const v=i[m];return bo(v.cells,(T,D)=>My(i,m,D,p)?[]:[T])},d1=(i,m,p,v,T)=>{const D=ac(i).rows,F=bo(m,Ae=>Ny(D,Ae,v)),Z=Yt(D,Ae=>Mg(Ae.cells)),J=c_(F,Z),ge=a_(p,Z);return e0(i,F,v,T,cS,ge,J)},m1=(i,m,p,v,T,D,F)=>{const{cols:Z,rows:J}=ac(i),ge=J[m[0]],Ae=bo(m,at=>l_(J,at,T)),mt=Yt(ge.cells,(at,_t)=>Mg(Ny(J,_t,T))),It=[...J];Ke(m,at=>{It[at]=F.transformRow(J[at],p)});const Rt=[...Z,...It],Et=r_(ge,mt),en=Ut(v,mt);return e0(Rt,Ae,T,D,F.transformCell,en,Et)},Ig=(i,m,p,v)=>{const T=ac(i).rows,D=Yt(m,F=>Xa(T[F.row],F.column));return e0(i,D,p,v,cS,ie.none,Re)},qd={generate:i=>{if(!tn(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return Ke(i,(v,T)=>{const D=Lt(v);if(D.length!==1)throw new Error("one and only one name per case");const F=D[0],Z=v[F];if(p[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!tn(Z))throw new Error("case arguments must be an array");m.push(F),p[F]=(...J)=>{const ge=J.length;if(ge!==Z.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+Z.length+" ("+Z+"), got "+ge);return{fold:(...mt)=>{if(mt.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+mt.length);return mt[T].apply(null,J)},match:mt=>{const It=Lt(mt);if(m.length!==It.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+It.join(","));if(!zo(m,Et=>To(It,Et)))throw new Error("Not all branches were specified when using match. Specified: "+It.join(", ")+`
Required: `+m.join(", "));return mt[F].apply(null,J)},log:mt=>{console.log(mt,{constructors:m,constructor:F,params:J})}}}}),p}},Om={...qd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},aS=(i,m)=>i.length===0?Om.none():i.length===1?Om.only(0):m===0?Om.left(0,1):m===i.length-1?Om.right(m-1,m):m>0&&m<i.length-1?Om.middle(m-1,m,m+1):Om.none(),fd=(i,m,p,v,T)=>{const D=i.slice(0),F=aS(i,m),Z=ee(Yt(D,ee(0))),J=It=>v.singleColumnWidth(D[It],p),ge=(It,Rt)=>T.calcLeftEdgeDeltas(D,It,Rt,p,v.minCellWidth(),v.isRelative),Ae=(It,Rt,Et)=>T.calcMiddleDeltas(D,It,Rt,Et,p,v.minCellWidth(),v.isRelative),mt=(It,Rt)=>T.calcRightEdgeDeltas(D,It,Rt,p,v.minCellWidth(),v.isRelative);return F.fold(Z,J,ge,Ae,mt)},lS=(i,m,p)=>{let v=0;for(let T=i;T<m;T++)v+=p[T]!==void 0?p[T]:0;return v},Xh=(i,m)=>{const p=ko.justCells(i);return Yt(p,v=>{const T=lS(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},u_=(i,m)=>{const p=ko.justColumns(i);return Yt(p,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},d_=(i,m)=>Yt(i.all,(p,v)=>({element:p.element,height:m[v]})),m_=i=>pn(i,(m,p)=>m+p,0),By=(i,m)=>ko.hasColumns(i)?u_(i,m):Xh(i,m),t0=(i,m,p)=>{const v=By(i,m);Ke(v,T=>{p.setElementWidth(T.element,T.width)})},iS=(i,m,p,v,T)=>{const D=ko.fromTable(i),F=T.getCellDelta(m),Z=T.getWidths(D,T),J=p===D.grid.columns-1,ge=v.clampTableDelta(Z,p,F,T.minCellWidth(),J),Ae=fd(Z,p,ge,T,v),mt=Yt(Ae,(It,Rt)=>It+Z[Rt]);t0(D,mt,T),v.resizeTable(T.adjustTableWidth,ge,J)},Py=(i,m,p)=>{const v=ko.fromTable(i),T=Te(v,i),D=Yt(T,(J,ge)=>p===ge?Math.max(m+J,Ec()):J),F=d_(v,D);Ke(F,J=>{Id(J.element,J.height)}),Ke(ko.justCells(v),J=>{Sm(J.element)});const Z=m_(D);Id(i,Z)},f_=(i,m,p,v,T)=>{const D=ko.generate(m),F=v.getWidths(D,v),Z=v.pixelWidth(),{newSizes:J,delta:ge}=T.calcRedestributedWidths(F,Z,p.pixelDelta,v.isRelative);t0(D,J,v),v.adjustTableWidth(ge)},f1=(i,m,p,v)=>{const T=ko.generate(m),D=v.getWidths(T,v);t0(T,D,v)},Ef=i=>Me(i,(p,v)=>rt(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Jh=as("col"),n0=as("colgroup"),$y=i=>Jo(i)==="tr"||n0(i),o0=i=>{const m=rr(i,"colspan",1),p=rr(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},Fy=(i,m=o0)=>{const p=Z=>Jh(Z.element)?i.col(Z):i.cell(Z),v=Z=>n0(Z.element)?i.colgroup(Z):i.row(Z),T=Z=>{if($y(Z))return v({element:Z});{const J=Z,ge=p(m(J));return D=ie.some({item:J,replacement:ge}),ge}};let D=ie.none();return{getOrInit:(Z,J)=>D.fold(()=>T(Z),ge=>J(Z,ge.item)?ge.replacement:T(Z))}},Iy=i=>m=>{const p=[],v=(F,Z)=>I(p,J=>Z(J.item,F)),T=F=>{const Z=i==="td"?{scope:null}:{},J=m.replace(F,i,Z);return p.push({item:F,sub:J}),J};return{replaceOrInit:(F,Z)=>{if($y(F)||Jh(F))return F;{const J=F;return v(J,Z).fold(()=>T(J),ge=>Z(F,ge.item)?ge.sub:T(J))}}}},Ly=i=>de(i,"scope").map(m=>m.substr(0,3)),Oa={modification:Fy,transform:Iy,merging:i=>({unmerge:v=>{const T=Ly(v);return T.each(D=>Ps(v,"scope",D)),()=>{const D=i.cell({element:v,colspan:1,rowspan:1});return Eo(D,"width"),Eo(v,"width"),T.each(F=>Ps(D,"scope",F)),D}},merge:v=>{const T=()=>{const D=ur(Yt(v,Ly));if(D.length===0)return ie.none();{const F=D[0],Z=["row","col"];return rt(D,ge=>ge!==F&&To(Z,ge))?ie.none():ie.from(F)}};return Eo(v[0],"width"),T().fold(()=>re(v[0],"scope"),D=>Ps(v[0],"scope",D+"group")),ee(v[0])}})},g_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],dS=(i,m)=>{const p=i.property().name(m);return To(["ol","ul"],p)},kf=(i,m)=>{const p=i.property().name(m);return To(g_,p)},Lg=(i,m)=>To(["br","img","hr","input"],i.property().name(m)),Hy=Cf(),Fe=i=>kf(Hy,i),Kd=i=>dS(Hy,i),h_=i=>Lg(Hy,i),mS=i=>{const m=as("br"),p=J=>zo(J,ge=>m(ge)||rc(ge)&&dr(ge).trim().length===0),v=J=>Jo(J)==="li"||$s(J,Kd).isSome(),T=J=>ca(J).map(ge=>Fe(ge)?!0:h_(ge)?Jo(ge)!=="img":!1).getOr(!1),D=J=>Mh(J).bind(ge=>{const Ae=T(ge);return yo(ge).map(mt=>Ae===!0||v(mt)||m(ge)||Fe(mt)&&!lt(J,mt)?[]:[be.fromTag("br")])}).getOr([]),Z=(()=>{const J=bo(i,ge=>{const Ae=Bn(ge);return p(Ae)?[]:Ae.concat(D(ge))});return J.length===0?[be.fromTag("br")]:J})();Ic(i[0]),Yr(i[0],Z)},g1=i=>e1(i,!0),lu=i=>{Tu(i).length===0&&Ar(i)},h1=(i,m)=>({grid:i,cursor:m}),fS=i=>vo(i,m=>vo(m.cells,p=>{const v=p.element;return hm(g1(v),v)})),zy=(i,m,p)=>{var v,T;const D=ac(i).rows;return ie.from((T=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||T===void 0?void 0:T.element).filter(g1).orThunk(()=>fS(D))},ml=(i,m,p)=>{const v=zy(i,m,p);return h1(i,v)},s0=i=>Me(i,(p,v)=>rt(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),gS=(i,m,p,v)=>{const T=m[0].row,D=s0(m),F=pn(D,(Z,J)=>({grid:Cr(Z.grid,T,J.row+Z.delta,p,v.getOrInit),delta:Z.delta+1}),{grid:i,delta:0}).grid;return ml(F,T,m[0].column)},p_=(i,m,p,v)=>{const T=s0(m),D=T[T.length-1],F=D.row+D.rowspan,Z=pn(T,(J,ge)=>Cr(J,F,ge.row,p,v.getOrInit),i);return ml(Z,F,m[0].column)},hS=(i,m,p,v)=>{const T=m.details,D=Ef(T),F=D[0].column,Z=pn(D,(J,ge)=>({grid:Jb(J.grid,F,ge.column+J.delta,p,v.getOrInit),delta:J.delta+1}),{grid:i,delta:0}).grid;return ml(Z,T[0].row,F)},b_=(i,m,p,v)=>{const T=m.details,D=T[T.length-1],F=D.column+D.colspan,Z=Ef(T),J=pn(Z,(ge,Ae)=>Jb(ge,F,Ae.column,p,v.getOrInit),i);return ml(J,T[0].row,F)},pS=(i,m,p,v)=>{const T=Ef(m),D=Yt(T,Z=>Z.column),F=d1(i,D,!0,p,v.replaceOrInit);return ml(F,m[0].row,m[0].column)},v_=(i,m,p,v)=>{const T=Ig(i,m,p,v.replaceOrInit);return ml(T,m[0].row,m[0].column)},y_=(i,m,p,v)=>{const T=Ef(m),D=Yt(T,Z=>Z.column),F=d1(i,D,!1,p,v.replaceOrInit);return ml(F,m[0].row,m[0].column)},bS=(i,m,p,v)=>{const T=Ig(i,m,p,v.replaceOrInit);return ml(T,m[0].row,m[0].column)},Qh=(i,m)=>(p,v,T,D,F)=>{const Z=s0(v),J=Yt(Z,Ae=>Ae.row),ge=m1(p,J,i,m,T,D.replaceOrInit,F);return ml(ge,v[0].row,v[0].column)},C_=Qh("thead",!0),vS=Qh("tbody",!1),ec=Qh("tfoot",!1),r0=(i,m,p,v)=>{const T=Ef(m.details),D=u1(i,Yt(T,Z=>Z.column)),F=D.length>0?D[0].cells.length-1:0;return ml(D,T[0].row,Math.min(T[0].column,F))},yS=(i,m,p,v)=>{const T=s0(m),D=Qb(i,T[0].row,T[T.length-1].row),F=Math.max(ac(D).rows.length-1,0);return ml(D,Math.min(m[0].row,F),m[0].column)},CS=(i,m,p,v)=>{const T=m.cells;mS(T);const D=n_(i,m.bounds,p,v.merge(T));return h1(D,ie.from(T[0]))},c0=(i,m,p,v)=>{const D=pn(m,(F,Z)=>Ng(F,Z,p,v.unmerge(Z)),i);return h1(D,ie.from(m[0]))},ol=(i,m,p,v)=>{const D=((J,ge)=>{const Ae=ko.fromTable(J);return Zh(Ae,ge,!0)})(m.clipboard,m.generators),F=Cl(m.row,m.column);return Yo(F,i,D,m.generators,p).fold(()=>h1(i,ie.some(m.element)),J=>ml(J,m.row,m.column))},fl=(i,m,p)=>{const v=mg(i,p.section),T=ko.generate(v);return Zh(T,m,!0)},wS=(i,m,p,v)=>{const T=ac(i).rows,D=m.cells[0].column,F=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,F),J=Dl(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,m.cells[0].column)},SS=(i,m,p,v)=>{const T=ac(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,F=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,F),J=Dl(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,D)},Vy=(i,m,p,v)=>{const T=ac(i).rows,D=m.cells[0].row,F=T[D],Z=fl(m.clipboard,m.generators,F),J=au(D,i,Z,m.generators,p);return ml(J,m.cells[0].row,m.cells[0].column)},xS=(i,m,p,v)=>{const T=ac(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,F=T[m.cells[0].row],Z=fl(m.clipboard,m.generators,F),J=au(D,i,Z,m.generators,p);return ml(J,D,m.cells[0].column)},TS=(i,m)=>{const p=ko.fromTable(i);return dd(p,m).bind(T=>{const D=T[T.length-1],F=T[0].column,Z=D.column+D.colspan,J=ao(Yt(p.all,ge=>ft(ge.cells,Ae=>Ae.column>=F&&Ae.column<Z)));return Wb(J)}).getOr("")},Uy=(i,m)=>{const p=ko.fromTable(i);return dd(p,m).bind(Wb).getOr("")},Wy=(i,m)=>{const p=ko.fromTable(i);return dd(p,m).bind(T=>{const D=T[T.length-1],F=T[0].row,Z=D.row+D.rowspan,J=p.all.slice(F,Z);return Jw(J)}).getOr("")},a0=(i,m,p,v)=>f1(i,m,p,v.sizing),Dm=(i,m,p,v)=>f_(i,m,p,v.sizing,v.resize),Rl=(i,m)=>rt(m,p=>p.column===0&&p.isLocked),Zy=(i,m)=>rt(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),Os=(i,m)=>{const p=td(i),v=Ef(m);return Me(v,(T,D)=>{const Z=p[D.column].map(Fs).getOr(0);return T+Z},0)},gd=i=>(m,p)=>dd(m,p).filter(v=>!(i?Rl:Zy)(m,v)).map(v=>({details:v,pixelDelta:Os(m,v)})),p1=(i,m)=>Jl(i,m).map(p=>({details:p,pixelDelta:-Os(i,p)})),ES=i=>(m,p)=>Ay(m,p).filter(v=>!(i?Rl:Zy)(m,v.cells)),l0=Oa.transform("th"),i0=Oa.transform("td"),_f=nl(gS,dd,Ct,Ct,Oa.modification),Da=nl(p_,dd,Ct,Ct,Oa.modification),Af=nl(hS,gd(!0),Dm,Ct,Oa.modification),jy=nl(b_,gd(!1),Dm,Ct,Oa.modification),kS=nl(r0,p1,Dm,lu,Oa.modification),w_=nl(yS,dd,Ct,lu,Oa.modification),ep=nl(pS,Jl,Ct,Ct,l0),Gy=nl(y_,Jl,Ct,Ct,i0),qy=nl(C_,Jl,Ct,Ct,l0),Ky=nl(vS,Jl,Ct,Ct,i0),Yy=nl(ec,Jl,Ct,Ct,i0),jt=nl(v_,Jl,Ct,Ct,l0),b1=nl(bS,Jl,Ct,Ct,i0),Xy=nl(CS,l1,a0,Ct,Oa.merging),tp=nl(c0,t_,a0,Ct,Oa.merging),Fu=nl(ol,a1,a0,Ct,Oa.modification),S_=nl(wS,ES(!0),Ct,Ct,Oa.modification),Ra=nl(SS,ES(!1),Ct,Ct,Oa.modification),x_=nl(Vy,Ay,Ct,Ct,Oa.modification),Of=nl(xS,Ay,Ct,Ct,Oa.modification),Jy=TS,_S=Uy,sl=Wy,Df=(i,m)=>i.dispatch("NewRow",{node:m}),u0=(i,m)=>i.dispatch("NewCell",{node:m}),Rf=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},T_=(i,m,p,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:T})},E_=i=>{i.dispatch("TableSelectionClear")},Vc=(i,m,p,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:T})},Rc=(i,m,p,v,T)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:T})},Uc={structure:!1,style:!0},Gs={structure:!0,style:!1},ea={structure:!0,style:!0},Mc=(i,m)=>pf(i)?k.percentageSize(m):Em(i)?k.pixelSize(m):k.getTableSize(m),Qy=(i,m,p)=>{const v=tc=>Jo(Eg(tc))==="table",T=tc=>!v(i)||jd(tc).rows>1,D=tc=>!v(i)||jd(tc).columns>1,F=Lw(i),Z=Fb(i)?Ct:r1,J=tc=>{switch(Hw(i)){case"section":return ud.section();case"sectionCells":return ud.sectionCells();case"cells":return ud.cells();default:return ud.getTableSectionType(tc,"section")}},ge=(tc,tm)=>tm.cursor.fold(()=>{const H1=Tu(tc);return ye(H1).filter(_s).map(Si=>{p.clearSelectedCells(tc.dom);const no=i.dom.createRng();return no.selectNode(Si.dom),i.selection.setRng(no),Ps(Si,"data-mce-selected","1"),no})},H1=>{const Si=Ol(H1),no=i.dom.createRng();return no.setStart(Si.element.dom,Si.offset),no.setEnd(Si.element.dom,Si.offset),i.selection.setRng(no),p.clearSelectedCells(tc.dom),ie.some(no)}),Ae=(tc,tm,H1,Si)=>(no,QC,e2=!1)=>{Al(no);const ov=be.fromDom(i.getDoc()),Bx=Bu(H1,ov,F),oh={sizing:Mc(i,no),resize:Fb(i)?Dg():xf(),section:J(no)};return tm(no)?tc(no,QC,Bx,oh).bind(Lm=>{m.refresh(no.dom),Ke(Lm.newRows,z1=>{Df(i,z1.dom)}),Ke(Lm.newCells,z1=>{u0(i,z1.dom)});const Px=ge(no,Lm);return _s(no)&&(Al(no),e2||Rf(i,no.dom,Si)),Px.map(z1=>({rng:z1,effect:Si}))}):ie.none()},mt=Ae(w_,T,Ct,Gs),It=Ae(kS,D,Ct,Gs),Rt=Ae(_f,Re,Ct,Gs),Et=Ae(Da,Re,Ct,Gs),en=Ae(Af,Re,Z,Gs),at=Ae(jy,Re,Z,Gs),_t=Ae(Xy,Re,Ct,Gs),Rn=Ae(tp,Re,Ct,Gs),Nt=Ae(S_,Re,Ct,Gs),ys=Ae(Ra,Re,Ct,Gs),qs=Ae(x_,Re,Ct,Gs),Is=Ae(Of,Re,Ct,Gs),Na=Ae(Fu,Re,Ct,ea),Nc=Ae(jt,Re,Ct,Gs),em=Ae(b1,Re,Ct,Gs),Zf=Ae(ep,Re,Ct,Gs),jf=Ae(Gy,Re,Ct,Gs),Ds=Ae(qy,Re,Ct,Gs),$l=Ae(Ky,Re,Ct,Gs),Fl=Ae(Yy,Re,Ct,Gs);return{deleteRow:mt,deleteColumn:It,insertRowsBefore:Rt,insertRowsAfter:Et,insertColumnsBefore:en,insertColumnsAfter:at,mergeCells:_t,unmergeCells:Rn,pasteColsBefore:Nt,pasteColsAfter:ys,pasteRowsBefore:qs,pasteRowsAfter:Is,pasteCells:Na,makeCellsHeader:Nc,unmakeCellsHeader:em,makeColumnsHeader:Zf,unmakeColumnsHeader:jf,makeRowsHeader:Ds,makeRowsBody:$l,makeRowsFooter:Fl,getTableRowType:sl,getTableCellType:_S,getTableColType:Jy}},d0=(i,m,p)=>{const v=rr(i,m,1);p===1||v<=1?re(i,m):Ps(i,m,Math.min(p,v))},eC=(i,m)=>p=>{const v=p.column+p.colspan-1,T=p.column;return v>=i&&T<m},AS=(i,m,p)=>{if(ko.hasColumns(i)){const v=ft(ko.justColumns(i),eC(m,p)),T=Yt(v,F=>{const Z=la(F.element);return d0(Z,"span",p-m),Z}),D=be.fromTag("colgroup");return Yr(D,T),[D]}else return[]},OS=(i,m,p)=>Yt(i.all,v=>{const T=ft(v.cells,eC(m,p)),D=Yt(T,Z=>{const J=la(Z.element);return d0(J,"colspan",p-m),J}),F=be.fromTag("tr");return Yr(F,D),F}),m0=(i,m)=>{const p=ko.fromTable(i);return Jl(p,m).map(T=>{const D=T[T.length-1],F=T[0].column,Z=D.column+D.colspan,J=AS(p,F,Z),ge=OS(p,F,Z);return[...J,...ge]})},f0=(i,m,p)=>{const v=ko.fromTable(i);return dd(v,m).bind(D=>{const F=Zh(v,p,!1),J=ac(F).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),ge=bo(J,mt=>{const It=ft(mt.cells,Rt=>!Rt.isLocked);return It.length>0?[{...mt,cells:It}]:[]}),Ae=Yb(ge);return hm(Ae.length>0,Ae)}).map(D=>Tf(D))},Hg=qd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),tC=(i,m,p)=>{const v=p.substring(0,p.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):Hg.invalid(p)},zg={...Hg,from:i=>Jc(i,"%")?tC("%",Hg.percent,i):Jc(i,"px")?tC("px",Hg.pixels,i):Hg.invalid(i)},k_=(i,m)=>Yt(i,p=>zg.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),Ql=(i,m,p)=>{const v=p/m;return Yt(i,T=>zg.from(T).fold(()=>T,F=>F*v+"px",F=>F/100*p+"px"))},iR=(i,m)=>{const p=i.fold(()=>ee(""),v=>{const T=v/m;return ee(T+"px")},()=>{const v=100/m;return ee(v+"%")});return Ho(m,p)},__=(i,m,p)=>i.fold(()=>m,v=>Ql(m,p,v),v=>k_(m,p)),Bi=(i,m,p)=>{const v=zg.from(p),T=zo(i,D=>D==="0px")?iR(v,i.length):__(v,i,m);return Ml(T)},v1=(i,m)=>i.length===0?m:pn(i,(p,v)=>zg.from(v).fold(ee(0),st,st)+p,0),y1=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},hd=(i,m)=>zg.from(i).fold(ee(i),p=>p+m+"px",p=>p+m+"%"),Ml=i=>{if(i.length===0)return i;const m=pn(i,(v,T)=>{const D=zg.from(T).fold(()=>({value:T,remainder:0}),F=>y1(F,"px"),F=>({value:F+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([hd(p[p.length-1],Math.round(m.remainder))])},Mf=zg.from,nC=(i,m,p)=>{Ke(m,v=>{const T=i.slice(v.column,v.colspan+v.column),D=v1(T,Zl());Be(v.element,"width",D+p)})},g0=(i,m,p)=>{Ke(m,(v,T)=>{const D=v1([i[T]],Zl());Be(v.element,"width",D+p)})},DS=(i,m,p)=>{Ke(p,v=>{Eo(v.element,"height")}),Ke(m,(v,T)=>{Be(v.element,"height",i[T])})},Vg=i=>Mf(i).fold(ee("px"),ee("px"),ee("%")),oC=(i,m,p)=>{const v=ko.fromTable(i),T=v.all,D=ko.justCells(v),F=ko.justColumns(v);m.each(Z=>{const J=Vg(Z),ge=bc(i),Ae=Ru(v,i),mt=Bi(Ae,ge,Z);ko.hasColumns(v)?g0(mt,F,J):nC(mt,D,J),Be(i,"width",Z)}),p.each(Z=>{const J=R(i),ge=di(v,i),Ae=Bi(ge,J,Z);DS(Ae,T,D),Be(i,"height",Z)})},sC=_a,RS=cy,MS=Kl,C1=i=>{re(i,"width"),re(i,"height")},Ug=i=>{const m=vc(i);oC(i,ie.some(m),ie.none()),C1(i)},rC=i=>{const m=is(i);oC(i,ie.some(m),ie.none()),C1(i)},cC=i=>{const m=Rh(i);oC(i,ie.none(),ie.some(m)),C1(i)},NS=i=>{Eo(i,"width");const m=jl(i),p=m.length>0?m:Tu(i);Ke(p,v=>{Eo(v,"width"),C1(v)}),C1(i)},BS={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},A_=()=>be.fromTag("th"),h0=()=>be.fromTag("td"),PS=()=>be.fromTag("col"),O_=(i,m,p,v)=>{const T=be.fromTag("tr");for(let D=0;D<i;D++){const F=v<m||D<p?A_():h0();D<p&&Ps(F,"scope","row"),v<m&&Ps(F,"scope","col"),Es(F,be.fromTag("br")),Es(T,F)}return T},$S=i=>{const m=be.fromTag("colgroup");return Ho(i,()=>Es(m,PS())),m},w1=(i,m,p,v)=>Ho(i,T=>O_(m,p,v,T)),D_=(i,m,p,v,T,D=BS)=>{const F=be.fromTag("table"),Z=T!=="cells";mn(F,D.styles),mc(F,D.attributes),D.colGroups&&Es(F,$S(m));const J=Math.min(i,p);if(Z&&p>0){const Rt=be.fromTag("thead");Es(F,Rt);const en=w1(p,m,T==="sectionCells"?J:0,v);Yr(Rt,en)}const ge=be.fromTag("tbody");Es(F,ge);const Ae=Z?i-J:i,It=w1(Ae,m,Z?0:p,v);return Yr(ge,It),F},FS=i=>i.dom.innerHTML,Nl=i=>{const m=be.fromTag("div"),p=be.fromDom(i.dom.cloneNode(!0));return Es(m,p),FS(m)},aC=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},lC=(i,m)=>{Xc(m,"td,th").each(it(aC,i))},iC=(i,m)=>{Ke(or(m,"tr"),p=>{Df(i,p.dom),Ke(or(p,"th,td"),v=>{u0(i,v.dom)})})},p0=i=>In(i)&&i.indexOf("%")!==-1,R_=(i,m,p,v,T)=>{const D=Jp(i),F={styles:D,attributes:tl(i),colGroups:iy(i)};return i.undoManager.ignore(()=>{const Z=D_(p,m,T,v,Hw(i),F);Ps(Z,"data-mce-id","__mce");const J=Nl(Z);i.insertContent(J),i.addVisual()}),Xc(Eg(i),'table[data-mce-id="__mce"]').map(Z=>(Em(i)?rC(Z):su(i)?NS(Z):(pf(i)||p0(D.width))&&Ug(Z),Al(Z),re(Z,"data-mce-id"),iC(i,Z),lC(i,Z),Z.dom)).getOrNull()},M_=(i,m,p,v={})=>{const T=D=>Wn(D)&&D>0;if(T(m)&&T(p)){const D=v.headerRows||0,F=v.headerColumns||0;return R_(i,p,m,F,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var b0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const IS="x-tinymce/dom-table-",uC=IS+"rows",dC=IS+"columns",S1=i=>{const m=b0.FakeClipboardItem(i);b0.write([m])},mC=i=>{var m;const p=(m=b0.read())!==null&&m!==void 0?m:[];return vo(p,v=>ie.from(v.getType(i)))},LS=i=>{mC(i).isSome()&&b0.clear()},HS=i=>{i.fold(N_,m=>S1({[uC]:m}))},zS=()=>mC(uC),N_=()=>LS(uC),VS=i=>{i.fold(WS,m=>S1({[dC]:m}))},US=()=>mC(dC),WS=()=>LS(dC),v0=i=>Yw(cu(i),ad(i)).filter(vf),np=i=>wy(cu(i),ad(i)).filter(vf),ZS=(i,m)=>{const p=ad(i),v=()=>v0(i).each(at=>{xa(at,p).filter(W(p)).each(_t=>{const Rn=be.fromText("");if(Br(_t,Rn),Ar(_t),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Nt=i.dom.createRng();Nt.setStart(Rn.dom,0),Nt.setEnd(Rn.dom,0),i.selection.setRng(Nt),i.nodeChanged()}})}),T=at=>v0(i).each(_t=>{su(i)||Em(i)||pf(i)||xa(_t,p).each(Nt=>{at==="relative"&&!sC(Nt)?Ug(Nt):at==="fixed"&&!RS(Nt)?rC(Nt):at==="responsive"&&!MS(Nt)&&NS(Nt),Al(Nt),Rf(i,Nt.dom,Gs)})}),D=at=>xa(at,p),F=at=>np(i).bind(_t=>D(_t).map(Rn=>at(Rn,_t))),Z=(at,_t)=>{F(Rn=>{i.formatter.toggle("tableclass",{value:_t},Rn.dom),Rf(i,Rn.dom,Uc)})},J=(at,_t)=>{F(Rn=>{const Nt=yr(i),qs=zo(Nt,Is=>i.formatter.match("tablecellclass",{value:_t},Is.dom))?i.formatter.remove:i.formatter.apply;Ke(Nt,Is=>qs("tablecellclass",{value:_t},Is.dom)),Rf(i,Rn.dom,Uc)})},ge=()=>{v0(i).each(at=>{xa(at,p).each(_t=>{$o(_t,"caption").fold(()=>{const Rn=be.fromTag("caption");Es(Rn,be.fromText("Caption")),Fc(_t,Rn,0),i.selection.setCursorLocation(Rn.dom,0)},Rn=>{as("caption")(at)&&tt("td",_t).each(Nt=>i.selection.setCursorLocation(Nt.dom,0)),Ar(Rn)}),Rf(i,_t.dom,Gs)})})},Ae=at=>{i.focus()},mt=(at,_t=!1)=>F((Rn,Nt)=>{const ys=Vb(yr(i),Rn,Nt);at(Rn,ys,_t).each(Ae)}),It=()=>F((at,_t)=>{const Rn=Vb(yr(i),at,_t),Nt=Bu(Ct,be.fromDom(i.getDoc()),ie.none());return f0(at,Rn,Nt)}),Rt=()=>F((at,_t)=>{const Rn=Vb(yr(i),at,_t);return m0(at,Rn)}),Et=(at,_t)=>_t().each(Rn=>{const Nt=Yt(Rn,ys=>la(ys));F((ys,qs)=>{const Is=Tm(be.fromDom(i.getDoc())),Na=_m(yr(i),qs,Nt,Is);at(ys,Na).each(Ae)})}),en=at=>(_t,Rn)=>wc(Rn,"type").each(Nt=>{mt(at(Nt),Rn.no_events)});jn({mceTableSplitCells:()=>mt(m.unmergeCells),mceTableMergeCells:()=>mt(m.mergeCells),mceTableInsertRowBefore:()=>mt(m.insertRowsBefore),mceTableInsertRowAfter:()=>mt(m.insertRowsAfter),mceTableInsertColBefore:()=>mt(m.insertColumnsBefore),mceTableInsertColAfter:()=>mt(m.insertColumnsAfter),mceTableDeleteCol:()=>mt(m.deleteColumn),mceTableDeleteRow:()=>mt(m.deleteRow),mceTableCutCol:()=>Rt().each(at=>{VS(at),mt(m.deleteColumn)}),mceTableCutRow:()=>It().each(at=>{HS(at),mt(m.deleteRow)}),mceTableCopyCol:()=>Rt().each(at=>VS(at)),mceTableCopyRow:()=>It().each(at=>HS(at)),mceTablePasteColBefore:()=>Et(m.pasteColsBefore,US),mceTablePasteColAfter:()=>Et(m.pasteColsAfter,US),mceTablePasteRowBefore:()=>Et(m.pasteRowsBefore,zS),mceTablePasteRowAfter:()=>Et(m.pasteRowsAfter,zS),mceTableDelete:v,mceTableCellToggleClass:J,mceTableToggleClass:Z,mceTableToggleCaption:ge,mceTableSizingMode:(at,_t)=>T(_t),mceTableCellType:en(at=>at==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:en(at=>at==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:en(at=>{switch(at){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(at,_t)=>i.addCommand(_t,at)),i.addCommand("mceInsertTable",(at,_t)=>{M_(i,_t.rows,_t.columns,_t.options)}),i.addCommand("mceTableApplyCellStyle",(at,_t)=>{const Rn=qs=>"tablecell"+qs.toLowerCase().replace("-","");if(!We(_t))return;const Nt=ft(yr(i),vf);if(Nt.length===0)return;const ys=Us(_t,(qs,Is)=>i.formatter.has(Rn(Is))&&In(qs));lr(ys)||(jn(ys,(qs,Is)=>{const Na=Rn(Is);Ke(Nt,Nc=>{qs===""?i.formatter.remove(Na,{value:null},Nc.dom,!0):i.formatter.apply(Na,{value:qs},Nc.dom)})}),D(Nt[0]).each(qs=>Rf(i,qs.dom,Uc)))})},B_=(i,m)=>{const p=ad(i),v=T=>wy(cu(i)).bind(D=>xa(D,p).map(F=>{const Z=Vb(yr(i),F,D);return T(F,Z)})).getOr("");jn({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,D)=>i.addQueryValueHandler(D,T))},y0=qd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),P_=(i,m,p,v)=>i.fold(m,p,v),Iu=i=>i.fold(st,st,st),C0=y0.before,w0=y0.on,S0=y0.after,Bl={before:C0,on:w0,after:S0,cata:P_,getStart:Iu},Bf={create:(i,m)=>({selection:i,kill:m})},$_=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},Pf=(i,m)=>{const p=i.document.createRange();return x1(p,m),p},x1=(i,m)=>i.selectNodeContents(m.dom),F_=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},I_=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},jS=(i,m,p)=>{const v=i.document.createRange();return F_(v,m),I_(v,p),v},x0=(i,m,p,v,T)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,T),D},T0=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),L_=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?ie.some(p).map(T0):ie.none()},T1=qd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fC=(i,m,p)=>m(be.fromDom(p.startContainer),p.startOffset,be.fromDom(p.endContainer),p.endOffset),H_=(i,m)=>m.match({domRange:p=>({ltr:ee(p),rtl:ie.none}),relative:(p,v)=>({ltr:Xu(()=>jS(i,p,v)),rtl:Xu(()=>ie.some(jS(i,v,p)))}),exact:(p,v,T,D)=>({ltr:Xu(()=>x0(i,p,v,T,D)),rtl:Xu(()=>ie.some(x0(i,T,D,p,v)))})}),gC=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>T1.rtl(be.fromDom(T.endContainer),T.endOffset,be.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>fC(i,T1.ltr,p)):fC(i,T1.ltr,p)},hC=(i,m)=>{const p=H_(i,m);return gC(i,p)},E0=(i,m)=>hC(i,m).match({ltr:(v,T,D,F)=>{const Z=i.document.createRange();return Z.setStart(v.dom,T),Z.setEnd(D.dom,F),Z},rtl:(v,T,D,F)=>{const Z=i.document.createRange();return Z.setStart(D.dom,F),Z.setEnd(v.dom,T),Z}});T1.ltr,T1.rtl;const Wg={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},pC={create:(i,m,p,v)=>({start:Bl.on(i,m),finish:Bl.on(p,v)})},qS=(i,m)=>{const p=E0(i,m);return Wg.create(be.fromDom(p.startContainer),p.startOffset,be.fromDom(p.endContainer),p.endOffset)},k0=pC.create,V_=(i,m,p,v,T,D,F)=>lt(p,T)&&v===D?ie.none():sr(p,"td,th",m).bind(Z=>sr(T,"td,th",m).bind(J=>$f(i,m,Z,J,F))),$f=(i,m,p,v,T)=>lt(p,v)?ie.none():Ih(p,v,m).bind(D=>{const F=D.boxes.getOr([]);return F.length>1?(T(i,F,D.start,D.finish),ie.some(Bf.create(ie.some(k0(p,0,p,Ha(p))),!0))):ie.none()}),uR=(i,m,p,v,T)=>{const D=F=>(T.clearBeforeUpdate(p),T.selectRange(p,F.boxes,F.start,F.finish),F.boxes);return vy(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(D)},op=(i,m)=>({item:i,mode:m}),_0=(i,m,p,v=sp)=>i.property().parent(m).map(T=>op(T,v)),sp=(i,m,p,v=rp)=>p.sibling(i,m).map(T=>op(T,v)),rp=(i,m,p,v=rp)=>{const T=i.property().children(m);return p.first(T).map(F=>op(F,v))},U_=[{current:_0,next:sp,fallback:ie.none()},{current:sp,next:rp,fallback:ie.some(_0)},{current:rp,next:rp,fallback:ie.some(sp)}],KS=(i,m,p,v,T=U_)=>I(T,F=>F.current===p).bind(F=>F.current(i,m,v,F.next).orThunk(()=>F.fallback.bind(Z=>KS(i,m,Z,v)))),Rm={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?ie.some(p[p.length-1]):ie.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?ie.some(p[0]):ie.none()})},bC=(i,m,p,v,T,D)=>KS(i,m,v,T).bind(Z=>D(Z.item)?ie.none():p(Z.item)?ie.some(Z.item):bC(i,Z.item,p,Z.mode,T,D)),vC=(i,m,p,v)=>bC(i,m,p,sp,Rm.left(),v),Z_=(i,m,p,v)=>bC(i,m,p,sp,Rm.right(),v),yC=i=>m=>i.property().children(m).length===0,YS=(i,m,p)=>JS(i,m,yC(i),p),XS=(i,m,p)=>cp(i,m,yC(i),p),JS=vC,cp=Z_,O0=Cf(),Zg=(i,m)=>YS(O0,i,m),Mm=(i,m)=>XS(O0,i,m),E1=(i,m,p)=>JS(O0,i,m,p),ap=(i,m,p)=>cp(O0,i,m,p),j_=(i,m,p)=>$s(i,m,p).isSome(),pd=qd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Pi=(i,m,p)=>{const v=i.getRect(m),T=i.getRect(p);return T.right>v.left&&T.left<v.right},D0=i=>sr(i,"tr"),jg={...pd,verify:(i,m,p,v,T,D,F)=>sr(v,"td,th",F).bind(Z=>sr(m,"td,th",F).map(J=>lt(Z,J)?lt(v,Z)&&Ha(Z)===T?D(J):pd.none("in same cell"):$u(D0,[Z,J]).fold(()=>Pi(i,J,Z)?pd.success():D(J),ge=>D(J)))).getOr(pd.none("default")),cata:(i,m,p,v,T)=>i.fold(m,p,v,T)},lp=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),ip=i=>yo(i).bind(m=>{const p=Bn(m);return rl(p,i).map(v=>lp(m,p,i,v))}),rl=(i,m)=>Ns(i,it(lt,m)),R0=as("br"),Gg=(i,m,p)=>m(i,p).bind(v=>rc(v)&&dr(v).trim().length===0?Gg(v,m,p):ie.some(v)),M0=(i,m,p)=>p.traverse(m).orThunk(()=>Gg(m,p.gather,i)).map(p.relative),QS=(i,m)=>mo(i,m).filter(R0).orThunk(()=>mo(i,m-1).filter(R0)),CC=(i,m,p,v)=>QS(m,p).bind(T=>v.traverse(T).fold(()=>Gg(T,v.gather,i).map(v.relative),D=>ip(D).map(F=>Bl.on(F.parent,F.index)))),N0=(i,m,p,v)=>(R0(m)?M0(i,m,v):CC(i,m,p,v)).map(D=>({start:D,finish:D})),ha=i=>jg.cata(i,m=>ie.none(),()=>ie.none(),m=>ie.some(pi(m,0)),m=>ie.some(pi(m,Ha(m)))),B0=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),Lu=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),wC=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),SC=i=>i.top,Nm=i=>i.bottom,ex=(i,m,p)=>p>=0&&p<Ha(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):ie.none(),Ff=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),P0=(i,m)=>ie.some(i.getRect(m)),$0=(i,m,p)=>tr(m)?P0(i,m).map(Ff):rc(m)?ex(i,m,p).map(Ff):ie.none(),xC=(i,m)=>tr(m)?P0(i,m).map(Ff):rc(m)?i.getRangedRect(m,0,m,Ha(m)).map(Ff):ie.none(),qg=5,up=100,za=qd.generate([{none:[]},{retry:["caret"]}]),tx=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,TC=(i,m,p)=>Yc(m,Fe).fold(xn,v=>xC(i,v).exists(T=>tx(p,T))),EC=(i,m,p,v,T)=>{const D=B0(T,qg);return Math.abs(p.bottom-v.bottom)<1||p.top>T.bottom?za.retry(D):p.top===T.bottom?za.retry(B0(T,1)):TC(i,m,T)?za.retry(wC(D,qg,0)):za.none()},kC={point:SC,adjuster:(i,m,p,v,T)=>{const D=Lu(T,qg);return Math.abs(p.top-v.top)<1||p.bottom<T.top?za.retry(D):p.bottom===T.top?za.retry(Lu(T,1)):TC(i,m,T)?za.retry(wC(D,qg,0)):za.none()},move:Lu,gather:Zg},ox={point:Nm,adjuster:EC,move:B0,gather:Mm},sx=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>Jo(v)==="table").isSome(),$i=(i,m,p,v,T)=>Bm(i,m,p,m.move(v,qg),T),Bm=(i,m,p,v,T)=>T===0?ie.some(v):sx(i,v.left,m.point(v))?$i(i,m,p,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(ie.none,F=>xC(i,F).bind(Z=>m.adjuster(i,F,Z,p,v).fold(ie.none,J=>Bm(i,m,p,J,T-1))).orThunk(()=>ie.some(v)),ie.none)),rx=(i,m,p)=>i.point(m)>p.getInnerHeight()?ie.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?ie.some(-i.point(m)):ie.none(),Kg=(i,m,p)=>{const v=i.move(p,qg),T=Bm(m,i,p,v,up).getOr(v);return rx(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),D=>(m.scrollBy(0,D),m.situsFromPoint(T.left,i.point(T)-D)))},gl={tryUp:it(Kg,kC),tryDown:it(Kg,ox),getJumpSize:ee(qg)},Ci=20,hl=(i,m,p)=>i.getSelection().bind(v=>N0(m,v.finish,v.foffset,p).fold(()=>ie.some(pi(v.finish,v.foffset)),T=>{const D=i.fromSitus(T),F=jg.verify(i,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return ha(F)})),Fi=(i,m,p,v,T,D)=>D===0?ie.none():Yg(i,m,p,v,T).bind(F=>{const Z=i.fromSitus(F),J=jg.verify(i,p,v,Z.finish,Z.foffset,T.failure,m);return jg.cata(J,()=>ie.none(),()=>ie.some(F),ge=>lt(p,ge)&&v===0?F0(i,p,v,Lu,T):Fi(i,m,ge,0,T,D-1),ge=>lt(p,ge)&&v===Ha(ge)?F0(i,p,v,B0,T):Fi(i,m,ge,Ha(ge),T,D-1))}),F0=(i,m,p,v,T)=>$0(i,m,p).bind(D=>Ii(i,T,v(D,gl.getJumpSize()))),Ii=(i,m,p)=>{const v=pg().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):ie.none()},Yg=(i,m,p,v,T)=>$0(i,p,v).bind(D=>Ii(i,T,D)),q_=(i,m,p)=>hl(i,m,p).bind(v=>Fi(i,m,v.element,v.offset,p,Ci).map(i.fromSitus)),cx=(i,m)=>j_(i,p=>yo(p).exists(v=>lt(v,m))),K_=(i,m,p,v,T)=>sr(v,"td,th",m).bind(D=>sr(D,"table",m).bind(F=>cx(T,F)?q_(i,m,p).bind(Z=>sr(Z.finish,"td,th",m).map(J=>({start:D,finish:J,range:Z}))):ie.none())),ax=(i,m,p,v,T,D)=>D(v,m).orThunk(()=>K_(i,m,p,v,T).map(F=>{const Z=F.range;return Bf.create(ie.some(k0(Z.start,Z.soffset,Z.finish,Z.foffset)),!0)})),lx=(i,m)=>sr(i,"tr",m).bind(p=>sr(p,"table",m).bind(v=>{const T=or(v,"tr");return lt(p,T[0])?E1(v,D=>Mh(D).isSome(),m).map(D=>{const F=Ha(D);return Bf.create(ie.some(k0(D,F,D,F)),!0)}):ie.none()})),_C=(i,m)=>sr(i,"tr",m).bind(p=>sr(p,"table",m).bind(v=>{const T=or(v,"tr");return lt(p,T[T.length-1])?ap(v,D=>mi(D).isSome(),m).map(D=>Bf.create(ie.some(k0(D,0,D,0)),!0)):ie.none()})),AC=(i,m,p,v,T,D,F)=>K_(i,p,v,T,D).bind(Z=>$f(m,p,Z.start,Z.finish,F)),Ma=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},OC=i=>{const m=Ma(ie.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(ie.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:Z=>{p(),m.set(ie.some(Z))}}},If=()=>{const i=OC(Ct);return{...i,on:p=>i.get().each(p)}},dp=(i,m)=>sr(i,"td,th",m),DC=i=>bs(i).exists(e1),I0=(i,m,p,v)=>{const T=If(),D=T.clear,F=Ae=>{T.on(mt=>{v.clearBeforeUpdate(m),dp(Ae.target,p).each(It=>{Ih(mt,It,p).each(Rt=>{const Et=Rt.boxes.getOr([]);if(Et.length===1){const en=Et[0],at=uy(en)==="false",_t=Wl(Qp(Ae.target),en,lt);at&&_t&&v.selectRange(m,Et,en,en)}else Et.length>1&&(v.selectRange(m,Et,Rt.start,Rt.finish),i.selectContents(It))})})})};return{clearstate:D,mousedown:Ae=>{v.clear(m),dp(Ae.target,p).filter(DC).each(T.set)},mouseover:Ae=>{F(Ae)},mouseup:Ae=>{F(Ae),D()}}},k1={traverse:ca,gather:Mm,relative:Bl.before,retry:gl.tryDown,failure:jg.failedDown},RC={traverse:ra,gather:Zg,relative:Bl.before,retry:gl.tryUp,failure:jg.failedUp},mp=i=>m=>m===i,MC=mp(38),Yd=mp(40),Xg=i=>i>=37&&i<=40,ix={isBackward:mp(37),isForward:mp(39)},Pm={isBackward:mp(39),isForward:mp(37)},Li=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return nt(p,v)},ux=(i,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(i,m)},Xd=qd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Jg=i=>Xd.exact(i.start,i.soffset,i.finish,i.foffset),NC=i=>i.match({domRange:m=>be.fromDom(m.startContainer),relative:(m,p)=>Bl.getStart(m),exact:(m,p,v,T)=>m}),L0=Xd.domRange,dx=Xd.relative,Y_=Xd.exact,X_=i=>{const m=NC(i);return yn(m)},mx=Wg.create,Lf={domRange:L0,relative:dx,exact:Y_,exactFromRange:Jg,getWin:X_,range:mx},fp=(i,m,p)=>{var v,T;return ie.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,p)).bind(D=>{if(D.offsetNode===null)return ie.none();const F=i.dom.createRange();return F.setStart(D.offsetNode,D.offset),F.collapse(),ie.some(F)})},_1=(i,m,p)=>{var v,T;return ie.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,p))},J_=document.caretPositionFromPoint?fp:document.caretRangeFromPoint?_1:ie.none,Q_=(i,m,p)=>{const v=be.fromDom(i.document);return J_(v,m,p).map(T=>Wg.create(be.fromDom(T.startContainer),T.startOffset,be.fromDom(T.endContainer),T.endOffset))},gp=(i,m)=>{const p=Jo(i);return p==="input"?Bl.after(i):To(["br","img"],p)?m===0?Bl.before(i):Bl.after(i):Bl.on(i,m)},BC=(i,m)=>{const p=i.fold(Bl.before,gp,Bl.after),v=m.fold(Bl.before,gp,Bl.after);return Lf.relative(p,v)},H0=(i,m,p,v)=>{const T=gp(i,m),D=gp(p,v);return Lf.relative(T,D)},PC=(i,m,p,v)=>{const D=nn(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,v),D},$C=(i,m,p,v)=>{const T=PC(i,m,p,v),D=lt(i,p)&&m===v;return T.collapsed&&!D},hp=i=>ie.from(i.getSelection()),FC=(i,m)=>{hp(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},pp=(i,m,p,v,T)=>{const D=x0(i,m,p,v,T);FC(i,D)},IC=(i,m,p,v,T,D)=>{m.collapse(p.dom,v),m.extend(T.dom,D)},es=(i,m)=>hC(i,m).match({ltr:(p,v,T,D)=>{pp(i,p,v,T,D)},rtl:(p,v,T,D)=>{hp(i).each(F=>{if(F.setBaseAndExtent)F.setBaseAndExtent(p.dom,v,T.dom,D);else if(F.extend)try{IC(i,F,p,v,T,D)}catch{pp(i,T,D,p,v)}else pp(i,T,D,p,v)})}}),Jd=(i,m,p,v,T)=>{const D=H0(m,p,v,T);es(i,D)},Qg=(i,m,p)=>{const v=BC(m,p);es(i,v)},A1=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return ie.some(Wg.create(be.fromDom(m.startContainer),m.startOffset,be.fromDom(p.endContainer),p.endOffset))}else return ie.none()},LC=i=>{if(i.anchorNode===null||i.focusNode===null)return A1(i);{const m=be.fromDom(i.anchorNode),p=be.fromDom(i.focusNode);return $C(m,i.anchorOffset,p,i.focusOffset)?ie.some(Wg.create(m,i.anchorOffset,p,i.focusOffset)):A1(i)}},$m=(i,m,p=!0)=>{const T=(p?Pf:$_)(i,m);FC(i,T)},HC=i=>hp(i).filter(m=>m.rangeCount>0).bind(LC),z0=i=>HC(i).map(m=>Lf.exact(m.start,m.soffset,m.finish,m.foffset)),zC=(i,m)=>{const p=E0(i,m);return L_(p)},VC=(i,m,p)=>Q_(i,m,p),eh=i=>{hp(i).each(m=>m.removeAllRanges())},V0=i=>({elementFromPoint:(at,_t)=>be.fromPoint(be.fromDom(i.document),at,_t),getRect:at=>at.dom.getBoundingClientRect(),getRangedRect:(at,_t,Rn,Nt)=>{const ys=Lf.exact(at,_t,Rn,Nt);return zC(i,ys)},getSelection:()=>z0(i).map(at=>qS(i,at)),fromSitus:at=>{const _t=Lf.relative(at.start,at.finish);return qS(i,_t)},situsFromPoint:(at,_t)=>VC(i,at,_t).map(Rn=>pC.create(Rn.start,Rn.soffset,Rn.finish,Rn.foffset)),clearSelection:()=>{eh(i)},collapseSelection:(at=!1)=>{z0(i).each(_t=>_t.fold(Rn=>Rn.collapse(at),(Rn,Nt)=>{const ys=at?Rn:Nt;Qg(i,ys,ys)},(Rn,Nt,ys,qs)=>{const Is=at?Rn:ys,Na=at?Nt:qs;Jd(i,Is,Na,Is,Na)}))},setSelection:at=>{Jd(i,at.start,at.soffset,at.finish,at.foffset)},setRelativeSelection:(at,_t)=>{Qg(i,at,_t)},selectNode:at=>{$m(i,at,!1)},selectContents:at=>{$m(i,at)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>Li(be.fromDom(i.document)).top,scrollBy:(at,_t)=>{ux(at,_t,be.fromDom(i.document))}}),th=(i,m)=>({rows:i,cols:m}),U0=(i,m,p,v)=>{const T=V0(i),D=I0(T,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},fx=i=>Yc(i,un).exists(e1),bp=(i,m)=>fx(i)||fx(m),W0=(i,m,p,v)=>{const T=V0(i),D=()=>(v.clear(m),ie.none());return{keydown:(J,ge,Ae,mt,It,Rt)=>{const Et=J.raw,en=Et.which,at=Et.shiftKey===!0;return o1(m,v.selectedSelector).fold(()=>(Xg(en)&&!at&&v.clearBeforeUpdate(m),Xg(en)&&at&&!bp(ge,mt)?ie.none:Yd(en)&&at?it(AC,T,m,p,k1,mt,ge,v.selectRange):MC(en)&&at?it(AC,T,m,p,RC,mt,ge,v.selectRange):Yd(en)?it(ax,T,p,k1,mt,ge,_C):MC(en)?it(ax,T,p,RC,mt,ge,lx):ie.none),Rn=>{const Nt=ys=>()=>vo(ys,Is=>uR(Is.rows,Is.cols,m,Rn,v)).fold(()=>jw(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Is=>{const Na=Yd(en)||Rt.isForward(en)?Bl.after:Bl.before;return T.setRelativeSelection(Bl.on(Is.first,0),Na(Is.table)),v.clear(m),Bf.create(ie.none(),!0)}),Is=>ie.some(Bf.create(ie.none(),!0)));return Xg(en)&&at&&!bp(ge,mt)?ie.none:Yd(en)&&at?Nt([th(1,0)]):MC(en)&&at?Nt([th(-1,0)]):Rt.isBackward(en)&&at?Nt([th(0,-1),th(-1,0)]):Rt.isForward(en)&&at?Nt([th(0,1),th(1,0)]):Xg(en)&&!at?D:ie.none})()},keyup:(J,ge,Ae,mt,It)=>o1(m,v.selectedSelector).fold(()=>{const Rt=J.raw,Et=Rt.which;return Rt.shiftKey===!0&&Xg(Et)&&bp(ge,mt)?V_(m,p,ge,Ae,mt,It,v.selectRange):ie.none()},ie.none)}},eA=(i,m,p,v)=>{const T=V0(i);return(D,F)=>{v.clearBeforeUpdate(m),Ih(D,F,p).each(Z=>{const J=Z.boxes.getOr([]);v.selectRange(m,J,Z.start,Z.finish),T.selectContents(F),T.collapseSelection()})}},Z0=(i,m)=>{const p=hr(i,m);return p===void 0||p===""?[]:p.split(" ")},Fm=(i,m,p)=>{const T=Z0(i,m).concat([p]);return Ps(i,m,T.join(" ")),!0},tA=(i,m,p)=>{const v=ft(Z0(i,m),T=>T!==p);return v.length>0?Ps(i,m,v.join(" ")):re(i,m),!1},O1=i=>i.dom.classList!==void 0,iu=i=>Z0(i,"class"),pa=(i,m)=>Fm(i,"class",m),nA=(i,m)=>tA(i,"class",m),bd=(i,m)=>{O1(i)?i.dom.classList.add(m):pa(i,m)},oA=i=>{(O1(i)?i.dom.classList:iu(i)).length===0&&re(i,"class")},gx=(i,m)=>{O1(i)?i.dom.classList.remove(m):nA(i,m),oA(i)},D1=(i,m)=>O1(i)&&i.dom.classList.contains(m),vp=(i,m)=>{Ke(m,p=>{gx(i,p)})},hx=i=>m=>{bd(m,i)},px=i=>m=>{vp(m,i)},bx={byClass:i=>{const m=hx(i.selected),p=px([i.selected,i.lastSelected,i.firstSelected]),v=D=>{const F=or(D,i.selectedSelector);Ke(F,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,F,Z,J)=>{v(D),Ke(F,m),bd(Z,i.firstSelected),bd(J,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=J=>{re(J,i.selected),re(J,i.firstSelected),re(J,i.lastSelected)},T=J=>{Ps(J,i.selected,"1")},D=J=>{F(J),p()},F=J=>{const ge=or(J,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Ke(ge,v)};return{clearBeforeUpdate:F,clear:D,selectRange:(J,ge,Ae,mt)=>{D(J),Ke(ge,T),Ps(Ae,i.firstSelected,"1"),Ps(mt,i.lastSelected,"1"),m(ge,Ae,mt)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},vx=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},Wt=()=>({tag:"none"}),ba=i=>({tag:"multiple",elements:i}),R1=i=>({tag:"single",element:i}),va=(i,m,p)=>({get:()=>wf(i(),p).fold(()=>m().fold(Wt,R1),ba)}),uu=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=Yb(p);return bo(v,T=>{const D=T.cells.slice(0,m[m.length-1].column+1);return Yt(D,F=>F.element)})},UC=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Yb(p);return bo(v,T=>{const D=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return Yt(D,F=>F.element)})},nh=(i,m,p)=>{const v=ko.fromTable(i);return dd(v,m).map(D=>{const F=Zh(v,p,!1),{rows:Z}=ac(F),J=uu(Z,D),ge=UC(Z,D);return{upOrLeftCells:J,downOrRightCells:ge}})},j0=(i,m,p,v,T,D,F)=>({target:i,x:m,y:p,stop:v,prevent:T,kill:D,raw:F}),Hf=i=>{const m=be.fromDom(St(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=zn(v,p);return j0(m,i.clientX,i.clientY,p,v,T,i)},M1=(i,m)=>p=>{i(p)&&m(Hf(p))},yx=(i,m,p,v,T)=>{const D=M1(p,v);return i.dom.addEventListener(m,D,T),{unbind:it(rA,i,m,D,T)}},sA=(i,m,p,v)=>yx(i,m,p,v,!1),rA=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},cA=Re,zf=(i,m,p)=>sA(i,m,cA,p),N1=Hf,B1=i=>!D1(be.fromDom(i.target),"ephox-snooker-resizer-bar"),G0=(i,m)=>{const p=va(()=>be.fromDom(i.getBody()),()=>wy(cu(i),ad(i)),km.selectedSelector),v=(J,ge,Ae)=>{xa(ge).each(It=>{const Rt=Yt(J,Rn=>Rn.dom),Et=Lw(i),en=Bu(Ct,be.fromDom(i.getDoc()),Et),at=yr(i),_t=nh(It,{selection:at},en).map(Rn=>fr(Rn,Nt=>Yt(Nt,ys=>ys.dom))).getOrUndefined();T_(i,Rt,ge.dom,Ae.dom,_t)})},T=()=>E_(i),D=bx.byAttr(km,v,T);return i.on("init",J=>{const ge=i.getWin(),Ae=Eg(i),mt=ad(i),It=()=>{const Ds=i.selection,$l=be.fromDom(Ds.getStart()),Fl=be.fromDom(Ds.getEnd());$u(xa,[$l,Fl]).fold(()=>D.clear(Ae),Ct)},Rt=U0(ge,Ae,mt,D),Et=W0(ge,Ae,mt,D),en=eA(ge,Ae,mt,D),at=Ds=>Ds.raw.shiftKey===!0;i.on("TableSelectorChange",Ds=>en(Ds.start,Ds.finish));const _t=(Ds,$l)=>{at(Ds)&&($l.kill&&Ds.kill(),$l.selection.each(Fl=>{const mu=Lf.relative(Fl.start,Fl.finish),fu=E0(ge,mu);i.selection.setRng(fu)}))},Rn=Ds=>{const $l=N1(Ds);if($l.raw.shiftKey&&Xg($l.raw.which)){const Fl=i.selection.getRng(),mu=be.fromDom(Fl.startContainer),fu=be.fromDom(Fl.endContainer);Et.keyup($l,mu,Fl.startOffset,fu,Fl.endOffset).each(Io=>{_t($l,Io)})}},Nt=Ds=>{const $l=N1(Ds);m.hide();const Fl=i.selection.getRng(),mu=be.fromDom(Fl.startContainer),fu=be.fromDom(Fl.endContainer),Io=lf(ix,Pm)(be.fromDom(i.selection.getStart()));Et.keydown($l,mu,Fl.startOffset,fu,Fl.endOffset,Io).each(tc=>{_t($l,tc)}),m.show()},ys=Ds=>Ds.button===0,qs=Ds=>Ds.buttons===void 0?!0:(Ds.buttons&1)!==0,Is=Ds=>{Rt.clearstate()},Na=Ds=>{ys(Ds)&&B1(Ds)&&Rt.mousedown(N1(Ds))},Nc=Ds=>{qs(Ds)&&B1(Ds)&&Rt.mouseover(N1(Ds))},em=Ds=>{ys(Ds)&&B1(Ds)&&Rt.mouseup(N1(Ds))},jf=(()=>{const Ds=Ma(be.fromDom(Ae)),$l=Ma(0);return{touchEnd:mu=>{const fu=be.fromDom(mu.target);if(as("td")(fu)||as("th")(fu)){const Io=Ds.get(),tc=$l.get();lt(Io,fu)&&mu.timeStamp-tc<300&&(mu.preventDefault(),en(fu,fu))}Ds.set(fu),$l.set(mu.timeStamp)}}})();i.on("dragstart",Is),i.on("mousedown",Na),i.on("mouseover",Nc),i.on("mouseup",em),i.on("touchend",jf.touchEnd),i.on("keyup",Rn),i.on("keydown",Nt),i.on("NodeChange",It)}),i.on("PreInit",()=>{i.serializer.addTempAttr(km.firstSelected),i.serializer.addTempAttr(km.lastSelected)}),{getSelectedCells:()=>vx(p.get(),ee([]),J=>Yt(J,ge=>ge.dom),J=>[J.dom]),clearSelectedCells:J=>D.clear(be.fromDom(J))}},wi=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=ft(m,F=>F!==D)},trigger:(...D)=>{const F={};Ke(i,(Z,J)=>{F[Z]=D[J]}),Ke(m,Z=>{Z(F)})}}},Qd=i=>{const m=fr(i,v=>({bind:v.bind,unbind:v.unbind})),p=fr(i,v=>v.trigger);return{registry:m,trigger:p}},Vf=(i,m)=>{let p=null;const v=()=>{Oo(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},Uf=i=>i.slice(0).sort(),aA=(i,m)=>{throw new Error("All required keys ("+Uf(i).join(", ")+") were not specified. Specified keys were: "+Uf(m).join(", ")+".")},q0=i=>{throw new Error("Unsupported keys for object: "+Uf(i).join(", "))},K0=(i,m)=>{if(!tn(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Ke(m,p=>{if(!In(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},lA=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Uf(i).join(", ")+") were not.")},iA=i=>{const m=Uf(i);I(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},uA=(i,m)=>dA(i,m,{validate:jo,label:"function"}),dA=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return K0("required",m),iA(m),v=>{const T=Lt(v);zo(m,Z=>To(T,Z))||aA(m,T),i(m,T);const F=ft(m,Z=>!p.validate(v[Z],Z));return F.length>0&&lA(F,p.label),v}},Cx=(i,m)=>{const p=ft(m,v=>!To(i,v));p.length>0&&q0(p)},Y0=i=>uA(Cx,i),mA=Y0(["compare","extract","mutate","sink"]),X0=Y0(["element","start","stop","destroy"]),Va=Y0(["forceDrop","drop","move","delayDrop"]),du=()=>{let i=ie.none();const m=()=>{i=ie.none()},p=(D,F)=>{const Z=i.map(J=>D.compare(J,F));return i=ie.some(F),Z},v=(D,F)=>{F.extract(D).each(J=>{p(F,J).each(Ae=>{T.trigger.move(Ae)})})},T=Qd({move:wi(["info"])});return{onEvent:v,reset:m,events:T.registry}},Hi=()=>{const i=Qd({move:wi(["info"])});return{onEvent:Ct,reset:Ct,events:i.registry}},J0=()=>{const i=Hi(),m=du();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(Z,J)=>{p.onEvent(Z,J)},events:m.events}},Q0=(i,m,p)=>{let v=!1;const T=Qd({start:wi([]),stop:wi([])}),D=J0(),F=()=>{Et.stop(),D.isOn()&&(D.off(),T.trigger.stop())},Z=Vf(F,200),J=at=>{Et.start(at),D.on(),T.trigger.start()},ge=at=>{Z.cancel(),D.onEvent(at,m)};D.events.move.bind(at=>{m.mutate(i,at.info)});const Ae=()=>{v=!0},mt=()=>{v=!1},It=()=>v,Rt=at=>(..._t)=>{v&&at.apply(null,_t)},Et=m.sink(Va({forceDrop:F,drop:Rt(F),move:Rt(ge),delayDrop:Rt(Z.throttle)}),p),en=()=>{Et.destroy()};return{element:Et.element,go:J,on:Ae,off:mt,isActive:It,destroy:en,events:T.registry}},wx=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Sx=wx("ephox-dragster").resolve,ZC=i=>{const m={layerClass:Sx("blocker"),...i},p=be.fromTag("div");return Ps(p,"role","presentation"),mn(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),bd(p,Sx("blocker")),bd(p,m.layerClass),{element:ee(p),destroy:()=>{Ar(p)}}};var ev=mA({compare:(i,m)=>nt(m.left-i.left,m.top-i.top),extract:i=>ie.some(nt(i.x,i.y)),sink:(i,m)=>{const p=ZC(m),v=zf(p.element(),"mousedown",i.forceDrop),T=zf(p.element(),"mouseup",i.drop),D=zf(p.element(),"mousemove",i.move),F=zf(p.element(),"mouseout",i.delayDrop),Z=()=>{p.destroy(),T.unbind(),D.unbind(),F.unbind(),v.unbind()},J=Ae=>{Es(Ae,p.element())},ge=()=>{Ar(p.element())};return X0({element:p.element,start:J,stop:ge,destroy:Z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const jC=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:ev;return Q0(i,v,m)},Pl=wx("ephox-snooker").resolve,Ex=()=>{const i=Qd({drag:wi(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},GC=()=>{const i=Qd({drag:wi(["xDelta","yDelta","target"])});let m=ie.none();const p=Ex();return p.events.drag.bind(D=>{m.each(F=>{i.trigger.drag(D.xDelta,D.yDelta,F)})}),{assign:D=>{m=ie.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},P1=(i,m,p,v,T)=>{const D=be.fromTag("div");return mn(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:T+"px",width:v+"px"}),mc(D,{"data-column":i,role:"presentation"}),D},$1=(i,m,p,v,T)=>{const D=be.fromTag("div");return mn(D,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:v+"px"}),mc(D,{"data-row":i,role:"presentation"}),D},tv=Pl("resizer-bar"),F1=Pl("resizer-rows"),kx=Pl("resizer-cols"),_x=7,qC=(i,m)=>bo(i.all,(p,v)=>m(p.element)?[v]:[]),KC=(i,m)=>{const p=[];return Ho(i.grid.columns,v=>{ko.getColumnAt(i,v).map(D=>D.element).forall(m)&&p.push(v)}),ft(p,v=>{const T=ko.filterItems(i,D=>D.column===v);return zo(T,D=>m(D.element))})},Im=i=>{const m=or(i.parent(),"."+tv);Ke(m,Ar)},YC=(i,m,p)=>{const v=i.origin();Ke(m,T=>{T.each(D=>{const F=p(v,D);bd(F,tv),Es(i.parent(),F)})})},Ax=(i,m,p,v)=>{YC(i,m,(T,D)=>{const F=P1(D.col,D.x-T.left,p.top-T.top,_x,v);return bd(F,kx),F})},hA=(i,m,p,v)=>{YC(i,m,(T,D)=>{const F=$1(D.row,p.left-T.left,D.y-T.top,v,_x);return bd(F,F1),F})},pA=(i,m,p,v,T)=>{const D=Gn(p),F=m.isResizable,Z=v.length>0?ma.positions(v,p):[],J=Z.length>0?qC(i,F):[],ge=ft(Z,(Rt,Et)=>rt(J,en=>Et===en));hA(m,ge,D,Fs(p));const Ae=T.length>0?df.positions(T,p):[],mt=Ae.length>0?KC(i,F):[],It=ft(Ae,(Rt,Et)=>rt(mt,en=>Et===en));Ax(m,It,D,z(p))},Ox=(i,m)=>{if(Im(i),i.isResizable(m)){const p=ko.fromTable(m),v=af(p),T=td(p);pA(p,i,m,v,T)}},ei=(i,m)=>{const p=or(i.parent(),"."+tv);Ke(p,m)},pl=i=>{ei(i,m=>{Be(m,"display","none")})},yp=i=>{ei(i,m=>{Be(m,"display","block")})},gR=i=>D1(i,F1),bA=i=>D1(i,kx),XC=Pl("resizer-bar-dragging"),Xo=i=>{const m=GC(),p=jC(m,{});let v=ie.none();const T=(Et,en)=>ie.from(hr(Et,en));m.events.drag.bind(Et=>{T(Et.target,"data-row").each(en=>{const at=Fa(Et.target,"top");Be(Et.target,"top",at+Et.yDelta+"px")}),T(Et.target,"data-column").each(en=>{const at=Fa(Et.target,"left");Be(Et.target,"left",at+Et.xDelta+"px")})});const D=(Et,en)=>{const at=Fa(Et,en),_t=rr(Et,"data-initial-"+en,0);return at-_t};p.events.stop.bind(()=>{m.get().each(Et=>{v.each(en=>{T(Et,"data-row").each(at=>{const _t=D(Et,"top");re(Et,"data-initial-top"),Rt.trigger.adjustHeight(en,_t,parseInt(at,10))}),T(Et,"data-column").each(at=>{const _t=D(Et,"left");re(Et,"data-initial-left"),Rt.trigger.adjustWidth(en,_t,parseInt(at,10))}),Ox(i,en)})})});const F=(Et,en)=>{Rt.trigger.startAdjust(),m.assign(Et),Ps(Et,"data-initial-"+en,Fa(Et,en)),bd(Et,XC),Be(Et,"opacity","0.2"),p.go(i.parent())},Z=zf(i.parent(),"mousedown",Et=>{gR(Et.target)&&F(Et.target,"top"),bA(Et.target)&&F(Et.target,"left")}),J=Et=>lt(Et,i.view()),ge=Et=>sr(Et,"table",J).filter(e1),Ae=zf(i.view(),"mouseover",Et=>{ge(Et.target).fold(()=>{_s(Et.target)&&Im(i)},en=>{p.isActive()&&(v=ie.some(en),Ox(i,en))})}),mt=()=>{Z.unbind(),Ae.unbind(),p.destroy(),Im(i)},It=Et=>{Ox(i,Et)},Rt=Qd({adjustHeight:wi(["table","delta","row"]),adjustWidth:wi(["table","delta","column"]),startAdjust:wi([])});return{destroy:mt,refresh:It,on:p.on,off:p.off,hideBars:it(pl,i),showBars:it(yp,i),events:Rt.registry}},Dx={create:(i,m,p)=>{const v=ma,T=df,D=Xo(i),F=Qd({beforeResize:wi(["table","type"]),afterResize:wi(["table","type"]),startDrag:wi([])});return D.events.adjustHeight.bind(Z=>{const J=Z.table;F.trigger.beforeResize(J,"row");const ge=v.delta(Z.delta,J);Py(J,ge,Z.row),F.trigger.afterResize(J,"row")}),D.events.startAdjust.bind(Z=>{F.trigger.startDrag()}),D.events.adjustWidth.bind(Z=>{const J=Z.table;F.trigger.beforeResize(J,"col");const ge=T.delta(Z.delta,J),Ae=p(J);iS(J,ge,Z.column,m,Ae),F.trigger.afterResize(J,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:F.registry}}},I1={only:(i,m)=>{const p=Ga(i)?an(i):i;return{parent:ee(p),view:ee(i),origin:ee(nt(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>Gn(m);return{parent:ee(m),view:ee(i),origin:v,isResizable:p}},body:(i,m,p)=>({parent:ee(m),view:ee(i),origin:ee(nt(0,0)),isResizable:p})},vA=()=>{const i=be.fromTag("div");return mn(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Es($(),i),i},yA=(i,m)=>i.inline?I1.body(be.fromDom(i.getBody()),vA(),m):I1.only(be.fromDom(i.getDoc()),m),CA=(i,m)=>{i.inline&&Ar(m.parent())},nv=i=>Nn(i)&&i.nodeName==="TABLE",L1="bar-",Mx=i=>hr(i,"data-mce-resize")!=="false",bR=i=>{const m=ko.fromTable(i);ko.hasColumns(m)||Ke(Tu(i),p=>{const v=Co(p,"width");Be(p,"width",v),re(p,"width")})},Cp=i=>Tc(i,"corner-"),JC=i=>wl(i,"corner-"),vR=i=>{const m=If(),p=If(),v=If();let T,D,F,Z;const J=_t=>Mc(i,_t),ge=()=>Qr(i)?xf():Dg(),Ae=_t=>jd(_t).columns,mt=_t=>jd(_t).rows,It=(_t,Rn,Nt,ys)=>{const qs=JC(Rn),Is=Jc(qs,"e"),Na=Tc(qs,"n");if(D===""&&Ug(_t),Z===""&&cC(_t),Nt!==T&&D!==""){Be(_t,"width",D);const Nc=ge(),em=J(_t),Zf=Qr(i)||Is?Ae(_t)-1:0;iS(_t,Nt-T,Zf,Nc,em)}else if(Vw(D)){const Nc=parseFloat(D.replace("%","")),em=Nt*Nc/T;Be(_t,"width",em+"%")}if(Uw(D)&&bR(_t),ys!==F&&Z!==""){Be(_t,"height",Z);const Nc=Na?0:mt(_t)-1;Py(_t,ys-F,Nc)}},Rt=()=>{p.on(_t=>{_t.destroy()}),v.on(_t=>{CA(i,_t)})};return i.on("init",()=>{const _t=yA(i,Mx);if(v.set(_t),sd(i)&&ru(i)){const Rn=ge(),Nt=Dx.create(_t,Rn,J);Nt.on(),Nt.events.startDrag.bind(ys=>{m.set(i.selection.getRng())}),Nt.events.beforeResize.bind(ys=>{const qs=ys.table.dom;Vc(i,qs,bf(qs),dy(qs),L1+ys.type)}),Nt.events.afterResize.bind(ys=>{const qs=ys.table,Is=qs.dom;Al(qs),m.on(Na=>{i.selection.setRng(Na),i.focus()}),Rc(i,Is,bf(Is),dy(Is),L1+ys.type),i.undoManager.add()}),p.set(Nt)}}),i.on("ObjectResizeStart",_t=>{const Rn=_t.target;if(nv(Rn)){const Nt=be.fromDom(Rn);Ke(i.dom.select(".mce-clonedresizable"),ys=>{i.dom.addClass(ys,"mce-"+ly(i)+"-columns")}),!RS(Nt)&&Em(i)?rC(Nt):!sC(Nt)&&pf(i)&&Ug(Nt),MS(Nt)&&Tc(_t.origin,L1)&&Ug(Nt),T=_t.width,D=su(i)?"":my(i,Rn).getOr(""),F=_t.height,Z=zw(i,Rn).getOr("")}}),i.on("ObjectResized",_t=>{const Rn=_t.target;if(nv(Rn)){const Nt=be.fromDom(Rn),ys=_t.origin;Cp(ys)&&It(Nt,ys,_t.width,_t.height),Al(Nt),Rf(i,Nt.dom,Uc)}}),i.on("SwitchMode",()=>{p.on(_t=>{i.mode.isReadOnly()?_t.hideBars():_t.showBars()})}),i.on("dragstart dragend",_t=>{p.on(Rn=>{_t.type==="dragstart"?(Rn.hideBars(),Rn.off()):(Rn.on(),Rn.showBars())})}),i.on("remove",()=>{Rt()}),{refresh:_t=>{p.on(Rn=>Rn.refreshBars(be.fromDom(_t)))},hide:()=>{p.on(_t=>_t.hideBars())},show:()=>{p.on(_t=>_t.showBars())}}},Nx=i=>{Tg(i);const m=vR(i),p=G0(i,m),v=Qy(i,m,p);return ZS(i,v),B_(i,v),Hh(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},wA=i=>({table:Nx(i)});var Pn=()=>{Gt.add("dom",wA)};Pn()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,Fn=ft=>pn=>pn.options.get(ft),eo=ft=>{const pn=ft.options.register;pn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+uo().source+"$","i")}),pn("link_default_target",{processor:"string"}),pn("link_default_protocol",{processor:"string",default:"https"})},Yn=Fn("autolink_pattern"),ro=Fn("link_default_target"),In=Fn("link_default_protocol"),We=Fn("allow_unsafe_link_target"),tn=(ft,pn,Me)=>{var Je;return Me(ft,pn.prototype)?!0:((Je=ft.constructor)===null||Je===void 0?void 0:Je.name)===pn.name},Oo=ft=>{const pn=typeof ft;return ft===null?"null":pn==="object"&&Array.isArray(ft)?"array":pn==="object"&&tn(ft,String,(Me,Je)=>Je.isPrototypeOf(Me))?"string":pn},Zo=ft=>pn=>Oo(pn)===ft,Do=ft=>pn=>ft===pn,Ro=Zo("string"),Nn=Do(void 0),jo=ft=>ft==null,Wn=ft=>!jo(ft),Ct=ft=>pn=>!ft(pn),zn=Object.hasOwnProperty,Ue=(ft,pn)=>zn.call(ft,pn),ee=(ft,pn,Me)=>ft.length>=pn.length&&ft.substr(Me,Me+pn.length)===pn,st=(ft,pn,Me=0,Je)=>{const I=ft.indexOf(pn,Me);return I!==-1?Nn(Je)?!0:I+pn.length<=Je:!1},Zn=(ft,pn)=>ee(ft,pn,0),it="\uFEFF",W=ft=>ft===it,Dt=ft=>ft.replace(/\uFEFF/g,"");var cn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const xn=ft=>ft.nodeType===3,Re=ft=>ft.nodeType===1,ie=ft=>/^[(\[{ \u00a0]$/.test(ft),Go=ft=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(ft),co=ft=>/[?!,.;:]/.test(ft),Pt=(ft,pn,Me)=>{for(let Je=pn-1;Je>=0;Je--){const I=ft.charAt(Je);if(!W(I)&&Me(I))return Je}return-1},A=(ft,pn)=>{let Me=ft,Je=pn;for(;Re(Me)&&Me.childNodes[Je];)Me=Me.childNodes[Je],Je=xn(Me)?Me.data.length:Me.childNodes.length;return{container:Me,offset:Je}},To=(ft,pn)=>{var Me;const Je=ft.schema.getVoidElements(),I=Yn(ft),{dom:Ns,selection:ao}=ft;if(Ns.getParent(ao.getNode(),"a[href]")!==null)return null;const bo=ao.getRng(),zo=cn(Ns,jn=>Ns.isBlock(jn)||Ue(Je,jn.nodeName.toLowerCase())||Ns.getContentEditable(jn)==="false"),{container:Gc,offset:He}=A(bo.endContainer,bo.endOffset),vt=(Me=Ns.getParent(Gc,Ns.isBlock))!==null&&Me!==void 0?Me:Ns.getRoot(),je=zo.backwards(Gc,He+pn,(jn,fr)=>{const Vo=jn.data,xs=Pt(Vo,fr,Ct(ie));return xs===-1||co(Vo[xs])?xs:xs+1},vt);if(!je)return null;let ye=je.container;const ln=zo.backwards(je.container,je.offset,(jn,fr)=>{ye=jn;const Vo=Pt(jn.data,fr,ie);return Vo===-1?Vo:Vo+1},vt),vo=Ns.createRng();ln?vo.setStart(ln.container,ln.offset):vo.setStart(ye,0),vo.setEnd(je.container,je.offset);const hs=Dt(vo.toString()).match(I);if(hs){let jn=hs[0];return Zn(jn,"www.")?jn=In(ft)+"://"+jn:st(jn,"@")&&!Go(jn)&&(jn="mailto:"+jn),{rng:vo,url:jn}}else return null},rt=(ft,pn)=>{const{dom:Me,selection:Je}=ft,{rng:I,url:Ns}=pn,ao=Je.getBookmark();Je.setRng(I);const bo="createlink",zo={command:bo,ui:!1,value:Ns};if(!ft.dispatch("BeforeExecCommand",zo).isDefaultPrevented()){ft.getDoc().execCommand(bo,!1,Ns),ft.dispatch("ExecCommand",zo);const He=ro(ft);if(Ro(He)){const vt=Je.getNode();Me.setAttrib(vt,"target",He),He==="_blank"&&!We(ft)&&Me.setAttrib(vt,"rel","noopener")}}Je.moveToBookmark(ao),ft.nodeChanged()},Ho=ft=>{const pn=To(ft,-1);Wn(pn)&&rt(ft,pn)},Yt=Ho,Ke=ft=>{const pn=To(ft,0);Wn(pn)&&rt(ft,pn)},go=ft=>{ft.on("keydown",pn=>{pn.keyCode===13&&!pn.isDefaultPrevented()&&Ke(ft)}),ft.on("keyup",pn=>{pn.keyCode===32?Ho(ft):(pn.keyCode===48&&pn.shiftKey||pn.keyCode===221)&&Yt(ft)})};var Vs=()=>{Gt.add("autolink",ft=>{eo(ft),go(ft)})};Vs()})();(function(){const Gt=Ue=>{let ee=Ue;return{get:()=>ee,set:it=>{ee=it}}};var uo=tinymce.util.Tools.resolve("tinymce.PluginManager"),Fn=tinymce.util.Tools.resolve("tinymce.Env");const eo=Ue=>Ue.dispatch("ResizeEditor"),Yn=Ue=>ee=>ee.options.get(Ue),ro=Ue=>{const ee=Ue.options.register;ee("autoresize_overflow_padding",{processor:"number",default:1}),ee("autoresize_bottom_margin",{processor:"number",default:50})},In=Yn("min_height"),We=Yn("max_height"),tn=Yn("autoresize_overflow_padding"),Oo=Yn("autoresize_bottom_margin"),Zo=Ue=>Ue.plugins.fullscreen&&Ue.plugins.fullscreen.isFullscreen(),Do=(Ue,ee)=>{const st=Ue.getBody();st&&(st.style.overflowY=ee?"":"hidden",ee||(st.scrollTop=0))},Ro=(Ue,ee,st,Zn)=>{var it;const W=parseInt((it=Ue.getStyle(ee,st,Zn))!==null&&it!==void 0?it:"",10);return isNaN(W)?0:W},Nn=Ue=>{if((Ue==null?void 0:Ue.type.toLowerCase())==="setcontent"){const ee=Ue;return ee.selection===!0||ee.paste===!0}else return!1},jo=(Ue,ee,st,Zn)=>{var it;const W=Ue.dom,Dt=Ue.getDoc();if(!Dt)return;if(Zo(Ue)){Do(Ue,!0);return}const cn=Dt.documentElement,xn=Zn?Zn():tn(Ue),Re=(it=In(Ue))!==null&&it!==void 0?it:Ue.getElement().offsetHeight;let ie=Re;const Go=Ro(W,cn,"margin-top",!0),co=Ro(W,cn,"margin-bottom",!0);let Pt=cn.offsetHeight+Go+co+xn;Pt<0&&(Pt=0);const A=Ue.getContainer().offsetHeight,To=Ue.getContentAreaContainer().offsetHeight,rt=A-To;Pt+rt>Re&&(ie=Pt+rt);const Ho=We(Ue);Ho&&ie>Ho?(ie=Ho,Do(Ue,!0)):Do(Ue,!1);const Yt=ee.get();if(Yt.set&&(Ue.dom.setStyles(Ue.getDoc().documentElement,{"min-height":0}),Ue.dom.setStyles(Ue.getBody(),{"min-height":"inherit"})),ie!==Yt.totalHeight&&(Pt-xn!==Yt.contentHeight||!Yt.set)){const Ke=ie-Yt.totalHeight;if(W.setStyle(Ue.getContainer(),"height",ie+"px"),ee.set({totalHeight:ie,contentHeight:Pt,set:!0}),eo(Ue),Fn.browser.isSafari()&&(Fn.os.isMacOS()||Fn.os.isiOS())){const go=Ue.getWin();go.scrollTo(go.pageXOffset,go.pageYOffset)}Ue.hasFocus()&&Nn(st)&&Ue.selection.scrollIntoView(),(Fn.browser.isSafari()||Fn.browser.isChromium())&&Ke<0&&jo(Ue,ee,st,Zn)}},Wn=(Ue,ee)=>{const st=()=>Oo(Ue);Ue.on("init",Zn=>{const it=tn(Ue),W=Ue.dom;W.setStyles(Ue.getDoc().documentElement,{height:"auto"}),Fn.browser.isEdge()||Fn.browser.isIE()?W.setStyles(Ue.getBody(),{paddingLeft:it,paddingRight:it,"min-height":0}):W.setStyles(Ue.getBody(),{paddingLeft:it,paddingRight:it}),jo(Ue,ee,Zn,st)}),Ue.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Zn=>{jo(Ue,ee,Zn,st)})},Ct=(Ue,ee)=>{Ue.addCommand("mceAutoResize",()=>{jo(Ue,ee)})};var zn=()=>{uo.add("autoresize",Ue=>{if(ro(Ue),Ue.options.isSet("resize")||Ue.options.set("resize",!1),!Ue.inline){const ee=Gt({totalHeight:0,contentHeight:0,set:!1});Ct(Ue,ee),Wn(Ue,ee)}})};zn()})();(function(){const Gt=K=>{let se=K;return{get:()=>se,set:mn=>{se=mn}}};var uo=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=K=>({isFullscreen:()=>K.get()!==null}),eo=(K,se,ke)=>{var Be;return ke(K,se.prototype)?!0:((Be=K.constructor)===null||Be===void 0?void 0:Be.name)===se.name},Yn=K=>{const se=typeof K;return K===null?"null":se==="object"&&Array.isArray(K)?"array":se==="object"&&eo(K,String,(ke,Be)=>Be.isPrototypeOf(ke))?"string":se},ro=K=>se=>Yn(se)===K,In=K=>se=>typeof se===K,We=K=>se=>K===se,tn=ro("string"),Oo=ro("object"),Zo=ro("array"),Do=We(null),Ro=In("boolean"),Nn=We(void 0),jo=K=>K==null,Wn=K=>!jo(K),Ct=In("function"),zn=In("number"),Ue=()=>{},ee=(K,se)=>(...ke)=>K(se.apply(null,ke)),st=(K,se)=>ke=>K(se(ke)),Zn=K=>()=>K;function it(K,...se){return(...ke)=>{const Be=se.concat(ke);return K.apply(null,Be)}}const W=Zn(!1),Dt=Zn(!0);class cn{constructor(se,ke){this.tag=se,this.value=ke}static some(se){return new cn(!0,se)}static none(){return cn.singletonNone}fold(se,ke){return this.tag?ke(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?cn.some(se(this.value)):cn.none()}bind(se){return this.tag?se(this.value):cn.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:cn.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Wn(se)?cn.some(se):cn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}cn.singletonNone=new cn(!1);const xn=Array.prototype.push,Re=(K,se)=>{const ke=K.length,Be=new Array(ke);for(let mn=0;mn<ke;mn++){const Co=K[mn];Be[mn]=se(Co,mn)}return Be},ie=(K,se)=>{for(let ke=0,Be=K.length;ke<Be;ke++){const mn=K[ke];se(mn,ke)}},Go=(K,se)=>{const ke=[];for(let Be=0,mn=K.length;Be<mn;Be++){const Co=K[Be];se(Co,Be)&&ke.push(Co)}return ke},co=(K,se,ke)=>{for(let Be=0,mn=K.length;Be<mn;Be++){const Co=K[Be];if(se(Co,Be))return cn.some(Co);if(ke(Co,Be))break}return cn.none()},Pt=(K,se)=>co(K,se,W),A=K=>{const se=[];for(let ke=0,Be=K.length;ke<Be;++ke){if(!Zo(K[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+K);xn.apply(se,K[ke])}return se},To=(K,se)=>A(Re(K,se)),rt=(K,se)=>se>=0&&se<K.length?cn.some(K[se]):cn.none(),Ho=K=>rt(K,0),Yt=(K,se)=>{for(let ke=0;ke<K.length;ke++){const Be=se(K[ke],ke);if(Be.isSome())return Be}return cn.none()},Ke=(K,se,ke)=>K.isSome()&&se.isSome()?cn.some(ke(K.getOrDie(),se.getOrDie())):cn.none(),go=K=>{const se=Gt(cn.none()),ke=()=>se.get().each(K);return{clear:()=>{ke(),se.set(cn.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:pc=>{ke(),se.set(cn.some(pc))}}},Vs=()=>go(K=>K.unbind()),ft=()=>{const K=go(Ue);return{...K,on:ke=>K.get().each(ke)}},pn=(K,se)=>{let ke=null;return{cancel:()=>{Do(ke)||(clearTimeout(ke),ke=null)},throttle:(...Co)=>{Do(ke)&&(ke=setTimeout(()=>{ke=null,K.apply(null,Co)},se))}}},Me=Object.keys,Je=(K,se)=>{const ke=Me(K);for(let Be=0,mn=ke.length;Be<mn;Be++){const Co=ke[Be],Xs=K[Co];se(Xs,Co)}},I=typeof window<"u"?window:Function("return this;")(),Ns=(K,se)=>{let ke=se??I;for(let Be=0;Be<K.length&&ke!==void 0&&ke!==null;++Be)ke=ke[K[Be]];return ke},ao=(K,se)=>{const ke=K.split(".");return Ns(ke,se)},bo=(K,se)=>ao(K,se),zo=(K,se)=>{const ke=bo(K,se);if(ke==null)throw new Error(K+" not available on this browser");return ke},Gc=Object.getPrototypeOf,He=K=>zo("HTMLElement",K),vt=K=>{const se=ao("ownerDocument.defaultView",K);return Oo(K)&&(He(se).prototype.isPrototypeOf(K)||/^HTML\w*Element$/.test(Gc(K).constructor.name))},je=9,ye=11,ln=1,vo=3,Lt=K=>K.dom.nodeType,hs=K=>se=>Lt(se)===K,jn=K=>fr(K)&&vt(K.dom),fr=hs(ln),Vo=hs(vo),xs=hs(je),oa=hs(ye),Us=(K,se,ke)=>{if(tn(ke)||Ro(ke)||zn(ke))K.setAttribute(se,ke+"");else throw console.error("Invalid call to Attribute.set. Key ",se,":: Value ",ke,":: Element ",K),new Error("Attribute value was not simple")},Bs=(K,se,ke)=>{Us(K.dom,se,ke)},ps=(K,se)=>{const ke=K.dom.getAttribute(se);return ke===null?void 0:ke},wc=(K,se)=>{K.dom.removeAttribute(se)},cs=K=>K.dom.classList!==void 0,ns=(K,se)=>cs(K)&&K.dom.classList.contains(se),lr=(K,se,ke=0,Be)=>{const mn=K.indexOf(se,ke);return mn!==-1?Nn(Be)?!0:mn+se.length<=Be:!1},lo=K=>K.style!==void 0&&Ct(K.style.getPropertyValue),Cs=(K,se)=>{const Be=(se||document).createElement("div");if(Be.innerHTML=K,!Be.hasChildNodes()||Be.childNodes.length>1){const mn="HTML does not have a single root node";throw console.error(mn,K),new Error(mn)}return dc(Be.childNodes[0])},gr=(K,se)=>{const Be=(se||document).createElement(K);return dc(Be)},$c=(K,se)=>{const Be=(se||document).createTextNode(K);return dc(Be)},dc=K=>{if(K==null)throw new Error("Node cannot be null or undefined");return{dom:K}},ir={fromHtml:Cs,fromTag:gr,fromText:$c,fromDom:dc,fromPoint:(K,se,ke)=>cn.from(K.dom.elementFromPoint(se,ke)).map(dc)},ht=(K,se)=>{const ke=K.dom;if(ke.nodeType!==ln)return!1;{const Be=ke;if(Be.matches!==void 0)return Be.matches(se);if(Be.msMatchesSelector!==void 0)return Be.msMatchesSelector(se);if(Be.webkitMatchesSelector!==void 0)return Be.webkitMatchesSelector(se);if(Be.mozMatchesSelector!==void 0)return Be.mozMatchesSelector(se);throw new Error("Browser lacks native selectors")}},Mo=K=>K.nodeType!==ln&&K.nodeType!==je&&K.nodeType!==ye||K.childElementCount===0,_r=(K,se)=>{const ke=document;return Mo(ke)?[]:Re(ke.querySelectorAll(K),ir.fromDom)},Kr=(K,se)=>K.dom===se.dom,Zr=K=>ir.fromDom(K.dom.ownerDocument),Hr=K=>xs(K)?K:Zr(K),Jo=K=>cn.from(K.dom.parentNode).map(ir.fromDom),sc=(K,se)=>{const ke=Ct(se)?se:W;let Be=K.dom;const mn=[];for(;Be.parentNode!==null&&Be.parentNode!==void 0;){const Co=Be.parentNode,Xs=ir.fromDom(Co);if(mn.push(Xs),ke(Xs)===!0)break;Be=Co}return mn},jr=K=>{const se=ke=>Go(ke,Be=>!Kr(K,Be));return Jo(K).map(un).map(se).getOr([])},os=K=>cn.from(K.dom.nextSibling).map(ir.fromDom),un=K=>Re(K.dom.childNodes,ir.fromDom),tr=K=>oa(K)&&Wn(K.dom.host),rc=Ct(Element.prototype.attachShadow)&&Ct(Node.prototype.getRootNode),Ga=Zn(rc),qa=rc?K=>ir.fromDom(K.dom.getRootNode()):Hr,as=K=>{const se=qa(K);return tr(se)?cn.some(se):cn.none()},Ws=K=>ir.fromDom(K.dom.host),Ps=K=>{if(Ga()&&Wn(K.target)){const se=ir.fromDom(K.target);if(fr(se)&&mc(se)&&K.composed&&K.composedPath){const ke=K.composedPath();if(ke)return Ho(ke)}}return cn.from(K.target)},mc=K=>Wn(K.dom.shadowRoot),sa=K=>{const se=Vo(K)?K.dom.parentNode:K.dom;if(se==null||se.ownerDocument===null)return!1;const ke=se.ownerDocument;return as(ir.fromDom(se)).fold(()=>ke.body.contains(se),st(sa,Ws))},hr=K=>{const se=K.dom.body;if(se==null)throw new Error("Body is not available yet");return ir.fromDom(se)},de=(K,se,ke)=>{if(!tn(ke))throw console.error("Invalid call to CSS.set. Property ",se,":: Value ",ke,":: Element ",K),new Error("CSS value must be a string: "+ke);lo(K)&&K.style.setProperty(se,ke)},re=(K,se,ke)=>{const Be=K.dom;de(Be,se,ke)},Oe=(K,se)=>{const ke=K.dom;Je(se,(Be,mn)=>{de(ke,mn,Be)})},ze=(K,se)=>{const ke=K.dom,mn=window.getComputedStyle(ke).getPropertyValue(se);return mn===""&&!sa(K)?sn(ke,se):mn},sn=(K,se)=>lo(K)?K.style.getPropertyValue(se):"",vn=(K,se,ke,Be,mn,Co,Xs)=>({target:K,x:se,y:ke,stop:Be,prevent:mn,kill:Co,raw:Xs}),Xn=K=>{const se=ir.fromDom(Ps(K).getOr(K.target)),ke=()=>K.stopPropagation(),Be=()=>K.preventDefault(),mn=ee(Be,ke);return vn(se,K.clientX,K.clientY,ke,Be,mn,K)},Ts=(K,se)=>ke=>{K(ke)&&se(Xn(ke))},be=(K,se,ke,Be,mn)=>{const Co=Ts(ke,Be);return K.dom.addEventListener(se,Co,mn),{unbind:it(ue,K,se,Co,mn)}},Hn=(K,se,ke,Be)=>be(K,se,ke,Be,!1),ue=(K,se,ke,Be)=>{K.dom.removeEventListener(se,ke,Be)},fe=Dt,tt=(K,se,ke)=>Hn(K,se,fe,ke),lt=K=>{let se=!1,ke;return(...Be)=>(se||(se=!0,ke=K.apply(null,Be)),ke)},Ft=(K,se,ke,Be)=>{const mn=K.isiOS()&&/ipad/i.test(ke)===!0,Co=K.isiOS()&&!mn,Xs=K.isiOS()||K.isAndroid(),pc=Xs||Be("(pointer:coarse)"),Eo=mn||!Co&&Xs&&Be("(min-device-width:768px)"),Xr=Co||Xs&&!Eo,rr=se.isSafari()&&K.isiOS()&&/safari/i.test(ke)===!1,Pr=!Xr&&!Eo&&!rr;return{isiPad:Zn(mn),isiPhone:Zn(Co),isTablet:Zn(Eo),isPhone:Zn(Xr),isTouch:Zn(pc),isAndroid:K.isAndroid,isiOS:K.isiOS,isWebView:Zn(rr),isDesktop:Zn(Pr)}},dn=(K,se)=>{for(let ke=0;ke<K.length;ke++){const Be=K[ke];if(Be.test(se))return Be}},nn=(K,se)=>{const ke=dn(K,se);if(!ke)return{major:0,minor:0};const Be=mn=>Number(se.replace(ke,"$"+mn));return yn(Be(1),Be(2))},on=(K,se)=>{const ke=String(se).toLowerCase();return K.length===0?an():nn(K,ke)},an=()=>yn(0,0),yn=(K,se)=>({major:K,minor:se}),yo={nu:yn,detect:on,unknown:an},bs=(K,se)=>Yt(se.brands,ke=>{const Be=ke.brand.toLowerCase();return Pt(K,mn=>{var Co;return Be===((Co=mn.brand)===null||Co===void 0?void 0:Co.toLowerCase())}).map(mn=>({current:mn.name,version:yo.nu(parseInt(ke.version,10),0)}))}),Sc=(K,se)=>{const ke=String(se).toLowerCase();return Pt(K,Be=>Be.search(ke))},ra=(K,se)=>Sc(K,se).map(ke=>{const Be=yo.detect(ke.versionRegexes,se);return{current:ke.name,version:Be}}),ca=(K,se)=>Sc(K,se).map(ke=>{const Be=yo.detect(ke.versionRegexes,se);return{current:ke.name,version:Be}}),Bn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,mo=K=>se=>lr(se,K),Qo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:K=>lr(K,"edge/")&&lr(K,"chrome")&&lr(K,"safari")&&lr(K,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bn],search:K=>lr(K,"chrome")&&!lr(K,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:K=>lr(K,"msie")||lr(K,"trident")},{name:"Opera",versionRegexes:[Bn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:mo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:mo("firefox")},{name:"Safari",versionRegexes:[Bn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:K=>(lr(K,"safari")||lr(K,"mobile/"))&&lr(K,"applewebkit")}],fc=[{name:"Windows",search:mo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:K=>lr(K,"iphone")||lr(K,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:mo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:mo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:mo("linux"),versionRegexes:[]},{name:"Solaris",search:mo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:mo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:mo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Br={browsers:Zn(Qo),oses:Zn(fc)},Zs="Edge",Es="Chromium",Fc="IE",Vl="Opera",ss="Firefox",Yr="Safari",Ic=()=>Ar({current:void 0,version:yo.unknown()}),Ar=K=>{const se=K.current,ke=K.version,Be=mn=>()=>se===mn;return{current:se,version:ke,isEdge:Be(Zs),isChromium:Be(Es),isIE:Be(Fc),isOpera:Be(Vl),isFirefox:Be(ss),isSafari:Be(Yr)}},aa={unknown:Ic,nu:Ar,edge:Zn(Zs),chromium:Zn(Es),ie:Zn(Fc),opera:Zn(Vl),firefox:Zn(ss),safari:Zn(Yr)},$a="Windows",xc="iOS",la="Android",wa="Linux",_i="macOS",qc="Solaris",ll="FreeBSD",gc="ChromeOS",Sa=()=>Cl({current:void 0,version:yo.unknown()}),Cl=K=>{const se=K.current,ke=K.version,Be=mn=>()=>se===mn;return{current:se,version:ke,isWindows:Be($a),isiOS:Be(xc),isAndroid:Be(la),isMacOS:Be(_i),isLinux:Be(wa),isSolaris:Be(qc),isFreeBSD:Be(ll),isChromeOS:Be(gc)}},Ul={unknown:Sa,nu:Cl,windows:Zn($a),ios:Zn(xc),android:Zn(la),linux:Zn(wa),macos:Zn(_i),solaris:Zn(qc),freebsd:Zn(ll),chromeos:Zn(gc)},Ai={detect:(K,se,ke)=>{const Be=Br.browsers(),mn=Br.oses(),Co=se.bind(Eo=>bs(Be,Eo)).orThunk(()=>ra(Be,K)).fold(aa.unknown,aa.nu),Xs=ca(mn,K).fold(Ul.unknown,Ul.nu),pc=Ft(Xs,Co,K,ke);return{browser:Co,os:Xs,deviceType:pc}}},Kc=K=>window.matchMedia(K).matches;let Yi=lt(()=>Ai.detect(navigator.userAgent,cn.from(navigator.userAgentData),Kc));const U=()=>Yi(),ce=(K,se)=>({left:K,top:se,translate:(Be,mn)=>ce(K+Be,se+mn)}),we=ce,qe=K=>{const se=K!==void 0?K.dom:document,ke=se.body.scrollLeft||se.documentElement.scrollLeft,Be=se.body.scrollTop||se.documentElement.scrollTop;return we(ke,Be)},gt=K=>{const se=K===void 0?window:K;return U().browser.isFirefox()?cn.none():cn.from(se.visualViewport)},Qt=(K,se,ke,Be)=>({x:K,y:se,width:ke,height:Be,right:K+ke,bottom:se+Be}),xo=K=>{const se=K===void 0?window:K,ke=se.document,Be=qe(ir.fromDom(ke));return gt(se).fold(()=>{const mn=se.document.documentElement,Co=mn.clientWidth,Xs=mn.clientHeight;return Qt(Be.left,Be.top,Co,Xs)},mn=>Qt(Math.max(mn.pageLeft,Be.left),Math.max(mn.pageTop,Be.top),mn.width,mn.height))},Po=(K,se,ke)=>gt(ke).map(Be=>{const mn=Co=>se(Xn(Co));return Be.addEventListener(K,mn),{unbind:()=>Be.removeEventListener(K,mn)}}).getOrThunk(()=>({unbind:Ue}));var so=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),vs=tinymce.util.Tools.resolve("tinymce.Env");const nr=(K,se)=>{K.dispatch("FullscreenStateChanged",{state:se}),K.dispatch("ResizeEditor")},St=K=>se=>se.options.get(K),Su=K=>{const se=K.options.register;se("fullscreen_native",{processor:"boolean",default:!1})},_s=St("fullscreen_native"),$=K=>{const se=ir.fromDom(K.getElement());return as(se).map(Ws).getOrThunk(()=>hr(Zr(se)))},X=K=>K.fullscreenElement!==void 0?K.fullscreenElement:K.msFullscreenElement!==void 0?K.msFullscreenElement:K.webkitFullscreenElement!==void 0?K.webkitFullscreenElement:null,oe=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Ne=K=>{const se=K.dom;se.requestFullscreen?se.requestFullscreen():se.msRequestFullscreen?se.msRequestFullscreen():se.webkitRequestFullScreen&&se.webkitRequestFullScreen()},Bt=K=>{const se=K.dom;se.exitFullscreen?se.exitFullscreen():se.msExitFullscreen?se.msExitFullscreen():se.webkitCancelFullScreen&&se.webkitCancelFullScreen()},ho=K=>K.dom===X(Zr(K).dom),qt=(K,se,ke)=>Go(sc(K,ke),se),or=(K,se)=>Go(jr(K),se),dt=K=>_r(K),$s=(K,se,ke)=>qt(K,Be=>ht(Be,se),ke),Yc=(K,se)=>or(K,ke=>ht(ke,se)),Ys="data-ephox-mobile-fullscreen-style",zr="display:none!important;",il="position:absolute!important;",$o="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Xc="background-color:rgb(255,255,255)!important;",sr=vs.os.isAndroid(),Wl=K=>{const se=ze(K,"background-color");return se!==void 0&&se!==""?"background-color:"+se+"!important":Xc},ur=(K,se,ke)=>{const Be=Xr=>Yc(Xr,"*:not(.tox-silver-sink)"),mn=Xr=>rr=>{const Pr=ps(rr,"style"),Dr=Pr===void 0?"no-styles":Pr.trim();Dr!==Xr&&(Bs(rr,Ys,Dr),Oe(rr,K.parseStyle(Xr)))},Co=$s(se,"*"),Xs=To(Co,Be),pc=Wl(ke);ie(Xs,mn(zr)),ie(Co,mn(il+$o+pc)),mn((sr===!0?"":il)+$o+pc)(se)},xu=K=>{const se=dt("["+Ys+"]");ie(se,ke=>{const Be=ps(ke,Ys);Be&&Be!=="no-styles"?Oe(ke,K.parseStyle(Be)):wc(ke,"style"),wc(ke,Ys)})},hm=so.DOM,ug=()=>xo(window),pr=K=>window.scrollTo(K.x,K.y),wl=gt().fold(()=>({bind:Ue,unbind:Ue}),K=>{const se=ft(),ke=Vs(),Be=Vs(),mn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Co=()=>{window.requestAnimationFrame(()=>{se.on(Xr=>Oe(Xr,{top:K.offsetTop+"px",left:K.offsetLeft+"px",height:K.height+"px",width:K.width+"px"}))})},Xs=pn(()=>{mn(),Co()},50);return{bind:Xr=>{se.set(Xr),Xs.throttle(),ke.set(Po("resize",Xs.throttle)),Be.set(Po("scroll",Xs.throttle))},unbind:()=>{se.on(()=>{ke.clear(),Be.clear()}),se.clear()}}}),hc=(K,se)=>{const ke=document.body,Be=document.documentElement,mn=K.getContainer(),Co=ir.fromDom(mn),Xs=os(Co).filter(Ec=>jn(Ec)&&ns(Ec,"tox-silver-sink")),pc=$(K),Eo=se.get(),Xr=ir.fromDom(K.getBody()),rr=vs.deviceType.isTouch(),Pr=mn.style,Dr=K.iframeElement,Or=Dr==null?void 0:Dr.style,Fa=Ec=>{Ec(ke,"tox-fullscreen"),Ec(Be,"tox-fullscreen"),Ec(mn,"tox-fullscreen"),as(Co).map(Ia=>Ws(Ia).dom).each(Ia=>{Ec(Ia,"tox-fullscreen"),Ec(Ia,"tox-shadowhost")})},Zl=()=>{rr&&xu(K.dom),Fa(hm.removeClass),wl.unbind(),cn.from(se.get()).each(Ec=>Ec.fullscreenChangeHandler.unbind())};if(Eo)Eo.fullscreenChangeHandler.unbind(),_s(K)&&ho(pc)&&Bt(Zr(pc)),Or.width=Eo.iframeWidth,Or.height=Eo.iframeHeight,Pr.width=Eo.containerWidth,Pr.height=Eo.containerHeight,Pr.top=Eo.containerTop,Pr.left=Eo.containerLeft,Ke(Xs,Eo.sinkCssPosition,(Ec,Ia)=>{re(Ec,"position",Ia)}),Zl(),pr(Eo.scrollPos),se.set(null),nr(K,!1),K.off("remove",Zl);else{const Ec=tt(Zr(pc),oe(),oi=>{_s(K)&&!ho(pc)&&se.get()!==null&&hc(K,se)}),Ia={scrollPos:ug(),containerWidth:Pr.width,containerHeight:Pr.height,containerTop:Pr.top,containerLeft:Pr.left,iframeWidth:Or.width,iframeHeight:Or.height,fullscreenChangeHandler:Ec,sinkCssPosition:Xs.map(oi=>ze(oi,"position"))};rr&&ur(K.dom,Co,Xr),Or.width=Or.height="100%",Pr.width=Pr.height="",Fa(hm.addClass),Xs.each(oi=>{re(oi,"position","fixed")}),wl.bind(Co),K.on("remove",Zl),se.set(Ia),_s(K)&&Ne(pc),nr(K,!0)}},Tc=(K,se)=>{K.addCommand("mceFullScreen",()=>{hc(K,se)})};var Jc=tinymce.util.Tools.resolve("tinymce.util.VK");const Rd=(K,se)=>{K.on("init",()=>{K.on("keydown",ke=>{ke.keyCode===Jc.TAB&&!(ke.metaKey||ke.ctrlKey)&&se.get()&&ke.preventDefault()})})},No=(K,se)=>ke=>{ke.setActive(se.get()!==null);const Be=mn=>ke.setActive(mn.state);return K.on("FullscreenStateChanged",Be),()=>K.off("FullscreenStateChanged",Be)},ia=(K,se)=>{const ke=()=>K.execCommand("mceFullScreen");K.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ke,onSetup:No(K,se)}),K.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ke,onSetup:No(K,se),shortcut:"Meta+Shift+F"})};var Lc=()=>{uo.add("fullscreen",K=>{const se=Gt(null);return K.inline||(Su(K),Tc(K,se),ia(K,se),Rd(K,se),K.addShortcut("Meta+Shift+F","","mceFullScreen")),Fn(se)})};Lc()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=Object.getPrototypeOf,Fn=($,X,oe)=>{var Ne;return oe($,X.prototype)?!0:((Ne=$.constructor)===null||Ne===void 0?void 0:Ne.name)===X.name},eo=$=>{const X=typeof $;return $===null?"null":X==="object"&&Array.isArray($)?"array":X==="object"&&Fn($,String,(oe,Ne)=>Ne.isPrototypeOf(oe))?"string":X},Yn=$=>X=>eo(X)===$,ro=$=>X=>typeof X===$,In=$=>X=>$===X,We=($,X)=>Oo($)&&Fn($,X,(oe,Ne)=>uo(oe)===Ne),tn=Yn("string"),Oo=Yn("object"),Zo=$=>We($,Object),Do=Yn("array"),Ro=In(null),Nn=ro("boolean"),jo=$=>$==null,Wn=$=>!jo($),Ct=ro("function"),zn=ro("number"),Ue=($,X)=>{if(Do($)){for(let oe=0,Ne=$.length;oe<Ne;++oe)if(!X($[oe]))return!1;return!0}return!1},ee=()=>{};class st{constructor(X,oe){this.tag=X,this.value=oe}static some(X){return new st(!0,X)}static none(){return st.singletonNone}fold(X,oe){return this.tag?oe(this.value):X()}isSome(){return this.tag}isNone(){return!this.tag}map(X){return this.tag?st.some(X(this.value)):st.none()}bind(X){return this.tag?X(this.value):st.none()}exists(X){return this.tag&&X(this.value)}forall(X){return!this.tag||X(this.value)}filter(X){return!this.tag||X(this.value)?this:st.none()}getOr(X){return this.tag?this.value:X}or(X){return this.tag?this:X}getOrThunk(X){return this.tag?this.value:X()}orThunk(X){return this.tag?this:X()}getOrDie(X){if(this.tag)return this.value;throw new Error(X??"Called getOrDie on None")}static from(X){return Wn(X)?st.some(X):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(X){this.tag&&X(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const Zn=Object.keys,it=Object.hasOwnProperty,W=($,X)=>{const oe=Zn($);for(let Ne=0,Bt=oe.length;Ne<Bt;Ne++){const ho=oe[Ne],qt=$[ho];X(qt,ho)}},Dt=$=>(X,oe)=>{$[oe]=X},cn=($,X,oe,Ne)=>{W($,(Bt,ho)=>{(X(Bt,ho)?oe:Ne)(Bt,ho)})},xn=($,X)=>{const oe={};return cn($,X,Dt(oe),ee),oe},Re=($,X)=>it.call($,X),ie=($,X)=>Re($,X)&&$[X]!==void 0&&$[X]!==null,Go=Array.prototype.push,co=$=>{const X=[];for(let oe=0,Ne=$.length;oe<Ne;++oe){if(!Do($[oe]))throw new Error("Arr.flatten item "+oe+" was not an array, input: "+$);Go.apply(X,$[oe])}return X},Pt=($,X)=>X>=0&&X<$.length?st.some($[X]):st.none(),A=$=>Pt($,0),To=($,X)=>{for(let oe=0;oe<$.length;oe++){const Ne=X($[oe],oe);if(Ne.isSome())return Ne}return st.none()};typeof window<"u"||Function("return this;")();const rt=($,X,oe)=>{if(tn(oe)||Nn(oe)||zn(oe))$.setAttribute(X,oe+"");else throw console.error("Invalid call to Attribute.set. Key ",X,":: Value ",oe,":: Element ",$),new Error("Attribute value was not simple")},Ho=($,X,oe)=>{rt($.dom,X,oe)},Yt=($,X)=>{$.dom.removeAttribute(X)},Ke=($,X)=>{const Ne=(X||document).createElement("div");if(Ne.innerHTML=$,!Ne.hasChildNodes()||Ne.childNodes.length>1){const Bt="HTML does not have a single root node";throw console.error(Bt,$),new Error(Bt)}return ft(Ne.childNodes[0])},go=($,X)=>{const Ne=(X||document).createElement($);return ft(Ne)},Vs=($,X)=>{const Ne=(X||document).createTextNode($);return ft(Ne)},ft=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},Me={fromHtml:Ke,fromTag:go,fromText:Vs,fromDom:ft,fromPoint:($,X,oe)=>st.from($.dom.elementFromPoint(X,oe)).map(ft)};var Je=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),I=tinymce.util.Tools.resolve("tinymce.util.URI");const Ns=$=>$.length>0,ao=$=>X=>X.options.get($),bo=$=>{const X=$.options.register;X("image_dimensions",{processor:"boolean",default:!0}),X("image_advtab",{processor:"boolean",default:!1}),X("image_uploadtab",{processor:"boolean",default:!0}),X("image_prepend_url",{processor:"string",default:""}),X("image_class_list",{processor:"object[]"}),X("image_description",{processor:"boolean",default:!0}),X("image_title",{processor:"boolean",default:!1}),X("image_caption",{processor:"boolean",default:!1}),X("image_list",{processor:oe=>{const Ne=oe===!1||tn(oe)||Ue(oe,Oo)||Ct(oe);return Ne?{value:oe,valid:Ne}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},zo=ao("image_dimensions"),Gc=ao("image_advtab"),He=ao("image_uploadtab"),vt=ao("image_prepend_url"),je=ao("image_class_list"),ye=ao("image_description"),ln=ao("image_title"),vo=ao("image_caption"),Lt=ao("image_list"),hs=ao("a11y_advanced_options"),jn=ao("automatic_uploads"),fr=$=>Ns($.options.get("images_upload_url")),Vo=$=>Wn($.options.get("images_upload_handler")),xs=($,X)=>Math.max(parseInt($,10),parseInt(X,10)),oa=$=>new Promise(X=>{const oe=document.createElement("img"),Ne=ho=>{oe.onload=oe.onerror=null,oe.parentNode&&oe.parentNode.removeChild(oe),X(ho)};oe.onload=()=>{const ho=xs(oe.width,oe.clientWidth),qt=xs(oe.height,oe.clientHeight),or={width:ho,height:qt};Ne(Promise.resolve(or))},oe.onerror=()=>{Ne(Promise.reject(`Failed to get image dimensions for: ${$}`))};const Bt=oe.style;Bt.visibility="hidden",Bt.position="fixed",Bt.bottom=Bt.left="0px",Bt.width=Bt.height="auto",document.body.appendChild(oe),oe.src=$}),Us=$=>($&&($=$.replace(/px$/,"")),$),Bs=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),ps=$=>{if($.margin){const X=String($.margin).split(" ");switch(X.length){case 1:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[0],$["margin-bottom"]=$["margin-bottom"]||X[0],$["margin-left"]=$["margin-left"]||X[0];break;case 2:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[0],$["margin-left"]=$["margin-left"]||X[1];break;case 3:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[2],$["margin-left"]=$["margin-left"]||X[1];break;case 4:$["margin-top"]=$["margin-top"]||X[0],$["margin-right"]=$["margin-right"]||X[1],$["margin-bottom"]=$["margin-bottom"]||X[2],$["margin-left"]=$["margin-left"]||X[3]}delete $.margin}return $},wc=($,X)=>{const oe=Lt($);tn(oe)?fetch(oe).then(Ne=>{Ne.ok&&Ne.json().then(X)}):Ct(oe)?oe(X):X(oe)},cs=($,X,oe)=>{const Ne=()=>{oe.onload=oe.onerror=null,$.selection&&($.selection.select(oe),$.nodeChanged())};oe.onload=()=>{!X.width&&!X.height&&zo($)&&$.dom.setAttribs(oe,{width:String(oe.clientWidth),height:String(oe.clientHeight)}),Ne()},oe.onerror=Ne},ns=$=>new Promise((X,oe)=>{const Ne=new FileReader;Ne.onload=()=>{X(Ne.result)},Ne.onerror=()=>{var Bt;oe((Bt=Ne.error)===null||Bt===void 0?void 0:Bt.message)},Ne.readAsDataURL($)}),lr=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),lo=($,X)=>{const oe=$.options.get;return I.isDomSafe(X,"img",{allow_html_data_urls:oe("allow_html_data_urls"),allow_script_urls:oe("allow_script_urls"),allow_svg_data_urls:oe("allow_svg_data_urls")})},Cs=Je.DOM,gr=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?Us($.style.marginLeft):"",$c=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?Us($.style.marginTop):"",dc=$=>$.style.borderWidth?Us($.style.borderWidth):"",ws=($,X)=>{var oe;return $.hasAttribute(X)&&(oe=$.getAttribute(X))!==null&&oe!==void 0?oe:""},ir=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",ht=($,X,oe)=>{oe===""||oe===null?$.removeAttribute(X):$.setAttribute(X,oe)},Mo=$=>{const X=Cs.create("figure",{class:"image"});Cs.insertAfter(X,$),X.appendChild($),X.appendChild(Cs.create("figcaption",{contentEditable:"true"},"Caption")),X.contentEditable="false"},_r=$=>{const X=$.parentNode;Wn(X)&&(Cs.insertAfter($,X),Cs.remove(X))},Kr=$=>{ir($)?_r($):Mo($)},Zr=($,X)=>{const oe=$.getAttribute("style"),Ne=X(oe!==null?oe:"");Ne.length>0?($.setAttribute("style",Ne),$.setAttribute("data-mce-style",Ne)):$.removeAttribute("style")},Hr=($,X)=>(oe,Ne,Bt)=>{const ho=oe.style;ho[Ne]?(ho[Ne]=Bs(Bt),Zr(oe,X)):ht(oe,Ne,Bt)},Jo=($,X)=>$.style[X]?Us($.style[X]):ws($,X),sc=($,X)=>{const oe=Bs(X);$.style.marginLeft=oe,$.style.marginRight=oe},jr=($,X)=>{const oe=Bs(X);$.style.marginTop=oe,$.style.marginBottom=oe},os=($,X)=>{const oe=Bs(X);$.style.borderWidth=oe},un=($,X)=>{$.style.borderStyle=X},tr=$=>{var X;return(X=$.style.borderStyle)!==null&&X!==void 0?X:""},rc=$=>Wn($)&&$.nodeName==="FIGURE",Ga=$=>$.nodeName==="IMG",qa=$=>Cs.getAttrib($,"alt").length===0&&Cs.getAttrib($,"role")==="presentation",as=$=>qa($)?"":ws($,"alt"),Ws=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ps=($,X)=>{var oe;const Ne=document.createElement("img");return ht(Ne,"style",X.style),(gr(Ne)||X.hspace!=="")&&sc(Ne,X.hspace),($c(Ne)||X.vspace!=="")&&jr(Ne,X.vspace),(dc(Ne)||X.border!=="")&&os(Ne,X.border),(tr(Ne)||X.borderStyle!=="")&&un(Ne,X.borderStyle),$((oe=Ne.getAttribute("style"))!==null&&oe!==void 0?oe:"")},mc=($,X)=>{const oe=document.createElement("img");if(ze($,{...X,caption:!1},oe),de(oe,X.alt,X.isDecorative),X.caption){const Ne=Cs.create("figure",{class:"image"});return Ne.appendChild(oe),Ne.appendChild(Cs.create("figcaption",{contentEditable:"true"},"Caption")),Ne.contentEditable="false",Ne}else return oe},sa=($,X)=>({src:ws(X,"src"),alt:as(X),title:ws(X,"title"),width:Jo(X,"width"),height:Jo(X,"height"),class:ws(X,"class"),style:$(ws(X,"style")),caption:ir(X),hspace:gr(X),vspace:$c(X),border:dc(X),borderStyle:tr(X),isDecorative:qa(X)}),hr=($,X,oe,Ne,Bt)=>{oe[Ne]!==X[Ne]&&Bt($,Ne,String(oe[Ne]))},de=($,X,oe)=>{if(oe){Cs.setAttrib($,"role","presentation");const Ne=Me.fromDom($);Ho(Ne,"alt","")}else{if(Ro(X)){const Ne=Me.fromDom($);Yt(Ne,"alt")}else{const Ne=Me.fromDom($);Ho(Ne,"alt",X)}Cs.getAttrib($,"role")==="presentation"&&Cs.setAttrib($,"role","")}},re=($,X,oe)=>{(oe.alt!==X.alt||oe.isDecorative!==X.isDecorative)&&de($,oe.alt,oe.isDecorative)},Oe=($,X)=>(oe,Ne,Bt)=>{$(oe,Bt),Zr(oe,X)},ze=($,X,oe)=>{const Ne=sa($,oe);hr(oe,Ne,X,"caption",(Bt,ho,qt)=>Kr(Bt)),hr(oe,Ne,X,"src",ht),hr(oe,Ne,X,"title",ht),hr(oe,Ne,X,"width",Hr("width",$)),hr(oe,Ne,X,"height",Hr("height",$)),hr(oe,Ne,X,"class",ht),hr(oe,Ne,X,"style",Oe((Bt,ho)=>ht(Bt,"style",ho),$)),hr(oe,Ne,X,"hspace",Oe(sc,$)),hr(oe,Ne,X,"vspace",Oe(jr,$)),hr(oe,Ne,X,"border",Oe(os,$)),hr(oe,Ne,X,"borderStyle",Oe(un,$)),re(oe,Ne,X)},sn=($,X)=>{const oe=$.dom.styles.parse(X),Ne=ps(oe),Bt=$.dom.styles.parse($.dom.styles.serialize(Ne));return $.dom.styles.serialize(Bt)},vn=$=>{const X=$.selection.getNode(),oe=$.dom.getParent(X,"figure.image");return oe?$.dom.select("img",oe)[0]:X&&(X.nodeName!=="IMG"||lr(X))?null:X},Xn=($,X)=>{var oe;const Ne=$.dom,Bt=xn($.schema.getTextBlockElements(),(qt,or)=>!$.schema.isValidChild(or,"figure")),ho=Ne.getParent(X.parentNode,qt=>ie(Bt,qt.nodeName),$.getBody());return ho&&(oe=Ne.split(ho,X))!==null&&oe!==void 0?oe:X},Ts=$=>{const X=vn($);return X?sa(oe=>sn($,oe),X):Ws()},be=($,X)=>{const oe=mc(Bt=>sn($,Bt),X);$.dom.setAttrib(oe,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(oe.outerHTML);const Ne=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Ne,"data-mce-id",null),rc(Ne)){const Bt=Xn($,Ne);$.selection.select(Bt)}else $.selection.select(Ne)},Hn=($,X)=>{$.dom.setAttrib(X,"src",X.getAttribute("src"))},ue=($,X)=>{if(X){const oe=$.dom.is(X.parentNode,"figure.image")?X.parentNode:X;$.dom.remove(oe),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},fe=($,X)=>{const oe=vn($);if(oe)if(ze(Ne=>sn($,Ne),X,oe),Hn($,oe),rc(oe.parentNode)){const Ne=oe.parentNode;Xn($,Ne),$.selection.select(oe.parentNode)}else $.selection.select(oe),cs($,X,oe)},tt=($,X)=>{const oe=X.src;return{...X,src:lo($,oe)?oe:""}},lt=($,X)=>{const oe=vn($);if(oe){const Bt={...sa(qt=>sn($,qt),oe),...X},ho=tt($,Bt);Bt.src?fe($,ho):ue($,oe)}else X.src&&be($,{...Ws(),...X})},nn=($=>(...X)=>{if(X.length===0)throw new Error("Can't merge zero objects");const oe={};for(let Ne=0;Ne<X.length;Ne++){const Bt=X[Ne];for(const ho in Bt)Re(Bt,ho)&&(oe[ho]=$(oe[ho],Bt[ho]))}return oe})(($,X)=>Zo($)&&Zo(X)?nn($,X):X);var on=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),an=tinymce.util.Tools.resolve("tinymce.util.Tools");const yn=$=>tn($.value)?$.value:"",yo=$=>tn($.text)?$.text:tn($.title)?$.title:"",bs=($,X)=>{const oe=[];return an.each($,Ne=>{const Bt=yo(Ne);if(Ne.menu!==void 0){const ho=bs(Ne.menu,X);oe.push({text:Bt,items:ho})}else{const ho=X(Ne);oe.push({text:Bt,value:ho})}}),oe},Sc=($=yn)=>X=>X?st.from(X).map(oe=>bs(oe,$)):st.none(),ra=$=>Sc(yn)($),ca=$=>Re($,"items"),Bn=($,X)=>To($,oe=>ca(oe)?Bn(oe.items,X):oe.value===X?st.some(oe):st.none()),Qo={sanitizer:Sc,sanitize:ra,findEntry:($,X)=>$.bind(oe=>Bn(oe,X))},Br={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Zs=$=>{const X=Qo.sanitizer(sr=>$.convertURL(sr.value||sr.url||"","src")),oe=new Promise(sr=>{wc($,Wl=>{sr(X(Wl).map(ur=>co([[{text:"None",value:""}],ur])))})}),Ne=Qo.sanitize(je($)),Bt=Gc($),ho=He($),qt=fr($),or=Vo($),dt=Ts($),$s=ye($),Yc=ln($),Ys=zo($),zr=vo($),il=hs($),$o=jn($),Xc=st.some(vt($)).filter(sr=>tn(sr)&&sr.length>0);return oe.then(sr=>({image:dt,imageList:sr,classList:Ne,hasAdvTab:Bt,hasUploadTab:ho,hasUploadUrl:qt,hasUploadHandler:or,hasDescription:$s,hasImageTitle:Yc,hasDimensions:Ys,hasImageCaption:zr,prependURL:Xc,hasAccessibilityOptions:il,automaticUploads:$o}))},Es=$=>{const X={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},oe=$.imageList.map(Yc=>({name:"images",type:"listbox",label:"Image list",items:Yc})),Ne={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Bt={name:"title",type:"input",label:"Image title"},ho={name:"dimensions",type:"sizeinput"},qt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},or=$.classList.map(Yc=>({name:"classes",type:"listbox",label:"Class",items:Yc})),dt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},$s=Yc=>Yc?{type:"grid",columns:2}:{type:"panel"};return co([[X],oe.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[qt]:[],$.hasDescription?[Ne]:[],$.hasImageTitle?[Bt]:[],$.hasDimensions?[ho]:[],[{...$s($.classList.isSome()&&$.hasImageCaption),items:co([or.toArray(),$.hasImageCaption?[dt]:[]])}]])},Vl={makeTab:$=>({title:"General",name:"general",items:Es($)}),makeItems:Es},Yr={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ic=$=>({prevImage:Qo.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),Ar=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),aa=($,X)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&X?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),$a=($,X)=>/^(?:[a-zA-Z]+:)?\/\//.test(X)?st.none():$.prependURL.bind(oe=>X.substring(0,oe.length)!==oe?st.some(oe+X):st.none()),xc=($,X)=>{const oe=X.getData();$a($,oe.src.value).each(Ne=>{X.setData({src:{value:Ne,meta:oe.src.meta}})})},la=($,X,oe)=>{$.hasDescription&&tn(oe.alt)&&(X.alt=oe.alt),$.hasAccessibilityOptions&&(X.isDecorative=oe.isDecorative||X.isDecorative||!1),$.hasImageTitle&&tn(oe.title)&&(X.title=oe.title),$.hasDimensions&&(tn(oe.width)&&(X.dimensions.width=oe.width),tn(oe.height)&&(X.dimensions.height=oe.height)),tn(oe.class)&&Qo.findEntry($.classList,oe.class).each(Ne=>{X.classes=Ne.value}),$.hasImageCaption&&Nn(oe.caption)&&(X.caption=oe.caption),$.hasAdvTab&&(tn(oe.style)&&(X.style=oe.style),tn(oe.vspace)&&(X.vspace=oe.vspace),tn(oe.border)&&(X.border=oe.border),tn(oe.hspace)&&(X.hspace=oe.hspace),tn(oe.borderstyle)&&(X.borderstyle=oe.borderstyle))},wa=($,X)=>{const oe=X.getData(),Ne=oe.src.meta;if(Ne!==void 0){const Bt=nn({},oe);la($,Bt,Ne),X.setData(Bt)}},_i=($,X,oe,Ne)=>{const Bt=Ne.getData(),ho=Bt.src.value,qt=Bt.src.meta||{};!qt.width&&!qt.height&&X.hasDimensions&&(Ns(ho)?$.imageSize(ho).then(or=>{oe.open&&Ne.setData({dimensions:or})}).catch(or=>console.error(or)):Ne.setData({dimensions:{width:"",height:""}}))},qc=($,X,oe)=>{const Ne=oe.getData(),Bt=Qo.findEntry($.imageList,Ne.src.value);X.prevImage=Bt,oe.setData({images:Bt.map(ho=>ho.value).getOr("")})},ll=($,X,oe,Ne)=>{xc(X,Ne),wa(X,Ne),_i($,X,oe,Ne),qc(X,oe,Ne)},gc=($,X,oe,Ne)=>{const Bt=Ne.getData(),ho=Qo.findEntry(X.imageList,Bt.images);ho.each(qt=>{Bt.alt===""||oe.prevImage.map(dt=>dt.text===Bt.alt).getOr(!1)?qt.value===""?Ne.setData({src:qt,alt:oe.prevAlt}):Ne.setData({src:qt,alt:qt.text}):Ne.setData({src:qt})}),oe.prevImage=ho,ll($,X,oe,Ne)},Sa=($,X,oe,Ne)=>{const Bt=Ne.getData();Ne.block("Uploading image"),A(Bt.fileinput).fold(()=>{Ne.unblock()},ho=>{const qt=URL.createObjectURL(ho),or=()=>{Ne.unblock(),URL.revokeObjectURL(qt)},dt=$s=>{Ne.setData({src:{value:$s,meta:{}}}),Ne.showTab("general"),ll($,X,oe,Ne),Ne.focus("src")};ns(ho).then($s=>{const Yc=$.createBlobCache(ho,qt,$s);X.automaticUploads?$.uploadImage(Yc).then(Ys=>{dt(Ys.url),or()}).catch(Ys=>{or(),$.alertErr(Ys)}):($.addToBlobCache(Yc),dt(Yc.blobUri()),Ne.unblock())})})},Cl=($,X,oe)=>(Ne,Bt)=>{Bt.name==="src"?ll($,X,oe,Ne):Bt.name==="images"?gc($,X,oe,Ne):Bt.name==="alt"?oe.prevAlt=Ne.getData().alt:Bt.name==="fileinput"?Sa($,X,oe,Ne):Bt.name==="isDecorative"&&Ne.setEnabled("alt",!Ne.getData().isDecorative)},Ul=$=>()=>{$.open=!1},wu=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:co([[Vl.makeTab($)],$.hasAdvTab?[Br.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Yr.makeTab($)]:[]])}:{type:"panel",items:Vl.makeItems($)},Ai=($,X,oe)=>Ne=>{const Bt=nn(Ar(X.image),Ne.getData()),ho={...Bt,style:Ps(oe.normalizeCss,aa(Bt,!1))};$.execCommand("mceUpdateImage",!1,aa(ho,X.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Ne.close()},Kc=$=>X=>lo($,X)?oa($.documentBaseURI.toAbsolute(X)).then(oe=>({width:String(oe.width),height:String(oe.height)})):Promise.resolve({width:"",height:""}),Yi=$=>(X,oe,Ne)=>{var Bt;return $.editorUpload.blobCache.create({blob:X,blobUri:oe,name:(Bt=X.name)===null||Bt===void 0?void 0:Bt.replace(/\.[^\.]+$/,""),filename:X.name,base64:Ne.split(",")[1]})},U=$=>X=>{$.editorUpload.blobCache.add(X)},ce=$=>X=>{$.windowManager.alert(X)},we=$=>X=>sn($,X),qe=$=>X=>$.dom.parseStyle(X),gt=$=>(X,oe)=>$.dom.serializeStyle(X,oe),Qt=$=>X=>on($).upload([X],!1).then(oe=>{var Ne;return oe.length===0?Promise.reject("Failed to upload image"):oe[0].status===!1?Promise.reject((Ne=oe[0].error)===null||Ne===void 0?void 0:Ne.message):oe[0]}),xo=$=>{const X={imageSize:Kc($),addToBlobCache:U($),createBlobCache:Yi($),alertErr:ce($),normalizeCss:we($),parseStyle:qe($),serializeStyle:gt($),uploadImage:Qt($)};return{open:()=>{Zs($).then(Ne=>{const Bt=Ic(Ne);return{title:"Insert/Edit Image",size:"normal",body:wu(Ne),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ar(Ne.image),onSubmit:Ai($,Ne,X),onChange:Cl(X,Ne,Bt),onClose:Ul(Bt)}}).then($.windowManager.open)}}},Po=$=>{$.addCommand("mceImage",xo($).open),$.addCommand("mceUpdateImage",(X,oe)=>{$.undoManager.transact(()=>lt($,oe))})},so=$=>{const X=$.attr("class");return Wn(X)&&/\bimage\b/.test(X)},vs=$=>X=>{let oe=X.length;const Ne=Bt=>{Bt.attr("contenteditable",$?"true":null)};for(;oe--;){const Bt=X[oe];so(Bt)&&(Bt.attr("contenteditable",$?"false":null),an.each(Bt.getAll("figcaption"),Ne))}},nr=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",vs(!0)),$.serializer.addNodeFilter("figure",vs(!1))})},St=$=>X=>{const oe=()=>{X.setEnabled($.selection.isEditable())};return $.on("NodeChange",oe),oe(),()=>{$.off("NodeChange",oe)}},Su=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:xo($).open,onSetup:X=>{X.setActive(Wn(vn($)));const oe=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",X.setActive).unbind,Ne=St($)(X);return()=>{oe(),Ne()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:xo($).open,onSetup:St($)}),$.ui.registry.addContextMenu("image",{update:X=>$.selection.isEditable()&&(rc(X)||Ga(X)&&!lr(X))?["image"]:[]})};var _s=()=>{Gt.add("image",$=>{bo($),nr($),Su($),Po($)})};_s()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=it=>W=>W.options.get(it),Fn=it=>{const W=it.options.register;W("insertdatetime_dateformat",{processor:"string",default:it.translate("%Y-%m-%d")}),W("insertdatetime_timeformat",{processor:"string",default:it.translate("%H:%M:%S")}),W("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),W("insertdatetime_element",{processor:"boolean",default:!1})},eo=uo("insertdatetime_dateformat"),Yn=uo("insertdatetime_timeformat"),ro=uo("insertdatetime_formats"),In=uo("insertdatetime_element"),We=it=>{const W=ro(it);return W.length>0?W[0]:Yn(it)},tn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Oo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Zo="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Do="January February March April May June July August September October November December".split(" "),Ro=(it,W)=>{if(it=""+it,it.length<W)for(let Dt=0;Dt<W-it.length;Dt++)it="0"+it;return it},Nn=(it,W,Dt=new Date)=>(W=W.replace("%D","%m/%d/%Y"),W=W.replace("%r","%I:%M:%S %p"),W=W.replace("%Y",""+Dt.getFullYear()),W=W.replace("%y",""+Dt.getYear()),W=W.replace("%m",Ro(Dt.getMonth()+1,2)),W=W.replace("%d",Ro(Dt.getDate(),2)),W=W.replace("%H",""+Ro(Dt.getHours(),2)),W=W.replace("%M",""+Ro(Dt.getMinutes(),2)),W=W.replace("%S",""+Ro(Dt.getSeconds(),2)),W=W.replace("%I",""+((Dt.getHours()+11)%12+1)),W=W.replace("%p",Dt.getHours()<12?"AM":"PM"),W=W.replace("%B",""+it.translate(Do[Dt.getMonth()])),W=W.replace("%b",""+it.translate(Zo[Dt.getMonth()])),W=W.replace("%A",""+it.translate(Oo[Dt.getDay()])),W=W.replace("%a",""+it.translate(tn[Dt.getDay()])),W=W.replace("%%","%"),W),jo=(it,W,Dt,cn)=>{const xn=it.dom.create("time",{datetime:Dt},cn);it.dom.replace(xn,W),it.selection.select(xn,!0),it.selection.collapse(!1)},Wn=(it,W)=>{if(In(it)){const Dt=Nn(it,W);let cn;/%[HMSIp]/.test(W)?cn=Nn(it,"%Y-%m-%dT%H:%M"):cn=Nn(it,"%Y-%m-%d");const xn=it.dom.getParent(it.selection.getStart(),"time");xn?jo(it,xn,cn,Dt):it.insertContent('<time datetime="'+cn+'">'+Dt+"</time>")}else it.insertContent(Nn(it,W))},Ct=it=>{it.addCommand("mceInsertDate",(W,Dt)=>{Wn(it,Dt??eo(it))}),it.addCommand("mceInsertTime",(W,Dt)=>{Wn(it,Dt??Yn(it))})},zn=it=>{let W=it;return{get:()=>W,set:xn=>{W=xn}}};var Ue=tinymce.util.Tools.resolve("tinymce.util.Tools");const ee=it=>W=>{const Dt=()=>{W.setEnabled(it.selection.isEditable())};return it.on("NodeChange",Dt),Dt(),()=>{it.off("NodeChange",Dt)}},st=it=>{const W=ro(it),Dt=zn(We(it)),cn=Re=>it.execCommand("mceInsertDate",!1,Re);it.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Re=>Re===Dt.get(),fetch:Re=>{Re(Ue.map(W,ie=>({type:"choiceitem",text:Nn(it,ie),value:ie})))},onAction:Re=>{cn(Dt.get())},onItemAction:(Re,ie)=>{Dt.set(ie),cn(ie)},onSetup:ee(it)});const xn=Re=>()=>{Dt.set(Re),cn(Re)};it.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Ue.map(W,Re=>({type:"menuitem",text:Nn(it,Re),onAction:xn(Re)})),onSetup:ee(it)})};var Zn=()=>{Gt.add("insertdatetime",it=>{Fn(it),Ct(it),st(it)})};Zn()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=(U,ce,we)=>{var qe;return we(U,ce.prototype)?!0:((qe=U.constructor)===null||qe===void 0?void 0:qe.name)===ce.name},Fn=U=>{const ce=typeof U;return U===null?"null":ce==="object"&&Array.isArray(U)?"array":ce==="object"&&uo(U,String,(we,qe)=>qe.isPrototypeOf(we))?"string":ce},eo=U=>ce=>Fn(ce)===U,Yn=U=>ce=>typeof ce===U,ro=U=>ce=>U===ce,In=eo("string"),We=eo("object"),tn=eo("array"),Oo=ro(null),Zo=Yn("boolean"),Do=U=>U==null,Ro=U=>!Do(U),Nn=Yn("function"),jo=(U,ce)=>{if(tn(U)){for(let we=0,qe=U.length;we<qe;++we)if(!ce(U[we]))return!1;return!0}return!1},Wn=()=>{},Ct=U=>()=>U,zn=(U,ce)=>U===ce;class Ue{constructor(ce,we){this.tag=ce,this.value=we}static some(ce){return new Ue(!0,ce)}static none(){return Ue.singletonNone}fold(ce,we){return this.tag?we(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Ue.some(ce(this.value)):Ue.none()}bind(ce){return this.tag?ce(this.value):Ue.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Ue.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return Ro(ce)?Ue.some(ce):Ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ue.singletonNone=new Ue(!1);const ee=Array.prototype.indexOf,st=Array.prototype.push,Zn=(U,ce)=>ee.call(U,ce),it=(U,ce)=>Zn(U,ce)>-1,W=(U,ce)=>{const we=U.length,qe=new Array(we);for(let gt=0;gt<we;gt++){const Qt=U[gt];qe[gt]=ce(Qt,gt)}return qe},Dt=(U,ce)=>{for(let we=0,qe=U.length;we<qe;we++){const gt=U[we];ce(gt,we)}},cn=(U,ce,we)=>(Dt(U,(qe,gt)=>{we=ce(we,qe,gt)}),we),xn=U=>{const ce=[];for(let we=0,qe=U.length;we<qe;++we){if(!tn(U[we]))throw new Error("Arr.flatten item "+we+" was not an array, input: "+U);st.apply(ce,U[we])}return ce},Re=(U,ce)=>xn(W(U,ce)),ie=(U,ce)=>{for(let we=0;we<U.length;we++){const qe=ce(U[we],we);if(qe.isSome())return qe}return Ue.none()},Go=(U,ce,we=zn)=>U.exists(qe=>we(qe,ce)),co=U=>{const ce=[],we=qe=>{ce.push(qe)};for(let qe=0;qe<U.length;qe++)U[qe].each(we);return ce},Pt=(U,ce)=>U?Ue.some(ce):Ue.none(),A=U=>ce=>ce.options.get(U),To=U=>{const ce=U.options.register;ce("link_assume_external_targets",{processor:we=>{const qe=In(we)||Zo(we);return qe?we===!0?{value:1,valid:qe}:we==="http"||we==="https"?{value:we,valid:qe}:{value:0,valid:qe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ce("link_context_toolbar",{processor:"boolean",default:!1}),ce("link_list",{processor:we=>In(we)||Nn(we)||jo(we,We)}),ce("link_default_target",{processor:"string"}),ce("link_default_protocol",{processor:"string",default:"https"}),ce("link_target_list",{processor:we=>Zo(we)||jo(we,We),default:!0}),ce("link_rel_list",{processor:"object[]",default:[]}),ce("link_class_list",{processor:"object[]",default:[]}),ce("link_title",{processor:"boolean",default:!0}),ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),ce("link_quicklink",{processor:"boolean",default:!1})},rt=A("link_assume_external_targets"),Ho=A("link_context_toolbar"),Yt=A("link_list"),Ke=A("link_default_target"),go=A("link_default_protocol"),Vs=A("link_target_list"),ft=A("link_rel_list"),pn=A("link_class_list"),Me=A("link_title"),Je=A("allow_unsafe_link_target"),I=A("link_quicklink"),Ns=Object.keys,ao=Object.hasOwnProperty,bo=(U,ce)=>{const we=Ns(U);for(let qe=0,gt=we.length;qe<gt;qe++){const Qt=we[qe],xo=U[Qt];ce(xo,Qt)}},zo=U=>(ce,we)=>{U[we]=ce},Gc=(U,ce,we,qe)=>{bo(U,(gt,Qt)=>{(ce(gt,Qt)?we:qe)(gt,Qt)})},He=(U,ce)=>{const we={};return Gc(U,ce,zo(we),Wn),we},vt=(U,ce)=>ao.call(U,ce),je=(U,ce)=>vt(U,ce)&&U[ce]!==void 0&&U[ce]!==null;var ye=tinymce.util.Tools.resolve("tinymce.util.URI"),ln=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),vo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lt=U=>Ro(U)&&U.nodeName.toLowerCase()==="a",hs=U=>Lt(U)&&!!Vo(U),jn=(U,ce)=>{if(U.collapsed)return[];{const we=U.cloneContents(),qe=we.firstChild,gt=new ln(qe,we),Qt=[];let xo=qe;do ce(xo)&&Qt.push(xo);while(xo=gt.next());return Qt}},fr=U=>/^\w+:/i.test(U),Vo=U=>{var ce,we;return(we=(ce=U.getAttribute("data-mce-href"))!==null&&ce!==void 0?ce:U.getAttribute("href"))!==null&&we!==void 0?we:""},xs=(U,ce)=>{const we=["noopener"],qe=U?U.split(/\s+/):[],gt=so=>vo.trim(so.sort().join(" ")),Qt=so=>(so=xo(so),so.length>0?so.concat(we):we),xo=so=>so.filter(vs=>vo.inArray(we,vs)===-1),Po=ce?Qt(qe):xo(qe);return Po.length>0?gt(Po):""},oa=U=>U.replace(/\uFEFF/g,""),Us=(U,ce)=>(ce=ce||wc(U.selection.getRng())[0]||U.selection.getNode(),Cs(ce)?Ue.from(U.dom.select("a[href]",ce)[0]):Ue.from(U.dom.getParent(ce,"a[href]"))),Bs=(U,ce)=>Us(U,ce).isSome(),ps=(U,ce)=>{const we=ce.fold(()=>U.getContent({format:"text"}),qe=>qe.innerText||qe.textContent||"");return oa(we)},wc=U=>jn(U,hs),cs=U=>vo.grep(U,hs),ns=U=>cs(U).length>0,lr=U=>wc(U).length>0,lo=U=>{const ce=U.schema.getTextInlineElements(),we=Qt=>Qt.nodeType===1&&!Lt(Qt)&&!vt(ce,Qt.nodeName.toLowerCase());if(Us(U).exists(Qt=>Qt.hasAttribute("data-mce-block")))return!1;const gt=U.selection.getRng();return gt.collapsed?!0:jn(gt,we).length===0},Cs=U=>Ro(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),gr=U=>cn(["title","rel","class","target"],(we,qe)=>(U[qe].each(gt=>{we[qe]=gt.length>0?gt:null}),we),{href:U.href}),$c=(U,ce)=>(ce==="http"||ce==="https")&&!fr(U)?ce+"://"+U:U,dc=(U,ce)=>{const we={...ce};if(ft(U).length===0&&!Je(U)){const qe=xs(we.rel,we.target==="_blank");we.rel=qe||null}return Ue.from(we.target).isNone()&&Vs(U)===!1&&(we.target=Ke(U)),we.href=$c(we.href,rt(U)),we},ws=(U,ce,we,qe)=>{we.each(gt=>{vt(ce,"innerText")?ce.innerText=gt:ce.textContent=gt}),U.dom.setAttribs(ce,qe),U.selection.select(ce)},ir=(U,ce,we,qe)=>{const gt=U.dom;Cs(ce)?jr(gt,ce,qe):we.fold(()=>{U.execCommand("mceInsertLink",!1,qe)},Qt=>{U.insertContent(gt.createHTML("a",qe,gt.encode(Qt)))})},ht=(U,ce,we)=>{const qe=U.selection.getNode(),gt=Us(U,qe),Qt=dc(U,gr(we));U.undoManager.transact(()=>{we.href===ce.href&&ce.attach(),gt.fold(()=>{ir(U,qe,we.text,Qt)},xo=>{U.focus(),ws(U,xo,we.text,Qt)})})},Mo=U=>{const ce=U.dom,we=U.selection,qe=we.getBookmark(),gt=we.getRng().cloneRange(),Qt=ce.getParent(gt.startContainer,"a[href]",U.getBody()),xo=ce.getParent(gt.endContainer,"a[href]",U.getBody());Qt&&gt.setStartBefore(Qt),xo&&gt.setEndAfter(xo),we.setRng(gt),U.execCommand("unlink"),we.moveToBookmark(qe)},_r=U=>{U.undoManager.transact(()=>{const ce=U.selection.getNode();Cs(ce)?sc(U,ce):Mo(U),U.focus()})},Kr=U=>{const{class:ce,href:we,rel:qe,target:gt,text:Qt,title:xo}=U;return He({class:ce.getOrNull(),href:we,rel:qe.getOrNull(),target:gt.getOrNull(),text:Qt.getOrNull(),title:xo.getOrNull()},(Po,so)=>Oo(Po)===!1)},Zr=(U,ce)=>{const we=U.options.get,qe={allow_html_data_urls:we("allow_html_data_urls"),allow_script_urls:we("allow_script_urls"),allow_svg_data_urls:we("allow_svg_data_urls")},gt=ce.href;return{...ce,href:ye.isDomSafe(gt,"a",qe)?gt:""}},Hr=(U,ce,we)=>{const qe=Zr(U,we);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,Kr(qe)):ht(U,ce,qe)},Jo=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):_r(U)},sc=(U,ce)=>{var we;const qe=U.dom.select("img",ce)[0];if(qe){const gt=U.dom.getParents(qe,"a[href]",ce)[0];gt&&((we=gt.parentNode)===null||we===void 0||we.insertBefore(qe,gt),U.dom.remove(gt))}},jr=(U,ce,we)=>{var qe;const gt=U.select("img",ce)[0];if(gt){const Qt=U.create("a",we);(qe=gt.parentNode)===null||qe===void 0||qe.insertBefore(Qt,gt),Qt.appendChild(gt)}},os=U=>In(U.value)?U.value:"",un=U=>In(U.text)?U.text:In(U.title)?U.title:"",tr=(U,ce)=>{const we=[];return vo.each(U,qe=>{const gt=un(qe);if(qe.menu!==void 0){const Qt=tr(qe.menu,ce);we.push({text:gt,items:Qt})}else{const Qt=ce(qe);we.push({text:gt,value:Qt})}}),we},rc=(U=os)=>ce=>Ue.from(ce).map(we=>tr(we,U)),as={sanitize:U=>rc(os)(U),sanitizeWith:rc,createUi:(U,ce)=>we=>({name:U,type:"listbox",label:ce,items:we}),getValue:os},Ws=U=>je(U,"items"),Ps=(U,ce)=>ie(ce,we=>Ws(we)?Ps(U,we.items):Pt(we.value===U,we)),mc=(U,ce,we,qe)=>{const gt=qe[ce],Qt=U.length>0;return gt!==void 0?Ps(gt,we).map(xo=>({url:{value:xo.value,meta:{text:Qt?U:xo.text,attach:Wn}},text:Qt?U:xo.text})):Ue.none()},sa=(U,ce)=>ce==="link"?U.link:ce==="anchor"?U.anchor:Ue.none(),de={init:(U,ce)=>{const we={text:U.text,title:U.title},qe=so=>{var vs;return Pt(we.title.length<=0,Ue.from((vs=so.meta)===null||vs===void 0?void 0:vs.title).getOr(""))},gt=so=>{var vs;return Pt(we.text.length<=0,Ue.from((vs=so.meta)===null||vs===void 0?void 0:vs.text).getOr(so.value))},Qt=so=>{const vs=gt(so.url),nr=qe(so.url);return vs.isSome()||nr.isSome()?Ue.some({...vs.map(St=>({text:St})).getOr({}),...nr.map(St=>({title:St})).getOr({})}):Ue.none()},xo=(so,vs)=>{const nr=sa(ce,vs).getOr([]);return mc(we.text,vs,nr,so)};return{onChange:(so,vs)=>{const nr=vs.name;return nr==="url"?Qt(so()):it(["anchor","link"],nr)?xo(so(),nr):((nr==="text"||nr==="title")&&(we[nr]=so()[nr]),Ue.none())}}},getDelta:mc};var re=tinymce.util.Tools.resolve("tinymce.util.Delay");const Oe=(U,ce,we)=>{const qe=U.selection.getRng();re.setEditorTimeout(U,()=>{U.windowManager.confirm(ce,gt=>{U.selection.setRng(qe),we(gt)})})},ze=U=>{const ce=U.href;return ce.indexOf("@")>0&&ce.indexOf("/")===-1&&ce.indexOf("mailto:")===-1?Ue.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:qe=>({...qe,href:"mailto:"+ce})}):Ue.none()},sn=(U,ce)=>we=>{const qe=we.href;return U===1&&!fr(qe)||U===0&&/^\s*www(\.|\d\.)/i.test(qe)?Ue.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ce}:// prefix?`,preprocess:Qt=>({...Qt,href:ce+"://"+qe})}):Ue.none()},Xn={preprocess:(U,ce)=>ie([ze,sn(rt(U),go(U))],we=>we(ce)).fold(()=>Promise.resolve(ce),we=>new Promise(qe=>{Oe(U,we.message,gt=>{qe(gt?we.preprocess(ce):ce)})}))},be={getAnchors:U=>{const ce=U.dom.select("a:not([href])"),we=Re(ce,qe=>{const gt=qe.name||qe.id;return gt?[{text:gt,value:"#"+gt}]:[]});return we.length>0?Ue.some([{text:"None",value:""}].concat(we)):Ue.none()}},ue={getClasses:U=>{const ce=pn(U);return ce.length>0?as.sanitize(ce):Ue.none()}},fe=U=>{try{return Ue.some(JSON.parse(U))}catch{return Ue.none()}},lt={getLinks:U=>{const ce=qe=>U.convertURL(qe.value||qe.url||"","href"),we=Yt(U);return new Promise(qe=>{In(we)?fetch(we).then(gt=>gt.ok?gt.text().then(fe):Promise.reject()).then(qe,()=>qe(Ue.none())):Nn(we)?we(gt=>qe(Ue.some(gt))):qe(Ue.from(we))}).then(qe=>qe.bind(as.sanitizeWith(ce)).map(gt=>gt.length>0?[{text:"None",value:""}].concat(gt):gt))}},dn={getRels:(U,ce)=>{const we=ft(U);if(we.length>0){const qe=Go(ce,"_blank"),gt=Je(U)===!1,Qt=Po=>xs(as.getValue(Po),qe);return(gt?as.sanitizeWith(Qt):as.sanitize)(we)}return Ue.none()}},nn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],an={getTargets:U=>{const ce=Vs(U);return tn(ce)?as.sanitize(ce).orThunk(()=>Ue.some(nn)):ce===!1?Ue.none():Ue.some(nn)}},yn=(U,ce,we)=>{const qe=U.getAttrib(ce,we);return qe!==null&&qe.length>0?Ue.some(qe):Ue.none()},yo=(U,ce)=>{const we=U.dom,gt=lo(U)?Ue.some(ps(U.selection,ce)):Ue.none(),Qt=ce.bind(nr=>Ue.from(we.getAttrib(nr,"href"))),xo=ce.bind(nr=>Ue.from(we.getAttrib(nr,"target"))),Po=ce.bind(nr=>yn(we,nr,"rel")),so=ce.bind(nr=>yn(we,nr,"class")),vs=ce.bind(nr=>yn(we,nr,"title"));return{url:Qt,text:gt,title:vs,target:xo,rel:Po,linkClass:so}},Sc={collect:(U,ce)=>lt.getLinks(U).then(we=>{const qe=yo(U,ce);return{anchor:qe,catalogs:{targets:an.getTargets(U),rels:dn.getRels(U,qe.target),classes:ue.getClasses(U),anchor:be.getAnchors(U),link:we},optNode:ce,flags:{titleEnabled:Me(U)}}})},ra=(U,ce)=>we=>{const qe=we.getData();if(!qe.url.value){Jo(U),we.close();return}const gt=Po=>Ue.from(qe[Po]).filter(so=>!Go(ce.anchor[Po],so)),Qt={href:qe.url.value,text:gt("text"),target:gt("target"),rel:gt("rel"),class:gt("linkClass"),title:gt("title")},xo={href:qe.url.value,attach:qe.url.meta!==void 0&&qe.url.meta.attach?qe.url.meta.attach:Wn};Xn.preprocess(U,Qt).then(Po=>{Hr(U,xo,Po)}),we.close()},ca=U=>{const ce=Us(U);return Sc.collect(U,ce)},Bn=(U,ce)=>{const we=U.anchor,qe=we.url.getOr("");return{url:{value:qe,meta:{original:{value:qe}}},text:we.text.getOr(""),title:we.title.getOr(""),anchor:qe,link:qe,rel:we.rel.getOr(""),target:we.target.or(ce).getOr(""),linkClass:we.linkClass.getOr("")}},mo=(U,ce,we)=>{const qe=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],gt=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Qt=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],xo=Ue.from(Ke(we)),Po=Bn(U,xo),so=U.catalogs,vs=de.init(Po,so);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:xn([qe,gt,Qt,co([so.anchor.map(as.createUi("anchor","Anchors")),so.rels.map(as.createUi("rel","Rel")),so.targets.map(as.createUi("target","Open link in...")),so.link.map(as.createUi("link","Link list")),so.classes.map(as.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Po,onChange:(St,{name:Su})=>{vs.onChange(St.getData,{name:Su}).each(_s=>{St.setData(_s)})},onSubmit:ce}},Qo=U=>{ca(U).then(we=>{const qe=ra(U,we);return mo(we,qe,U)}).then(we=>{U.windowManager.open(we)})},fc=U=>{U.addCommand("mceLink",(ce,we)=>{(we==null?void 0:we.dialog)===!0||!I(U)?Qo(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Br=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})},Zs=U=>{let ce=U;return{get:()=>ce,set:gt=>{ce=gt}}},Es=U=>{const ce=Zs(Ue.none()),we=()=>ce.get().each(U);return{clear:()=>{we(),ce.set(Ue.none())},isSet:()=>ce.get().isSome(),get:()=>ce.get(),set:Po=>{we(),ce.set(Ue.some(Po))}}},Fc=()=>{const U=Es(Wn);return{...U,on:we=>U.get().each(we)}};var Vl=tinymce.util.Tools.resolve("tinymce.util.VK");const ss=(U,ce)=>{document.body.appendChild(U),U.dispatchEvent(ce),document.body.removeChild(U)},Yr=U=>{const ce=document.createElement("a");ce.target="_blank",ce.href=U,ce.rel="noreferrer noopener";const we=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(we),ss(ce,we)},Ic=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,Ar=(U,ce)=>{if(ce){const we=Vo(ce);if(/^#/.test(we)){const qe=U.dom.select(we);qe.length&&U.selection.scrollIntoView(qe[0],!0)}else Yr(ce.href)}},aa=U=>{const ce=U.selection.getRng(),we=ce.startContainer;return hs(we)&&ce.startContainer===ce.endContainer&&U.dom.select("img",we).length===1},$a=(U,ce)=>{const we=cs(U.dom.getParents(ce));return Pt(we.length===1,we[0])},xc=U=>{const ce=wc(U.selection.getRng());return Pt(ce.length>0,ce[0]).or($a(U,U.selection.getNode()))},la=U=>U.selection.isCollapsed()||aa(U)?$a(U,U.selection.getStart()):xc(U),wa=U=>{const ce=Fc(),we=()=>ce.get().or(la(U)),qe=()=>we().each(gt=>Ar(U,gt));return U.on("contextmenu",gt=>{$a(U,gt.target).each(ce.set)}),U.on("SelectionChange",()=>{ce.isSet()||la(U).each(ce.set)}),U.on("click",gt=>{ce.clear();const Qt=cs(U.dom.getParents(gt.target));Qt.length===1&&Vl.metaKeyPressed(gt)&&(gt.preventDefault(),Ar(U,Qt[0]))}),U.on("keydown",gt=>{ce.clear(),!gt.isDefaultPrevented()&&gt.keyCode===13&&Ic(gt)&&we().each(Qt=>{gt.preventDefault(),Ar(U,Qt)})}),{gotoSelectedLink:qe}},_i=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},qc=(U,ce)=>(U.on("NodeChange",ce),()=>U.off("NodeChange",ce)),ll=U=>ce=>{const we=()=>{ce.setActive(!U.mode.isReadOnly()&&Bs(U,U.selection.getNode())),ce.setEnabled(U.selection.isEditable())};return we(),qc(U,we)},gc=U=>ce=>{const we=()=>{ce.setEnabled(U.selection.isEditable())};return we(),qc(U,we)},Sa=U=>ce=>{const we=Qt=>ns(Qt)||lr(U.selection.getRng()),qe=U.dom.getParents(U.selection.getStart()),gt=Qt=>{ce.setEnabled(we(Qt)&&U.selection.isEditable())};return gt(qe),qc(U,Qt=>gt(Qt.parents))},Cl=(U,ce)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:_i(U),onSetup:ll(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ce.gotoSelectedLink,onSetup:Sa(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Jo(U),onSetup:Sa(U)})},Ul=(U,ce)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ce.gotoSelectedLink,onSetup:Sa(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:_i(U),onSetup:gc(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Jo(U),onSetup:Sa(U)})},wu=U=>{const ce="link unlink openlink",we="link";U.ui.registry.addContextMenu("link",{update:qe=>U.dom.isEditable(qe)?ns(U.dom.getParents(qe,"a"))?ce:we:""})},Ai=(U,ce)=>{const we=Qt=>{Qt.selection.collapse(!1)},qe=Qt=>{const xo=U.selection.getNode();return Qt.setEnabled(Bs(U,xo)),Wn},gt=Qt=>{const xo=Us(U),Po=lo(U);if(xo.isNone()&&Po){const so=ps(U.selection,xo);return Pt(so.length===0,Qt)}else return Ue.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ll(U)},label:"Link",predicate:Qt=>Ho(U)&&Bs(U,Qt),initValue:()=>Us(U).fold(Ct(""),Vo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Qt=>{const xo=U.selection.getNode();return Qt.setActive(Bs(U,xo)),ll(U)(Qt)},onAction:Qt=>{const xo=Qt.getValue(),Po=gt(xo);Hr(U,{href:xo,attach:Wn},{href:xo,text:Po,title:Ue.none(),rel:Ue.none(),target:Ue.from(Ke(U)),class:Ue.none()}),we(U),Qt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:qe,onAction:Qt=>{Jo(U),Qt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:qe,onAction:Qt=>{ce.gotoSelectedLink(),Qt.hide()}}]})},Kc=U=>{const ce=wa(U);Cl(U,ce),Ul(U,ce),wu(U),Ai(U,ce)};var Yi=()=>{Gt.add("link",U=>{To(U),fc(U),Kc(U),Br(U)})};Yi()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=(x,R,z)=>{var ae;return z(x,R.prototype)?!0:((ae=x.constructor)===null||ae===void 0?void 0:ae.name)===R.name},Fn=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&uo(x,String,(z,ae)=>ae.isPrototypeOf(z))?"string":R},eo=x=>R=>Fn(R)===x,Yn=x=>R=>typeof R===x,ro=eo("string"),In=eo("object"),We=eo("array"),tn=Yn("boolean"),Oo=x=>x==null,Zo=x=>!Oo(x),Do=Yn("function"),Ro=Yn("number"),Nn=()=>{},jo=(x,R)=>z=>x(R(z)),Wn=x=>()=>x,Ct=(x,R)=>x===R;function zn(x,...R){return(...z)=>{const ae=R.concat(z);return x.apply(null,ae)}}const Ue=x=>R=>!x(R),ee=Wn(!1);class st{constructor(R,z){this.tag=R,this.value=z}static some(R){return new st(!0,R)}static none(){return st.singletonNone}fold(R,z){return this.tag?z(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?st.some(R(this.value)):st.none()}bind(R){return this.tag?R(this.value):st.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:st.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Zo(R)?st.some(R):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const Zn=Array.prototype.slice,it=Array.prototype.indexOf,W=Array.prototype.push,Dt=(x,R)=>it.call(x,R),cn=(x,R)=>Dt(x,R)>-1,xn=(x,R)=>{for(let z=0,ae=x.length;z<ae;z++){const pe=x[z];if(R(pe,z))return!0}return!1},Re=(x,R)=>{const z=x.length,ae=new Array(z);for(let pe=0;pe<z;pe++){const nt=x[pe];ae[pe]=R(nt,pe)}return ae},ie=(x,R)=>{for(let z=0,ae=x.length;z<ae;z++){const pe=x[z];R(pe,z)}},Go=(x,R)=>{const z=[];for(let ae=0,pe=x.length;ae<pe;ae++){const nt=x[ae];R(nt,ae)&&z.push(nt)}return z},co=(x,R)=>{if(x.length===0)return[];{let z=R(x[0]);const ae=[];let pe=[];for(let nt=0,_n=x.length;nt<_n;nt++){const Jn=x[nt],Gn=R(Jn);Gn!==z&&(ae.push(pe),pe=[]),z=Gn,pe.push(Jn)}return pe.length!==0&&ae.push(pe),ae}},Pt=(x,R,z)=>(ie(x,(ae,pe)=>{z=R(z,ae,pe)}),z),A=(x,R,z)=>{for(let ae=0,pe=x.length;ae<pe;ae++){const nt=x[ae];if(R(nt,ae))return st.some(nt);if(z(nt,ae))break}return st.none()},To=(x,R)=>A(x,R,ee),rt=x=>{const R=[];for(let z=0,ae=x.length;z<ae;++z){if(!We(x[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+x);W.apply(R,x[z])}return R},Ho=(x,R)=>rt(Re(x,R)),Yt=x=>{const R=Zn.call(x,0);return R.reverse(),R},Ke=(x,R)=>R>=0&&R<x.length?st.some(x[R]):st.none(),go=x=>Ke(x,0),Vs=x=>Ke(x,x.length-1),ft=(x,R)=>{const z=[],ae=Do(R)?pe=>xn(z,nt=>R(nt,pe)):pe=>cn(z,pe);for(let pe=0,nt=x.length;pe<nt;pe++){const _n=x[pe];ae(_n)||z.push(_n)}return z},pn=(x,R,z=Ct)=>x.exists(ae=>z(ae,R)),Me=(x,R,z=Ct)=>Je(x,R,z).getOr(x.isNone()&&R.isNone()),Je=(x,R,z)=>x.isSome()&&R.isSome()?st.some(z(x.getOrDie(),R.getOrDie())):st.none(),I=8,Ns=9,ao=11,bo=1,zo=3,Gc=(x,R)=>{const ae=(R||document).createElement("div");if(ae.innerHTML=x,!ae.hasChildNodes()||ae.childNodes.length>1){const pe="HTML does not have a single root node";throw console.error(pe,x),new Error(pe)}return je(ae.childNodes[0])},He=(x,R)=>{const ae=(R||document).createElement(x);return je(ae)},vt=(x,R)=>{const ae=(R||document).createTextNode(x);return je(ae)},je=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},ln={fromHtml:Gc,fromTag:He,fromText:vt,fromDom:je,fromPoint:(x,R,z)=>st.from(x.dom.elementFromPoint(R,z)).map(je)},vo=(x,R)=>{const z=x.dom;if(z.nodeType!==bo)return!1;{const ae=z;if(ae.matches!==void 0)return ae.matches(R);if(ae.msMatchesSelector!==void 0)return ae.msMatchesSelector(R);if(ae.webkitMatchesSelector!==void 0)return ae.webkitMatchesSelector(R);if(ae.mozMatchesSelector!==void 0)return ae.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Lt=(x,R)=>x.dom===R.dom,hs=(x,R)=>{const z=x.dom,ae=R.dom;return z===ae?!1:z.contains(ae)},jn=vo,fr=typeof window<"u"?window:Function("return this;")(),Vo=(x,R)=>{let z=R??fr;for(let ae=0;ae<x.length&&z!==void 0&&z!==null;++ae)z=z[x[ae]];return z},xs=(x,R)=>{const z=x.split(".");return Vo(z,R)},oa=(x,R)=>xs(x,R),Us=(x,R)=>{const z=oa(x,R);if(z==null)throw new Error(x+" not available on this browser");return z},Bs=Object.getPrototypeOf,ps=x=>Us("HTMLElement",x),wc=x=>{const R=xs("ownerDocument.defaultView",x);return In(x)&&(ps(R).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(Bs(x).constructor.name))},cs=x=>x.dom.nodeName.toLowerCase(),ns=x=>x.dom.nodeType,lr=x=>R=>ns(R)===x,lo=x=>ns(x)===I||cs(x)==="#comment",Cs=x=>gr(x)&&wc(x.dom),gr=lr(bo),$c=lr(zo),dc=lr(Ns),ws=lr(ao),ir=x=>R=>gr(R)&&cs(R)===x,ht=x=>ln.fromDom(x.dom.ownerDocument),Mo=x=>dc(x)?x:ht(x),_r=x=>st.from(x.dom.parentNode).map(ln.fromDom),Kr=x=>st.from(x.dom.parentElement).map(ln.fromDom),Zr=x=>st.from(x.dom.nextSibling).map(ln.fromDom),Hr=x=>Re(x.dom.childNodes,ln.fromDom),Jo=(x,R)=>{const z=x.dom.childNodes;return st.from(z[R]).map(ln.fromDom)},sc=x=>Jo(x,0),jr=x=>Jo(x,x.dom.childNodes.length-1),os=x=>ws(x)&&Zo(x.dom.host),tr=Do(Element.prototype.attachShadow)&&Do(Node.prototype.getRootNode)?x=>ln.fromDom(x.dom.getRootNode()):Mo,rc=x=>{const R=tr(x);return os(R)?st.some(R):st.none()},Ga=x=>ln.fromDom(x.dom.host),qa=x=>{const R=$c(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const z=R.ownerDocument;return rc(ln.fromDom(R)).fold(()=>z.body.contains(R),jo(qa,Ga))};var as=(x,R,z,ae,pe)=>x(z,ae)?st.some(z):Do(pe)&&pe(z)?st.none():R(z,ae,pe);const Ws=(x,R,z)=>{let ae=x.dom;const pe=Do(z)?z:ee;for(;ae.parentNode;){ae=ae.parentNode;const nt=ln.fromDom(ae);if(R(nt))return st.some(nt);if(pe(nt))break}return st.none()},Ps=(x,R,z)=>as((pe,nt)=>nt(pe),Ws,x,R,z),mc=(x,R,z)=>Ws(x,ae=>vo(ae,R),z),sa=(x,R,z)=>as((pe,nt)=>vo(pe,nt),mc,x,R,z),hr=x=>sa(x,"[contenteditable]"),de=(x,R=!1)=>qa(x)?x.dom.isContentEditable:hr(x).fold(Wn(R),z=>re(z)==="true"),re=x=>x.dom.contentEditable,Oe=(x,R)=>{_r(x).each(ae=>{ae.dom.insertBefore(R.dom,x.dom)})},ze=(x,R)=>{Zr(x).fold(()=>{_r(x).each(pe=>{vn(pe,R)})},ae=>{Oe(ae,R)})},sn=(x,R)=>{sc(x).fold(()=>{vn(x,R)},ae=>{x.dom.insertBefore(R.dom,ae.dom)})},vn=(x,R)=>{x.dom.appendChild(R.dom)},Xn=(x,R)=>{ie(R,z=>{Oe(x,z)})},Ts=(x,R)=>{ie(R,z=>{vn(x,z)})},be=x=>{x.dom.textContent="",ie(Hr(x),R=>{Hn(R)})},Hn=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)};var ue=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),fe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),tt=tinymce.util.Tools.resolve("tinymce.util.VK");const lt=x=>Re(x,ln.fromDom),Ft=Object.keys,dn=(x,R)=>{const z=Ft(x);for(let ae=0,pe=z.length;ae<pe;ae++){const nt=z[ae],_n=x[nt];R(_n,nt)}},nn=x=>(R,z)=>{x[z]=R},on=(x,R,z,ae)=>{dn(x,(pe,nt)=>{(R(pe,nt)?z:ae)(pe,nt)})},an=(x,R)=>{const z={};return on(x,R,nn(z),Nn),z},yn=(x,R,z)=>{if(ro(z)||tn(z)||Ro(z))x.setAttribute(R,z+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",z,":: Element ",x),new Error("Attribute value was not simple")},yo=(x,R)=>{const z=x.dom;dn(R,(ae,pe)=>{yn(z,pe,ae)})},bs=x=>Pt(x.dom.attributes,(R,z)=>(R[z.name]=z.value,R),{}),Sc=(x,R)=>ln.fromDom(x.dom.cloneNode(R)),ra=x=>Sc(x,!0),ca=(x,R)=>{const z=ln.fromTag(R),ae=bs(x);return yo(z,ae),z},Bn=(x,R)=>{const z=ca(x,R);ze(x,z);const ae=Hr(x);return Ts(z,ae),Hn(x),z};var mo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qo=tinymce.util.Tools.resolve("tinymce.util.Tools");const fc=x=>R=>Zo(R)&&R.nodeName.toLowerCase()===x,Br=x=>R=>Zo(R)&&x.test(R.nodeName),Zs=x=>Zo(x)&&x.nodeType===3,Es=x=>Zo(x)&&x.nodeType===1,Fc=Br(/^(OL|UL|DL)$/),Vl=Br(/^(OL|UL)$/),ss=fc("ol"),Yr=Br(/^(LI|DT|DD)$/),Ic=Br(/^(DT|DD)$/),Ar=Br(/^(TH|TD)$/),aa=fc("br"),$a=x=>{var R;return((R=x.parentNode)===null||R===void 0?void 0:R.firstChild)===x},xc=(x,R)=>Zo(R)&&R.nodeName in x.schema.getTextBlockElements(),la=(x,R)=>Zo(x)&&x.nodeName in R,wa=(x,R)=>Zo(R)&&R.nodeName in x.schema.getVoidElements(),_i=(x,R)=>aa(R)?x.isBlock(R.nextSibling)&&!aa(R.previousSibling):!1,qc=(x,R,z)=>{const ae=x.isEmpty(R);return z&&x.select("span[data-mce-type=bookmark]",R).length>0?!1:ae},ll=(x,R)=>x.isChildOf(R,x.getRoot()),gc=x=>R=>R.options.get(x),Sa=x=>{const R=x.options.register;R("lists_indent_on_tab",{processor:"boolean",default:!0})},Cl=gc("lists_indent_on_tab"),Ul=gc("forced_root_block"),wu=gc("forced_root_block_attrs"),Ai=(x,R,z={})=>{const ae=x.dom,pe=x.schema.getBlockElements(),nt=ae.createFragment(),_n=Ul(x),Jn=wu(x);let Gn,kn,br=!1;for(kn=ae.create(_n,{...Jn,...z.style?{style:z.style}:{}}),la(R.firstChild,pe)||nt.appendChild(kn);Gn=R.firstChild;){const Fr=Gn.nodeName;!br&&(Fr!=="SPAN"||Gn.getAttribute("data-mce-type")!=="bookmark")&&(br=!0),la(Gn,pe)?(nt.appendChild(Gn),kn=null):(kn||(kn=ae.create(_n,Jn),nt.appendChild(kn)),kn.appendChild(Gn))}return!br&&kn&&kn.appendChild(ae.create("br",{"data-mce-bogus":"1"})),nt},Kc=mo.DOM,Yi=(x,R,z)=>{const ae=kn=>{const br=kn.parentNode;br&&Qo.each(pe,Fr=>{br.insertBefore(Fr,z.parentNode)}),Kc.remove(kn)},pe=Kc.select('span[data-mce-type="bookmark"]',R),nt=Ai(x,z),_n=Kc.createRng();_n.setStartAfter(z),_n.setEndAfter(R);const Jn=_n.extractContents();for(let kn=Jn.firstChild;kn;kn=kn.firstChild)if(kn.nodeName==="LI"&&x.dom.isEmpty(kn)){Kc.remove(kn);break}x.dom.isEmpty(Jn)||Kc.insertAfter(Jn,R),Kc.insertAfter(nt,R);const Gn=z.parentElement;Gn&&qc(x.dom,Gn)&&ae(Gn),Kc.remove(z),qc(x.dom,R)&&Kc.remove(R)},U=ir("dd"),ce=ir("dt"),we=(x,R)=>{U(R)?Bn(R,"dt"):ce(R)&&Kr(R).each(z=>Yi(x,z.dom,R.dom))},qe=x=>{ce(x)&&Bn(x,"dd")},gt=(x,R,z)=>{R==="Indent"?ie(z,qe):ie(z,ae=>we(x,ae))},Qt=(x,R)=>{if(Zs(x))return{container:x,offset:R};const z=ue.getNode(x,R);return Zs(z)?{container:z,offset:R>=x.childNodes.length?z.data.length:0}:z.previousSibling&&Zs(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&Zs(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:x,offset:R}},xo=x=>{const R=x.cloneRange(),z=Qt(x.startContainer,x.startOffset);R.setStart(z.container,z.offset);const ae=Qt(x.endContainer,x.endOffset);return R.setEnd(ae.container,ae.offset),R},Po=["OL","UL","DL"],so=Po.join(","),vs=(x,R)=>{const z=R||x.selection.getStart(!0);return x.dom.getParent(z,so,Bt(x,z))},nr=(x,R)=>Zo(x)&&R.length===1&&R[0]===x,St=x=>Go(x.querySelectorAll(so),Fc),Su=x=>{const R=vs(x),z=x.selection.getSelectedBlocks();return nr(R,z)?St(R):Go(z,ae=>Fc(ae)&&R!==ae)},_s=(x,R)=>{const z=Qo.map(R,ae=>{const pe=x.dom.getParent(ae,"li,dd,dt",Bt(x,ae));return pe||ae});return ft(z)},$=x=>{const R=x.selection.getSelectedBlocks();return Go(_s(x,R),Yr)},X=x=>Go($(x),Ic),oe=(x,R)=>{const z=x.dom.getParents(R,"TD,TH");return z.length>0?z[0]:x.getBody()},Ne=(x,R)=>!Fc(R)&&!Yr(R)&&xn(Po,z=>x.isValidChild(R.nodeName,z)),Bt=(x,R)=>{const z=x.dom.getParents(R,x.dom.isBlock),ae=nt=>nt.nodeName.toLowerCase()!==Ul(x);return To(z,nt=>ae(nt)&&Ne(x.schema,nt)).getOr(x.getBody())},ho=x=>_r(x).exists(R=>Yr(R.dom)&&sc(R).exists(z=>!Fc(z.dom))&&jr(R).exists(z=>!Fc(z.dom))),qt=(x,R)=>{const z=x.dom.getParents(R,"ol,ul",Bt(x,R));return Vs(z)},or=x=>{const R=qt(x,x.selection.getStart()),z=Go(x.selection.getSelectedBlocks(),Vl);return R.toArray().concat(z)},dt=x=>{const R=x.selection.getStart();return x.dom.getParents(R,"ol,ul",Bt(x,R))},$s=x=>{const R=or(x),z=dt(x);return To(z,ae=>ho(ln.fromDom(ae))).fold(()=>Yc(x,R),ae=>[ae])},Yc=(x,R)=>{const z=Re(R,ae=>qt(x,ae).getOr(ae));return ft(z)},Ys=x=>/\btox\-/.test(x.className),zr=(x,R)=>A(x,Fc,Ar).exists(z=>z.nodeName===R&&!Ys(z)),il=(x,R)=>R!==null&&!x.dom.isEditable(R),$o=x=>{const R=vs(x);return il(x,R)},Xc=(x,R)=>{const z=x.dom.getParent(R,"ol,ul,dl");return il(x,z)},sr=(x,R)=>{const z=x.selection.getNode();return R({parents:x.dom.getParents(z),element:z}),x.on("NodeChange",R),()=>x.off("NodeChange",R)},Wl=(x,R)=>{const ae=document.createDocumentFragment();return ie(x,pe=>{ae.appendChild(pe.dom)}),ln.fromDom(ae)},ur=(x,R,z)=>x.dispatch("ListMutation",{action:R,element:z}),hm=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),ug=x=>x.length>0,pr=x=>!ug(x),wl=x=>x.style!==void 0&&Do(x.style.getPropertyValue),hc=(x,R,z)=>{if(!ro(z))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",z,":: Element ",x),new Error("CSS value must be a string: "+z);wl(x)&&x.style.setProperty(R,z)},Tc=(x,R,z)=>{const ae=x.dom;hc(ae,R,z)},Jc=x=>jn(x,"OL,UL"),Rd=x=>jn(x,"LI"),No=x=>sc(x).exists(Jc),ia=x=>jr(x).exists(Jc),Lc=x=>"listAttributes"in x,K=x=>"isComment"in x,se=x=>"isFragment"in x,ke=x=>x.depth>0,Be=x=>x.isSelected,mn=x=>{const R=Hr(x),z=ia(x)?R.slice(0,-1):R;return Re(z,ra)},Co=(x,R,z)=>_r(x).filter(gr).map(ae=>({depth:R,dirty:!1,isSelected:z,content:mn(x),itemAttributes:bs(x),listAttributes:bs(ae),listType:cs(ae),isInPreviousLi:!1})),Xs=(x,R)=>{vn(x.item,R.list)},pc=x=>{for(let R=1;R<x.length;R++)Xs(x[R-1],x[R])},Eo=(x,R)=>{Je(Vs(x),go(R),Xs)},Xr=(x,R)=>{const z={list:ln.fromTag(R,x),item:ln.fromTag("li",x)};return vn(z.list,z.item),z},rr=(x,R,z)=>{const ae=[];for(let pe=0;pe<z;pe++)ae.push(Xr(x,Lc(R)?R.listType:R.parentListType));return ae},Pr=(x,R)=>{for(let z=0;z<x.length-1;z++)Tc(x[z].item,"list-style-type","none");Vs(x).each(z=>{Lc(R)&&(yo(z.list,R.listAttributes),yo(z.item,R.itemAttributes)),Ts(z.item,R.content)})},Dr=(x,R)=>{cs(x.list)!==R.listType&&(x.list=Bn(x.list,R.listType)),yo(x.list,R.listAttributes)},Or=(x,R,z)=>{const ae=ln.fromTag("li",x);return yo(ae,R),Ts(ae,z),ae},Fa=(x,R)=>{vn(x.list,R),x.item=R},Zl=(x,R,z)=>{const ae=R.slice(0,z.depth);return Vs(ae).each(pe=>{if(Lc(z)){const nt=Or(x,z.itemAttributes,z.content);Fa(pe,nt),Dr(pe,z)}else if(se(z))Ts(pe.item,z.content);else{const nt=ln.fromHtml(`<!--${z.content}-->`);vn(pe.list,nt)}}),ae},Ec=(x,R,z)=>{const ae=rr(x,z,z.depth-R.length);return pc(ae),Pr(ae,z),Eo(R,ae),R.concat(ae)},Ia=(x,R)=>{let z=st.none();const ae=Pt(R,(pe,nt,_n)=>K(nt)?_n===0?(z=st.some(nt),pe):Zl(x,pe,nt):nt.depth>pe.length?Ec(x,pe,nt):Zl(x,pe,nt),[]);return z.each(pe=>{const nt=ln.fromHtml(`<!--${pe.content}-->`);go(ae).each(_n=>{sn(_n.list,nt)})}),go(ae).map(pe=>pe.list)},oi=(x,R)=>{switch(x){case"Indent":R.depth++;break;case"Outdent":R.depth--;break;case"Flatten":R.depth=0}R.dirty=!0},si=(x,R)=>{Lc(x)&&Lc(R)&&(x.listType=R.listType,x.listAttributes={...R.listAttributes})},Jm=x=>{x.listAttributes=an(x.listAttributes,(R,z)=>z!=="start")},Tu=(x,R)=>{const z=x[R].depth,ae=nt=>nt.depth===z&&!nt.dirty,pe=nt=>nt.depth<z;return A(Yt(x.slice(0,R)),ae,pe).orThunk(()=>A(x.slice(R+1),ae,pe))},jl=x=>(ie(x,(R,z)=>{Tu(x,z).fold(()=>{R.dirty&&Lc(R)&&Jm(R)},ae=>si(R,ae))}),x),xa=x=>{let R=x;return{get:()=>R,set:pe=>{R=pe}}},Eu=(x,R,z,ae)=>{var pe;if(lo(ae))return[{depth:x+1,content:(pe=ae.dom.nodeValue)!==null&&pe!==void 0?pe:"",dirty:!1,isSelected:!1,isComment:!0}];R.each(Jn=>{Lt(Jn.start,ae)&&z.set(!0)});const nt=Co(ae,x,z.get());R.each(Jn=>{Lt(Jn.end,ae)&&z.set(!1)});const _n=jr(ae).filter(Jc).map(Jn=>Oi(x,R,z,Jn)).getOr([]);return nt.toArray().concat(_n)},Md=(x,R,z,ae)=>sc(ae).filter(Jc).fold(()=>Eu(x,R,z,ae),pe=>{const nt=Pt(Hr(ae),(_n,Jn,Gn)=>{if(Gn===0)return _n;if(Rd(Jn))return _n.concat(Eu(x,R,z,Jn));{const kn={isFragment:!0,depth:x,content:[Jn],isSelected:!1,dirty:!1,parentListType:cs(pe)};return _n.concat(kn)}},[]);return Oi(x,R,z,pe).concat(nt)}),Oi=(x,R,z,ae)=>Ho(Hr(ae),pe=>{const nt=Jc(pe)?Oi:Md,_n=x+1;return nt(_n,R,z,pe)}),dg=(x,R)=>{const z=xa(!1),ae=0;return Re(x,pe=>({sourceList:pe,entries:Oi(ae,R,z,pe)}))},Nd=(x,R)=>{const z=jl(R);return Re(z,ae=>{const pe=K(ae)?Wl([ln.fromHtml(`<!--${ae.content}-->`)]):Wl(ae.content),nt=Lc(ae)?ae.itemAttributes:{};return ln.fromDom(Ai(x,pe.dom,nt))})},mg=(x,R)=>{const z=jl(R);return Ia(x.contentDocument,z).toArray()},Xu=(x,R)=>Ho(co(R,ke),z=>go(z).exists(ke)?mg(x,z):Nd(x,z)),fg=(x,R)=>{ie(Go(x,Be),z=>oi(R,z))},Ju=x=>{const R=Re($(x),ln.fromDom);return Je(To(R,Ue(No)),To(Yt(R),Ue(No)),(z,ae)=>({start:z,end:ae}))},Up=(x,R,z)=>{const ae=dg(R,Ju(x));ie(ae,pe=>{fg(pe.entries,z);const nt=Xu(x,pe.entries);ie(nt,_n=>{ur(x,z==="Indent"?"IndentList":"OutdentList",_n.dom)}),Xn(pe.sourceList,nt),Hn(pe.sourceList)})},me=(x,R)=>{const z=lt($s(x)),ae=lt(X(x));let pe=!1;if(z.length||ae.length){const nt=x.selection.getBookmark();Up(x,z,R),gt(x,R,ae),x.selection.moveToBookmark(nt),x.selection.setRng(xo(x.selection.getRng())),x.nodeChanged(),pe=!0}return pe},pm=(x,R)=>!$o(x)&&me(x,R),Ka=x=>pm(x,"Indent"),Xi=x=>pm(x,"Outdent"),gg=x=>pm(x,"Flatten"),wh="\uFEFF",ls=x=>x===wh,Ta=(x,R,z)=>Ws(x,R,z).isSome(),ul=(x,R)=>Ta(x,zn(Lt,R));var kc=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Qu=mo.DOM,ri=x=>{const R={},z=ae=>{let pe=x[ae?"startContainer":"endContainer"],nt=x[ae?"startOffset":"endOffset"];if(Es(pe)){const _n=Qu.create("span",{"data-mce-type":"bookmark"});pe.hasChildNodes()?(nt=Math.min(nt,pe.childNodes.length-1),ae?pe.insertBefore(_n,pe.childNodes[nt]):Qu.insertAfter(_n,pe.childNodes[nt])):pe.appendChild(_n),pe=_n,nt=0}R[ae?"startContainer":"endContainer"]=pe,R[ae?"startOffset":"endOffset"]=nt};return z(!0),x.collapsed||z(),R},ua=x=>{const R=ae=>{const pe=Jn=>{var Gn;let kn=(Gn=Jn.parentNode)===null||Gn===void 0?void 0:Gn.firstChild,br=0;for(;kn;){if(kn===Jn)return br;(!Es(kn)||kn.getAttribute("data-mce-type")!=="bookmark")&&br++,kn=kn.nextSibling}return-1};let nt=x[ae?"startContainer":"endContainer"],_n=x[ae?"startOffset":"endOffset"];if(nt){if(Es(nt)&&nt.parentNode){const Jn=nt;_n=pe(nt),nt=nt.parentNode,Qu.remove(Jn),!nt.hasChildNodes()&&Qu.isBlock(nt)&&nt.appendChild(Qu.create("br"))}x[ae?"startContainer":"endContainer"]=nt,x[ae?"startOffset":"endOffset"]=_n}};R(!0),R();const z=Qu.createRng();return z.setStart(x.startContainer,x.startOffset),x.endContainer&&z.setEnd(x.endContainer,x.endOffset),xo(z)},ci=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},hg=(x,R,z)=>{const ae=z["list-style-type"]?z["list-style-type"]:null;x.setStyle(R,"list-style-type",ae)},Sh=(x,R)=>{Qo.each(R,(z,ae)=>{x.setAttribute(ae,z)})},Sl=(x,R,z)=>{Sh(R,z["list-attributes"]),Qo.each(x.select("li",R),ae=>{Sh(ae,z["list-item-attributes"])})},ai=(x,R,z)=>{hg(x,R,z),Sl(x,R,z)},Qm=(x,R,z)=>{Qo.each(z,ae=>x.setStyle(R,ae,""))},Ea=(x,R)=>Zo(R)&&!la(R,x.schema.getBlockElements()),_c=(x,R,z,ae)=>{let pe=R[z?"startContainer":"endContainer"];const nt=R[z?"startOffset":"endOffset"];Es(pe)&&(pe=pe.childNodes[Math.min(nt,pe.childNodes.length-1)]||pe),!z&&aa(pe.nextSibling)&&(pe=pe.nextSibling);const _n=Gn=>{for(;!x.dom.isBlock(Gn)&&Gn.parentNode&&ae!==Gn;)Gn=Gn.parentNode;return Gn},Jn=(Gn,kn)=>{var br;const Fr=new fe(Gn,_n(Gn)),Qa=kn?"next":"prev";let Vr;for(;Vr=Fr[Qa]();)if(!(wa(x,Vr)||ls(Vr.textContent)||((br=Vr.textContent)===null||br===void 0?void 0:br.length)===0))return st.some(Vr);return st.none()};if(z&&Zs(pe))if(ls(pe.textContent))pe=Jn(pe,!1).getOr(pe);else for(pe.parentNode!==null&&Ea(x,pe.parentNode)&&(pe=pe.parentNode);pe.previousSibling!==null&&(Ea(x,pe.previousSibling)||Zs(pe.previousSibling));)pe=pe.previousSibling;if(!z&&Zs(pe))if(ls(pe.textContent))pe=Jn(pe,!0).getOr(pe);else for(pe.parentNode!==null&&Ea(x,pe.parentNode)&&(pe=pe.parentNode);pe.nextSibling!==null&&(Ea(x,pe.nextSibling)||Zs(pe.nextSibling));)pe=pe.nextSibling;for(;pe.parentNode!==ae;){const Gn=pe.parentNode;if(xc(x,pe)||/^(TD|TH)$/.test(Gn.nodeName))return pe;pe=Gn}return pe},ku=(x,R,z)=>{const ae=[],pe=x.dom,nt=_c(x,R,!0,z),_n=_c(x,R,!1,z);let Jn;const Gn=[];for(let kn=nt;kn&&(Gn.push(kn),kn!==_n);kn=kn.nextSibling);return Qo.each(Gn,kn=>{var br;if(xc(x,kn)){ae.push(kn),Jn=null;return}if(pe.isBlock(kn)||aa(kn)){aa(kn)&&pe.remove(kn),Jn=null;return}const Fr=kn.nextSibling;if(kc.isBookmarkNode(kn)&&(Fc(Fr)||xc(x,Fr)||!Fr&&kn.parentNode===z)){Jn=null;return}Jn||(Jn=pe.create("p"),(br=kn.parentNode)===null||br===void 0||br.insertBefore(Jn,kn),ae.push(Jn)),Jn.appendChild(kn)}),ae},Bd=(x,R,z)=>{const ae=x.getStyle(R,"list-style-type");let pe=z?z["list-style-type"]:"";return pe=pe===null?"":pe,ae===pe},Gl=(x,R)=>{const z=x.selection.getStart(!0),ae=_c(x,R,!0,x.getBody());return ul(ln.fromDom(ae),ln.fromDom(R.commonAncestorContainer))?R.commonAncestorContainer:z},Qc=(x,R,z)=>{const ae=x.selection.getRng();let pe="LI";const nt=Bt(x,Gl(x,ae)),_n=x.dom;if(_n.getContentEditable(x.selection.getNode())==="false")return;R=R.toUpperCase(),R==="DL"&&(pe="DT");const Jn=ri(ae),Gn=Go(ku(x,ae,nt),x.dom.isEditable);Qo.each(Gn,kn=>{let br;const Fr=kn.previousSibling,Qa=kn.parentNode;Yr(Qa)||(Fr&&Fc(Fr)&&Fr.nodeName===R&&Bd(_n,Fr,z)?(br=Fr,kn=_n.rename(kn,pe),Fr.appendChild(kn)):(br=_n.create(R),Qa.insertBefore(br,kn),br.appendChild(kn),kn=_n.rename(kn,pe)),Qm(_n,kn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ai(_n,br,z),xl(x.dom,br))}),x.selection.setRng(ua(Jn))},ef=(x,R)=>Fc(x)&&x.nodeName===(R==null?void 0:R.nodeName),tf=(x,R,z)=>{const ae=x.getStyle(R,"list-style-type",!0),pe=x.getStyle(z,"list-style-type",!0);return ae===pe},nf=(x,R)=>x.className===R.className,bm=(x,R,z)=>ef(R,z)&&tf(x,R,z)&&nf(R,z),xl=(x,R)=>{let z,ae=R.nextSibling;if(bm(x,R,ae)){const pe=ae;for(;z=pe.firstChild;)R.appendChild(z);x.remove(pe)}if(ae=R.previousSibling,bm(x,R,ae)){const pe=ae;for(;z=pe.lastChild;)R.insertBefore(z,R.firstChild);x.remove(pe)}},of=(x,R,z,ae)=>{if(R.nodeName!==z){const pe=x.dom.rename(R,z);ai(x.dom,pe,ae),ur(x,ci(z),pe)}else ai(x.dom,R,ae),ur(x,ci(z),R)},xh=(x,R,z,ae)=>{if(R.classList.forEach((pe,nt,_n)=>{pe.startsWith("tox-")&&(_n.remove(pe),_n.length===0&&R.removeAttribute("class"))}),R.nodeName!==z){const pe=x.dom.rename(R,z);ai(x.dom,pe,ae),ur(x,ci(z),pe)}else ai(x.dom,R,ae),ur(x,ci(z),R)},Wp=(x,R,z,ae,pe)=>{const nt=Fc(R);if(nt&&R.nodeName===ae&&!Th(pe)&&!Ys(R))gg(x);else{Qc(x,ae,pe);const _n=ri(x.selection.getRng()),Jn=nt?[R,...z]:z,Gn=nt&&Ys(R)?xh:of;Qo.each(Jn,kn=>{Gn(x,kn,ae,pe)}),x.selection.setRng(ua(_n))}},Th=x=>"list-style-type"in x,sf=(x,R,z,ae)=>{if(R!==x.getBody())if(R)if(R.nodeName===z&&!Th(ae)&&!Ys(R))gg(x);else{const pe=ri(x.selection.getRng());Ys(R)&&R.classList.forEach((_n,Jn,Gn)=>{_n.startsWith("tox-")&&(Gn.remove(_n),Gn.length===0&&R.removeAttribute("class"))}),ai(x.dom,R,ae);const nt=x.dom.rename(R,z);xl(x.dom,nt),x.selection.setRng(ua(pe)),Qc(x,z,ae),ur(x,ci(z),nt)}else Qc(x,z,ae),ur(x,ci(z),R)},vm=(x,R,z)=>{const ae=vs(x);if(Xc(x,ae))return;const pe=Su(x),nt=In(z)?z:{};pe.length>0?Wp(x,ae,pe,R,nt):sf(x,ae,R,nt)},Ji=mo.DOM,pg=(x,R)=>{const z=R.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===R){const ae=z.previousSibling;ae&&ae.nodeName==="LI"?(ae.appendChild(R),qc(x,z)&&Ji.remove(z)):Ji.setStyle(z,"listStyleType","none")}if(Fc(z)){const ae=z.previousSibling;ae&&ae.nodeName==="LI"&&ae.appendChild(R)}},cr=(x,R)=>{const z=Qo.grep(x.select("ol,ul",R));Qo.each(z,ae=>{pg(x,ae)})},Rr=(x,R,z,ae)=>{let pe=R.startContainer;const nt=R.startOffset;if(Zs(pe)&&(z?nt<pe.data.length:nt>0))return pe;const _n=x.schema.getNonEmptyElements();Es(pe)&&(pe=ue.getNode(pe,nt));const Jn=new fe(pe,ae);z&&_i(x.dom,pe)&&Jn.next();const Gn=z?Jn.next.bind(Jn):Jn.prev2.bind(Jn);for(;pe=Gn();)if(pe.nodeName==="LI"&&!pe.hasChildNodes()||_n[pe.nodeName]||Zs(pe)&&pe.data.length>0)return pe;return null},Ya=(x,R)=>{const z=R.childNodes;return z.length===1&&!Fc(z[0])&&x.isBlock(z[0])},bg=x=>st.from(x).map(ln.fromDom).filter(Cs).exists(R=>de(R)&&!cn(["details"],cs(R))),vg=(x,R)=>{Ya(x,R)&&bg(R.firstChild)&&x.remove(R.firstChild,!0)},cc=(x,R,z)=>{let ae;const pe=Ya(x,z)?z.firstChild:z;if(vg(x,R),!qc(x,R,!0))for(;ae=R.firstChild;)pe.appendChild(ae)},fn=(x,R,z)=>{let ae;const pe=R.parentNode;if(!ll(x,R)||!ll(x,z))return;Fc(z.lastChild)&&(ae=z.lastChild),pe===z.lastChild&&aa(pe.previousSibling)&&x.remove(pe.previousSibling);const nt=z.lastChild;nt&&aa(nt)&&R.hasChildNodes()&&x.remove(nt),qc(x,z,!0)&&be(ln.fromDom(z)),cc(x,R,z),ae&&z.appendChild(ae);const Jn=hs(ln.fromDom(z),ln.fromDom(R))?x.getParents(R,Fc,z):[];x.remove(R),ie(Jn,Gn=>{qc(x,Gn)&&Gn!==x.getRoot()&&x.remove(Gn)})},Di=(x,R,z)=>{be(ln.fromDom(z)),fn(x.dom,R,z),x.selection.setCursorLocation(z,0)},Eh=(x,R,z,ae)=>{const pe=x.dom;if(pe.isEmpty(ae))Di(x,z,ae);else{const nt=ri(R);fn(pe,z,ae),x.selection.setRng(ua(nt))}},bc=(x,R,z,ae)=>{const pe=ri(R);fn(x.dom,z,ae);const nt=ua(pe);x.selection.setRng(nt)},Fs=(x,R)=>{const z=x.dom,ae=x.selection,pe=ae.getStart(),nt=oe(x,pe),_n=z.getParent(ae.getStart(),"LI",nt);if(_n){const Jn=_n.parentElement;if(Jn===x.getBody()&&qc(z,Jn))return!0;const Gn=xo(ae.getRng()),kn=z.getParent(Rr(x,Gn,R,nt),"LI",nt),br=kn&&(R?z.isChildOf(_n,kn):z.isChildOf(kn,_n));if(kn&&kn!==_n&&!br)return x.undoManager.transact(()=>{R?Eh(x,Gn,kn,_n):$a(_n)?Xi(x):bc(x,Gn,_n,kn)}),!0;if(br&&!R&&kn!==_n)return x.undoManager.transact(()=>{if(Gn.commonAncestorContainer.parentElement){const Fr=ri(Gn),Qa=Gn.commonAncestorContainer.parentElement;cc(z,Gn.commonAncestorContainer.parentElement,kn),Qa.remove();const Vr=ua(Fr);x.selection.setRng(Vr)}}),!0;if(!kn&&!R&&Gn.startOffset===0&&Gn.endOffset===0)return x.undoManager.transact(()=>{gg(x)}),!0}return!1},ed=(x,R,z)=>{const ae=x.getParent(R.parentNode,x.isBlock,z);x.remove(R),ae&&x.isEmpty(ae)&&x.remove(ae)},yg=(x,R)=>{const z=x.dom,ae=x.selection.getStart(),pe=oe(x,ae),nt=z.getParent(ae,z.isBlock,pe);if(nt&&z.isEmpty(nt,void 0,{checkRootAsContent:!0})){const _n=xo(x.selection.getRng()),Jn=z.getParent(Rr(x,_n,R,pe),"LI",pe);if(Jn){const Gn=Qa=>cn(["td","th","caption"],cs(Qa)),kn=Qa=>Qa.dom===pe,br=Ps(ln.fromDom(Jn),Gn,kn),Fr=Ps(ln.fromDom(_n.startContainer),Gn,kn);return Me(br,Fr,Lt)?(x.undoManager.transact(()=>{const Qa=Jn.parentNode;ed(z,nt,pe),xl(z,Qa),x.selection.select(Jn,!0),x.selection.collapse(R)}),!0):!1}}return!1},rf=(x,R)=>Fs(x,R)||yg(x,R),cf=x=>{const R=x.selection.getStart(),z=oe(x,R);return x.dom.getParent(R,"LI,DT,DD",z)||$(x).length>0},to=x=>cf(x)?(x.undoManager.transact(()=>{x.execCommand("Delete"),cr(x.dom,x.getBody())}),!0):!1,$r=(x,R)=>{const z=x.selection;return!Xc(x,z.getNode())&&(z.isCollapsed()?rf(x,R):to(x))},Pd=x=>{x.on("ExecCommand",R=>{const z=R.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&cf(x)&&cr(x.dom,x.getBody())}),x.on("keydown",R=>{R.keyCode===tt.BACKSPACE?$r(x,!1)&&R.preventDefault():R.keyCode===tt.DELETE&&$r(x,!0)&&R.preventDefault()})},Xa=x=>({backspaceDelete:R=>{$r(x,R)}}),La=(x,R)=>{const z=vs(x);z===null||Xc(x,z)||x.undoManager.transact(()=>{In(R.styles)&&x.dom.setStyles(z,R.styles),In(R.attrs)&&dn(R.attrs,(ae,pe)=>x.dom.setAttrib(z,pe,ae))})},Ja=x=>{const R=Yt(hm(x).split("")),z=Re(R,(ae,pe)=>{const nt=ae.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,pe)*nt});return Pt(z,(ae,pe)=>ae+pe,0)},ac=x=>{if(x--,x<0)return"";{const R=x%26,z=Math.floor(x/26),ae=ac(z),pe=String.fromCharCode(65+R);return ae+pe}},ka=x=>/^[A-Z]+$/.test(x),Tl=x=>/^[a-z]+$/.test(x),ym=x=>/^[0-9]+$/.test(x),xr=x=>ym(x)?2:ka(x)?0:Tl(x)?1:pr(x)?3:4,Cg=x=>{switch(xr(x)){case 2:return st.some({listStyleType:st.none(),start:x});case 0:return st.some({listStyleType:st.some("upper-alpha"),start:Ja(x).toString()});case 1:return st.some({listStyleType:st.some("lower-alpha"),start:Ja(x).toString()});case 3:return st.some({listStyleType:st.none(),start:""});case 4:return st.none()}},Gr=x=>{const R=parseInt(x.start,10);return pn(x.listStyleType,"upper-alpha")?ac(R):pn(x.listStyleType,"lower-alpha")?ac(R).toLowerCase():x.start},_u=x=>{const R=vs(x);!ss(R)||Xc(x,R)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Gr({start:x.dom.getAttrib(R,"start","1"),listStyleType:st.from(x.dom.getStyle(R,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ae=z.getData();Cg(ae.start).each(pe=>{x.execCommand("mceListUpdate",!1,{attrs:{start:pe.start==="1"?"":pe.start},styles:{"list-style-type":pe.listStyleType.getOr("")}})}),z.close()}})},li=(x,R)=>()=>{const z=vs(x);return Zo(z)&&z.nodeName===R},js=x=>{x.addCommand("mceListProps",()=>{_u(x)})},ii=x=>{x.on("BeforeExecCommand",R=>{const z=R.command.toLowerCase();z==="indent"?Ka(x):z==="outdent"&&Xi(x)}),x.addCommand("InsertUnorderedList",(R,z)=>{vm(x,"UL",z)}),x.addCommand("InsertOrderedList",(R,z)=>{vm(x,"OL",z)}),x.addCommand("InsertDefinitionList",(R,z)=>{vm(x,"DL",z)}),x.addCommand("RemoveList",()=>{gg(x)}),js(x),x.addCommand("mceListUpdate",(R,z)=>{In(z)&&La(x,z)}),x.addQueryStateHandler("InsertUnorderedList",li(x,"UL")),x.addQueryStateHandler("InsertOrderedList",li(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",li(x,"DL"))};var $d=tinymce.util.Tools.resolve("tinymce.html.Node");const Qi=x=>x.type===3,ar=x=>x.length===0,Au=x=>{const R=(pe,nt)=>{const _n=$d.create("li");ie(pe,Jn=>_n.append(Jn)),nt?x.insert(_n,nt,!0):x.append(_n)},z=(pe,nt)=>Qi(nt)?[...pe,nt]:!ar(pe)&&!Qi(nt)?(R(pe,nt),[]):pe,ae=Pt(x.children(),z,[]);ar(ae)||R(ae)},El=x=>{x.on("PreInit",()=>{const{parser:R}=x;R.addNodeFilter("ul,ol",z=>ie(z,Au))})},ko=x=>{x.on("keydown",R=>{R.keyCode!==tt.TAB||tt.metaKeyPressed(R)||x.undoManager.transact(()=>{(R.shiftKey?Xi(x):Ka(x))&&R.preventDefault()})})},td=x=>{Cl(x)&&ko(x),Pd(x)},Cm=(x,R)=>z=>{const ae=pe=>{z.setActive(zr(pe.parents,R)),z.setEnabled(!Xc(x,pe.element)&&x.selection.isEditable())};return z.setEnabled(x.selection.isEditable()),sr(x,ae)},af=x=>{const R=z=>()=>x.execCommand(z);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:R("InsertOrderedList"),onSetup:Cm(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:R("InsertUnorderedList"),onSetup:Cm(x,"UL")}))},kh=(x,R)=>z=>sr(x,pe=>z.setEnabled(zr(pe.parents,R)&&!Xc(x,pe.element))),lf=x=>{const R={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:kh(x,"OL")};x.ui.registry.addMenuItem("listprops",R),x.ui.registry.addContextMenu("lists",{update:z=>{const ae=vs(x,z);return ss(ae)?["listprops"]:[]}})};var _h=()=>{Gt.add("lists",x=>(Sa(x),El(x),x.hasPlugin("rtc",!0)?js(x):(td(x),ii(x)),af(x),lf(x),Xa(x)))};_h()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=(de,re,Oe)=>{var ze;return Oe(de,re.prototype)?!0:((ze=de.constructor)===null||ze===void 0?void 0:ze.name)===re.name},Fn=de=>{const re=typeof de;return de===null?"null":re==="object"&&Array.isArray(de)?"array":re==="object"&&uo(de,String,(Oe,ze)=>ze.isPrototypeOf(Oe))?"string":re},eo=de=>re=>Fn(re)===de,Yn=eo("string"),ro=eo("object"),In=eo("array"),We=de=>de==null,tn=de=>!We(de);class Oo{constructor(re,Oe){this.tag=re,this.value=Oe}static some(re){return new Oo(!0,re)}static none(){return Oo.singletonNone}fold(re,Oe){return this.tag?Oe(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?Oo.some(re(this.value)):Oo.none()}bind(re){return this.tag?re(this.value):Oo.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:Oo.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return tn(re)?Oo.some(re):Oo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oo.singletonNone=new Oo(!1);const Zo=Array.prototype.push,Do=(de,re)=>{for(let Oe=0,ze=de.length;Oe<ze;Oe++){const sn=de[Oe];re(sn,Oe)}},Ro=de=>{const re=[];for(let Oe=0,ze=de.length;Oe<ze;++Oe){if(!In(de[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+de);Zo.apply(re,de[Oe])}return re},Nn=de=>{let re=de;return{get:()=>re,set:sn=>{re=sn}}},jo=Object.keys,Wn=Object.hasOwnProperty,Ct=(de,re)=>{const Oe=jo(de);for(let ze=0,sn=Oe.length;ze<sn;ze++){const vn=Oe[ze],Xn=de[vn];re(Xn,vn)}},zn=(de,re)=>Ue(de,re)?Oo.from(de[re]):Oo.none(),Ue=(de,re)=>Wn.call(de,re),ee=de=>re=>re.options.get(de),st=de=>{const re=de.options.register;re("audio_template_callback",{processor:"function"}),re("video_template_callback",{processor:"function"}),re("iframe_template_callback",{processor:"function"}),re("media_live_embeds",{processor:"boolean",default:!0}),re("media_filter_html",{processor:"boolean",default:!0}),re("media_url_resolver",{processor:"function"}),re("media_alt_source",{processor:"boolean",default:!0}),re("media_poster",{processor:"boolean",default:!0}),re("media_dimensions",{processor:"boolean",default:!0})},Zn=ee("audio_template_callback"),it=ee("video_template_callback"),W=ee("iframe_template_callback"),Dt=ee("media_live_embeds"),cn=ee("media_filter_html"),xn=ee("media_url_resolver"),Re=ee("media_alt_source"),ie=ee("media_poster"),Go=ee("media_dimensions");var co=tinymce.util.Tools.resolve("tinymce.util.Tools"),Pt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const To=Pt.DOM,rt=de=>de.replace(/px$/,""),Ho=de=>{const re=de.attr("style"),Oe=re?To.parseStyle(re):{};return{type:"ephox-embed-iri",source:de.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:zn(Oe,"max-width").map(rt).getOr(""),height:zn(Oe,"max-height").map(rt).getOr("")}},Yt=(de,re)=>{let Oe={};const sn=A({validate:!1,forced_root_block:!1},re).parse(de);for(let vn=sn;vn;vn=vn.walk())if(vn.type===1){const Xn=vn.name;if(vn.attr("data-ephox-embed-iri")){Oe=Ho(vn);break}else!Oe.source&&Xn==="param"&&(Oe.source=vn.attr("movie")),(Xn==="iframe"||Xn==="object"||Xn==="embed"||Xn==="video"||Xn==="audio")&&(Oe.type||(Oe.type=Xn),Oe=co.extend(vn.attributes.map,Oe)),Xn==="source"&&(Oe.source?Oe.altsource||(Oe.altsource=vn.attr("src")):Oe.source=vn.attr("src")),Xn==="img"&&!Oe.poster&&(Oe.poster=vn.attr("src"))}return Oe.source=Oe.source||Oe.src||"",Oe.altsource=Oe.altsource||"",Oe.poster=Oe.poster||"",Oe},Ke=de=>{var re;const Oe={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},ze=(re=de.toLowerCase().split(".").pop())!==null&&re!==void 0?re:"";return zn(Oe,ze).getOr("")};var go=tinymce.util.Tools.resolve("tinymce.html.Node"),Vs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const ft=(de,re={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...re},de),pn=Pt.DOM,Me=de=>/^[0-9.]+$/.test(de)?de+"px":de,Je=(de,re)=>{const Oe=re.attr("style"),ze=Oe?pn.parseStyle(Oe):{};tn(de.width)&&(ze["max-width"]=Me(de.width)),tn(de.height)&&(ze["max-height"]=Me(de.height)),re.attr("style",pn.serializeStyle(ze))},I=["source","altsource"],Ns=(de,re,Oe,ze)=>{let sn=0,vn=0;const Xn=ft(ze);Xn.addNodeFilter("source",be=>sn=be.length);const Ts=Xn.parse(de);for(let be=Ts;be;be=be.walk())if(be.type===1){const Hn=be.name;if(be.attr("data-ephox-embed-iri")){Je(re,be);break}else{switch(Hn){case"video":case"object":case"embed":case"img":case"iframe":re.height!==void 0&&re.width!==void 0&&(be.attr("width",re.width),be.attr("height",re.height));break}if(Oe)switch(Hn){case"video":be.attr("poster",re.poster),be.attr("src",null);for(let fe=sn;fe<2;fe++)if(re[I[fe]]){const tt=new go("source",1);tt.attr("src",re[I[fe]]),tt.attr("type",re[I[fe]+"mime"]||null),be.append(tt)}break;case"iframe":be.attr("src",re.source);break;case"object":const ue=be.getAll("img").length>0;if(re.poster&&!ue){be.attr("src",re.poster);const fe=new go("img",1);fe.attr("src",re.poster),fe.attr("width",re.width),fe.attr("height",re.height),be.append(fe)}break;case"source":if(vn<2&&(be.attr("src",re[I[vn]]),be.attr("type",re[I[vn]+"mime"]||null),!re[I[vn]])){be.remove();continue}vn++;break;case"img":re.poster||be.remove();break}}}return Vs({},ze).serialize(Ts)},ao=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],bo=de=>{const re=de.match(/^(https?:\/\/|www\.)(.+)$/i);return re&&re.length>1?re[1]==="www."?"https://":re[1]:"https://"},zo=(de,re)=>{const Oe=bo(re),ze=de.regex.exec(re);let sn=Oe+de.url;if(tn(ze))for(let vn=0;vn<ze.length;vn++)sn=sn.replace("$"+vn,()=>ze[vn]?ze[vn]:"");return sn.replace(/\?$/,"")},Gc=de=>{const re=ao.filter(Oe=>Oe.regex.test(de));return re.length>0?co.extend({},re[0],{url:zo(re[0],de)}):null},He=(de,re)=>{if(re)return re(de);{const Oe=de.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+de.source+'" width="'+de.width+'" height="'+de.height+'"'+Oe+"></iframe>"}},vt=de=>{let re='<object data="'+de.source+'" width="'+de.width+'" height="'+de.height+'" type="application/x-shockwave-flash">';return de.poster&&(re+='<img src="'+de.poster+'" width="'+de.width+'" height="'+de.height+'" />'),re+="</object>",re},je=(de,re)=>re?re(de):'<audio controls="controls" src="'+de.source+'">'+(de.altsource?`
<source src="`+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</audio>",ye=(de,re)=>re?re(de):'<video width="'+de.width+'" height="'+de.height+'"'+(de.poster?' poster="'+de.poster+'"':"")+` controls="controls">
<source src="`+de.source+'"'+(de.sourcemime?' type="'+de.sourcemime+'"':"")+` />
`+(de.altsource?'<source src="'+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</video>",ln=(de,re)=>{var Oe;const ze=co.extend({},re);if(!ze.source&&(co.extend(ze,Yt((Oe=ze.embed)!==null&&Oe!==void 0?Oe:"",de.schema)),!ze.source))return"";ze.altsource||(ze.altsource=""),ze.poster||(ze.poster=""),ze.source=de.convertURL(ze.source,"source"),ze.altsource=de.convertURL(ze.altsource,"source"),ze.sourcemime=Ke(ze.source),ze.altsourcemime=Ke(ze.altsource),ze.poster=de.convertURL(ze.poster,"poster");const sn=Gc(ze.source);if(sn&&(ze.source=sn.url,ze.type=sn.type,ze.allowfullscreen=sn.allowFullscreen,ze.width=ze.width||String(sn.w),ze.height=ze.height||String(sn.h)),ze.embed)return Ns(ze.embed,ze,!0,de.schema);{const vn=Zn(de),Xn=it(de),Ts=W(de);return ze.width=ze.width||"300",ze.height=ze.height||"150",co.each(ze,(be,Hn)=>{ze[Hn]=de.dom.encode(""+be)}),ze.type==="iframe"?He(ze,Ts):ze.sourcemime==="application/x-shockwave-flash"?vt(ze):ze.sourcemime.indexOf("audio")!==-1?je(ze,vn):ye(ze,Xn)}},vo=de=>de.hasAttribute("data-mce-object")||de.hasAttribute("data-ephox-embed-iri"),Lt=de=>{de.on("mousedown",re=>{const Oe=de.dom.getParent(re.target,".mce-preview-object");Oe&&de.dom.getAttrib(Oe,"data-mce-selected")==="2"&&re.stopImmediatePropagation()}),de.on("click keyup touchend",()=>{const re=de.selection.getNode();re&&de.dom.hasClass(re,"mce-preview-object")&&de.dom.getAttrib(re,"data-mce-selected")&&re.setAttribute("data-mce-selected","2")}),de.on("ObjectResized",re=>{const Oe=re.target;if(Oe.getAttribute("data-mce-object")){let ze=Oe.getAttribute("data-mce-html");ze&&(ze=unescape(ze),Oe.setAttribute("data-mce-html",escape(Ns(ze,{width:String(re.width),height:String(re.height)},!1,de.schema))))}})},hs={},jn=(de,re,Oe)=>new Promise((ze,sn)=>{const vn=Xn=>(Xn.html&&(hs[de.source]=Xn),ze({url:de.source,html:Xn.html?Xn.html:re(de)}));hs[de.source]?vn(hs[de.source]):Oe({url:de.source}).then(vn).catch(sn)}),fr=(de,re)=>Promise.resolve({html:re(de),url:de.source}),Vo=de=>re=>ln(de,re),xs=(de,re)=>{const Oe=xn(de);return Oe?jn(re,Vo(de),Oe):fr(re,Vo(de))},oa=de=>Ue(hs,de),Us=(de,re)=>zn(re,de).bind(Oe=>zn(Oe,"meta")),Bs=(de,re,Oe)=>ze=>{const sn=()=>zn(de,ze),vn=()=>zn(re,ze),Xn=Hn=>zn(Hn,"value").bind(ue=>ue.length>0?Oo.some(ue):Oo.none()),Ts=()=>sn().bind(Hn=>ro(Hn)?Xn(Hn).orThunk(vn):vn().orThunk(()=>Oo.from(Hn))),be=()=>vn().orThunk(()=>sn().bind(Hn=>ro(Hn)?Xn(Hn):Oo.from(Hn)));return{[ze]:(ze===Oe?Ts():be()).getOr("")}},ps=(de,re)=>{const Oe={};return zn(de,"dimensions").each(ze=>{Do(["width","height"],sn=>{zn(re,sn).orThunk(()=>zn(ze,sn)).each(vn=>Oe[sn]=vn)})}),Oe},wc=(de,re)=>{const Oe=re&&re!=="dimensions"?Us(re,de).getOr({}):{},ze=Bs(de,Oe,re);return{...ze("source"),...ze("altsource"),...ze("poster"),...ze("embed"),...ps(de,Oe)}},cs=de=>{const re={...de,source:{value:zn(de,"source").getOr("")},altsource:{value:zn(de,"altsource").getOr("")},poster:{value:zn(de,"poster").getOr("")}};return Do(["width","height"],Oe=>{zn(de,Oe).each(ze=>{const sn=re.dimensions||{};sn[Oe]=ze,re.dimensions=sn})}),re},ns=de=>re=>{const Oe=re&&re.msg?"Media embed handler error: "+re.msg:"Media embed handler threw unknown error.";de.notificationManager.open({type:"error",text:Oe})},lr=de=>{const re=de.selection.getNode(),Oe=vo(re)?de.serializer.serialize(re,{selection:!0}):"",ze=Yt(Oe,de.schema),vn=(()=>{if($c(ze.source,ze.type)){const Xn=de.dom.getRect(re);return{width:Xn.w.toString().replace(/px$/,""),height:Xn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Oe,...ze,...vn}},lo=(de,re)=>Oe=>{if(Yn(Oe.url)&&Oe.url.trim().length>0){const ze=Oe.html,vn={...Yt(ze,re.schema),source:Oe.url,embed:ze};de.setData(cs(vn))}},Cs=(de,re)=>{const Oe=de.dom.select("*[data-mce-object]");for(let ze=0;ze<re.length;ze++)for(let sn=Oe.length-1;sn>=0;sn--)re[ze]===Oe[sn]&&Oe.splice(sn,1);de.selection.select(Oe[0])},gr=(de,re)=>{const Oe=de.dom.select("*[data-mce-object]");de.insertContent(re),Cs(de,Oe),de.nodeChanged()},$c=(de,re)=>tn(re)&&re==="ephox-embed-iri"&&tn(Gc(de)),dc=(de,re)=>((ze,sn)=>ze.width!==sn.width||ze.height!==sn.height)(de,re)&&$c(re.source,de.type),ws=(de,re,Oe)=>{var ze;re.embed=dc(de,re)&&Go(Oe)?ln(Oe,{...re,embed:""}):Ns((ze=re.embed)!==null&&ze!==void 0?ze:"",re,!1,Oe.schema),re.embed&&(de.source===re.source||oa(re.source))?gr(Oe,re.embed):xs(Oe,re).then(sn=>{gr(Oe,sn.html)}).catch(ns(Oe))},ir=de=>{const re=lr(de),Oe=Nn(re),ze=cs(re),sn=(on,an)=>{const yn=wc(an.getData(),"source");on.source!==yn.source&&(lo(nn,de)({url:yn.source,html:""}),xs(de,yn).then(lo(nn,de)).catch(ns(de)))},vn=on=>{var an;const yn=wc(on.getData()),yo=Yt((an=yn.embed)!==null&&an!==void 0?an:"",de.schema);on.setData(cs(yo))},Xn=(on,an,yn)=>{const yo=wc(on.getData(),an),bs=dc(yn,yo)&&Go(de)?{...yo,embed:""}:yo,Sc=ln(de,bs);on.setData(cs({...bs,embed:Sc}))},Ts=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],be=Go(de)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Hn={title:"General",name:"general",items:Ro([Ts,be])},fe={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},tt=[];Re(de)&&tt.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ie(de)&&tt.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const lt={title:"Advanced",name:"advanced",items:tt},Ft=[Hn,fe];tt.length>0&&Ft.push(lt);const dn={type:"tabpanel",tabs:Ft},nn=de.windowManager.open({title:"Insert/Edit Media",size:"normal",body:dn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:on=>{const an=wc(on.getData());ws(Oe.get(),an,de),on.close()},onChange:(on,an)=>{switch(an.name){case"source":sn(Oe.get(),on);break;case"embed":vn(on);break;case"dimensions":case"altsource":case"poster":Xn(on,an.name,Oe.get());break}Oe.set(wc(on.getData()))},initialData:ze})},ht=de=>({showDialog:()=>{ir(de)}}),Mo=de=>{const re=()=>{ir(de)};de.addCommand("mceMedia",re)},_r=(de,re,Oe)=>de.length>=re.length&&de.substr(Oe,Oe+re.length)===re,Kr=(de,re)=>_r(de,re,0);var Zr=tinymce.util.Tools.resolve("tinymce.Env");const Hr=de=>{const re=de.name;return re==="iframe"||re==="video"||re==="audio"},Jo=(de,re,Oe,ze=null)=>{const sn=de.attr(Oe);return tn(sn)?sn:Ue(re,Oe)?null:ze},sc=(de,re,Oe)=>{const ze=re.name==="img"||de.name==="video",sn=ze?"300":null,vn=de.name==="audio"?"30":"150",Xn=ze?vn:null;re.attr({width:Jo(de,Oe,"width",sn),height:Jo(de,Oe,"height",Xn)})},jr=(de,re,Oe,ze)=>{const sn=ft(de.schema).parse(ze,{context:re});for(;sn.firstChild;)Oe.append(sn.firstChild)},os=(de,re)=>{const Oe=re.name,ze=new go("img",1);return tr(de,re,ze),sc(re,ze,{}),ze.attr({style:re.attr("style"),src:Zr.transparentSrc,"data-mce-object":Oe,class:"mce-object mce-object-"+Oe}),ze},un=(de,re)=>{var Oe;const ze=re.name,sn=new go("span",1);sn.attr({contentEditable:"false",style:re.attr("style"),"data-mce-object":ze,class:"mce-preview-object mce-object-"+ze}),tr(de,re,sn);const vn=de.dom.parseStyle((Oe=re.attr("style"))!==null&&Oe!==void 0?Oe:""),Xn=new go(ze,1);if(sc(re,Xn,vn),Xn.attr({src:re.attr("src"),style:re.attr("style"),class:re.attr("class")}),ze==="iframe")Xn.attr({allowfullscreen:re.attr("allowfullscreen"),frameborder:"0",sandbox:re.attr("sandbox"),referrerpolicy:re.attr("referrerpolicy")});else{Do(["controls","crossorigin","currentTime","loop","muted","poster","preload"],ue=>{Xn.attr(ue,re.attr(ue))});const Hn=sn.attr("data-mce-html");tn(Hn)&&jr(de,ze,Xn,unescape(Hn))}const Ts=new go("span",1);return Ts.attr("class","mce-shim"),sn.append(Xn),sn.append(Ts),sn},tr=(de,re,Oe)=>{var ze;const sn=(ze=re.attributes)!==null&&ze!==void 0?ze:[];let vn=sn.length;for(;vn--;){const Hn=sn[vn].name;let ue=sn[vn].value;Hn!=="width"&&Hn!=="height"&&Hn!=="style"&&!Kr(Hn,"data-mce-")&&((Hn==="data"||Hn==="src")&&(ue=de.convertURL(ue,Hn)),Oe.attr("data-mce-p-"+Hn,ue))}const Xn=Vs({inner:!0},de.schema),Ts=new go("div",1);Do(re.children(),Hn=>Ts.append(Hn));const be=Xn.serialize(Ts);be&&(Oe.attr("data-mce-html",escape(be)),Oe.empty())},rc=de=>{const re=de.attr("class");return Yn(re)&&/\btiny-pageembed\b/.test(re)},Ga=de=>{let re=de;for(;re=re.parent;)if(re.attr("data-ephox-embed-iri")||rc(re))return!0;return!1},qa=de=>re=>{let Oe=re.length,ze;for(;Oe--;)ze=re[Oe],ze.parent&&(ze.parent.attr("data-mce-object")||(Hr(ze)&&Dt(de)?Ga(ze)||ze.replace(un(de,ze)):Ga(ze)||ze.replace(os(de,ze))))},as=(de,re,Oe)=>{const ze=de.options.get,sn=ze("xss_sanitization"),vn=cn(de);return ft(de.schema,{sanitize:sn,validate:vn}).parse(Oe,{context:re})},Ws=de=>{de.on("PreInit",()=>{const{schema:re,serializer:Oe,parser:ze}=de,sn=re.getBoolAttrs();Do("webkitallowfullscreen mozallowfullscreen".split(" "),vn=>{sn[vn]={}}),Ct({embed:["wmode"]},(vn,Xn)=>{const Ts=re.getElementRule(Xn);Ts&&Do(vn,be=>{Ts.attributes[be]={},Ts.attributesOrder.push(be)})}),ze.addNodeFilter("iframe,video,audio,object,embed",qa(de)),Oe.addAttributeFilter("data-mce-object",(vn,Xn)=>{var Ts;let be=vn.length;for(;be--;){const Hn=vn[be];if(!Hn.parent)continue;const ue=Hn.attr(Xn),fe=new go(ue,1);if(ue!=="audio"){const dn=Hn.attr("class");dn&&dn.indexOf("mce-preview-object")!==-1&&Hn.firstChild?fe.attr({width:Hn.firstChild.attr("width"),height:Hn.firstChild.attr("height")}):fe.attr({width:Hn.attr("width"),height:Hn.attr("height")})}fe.attr({style:Hn.attr("style")});const tt=(Ts=Hn.attributes)!==null&&Ts!==void 0?Ts:[];let lt=tt.length;for(;lt--;){const dn=tt[lt].name;dn.indexOf("data-mce-p-")===0&&fe.attr(dn.substr(11),tt[lt].value)}const Ft=Hn.attr("data-mce-html");if(Ft){const dn=as(de,ue,unescape(Ft));Do(dn.children(),nn=>fe.append(nn))}Hn.replace(fe)}})}),de.on("SetContent",()=>{const re=de.dom;Do(re.select("span.mce-preview-object"),Oe=>{re.select("span.mce-shim",Oe).length===0&&re.add(Oe,"span",{class:"mce-shim"})})})},Ps=de=>{de.on("ResolveName",re=>{let Oe;re.target.nodeType===1&&(Oe=re.target.getAttribute("data-mce-object"))&&(re.name=Oe)})},mc=de=>re=>{const Oe=()=>{re.setEnabled(de.selection.isEditable())};return de.on("NodeChange",Oe),Oe(),()=>{de.off("NodeChange",Oe)}},sa=de=>{const re=()=>de.execCommand("mceMedia");de.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:re,onSetup:Oe=>{const ze=de.selection;Oe.setActive(vo(ze.getNode()));const sn=ze.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Oe.setActive).unbind,vn=mc(de)(Oe);return()=>{sn(),vn()}}}),de.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:re,onSetup:mc(de)})};var hr=()=>{Gt.add("media",de=>(st(de),Mo(de),sa(de),Ps(de),Ws(de),Lt(de),ht(de)))};hr()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager"),uo=tinymce.util.Tools.resolve("tinymce.Env"),Fn=tinymce.util.Tools.resolve("tinymce.util.Tools");const eo=Nn=>jo=>jo.options.get(Nn),Yn=eo("content_style"),ro=eo("content_css_cors"),In=eo("body_class"),We=eo("body_id"),tn=Nn=>{var jo;let Wn="";const Ct=Nn.dom.encode,zn=(jo=Yn(Nn))!==null&&jo!==void 0?jo:"";Wn+='<base href="'+Ct(Nn.documentBaseURI.getURI())+'">';const Ue=ro(Nn)?' crossorigin="anonymous"':"";Fn.each(Nn.contentCSS,xn=>{Wn+='<link type="text/css" rel="stylesheet" href="'+Ct(Nn.documentBaseURI.toAbsolute(xn))+'"'+Ue+">"}),zn&&(Wn+='<style type="text/css">'+zn+"</style>");const ee=We(Nn),st=In(Nn),it='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(uo.os.isMacOS()||uo.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",W=Nn.getBody().dir,Dt=W?' dir="'+Ct(W)+'"':"";return"<!DOCTYPE html><html><head>"+Wn+'</head><body id="'+Ct(ee)+'" class="mce-content-body '+Ct(st)+'"'+Dt+">"+Nn.getContent()+it+"</body></html>"},Oo=Nn=>{const jo=tn(Nn);Nn.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:jo}}).focus("close")},Zo=Nn=>{Nn.addCommand("mcePreview",()=>{Oo(Nn)})},Do=Nn=>{const jo=()=>Nn.execCommand("mcePreview");Nn.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:jo}),Nn.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:jo})};var Ro=()=>{Gt.add("preview",Nn=>{Zo(Nn),Do(Nn)})};Ro()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=(S,k,L)=>{var Y;return L(S,k.prototype)?!0:((Y=S.constructor)===null||Y===void 0?void 0:Y.name)===k.name},Fn=S=>{const k=typeof S;return S===null?"null":k==="object"&&Array.isArray(S)?"array":k==="object"&&uo(S,String,(L,Y)=>Y.isPrototypeOf(L))?"string":k},eo=S=>k=>Fn(k)===S,Yn=S=>k=>typeof k===S,ro=S=>k=>S===k,In=eo("string"),We=eo("array"),tn=Yn("boolean"),Oo=ro(void 0),Zo=S=>S==null,Do=S=>!Zo(S),Ro=Yn("function"),Nn=Yn("number"),jo=()=>{},Wn=(S,k)=>L=>S(k(L)),Ct=S=>()=>S,zn=S=>S,Ue=(S,k)=>S===k;function ee(S,...k){return(...L)=>{const Y=k.concat(L);return S.apply(null,Y)}}const st=S=>{S()},Zn=Ct(!1),it=Ct(!0);class W{constructor(k,L){this.tag=k,this.value=L}static some(k){return new W(!0,k)}static none(){return W.singletonNone}fold(k,L){return this.tag?L(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?W.some(k(this.value)):W.none()}bind(k){return this.tag?k(this.value):W.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:W.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return Do(k)?W.some(k):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const Dt=Object.keys,cn=Object.hasOwnProperty,xn=(S,k)=>{const L=Dt(S);for(let Y=0,he=L.length;Y<he;Y++){const Ge=L[Y],xt=S[Ge];k(xt,Ge)}},Re=S=>(k,L)=>{S[L]=k},ie=(S,k,L,Y)=>{xn(S,(he,Ge)=>{(k(he,Ge)?L:Y)(he,Ge)})},Go=(S,k)=>{const L={};return ie(S,k,Re(L),jo),L},co=(S,k)=>{const L=[];return xn(S,(Y,he)=>{L.push(k(Y,he))}),L},Pt=S=>co(S,zn),A=S=>Dt(S).length,To=(S,k)=>rt(S,k)?W.from(S[k]):W.none(),rt=(S,k)=>cn.call(S,k),Ho=(S,k)=>rt(S,k)&&S[k]!==void 0&&S[k]!==null,Yt=S=>{for(const k in S)if(cn.call(S,k))return!1;return!0},Ke=Array.prototype.indexOf,go=Array.prototype.push,Vs=(S,k)=>Ke.call(S,k),ft=(S,k)=>Vs(S,k)>-1,pn=(S,k)=>{for(let L=0,Y=S.length;L<Y;L++){const he=S[L];if(k(he,L))return!0}return!1},Me=(S,k)=>{const L=[];for(let Y=0;Y<S;Y++)L.push(k(Y));return L},Je=(S,k)=>{const L=S.length,Y=new Array(L);for(let he=0;he<L;he++){const Ge=S[he];Y[he]=k(Ge,he)}return Y},I=(S,k)=>{for(let L=0,Y=S.length;L<Y;L++){const he=S[L];k(he,L)}},Ns=(S,k)=>{for(let L=S.length-1;L>=0;L--){const Y=S[L];k(Y,L)}},ao=(S,k)=>{const L=[],Y=[];for(let he=0,Ge=S.length;he<Ge;he++){const xt=S[he];(k(xt,he)?L:Y).push(xt)}return{pass:L,fail:Y}},bo=(S,k)=>{const L=[];for(let Y=0,he=S.length;Y<he;Y++){const Ge=S[Y];k(Ge,Y)&&L.push(Ge)}return L},zo=(S,k,L)=>(Ns(S,(Y,he)=>{L=k(L,Y,he)}),L),Gc=(S,k,L)=>(I(S,(Y,he)=>{L=k(L,Y,he)}),L),He=(S,k,L)=>{for(let Y=0,he=S.length;Y<he;Y++){const Ge=S[Y];if(k(Ge,Y))return W.some(Ge);if(L(Ge,Y))break}return W.none()},vt=(S,k)=>He(S,k,Zn),je=S=>{const k=[];for(let L=0,Y=S.length;L<Y;++L){if(!We(S[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+S);go.apply(k,S[L])}return k},ye=(S,k)=>je(Je(S,k)),ln=(S,k)=>{for(let L=0,Y=S.length;L<Y;++L){const he=S[L];if(k(he,L)!==!0)return!1}return!0},vo=(S,k)=>{const L={};for(let Y=0,he=S.length;Y<he;Y++){const Ge=S[Y];L[String(Ge)]=k(Ge,Y)}return L},Lt=(S,k)=>k>=0&&k<S.length?W.some(S[k]):W.none(),hs=S=>Lt(S,0),jn=S=>Lt(S,S.length-1),fr=(S,k)=>{for(let L=0;L<S.length;L++){const Y=k(S[L],L);if(Y.isSome())return Y}return W.none()},Vo=8,xs=9,oa=11,Us=1,Bs=3,ps=(S,k)=>{const Y=(k||document).createElement("div");if(Y.innerHTML=S,!Y.hasChildNodes()||Y.childNodes.length>1){const he="HTML does not have a single root node";throw console.error(he,S),new Error(he)}return ns(Y.childNodes[0])},wc=(S,k)=>{const Y=(k||document).createElement(S);return ns(Y)},cs=(S,k)=>{const Y=(k||document).createTextNode(S);return ns(Y)},ns=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},lo={fromHtml:ps,fromTag:wc,fromText:cs,fromDom:ns,fromPoint:(S,k,L)=>W.from(S.dom.elementFromPoint(k,L)).map(ns)},Cs=(S,k)=>{const L=S.dom;if(L.nodeType!==Us)return!1;{const Y=L;if(Y.matches!==void 0)return Y.matches(k);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(k);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(k);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},gr=S=>S.nodeType!==Us&&S.nodeType!==xs&&S.nodeType!==oa||S.childElementCount===0,$c=(S,k)=>{const L=k===void 0?document:k.dom;return gr(L)?[]:Je(L.querySelectorAll(S),lo.fromDom)},dc=(S,k)=>{const L=k===void 0?document:k.dom;return gr(L)?W.none():W.from(L.querySelector(S)).map(lo.fromDom)},ws=(S,k)=>S.dom===k.dom,ir=Cs;typeof window<"u"||Function("return this;")();const ht=S=>S.dom.nodeName.toLowerCase(),Mo=S=>S.dom.nodeType,_r=S=>k=>Mo(k)===S,Kr=S=>Mo(S)===Vo||ht(S)==="#comment",Zr=_r(Us),Hr=_r(Bs),Jo=_r(xs),sc=_r(oa),jr=S=>k=>Zr(k)&&ht(k)===S,os=S=>lo.fromDom(S.dom.ownerDocument),un=S=>Jo(S)?S:os(S),tr=S=>W.from(S.dom.parentNode).map(lo.fromDom),rc=(S,k)=>{const L=Ro(k)?k:Zn;let Y=S.dom;const he=[];for(;Y.parentNode!==null&&Y.parentNode!==void 0;){const Ge=Y.parentNode,xt=lo.fromDom(Ge);if(he.push(xt),L(xt)===!0)break;Y=Ge}return he},Ga=S=>W.from(S.dom.previousSibling).map(lo.fromDom),qa=S=>W.from(S.dom.nextSibling).map(lo.fromDom),as=S=>Je(S.dom.childNodes,lo.fromDom),Ws=(S,k)=>{const L=S.dom.childNodes;return W.from(L[k]).map(lo.fromDom)},Ps=S=>Ws(S,0),mc=S=>sc(S)&&Do(S.dom.host),hr=Ro(Element.prototype.attachShadow)&&Ro(Node.prototype.getRootNode)?S=>lo.fromDom(S.dom.getRootNode()):un,de=S=>{const k=hr(S);return mc(k)?W.some(k):W.none()},re=S=>lo.fromDom(S.dom.host),Oe=S=>{const k=Hr(S)?S.dom.parentNode:S.dom;if(k==null||k.ownerDocument===null)return!1;const L=k.ownerDocument;return de(lo.fromDom(k)).fold(()=>L.body.contains(k),Wn(Oe,re))};var ze=(S,k,L,Y,he)=>S(L,Y)?W.some(L):Ro(he)&&he(L)?W.none():k(L,Y,he);const sn=(S,k,L)=>{let Y=S.dom;const he=Ro(L)?L:Zn;for(;Y.parentNode;){Y=Y.parentNode;const Ge=lo.fromDom(Y);if(k(Ge))return W.some(Ge);if(he(Ge))break}return W.none()},vn=(S,k,L)=>ze((he,Ge)=>Ge(he),sn,S,k,L),Xn=(S,k)=>{const L=he=>k(lo.fromDom(he));return vt(S.dom.childNodes,L).map(lo.fromDom)},Ts=(S,k,L)=>sn(S,Y=>Cs(Y,k),L),be=(S,k)=>Xn(S,L=>Cs(L,k)),Hn=(S,k)=>dc(k,S),ue=(S,k,L)=>ze((he,Ge)=>Cs(he,Ge),Ts,S,k,L),fe=S=>ue(S,"[contenteditable]"),tt=(S,k=!1)=>Oe(S)?S.dom.isContentEditable:fe(S).fold(Ct(k),L=>lt(L)==="true"),lt=S=>S.dom.contentEditable,Ft=S=>S.nodeName.toLowerCase(),dn=S=>lo.fromDom(S.getBody()),nn=S=>k=>ws(k,dn(S)),on=S=>S?S.replace(/px$/,""):"",an=S=>/^\d+(\.\d+)?$/.test(S)?S+"px":S,yn=S=>lo.fromDom(S.selection.getStart()),yo=S=>lo.fromDom(S.selection.getEnd()),bs=S=>vn(S,jr("table")).forall(tt),Sc=(S,k)=>bo(as(S),k),ra=(S,k)=>{let L=[];return I(as(S),Y=>{k(Y)&&(L=L.concat([Y])),L=L.concat(ra(Y,k))}),L},ca=(S,k)=>Sc(S,L=>Cs(L,k)),Bn=(S,k)=>$c(k,S),mo=(S,k,L)=>{if(In(L)||tn(L)||Nn(L))S.setAttribute(k,L+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",L,":: Element ",S),new Error("Attribute value was not simple")},Qo=(S,k,L)=>{mo(S.dom,k,L)},fc=(S,k)=>{const L=S.dom;xn(k,(Y,he)=>{mo(L,he,Y)})},Br=(S,k)=>{const L=S.dom.getAttribute(k);return L===null?void 0:L},Zs=(S,k)=>W.from(Br(S,k)),Es=(S,k)=>{S.dom.removeAttribute(k)},Fc=S=>Gc(S.dom.attributes,(k,L)=>(k[L.name]=L.value,k),{}),Vl=(S,k,L=Ue)=>S.exists(Y=>L(Y,k)),ss=S=>{const k=[],L=Y=>{k.push(Y)};for(let Y=0;Y<S.length;Y++)S[Y].each(L);return k},Yr=(S,k,L)=>S.isSome()&&k.isSome()?W.some(L(S.getOrDie(),k.getOrDie())):W.none(),Ic=S=>S.bind(zn),Ar=(S,k)=>S?W.some(k):W.none(),aa=(S,k)=>S.substring(k),$a=(S,k,L)=>k===""||S.length>=k.length&&S.substr(L,L+k.length)===k,xc=(S,k)=>la(S,k)?aa(S,k.length):S,la=(S,k)=>$a(S,k,0),_i=(S=>k=>k.replace(S,""))(/^\s+|\s+$/g),qc=S=>S.length>0,ll=S=>!qc(S),gc=(S,k=10)=>{const L=parseInt(S,k);return isNaN(L)?W.none():W.some(L)},Sa=S=>{const k=parseFloat(S);return isNaN(k)?W.none():W.some(k)},Cl=S=>S.style!==void 0&&Ro(S.style.getPropertyValue),Ul=(S,k,L)=>{if(!In(L))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",L,":: Element ",S),new Error("CSS value must be a string: "+L);Cl(S)&&S.style.setProperty(k,L)},wu=(S,k)=>{Cl(S)&&S.style.removeProperty(k)},Ai=(S,k,L)=>{const Y=S.dom;Ul(Y,k,L)},Kc=(S,k)=>{const L=S.dom,he=window.getComputedStyle(L).getPropertyValue(k);return he===""&&!Oe(S)?Yi(L,k):he},Yi=(S,k)=>Cl(S)?S.style.getPropertyValue(k):"",U=(S,k)=>{const L=S.dom,Y=Yi(L,k);return W.from(Y).filter(he=>he.length>0)},ce=(S,k)=>{const L=S.dom;wu(L,k),Vl(Zs(S,"style").map(_i),"")&&Es(S,"style")},we=(S,k,L=0)=>Zs(S,k).map(Y=>parseInt(Y,10)).getOr(L),qe=(S,k)=>gt(S,k,it),gt=(S,k,L)=>ye(as(S),Y=>Cs(Y,k)?L(Y)?[Y]:[]:gt(Y,k,L)),Qt=["tfoot","thead","tbody","colgroup"],xo=S=>ft(Qt,S),Po=(S,k)=>({rows:S,columns:k}),so=(S,k,L)=>({element:S,rowspan:k,colspan:L}),vs=(S,k,L,Y,he,Ge)=>({element:S,rowspan:k,colspan:L,row:Y,column:he,isLocked:Ge}),nr=(S,k,L)=>({element:S,cells:k,section:L}),St=(S,k,L,Y)=>({startRow:S,startCol:k,finishRow:L,finishCol:Y}),Su=(S,k,L)=>({element:S,colspan:k,column:L}),_s=(S,k)=>({element:S,columns:k}),$=(S,k,L=Zn)=>{if(L(k))return W.none();if(ft(S,ht(k)))return W.some(k);const Y=he=>Cs(he,"table")||L(he);return Ts(k,S.join(","),Y)},X=(S,k)=>$(["td","th"],S,k),oe=S=>qe(S,"th,td"),Ne=S=>Cs(S,"colgroup")?ca(S,"col"):ye(qt(S),k=>ca(k,"col")),Bt=(S,k)=>ue(S,"table",k),ho=S=>qe(S,"tr"),qt=S=>Bt(S).fold(Ct([]),k=>ca(k,"colgroup")),or=(S,k)=>Je(S,L=>{if(ht(L)==="colgroup"){const Y=Je(Ne(L),he=>{const Ge=we(he,"span",1);return so(he,1,Ge)});return nr(L,Y,"colgroup")}else{const Y=Je(oe(L),he=>{const Ge=we(he,"rowspan",1),xt=we(he,"colspan",1);return so(he,Ge,xt)});return nr(L,Y,k(L))}}),dt=S=>tr(S).map(k=>{const L=ht(k);return xo(L)?L:"tbody"}).getOr("tbody"),$s=S=>{const k=ho(S),Y=[...qt(S),...k];return or(Y,dt)},Yc="data-snooker-locked-cols",Ys=S=>Zs(S,Yc).bind(k=>W.from(k.match(/\d+/g))).map(k=>vo(k,it)),zr=(S,k)=>S+","+k,il=(S,k,L)=>W.from(S.access[zr(k,L)]),$o=(S,k,L)=>{const Y=Xc(S,he=>L(k,he.element));return Y.length>0?W.some(Y[0]):W.none()},Xc=(S,k)=>{const L=ye(S.all,Y=>Y.cells);return bo(L,k)},sr=S=>{const k={};let L=0;return I(S.cells,Y=>{const he=Y.colspan;Me(he,Ge=>{const xt=L+Ge;k[xt]=Su(Y.element,he,xt)}),L+=he}),k},Wl=S=>{const k={},L=[],he=hs(S).map(kl=>kl.element).bind(Bt).bind(Ys).getOr({});let Ge=0,xt=0,Kt=0;const{pass:Vn,fail:wo}=ao(S,kl=>kl.section==="colgroup");I(wo,kl=>{const Mu=[];I(kl.cells,Ha=>{let Nu=0;for(;k[zr(Kt,Nu)]!==void 0;)Nu++;const Ld=Ho(he,Nu.toString()),ou=vs(Ha.element,Ha.rowspan,Ha.colspan,Kt,Nu,Ld);for(let hf=0;hf<Ha.colspan;hf++)for(let mi=0;mi<Ha.rowspan;mi++){const Mh=Kt+mi,xg=Nu+hf,Nh=zr(Mh,xg);k[Nh]=ou,xt=Math.max(xt,xg+1)}Mu.push(ou)}),Ge++,L.push(nr(kl.element,Mu,kl.section)),Kt++});const{columns:As,colgroups:fs}=jn(Vn).map(kl=>{const Mu=sr(kl);return{colgroups:[_s(kl.element,Pt(Mu))],columns:Mu}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Po(Ge,xt),access:k,all:L,columns:As,colgroups:fs}},wl={fromTable:S=>{const k=$s(S);return Wl(k)},generate:Wl,getAt:il,findItem:$o,filterItems:Xc,justCells:S=>ye(S.all,k=>k.cells),justColumns:S=>Pt(S.columns),hasColumns:S=>Dt(S.columns).length>0,getColumnAt:(S,k)=>W.from(S.columns[k])};var hc=tinymce.util.Tools.resolve("tinymce.util.Tools");const Tc=(S,k,L)=>{const Y=S.select("td,th",k);let he;for(let Ge=0;Ge<Y.length;Ge++){const xt=S.getStyle(Y[Ge],L);if(Oo(he)&&(he=xt),he!==xt)return""}return he},Jc=(S,k,L)=>{hc.each("left center right".split(" "),Y=>{Y!==L&&S.formatter.remove("align"+Y,{},k)}),L&&S.formatter.apply("align"+L,{},k)},Rd=(S,k,L)=>{hc.each("top middle bottom".split(" "),Y=>{Y!==L&&S.formatter.remove("valign"+Y,{},k)}),L&&S.formatter.apply("valign"+L,{},k)},No=(S,k,L)=>{S.dispatch("TableModified",{...L,table:k})},ia=(S,k)=>Sa(S).getOr(k),Lc=(S,k,L)=>ia(Kc(S,k),L),K=(S,k,L,Y)=>{const he=Lc(S,`padding-${L}`,0),Ge=Lc(S,`padding-${Y}`,0),xt=Lc(S,`border-${L}-width`,0),Kt=Lc(S,`border-${Y}-width`,0);return k-he-Ge-xt-Kt},se=(S,k)=>{const L=S.dom,Y=L.getBoundingClientRect().width||L.offsetWidth;return k==="border-box"?Y:K(S,Y,"left","right")},Be=S=>se(S,"content-box");var mn=tinymce.util.Tools.resolve("tinymce.Env");const Co="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Xs=Me(5,S=>{const k=`${S+1}px`;return{title:k,value:k}}),pc=Je(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],S=>({title:S,value:S.toLowerCase()})),Eo="100%",Xr=S=>{var k;const L=S.dom,Y=(k=L.getParent(S.selection.getStart(),L.isBlock))!==null&&k!==void 0?k:S.getBody();return Be(lo.fromDom(Y))+"px"},rr=(S,k)=>Xu(S)||!jl(S)?k:mg(S)?{...k,width:Xr(S)}:{...k,width:Eo},Pr=(S,k)=>Xu(S)||jl(S)?k:mg(S)?{...k,width:Xr(S)}:{...k,width:Eo},Dr=S=>k=>k.options.get(S),Or=S=>{const k=S.options.register;k("table_border_widths",{processor:"object[]",default:Xs}),k("table_border_styles",{processor:"object[]",default:pc}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!mn.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:Co}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Fa=Dr("table_sizing_mode"),Zl=Dr("table_border_widths"),Ec=Dr("table_border_styles"),Ia=Dr("table_cell_advtab"),oi=Dr("table_row_advtab"),si=Dr("table_advtab"),Jm=Dr("table_appearance_options"),Tu=Dr("table_grid"),jl=Dr("table_style_by_css"),xa=Dr("table_cell_class_list"),Eu=Dr("table_row_class_list"),Md=Dr("table_class_list"),Oi=Dr("table_toolbar"),dg=Dr("table_background_color_map"),Nd=Dr("table_border_color_map"),mg=S=>Fa(S)==="fixed",Xu=S=>Fa(S)==="responsive",fg=S=>{const k=S.options,L=k.get("table_default_styles");return k.isSet("table_default_styles")?L:rr(S,L)},Ju=S=>{const k=S.options,L=k.get("table_default_attributes");return k.isSet("table_default_attributes")?L:Pr(S,L)},Up=(S,k)=>k.column>=S.startCol&&k.column+k.colspan-1<=S.finishCol&&k.row>=S.startRow&&k.row+k.rowspan-1<=S.finishRow,me=(S,k)=>{let L=!0;const Y=ee(Up,k);for(let he=k.startRow;he<=k.finishRow;he++)for(let Ge=k.startCol;Ge<=k.finishCol;Ge++)L=L&&wl.getAt(S,he,Ge).exists(Y);return L?W.some(k):W.none()},pm=(S,k)=>St(Math.min(S.row,k.row),Math.min(S.column,k.column),Math.max(S.row+S.rowspan-1,k.row+k.rowspan-1),Math.max(S.column+S.colspan-1,k.column+k.colspan-1)),Ka=(S,k,L)=>{const Y=wl.findItem(S,k,ws),he=wl.findItem(S,L,ws);return Y.bind(Ge=>he.map(xt=>pm(Ge,xt)))},Xi=(S,k,L)=>Ka(S,k,L).bind(Y=>me(S,Y)),gg=(S,k,L)=>{const Y=wh(S);return Xi(Y,k,L)},wh=wl.fromTable,ls=(S,k)=>{tr(S).each(Y=>{Y.dom.insertBefore(k.dom,S.dom)})},Ta=(S,k)=>{qa(S).fold(()=>{tr(S).each(he=>{kc(he,k)})},Y=>{ls(Y,k)})},ul=(S,k)=>{Ps(S).fold(()=>{kc(S,k)},Y=>{S.dom.insertBefore(k.dom,Y.dom)})},kc=(S,k)=>{S.dom.appendChild(k.dom)},Qu=(S,k)=>{ls(S,k),kc(k,S)},ri=(S,k)=>{I(k,(L,Y)=>{const he=Y===0?S:k[Y-1];Ta(he,L)})},ua=(S,k)=>{I(k,L=>{kc(S,L)})},ci=S=>{const k=S.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},hg=S=>{const k=as(S);k.length>0&&ri(S,k),ci(S)},Sl=((S,k)=>{const L=Ge=>{if(!S(Ge))throw new Error("Can only get "+k+" value of a "+k+" node");return Y(Ge).getOr("")},Y=Ge=>S(Ge)?W.from(Ge.dom.nodeValue):W.none();return{get:L,getOption:Y,set:(Ge,xt)=>{if(!S(Ge))throw new Error("Can only set raw "+k+" value of a "+k+" node");Ge.dom.nodeValue=xt}}})(Hr,"text"),ai=S=>Sl.get(S),Qm=(S,k)=>Sl.set(S,k);var Ea=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_c=()=>{const S=wo=>lo.fromDom(wo.dom.cloneNode(!1)),k=wo=>un(wo).dom,L=wo=>Zr(wo)?ht(wo)==="body"?!0:ft(Ea,ht(wo)):!1,Y=wo=>Zr(wo)?ft(["br","img","hr","input"],ht(wo)):!1,he=wo=>Zr(wo)&&Br(wo,"contenteditable")==="false",Ge=(wo,As)=>wo.dom.compareDocumentPosition(As.dom),xt=(wo,As)=>{const fs=Fc(wo);fc(As,fs)},Kt=wo=>{const As=ht(wo);return ft(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],As)},Vn=wo=>Zr(wo)?Zs(wo,"lang"):W.none();return{up:Ct({selector:Ts,closest:ue,predicate:sn,all:rc}),down:Ct({selector:Bn,predicate:ra}),styles:Ct({get:Kc,getRaw:U,set:Ai,remove:ce}),attrs:Ct({get:Br,set:Qo,remove:Es,copyTo:xt}),insert:Ct({before:ls,after:Ta,afterAll:ri,append:kc,appendAll:ua,prepend:ul,wrap:Qu}),remove:Ct({unwrap:hg,remove:ci}),create:Ct({nu:lo.fromTag,clone:S,text:lo.fromText}),query:Ct({comparePosition:Ge,prevSibling:Ga,nextSibling:qa}),property:Ct({children:as,name:ht,parent:tr,document:k,isText:Hr,isComment:Kr,isElement:Zr,isSpecial:Kt,getLanguage:Vn,getText:ai,setText:Qm,isBoundary:L,isEmptyTag:Y,isNonEditable:he}),eq:ws,is:ir}};const ku=(S,k,L,Y)=>{const he=L[0],Ge=L.slice(1);return Y(S,k,he,Ge)},Bd=(S,k,L)=>L.length>0?ku(S,k,L,Gl):W.none(),Gl=(S,k,L,Y)=>{const he=k(S,L);return zo(Y,(Ge,xt)=>{const Kt=k(S,xt);return Qc(S,Ge,Kt)},he)},Qc=(S,k,L)=>k.bind(Y=>L.filter(ee(S.eq,Y))),ef=Bd,tf=_c(),nf=(S,k)=>ef(tf,(L,Y)=>S(Y),k),bm=S=>Ts(S,"table"),xl=(S,k)=>{const L=Bn(S,k);return L.length>0?W.some(L):W.none()},of=(S,k,L)=>Hn(S,k).bind(Y=>Hn(S,L).bind(he=>nf(bm,[Y,he]).map(Ge=>({first:Y,last:he,table:Ge})))),xh=(S,k)=>xl(S,k),Wp=(S,k,L)=>of(S,k,L).bind(Y=>{const he=Vn=>ws(S,Vn),Ge="thead,tfoot,tbody,table",xt=Ts(Y.first,Ge,he),Kt=Ts(Y.last,Ge,he);return xt.bind(Vn=>Kt.bind(wo=>ws(Vn,wo)?gg(Y.table,Y.first,Y.last):W.none()))}),Th=S=>Je(S,lo.fromDom),sf="data-mce-selected",vm="td["+sf+"],th["+sf+"]",Ji="data-mce-first-selected",pg="td["+Ji+"],th["+Ji+"]",cr="data-mce-last-selected",Rr="td["+cr+"],th["+cr+"]",Ya={selected:sf,selectedSelector:vm,firstSelected:Ji,firstSelectedSelector:pg,lastSelected:cr,lastSelectedSelector:Rr},bg=S=>Bt(S).bind(k=>xh(k,Ya.firstSelectedSelector)).fold(Ct(S),k=>k[0]),vg=S=>(k,L)=>{const Y=ht(k),he=Y==="col"||Y==="colgroup"?bg(k):k;return ue(he,S,L)},cc=vg("th,td,caption"),fn=vg("th,td"),Di=S=>Th(S.model.table.getSelectedCells()),Eh=(S,k)=>{const L=fn(S),Y=L.bind(he=>Bt(he)).map(he=>ho(he));return Yr(L,Y,(he,Ge)=>bo(Ge,xt=>pn(Th(xt.dom.cells),Kt=>Br(Kt,k)==="1"||ws(Kt,he)))).getOr([])},bc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Fs=S=>({value:cf(S)}),ed=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yg=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rf=S=>ed.test(S)||yg.test(S),cf=S=>xc(S,"#").toUpperCase(),to=S=>rf(S)?W.some({value:cf(S)}):W.none(),$r=S=>{const k=S.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},Pd=S=>{const k=$r(S.red)+$r(S.green)+$r(S.blue);return Fs(k)},Xa=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,La=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ja=(S,k,L,Y)=>({red:S,green:k,blue:L,alpha:Y}),ac=(S,k,L,Y)=>{const he=parseInt(S,10),Ge=parseInt(k,10),xt=parseInt(L,10),Kt=parseFloat(Y);return Ja(he,Ge,xt,Kt)},ka=S=>{const k=Xa.exec(S);if(k!==null)return W.some(ac(k[1],k[2],k[3],"1"));const L=La.exec(S);return L!==null?W.some(ac(L[1],L[2],L[3],L[4])):W.none()},Tl=S=>to(S).orThunk(()=>ka(S).map(Pd)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const L=k.getContext("2d");L.clearRect(0,0,k.width,k.height),L.fillStyle="#FFFFFF",L.fillStyle=S,L.fillRect(0,0,1,1);const Y=L.getImageData(0,0,1,1).data,he=Y[0],Ge=Y[1],xt=Y[2],Kt=Y[3];return Pd(Ja(he,Ge,xt,Kt))}),ym=S=>ka(S).map(Pd).map(k=>"#"+k.value).getOr(S),xr=S=>{let k=S;return{get:()=>k,set:he=>{k=he}}},Cg=S=>{const k=xr(W.none()),L=()=>k.get().each(S);return{clear:()=>{L(),k.set(W.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Kt=>{L(),k.set(W.some(Kt))}}},Gr=()=>Cg(S=>S.unbind()),_u=(S,k,L)=>Y=>{const he=Gr(),Ge=ll(L),xt=()=>{const Kt=Di(S),Vn=wo=>S.formatter.match(k,{value:L},wo.dom,Ge);Ge?(Y.setActive(!pn(Kt,Vn)),he.set(S.formatter.formatChanged(k,wo=>Y.setActive(!wo),!0))):(Y.setActive(ln(Kt,Vn)),he.set(S.formatter.formatChanged(k,Y.setActive,!1,{value:L})))};return S.initialized?xt():S.on("init",xt),he.clear},li=S=>Ho(S,"menu"),js=S=>Je(S,k=>{const L=k.text||k.title||"";return li(k)?{text:L,items:js(k.menu)}:{text:L,value:k.value}}),ii=S=>S.length?W.some(js([{text:"Select...",value:"mce-no-match"},...S])):W.none(),$d=(S,k,L,Y)=>Je(k,he=>{const Ge=he.text||he.title;return li(he)?{type:"nestedmenuitem",text:Ge,getSubmenuItems:()=>$d(S,he.menu,L,Y)}:{text:Ge,type:"togglemenuitem",onAction:()=>Y(he.value),onSetup:_u(S,L,he.value)}}),Qi=(S,k)=>L=>{S.execCommand("mceTableApplyCellStyle",!1,{[k]:L})},ar=S=>ye(S,k=>li(k)?[{...k,menu:ar(k.menu)}]:qc(k.value)?[k]:[]),Au=(S,k,L,Y)=>he=>he($d(S,k,L,Y)),El=(S,k,L)=>{const Y=Je(k,he=>({text:he.title,value:"#"+Tl(he.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Y.length>0?Y:void 0,allowCustomColors:!1},onAction:he=>{const Ge=he.value==="remove"?"":he.value;S.execCommand("mceTableApplyCellStyle",!1,{[L]:Ge})}}]},ko=S=>()=>{const L=S.queryCommandValue("mceTableRowType")==="header"?"body":"header";S.execCommand("mceTableRowType",!1,{type:L})},td=S=>()=>{const L=S.queryCommandValue("mceTableColType")==="th"?"td":"th";S.execCommand("mceTableColType",!1,{type:L})},Cm=S=>ii(xa(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),af=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:bc}],kh=S=>af.concat(Cm(S).toArray()),lf=(S,k)=>{const Y=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(js(Ec(S)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Y):Y}},x={normal:(S,k)=>{const L=S.dom;return{setAttrib:(xt,Kt)=>{L.setAttrib(k,xt,Kt)},setStyle:(xt,Kt)=>{L.setStyle(k,xt,Kt)},setFormat:(xt,Kt)=>{Kt===""?S.formatter.remove(xt,{value:null},k,!0):S.formatter.apply(xt,{value:Kt},k)}}}},R=jr("th"),z=(S,k)=>S&&k?"sectionCells":S?"section":"cells",ae=S=>{const k=S.section==="thead",L=Vl(pe(S.cells),"th");return S.section==="tfoot"?{type:"footer"}:k||L?{type:"header",subType:z(k,L)}:{type:"body"}},pe=S=>{const k=bo(S,L=>R(L.element));return k.length===0?W.some("td"):k.length===S.length?W.some("th"):W.none()},nt=S=>{const k=Je(S,he=>ae(he).type),L=ft(k,"header"),Y=ft(k,"footer");if(!L&&!Y)return W.some("body");{const he=ft(k,"body");return L&&!he&&!Y?W.some("header"):!L&&!he&&Y?W.some("footer"):W.none()}},_n=S=>{let k=!1,L;return(...Y)=>(k||(k=!0,L=S.apply(null,Y)),L)},Jn=(S,k)=>fr(S.all,L=>vt(L.cells,Y=>ws(k,Y.element))),Gn=(S,k,L)=>{const Y=Je(k.selection,Ge=>X(Ge).bind(xt=>Jn(S,xt)).filter(L)),he=ss(Y);return Ar(he.length>0,he)},kn=(S,k)=>k.mergable,br=(S,k)=>k.unmergable,Fr=(S,k)=>Gn(S,k,it),Qa=(S,k)=>Jn(S,k).exists(L=>!L.isLocked),Vr=(S,k)=>ln(k,L=>Qa(S,L)),Ah=(S,k)=>kn(S,k).filter(L=>Vr(S,L.cells)),Nb=(S,k)=>br(S,k).filter(L=>Vr(S,L));({...{generate:S=>{if(!We(S))throw new Error("cases must be an array");if(S.length===0)throw new Error("there must be at least one case");const k=[],L={};return I(S,(Y,he)=>{const Ge=Dt(Y);if(Ge.length!==1)throw new Error("one and only one name per case");const xt=Ge[0],Kt=Y[xt];if(L[xt]!==void 0)throw new Error("duplicate key detected:"+xt);if(xt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!We(Kt))throw new Error("case arguments must be an array");k.push(xt),L[xt]=(...Vn)=>{const wo=Vn.length;if(wo!==Kt.length)throw new Error("Wrong number of arguments to case "+xt+". Expected "+Kt.length+" ("+Kt+"), got "+wo);return{fold:(...fs)=>{if(fs.length!==S.length)throw new Error("Wrong number of arguments to fold. Expected "+S.length+", got "+fs.length);return fs[he].apply(null,Vn)},match:fs=>{const dr=Dt(fs);if(k.length!==dr.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+dr.join(","));if(!ln(k,Mu=>ft(dr,Mu)))throw new Error("Not all branches were specified when using match. Specified: "+dr.join(", ")+`
Required: `+k.join(", "));return fs[xt].apply(null,Vn)},log:fs=>{console.log(fs,{constructors:k,constructor:xt,params:Vn})}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const jp=(S,k)=>{const L=wl.fromTable(S);return Fr(L,k).bind(he=>{const Ge=he[he.length-1],xt=he[0].row,Kt=Ge.row+Ge.rowspan,Vn=L.all.slice(xt,Kt);return nt(Vn)}).getOr("")},ma=S=>la(S,"rgb")?ym(S):S,Dn=S=>{const k=lo.fromDom(S);return{borderwidth:U(k,"border-width").getOr(""),borderstyle:U(k,"border-style").getOr(""),bordercolor:U(k,"border-color").map(ma).getOr(""),backgroundcolor:U(k,"background-color").map(ma).getOr("")}},ui=S=>{const k=S[0],L=S.slice(1);return I(L,Y=>{I(Dt(k),he=>{xn(Y,(Ge,xt)=>{const Kt=k[he];Kt!==""&&he===xt&&Kt!==Ge&&(k[he]=he==="class"?"mce-no-match":"")})})}),k},uf=(S,k,L,Y)=>vt(S,he=>!Oo(L.formatter.matchNode(Y,k+he))).getOr(""),df=ee(uf,["left","center","right"],"align"),Bb=ee(uf,["top","middle","bottom"],"valign"),Gp=(S,k)=>{const L=fg(S),Y=Ju(S),he=()=>({borderstyle:To(L,"border-style").getOr(""),bordercolor:ma(To(L,"border-color").getOr("")),backgroundcolor:ma(To(L,"background-color").getOr(""))}),Ge={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},xt=()=>{const As=L["border-width"];return jl(S)&&As?{border:As}:To(Y,"border").fold(()=>({}),fs=>({border:fs}))},Kt=k?he():{},Vn=()=>{const As=To(L,"border-spacing").or(To(Y,"cellspacing")).fold(()=>({}),dr=>({cellspacing:dr})),fs=To(L,"border-padding").or(To(Y,"cellpadding")).fold(()=>({}),dr=>({cellpadding:dr}));return{...As,...fs}};return{...Ge,...L,...Y,...Kt,...xt(),...Vn()}},Ri=S=>Bt(lo.fromDom(S)).map(k=>{const L={selection:Th(S.cells)};return jp(k,L)}).getOr(""),Ou=(S,k,L)=>{const Y=(Kt,Vn)=>{const wo=U(lo.fromDom(Vn),"border-width");return jl(S)&&wo.isSome()?wo.getOr(""):Kt.getAttrib(Vn,"border")||Tc(S.dom,Vn,"border-width")||Tc(S.dom,Vn,"border")||""},he=S.dom,Ge=jl(S)?he.getStyle(k,"border-spacing")||he.getAttrib(k,"cellspacing"):he.getAttrib(k,"cellspacing")||he.getStyle(k,"border-spacing"),xt=jl(S)?Tc(he,k,"padding")||he.getAttrib(k,"cellpadding"):he.getAttrib(k,"cellpadding")||Tc(he,k,"padding");return{width:he.getStyle(k,"width")||he.getAttrib(k,"width"),height:he.getStyle(k,"height")||he.getAttrib(k,"height"),cellspacing:Ge??"",cellpadding:xt??"",border:Y(he,k),caption:!!he.select("caption",k)[0],class:he.getAttrib(k,"class",""),align:df(S,k),...L?Dn(k):{}}},Fd=(S,k,L)=>{const Y=S.dom;return{height:Y.getStyle(k,"height")||Y.getAttrib(k,"height"),class:Y.getAttrib(k,"class",""),type:Ri(k),align:df(S,k),...L?Dn(k):{}}},Ht=(S,k,L,Y)=>{const he=S.dom,Ge=Y.getOr(k);return{width:((Kt,Vn)=>he.getStyle(Kt,Vn)||he.getAttrib(Kt,Vn))(Ge,"width"),scope:he.getAttrib(k,"scope"),celltype:Ft(k),class:he.getAttrib(k,"class",""),halign:df(S,k),valign:Bb(S,k),...L?Dn(k):{}}},ql=(S,k)=>{const L=wl.fromTable(S),Y=wl.justCells(L),he=bo(Y,Ge=>pn(k,xt=>ws(Ge.element,xt)));return Je(he,Ge=>({element:Ge.element.dom,column:wl.getColumnAt(L,Ge.column).map(xt=>xt.element.dom)}))},qp=(S,k,L,Y)=>{Y("scope")&&S.setAttrib("scope",L.scope),Y("class")&&L.class!=="mce-no-match"&&S.setAttrib("class",L.class),Y("width")&&k.setStyle("width",an(L.width))},wm=(S,k,L)=>{L("backgroundcolor")&&S.setFormat("tablecellbackgroundcolor",k.backgroundcolor),L("bordercolor")&&S.setFormat("tablecellbordercolor",k.bordercolor),L("borderstyle")&&S.setFormat("tablecellborderstyle",k.borderstyle),L("borderwidth")&&S.setFormat("tablecellborderwidth",an(k.borderwidth))},Mi=(S,k,L,Y)=>{const he=k.length===1;I(k,Ge=>{const xt=Ge.element,Kt=he?it:Y,Vn=x.normal(S,xt),wo=Ge.column.map(As=>x.normal(S,As)).getOr(Vn);qp(Vn,wo,L,Kt),Ia(S)&&wm(Vn,L,Kt),Y("halign")&&Jc(S,xt,L.halign),Y("valign")&&Rd(S,xt,L.valign)})},wg=(S,k)=>{S.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},Id=(S,k,L,Y)=>{const he=Go(Y,(Ge,xt)=>L[xt]!==Ge);A(he)>0&&k.length>=1&&Bt(k[0]).each(Ge=>{const xt=ql(Ge,k),Kt=A(Go(he,(wo,As)=>As!=="scope"&&As!=="celltype"))>0,Vn=rt(he,"celltype");(Kt||rt(he,"scope"))&&Mi(S,xt,Y,ee(rt,he)),Vn&&wg(S,Y),No(S,Ge.dom,{structure:Vn,style:Kt})})},Sm=(S,k,L,Y)=>{const he=Y.getData();Y.close(),S.undoManager.transact(()=>{Id(S,k,L,he),S.focus()})},Sg=(S,k)=>{const L=Bt(k[0]).map(Y=>Je(ql(Y,k),he=>Ht(S,he.element,Ia(S),he.column)));return ui(L.getOrDie())},eu=S=>{const k=Di(S);if(k.length===0)return;const L=Sg(S,k),Y={type:"tabpanel",tabs:[{title:"General",name:"general",items:kh(S)},lf(S,"cell")]},he={type:"panel",items:[{type:"grid",columns:2,items:kh(S)}]};S.windowManager.open({title:"Cell Properties",size:"normal",body:Ia(S)?Y:he,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:ee(Sm,S,k,L)})},Pb=S=>ii(Eu(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Mr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],ut=S=>Mr.concat(Pb(S).toArray()),el=(S,k,L)=>{L("class")&&k.class!=="mce-no-match"&&S.setAttrib("class",k.class),L("height")&&S.setStyle("height",an(k.height))},tu=(S,k,L)=>{L("backgroundcolor")&&S.setStyle("background-color",k.backgroundcolor),L("bordercolor")&&S.setStyle("border-color",k.bordercolor),L("borderstyle")&&S.setStyle("border-style",k.borderstyle)},Hc=(S,k,L,Y)=>{const Ge=k.length===1?it:Y;I(k,xt=>{const Kt=ca(lo.fromDom(xt),"td,th"),Vn=x.normal(S,xt);el(Vn,L,Ge),oi(S)&&tu(Vn,L,Ge),Y("height")&&I(Kt,wo=>{S.dom.setStyle(wo.dom,"height",null)}),Y("align")&&Jc(S,xt,L.align)})},mf=(S,k)=>{S.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},Oc=(S,k,L,Y)=>{const he=Go(Y,(Ge,xt)=>L[xt]!==Ge);if(A(he)>0){const Ge=rt(he,"type"),xt=Ge?A(he)>1:!0;xt&&Hc(S,k,Y,ee(rt,he)),Ge&&mf(S,Y),Bt(lo.fromDom(k[0])).each(Kt=>No(S,Kt.dom,{structure:Ge,style:xt}))}},ms=(S,k,L,Y)=>{const he=Y.getData();Y.close(),S.undoManager.transact(()=>{Oc(S,k,L,he),S.focus()})},Dh=S=>{const k=Eh(yn(S),Ya.selected);if(k.length===0)return;const L=Je(k,xt=>Fd(S,xt.dom,oi(S))),Y=ui(L),he={type:"tabpanel",tabs:[{title:"General",name:"general",items:ut(S)},lf(S,"row")]},Ge={type:"panel",items:[{type:"grid",columns:2,items:ut(S)}]};S.windowManager.open({title:"Row Properties",size:"normal",body:oi(S)?he:Ge,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Y,onSubmit:ee(ms,S,Je(k,xt=>xt.dom),Y)})},Ye=(S,k,L)=>{const Y=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],he=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ge=Jm(S)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],xt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Kt=k.length>0?[{name:"class",type:"listbox",label:"Class",items:k}]:[];return Y.concat(he).concat(Ge).concat(xt).concat(Kt)},is=(S,k,L,Y)=>{if(k.tagName==="TD"||k.tagName==="TH")In(L)&&Do(Y)?S.setStyle(k,L,Y):S.setStyles(k,L);else if(k.children)for(let he=0;he<k.children.length;he++)is(S,k.children[he],L,Y)},Rh=(S,k,L,Y)=>{const he=S.dom,Ge={},xt={},Kt=jl(S),Vn=si(S),wo=parseFloat(L.border)===0;if(!Oo(L.class)&&L.class!=="mce-no-match"&&(Ge.class=L.class),xt.height=an(L.height),Kt?xt.width=an(L.width):he.getAttrib(k,"width")&&(Ge.width=on(L.width)),Kt?(wo?(Ge.border=0,xt["border-width"]=""):(xt["border-width"]=an(L.border),Ge.border=1),xt["border-spacing"]=an(L.cellspacing)):(Ge.border=wo?0:L.border,Ge.cellpadding=L.cellpadding,Ge.cellspacing=L.cellspacing),Kt&&k.children){const As={};if(wo?As["border-width"]="":Y.border&&(As["border-width"]=an(L.border)),Y.cellpadding&&(As.padding=an(L.cellpadding)),Vn&&Y.bordercolor&&(As["border-color"]=L.bordercolor),!Yt(As))for(let fs=0;fs<k.children.length;fs++)is(he,k.children[fs],As)}if(Vn){const As=L;xt["background-color"]=As.backgroundcolor,xt["border-color"]=As.bordercolor,xt["border-style"]=As.borderstyle}he.setStyles(k,{...fg(S),...xt}),he.setAttribs(k,{...Ju(S),...Ge})},vc=(S,k,L,Y)=>{const he=S.dom,Ge=Y.getData(),xt=Go(Ge,(Kt,Vn)=>L[Vn]!==Kt);Y.close(),S.undoManager.transact(()=>{if(!k){const Kt=gc(Ge.cols).getOr(1),Vn=gc(Ge.rows).getOr(1);S.execCommand("mceInsertTable",!1,{rows:Vn,columns:Kt}),k=fn(yn(S),nn(S)).bind(wo=>Bt(wo,nn(S))).map(wo=>wo.dom).getOrDie()}if(A(xt)>0){const Kt={border:rt(xt,"border"),bordercolor:rt(xt,"bordercolor"),cellpadding:rt(xt,"cellpadding")};Rh(S,k,Ge,Kt);const Vn=he.select("caption",k)[0];(Vn&&!Ge.caption||!Vn&&Ge.caption)&&S.execCommand("mceTableToggleCaption"),Jc(S,k,Ge.align)}if(S.focus(),S.addVisual(),A(xt)>0){const Kt=rt(xt,"caption"),Vn=Kt?A(xt)>1:!0;No(S,k,{structure:Kt,style:Vn})}})},_a=(S,k)=>{const L=S.dom;let Y,he=Gp(S,si(S));k?(he.cols="1",he.rows="1",si(S)&&(he.borderstyle="",he.bordercolor="",he.backgroundcolor="")):(Y=L.getParent(S.selection.getStart(),"table",S.getBody()),Y?he=Ou(S,Y,si(S)):si(S)&&(he.borderstyle="",he.bordercolor="",he.backgroundcolor=""));const Ge=ii(Md(S));Ge.isSome()&&he.class&&(he.class=he.class.replace(/\s*mce\-item\-table\s*/g,""));const xt={type:"grid",columns:2,items:Ye(S,Ge.getOr([]),k)},Kt=()=>({type:"panel",items:[xt]}),Vn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[xt]},lf(S,"table")]}),wo=si(S)?Vn():Kt();S.windowManager.open({title:"Table Properties",size:"normal",body:wo,onSubmit:ee(vc,S,Y,he),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:he})},cy=S=>{const k=L=>{bs(yn(S))&&L()};xn({mceTableProps:ee(_a,S,!1),mceTableRowProps:ee(Dh,S),mceTableCellProps:ee(eu,S),mceInsertTableDialog:ee(_a,S,!0)},(L,Y)=>S.addCommand(Y,()=>k(L)))},Kl=(S,k)=>be(S,k).isSome(),ay=zn,nd=S=>{const k=(Y,he)=>Zs(Y,he).exists(Ge=>parseInt(Ge,10)>1),L=Y=>k(Y,"rowspan")||k(Y,"colspan");return S.length>0&&ln(S,L)?W.some(S):W.none()},$b=(S,k,L)=>k.length<=1?W.none():Wp(S,L.firstSelectedSelector,L.lastSelectedSelector).map(Y=>({bounds:Y,cells:k})),Yl=S=>({element:S,mergable:W.none(),unmergable:W.none(),selection:[S]}),us=(S,k,L)=>({element:L,mergable:$b(k,S,Ya),unmergable:nd(S),selection:ay(S)}),Du=S=>{const k=xr(W.none()),L=xr([]);let Y=W.none();const he=jr("caption"),Ge=Fo=>Y.forall(Tr=>!Tr[Fo]),xt=()=>cc(yn(S),nn(S)),Kt=()=>cc(yo(S),nn(S)),Vn=()=>xt().bind(Fo=>Ic(Yr(Bt(Fo),Kt().bind(Bt),(Tr,Dc)=>ws(Tr,Dc)?he(Fo)?W.some(Yl(Fo)):W.some(us(Di(S),Tr,Fo)):W.none()))),wo=Fo=>Bt(Fo.element).map(Dc=>{const Xl=wl.fromTable(Dc),_l=Fr(Xl,Fo).getOr([]),Ph=Gc(_l,(Bu,Tm)=>(Tm.isLocked&&(Bu.onAny=!0,Tm.column===0?Bu.onFirst=!0:Tm.column+Tm.colspan>=Xl.grid.columns&&(Bu.onLast=!0)),Bu),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ah(Xl,Fo).isSome(),unmergeable:Nb(Xl,Fo).isSome(),locked:Ph}}),As=()=>{k.set(_n(Vn)()),Y=k.get().bind(wo),I(L.get(),st)},fs=Fo=>(Fo(),L.set(L.get().concat([Fo])),()=>{L.set(bo(L.get(),Tr=>Tr!==Fo))}),dr=(Fo,Tr)=>fs(()=>k.get().fold(()=>{Fo.setEnabled(!1)},Dc=>{Fo.setEnabled(!Tr(Dc)&&S.selection.isEditable())})),kl=(Fo,Tr,Dc)=>fs(()=>k.get().fold(()=>{Fo.setEnabled(!1),Fo.setActive(!1)},Xl=>{Fo.setEnabled(!Tr(Xl)&&S.selection.isEditable()),Fo.setActive(Dc(Xl))})),Mu=Fo=>Y.exists(Tr=>Tr.locked[Fo]),Ha=Fo=>dr(Fo,Tr=>!1),Nu=Fo=>dr(Fo,Tr=>he(Tr.element)),Ld=Fo=>Tr=>dr(Tr,Dc=>he(Dc.element)||Mu(Fo)),ou=Fo=>Tr=>dr(Tr,Dc=>he(Dc.element)||Fo().isNone()),hf=(Fo,Tr)=>Dc=>dr(Dc,Xl=>he(Xl.element)||Fo().isNone()||Mu(Tr)),mi=Fo=>dr(Fo,Tr=>Ge("mergeable")),Mh=Fo=>dr(Fo,Tr=>Ge("unmergeable")),xg=Fo=>kl(Fo,Zn,Tr=>Bt(Tr.element,nn(S)).exists(Xl=>Kl(Xl,"caption"))),Nh=(Fo,Tr)=>Dc=>kl(Dc,Xl=>he(Xl.element),()=>S.queryCommandValue(Fo)===Tr),Bh=Nh("mceTableRowType","header"),zc=Nh("mceTableColType","th");return S.on("NodeChange ExecCommand TableSelectorChange",As),{onSetupTable:Ha,onSetupCellOrRow:Nu,onSetupColumn:Ld,onSetupPasteable:ou,onSetupPasteableColumn:hf,onSetupMergeable:mi,onSetupUnmergeable:Mh,resetTargets:As,onSetupTableWithCaption:xg,onSetupTableRowHeaders:Bh,onSetupTableColumnHeaders:zc,targets:k.get}};var xm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const yc="x-tinymce/dom-table-",Kp=yc+"rows",Ru=yc+"columns",nu=S=>{var k;const L=(k=xm.read())!==null&&k!==void 0?k:[];return fr(L,Y=>W.from(Y.getType(S)))},Js=()=>nu(Kp),ff=()=>nu(Ru),Te=S=>k=>{const L=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",L),L(),()=>{S.off("NodeChange",L)}},di=(S,k)=>{S.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Te(S),fetch:Kt=>Kt("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=Kt=>()=>S.execCommand(Kt),Y=(Kt,Vn)=>{S.queryCommandSupported(Vn.command)&&S.ui.registry.addButton(Kt,{...Vn,onAction:Ro(Vn.onAction)?Vn.onAction:L(Vn.command)})},he=(Kt,Vn)=>{S.queryCommandSupported(Vn.command)&&S.ui.registry.addToggleButton(Kt,{...Vn,onAction:Ro(Vn.onAction)?Vn.onAction:L(Vn.command)})};Y("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),Y("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),Y("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),Y("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),Y("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),Y("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),Y("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),Y("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),Y("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),Y("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),Y("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),Y("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),Y("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),Y("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),Y("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(Js)}),Y("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(Js)}),Y("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),Y("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),Y("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(ff,"onFirst")}),Y("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(ff,"onLast")}),Y("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Te(S)});const Ge=ar(Md(S));Ge.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Au(S,Ge,"tableclass",Kt=>S.execCommand("mceTableToggleClass",!1,Kt)),onSetup:k.onSetupTable});const xt=ar(xa(S));xt.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Au(S,xt,"tablecellclass",Kt=>S.execCommand("mceTableCellToggleClass",!1,Kt)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Au(S,bc,"tablecellverticalalign",Qi(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Au(S,Zl(S),"tablecellborderwidth",Qi(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Au(S,Ec(S),"tablecellborderstyle",Qi(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Kt=>Kt(El(S,dg(S),"background-color")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Kt=>Kt(El(S,Nd(S),"border-color")),onSetup:k.onSetupCellOrRow})),he("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),he("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ko(S),onSetup:k.onSetupTableRowHeaders}),he("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:td(S),onSetup:k.onSetupTableColumnHeaders})},gf=S=>{const k=Y=>S.dom.is(Y,"table")&&S.getBody().contains(Y)&&S.dom.isEditable(Y.parentNode),L=Oi(S);L.length>0&&S.ui.registry.addContextToolbar("table",{predicate:k,items:L,scope:"node",position:"node"})},fa=S=>k=>{const L=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",L),L(),()=>{S.off("NodeChange",L)}},Ni=(S,k)=>{const L=fs=>()=>S.execCommand(fs),Y=(fs,dr)=>S.queryCommandSupported(dr.command)?(S.ui.registry.addMenuItem(fs,{...dr,onAction:Ro(dr.onAction)?dr.onAction:L(dr.command)}),!0):!1,he=(fs,dr)=>{S.queryCommandSupported(dr.command)&&S.ui.registry.addToggleMenuItem(fs,{...dr,onAction:Ro(dr.onAction)?dr.onAction:L(dr.command)})},Ge=fs=>{S.execCommand("mceInsertTable",!1,{rows:fs.numRows,columns:fs.numColumns})},xt=[Y("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),Y("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),Y("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),Y("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),Y("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),Y("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),Y("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(Js)}),Y("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(Js)})],Kt=[Y("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),Y("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),Y("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),Y("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),Y("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),Y("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(ff,"onFirst")}),Y("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(ff,"onLast")})],Vn=[Y("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),Y("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),Y("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Tu(S)?S.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ge}],onSetup:fa(S)}):S.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:fa(S)}),S.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:fa(S)}),Y("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),Y("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),ft(xt,!0)&&S.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ct("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),ft(Kt,!0)&&S.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ct("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),ft(Vn,!0)&&S.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ct("tablecellprops tablemergecells tablesplitcells")}),S.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(Ct(""),fs=>ht(fs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const wo=ar(Md(S));wo.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>$d(S,wo,"tableclass",fs=>S.execCommand("mceTableToggleClass",!1,fs)),onSetup:k.onSetupTable});const As=ar(xa(S));As.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>$d(S,As,"tablecellclass",fs=>S.execCommand("mceTableCellToggleClass",!1,fs)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>$d(S,bc,"tablecellverticalalign",Qi(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>$d(S,Zl(S),"tablecellborderwidth",Qi(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>$d(S,Ec(S),"tablecellborderstyle",Qi(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>El(S,dg(S),"background-color"),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>El(S,Nd(S),"border-color"),onSetup:k.onSetupCellOrRow})),he("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),he("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ko(S),onSetup:k.onSetupTableRowHeaders}),he("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:td(S),onSetup:k.onSetupTableRowHeaders})},Jr=S=>{const k=Du(S);Or(S),cy(S),Ni(S,k),di(S,k),gf(S)};var qr=()=>{Gt.add("table",Jr)};qr()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(He=>vt=>He===vt)(null),eo=He=>He,Yn=(He,vt)=>{const je=He.length,ye=new Array(je);for(let ln=0;ln<je;ln++){const vo=He[ln];ye[ln]=vt(vo,ln)}return ye},In={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},We={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},tn=[new RegExp(In.aletter),new RegExp(In.midnumlet),new RegExp(In.midletter),new RegExp(In.midnum),new RegExp(In.numeric),new RegExp(In.cr),new RegExp(In.lf),new RegExp(In.newline),new RegExp(In.extend),new RegExp(In.format),new RegExp(In.katakana),new RegExp(In.extendnumlet),new RegExp("@")],Oo="",Zo=new RegExp("^"+In.punctuation+"$"),Do=/^\s+$/,Ro=tn,Nn=We.OTHER,jo=He=>{let vt=Nn;const je=Ro.length;for(let ye=0;ye<je;++ye){const ln=Ro[ye];if(ln&&ln.test(He)){vt=ye;break}}return vt},Wn=He=>{const vt={};return je=>{if(vt[je])return vt[je];{const ye=He(je);return vt[je]=ye,ye}}},Ct=He=>{const vt=Wn(jo);return Yn(He,vt)},zn=(He,vt)=>{const je=He[vt],ye=He[vt+1];if(vt<0||vt>He.length-1&&vt!==0||je===We.ALETTER&&ye===We.ALETTER)return!1;const ln=He[vt+2];if(je===We.ALETTER&&(ye===We.MIDLETTER||ye===We.MIDNUMLET||ye===We.AT)&&ln===We.ALETTER)return!1;const vo=He[vt-1];return(je===We.MIDLETTER||je===We.MIDNUMLET||ye===We.AT)&&ye===We.ALETTER&&vo===We.ALETTER||(je===We.NUMERIC||je===We.ALETTER)&&(ye===We.NUMERIC||ye===We.ALETTER)||(je===We.MIDNUM||je===We.MIDNUMLET)&&ye===We.NUMERIC&&vo===We.NUMERIC||je===We.NUMERIC&&(ye===We.MIDNUM||ye===We.MIDNUMLET)&&ln===We.NUMERIC||(je===We.EXTEND||je===We.FORMAT)&&(ye===We.ALETTER||ye===We.NUMERIC||ye===We.KATAKANA||ye===We.EXTEND||ye===We.FORMAT)||(ye===We.EXTEND||ye===We.FORMAT&&(ln===We.ALETTER||ln===We.NUMERIC||ln===We.KATAKANA||ln===We.EXTEND||ln===We.FORMAT))&&(je===We.ALETTER||je===We.NUMERIC||je===We.KATAKANA||je===We.EXTEND||je===We.FORMAT)||je===We.CR&&ye===We.LF?!1:je===We.NEWLINE||je===We.CR||je===We.LF||ye===We.NEWLINE||ye===We.CR||ye===We.LF?!0:!(je===We.KATAKANA&&ye===We.KATAKANA||ye===We.EXTENDNUMLET&&(je===We.ALETTER||je===We.NUMERIC||je===We.KATAKANA||je===We.EXTENDNUMLET)||je===We.EXTENDNUMLET&&(ye===We.ALETTER||ye===We.NUMERIC||ye===We.KATAKANA)||je===We.AT)},Ue=Oo,ee=Do,st=Zo,Zn=He=>He==="http"||He==="https",it=(He,vt)=>{let je;for(je=vt;je<He.length&&!ee.test(He[je]);je++);return je},W=(He,vt)=>{const je=it(He,vt+1);return He.slice(vt+1,je).join(Ue).substr(0,3)==="://"?je:vt},Dt=(He,vt,je,ye)=>{const ln=[],vo=[];let Lt=[];for(let hs=0;hs<je.length;++hs)if(Lt.push(He[hs]),zn(je,hs)){const jn=vt[hs];if((ye.includeWhitespace||!ee.test(jn))&&(ye.includePunctuation||!st.test(jn))){const fr=hs-Lt.length+1,Vo=hs+1,xs=vt.slice(fr,Vo).join(Ue);if(Zn(xs)){const oa=W(vt,hs),Us=He.slice(Vo,oa);Array.prototype.push.apply(Lt,Us),hs=oa}vt[hs+1]==="."&&/^([a-zA-Z]\.)+$/.test(xs+".")?(Lt.push(He[hs+1]),vo.push({start:fr,end:Vo+1})):vo.push({start:fr,end:Vo}),ln.push(Lt)}Lt=[]}return{words:ln,indices:vo}},cn=()=>({includeWhitespace:!1,includePunctuation:!1}),xn=(He,vt,je)=>{je={...cn(),...je};const ye=Yn(He,vt),ln=Ct(ye);return Dt(He,ye,ln,je)},ie=(He,vt,je)=>xn(He,vt,je).words,Go=He=>He.replace(/\uFEFF/g,"");var co=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Pt=(He,vt)=>{const je=vt.getBlockElements(),ye=vt.getVoidElements(),ln=fr=>je[fr.nodeName]||ye[fr.nodeName],vo=[];let Lt="";const hs=new co(He,He);let jn;for(;jn=hs.next();)jn.nodeType===3?Lt+=Go(jn.data):ln(jn)&&Lt.length&&(vo.push(Lt),Lt="");return Lt.length&&vo.push(Lt),vo},A=He=>He.replace(/\u200B/g,""),To=He=>He.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,rt=(He,vt)=>{const je=A(Pt(He,vt).join(`
`));return ie(je.split(""),eo).length},Ho=(He,vt)=>{const je=Pt(He,vt).join("");return To(je)},Yt=(He,vt)=>{const je=Pt(He,vt).join("").replace(/\s/g,"");return To(je)},Ke=(He,vt)=>()=>vt(He.getBody(),He.schema),go=(He,vt)=>()=>vt(He.selection.getRng().cloneContents(),He.schema),Vs=He=>Ke(He,rt),ft=He=>({body:{getWordCount:Vs(He),getCharacterCount:Ke(He,Ho),getCharacterCountWithoutSpaces:Ke(He,Yt)},selection:{getWordCount:go(He,rt),getCharacterCount:go(He,Ho),getCharacterCountWithoutSpaces:go(He,Yt)},getCount:Vs(He)}),pn=(He,vt)=>{He.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(vt.body.getWordCount()),String(vt.selection.getWordCount())],["Characters (no spaces)",String(vt.body.getCharacterCountWithoutSpaces()),String(vt.selection.getCharacterCountWithoutSpaces())],["Characters",String(vt.body.getCharacterCount()),String(vt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Me=(He,vt)=>{He.addCommand("mceWordCount",()=>pn(He,vt))},Je=(He,vt)=>{let je=null;return{cancel:()=>{Fn(je)||(clearTimeout(je),je=null)},throttle:(...vo)=>{Fn(je)&&(je=setTimeout(()=>{je=null,He.apply(null,vo)},vt))}}};var I=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ns=(He,vt)=>{He.dispatch("wordCountUpdate",{wordCount:{words:vt.body.getWordCount(),characters:vt.body.getCharacterCount(),charactersWithoutSpaces:vt.body.getCharacterCountWithoutSpaces()}})},ao=(He,vt)=>{Ns(He,vt)},bo=(He,vt,je)=>{const ye=Je(()=>ao(He,vt),je);He.on("init",()=>{ao(He,vt),I.setEditorTimeout(He,()=>{He.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",ye.throttle)},0),He.on("remove",ye.cancel)})},zo=He=>{const vt=()=>He.execCommand("mceWordCount");He.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:vt}),He.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:vt})};var Gc=(He=300)=>{Gt.add("wordcount",vt=>{const je=ft(vt);return Me(vt,je),zo(vt),bo(vt,je,He),je})};Gc()})();(function(){var Gt=tinymce.util.Tools.resolve("tinymce.PluginManager");const uo=(We,tn)=>{We.focus(),We.undoManager.transact(()=>{We.setContent(tn)}),We.selection.setCursorLocation(),We.nodeChanged()},Fn=We=>We.getContent({source_view:!0}),eo=We=>{const tn=Fn(We);We.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:tn},onSubmit:Oo=>{uo(We,Oo.getData().code),Oo.close()}})},Yn=We=>{We.addCommand("mceCodeEditor",()=>{eo(We)})},ro=We=>{const tn=()=>We.execCommand("mceCodeEditor");We.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:tn}),We.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:tn})};var In=()=>{Gt.add("code",We=>(Yn(We),ro(We),{}))};In()})();(function(){const Gt=ue=>{let fe=ue;return{get:()=>fe,set:Ft=>{fe=Ft}}};var uo=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(ue,fe,tt)=>{var lt;return tt(ue,fe.prototype)?!0:((lt=ue.constructor)===null||lt===void 0?void 0:lt.name)===fe.name},eo=ue=>{const fe=typeof ue;return ue===null?"null":fe==="object"&&Array.isArray(ue)?"array":fe==="object"&&Fn(ue,String,(tt,lt)=>lt.isPrototypeOf(tt))?"string":fe},Yn=ue=>fe=>eo(fe)===ue,ro=ue=>fe=>typeof fe===ue,In=Yn("string"),We=Yn("array"),tn=ro("boolean"),Oo=ue=>ue==null,Zo=ue=>!Oo(ue),Do=ro("number"),Ro=()=>{},Nn=ue=>()=>ue,jo=Nn(!0),Ct=Nn("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class zn{constructor(fe,tt){this.tag=fe,this.value=tt}static some(fe){return new zn(!0,fe)}static none(){return zn.singletonNone}fold(fe,tt){return this.tag?tt(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?zn.some(fe(this.value)):zn.none()}bind(fe){return this.tag?fe(this.value):zn.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:zn.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return Zo(fe)?zn.some(fe):zn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}zn.singletonNone=new zn(!1);const Ue=Ct;var ee=tinymce.util.Tools.resolve("tinymce.Env"),st=tinymce.util.Tools.resolve("tinymce.util.Tools");const Zn=Array.prototype.slice,it=Array.prototype.push,W=(ue,fe)=>{const tt=ue.length,lt=new Array(tt);for(let Ft=0;Ft<tt;Ft++){const dn=ue[Ft];lt[Ft]=fe(dn,Ft)}return lt},Dt=(ue,fe)=>{for(let tt=0,lt=ue.length;tt<lt;tt++){const Ft=ue[tt];fe(Ft,tt)}},cn=(ue,fe)=>{for(let tt=ue.length-1;tt>=0;tt--){const lt=ue[tt];fe(lt,tt)}},xn=(ue,fe)=>{if(ue.length===0)return[];{let tt=fe(ue[0]);const lt=[];let Ft=[];for(let dn=0,nn=ue.length;dn<nn;dn++){const on=ue[dn],an=fe(on);an!==tt&&(lt.push(Ft),Ft=[]),tt=an,Ft.push(on)}return Ft.length!==0&&lt.push(Ft),lt}},Re=(ue,fe,tt)=>(Dt(ue,(lt,Ft)=>{tt=fe(tt,lt,Ft)}),tt),ie=ue=>{const fe=[];for(let tt=0,lt=ue.length;tt<lt;++tt){if(!We(ue[tt]))throw new Error("Arr.flatten item "+tt+" was not an array, input: "+ue);it.apply(fe,ue[tt])}return fe},Go=(ue,fe)=>ie(W(ue,fe)),co=(ue,fe)=>{const tt=Zn.call(ue,0);return tt.sort(fe),tt},Pt=Object.hasOwnProperty,A=(ue,fe)=>Pt.call(ue,fe);typeof window<"u"||Function("return this;")();const To=9,rt=11,Ho=1,Yt=3,Ke=ue=>ue.dom.nodeType,Vs=(ue=>fe=>Ke(fe)===ue)(Yt),ft=(ue,fe,tt)=>{if(In(tt)||tn(tt)||Do(tt))ue.setAttribute(fe,tt+"");else throw console.error("Invalid call to Attribute.set. Key ",fe,":: Value ",tt,":: Element ",ue),new Error("Attribute value was not simple")},pn=(ue,fe,tt)=>{ft(ue.dom,fe,tt)},Me=(ue,fe)=>{const lt=(fe||document).createElement("div");if(lt.innerHTML=ue,!lt.hasChildNodes()||lt.childNodes.length>1){const Ft="HTML does not have a single root node";throw console.error(Ft,ue),new Error(Ft)}return Ns(lt.childNodes[0])},Je=(ue,fe)=>{const lt=(fe||document).createElement(ue);return Ns(lt)},I=(ue,fe)=>{const lt=(fe||document).createTextNode(ue);return Ns(lt)},Ns=ue=>{if(ue==null)throw new Error("Node cannot be null or undefined");return{dom:ue}},bo={fromHtml:Me,fromTag:Je,fromText:I,fromDom:Ns,fromPoint:(ue,fe,tt)=>zn.from(ue.dom.elementFromPoint(fe,tt)).map(Ns)},zo=ue=>ue.nodeType!==Ho&&ue.nodeType!==To&&ue.nodeType!==rt||ue.childElementCount===0,Gc=(ue,fe)=>{const tt=fe===void 0?document:fe.dom;return zo(tt)?[]:W(tt.querySelectorAll(ue),bo.fromDom)},He=ue=>zn.from(ue.dom.parentNode).map(bo.fromDom),vt=ue=>W(ue.dom.childNodes,bo.fromDom),je=(ue,fe)=>({element:ue,offset:fe}),ye=(ue,fe)=>{const tt=vt(ue);return tt.length>0&&fe<tt.length?je(tt[fe],0):je(ue,fe)},ln=(ue,fe)=>{He(ue).each(lt=>{lt.dom.insertBefore(fe.dom,ue.dom)})},vo=(ue,fe)=>{ue.dom.appendChild(fe.dom)},Lt=(ue,fe)=>{ln(ue,fe),vo(fe,ue)},jn=((ue,fe)=>{const tt=dn=>{if(!ue(dn))throw new Error("Can only get "+fe+" value of a "+fe+" node");return lt(dn).getOr("")},lt=dn=>ue(dn)?zn.from(dn.dom.nodeValue):zn.none();return{get:tt,getOption:lt,set:(dn,nn)=>{if(!ue(dn))throw new Error("Can only set raw "+fe+" value of a "+fe+" node");dn.dom.nodeValue=nn}}})(Vs,"text"),fr=ue=>jn.get(ue),Vo=(ue,fe,tt)=>(ue.compareDocumentPosition(fe)&tt)!==0,xs=(ue,fe)=>Vo(ue,fe,Node.DOCUMENT_POSITION_PRECEDING),oa=(ue,fe)=>Gc(fe,ue);var Us=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Bs=(ue,fe)=>ue.isBlock(fe)||A(ue.schema.getVoidElements(),fe.nodeName),ps=(ue,fe)=>!ue.isEditable(fe),wc=(ue,fe)=>ue.getContentEditable(fe)==="true"&&fe.parentNode&&!ue.isEditable(fe.parentNode),cs=(ue,fe)=>!ue.isBlock(fe)&&A(ue.schema.getWhitespaceElements(),fe.nodeName),ns=(ue,fe)=>Bs(ue,fe)||ps(ue,fe)||cs(ue,fe)||wc(ue,fe),lr=ue=>ue.nodeType===3,lo=()=>({sOffset:0,fOffset:0,elements:[]}),Cs=(ue,fe)=>ye(bo.fromDom(ue),fe),gr=(ue,fe,tt,lt,Ft,dn=!0)=>{let nn=dn?fe(!1):tt;for(;nn;){const on=ps(ue,nn);if(on||cs(ue,nn)){if(on?lt.cef(nn):lt.boundary(nn))break;nn=fe(!0);continue}else if(Bs(ue,nn)){if(lt.boundary(nn))break}else lr(nn)&&lt.text(nn);if(nn===Ft)break;nn=fe(!1)}},$c=(ue,fe,tt,lt,Ft)=>{var dn;if(ns(ue,tt))return;const nn=(dn=ue.getParent(lt,ue.isBlock))!==null&&dn!==void 0?dn:ue.getRoot(),on=new Us(tt,nn),an=Ft?on.next.bind(on):on.prev.bind(on);gr(ue,an,tt,{boundary:jo,cef:jo,text:yn=>{Ft?fe.fOffset+=yn.length:fe.sOffset+=yn.length,fe.elements.push(bo.fromDom(yn))}})},dc=(ue,fe,tt,lt,Ft,dn=!0)=>{const nn=new Us(tt,fe),on=[];let an=lo();$c(ue,an,tt,fe,!1);const yn=()=>(an.elements.length>0&&(on.push(an),an=lo()),!1);return gr(ue,nn.next.bind(nn),tt,{boundary:yn,cef:yo=>(yn(),Ft&&on.push(...Ft.cef(yo)),!1),text:yo=>{an.elements.push(bo.fromDom(yo)),Ft&&Ft.text(yo,an)}},lt,dn),lt&&$c(ue,an,lt,fe,!0),yn(),on},ws=(ue,fe)=>{const tt=Cs(fe.startContainer,fe.startOffset),lt=tt.element.dom,Ft=Cs(fe.endContainer,fe.endOffset),dn=Ft.element.dom;return dc(ue,fe.commonAncestorContainer,lt,dn,{text:(nn,on)=>{nn===dn?on.fOffset+=nn.length-Ft.offset:nn===lt&&(on.sOffset+=tt.offset)},cef:nn=>{const on=Go(oa(bo.fromDom(nn),"*[contenteditable=true]"),an=>{const yn=an.dom;return dc(ue,yn,yn)});return co(on,(an,yn)=>xs(an.elements[0].dom,yn.elements[0].dom)?1:-1)}},!1)},ir=(ue,fe)=>fe.collapsed?[]:ws(ue,fe),ht=(ue,fe)=>{const tt=ue.createRng();return tt.selectNode(fe),ir(ue,tt)},Mo=(ue,fe)=>Go(fe,tt=>ht(ue,tt)),_r=(ue,fe,tt=0,lt=ue.length)=>{const Ft=fe.regex;Ft.lastIndex=tt;const dn=[];let nn;for(;nn=Ft.exec(ue);){const on=nn[fe.matchIndex],an=nn.index+nn[0].indexOf(on),yn=an+on.length;if(yn>lt)break;dn.push({start:an,finish:yn}),Ft.lastIndex=yn}return dn},Kr=(ue,fe)=>{const tt=Re(ue,(lt,Ft)=>{const dn=fr(Ft),nn=lt.last,on=nn+dn.length,an=Go(fe,(yn,yo)=>yn.start<on&&yn.finish>nn?[{element:Ft,start:Math.max(nn,yn.start)-nn,finish:Math.min(on,yn.finish)-nn,matchId:yo}]:[]);return{results:lt.results.concat(an),last:on}},{results:[],last:0}).results;return xn(tt,lt=>lt.matchId)},Zr=(ue,fe)=>Go(fe,tt=>{const lt=tt.elements,Ft=W(lt,fr).join(""),dn=_r(Ft,ue,tt.sOffset,Ft.length-tt.fOffset);return Kr(lt,dn)}),Hr=(ue,fe)=>{cn(ue,(tt,lt)=>{cn(tt,Ft=>{const dn=bo.fromDom(fe.cloneNode(!1));pn(dn,"data-mce-index",lt);const nn=Ft.element.dom;if(nn.length===Ft.finish&&Ft.start===0)Lt(Ft.element,dn);else{nn.length!==Ft.finish&&nn.splitText(Ft.finish);const on=nn.splitText(Ft.start);Lt(bo.fromDom(on),dn)}})})},Jo=(ue,fe,tt,lt)=>{const Ft=ht(ue,tt),dn=Zr(fe,Ft);return Hr(dn,lt),dn.length},sc=(ue,fe,tt,lt)=>{const Ft=tt.getBookmark(),dn=ue.select("td[data-mce-selected],th[data-mce-selected]"),nn=dn.length>0?Mo(ue,dn):ir(ue,tt.getRng()),on=Zr(fe,nn);return Hr(on,lt),tt.moveToBookmark(Ft),on.length},jr=ue=>ue.getAttribute("data-mce-index"),os=(ue,fe,tt,lt)=>{const Ft=ue.dom.create("span",{"data-mce-bogus":1});Ft.className="mce-match-marker";const dn=ue.getBody();return hr(ue,fe,!1),lt?sc(ue.dom,tt,ue.selection,Ft):Jo(ue.dom,tt,dn,Ft)},un=ue=>{var fe;const tt=ue.parentNode;ue.firstChild&&tt.insertBefore(ue.firstChild,ue),(fe=ue.parentNode)===null||fe===void 0||fe.removeChild(ue)},tr=(ue,fe)=>{const tt=[],lt=st.toArray(ue.getBody().getElementsByTagName("span"));if(lt.length)for(let Ft=0;Ft<lt.length;Ft++){const dn=jr(lt[Ft]);dn===null||!dn.length||dn===fe.toString()&&tt.push(lt[Ft])}return tt},rc=(ue,fe,tt)=>{const lt=fe.get();let Ft=lt.index;const dn=ue.dom;tt?Ft+1===lt.count?Ft=0:Ft++:Ft-1===-1?Ft=lt.count-1:Ft--,dn.removeClass(tr(ue,lt.index),"mce-match-marker-selected");const nn=tr(ue,Ft);return nn.length?(dn.addClass(tr(ue,Ft),"mce-match-marker-selected"),ue.selection.scrollIntoView(nn[0]),Ft):-1},Ga=(ue,fe)=>{const tt=fe.parentNode;ue.remove(fe),tt&&ue.isEmpty(tt)&&ue.remove(tt)},qa=(ue,fe)=>{const lt="("+ue.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return fe?`(?:^|\\s|${Ue()})`+lt+`(?=$|\\s|${Ue()})`:lt},as=(ue,fe,tt,lt,Ft,dn)=>{const nn=ue.selection,on=qa(tt,Ft),an=nn.isForward(),yn={regex:new RegExp(on,lt?"g":"gi"),matchIndex:1},yo=os(ue,fe,yn,dn);if(ee.browser.isSafari()&&nn.setRng(nn.getRng(),an),yo){const bs=rc(ue,fe,!0);fe.set({index:bs,count:yo,text:tt,matchCase:lt,wholeWord:Ft,inSelection:dn})}return yo},Ws=(ue,fe)=>{const tt=rc(ue,fe,!0);fe.set({...fe.get(),index:tt})},Ps=(ue,fe)=>{const tt=rc(ue,fe,!1);fe.set({...fe.get(),index:tt})},mc=ue=>{const fe=jr(ue);return fe!==null&&fe.length>0},sa=(ue,fe,tt,lt,Ft)=>{const dn=fe.get(),nn=dn.index;let on,an=nn;lt=lt!==!1;const yn=ue.getBody(),yo=st.grep(st.toArray(yn.getElementsByTagName("span")),mc);for(let bs=0;bs<yo.length;bs++){const Sc=jr(yo[bs]);let ra=on=parseInt(Sc,10);if(Ft||ra===dn.index){for(tt.length?(yo[bs].innerText=tt,un(yo[bs])):Ga(ue.dom,yo[bs]);yo[++bs];)if(ra=parseInt(jr(yo[bs]),10),ra===on)Ga(ue.dom,yo[bs]);else{bs--;break}lt&&an--}else on>nn&&yo[bs].setAttribute("data-mce-index",String(on-1))}return fe.set({...dn,count:Ft?0:dn.count-1,index:an}),lt?Ws(ue,fe):Ps(ue,fe),!Ft&&fe.get().count>0},hr=(ue,fe,tt)=>{let lt,Ft;const dn=fe.get(),nn=st.toArray(ue.getBody().getElementsByTagName("span"));for(let on=0;on<nn.length;on++){const an=jr(nn[on]);an!==null&&an.length&&(an===dn.index.toString()&&(lt||(lt=nn[on].firstChild),Ft=nn[on].firstChild),un(nn[on]))}if(fe.set({...dn,index:-1,count:0,text:""}),lt&&Ft){const on=ue.dom.createRng();return on.setStart(lt,0),on.setEnd(Ft,Ft.data.length),tt!==!1&&ue.selection.setRng(on),on}else return},de=(ue,fe)=>fe.get().count>1,re=(ue,fe)=>fe.get().count>1,Oe=(ue,fe)=>({done:on=>hr(ue,fe,on),find:(on,an,yn,yo=!1)=>as(ue,fe,on,an,yn,yo),next:()=>Ws(ue,fe),prev:()=>Ps(ue,fe),replace:(on,an,yn)=>sa(ue,fe,on,an,yn)}),ze=ue=>{const fe=Gt(zn.none()),tt=()=>fe.get().each(ue);return{clear:()=>{tt(),fe.set(zn.none())},isSet:()=>fe.get().isSome(),get:()=>fe.get(),set:on=>{tt(),fe.set(zn.some(on))}}},sn=()=>{const ue=ze(Ro);return{...ue,on:tt=>ue.get().each(tt)}},vn=(ue,fe)=>{const tt=sn();ue.undoManager.add();const lt=st.trim(ue.selection.getContent({format:"text"})),Ft=Bn=>{Bn.setEnabled("next",de(ue,fe)),Bn.setEnabled("prev",re(ue,fe))},dn=Bn=>{const mo=Bn.getData(),Qo=fe.get();fe.set({...Qo,matchCase:mo.matchcase,wholeWord:mo.wholewords,inSelection:mo.inselection})},nn=(Bn,mo)=>{Dt(["replace","replaceall","prev","next"],Br=>Bn.setEnabled(Br,!mo))},on=(Bn,mo)=>{mo.redial(ca(Bn,mo.getData()))},an=(Bn,mo)=>{ee.browser.isSafari()&&ee.deviceType.isTouch()&&(mo==="find"||mo==="replace"||mo==="replaceall")&&Bn.focus(mo)},yn=Bn=>{hr(ue,fe,!1),nn(Bn,!0),Ft(Bn)},yo=Bn=>{const mo=Bn.getData(),Qo=fe.get();if(!mo.findtext.length){yn(Bn);return}if(Qo.text===mo.findtext&&Qo.matchCase===mo.matchcase&&Qo.wholeWord===mo.wholewords)Ws(ue,fe);else{const fc=as(ue,fe,mo.findtext,mo.matchcase,mo.wholewords,mo.inselection);fc<=0&&on(!0,Bn),nn(Bn,fc===0)}Ft(Bn)},bs=fe.get(),Sc={findtext:lt,replacetext:"",wholewords:bs.wholeWord,matchcase:bs.matchCase,inselection:bs.inSelection},ra=Bn=>{const mo=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Bn&&mo.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),mo},ca=(Bn,mo)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:ra(Bn)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:mo,onChange:(Qo,fc)=>{Bn&&on(!1,Qo),fc.name==="findtext"&&fe.get().count>0&&yn(Qo)},onAction:(Qo,fc)=>{const Br=Qo.getData();switch(fc.name){case"find":yo(Qo);break;case"replace":sa(ue,fe,Br.replacetext)?Ft(Qo):yn(Qo);break;case"replaceall":sa(ue,fe,Br.replacetext,!0,!0),yn(Qo);break;case"prev":Ps(ue,fe),Ft(Qo);break;case"next":Ws(ue,fe),Ft(Qo);break;case"matchcase":case"wholewords":case"inselection":on(!1,Qo),dn(Qo),yn(Qo);break}an(Qo,fc.name)},onSubmit:Qo=>{yo(Qo),an(Qo,"find")},onClose:()=>{ue.focus(),hr(ue,fe),ue.undoManager.add()}});tt.set(ue.windowManager.open(ca(!1,Sc),{inline:"toolbar"}))},Xn=(ue,fe)=>{ue.addCommand("SearchReplace",()=>{vn(ue,fe)})},Ts=(ue,fe)=>()=>{vn(ue,fe)},be=(ue,fe)=>{ue.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Ts(ue,fe),icon:"search"}),ue.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Ts(ue,fe),icon:"search",shortcut:"Meta+F"}),ue.shortcuts.add("Meta+F","",Ts(ue,fe))};var Hn=()=>{uo.add("searchreplace",ue=>{const fe=Gt({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Xn(ue,fe),be(ue,fe),Oe(ue,fe)})};Hn()})();const Kq={style:{"margin-bottom":"0"}},Yq=["innerHTML"],cq=nq({__name:"tinymce",setup(Gt){const uo=xq(),Fn=Dj({language_url:"tinymce/langs/zh-Hans.js",language:"zh-Hans",skin_url:uo.settings.app.colorScheme==="light"?"tinymce/skins/ui/oxide":"tinymce/skins/ui/oxide-dark",content_css:uo.settings.app.colorScheme==="light"?"tinymce/skins/content/default/content.min.css":"tinymce/skins/content/dark/content.min.css",min_height:250,max_height:600,selector:"textarea",plugins:"autolink autoresize fullscreen image insertdatetime link lists media preview table wordcount code searchreplace",toolbar:"undo redo | blocks | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor removeformat | link image media table insertdatetime searchreplace | preview code fullscreen",branding:!1,menubar:!1,toolbar_mode:"sliding",insertdatetime_formats:["%Y年%m月%d日","%H点%M分%S秒","%Y-%m-%d","%H:%M:%S"],images_upload_handler:ro=>new Promise(In=>{const We=`data:image/jpeg;base64,${ro.base64()}`;In(We)})}),eo=Dj("<h1>Fantastic-admin</h1>");oq(()=>{Nq.init({})});function Yn(ro){window.open(ro,"_blank")}return(ro,In)=>{const We=kj("ElTag"),tn=kj("el-link"),Oo=_q,Zo=kj("ElButton"),Do=Dq,Ro=Aq;return Tq(),Eq("div",null,[ry(Rq),ry(Do,{title:"TinyMCE 编辑器"},{content:Fw(()=>[_j("p",null,[Uk(" 安装命令："),ry(We,null,{default:Fw(()=>[Uk("pnpm add tinymce @tinymce/tinymce-vue")]),_:1})]),_j("p",Kq,[Uk(" 安装成功后，在框架 /public 目录下创建 tinymce 文件夹，并将 /node_modules/tinymce 目录下的 skins 文件夹复制到 /public/tinymce 目录下；然后在到 TinyMCE 官网 "),ry(tn,{type:"primary",href:"https://www.tiny.cloud/get-tiny/language-packages/",target:"_blank"},{default:Fw(()=>[Uk(" 下载中文语言包 ")]),_:1}),Uk(" ，解压并放到 /public/tinymce 目录下。 ")])]),default:Fw(()=>[ry(Zo,{onClick:In[0]||(In[0]=Nn=>Yn("https://github.com/tinymce/tinymce"))},{icon:Fw(()=>[ry(Oo,{name:"i-ep:link"})]),default:Fw(()=>[Uk(" 访问 TinyMCE ")]),_:1})]),_:1}),ry(Ro,null,{default:Fw(()=>[ry(a6(qq),{modelValue:a6(eo),"onUpdate:modelValue":In[1]||(In[1]=Nn=>kq(eo)?eo.value=Nn:null),init:a6(Fn)},null,8,["modelValue","init"]),_j("div",{class:"preview",innerHTML:a6(eo)},null,8,Yq)]),_:1})])}}});typeof JG=="function"&&JG(cq);const tK=Oq(cq,[["__scopeId","data-v-7ad09f86"]]);export{tK as default};
