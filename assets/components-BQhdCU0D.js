
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{c7 as r,a6 as Uo,ah as xo,c as _e,aa as Il,h as We,P as Et,af as f,d as Po,r as qe,a9 as zl,aX as Xl,a8 as ce,ai as Ri,aO as bn,aG as Qa,c8 as Ja,cc as ec,aI as ur}from"./bootstrap-CFLGDgEx.js";const tc="4.0.29",ql={coreVersion:tc,uiVersion:"",tableVersion:""};var fn=null,_s=null,yl=null,$r="z-index-manage",Hl=null,Br="z-index-style",Si="m",Oi="s",Hn={m:1e3,s:1e3};function fr(){return fn||typeof document<"u"&&(fn=document),fn}function Ti(){return fn&&!_s&&(_s=fn.body||fn.getElementsByTagName("body")[0]),_s}function oc(){var e=0,o=fr();if(o){var n=Ti();if(n)for(var a=n.getElementsByTagName("*"),v=0;v<a.length;v++){var m=a[v];if(m&&m.style&&m.nodeType===1){var E=m.style.zIndex;E&&/^\d+$/.test(E)&&(e=Math.max(e,Number(E)))}}}return e}function lc(){if(!Hl){var e=fr();e&&(Hl=e.getElementById(Br),Hl||(Hl=e.createElement("style"),Hl.id=Br,e.getElementsByTagName("head")[0].appendChild(Hl)))}return Hl}function Mi(){var e=lc();if(e){var o="--dom-",n="-z-index";e.innerHTML=":root{"+o+"main"+n+":"+Cs()+";"+o+"sub"+n+":"+gr()+"}"}}function Di(){if(!yl){var e=fr();if(e&&(yl=e.getElementById($r),!yl)){var o=Ti();o&&(yl=e.createElement("div"),yl.id=$r,yl.style.display="none",o.appendChild(yl),hr(Hn.m),pr(Hn.s))}}return yl}function Ii(e){return function(o){if(o){o=Number(o),Hn[e]=o;var n=Di();n&&(n.dataset?n.dataset[e]=o+"":n.setAttribute("data-"+e,o+""))}return Mi(),Hn[e]}}var hr=Ii(Si);function Fi(e,o){return function(a){var v,m=Di();if(m){var E=m.dataset?m.dataset[e]:m.getAttribute("data-"+e);E&&(v=Number(E))}return v||(v=Hn[e]),a?Number(a)<v?o():a:v}}var Cs=Fi(Si,ki);function ki(){return hr(Cs()+1)}var pr=Ii(Oi),Ai=Fi(Oi,Li);function gr(){return Cs()+Ai()}function Li(){return pr(Ai()+1),gr()}var mr={setCurrent:hr,getCurrent:Cs,getNext:ki,setSubCurrent:pr,getSubCurrent:gr,getSubNext:Li,getMax:oc};Mi();const vn={size:"",version:1,zIndex:999,resizeInterval:500},$i={theme:""};function br(e){const o=!e||e==="default"?"light":e;if($i.theme=o,typeof document<"u"){const n=document.documentElement;n&&n.setAttribute("data-vxe-ui-theme",o)}return ql}function nc(){return $i.theme}function sc(e){return e&&(e.zIndex&&mr.setCurrent(e.zIndex),e.theme&&br(e.theme),r.merge(vn,e)),ql}function rc(e,o){return arguments.length?r.get(vn,e,o):vn}const ic={},or={};function ac(e){return e&&Object.assign(or,e),ql}function cc(e){return arguments.length?r.get(or,e):or}const jl={F2:"F2",ESCAPE:"Escape",ENTER:"Enter",TAB:"Tab",DELETE:"Delete",BACKSPACE:"Backspace",SPACEBAR:" ",CONTEXT_MENU:"ContextMenu",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",R:"R",P:"P",Z:"Z",X:"X",C:"C",V:"V",M:"M"},lr=r.browse(),Hr={" ":"Spacebar",Apps:jl.CONTEXT_MENU,Del:jl.DELETE,Up:jl.ARROW_UP,Down:jl.ARROW_DOWN,Left:jl.ARROW_LEFT,Right:jl.ARROW_RIGHT},Bi=lr.firefox?"DOMMouseScroll":"mousewheel",nr=[];function ml(e){const o=e.type===Bi;nr.forEach(({type:n,cb:a})=>{e.cancelBubble||(n===e.type||o&&n==="mousewheel")&&a(e)})}class dc{constructor(o,n,a){Object.defineProperty(this,"$event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"key",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:""}),this.$event=o,o&&(o.type&&(this.type=o.type),o.key&&(this.key=o.key),o.code&&(this.code=o.code)),Object.assign(this,n,a)}stopPropagation(){const o=this.$event;o&&o.stopPropagation()}preventDefault(){const o=this.$event;o&&o.preventDefault()}}const uc=(e,o,n)=>new dc(e,o,n),fc={on(e,o,n){nr.push({comp:e,type:o,cb:n})},off(e,o){r.remove(nr,n=>n.comp===e&&n.type===o)},hasKey(e,o){const{key:n}=e;return o=o.toLowerCase(),n?o===n.toLowerCase()||!!(Hr[n]&&Hr[n].toLowerCase()===o):!1}};lr.isDoc&&(lr.msie||(window.addEventListener("copy",ml,!1),window.addEventListener("cut",ml,!1),window.addEventListener("paste",ml,!1)),document.addEventListener("keydown",ml,!1),document.addEventListener("contextmenu",ml,!1),window.addEventListener("mousedown",ml,!1),window.addEventListener("blur",ml,!1),window.addEventListener("resize",ml,!1),window.addEventListener(Bi,r.throttle(ml,100,{leading:!0,trailing:!1}),{passive:!0,capture:!1}));let Pr;const Nl=[],hc=500;function pc(){Nl.length&&(Nl.forEach(e=>{e.tarList.forEach(o=>{const{target:n,width:a,heighe:v}=o,m=n.clientWidth,E=n.clientHeight;(m&&a!==m||E&&v!==E)&&(o.width=m,o.heighe=E,setTimeout(e.callback))})}),Hi())}function Hi(){clearTimeout(Pr),Pr=setTimeout(pc,vn.resizeInterval||hc)}class gc{constructor(o){Object.defineProperty(this,"tarList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=o}observe(o){if(o){const{tarList:n}=this;n.some(a=>a.target===o)||n.push({target:o,width:o.clientWidth,heighe:o.clientHeight}),Nl.length||Hi(),Nl.some(a=>a===this)||Nl.push(this)}}unobserve(o){r.remove(Nl,n=>n.tarList.some(a=>a.target===o))}disconnect(){r.remove(Nl,o=>o===this)}}const mc={create(e){return window.ResizeObserver?new window.ResizeObserver(e):new gc(e)}},Pn=Uo({language:"",langMaps:{}});let jr=!1;function Pi(e,o){const{langMaps:n,language:a}=Pn,{i18n:v}=vn;return v?`${v(e,o)||""}`:(jr||(n[a]||console.error(`[vxe core] 语言包未安装。Language not installed. https://${ql.uiVersion?"vxeui.com":"vxetable.cn"}/#/start/i18n`),jr=!0),r.toFormatString(r.get(n[a],e,e),o))}function bc(e){return Pn.language=e||"zh-CN",ql}function vc(e,o){return Pn.langMaps[e]=Object.assign({},o),ql}function xc(e){const{langMaps:o}=Pn;return!!o[e]}function Cc(){const{language:e}=Pn;return e}function Ws(e,o){return function(n,a){const v=`[vxe ${o||""}] ${Pi(n,a)}`;return console[e](v),v}}const Vr="4.0.29",wc={create:Ws,warn:Ws("warn",`v${Vr}`),err:Ws("error",`v${Vr}`)},Dn={},rn={mixin(e){return r.each(e,(o,n)=>rn.add(n,o)),rn},get(e){return Dn[e]||null},add(e,o){if(e&&o){const n=Dn[e];n?Object.assign(n,o):Dn[e]=o}return rn},forEach(e){return r.objectEach(Dn,e),rn},delete(e){return delete Dn[e],rn}};class ji{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const Ec=new ji;class yc{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={menuMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const Rc=new yc;class Sc{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={cellFormatMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const Oc=new Sc;class Tc{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={commandMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const Mc=new Tc,In={},fs={mixin(e){return r.each(e,(o,n)=>{fs.add(n,o)}),fs},get(e){return In[e]||[]},add(e,o){r.isFunction(o)&&(o={tableInterceptorMethod:o});const n=o.tableInterceptorMethod;if(n){let a=In[e];a||(a=In[e]=[]),a.push(n)}return fs},delete(e,o){const n=In[e];if(n){r.isFunction(o)&&(o={tableInterceptorMethod:o});const a=o?o.tableInterceptorMethod:null;a?r.remove(n,v=>v===a):delete In[e]}}};let sl;const Fn={text:"",html:""};function Dc(e){if(!sl){sl=document.createElement("textarea"),sl.id="$VxeCopy";const o=sl.style;o.width="48px",o.height="24px",o.position="fixed",o.zIndex="0",o.left="-500px",o.top="-500px",document.body.appendChild(sl)}sl.value=e}const Ic={getStore(){return Fn},setStore(e){Object.assign(Fn,e||{})},copy(e){let o=!1;try{const n=r.toValueString(e);Dc(n),sl.select(),sl.setSelectionRange(0,sl.value.length),o=document.execCommand("copy"),sl.blur(),Fn.text=n,Fn.html=""}catch{}return o},getText(){return Fn.text||""}};function hs(e,o){let n=!0,a=!1;const v=o||vn.permissionMethod;if(e&&v){n=!1,a=!0;let E=!1,I=!1;const H=String(e).split("|");for(let u=0;u<H.length;u++){const d=H[u];let b=!0,B=!1;const j=v({code:d});if(r.isBoolean(j)?b=j:j&&(b=!!j.visible,B=!!j.disabled),!B&&!I&&(I=!0,a=B),b&&!E&&(E=!0,n=b),E&&I)break}}return{code:e,visible:n,disabled:a}}const Fc={getCheckInfo(e){return hs(e)},checkVisible(e){return hs(e).visible},checkDisable(e){return hs(e).disabled}},kc=new ji;function Ac(e){const o=xo("xeSizeInfo",null),n=_e(()=>e.size||(o?o.value:null));return Il("xeSizeInfo",n),{computeSize:n}}function Lc(e){return{computePermissionInfo:_e(()=>hs(e.permissionCode,e.permissionMethod))}}const $c={useSize:Ac,usePermission:Lc},Nr=[];function Bc(e,o){return e&&e.install&&Nr.indexOf(e)===-1&&(e.install(te,o),Nr.push(e)),te}const Vi={};function Hc(e){return Vi[e]||null}function Pc(e){e&&e.name&&(Vi[e.name]=e)}function jc(){return We()}const te=Object.assign(ql,{renderEmptyElement:jc,setTheme:br,getTheme:nc,setConfig:sc,getConfig:rc,setIcon:ac,getIcon:cc,setLanguage:bc,hasLanguage:xc,getLanguage:Cc,setI18n:vc,getI18n:Pi,globalEvents:fc,GLOBAL_EVENT_KEYS:jl,createEvent:uc,globalResize:mc,renderer:rn,validators:Ec,menus:Rc,formats:Oc,commands:Mc,interceptor:fs,clipboard:Ic,log:wc,permission:Fc,globalStore:ic,hooks:kc,component:Pc,getComponent:Hc,useFns:$c,use:Bc});br();function ft(e){return e&&e.enabled!==!1}function Ni(e){return e==null||e===""}function _i(e){const o=e.name,n=r.lastIndexOf(o,"."),a=o.substring(n+1,o.length).toLowerCase();return{filename:o.substring(0,n),type:a}}function Wi(){return mr.getNext()}function zi(){return mr.getCurrent()}function cn(e){return e&&e.children&&e.children.length>0}function cl(e,o){if(e){const n=te.getConfig().translate;return r.toValueString(n?n(""+e,o):e)}return""}function to(e,o){return""+(Ni(e)?o?te.getConfig().emptyCell:"":e)}function rl(e){return e===""||r.eqNull(e)}const vr="4.10.5";te.version=vr;te.tableVersion=vr;te.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{maxFixedSize:4},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},treeConfig:{rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},scrollX:{gt:60},scrollY:{gt:100}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showResponseMsg:!0,showActiveMsg:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}});const bt="vxe-table-icon-";te.setIcon({TABLE_SORT_ASC:bt+"caret-up",TABLE_SORT_DESC:bt+"caret-down",TABLE_FILTER_NONE:bt+"funnel",TABLE_FILTER_MATCH:bt+"funnel",TABLE_EDIT:bt+"edit",TABLE_TITLE_PREFIX:bt+"question-circle-fill",TABLE_TITLE_SUFFIX:bt+"question-circle-fill",TABLE_TREE_LOADED:bt+"spinner roll",TABLE_TREE_OPEN:bt+"caret-right rotate90",TABLE_TREE_CLOSE:bt+"caret-right",TABLE_EXPAND_LOADED:bt+"spinner roll",TABLE_EXPAND_OPEN:bt+"arrow-right rotate90",TABLE_EXPAND_CLOSE:bt+"arrow-right",TABLE_CHECKBOX_CHECKED:bt+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:bt+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:bt+"checkbox-indeterminate-fill",TABLE_RADIO_CHECKED:bt+"radio-checked-fill",TABLE_RADIO_UNCHECKED:bt+"radio-unchecked",TABLE_CUSTOM_SORT:bt+"drag-handle",TABLE_MENU_OPTIONS:bt+"arrow-right",TABLE_DRAG_ROW:bt+"drag-handle",TABLE_DRAG_COLUMN:bt+"drag-handle",TABLE_DRAG_STATUS_ROW:bt+"sort",TABLE_DRAG_STATUS_SUB_ROW:bt+"add-sub",TABLE_DRAG_STATUS_COLUMN:bt+"swap",TABLE_DRAG_DISABLED:bt+"no-drop",TOOLBAR_TOOLS_REFRESH:bt+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:bt+"repeat roll",TOOLBAR_TOOLS_IMPORT:bt+"upload",TOOLBAR_TOOLS_EXPORT:bt+"download",TOOLBAR_TOOLS_PRINT:bt+"print",TOOLBAR_TOOLS_FULLSCREEN:bt+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:bt+"minimize",TOOLBAR_TOOLS_CUSTOM:bt+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:bt+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:bt+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:bt+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:bt+"fixed-right-fill"});const Vc=te.setTheme,Nc=te.getTheme,_c=te.setConfig,Wc=te.getConfig,zc=te.setIcon,Xc=te.getIcon,qc=te.setLanguage,Kc=te.setI18n,Uc=te.getI18n,Yc=te.globalEvents,Gc=te.globalResize,Zc=te.renderer,Qc=te.validators,Jc=te.menus,ed=te.formats,td=te.commands,od=te.interceptor,ld=te.clipboard,nd=te.log,sd=te.hooks,rd=te.use,Xi=e=>te.setConfig(e);te.setup=Xi;const qi=e=>te.setConfig(e);te.config=qi;const Ki=(e,o)=>te.getI18n(e,o);te.t=Ki;const Ui=(e,o)=>cl(e,o);te._t=Ui;const id=te,ad=e=>te.saveFile(e),cd=e=>te.readFile(e),dd=e=>te.print(e),ud={get(e){return te.modal.get(e)},close(e){return te.modal.close(e)},open(e){return te.modal.open(e)},alert(e,o,n){return te.modal.alert(e,o,n)},confirm(e,o,n){return te.modal.confirm(e,o,n)},message(e,o){return te.modal.message(e,o)},notification(e,o,n){return te.modal.notification(e,o,n)}},{log:Yi}=te,Gi="table v4.10.5",an=Yi.create("warn",Gi),zt=Yi.create("error",Gi),{getI18n:fd,formats:Qu}=te;class sr{constructor(o,n,{renderHeader:a,renderCell:v,renderFooter:m,renderData:E}={}){const I=o.xegrid,H=n.formatter,u=r.isBoolean(n.visible)?n.visible:!0;if(Object.assign(this,{type:n.type,property:n.field,field:n.field,title:n.title,width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth,resizable:n.resizable,fixed:n.fixed,align:n.align,headerAlign:n.headerAlign,footerAlign:n.footerAlign,showOverflow:n.showOverflow,showHeaderOverflow:n.showHeaderOverflow,showFooterOverflow:n.showFooterOverflow,className:n.className,headerClassName:n.headerClassName,footerClassName:n.footerClassName,formatter:H,footerFormatter:n.footerFormatter,sortable:n.sortable,sortBy:n.sortBy,sortType:n.sortType,filters:ta(n.filters),filterMultiple:r.isBoolean(n.filterMultiple)?n.filterMultiple:!0,filterMethod:n.filterMethod,filterResetMethod:n.filterResetMethod,filterRecoverMethod:n.filterRecoverMethod,filterRender:n.filterRender,treeNode:n.treeNode,dragSort:n.dragSort,cellType:n.cellType,cellRender:n.cellRender,editRender:n.editRender,contentRender:n.contentRender,headerExportMethod:n.headerExportMethod,exportMethod:n.exportMethod,footerExportMethod:n.footerExportMethod,titleHelp:n.titleHelp,titlePrefix:n.titlePrefix,titleSuffix:n.titleSuffix,params:n.params,id:n.colId||r.uniqueId("col_"),parentId:null,visible:u,halfVisible:!1,defaultVisible:u,defaultFixed:n.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:a||n.renderHeader,renderCell:v||n.renderCell,renderFooter:m||n.renderFooter,renderData:E,slots:n.slots}),I){const{computeProxyOpts:d}=I.getComputeMaps(),b=d.value;b.beforeColumn&&b.beforeColumn({$grid:I,column:this})}}getTitle(){return cl(this.title||(this.type==="seq"?fd("vxe.table.seqTitle"):""))}getKey(){const{type:o}=this;return this.field||(o?`type=${o}`:null)}update(o,n){o!=="filters"&&(o==="field"&&(this.property=n),this[o]=n)}}const zs={},dn=r.browse();let un;function Zi(){return un||(un=new Image,un.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),un}function rr(){return un||Zi()}function Tl(e,o){return e?r.isFunction(e)?e(o):e:""}function Qi(e){return zs[e]||(zs[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),zs[e]}function Ji(e,o,n){if(e){const a=e.parentNode;if(n.top+=e.offsetTop,n.left+=e.offsetLeft,a&&a!==document.documentElement&&a!==document.body&&(n.top-=a.scrollTop,n.left-=a.scrollLeft),!(o&&(e===o||e.offsetParent===o))&&e.offsetParent)return Ji(e.offsetParent,o,n)}return n}function ir(e){return e&&/^\d+(px)?$/.test(e)}function $n(e){return e&&/^\d+%$/.test(e)}function Wl(e,o){return e&&e.className&&e.className.match&&e.className.match(Qi(o))}function Ho(e,o){e&&Wl(e,o)&&(e.className=e.className.replace(Qi(o),""))}function il(e,o){e&&!Wl(e,o)&&(Ho(e,o),e.className=`${e.className} ${o}`)}function _r(e,o="px"){return r.isNumber(e)||/^\d+$/.test(`${e}`)?`${e}${o}`:`${e||""}`}function ws(){const e=document.documentElement,o=document.body;return{scrollTop:e.scrollTop||o.scrollTop,scrollLeft:e.scrollLeft||o.scrollLeft,visibleHeight:e.clientHeight||o.clientHeight,visibleWidth:e.clientWidth||o.clientWidth}}function kn(e){return e?e.offsetHeight:0}function ar(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.paddingTop),a=r.toNumber(o.paddingBottom);return n+a}return 0}function Wt(e,o){e&&(e.scrollTop=o)}function eo(e,o){e&&(e.scrollLeft=o)}function xr(e,o){const n=o.type==="html"?e.innerText:e.textContent;e.getAttribute("title")!==n&&e.setAttribute("title",n)}function vt(e,o,n,a){let v,m=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;m&&m.nodeType&&m!==document;){if(n&&Wl(m,n)&&(!a||a(m)))v=m;else if(m===o)return{flag:n?!!v:!0,container:o,targetElem:v};m=m.parentNode}return{flag:!1}}function hd(e,o){return Ji(e,o,{left:0,top:0})}function ps(e){const o=e.getBoundingClientRect(),n=o.top,a=o.left,{scrollTop:v,scrollLeft:m,visibleHeight:E,visibleWidth:I}=ws();return{boundingTop:n,top:v+n,boundingLeft:a,left:m+a,visibleHeight:E,visibleWidth:I}}const Wr="scrollIntoViewIfNeeded",zr="scrollIntoView";function pd(e){e&&(e[Wr]?e[Wr]():e[zr]&&e[zr]())}function gd(e,o){e&&e.dispatchEvent(new Event(o))}function Xs(e){return e&&e.nodeType===1}const ea=(e,o)=>{const n=[];return e.forEach(a=>{a.parentId=o?o.id:null,a.visible&&(a.children&&a.children.length&&a.children.some(v=>v.visible)?(n.push(a),n.push(...ea(a.children,a))):n.push(a))}),n},md=e=>{let o=1;const n=(m,E)=>{if(E&&(m.level=E.level+1,o<m.level&&(o=m.level)),m.children&&m.children.length&&m.children.some(I=>I.visible)){let I=0;m.children.forEach(H=>{H.visible&&(n(H,m),I+=H.colSpan)}),m.colSpan=I}else m.colSpan=1};e.forEach(m=>{m.level=1,n(m)});const a=[];for(let m=0;m<o;m++)a.push([]);return ea(e).forEach(m=>{m.children&&m.children.length&&m.children.some(E=>E.visible)?m.rowSpan=1:m.rowSpan=o-m.level+1,a[m.level-1].push(m)}),a};function qs(e,o,n){const a=e.internalData;return e.clearScroll().then(()=>{if(o||n)return a.lastScrollLeft=0,a.lastScrollTop=0,a.inVirtualScroll=!1,a.inBodyScroll=!1,a.inFooterScroll=!1,a.bodyScrollType="",e.scrollTo(o,n)})}function Ks(){return r.uniqueId("row_")}function xl(e){const{props:o}=e,{computeRowOpts:n}=e.getComputeMaps(),{rowId:a}=o,v=n.value;return a||v.keyField||"_X_ROW_KEY"}function Re(e,o){const n=r.get(o,xl(e));return r.eqNull(n)?"":encodeURIComponent(n)}const Yt=(e,o)=>o?r.isString(o)?e.getColumnByField(o):o:null;function es(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.paddingLeft),a=r.toNumber(o.paddingRight);return n+a}return 0}function Ql(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.marginLeft),a=r.toNumber(o.marginRight);return e.offsetWidth+n+a}return 0}function bl(e,o){return e.querySelector(".vxe-cell"+o)}function ta(e){return e&&r.isArray(e)?e.map(({label:o,value:n,data:a,resetValue:v,checked:m})=>({label:o,value:n,data:a,resetValue:v,checked:!!m,_checked:!!m})):e}function bd(e){return e.map((o,n)=>n%2===0?Number(o)+1:".").join("")}function io(e,o){return r.get(e,o.field)}function al(e,o,n){return r.set(e,o.field,n)}function So(e){if(e){const o=e.value;if(o)return o.$el||o}return null}function oa(e){const{$table:o,column:n,cell:a}=e,{props:v}=o,{computeResizableOpts:m}=o.getComputeMaps(),E=m.value,{minWidth:I}=E;if(I){const D=r.isFunction(I)?I(e):I;if(D!=="auto")return Math.max(1,r.toNumber(D))}const{showHeaderOverflow:H}=v,{showHeaderOverflow:u,minWidth:d}=n,b=r.isUndefined(u)||r.isNull(u)?H:u,$=b==="title"||(b===!0||b==="tooltip")||b==="ellipsis",A=r.floor((r.toNumber(getComputedStyle(a).fontSize)||14)*1.6),T=es(a)+es(bl(a,""));let F=A+T;if($){const D=es(bl(a,">.vxe-cell--drag-handle")),w=es(bl(a,">.vxe-cell--checkbox")),C=Ql(bl(a,">.vxe-cell--required-icon")),R=Ql(bl(a,">.vxe-cell--edit-icon")),M=Ql(bl(a,">.vxe-cell-title-prefix-icon")),_=Ql(bl(a,">.vxe-cell-title-suffix-icon")),re=Ql(bl(a,">.vxe-cell--sort")),ue=Ql(bl(a,">.vxe-cell--filter"));F+=D+w+C+R+M+_+ue+re}if(d){const{refTableBody:D}=o.getRefMaps(),w=D.value,C=w?w.$el:null;if(C){if($n(d)){const M=(C.clientWidth-1)/100;return Math.max(F,Math.floor(r.toInteger(d)*M))}else if(ir(d))return Math.max(F,r.toInteger(d))}}return F}function gs(e){return e&&(e.constructor===sr||e instanceof sr)}function vd(e,o,n){return gs(o)?o:Uo(new sr(e,o,n))}function la(e,o,n){Object.keys(o).forEach(a=>{Et(()=>o[a],v=>{n.update(a,v),e&&(a==="filters"?(e.setFilter(n,v),e.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(a)&&e.handleRefreshColumnQueue())})})}function na(e,o,n,a){const{reactData:v}=e,{staticColumns:m}=v,E=o.parentNode,I=a?a.columnConfig:null,H=I?I.children:m;E&&H&&(H.splice(r.arrayIndexOf(E.children,o),0,n),v.staticColumns=m.slice(0))}function sa(e,o){const{reactData:n}=e,{staticColumns:a}=n,v=r.findTree(a,m=>m.id===o.id,{children:"children"});v&&v.items.splice(v.index,1),n.staticColumns=a.slice(0)}function Xr(e,o){const{internalData:n}=e,{fullColumnIdData:a}=n;if(!o)return null;let v=o.parentId;for(;a[v];){const m=a[v].column;if(v=m.parentId,!v)return m}return o}const xd={mini:3,small:2,medium:1},ra=(e,o)=>{let n=1;if(!e)return n;const{$table:a}=o,{computeTreeOpts:v}=a.getComputeMaps(),m=v.value,{transform:E,mapChildrenField:I}=m,H=m.children||m.childrenField,u=e[E?I:H];if(u&&a.isTreeExpandByRow(e))for(let d=0;d<u.length;d++)n+=ra(u[d],o);return n},ia=e=>{const{computeSize:o}=e.getComputeMaps(),n=o.value;return n&&xd[n]||0};function Cd(e,o){const{$table:n}=e,a=n.reactData;let v=1;return o&&(v=ra(o,e)),a.rowHeight*v-(o?1:12-ia(n))}function aa(e,o,n){for(let a=0;a<e.length;a++){const{row:v,col:m,rowspan:E,colspan:I}=e[a];if(m>-1&&v>-1&&E&&I){if(v===o&&m===n)return{rowspan:E,colspan:I};if(o>=v&&o<v+E&&n>=m&&n<m+I)return{rowspan:0,colspan:0}}}}function wd(e){const{props:o,internalData:n}=e;return n.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearPendingRow(),e.clearFilter&&e.clearFilter(),e.clearSelected&&(o.keyboardConfig||o.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&o.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}function Ed(e){return e.clearFilter&&e.clearFilter(),wd(e)}function qr(e,o){const{reactData:n,internalData:a}=e,v=e.props,{showOverflow:m}=v,{refTableBody:E}=e.getRefMaps(),{columnStore:I,scrollYLoad:H}=n,{afterFullData:u,scrollYStore:d,fullAllDataRowIdData:b}=a,{rowHeight:B}=d,j=E.value,{leftList:Z,rightList:$}=I,A=j?j.$el:null,T=Re(e,o);let F=0;Z.forEach(w=>{F+=w.renderWidth});let D=0;if($.forEach(w=>{D+=w.renderWidth}),A){const w=A.clientHeight,C=A.scrollTop,R=A.querySelector(`[rowid="${T}"]`);if(R){const M=R.offsetParent,_=R.offsetTop+(M?M.offsetTop:0),re=R.clientHeight;if(_<C||_>C+w)return e.scrollTo(null,_);if(_+re>=w+C)return e.scrollTo(null,C+re)}else if(H){if(m)return e.scrollTo(null,(e.findRowIndexOf(u,o)-1)*B);let M=0;const _=b[T],re=_&&_.height||B;for(let ue=0;ue<u.length;ue++){const ee=u[ue],V=Re(e,ee);if(ee===o||V===T)break;const Q=b[V];M+=Q&&Q.height||B}return M<C?e.scrollTo(null,M-F-1):e.scrollTo(null,M+re-(w-D-1))}}return Promise.resolve()}function Kr(e,o,n){const{reactData:a,internalData:v}=e,{refTableBody:m}=e.getRefMaps(),{columnStore:E,scrollXLoad:I}=a,{visibleColumn:H}=v,{leftList:u,rightList:d}=E,b=m.value,B=b?b.$el:null;if(o.fixed)return Promise.resolve();let j=0;u.forEach($=>{j+=$.renderWidth});let Z=0;if(d.forEach($=>{Z+=$.renderWidth}),B){const $=B.clientWidth,A=B.scrollLeft;let T=null;if(n){const F=Re(e,n);T=B.querySelector(`[rowid="${F}"] .${o.id}`)}if(T||(T=B.querySelector(`.${o.id}`)),T){const F=T.offsetParent,D=T.offsetLeft+(F?F.offsetLeft:0),w=T.clientWidth;if(D<A+j)return e.scrollTo(D-j-1);if(D+w-A>$-Z)return e.scrollTo(D+w-($-Z-1))}else if(I){let F=0;const D=o.renderWidth;for(let w=0;w<H.length;w++){const C=H[w];if(C===o||C.id===o.id)break;F+=C.renderWidth}return F<A?e.scrollTo(F-j-1):e.scrollTo(F+D-($-Z-1))}}return Promise.resolve()}function hn(e){return"on"+e.substring(0,1).toLocaleUpperCase()+e.substring(1)}function ca(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"update:modelValue"}function da(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function vo(e){return e==null?[]:r.isArray(e)?e:[e]}const{getI18n:ts,getIcon:Bt,renderer:Bn,formats:Ur,renderEmptyElement:_l}=te;function yd(e){const{$table:o,column:n}=e,a=n.titlePrefix||n.titleHelp;return a?f("i",{class:["vxe-cell-title-prefix-icon",a.icon||Bt().TABLE_TITLE_PREFIX],onMouseenter(v){o.triggerHeaderTitleEvent(v,a,e)},onMouseleave(v){o.handleTargetLeaveEvent(v)}}):_l(o)}function Rd(e){const{$table:o,column:n}=e,a=n.titleSuffix;return a?f("i",{class:["vxe-cell-title-suffix-icon",a.icon||Bt().TABLE_TITLE_SUFFIX],onMouseenter(v){o.triggerHeaderTitleEvent(v,a,e)},onMouseleave(v){o.handleTargetLeaveEvent(v)}}):_l(o)}function Yr(e){const{$table:o,column:n}=e,{context:a}=o,v=a.slots,m=o.props,{slots:E}=n,{dragConfig:I}=m,{computeRowDragOpts:H}=o.getComputeMaps(),u=H.value,{icon:d,trigger:b,disabledMethod:B}=u,j=B||(I?I.rowDisabledMethod:null),Z=j&&j(e),$=(E?E.rowDragIcon||E["row-drag-icon"]:null)||v.rowDragIcon||v["row-drag-icon"],A={};return b!=="cell"&&(A.onMousedown=T=>{Z||o.handleCellDragMousedownEvent(T,e)},A.onMouseup=o.handleCellDragMouseupEvent),f("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":Z}]},A),$?o.callSlot($,e):[f("i",{class:d||(I?I.rowIcon:"")||Bt().TABLE_DRAG_ROW})])}function mo(e,o){const{$table:n,column:a,level:v}=e,{dragSort:m}=a,E=n.props,{treeConfig:I,dragConfig:H}=E,{computeRowOpts:u,computeRowDragOpts:d}=n.getComputeMaps(),b=u.value,B=d.value,{showIcon:j,isPeerDrag:Z,isCrossDrag:$,visibleMethod:A}=B,T=A||(H?H.rowVisibleMethod:null),F=r.isArray(o)?o:[o];return m&&b.drag&&(j||H&&H.showRowIcon)&&(!T||T(e))&&(I?(Z||$||!v)&&F.unshift(Yr(e)):F.unshift(Yr(e))),F}function Sd(e){const{$table:o,column:n}=e,{context:a}=o,v=a.slots,{slots:m}=n,{computeColumnOpts:E,computeColumnDragOpts:I}=o.getComputeMaps(),H=E.value,u=I.value,{showIcon:d,icon:b,trigger:B,isPeerDrag:j,isCrossDrag:Z,visibleMethod:$,disabledMethod:A}=u;if(H.drag&&d&&(!$||$(e))&&!n.fixed&&(j||Z||!n.parentId)){const T=A&&A(e),F=(m?m.columnDragIcon||m["column-drag-icon"]:null)||v.columnDragIcon||v["column-drag-icon"],D={};return B!=="cell"&&(D.onMousedown=w=>{T||o.handleHeaderCellDragMousedownEvent(w,e)},D.onMouseup=o.handleHeaderCellDragMouseupEvent),f("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":T}]},D),F?o.callSlot(F,e):[f("i",{class:b||Bt().TABLE_DRAG_COLUMN})])}return _l(o)}function tl(e,o){return[yd(e),Sd(e),...r.isArray(o)?o:[o],Rd(e)]}function Rl(e,o){const{$table:n,column:a}=e,v=n.props,m=n.reactData,{computeTooltipOpts:E}=n.getComputeMaps(),{showHeaderOverflow:I}=v,{type:H,showHeaderOverflow:u}=a,b=E.value.showAll,B=r.isUndefined(u)||r.isNull(u)?I:u,j=B==="title",Z=B===!0||B==="tooltip",$={};return(j||Z||b)&&($.onMouseenter=A=>{m._isResize||(j?xr(A.currentTarget,a):(Z||b)&&n.triggerHeaderTooltipEvent(A,e))}),(Z||b)&&($.onMouseleave=A=>{m._isResize||(Z||b)&&n.handleTargetLeaveEvent(A)}),[H==="html"&&r.isString(o)?f("span",Object.assign({class:"vxe-cell--title",innerHTML:o},$)):f("span",Object.assign({class:"vxe-cell--title"},$),vo(o))]}function Gr(e,o){if(r.isFunction(e))return`${e(o)}`;const n=r.isArray(e),a=n?Ur.get(e[0]):Ur.get(e),v=a?a.tableFooterCellFormatMethod:null;return v?`${n?v(o,...e.slice(1)):v(o)}`:""}function Od(e){const{$table:o,column:n,_columnIndex:a,items:v,row:m}=e,{slots:E,editRender:I,cellRender:H,footerFormatter:u}=n,d=I||H,b=E?E.footer:null;if(b)return o.callSlot(b,e);if(d){const j=Bn.get(d.name);if(j){const Z=j.renderTableFooter||j.renderFooter;if(Z)return vo(Z(d,e))}}let B="";return r.isArray(v)?(B=v[a],[u?Gr(u,{itemValue:B,column:n,row:m,items:v,_columnIndex:a}):to(B,1)]):(B=r.get(m,n.field),[u?Gr(u,{itemValue:B,column:n,row:m,items:v,_columnIndex:a}):to(B,1)])}function Zr(e){const{$table:o,row:n,column:a}=e;return to(o.getCellLabel(n,a),1)}function Td(e){const{column:o,$table:n}=e,a=n.props,{editConfig:v}=a,{type:m,treeNode:E,editRender:I}=o,{computeEditOpts:H,computeCheckboxOpts:u}=n.getComputeMaps(),d=u.value,b=H.value;switch(m){case"seq":return E?ot.renderTreeIndexCell(e):ot.renderSeqCell(e);case"radio":return E?ot.renderTreeRadioCell(e):ot.renderRadioCell(e);case"checkbox":return d.checkField?E?ot.renderTreeSelectionCellByProp(e):ot.renderCheckboxCellByProp(e):E?ot.renderTreeSelectionCell(e):ot.renderCheckboxCell(e);case"expand":return ot.renderExpandCell(e);case"html":return E?ot.renderTreeHTMLCell(e):ot.renderHTMLCell(e)}return v&&I?b.mode==="cell"?E?ot.renderTreeCellEdit(e):ot.renderCellEdit(e):E?ot.renderTreeRowEdit(e):ot.renderRowEdit(e):E?ot.renderTreeCell(e):ot.renderDefaultCell(e)}function Md(e){const{column:o,$table:n}=e,a=n.props,{editConfig:v}=a,{type:m,filters:E,sortable:I,editRender:H}=o;switch(m){case"seq":return ot.renderSeqHeader(e);case"radio":return ot.renderRadioHeader(e);case"checkbox":return ot.renderCheckboxHeader(e);case"html":if(E&&I)return ot.renderSortAndFilterHeader(e);if(I)return ot.renderSortHeader(e);if(E)return ot.renderFilterHeader(e);break}return v&&H?ot.renderEditHeader(e):E&&I?ot.renderSortAndFilterHeader(e):I?ot.renderSortHeader(e):E?ot.renderFilterHeader(e):ot.renderDefaultHeader(e)}function Dd(e){return ot.renderDefaultFooter(e)}const ot={createColumn(e,o){const{type:n}=o,a={renderHeader:Md,renderCell:Td,renderFooter:Dd};return n==="expand"&&(a.renderData=ot.renderExpandData),vd(e,o,a)},renderHeaderTitle(e){const{$table:o,column:n}=e,{slots:a,editRender:v,cellRender:m}=n,E=v||m,I=a?a.header:null;if(I)return Rl(e,o.callSlot(I,e));if(E){const H=Bn.get(E.name);if(H){const u=H.renderTableHeader||H.renderHeader;if(u)return Rl(e,vo(u(E,e)))}}return Rl(e,to(n.getTitle(),1))},renderDefaultHeader(e){return tl(e,ot.renderHeaderTitle(e))},renderDefaultCell(e){const{$table:o,row:n,column:a}=e,{slots:v,editRender:m,cellRender:E}=a,I=m||E,H=v?v.default:null;if(H)return mo(e,o.callSlot(H,e));if(I){const b=Bn.get(I.name);if(b){const B=b.renderTableCell||b.renderCell,j=b.renderTableDefault||b.renderDefault,Z=m?B:j;if(Z)return mo(e,vo(Z(I,Object.assign({$type:m?"edit":"cell"},e))))}}const u=o.getCellLabel(n,a),d=m?m.placeholder:"";return mo(e,[f("span",{class:"vxe-cell--label"},[m&&rl(u)?f("span",{class:"vxe-cell--placeholder"},to(cl(d),1)):f("span",to(u,1))])])},renderTreeCell(e){return ot.renderTreeIcon(e,ot.renderDefaultCell(e))},renderDefaultFooter(e){return[f("span",{class:"vxe-cell--item"},Od(e))]},renderTreeIcon(e,o){const{$table:n,isHidden:a}=e,v=n.reactData,m=n.internalData,{computeTreeOpts:E}=n.getComputeMaps(),{treeExpandedMaps:I,treeExpandLazyLoadedMaps:H}=v,{fullAllDataRowIdData:u}=m,d=E.value,{row:b,column:B,level:j}=e,{slots:Z}=B,{indent:$,lazy:A,trigger:T,iconLoaded:F,showIcon:D,iconOpen:w,iconClose:C}=d,R=d.children||d.childrenField,M=d.hasChild||d.hasChildField,_=b[R],re=_&&_.length,ue=Z?Z.icon:null;let ee=!1,V=!1,Q=!1,J=!1;const pe={};if(ue)return n.callSlot(ue,e);if(!a){const Ie=Re(n,b);if(V=!!I[Ie],A){const Pe=u[Ie];Q=!!H[Ie],ee=b[M],J=!!Pe.treeLoaded}}return(!T||T==="default")&&(pe.onClick=Ie=>{n.triggerTreeExpandEvent(Ie,e)}),[f("div",{class:["vxe-cell--tree-node",{"is--active":V}],style:{paddingLeft:`${j*$}px`}},[D&&(A?J?re:re||ee:re)?[f("div",Object.assign({class:"vxe-tree--btn-wrapper"},pe),[f("i",{class:["vxe-tree--node-btn",Q?F||Bt().TABLE_TREE_LOADED:V?w||Bt().TABLE_TREE_OPEN:C||Bt().TABLE_TREE_CLOSE]})])]:null,f("div",{class:"vxe-tree-cell"},o)])]},renderSeqHeader(e){const{$table:o,column:n}=e,{slots:a}=n,v=a?a.header:null;return tl(e,Rl(e,v?o.callSlot(v,e):to(n.getTitle(),1)))},renderSeqCell(e){const{$table:o,column:n}=e,a=o.props,{treeConfig:v}=a,{computeSeqOpts:m}=o.getComputeMaps(),E=m.value,{slots:I}=n,H=I?I.default:null;if(H)return mo(e,o.callSlot(H,e));const{seq:u}=e,d=E.seqMethod;return mo(e,[f("span",`${to(d?d(e):v?u:(E.startIndex||0)+u,1)}`)])},renderTreeIndexCell(e){return ot.renderTreeIcon(e,ot.renderSeqCell(e))},renderRadioHeader(e){const{$table:o,column:n}=e,{slots:a}=n,v=a?a.header:null,m=a?a.title:null;return tl(e,Rl(e,v?o.callSlot(v,e):[f("span",{class:"vxe-radio--label"},m?o.callSlot(m,e):to(n.getTitle(),1))]))},renderRadioCell(e){const{$table:o,column:n,isHidden:a}=e,v=o.reactData,{computeRadioOpts:m}=o.getComputeMaps(),{selectRadioRow:E}=v,I=m.value,{slots:H}=n,{labelField:u,checkMethod:d,visibleMethod:b}=I,{row:B}=e,j=H?H.default:null,Z=H?H.radio:null,$=o.eqRow(B,E),A=!b||b({row:B});let T=!!d,F;a||(F={onClick(C){!T&&A&&o.triggerRadioRowEvent(C,e)}},d&&(T=!d({row:B})));const D=Object.assign(Object.assign({},e),{checked:$,disabled:T,visible:A});if(Z)return mo(e,o.callSlot(Z,D));const w=[];return A&&w.push(f("span",{class:["vxe-radio--icon",$?Bt().TABLE_RADIO_CHECKED:Bt().TABLE_RADIO_UNCHECKED]})),(j||u)&&w.push(f("span",{class:"vxe-radio--label"},j?o.callSlot(j,D):r.get(B,u))),mo(e,[f("span",Object.assign({class:["vxe-cell--radio",{"is--checked":$,"is--disabled":T}]},F),w)])},renderTreeRadioCell(e){return ot.renderTreeIcon(e,ot.renderRadioCell(e))},renderCheckboxHeader(e){const{$table:o,column:n,isHidden:a}=e,v=o.reactData,{computeIsAllCheckboxDisabled:m,computeCheckboxOpts:E}=o.getComputeMaps(),{isAllSelected:I,isIndeterminate:H}=v,u=m.value,{slots:d}=n,b=d?d.header:null,B=d?d.title:null,j=E.value,Z=n.getTitle(),$={};a||($.onClick=T=>{u||o.triggerCheckAllEvent(T,!I)});const A=Object.assign(Object.assign({},e),{checked:I,disabled:u,indeterminate:H});return b?tl(e,Rl(A,o.callSlot(b,A))):(j.checkStrictly?!j.showHeader:j.showHeader===!1)?tl(e,Rl(A,[f("span",{class:"vxe-checkbox--label"},B?o.callSlot(B,A):Z)])):tl(e,Rl(A,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":I,"is--disabled":u,"is--indeterminate":H}],title:ts("vxe.table.allTitle")},$),[f("span",{class:["vxe-checkbox--icon",H?Bt().TABLE_CHECKBOX_INDETERMINATE:I?Bt().TABLE_CHECKBOX_CHECKED:Bt().TABLE_CHECKBOX_UNCHECKED]})].concat(B||Z?[f("span",{class:"vxe-checkbox--label"},B?o.callSlot(B,A):Z)]:[]))]))},renderCheckboxCell(e){const{$table:o,row:n,column:a,isHidden:v}=e,m=o.props,E=o.reactData,{treeConfig:I}=m,{selectCheckboxMaps:H,treeIndeterminateMaps:u}=E,{computeCheckboxOpts:d}=o.getComputeMaps(),b=d.value,{labelField:B,checkMethod:j,visibleMethod:Z}=b,{slots:$}=a,A=$?$.default:null,T=$?$.checkbox:null;let F=!1,D=!1;const w=!Z||Z({row:n});let C=!!j;const R={};if(!v){const re=Re(o,n);D=!!H[re],R.onClick=ue=>{!C&&w&&o.triggerCheckRowEvent(ue,e,!D)},j&&(C=!j({row:n})),I&&(F=!!u[re])}const M=Object.assign(Object.assign({},e),{checked:D,disabled:C,visible:w,indeterminate:F});if(T)return mo(e,o.callSlot(T,M));const _=[];return w&&_.push(f("span",{class:["vxe-checkbox--icon",F?Bt().TABLE_CHECKBOX_INDETERMINATE:D?Bt().TABLE_CHECKBOX_CHECKED:Bt().TABLE_CHECKBOX_UNCHECKED]})),(A||B)&&_.push(f("span",{class:"vxe-checkbox--label"},A?o.callSlot(A,M):r.get(n,B))),mo(e,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":D,"is--disabled":C,"is--indeterminate":F,"is--hidden":!w}]},R),_)])},renderTreeSelectionCell(e){return ot.renderTreeIcon(e,ot.renderCheckboxCell(e))},renderCheckboxCellByProp(e){const{$table:o,row:n,column:a,isHidden:v}=e,m=o.props,E=o.reactData,{treeConfig:I}=m,{treeIndeterminateMaps:H}=E,{computeCheckboxOpts:u}=o.getComputeMaps(),d=u.value,{labelField:b,checkField:B,checkMethod:j,visibleMethod:Z}=d,$=d.indeterminateField||d.halfField,{slots:A}=a,T=A?A.default:null,F=A?A.checkbox:null;let D=!1,w=!1;const C=!Z||Z({row:n});let R=!!j;const M={};if(!v){const ue=Re(o,n);w=r.get(n,B),M.onClick=ee=>{!R&&C&&o.triggerCheckRowEvent(ee,e,!w)},j&&(R=!j({row:n})),I&&(D=!!H[ue])}const _=Object.assign(Object.assign({},e),{checked:w,disabled:R,visible:C,indeterminate:D});if(F)return mo(e,o.callSlot(F,_));const re=[];return C&&(re.push(f("span",{class:["vxe-checkbox--icon",D?Bt().TABLE_CHECKBOX_INDETERMINATE:w?Bt().TABLE_CHECKBOX_CHECKED:Bt().TABLE_CHECKBOX_UNCHECKED]})),(T||b)&&re.push(f("span",{class:"vxe-checkbox--label"},T?o.callSlot(T,_):r.get(n,b)))),mo(e,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":w,"is--disabled":R,"is--indeterminate":$&&!w?n[$]:D,"is--hidden":!C}]},M),re)])},renderTreeSelectionCellByProp(e){return ot.renderTreeIcon(e,ot.renderCheckboxCellByProp(e))},renderExpandCell(e){const{$table:o,isHidden:n,row:a,column:v}=e,m=o.reactData,{rowExpandedMaps:E,rowExpandLazyLoadedMaps:I}=m,{computeExpandOpts:H}=o.getComputeMaps(),u=H.value,{lazy:d,labelField:b,iconLoaded:B,showIcon:j,iconOpen:Z,iconClose:$,visibleMethod:A}=u,{slots:T}=v,F=T?T.default:null,D=T?T.icon:null;let w=!1,C=!1;if(D)return mo(e,o.callSlot(D,e));if(!n){const R=Re(o,a);w=!!E[R],d&&(C=!!I[R])}return mo(e,[j&&(!A||A(e))?f("span",{class:["vxe-table--expanded",{"is--active":w}],onClick(R){o.triggerRowExpandEvent(R,e)}},[f("i",{class:["vxe-table--expand-btn",C?B||Bt().TABLE_EXPAND_LOADED:w?Z||Bt().TABLE_EXPAND_OPEN:$||Bt().TABLE_EXPAND_CLOSE]})]):_l(o),F||b?f("span",{class:"vxe-table--expand-label"},F?o.callSlot(F,e):r.get(a,b)):_l(o)])},renderExpandData(e){const{$table:o,column:n}=e,{slots:a,contentRender:v}=n,m=a?a.content:null;if(m)return o.callSlot(m,e);if(v){const E=Bn.get(v.name);if(E){const I=E.renderTableExpand||E.renderExpand;if(I)return vo(I(v,e))}}return[]},renderHTMLCell(e){const{$table:o,column:n}=e,{slots:a}=n,v=a?a.default:null;return v?mo(e,o.callSlot(v,e)):mo(e,[f("span",{class:"vxe-cell--html",innerHTML:Zr(e)})])},renderTreeHTMLCell(e){return ot.renderTreeIcon(e,ot.renderHTMLCell(e))},renderSortAndFilterHeader(e){return tl(e,ot.renderHeaderTitle(e).concat(ot.renderSortIcon(e).concat(ot.renderFilterIcon(e))))},renderSortHeader(e){return tl(e,ot.renderHeaderTitle(e).concat(ot.renderSortIcon(e)))},renderSortIcon(e){const{$table:o,column:n}=e,{computeSortOpts:a}=o.getComputeMaps(),v=a.value,{showIcon:m,iconLayout:E,iconAsc:I,iconDesc:H,iconVisibleMethod:u}=v,{order:d}=n;return m&&(!u||u(e))?[f("span",{class:["vxe-cell--sort",`vxe-cell--sort-${E}-layout`]},[f("i",{class:["vxe-sort--asc-btn",I||Bt().TABLE_SORT_ASC,{"sort--active":d==="asc"}],title:ts("vxe.table.sortAsc"),onClick(b){b.stopPropagation(),o.triggerSortEvent(b,n,"asc")}}),f("i",{class:["vxe-sort--desc-btn",H||Bt().TABLE_SORT_DESC,{"sort--active":d==="desc"}],title:ts("vxe.table.sortDesc"),onClick(b){b.stopPropagation(),o.triggerSortEvent(b,n,"desc")}})])]:[]},renderFilterHeader(e){return tl(e,ot.renderHeaderTitle(e).concat(ot.renderFilterIcon(e)))},renderFilterIcon(e){const{$table:o,column:n,hasFilter:a}=e,v=o.reactData,{filterStore:m}=v,{computeFilterOpts:E}=o.getComputeMaps(),I=E.value,{showIcon:H,iconNone:u,iconMatch:d,iconVisibleMethod:b}=I;return H&&(!b||b(e))?[f("span",{class:["vxe-cell--filter",{"is--active":m.visible&&m.column===n}]},[f("i",{class:["vxe-filter--btn",a?d||Bt().TABLE_FILTER_MATCH:u||Bt().TABLE_FILTER_NONE],title:ts("vxe.table.filter"),onClick(B){o.triggerFilterEvent&&o.triggerFilterEvent(B,e.column,e)}})])]:[]},renderEditHeader(e){const{$table:o,column:n}=e,a=o.props,{computeEditOpts:v}=o.getComputeMaps(),{editConfig:m,editRules:E}=a,I=v.value,{sortable:H,filters:u,editRender:d}=n;let b=!1;if(E){const j=r.get(E,n.field);j&&(b=j.some(Z=>Z.required))}let B=[];return ft(m)&&(B=[b&&I.showAsterisk?f("i",{class:"vxe-cell--required-icon"}):_l(o),ft(d)&&I.showIcon?f("i",{class:["vxe-cell--edit-icon",I.icon||Bt().TABLE_EDIT]}):_l(o)]),tl(e,B.concat(ot.renderHeaderTitle(e)).concat(H?ot.renderSortIcon(e):[]).concat(u?ot.renderFilterIcon(e):[]))},renderRowEdit(e){const{$table:o,column:n}=e,a=o.reactData,{editStore:v}=a,{actived:m}=v,{editRender:E}=n;return ot.runRenderer(e,ft(E)&&m&&m.row===e.row)},renderTreeRowEdit(e){return ot.renderTreeIcon(e,ot.renderRowEdit(e))},renderCellEdit(e){const{$table:o,column:n}=e,a=o.reactData,{editStore:v}=a,{actived:m}=v,{editRender:E}=n;return ot.runRenderer(e,ft(E)&&m&&m.row===e.row&&m.column===e.column)},renderTreeCellEdit(e){return ot.renderTreeIcon(e,ot.renderCellEdit(e))},runRenderer(e,o){const{$table:n,column:a}=e,{slots:v,editRender:m,formatter:E}=a,I=v?v.default:null,H=v?v.edit:null,u=Bn.get(m.name),d=u?u.renderTableEdit||u.renderEdit:null,b=Object.assign({$type:"",isEdit:o},e);return o?(b.$type="edit",H?n.callSlot(H,b):d?vo(d(m,b)):[]):I?mo(e,n.callSlot(I,b)):E?mo(e,[f("span",{class:"vxe-cell--label"},Zr(b))]):ot.renderDefaultCell(b)}},ua={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],footerFormatter:[Function,Array,String],sortable:Boolean,sortBy:[String,Function],sortType:String,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,treeNode:Boolean,dragSort:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,params:Object},Ml=Po({name:"VxeColumn",props:ua,setup(e,{slots:o}){const n=qe(),a=xo("$xeTable",null),v=xo("$xeColgroup",null);if(!a)return()=>We();const m=ot.createColumn(a,e);m.slots=o;const E=()=>f("div",{ref:n}),I={columnConfig:m,renderVN:E};return la(a,e,m),zl(()=>{const H=n.value;H&&na(a,H,m,v)}),Xl(()=>{sa(a,m)}),Il("$xeColumn",I),Il("$xeGrid",null),E}}),Cr=Object.assign({},Ml,{install(e){e.component(Ml.name,Ml),e.component("VxeTableColumn",Ml)}});te.dynamicApp&&(te.dynamicApp.component(Ml.name,Ml),te.dynamicApp.component("VxeTableColumn",Ml));te.component(Ml);const Id=Cr,Dl=Po({name:"VxeColgroup",props:ua,setup(e,{slots:o}){const n=qe(),a=xo("$xeTable",null),v=xo("$xeColgroup",null);if(!a)return()=>We();const m=ot.createColumn(a,e),E={};o.header&&(E.header=o.header),m.slots=E,m.children=[],la(a,e,m),zl(()=>{const u=n.value;u&&na(a,u,m,v)}),Xl(()=>{sa(a,m)});const I=()=>f("div",{ref:n},o.default?o.default():[]);return Il("$xeColgroup",{columnConfig:m}),Il("$xeGrid",null),I}}),wr=Object.assign({},Dl,{install(e){e.component(Dl.name,Dl),e.component("VxeTableColgroup",Dl)}});te.dynamicApp&&(te.dynamicApp.component(Dl.name,Dl),te.dynamicApp.component("VxeTableColgroup",Dl));te.component(Dl);const Fd=wr,{getI18n:kd,renderer:Qr,renderEmptyElement:Us}=te,Jl="body",Jr=Po({name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},setup(e){const o=xo("$xeTable",{}),{xID:n,props:a,context:v,reactData:m,internalData:E}=o,{refTableBody:I,refTableHeader:H,refTableFooter:u,refTableLeftBody:d,refTableRightBody:b,refScrollXHandleElem:B,refScrollYHandleElem:j}=o.getRefMaps(),{computeEditOpts:Z,computeMouseOpts:$,computeAreaOpts:A,computeSYOpts:T,computeEmptyOpts:F,computeTooltipOpts:D,computeRadioOpts:w,computeExpandOpts:C,computeTreeOpts:R,computeCheckboxOpts:M,computeCellOpts:_,computeValidOpts:re,computeRowOpts:ue,computeColumnOpts:ee,computeRowDragOpts:V,computeColumnDragOpts:Q}=o.getComputeMaps(),J=qe(),pe=qe(),Ie=qe(),Pe=qe(),ke=qe(),G=qe(),K=qe(),Y=()=>{const{delayHover:L}=a,{lastScrollTime:Te,_isResize:me}=m;return!!(me||Te&&Date.now()<Te+L)},se=L=>{const{row:Te,column:me}=L,{afterFullData:Ne}=E,{treeConfig:Be}=a,je=R.value,{slots:$e,treeNode:tt}=me,{fullAllDataRowIdData:Se}=E;if($e&&$e.line)return o.callSlot($e.line,L);const He=Re(o,Te),Fe=Se[He];let ve=0,Me=null;Fe&&(ve=Fe.level,Me=Fe.items[Fe._index-1]);const Ve=o.eqRow(Ne[0],Te);return Be&&tt&&(je.showLine||je.line)?[f("div",{class:"vxe-tree--line-wrapper"},[f("div",{class:"vxe-tree--line",style:{height:`${Ve?1:Cd(L,Me)}px`,left:`${ve*je.indent+(ve?2-ia(o):0)+16}px`}})])]:[]},oe=(L,Te,me,Ne,Be,je,$e,tt,Se,He,Fe,ve)=>{const{fullAllDataRowIdData:Me}=E,{columnKey:Ve,height:Ye,showOverflow:Xe,cellClassName:Ge,cellStyle:fe,align:et,spanMethod:Ze,mouseConfig:st,editConfig:N,editRules:de,tooltipConfig:ne}=a,{tableData:De,overflowX:Ae,currentColumn:ze,scrollXLoad:dt,scrollYLoad:pt,isCalcCellHeight:ht,mergeList:ut,editStore:Ct,isAllOverflow:Je,validErrorMaps:Qe}=m,{afterFullData:Tt}=E,ao=_.value,Mt=re.value,Gt=M.value,ho=Z.value,Xt=D.value,oo=ue.value,mt=V.value,{disabledMethod:wo,isCrossDrag:lo,isPeerDrag:wt}=mt,no=T.value,h=ee.value,Vt=$.value,qt=A.value,{selectCellToRow:Dt}=qt,{type:po,cellRender:so,editRender:Nt,align:Kt,showOverflow:go,className:Lt,treeNode:Ht,slots:Eo}=Se,{verticalAlign:dl}=ao,{actived:ul}=Ct,{rHeight:Go}=no,{height:_o}=oo,Kl=Se.id,xn=Nt||so,Wo=xn?Qr.get(xn.name):null,Vn=Wo?Wo.tableCellClassName||Wo.cellClassName:null,Fl=Wo?Wo.tableCellStyle||Wo.cellStyle:"",Cl=Xt.showAll,fl=o.getColumnIndex(Se),Cn=o.getVTColumnIndex(Se),wl=ft(Nt);let Do=me?Se.fixed!==me:Se.fixed&&Ae;const Ul=r.isUndefined(go)||r.isNull(go)?Xe:go,co=Ul==="ellipsis",jo=Ul==="title",zo=Ul===!0||Ul==="tooltip",Yl=Xe||jo||zo||co;let Nn;const hl={},Ts=Me[Te],_n=Kt||(Wo?Wo.tableCellAlign:"")||et,Io=Qe[`${Te}:${Kl}`],kl=de&&Mt.showMessage&&(Mt.message==="default"?Ye||De.length>1:Mt.message==="inline"),yo={colid:Kl},ro={$table:o,$grid:o.xegrid,isEdit:!1,seq:L,rowid:Te,row:Be,rowIndex:je,$rowIndex:$e,_rowIndex:tt,column:Se,columnIndex:fl,$columnIndex:He,_columnIndex:Cn,fixed:me,type:Jl,isHidden:Do,level:Ne,visibleData:Tt,data:De,items:ve};let Al=!1,Wn=!1;if(oo.drag&&(Al=mt.trigger==="row"||Se.dragSort&&mt.trigger==="cell"),Al&&(Wn=!!(wo&&wo(ro))),(jo||zo||Cl||ne)&&(hl.onMouseenter=Ft=>{Y()||(jo?xr(Ft.currentTarget,Se):(zo||Cl)&&o.triggerBodyTooltipEvent(Ft,ro),o.dispatchEvent("cell-mouseenter",Object.assign({cell:Ft.currentTarget},ro),Ft))}),(zo||Cl||ne)&&(hl.onMouseleave=Ft=>{Y()||((zo||Cl)&&o.handleTargetLeaveEvent(Ft),o.dispatchEvent("cell-mouseleave",Object.assign({cell:Ft.currentTarget},ro),Ft))}),(Al||Gt.range||st)&&(hl.onMousedown=Ft=>{o.triggerCellMousedownEvent(Ft,ro)}),Al&&(hl.onMouseup=o.triggerCellMouseupEvent),hl.onClick=Ft=>{o.triggerCellClickEvent(Ft,ro)},hl.onDblclick=Ft=>{o.triggerCellDblclickEvent(Ft,ro)},ut.length){const Ft=aa(ut,tt,Cn);if(Ft){const{rowspan:Vo,colspan:Zo}=Ft;if(!Vo||!Zo)return null;Vo>1&&(yo.rowspan=Vo),Zo>1&&(yo.colspan=Zo)}}else if(Ze){const{rowspan:Ft=1,colspan:Vo=1}=Ze(ro)||{};if(!Ft||!Vo)return null;Ft>1&&(yo.rowspan=Ft),Vo>1&&(yo.colspan=Vo)}Do&&ut&&(yo.colspan>1||yo.rowspan>1)&&(Do=!1),!Do&&N&&(Nt||so)&&(ho.showStatus||ho.showUpdateStatus)&&(Nn=o.isUpdateByRow(Be,Se.field));const El=[];if(Do&&Xe&&Je)El.push(f("div",{class:["vxe-cell",{"c--title":jo,"c--tooltip":zo,"c--ellipsis":co}],style:{maxHeight:Yl&&(Go||_o)?`${Go||_o}px`:""}}));else if(El.push(...se(ro),f("div",{class:["vxe-cell",{"c--title":jo,"c--tooltip":zo,"c--ellipsis":co}],style:{maxHeight:Yl&&(Go||_o)?`${Go||_o}px`:""},title:jo?o.getCellLabel(Be,Se):null},Se.renderCell(ro))),kl&&Io){const Ft=Io.rule,Vo=Eo?Eo.valid:null,Zo=Object.assign(Object.assign(Object.assign({},ro),Io),{rule:Io});El.push(f("div",{class:["vxe-cell--valid-error-tip",Tl(Mt.className,Zo)],style:Ft&&Ft.maxWidth?{width:`${Ft.maxWidth}px`}:null},[f("div",{class:`vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-${Mt.theme||"normal"}`},[Vo?o.callSlot(Vo,Zo):[f("span",{class:"vxe-cell--valid-error-msg"},Io.content)]])]))}let Ll="";const wn=ht?Ts.height:0;Yl?Go||_o?Ll=`${Go||_o}px`:Je||(Ll=`${wn||_o||18}px`):Ll=`${wn||_o||18}px`,st&&Vt.area&&Dt&&(!He&&Dt===!0||Dt===Se.field)&&El.push(f("div",{class:"vxe-cell--area-status"}));const zn=!Se.resizeWidth&&(Se.minWidth==="auto"||Se.width==="auto");return f("td",Object.assign(Object.assign(Object.assign({class:["vxe-body--column",Kl,{[`col--${_n}`]:_n,[`col--vertical-${dl}`]:dl,[`col--${po}`]:po,"col--last":He===Fe.length-1,"col--tree-node":Ht,"col--edit":wl,"col--ellipsis":Yl,"fixed--width":!zn,"fixed--hidden":Do,"is--drag-cell":Al&&(lo||wt||!Ne),"is--drag-disabled":Wn,"col--dirty":Nn,"col--active":N&&wl&&ul.row===Be&&(ul.column===Se||ho.mode==="row"),"col--valid-error":!!Io,"col--current":ze===Se},Tl(Vn,ro),Tl(Lt,ro),Tl(Ge,ro)],key:Ve||dt||pt||h.useKey||oo.useKey||h.drag?Kl:He},yo),{style:Object.assign({height:Ll},r.isFunction(Fl)?Fl(ro):Fl,r.isFunction(fe)?fe(ro):fe)}),hl),El)},ge=(L,Te,me)=>{const{stripe:Ne,rowKey:Be,highlightHoverRow:je,rowClassName:$e,rowStyle:tt,showOverflow:Se,editConfig:He,treeConfig:Fe}=a,{hasFixedColumn:ve,treeExpandedMaps:Me,scrollXLoad:Ve,scrollYLoad:Ye,rowExpandedMaps:Xe,expandColumn:Ge,selectRadioRow:fe,pendingRowMaps:et,isDragColMove:Ze}=m,{fullAllDataRowIdData:st}=E,N=M.value,de=w.value,ne=R.value,De=Z.value,Ae=ue.value,ze=ee.value,dt=Q.value,{transform:pt,seqMode:ht}=ne,ut=ne.children||ne.childrenField,Ct=[];return Te.forEach((Je,Qe)=>{const Tt={};let ao=Qe;ao=o.getRowIndex(Je),(Ae.isHover||je)&&(Tt.onMouseenter=qt=>{Y()||o.triggerHoverEvent(qt,{row:Je,rowIndex:ao})},Tt.onMouseleave=()=>{Y()||o.clearHoverRow()});const Mt=Re(o,Je),Gt=st[Mt];let ho=0,Xt=-1,oo=0;Gt&&(ho=Gt.level,Fe&&pt&&ht==="increasing"?Xt=Gt._index+1:Xt=Gt.seq,oo=Gt._index);const mt={$table:o,seq:Xt,rowid:Mt,fixed:L,type:Jl,level:ho,row:Je,rowIndex:ao,$rowIndex:Qe,_rowIndex:oo},wo=Ge&&!!Xe[Mt];let lo=!1,wt=[],no=!1;He&&(no=o.isInsertByRow(Je)),Fe&&!Ye&&!pt&&(wt=Je[ut],lo=wt&&wt.length>0&&!!Me[Mt]),Ae.drag&&(!Fe||pt)&&(Tt.onDragstart=o.handleRowDragDragstartEvent,Tt.onDragend=o.handleRowDragDragendEvent,Tt.onDragover=o.handleRowDragDragoverEvent);const h=["vxe-body--row",Fe?`row--level-${ho}`:"",{"row--stripe":Ne&&(oo+1)%2===0,"is--new":no,"is--expand-row":wo,"is--expand-tree":lo,"row--new":no&&(De.showStatus||De.showInsertStatus),"row--radio":de.highlight&&o.eqRow(fe,Je),"row--checked":N.highlight&&o.isCheckedByCheckboxRow(Je),"row--pending":!!et[Mt]},Tl($e,mt)],Vt=me.map((qt,Dt)=>oe(Xt,Mt,L,ho,Je,ao,Qe,oo,qt,Dt,me,Te));if(Ct.push(ze.drag&&dt.animation?f(bn,Object.assign({name:`vxe-header--col-list${Ze?"":"-disabled"}`,tag:"tr",class:h,rowid:Mt,style:tt?r.isFunction(tt)?tt(mt):tt:null,key:Be||Ve||Ye||Ae.useKey||Ae.drag||ze.drag||Fe?Mt:Qe},Tt),{default:()=>Vt}):f("tr",Object.assign({class:h,rowid:Mt,style:tt?r.isFunction(tt)?tt(mt):tt:null,key:Be||Ve||Ye||Ae.useKey||Ae.drag||ze.drag||Fe?Mt:Qe},Tt),Vt)),wo){const qt=C.value,{height:Dt,padding:po}=qt,so={};Dt&&(so.height=`${Dt}px`),Fe&&(so.paddingLeft=`${ho*ne.indent+30}px`);const{showOverflow:Nt}=Ge,Kt=r.isUndefined(Nt)||r.isNull(Nt)?Se:Nt,go={$table:o,seq:Xt,column:Ge,fixed:L,type:Jl,level:ho,row:Je,rowIndex:ao,$rowIndex:Qe,_rowIndex:oo};Ct.push(f("tr",Object.assign({class:["vxe-body--expanded-row",{"is--padding":po}],key:`expand_${Mt}`,style:tt?r.isFunction(tt)?tt(go):tt:null},Tt),[f("td",{class:{"vxe-body--expanded-column":1,"fixed--hidden":L&&!ve,"col--ellipsis":Kt},colspan:me.length},[f("div",{class:{"vxe-body--expanded-cell":1,"is--ellipsis":Dt},style:so},[Ge.renderData(go)])])]))}lo&&Ct.push(...ge(L,wt,me))}),Ct},xe=L=>{const{fixedType:Te}=e,{lastScrollTop:me,lastScrollLeft:Ne,inVirtualScroll:Be,inBodyScroll:je,bodyScrollType:$e,inFooterScroll:tt}=E;if(Be||tt||je&&$e!==Te)return;const Se=H.value,He=I.value,Fe=u.value,ve=d.value,Me=b.value,Ve=J.value,Ye=Se?Se.$el:null,Xe=Fe?Fe.$el:null,Ge=He.$el;if(!Ge)return;const fe=ve?ve.$el:null,et=Me?Me.$el:null,Ze=B.value,st=j.value,N=Ve.scrollTop,de=Ge.scrollLeft,ne=de!==Ne,De=N!==me;E.inBodyScroll=!0,E.bodyScrollType=Te,De&&(fe&&Te==="left"?(Wt(Ge,N),Wt(et,N)):et&&Te==="right"?(Wt(Ge,N),Wt(fe,N)):(Wt(fe,N),Wt(et,N)),Wt(st,N),o.triggerScrollYEvent(L)),ne&&(eo(Ze,de),eo(Ye,de),eo(Xe,de),o.triggerScrollXEvent(L)),o.handleScrollEvent(L,De,ne,N,de,{type:Jl,fixed:Te})};let Ee,Ce=0,le=0,he=0,U=!1;const we=(L,Te,me,Ne,Be)=>{const{elemStore:je}=E,{scrollXLoad:$e,scrollYLoad:tt}=m,Se=I.value,He=d.value,Fe=b.value,ve=He?He.$el:null,Me=Fe?Fe.$el:null,Ve=Se.$el,Ye=So(je["main-body-ySpace"]),Xe=So(je["main-body-xSpace"]),Ge=tt&&Ye?Ye.clientHeight:Ve.clientHeight,fe=$e&&Xe?Xe.clientWidth:Ve.clientWidth,et=U===Te?Math.max(0,Ce-he):0;U=Te,Ce=Math.abs(Te?me-et:me+et),le=0,he=0,clearTimeout(Ee);const Ze=()=>{if(he<Ce){const{fixedType:st}=e;le=Math.max(5,Math.floor(le*1.5)),he=he+le,he>Ce&&(le=le-(he-Ce));const{scrollTop:N,clientHeight:de,scrollHeight:ne}=Ve,De=N+le*(Te?-1:1);Ve.scrollTop=De,ve&&(ve.scrollTop=De),Me&&(Me.scrollTop=De),(Te?De<ne-de:De>=0)&&(Ee=setTimeout(Ze,10)),o.dispatchEvent("scroll",{type:Jl,fixed:st,scrollTop:Ve.scrollTop,scrollLeft:Ve.scrollLeft,scrollHeight:Ve.scrollHeight,scrollWidth:Ve.scrollWidth,bodyHeight:Ge,bodyWidth:fe,isX:Ne,isY:Be},L)}};Ze()},be=L=>{const{deltaY:Te,deltaX:me}=L,{highlightHoverRow:Ne}=a,{scrollYLoad:Be}=m,{lastScrollTop:je,lastScrollLeft:$e}=E,tt=ue.value,Se=I.value,He=J.value,Fe=Se.$el,ve=Te,Me=me,Ve=ve<0;if(Ve?He.scrollTop<=0:He.scrollTop>=He.scrollHeight-He.clientHeight)return;const Ye=He.scrollTop+ve,Xe=Fe.scrollLeft+Me,Ge=Xe!==$e,fe=Ye!==je;fe&&(L.preventDefault(),E.lastScrollTop=Ye,E.lastScrollLeft=Xe,m.lastScrollTime=Date.now(),(tt.isHover||Ne)&&o.clearHoverRow(),we(L,Ve,ve,Ge,fe),Be&&o.triggerScrollYEvent(L))};return zl(()=>{ce(()=>{const{fixedType:L}=e,{elemStore:Te}=E,me=`${L||"main"}-body-`;Te[`${me}wrapper`]=J,Te[`${me}table`]=pe,Te[`${me}colgroup`]=Ie,Te[`${me}list`]=Pe,Te[`${me}xSpace`]=ke,Te[`${me}ySpace`]=G,Te[`${me}emptyBlock`]=K})}),Ri(()=>{clearTimeout(Ee)}),Xl(()=>{const{fixedType:L}=e,{elemStore:Te}=E,me=`${L||"main"}-body-`;Te[`${me}wrapper`]=null,Te[`${me}table`]=null,Te[`${me}colgroup`]=null,Te[`${me}list`]=null,Te[`${me}xSpace`]=null,Te[`${me}ySpace`]=null,Te[`${me}emptyBlock`]=null}),()=>{const{slots:L}=v,{fixedColumn:Te,fixedType:me,tableColumn:Ne}=e,{showOverflow:Be,spanMethod:je,footerSpanMethod:$e,mouseConfig:tt}=a,{isGroup:Se,tableData:He,scrollXLoad:Fe,scrollYLoad:ve,isAllOverflow:Me,isDragRowMove:Ve,expandColumn:Ye,dragRow:Xe,dragCol:Ge}=m,{visibleColumn:fe,fullAllDataRowIdData:et,fullColumnIdData:Ze}=E,st=ue.value,N=T.value,de=F.value,ne=$.value,De=V.value;let Ae=He,ze=Ne;if(me&&(ze=fe,(Fe||ve||Be&&Me)&&(Ye||je||$e?ze=fe:ze=Te||[])),ve&&Xe&&Ae.length>2){const ut=et[Re(o,Xe)];if(ut){const Ct=ut._index,Je=Ae[0],Qe=Ae[Ae.length-1],Tt=et[Re(o,Je)],ao=et[Re(o,Qe)];if(Tt&&ao){const Mt=Tt._index,Gt=ao._index;Ct<Mt?Ae=[Xe].concat(Ae):Ct>Gt&&(Ae=Ae.concat([Xe]))}}}if(!me&&!Se&&Fe&&Ge&&ze.length>2){const ut=Ze[Ge.id];if(ut){const Ct=ut._index,Je=ze[0],Qe=ze[ze.length-1],Tt=Ze[Je.id],ao=Ze[Qe.id];if(Tt&&ao){const Mt=Tt._index,Gt=ao._index;Ct<Mt?ze=[Ge].concat(ze):Ct>Gt&&(ze=ze.concat([Ge]))}}}let dt;const pt=L?L.empty:null;if(pt)dt=o.callSlot(pt,{$table:o,$grid:o.xegrid});else{const ut=de.name?Qr.get(de.name):null,Ct=ut?ut.renderTableEmpty||ut.renderTableEmptyView||ut.renderEmpty:null;Ct?dt=vo(Ct(de,{$table:o})):dt=a.emptyText||kd("vxe.table.emptyText")}const ht={onScroll:xe};return N.mode==="wheel"&&(ht.onWheel=be),f("div",Object.assign({ref:J,class:["vxe-table--body-wrapper",me?`fixed-${me}--wrapper`:"body--wrapper"],xid:n},ht),[me?Us(o):f("div",{ref:ke,class:"vxe-body--x-space"}),f("div",{ref:G,class:"vxe-body--y-space"}),f("table",{ref:pe,class:"vxe-table--body",xid:n,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:Ie},ze.map((ut,Ct)=>f("col",{name:ut.id,key:Ct}))),st.drag&&De.animation?f(bn,{ref:Pe,name:`vxe-body--row-list${Ve?"":"-disabled"}`,tag:"tbody"},{default:()=>ge(me,Ae,ze)}):f("tbody",{ref:Pe},ge(me,Ae,ze))]),f("div",{class:"vxe-table--checkbox-range"}),tt&&ne.area?f("div",{class:"vxe-table--cell-area"},[f("span",{class:"vxe-table--cell-main-area"},ne.extension?[f("span",{class:"vxe-table--cell-main-area-btn",onMousedown(ut){o.triggerCellAreaExtendMousedownEvent&&o.triggerCellAreaExtendMousedownEvent(ut,{$table:o,fixed:me,type:Jl})}})]:[]),f("span",{class:"vxe-table--cell-copy-area"}),f("span",{class:"vxe-table--cell-extend-area"}),f("span",{class:"vxe-table--cell-multi-area"}),f("span",{class:"vxe-table--cell-active-area"})]):Us(o),me?Us(o):f("div",{class:"vxe-table--empty-block",ref:K},[f("div",{class:"vxe-table--empty-content"},dt)])])}}}),{getI18n:Ad,renderer:Ld,renderEmptyElement:$d}=te,ei="header",ti=Po({name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},setup(e){const o=xo("$xeTable",{}),{xID:n,props:a,reactData:v,internalData:m}=o,{refElem:E,refTableBody:I,refLeftContainer:H,refRightContainer:u,refCellResizeBar:d,refCellResizeTip:b}=o.getRefMaps(),{computeColumnOpts:B,computeColumnDragOpts:j,computeResizableOpts:Z}=o.getComputeMaps(),$=qe([]),A=qe(),T=qe(),F=qe(),D=qe(),w=qe(),C=qe(),R=()=>{const{isGroup:ee}=v;$.value=ee?md(e.tableGroupColumn):[]},M=(ee,V)=>{const{column:Q}=V,{fixedType:J}=e,{visibleColumn:pe}=m,Ie=Z.value,Pe=I.value,ke=E.value,G=H.value,K=u.value,Y=d.value,se=b.value,{clientX:oe}=ee,ge=A.value,xe=ee.target,Ee=xe.parentNode,Ce=Object.assign(V,{cell:Ee});let le=0;const he=Pe.$el,U=hd(xe,ge),we=xe.clientWidth,be=Math.floor(we/2),ae=oa(Ce)-be;let L=U.left-Ee.clientWidth+we+ae,Te=U.left+be;const me=document.onmousemove,Ne=document.onmouseup,Be=J==="left",je=J==="right";let $e=0;if(Be||je){const Se=Be?"nextElementSibling":"previousElementSibling";let He=Ee[Se];for(;He&&!Wl(He,"fixed--hidden");)Wl(He,"col--group")||($e+=He.offsetWidth),He=He[Se];je&&K&&(Te=K.offsetLeft+$e)}const tt=function(Se){Se.stopPropagation(),Se.preventDefault();const He=Se.clientX-oe;let Fe=Te+He;const ve=J?0:he.scrollLeft;Be?Fe=Math.min(Fe,(K?K.offsetLeft:he.clientWidth)-$e-ae):je?(L=(G?G.clientWidth:0)+$e+ae,Fe=Math.min(Fe,Te+Ee.clientWidth-ae)):L=Math.max(he.scrollLeft,L),le=Math.max(Fe,L);const Me=le-ve;if(Y.style.left=`${Me}px`,Ie.showDragTip&&se){const Ve=ke.clientWidth,Ye=ge.getBoundingClientRect(),Xe=Y.clientWidth,Ge=se.clientWidth,fe=se.clientHeight;let et=-Ge;Me<Ge+Xe?et=Ge+Xe-Me:Me>Ve&&(et+=Ve-Me),se.style.left=`${et}px`,se.style.top=`${Math.min(ke.clientHeight-fe,Math.max(0,Se.clientY-Ye.y-fe/2))}px`,se.textContent=Ad("vxe.table.resizeColTip",[Q.renderWidth+(je?Te-le:le-Te)])}};v._isResize=!0,il(ke,"drag--resize"),Y.style.display="block",document.onmousemove=tt,document.onmouseup=function(Se){document.onmousemove=me,document.onmouseup=Ne;const He=Q.renderWidth+(je?Te-le:le-Te);Q.resizeWidth=He,Ie.dragMode==="fixed"&&pe.forEach(Fe=>{Fe.id!==Q.id&&(Fe.resizeWidth||(Fe.resizeWidth=Fe.renderWidth))}),Y.style.display="none",v._isResize=!1,m._lastResizeTime=Date.now(),o.analyColumnWidth(),o.recalculate(!0).then(()=>{o.saveCustomStore("update:visible"),o.updateCellAreas(),o.dispatchEvent("resizable-change",Object.assign(Object.assign({},V),{resizeWidth:He}),Se),setTimeout(()=>o.recalculate(!0),300)}),Ho(ke,"drag--resize")},tt(ee),o.closeMenu&&o.closeMenu()},_=(ee,V)=>{const{fixedType:Q}=e,{resizable:J,border:pe,columnKey:Ie,headerCellClassName:Pe,headerCellStyle:ke,showHeaderOverflow:G,headerAlign:K,align:Y,mouseConfig:se}=a,{currentColumn:oe,scrollXLoad:ge,scrollYLoad:xe,overflowX:Ee,scrollbarWidth:Ce}=v,le=B.value,he=j.value,{disabledMethod:U,isCrossDrag:we,isPeerDrag:be}=he;return ee.map((ae,L)=>{const{type:Te,showHeaderOverflow:me,headerAlign:Ne,align:Be,filters:je,headerClassName:$e,editRender:tt,cellRender:Se}=ae,He=ae.id,Fe=tt||Se,ve=Fe?Ld.get(Fe.name):null,Me=ae.children&&ae.children.length,Ve=Q?ae.fixed!==Q&&!Me:!!ae.fixed&&Ee,Ye=r.eqNull(me)?G:me,Xe=Ne||(ve?ve.tableHeaderCellAlign:"")||K||Be||(ve?ve.tableCellAlign:"")||Y;let Ge=Ye==="ellipsis";const fe=Ye==="title",et=Ye===!0||Ye==="tooltip";let Ze=fe||et||Ge,st=!1,N=null;je&&(N=je[0],st=je.some(ut=>ut.checked));const de=o.getColumnIndex(ae),ne=o.getVTColumnIndex(ae),De={$table:o,$grid:o.xegrid,$rowIndex:V,column:ae,columnIndex:de,$columnIndex:L,_columnIndex:ne,firstFilterOption:N,fixed:Q,type:ei,isHidden:Ve,hasFilter:st},Ae={colid:He,colspan:ae.colSpan>1?ae.colSpan:null,rowspan:ae.rowSpan>1?ae.rowSpan:null},ze={onClick:ut=>o.triggerHeaderCellClickEvent(ut,De),onDblclick:ut=>o.triggerHeaderCellDblclickEvent(ut,De)};ge&&!Ze&&(Ge=Ze=!0);const dt=le.drag&&he.trigger==="cell";let pt=!1;dt&&(pt=!!(U&&U(De))),(se||dt)&&(ze.onMousedown=ut=>o.triggerHeaderCellMousedownEvent(ut,De)),le.drag&&(ze.onDragstart=o.handleHeaderCellDragDragstartEvent,ze.onDragend=o.handleHeaderCellDragDragendEvent,ze.onDragover=o.handleHeaderCellDragDragoverEvent,dt&&(ze.onMouseup=o.handleHeaderCellDragMouseupEvent));const ht=!ae.resizeWidth&&(ae.minWidth==="auto"||ae.width==="auto");return f("th",Object.assign(Object.assign(Object.assign({class:["vxe-header--column",He,{[`col--${Xe}`]:Xe,[`col--${Te}`]:Te,"col--last":L===ee.length-1,"col--fixed":ae.fixed,"col--group":Me,"col--ellipsis":Ze,"fixed--width":!ht,"fixed--hidden":Ve,"is--sortable":ae.sortable,"col--filter":!!je,"is--filter-active":st,"is--drag-active":!ae.fixed&&!pt&&(we||be||!ae.parentId),"is--drag-disabled":pt,"col--current":oe===ae},$e?r.isFunction($e)?$e(De):$e:"",Pe?r.isFunction(Pe)?Pe(De):Pe:""],style:ke?r.isFunction(ke)?ke(De):ke:null},Ae),ze),{key:Ie||ge||xe||le.useKey||le.drag||Me?He:L}),[f("div",{class:["vxe-cell",{"c--title":fe,"c--tooltip":et,"c--ellipsis":Ge}]},ae.renderHeader(De)),!Ve&&!Me&&(r.isBoolean(ae.resizable)?ae.resizable:le.resizable||J)?f("div",{class:["vxe-resizable",{"is--line":!pe||pe==="none"}],onMousedown:ut=>M(ut,De),onDblclick:ut=>o.handleResizeDblclickEvent(ut,De)}):null])}).concat(Ce?[f("th",{key:`gr${V}`,class:"vxe-header--gutter col--gutter"})]:[])},re=ee=>{const{fixedType:V}=e,{headerRowClassName:Q,headerRowStyle:J}=a,{isDragColMove:pe}=v,Ie=B.value,Pe=j.value;return ee.map((ke,G)=>{const K={$table:o,$rowIndex:G,fixed:V,type:ei};return Ie.drag&&Pe.animation?f(bn,{key:G,name:`vxe-header--col-list${pe?"":"-disabled"}`,tag:"tr",class:["vxe-header--row",Q?r.isFunction(Q)?Q(K):Q:""],style:J?r.isFunction(J)?J(K):J:null},{default:()=>_(ke,G)}):f("tr",{key:G,class:["vxe-header--row",Q?r.isFunction(Q)?Q(K):Q:""],style:J?r.isFunction(J)?J(K):J:null},_(ke,G))})},ue=()=>{const{fixedType:ee,fixedColumn:V,tableColumn:Q}=e,{showHeaderOverflow:J,spanMethod:pe,footerSpanMethod:Ie}=a,{isGroup:Pe,scrollXLoad:ke,scrollYLoad:G,scrollbarWidth:K,dragCol:Y}=v,{visibleColumn:se,fullColumnIdData:oe}=m;let ge=$.value,xe=Q;if(Pe?xe=se:(ee&&(xe=se,(ke||G||J)&&(pe||Ie?xe=se:xe=V||[])),ge=[xe]),!ee&&!Pe&&ke&&Y&&xe.length>2){const Ee=oe[Y.id];if(Ee){const Ce=Ee._index,le=xe[0],he=xe[xe.length-1],U=oe[le.id],we=oe[he.id];if(U&&we){const be=U._index,ae=we._index;Ce<be?(xe=[Y].concat(xe),ge=[[Y].concat(ge[0])].concat(ge.slice(1))):Ce>ae&&(xe=xe.concat([Y]),ge=[ge[0].concat([Y])].concat(ge.slice(1)))}}}return f("div",{ref:A,class:["vxe-table--header-wrapper",ee?`fixed-${ee}--wrapper`:"body--wrapper"],xid:n},[ee?$d(o):f("div",{ref:w,class:"vxe-body--x-space"}),f("table",{ref:T,class:"vxe-table--header",xid:n,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:F},xe.map((Ee,Ce)=>f("col",{name:Ee.id,key:Ce})).concat(K?[f("col",{name:"col_gutter"})]:[])),f("thead",{ref:D},re(ge))]),f("div",{ref:C,class:"vxe-table--header-border-line"})])};return Et(()=>e.tableColumn,R),zl(()=>{ce(()=>{const{fixedType:ee}=e,{internalData:V}=o,{elemStore:Q}=V,J=`${ee||"main"}-header-`;Q[`${J}wrapper`]=A,Q[`${J}table`]=T,Q[`${J}colgroup`]=F,Q[`${J}list`]=D,Q[`${J}xSpace`]=w,Q[`${J}repair`]=C,R()})}),Xl(()=>{const{fixedType:ee}=e,{internalData:V}=o,{elemStore:Q}=V,J=`${ee||"main"}-header-`;Q[`${J}wrapper`]=null,Q[`${J}table`]=null,Q[`${J}colgroup`]=null,Q[`${J}list`]=null,Q[`${J}xSpace`]=null,Q[`${J}repair`]=null}),ue}}),{renderer:Bd,renderEmptyElement:Hd}=te,Ys="footer";function Pd(e,o,n){for(let a=0;a<e.length;a++){const{row:v,col:m,rowspan:E,colspan:I}=e[a];if(m>-1&&v>-1&&E&&I){if(v===o&&m===n)return{rowspan:E,colspan:I};if(o>=v&&o<v+E&&n>=m&&n<m+I)return{rowspan:0,colspan:0}}}}const oi=Po({name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},setup(e){const o=xo("$xeTable",{}),{xID:n,props:a,reactData:v,internalData:m}=o,{refTableHeader:E,refTableBody:I,refScrollXHandleElem:H}=o.getRefMaps(),{computeTooltipOpts:u,computeColumnOpts:d,computeColumnDragOpts:b}=o.getComputeMaps(),B=qe(),j=qe(),Z=qe(),$=qe(),A=qe(),T=C=>{const{inVirtualScroll:R,inBodyScroll:M}=m;if(R||M)return;const{fixedType:_}=e,re=E.value,ue=I.value,ee=re?re.$el:null,V=B.value;if(!V)return;const Q=ue?ue.$el:null;if(!Q)return;const J=H.value,pe=V.scrollLeft,Ie=!0,Pe=!1,ke=Q.scrollTop;m.inFooterScroll=!0,eo(J,pe),eo(ee,pe),eo(Q,pe),o.triggerScrollXEvent(C),o.handleScrollEvent(C,Pe,Ie,ke,pe,{type:Ys,fixed:_})},F=(C,R,M,_,re)=>{const{fixedType:ue}=e,{footerCellClassName:ee,footerCellStyle:V,footerAlign:Q,footerSpanMethod:J,align:pe,columnKey:Ie,showFooterOverflow:Pe}=a,{scrollXLoad:ke,scrollYLoad:G,overflowX:K,scrollbarWidth:Y,currentColumn:se,mergeFooterList:oe}=v,ge=u.value,xe=d.value;return C.map((Ee,Ce)=>{const{type:le,showFooterOverflow:he,footerAlign:U,align:we,footerClassName:be,editRender:ae,cellRender:L}=Ee,Te=ae||L,me=Te?Bd.get(Te.name):null,Ne=ge.showAll,Be=Ee.children&&Ee.children.length,je=ue?Ee.fixed!==ue&&!Be:Ee.fixed&&K,$e=r.eqNull(he)?Pe:he,tt=U||(me?me.tableFooterCellAlign:"")||Q||we||(me?me.tableCellAlign:"")||pe;let Se=$e==="ellipsis";const He=$e==="title",Fe=$e===!0||$e==="tooltip";let ve=He||Fe||Se;const Me={colid:Ee.id},Ve={},Ye=o.getColumnIndex(Ee),Xe=o.getVTColumnIndex(Ee),Ge=Xe,fe={$table:o,$grid:o.xegrid,row:M,rowIndex:re,_rowIndex:re,$rowIndex:_,column:Ee,columnIndex:Ye,$columnIndex:Ce,_columnIndex:Xe,itemIndex:Ge,items:M,fixed:ue,type:Ys,data:R};if(ke&&!ve&&(Se=ve=!0),(He||Fe||Ne)&&(Ve.onMouseenter=Ze=>{He?xr(Ze.currentTarget,Ee):(Fe||Ne)&&o.triggerFooterTooltipEvent(Ze,fe)}),(Fe||Ne)&&(Ve.onMouseleave=Ze=>{(Fe||Ne)&&o.handleTargetLeaveEvent(Ze)}),Ve.onClick=Ze=>{o.dispatchEvent("footer-cell-click",Object.assign({cell:Ze.currentTarget},fe),Ze)},Ve.onDblclick=Ze=>{o.dispatchEvent("footer-cell-dblclick",Object.assign({cell:Ze.currentTarget},fe),Ze)},oe.length){const Ze=Pd(oe,re,Xe);if(Ze){const{rowspan:st,colspan:N}=Ze;if(!st||!N)return null;st>1&&(Me.rowspan=st),N>1&&(Me.colspan=N)}}else if(J){const{rowspan:Ze=1,colspan:st=1}=J(fe)||{};if(!Ze||!st)return null;Ze>1&&(Me.rowspan=Ze),st>1&&(Me.colspan=st)}const et=!Ee.resizeWidth&&(Ee.minWidth==="auto"||Ee.width==="auto");return f("td",Object.assign(Object.assign(Object.assign(Object.assign({class:["vxe-footer--column",Ee.id,{[`col--${tt}`]:tt,[`col--${le}`]:le,"col--last":Ce===C.length-1,"fixed--width":!et,"fixed--hidden":je,"col--ellipsis":ve,"col--current":se===Ee},Tl(be,fe),Tl(ee,fe)]},Me),{style:V?r.isFunction(V)?V(fe):V:null}),Ve),{key:Ie||ke||G||xe.useKey||xe.drag?Ee.id:Ce}),[f("div",{class:["vxe-cell",{"c--title":He,"c--tooltip":Fe,"c--ellipsis":Se}]},Ee.renderFooter(fe))])}).concat(Y?[f("td",{key:`gr${_}`,class:"vxe-footer--gutter col--gutter"})]:[])},D=C=>{const{fixedType:R,footerTableData:M}=e,{footerRowClassName:_,footerRowStyle:re}=a,{isDragColMove:ue}=v,ee=d.value,V=b.value;return M.map((Q,J)=>{const pe=J,Ie={$table:o,row:Q,_rowIndex:pe,$rowIndex:J,fixed:R,type:Ys};return ee.drag&&V.animation?f(bn,{key:J,name:`vxe-header--col-list${ue?"":"-disabled"}`,tag:"tr",class:["vxe-footer--row",_?r.isFunction(_)?_(Ie):_:""],style:re?r.isFunction(re)?re(Ie):re:null},{default:()=>F(C,M,Q,J,pe)}):f("tr",{key:J,class:["vxe-footer--row",_?r.isFunction(_)?_(Ie):_:""],style:re?r.isFunction(re)?re(Ie):re:null},F(C,M,Q,J,pe))})},w=()=>{const{fixedType:C,fixedColumn:R,tableColumn:M}=e,{spanMethod:_,footerSpanMethod:re,showFooterOverflow:ue}=a,{visibleColumn:ee,fullColumnIdData:V}=m,{isGroup:Q,scrollXLoad:J,scrollYLoad:pe,scrollbarWidth:Ie,dragCol:Pe}=v;let ke=M;if(C&&(ke=ee,(J||pe||ue)&&(_||re?ke=ee:ke=R||[])),!C&&!Q&&J&&Pe&&ke.length>2){const K=V[Pe.id];if(K){const Y=K._index,se=ke[0],oe=ke[ke.length-1],ge=V[se.id],xe=V[oe.id];if(ge&&xe){const Ee=ge._index,Ce=xe._index;Y<Ee?ke=[Pe].concat(ke):Y>Ce&&(ke=ke.concat([Pe]))}}}const G={};return C||(G.onScroll=T),f("div",Object.assign({ref:B,class:["vxe-table--footer-wrapper",C?`fixed-${C}--wrapper`:"body--wrapper"],xid:n},G),[C?Hd(o):f("div",{ref:A,class:"vxe-body--x-space"}),f("table",{ref:j,class:"vxe-table--footer",xid:n,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:Z},ke.map((K,Y)=>f("col",{name:K.id,key:Y})).concat(Ie?[f("col",{name:"col_gutter"})]:[])),f("tfoot",{ref:$},D(ke))])])};return zl(()=>{ce(()=>{const{fixedType:C}=e,{elemStore:R}=m,M=`${C||"main"}-footer-`;R[`${M}wrapper`]=B,R[`${M}table`]=j,R[`${M}colgroup`]=Z,R[`${M}list`]=$,R[`${M}xSpace`]=A})}),Xl(()=>{const{fixedType:C}=e,{elemStore:R}=m,M=`${C||"main"}-footer-`;R[`${M}wrapper`]=null,R[`${M}table`]=null,R[`${M}colgroup`]=null,R[`${M}list`]=null,R[`${M}xSpace`]=null}),w}}),{getConfig:$t}=te,Er={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>$t().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>$t().table.resizable},stripe:{type:Boolean,default:()=>$t().table.stripe},border:{type:[Boolean,String],default:()=>$t().table.border},padding:{type:Boolean,default:()=>$t().table.padding},round:{type:Boolean,default:()=>$t().table.round},size:{type:String,default:()=>$t().table.size||$t().size},fit:{type:Boolean,default:()=>$t().table.fit},loading:Boolean,align:{type:String,default:()=>$t().table.align},headerAlign:{type:String,default:()=>$t().table.headerAlign},footerAlign:{type:String,default:()=>$t().table.footerAlign},showHeader:{type:Boolean,default:()=>$t().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>$t().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>$t().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>$t().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>$t().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>$t().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>$t().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>$t().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>$t().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>$t().table.emptyText},keepSource:{type:Boolean,default:()=>$t().table.keepSource},autoResize:{type:Boolean,default:()=>$t().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,cellConfig:Object,rowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:Object,importConfig:Object,printConfig:Object,expandConfig:Object,treeConfig:Object,menuConfig:Object,mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:Object,validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:Object,customConfig:Object,scrollX:Object,scrollY:Object,animat:{type:Boolean,default:()=>$t().table.animat},delayHover:{type:Number,default:()=>$t().table.delayHover},params:Object},yr=["update:data","keydown-start","keydown","keydown-end","paste","copy","cut","current-change","radio-change","checkbox-change","checkbox-all","checkbox-range-start","checkbox-range-change","checkbox-range-end","checkbox-range-select","cell-click","cell-dblclick","cell-menu","cell-mouseenter","cell-mouseleave","cell-selected","cell-delete-value","cell-backspace-value","header-cell-click","header-cell-dblclick","header-cell-menu","footer-cell-click","footer-cell-dblclick","footer-cell-menu","clear-merge","sort-change","clear-sort","filter-change","filter-visible","clear-filter","resizable-change","toggle-row-expand","toggle-tree-expand","menu-click","edit-closed","row-dragstart","row-dragover","row-dragend","column-dragstart","column-dragover","column-dragend","enter-append-row","edit-actived","edit-activated","edit-disabled","valid-error","scroll","scroll-boundary","custom","change-fnr","open-fnr","show-fnr","hide-fnr","fnr-change","fnr-find","fnr-find-all","fnr-replace","fnr-replace-all","cell-area-copy","cell-area-cut","cell-area-paste","cell-area-merge","clear-cell-area-selection","clear-cell-area-merge","header-cell-area-selection","cell-area-selection-invalid","cell-area-selection-start","cell-area-selection-drag","cell-area-selection-end","cell-area-extension-start","cell-area-extension-drag","cell-area-extension-end","cell-area-selection-all-start","cell-area-selection-all-end","cell-area-arrows-start","cell-area-arrows-end","active-cell-change-start","active-cell-change-end"],{getI18n:Rt,getIcon:Jt,renderEmptyElement:os}=te,jd=Po({name:"TableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeDrawer"),a=te.getComponent("VxeButton"),v=te.getComponent("VxeNumberInput"),m=te.getComponent("VxeRadioGroup"),E=xo("$xeTable",{}),{props:I,reactData:H,internalData:u}=E,{computeCustomOpts:d,computeColumnDragOpts:b,computeColumnOpts:B,computeIsMaxFixedColumn:j,computeResizableOpts:Z}=E.getComputeMaps(),$=qe(),A=qe(),T=qe(),F=qe(),D=qe();let w,C=!1,R;const M=U=>{const{customStore:we}=e;we.activeWrapper=!0,E.customOpenEvent(U)},_=U=>{const{customStore:we}=e;we.activeWrapper=!1,setTimeout(()=>{!we.activeBtn&&!we.activeWrapper&&E.customCloseEvent(U)},300)},re=({$event:U})=>{H.isCustomStatus=!0,E.saveCustom(),E.closeCustom(),E.emitCustomEvent("confirm",U)},ue=({$event:U})=>{E.closeCustom(),E.emitCustomEvent("close",U)},ee=({$event:U})=>{E.cancelCustom(),E.closeCustom(),E.emitCustomEvent("cancel",U)},V=U=>{E.resetCustom(!0),E.closeCustom(),E.emitCustomEvent("reset",U)},Q=({$event:U})=>{te.modal?te.modal.confirm({content:Rt("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(we=>{we==="confirm"&&V(U)}):V(U)},J=U=>{const{customColumnList:we}=H,be=r.findTree(we,ae=>ae===U);if(be&&be.parent){const{parent:ae}=be;ae.children&&ae.children.length&&(ae.renderVisible=ae.children.every(L=>L.renderVisible),ae.halfVisible=!ae.renderVisible&&ae.children.some(L=>L.renderVisible||L.halfVisible),J(ae))}},pe=U=>{const we=!U.renderVisible;d.value.immediate?(r.eachTree([U],ae=>{ae.visible=we,ae.renderVisible=we,ae.halfVisible=!1}),H.isCustomStatus=!0,E.handleCustom(),E.saveCustomStore("update:visible")):r.eachTree([U],ae=>{ae.renderVisible=we,ae.halfVisible=!1}),J(U),E.checkCustomStatus()},Ie=U=>{d.value.immediate&&U.renderResizeWidth!==U.renderWidth&&(U.resizeWidth=U.renderResizeWidth,U.renderWidth=U.renderResizeWidth,H.isCustomStatus=!0,E.handleCustom(),E.saveCustomStore("update:width"))},Pe=(U,we)=>{const be=j.value;d.value.immediate?(U.renderFixed===we?r.eachTree([U],L=>{L.fixed="",L.renderFixed=""}):(!be||U.renderFixed)&&r.eachTree([U],L=>{L.fixed=we,L.renderFixed=we}),H.isCustomStatus=!0,E.handleCustom(),E.saveCustomStore("update:fixed")):U.renderFixed===we?r.eachTree([U],L=>{L.renderFixed=""}):(!be||U.renderFixed)&&r.eachTree([U],L=>{L.renderFixed=we})},ke=()=>{E.toggleCustomAllCheckbox()},G=(U,we,be,ae)=>{const L=A.value;if(!L)return;const Te=L.getBoundingClientRect();if(we){const Ne=T.value;if(Ne)if(be){const Be=we.getBoundingClientRect();Ne.style.display="block",Ne.style.top=`${Math.max(1,Be.y+L.scrollTop-Te.y)}px`,Ne.style.height=`${Be.height}px`,Ne.style.width=`${Be.width}px`,Ne.setAttribute("drag-pos",ae),Ne.setAttribute("drag-to-child",C?"y":"n")}else Ne.style.display=""}const me=F.value;me&&(me.style.display="block",me.style.top=`${Math.min(L.clientHeight+L.scrollTop-me.clientHeight,U.clientY+L.scrollTop-Te.y)}px`,me.style.left=`${Math.min(L.clientWidth+L.scrollLeft-me.clientWidth,U.clientX+L.scrollLeft-Te.x)}px`,me.setAttribute("drag-status",be?C?"sub":"normal":"disabled"))},K=()=>{const U=F.value,we=T.value;U&&(U.style.display=""),we&&(we.style.display="")},Y=U=>{const L=U.currentTarget.parentElement.parentElement.parentElement,Te=L.getAttribute("colid"),me=E.getColumnById(Te);L.draggable=!0,D.value=me,il(L,"active--drag-origin")},se=U=>{const L=U.currentTarget.parentElement.parentElement.parentElement;K(),L.draggable=!1,D.value=null,Ho(L,"active--drag-origin")},oe=U=>{U.dataTransfer&&U.dataTransfer.setDragImage(rr(),0,0)},ge=U=>{const{mouseConfig:we}=I,{customColumnList:be}=H,{collectColumn:ae}=u,L=d.value,{immediate:Te}=L,me=U.currentTarget,Ne=D.value,Be=b.value,{isCrossDrag:je,isSelfToChildDrag:$e,isToChildDrag:tt,dragEndMethod:Se}=Be,He=R==="bottom"?1:0;if(w&&Ne&&w!==Ne){const Fe=Ne,ve=w;Promise.resolve(Se?Se({oldColumn:Fe,newColumn:ve,dragPos:R,dragToChild:!!C,offsetIndex:He}):!0).then(Me=>{if(!Me)return;let Ve=-1,Ye=-1;const Xe={};r.eachTree([Fe],fe=>{Xe[fe.id]=fe});let Ge=!1;if(Te){if(Fe.parentId&&ve.parentId){if(!je)return;if(Xe[ve.id]&&(Ge=!0,!(je&&$e))){te.modal&&te.modal.message({status:"error",content:Rt("vxe.error.treeDragChild")});return}}else if(Fe.parentId){if(!je)return}else if(ve.parentId){if(!je)return;if(Xe[ve.id]&&(Ge=!0,!(je&&$e))){te.modal&&te.modal.message({status:"error",content:Rt("vxe.error.treeDragChild")});return}}const fe=r.findTree(ae,Ze=>Ze.id===Fe.id);if(Ge&&je&&$e){if(fe){const{items:Ze,index:st}=fe,N=Fe.children||[];N.forEach(de=>{de.parentId=Fe.parentId}),Ze.splice(st,1,...N),Fe.children=[]}}else if(fe){const{items:Ze,index:st,parent:N}=fe;Ze.splice(st,1),N||(Ve=st)}const et=r.findTree(ae,Ze=>Ze.id===ve.id);if(et){const{items:Ze,index:st,parent:N}=et;je&&tt&&C?(Fe.parentId=ve.id,ve.children=(ve.children||[]).concat([Fe])):(Fe.parentId=ve.parentId,Ze.splice(st+He,0,Fe)),N||(Ye=st)}r.eachTree(ae,(Ze,st,N,de,ne)=>{if(!ne){const De=st+1;Ze.renderSortNumber=De}})}else Ve=r.findIndexOf(be,fe=>fe.id===Fe.id),be.splice(Ve,1),Ye=r.findIndexOf(be,fe=>fe.id===ve.id),be.splice(Ye+He,0,Fe);H.isDragColMove=!0,we&&(E.clearSelected&&E.clearSelected(),E.clearCellAreas&&(E.clearCellAreas(),E.clearCopyCellArea())),E.dispatchEvent("column-dragend",{oldColumn:Fe,newColumn:ve,dragPos:R,offsetIndex:He,_index:{newIndex:Ye,oldIndex:Ve}},U),Te&&(H.customColumnList=ae.slice(0),E.handleColDragSwapColumn())}).catch(()=>{})}K(),D.value=null,me.draggable=!1,me.removeAttribute("drag-pos"),Ho(me,"active--drag-target"),Ho(me,"active--drag-origin")},xe=U=>{const we=d.value,{immediate:be}=we,ae=b.value,{isCrossDrag:L,isToChildDrag:Te}=ae,me=U.currentTarget,Ne=U.ctrlKey,Be=me.getAttribute("colid"),je=E.getColumnById(Be),$e=D.value;if(je&&(L||je.level===1)){U.preventDefault();const Se=U.clientY-me.getBoundingClientRect().y<me.clientHeight/2?"top":"bottom";if($e&&$e.id===je.id||!L&&je.level>1||!be&&je.level>1||je.renderFixed){G(U,me,!1,Se);return}C=!!(L&&Te&&Ne&&be),w=je,R=Se,G(U,me,!0,Se)}},Ee=()=>{const U=D.value,we=b.value;return f("div",{},[f("div",{ref:T,class:["vxe-table-custom-popup--drag-line",{"is--guides":we.showGuidesStatus}]}),f("div",{ref:F,class:"vxe-table-custom-popup--drag-tip"},[f("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[f("div",{class:"vxe-table-custom-popup--drag-tip-status"},[f("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",Jt().TABLE_DRAG_STATUS_ROW]}),f("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",Jt().TABLE_DRAG_STATUS_SUB_ROW]}),f("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",Jt().TABLE_DRAG_DISABLED]})]),f("div",{class:"vxe-table-custom-popup--drag-tip-content"},Rt("vxe.custom.cstmDragTarget",[U&&U.type!=="html"?U.getTitle():""]))])])])},Ce=()=>{const{customStore:U}=e,{isCustomStatus:we,customColumnList:be}=H,ae=d.value,{immediate:L}=ae,Te=b.value,{maxHeight:me}=U,{checkMethod:Ne,visibleMethod:Be,allowVisible:je,allowSort:$e,allowFixed:tt,trigger:Se,placement:He}=ae,Fe=j.value,{isCrossDrag:ve}=Te,Me=ae.slots||{},Ve=Me.header,Ye=Me.top,Xe=Me.bottom,Ge=Me.default,fe=Me.footer,et=[],Ze={},st=U.isAll,N=U.isIndeterminate;Se==="hover"&&(Ze.onMouseenter=M,Ze.onMouseleave=_);const de={$table:E,$grid:E.xegrid,columns:be,isAllChecked:st,isAllIndeterminate:N,isCustomStatus:we};return r.eachTree(be,(ne,De,Ae,ze,dt)=>{if(Be?Be({column:ne}):!0){const ht=ne.renderVisible,ut=ne.halfVisible,Ct=ne.children&&ne.children.length,Je=to(ne.getTitle(),1),Qe=Ne?!Ne({column:ne}):!1,Tt=!ht;et.push(f("li",{key:ne.id,colid:ne.id,class:["vxe-table-custom--option",`level--${ne.level}`,{"is--hidden":Qe||Tt,"is--group":Ct}],onDragstart:oe,onDragend:ge,onDragover:xe},[je?f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":ht,"is--indeterminate":ut,"is--disabled":Qe}],title:Rt("vxe.custom.setting.colVisible"),onClick:()=>{Qe||pe(ne)}},[f("span",{class:["vxe-checkbox--icon",ut?Jt().TABLE_CHECKBOX_INDETERMINATE:ht?Jt().TABLE_CHECKBOX_CHECKED:Jt().TABLE_CHECKBOX_UNCHECKED]})]):We(),f("div",{class:"vxe-table-custom--name-option"},[$e&&(ve&&L||ne.level===1)?f("div",{class:"vxe-table-custom--sort-option"},[f("span",Object.assign({class:["vxe-table-custom--sort-btn",{"is--disabled":Qe||Tt||ne.renderFixed}],title:Rt("vxe.custom.setting.sortHelpTip")},Qe||Tt||ne.renderFixed?{}:{onMousedown:Y,onMouseup:se}),[f("i",{class:Jt().TABLE_CUSTOM_SORT})])]):We(),ne.type==="html"?f("div",{key:"1",class:"vxe-table-custom--checkbox-label",innerHTML:Je}):f("div",{key:"0",class:"vxe-table-custom--checkbox-label"},Je)]),!dt&&tt?f("div",{class:"vxe-table-custom--fixed-option"},[a?f(a,{mode:"text",icon:ne.renderFixed==="left"?Jt().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:Jt().TOOLBAR_TOOLS_FIXED_LEFT,status:ne.renderFixed==="left"?"primary":"",disabled:Qe||Tt||Fe&&!ne.renderFixed,title:Rt(ne.renderFixed==="left"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft"),onClick:()=>{Pe(ne,"left")}}):We(),a?f(a,{mode:"text",icon:ne.renderFixed==="right"?Jt().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:Jt().TOOLBAR_TOOLS_FIXED_RIGHT,status:ne.renderFixed==="right"?"primary":"",disabled:Qe||Tt||Fe&&!ne.renderFixed,title:Rt(ne.renderFixed==="right"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight"),onClick:()=>{Pe(ne,"right")}}):We()]):We()]))}}),f("div",{ref:$,key:"simple",class:["vxe-table-custom-wrapper",`placement--${He}`,{"is--active":U.visible}],style:me&&!["left","right"].includes(He)?{maxHeight:`${me}px`}:{}},U.visible?[f("div",{class:"vxe-table-custom--header"},Ve?E.callSlot(Ve,de):[f("ul",{class:"vxe-table-custom--panel-list"},[f("li",{class:"vxe-table-custom--option"},[je?f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":st,"is--indeterminate":N}],title:Rt("vxe.table.allTitle"),onClick:ke},[f("span",{class:["vxe-checkbox--icon",N?Jt().TABLE_CHECKBOX_INDETERMINATE:st?Jt().TABLE_CHECKBOX_CHECKED:Jt().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},Rt("vxe.toolbar.customAll"))]):f("span",{class:"vxe-checkbox--label"},Rt("vxe.table.customTitle"))])])]),f("div",{ref:A,class:"vxe-table-custom--body"},[Ye?f("div",{class:"vxe-table-custom--panel-top"},E.callSlot(Ye,de)):os(E),Ge?f("div",{class:"vxe-table-custom--panel-body"},E.callSlot(Ge,de)):f(bn,Object.assign({class:"vxe-table-custom--panel-list",name:"vxe-table-custom--list",tag:"ul"},Ze),{default:()=>et}),Xe?f("div",{class:"vxe-table-custom--panel-bottom"},E.callSlot(Xe,de)):os(E),Ee()]),ae.showFooter?f("div",{class:"vxe-table-custom--footer"},fe?E.callSlot(fe,de):[f("div",{class:"vxe-table-custom--footer-buttons"},[a?f(a,{mode:"text",content:ae.resetButtonText||Rt("vxe.table.customRestore"),disabled:!we,onClick:Q}):We(),L?a?f(a,{mode:"text",content:ae.closeButtonText||Rt("vxe.table.customClose"),onClick:ue}):We():a?f(a,{mode:"text",content:ae.cancelButtonText||Rt("vxe.table.customCancel"),onClick:ee}):We(),L?We():a?f(a,{mode:"text",status:"primary",content:ae.confirmButtonText||Rt("vxe.table.customConfirm"),onClick:re}):We()])]):null]:[])},le=()=>{const{customStore:U}=e,{resizable:we}=I,{isCustomStatus:be,customColumnList:ae}=H,L=d.value,{immediate:Te}=L,me=b.value,{mode:Ne,modalOptions:Be,drawerOptions:je,allowVisible:$e,allowSort:tt,allowFixed:Se,allowResizable:He,checkMethod:Fe,visibleMethod:ve}=L,Me=B.value,{maxFixedSize:Ve}=Me,Ye=Z.value,{minWidth:Xe,maxWidth:Ge}=Ye,fe=Object.assign({},Be),et=Object.assign({},je),Ze=j.value,{isCrossDrag:st}=me,N=L.slots||{},de=N.header,ne=N.top,De=N.bottom,Ae=N.default,ze=N.footer,dt=[],pt=U.isAll,ht=U.isIndeterminate,ut={$table:E,$grid:E.xegrid,columns:ae,isAllChecked:pt,isAllIndeterminate:ht,isCustomStatus:be};r.eachTree(ae,(Je,Qe,Tt,ao,Mt)=>{if(ve?ve({column:Je}):!0){let ho=0,Xt=0;if(He){const h={$table:E,column:Je,columnIndex:Qe,$columnIndex:Qe,$rowIndex:-1};Xe&&(ho=r.toNumber(r.isFunction(Xe)?Xe(h):Xe)),Ge&&(Xt=r.toNumber(r.isFunction(Ge)?Ge(h):Ge))}const oo=Je.renderVisible,mt=Je.halfVisible,wo=to(Je.getTitle(),1),lo=Je.children&&Je.children.length,wt=Fe?!Fe({column:Je}):!1,no=!oo;dt.push(f("tr",{key:Je.id,colid:Je.id,class:[`vxe-table-custom-popup--row level--${Je.level}`,{"is--group":lo}],onDragstart:oe,onDragend:ge,onDragover:xe},[$e?f("td",{class:"vxe-table-custom-popup--column-item col--visible"},[f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":oo,"is--indeterminate":mt,"is--disabled":wt}],title:Rt("vxe.custom.setting.colVisible"),onClick:()=>{wt||pe(Je)}},[f("span",{class:["vxe-checkbox--icon",mt?Jt().TABLE_CHECKBOX_INDETERMINATE:oo?Jt().TABLE_CHECKBOX_CHECKED:Jt().TABLE_CHECKBOX_UNCHECKED]})])]):We(),f("td",{class:"vxe-table-custom-popup--column-item col--name"},[f("div",{class:"vxe-table-custom-popup--name"},[tt?st&&Te||Je.level===1?f("div",Object.assign({class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":wt||no||Je.renderFixed}],title:Rt("vxe.custom.setting.sortHelpTip")},wt||no||Je.renderFixed?{}:{onMousedown:Y,onMouseup:se}),[f("i",{class:Jt().TABLE_CUSTOM_SORT})]):f("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):We(),Je.type==="html"?f("div",{key:"1",class:"vxe-table-custom-popup--title",innerHTML:wo}):f("div",{key:"0",class:"vxe-table-custom-popup--title",title:wo},wo)])]),He?f("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[Je.children&&Je.children.length||!(r.isBoolean(Je.resizable)?Je.resizable:Me.resizable||we)?f("span","-"):v?f(v,{type:"integer",immediate:!1,disabled:wt||no,modelValue:Je.renderResizeWidth,min:ho||void 0,max:Xt||void 0,"onUpdate:modelValue"(h){const Vt=Math.max(0,Number(h));Je.renderResizeWidth=Vt},onChange(){Ie(Je)}}):We()]):We(),Se?f("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[Mt?f("span","-"):m?f(m,{modelValue:Je.renderFixed||"",type:"button",size:"mini",disabled:wt||no,options:[{label:Rt("vxe.custom.setting.fixedLeft"),value:"left",disabled:wt||no||Ze},{label:Rt("vxe.custom.setting.fixedUnset"),value:"",disabled:wt||no},{label:Rt("vxe.custom.setting.fixedRight"),value:"right",disabled:wt||no||Ze}],"onUpdate:modelValue"(h){Pe(Je,h)}}):We()]):We()]))}});const Ct={default:()=>Ae?E.callSlot(Ae,ut):f("div",{ref:A,class:"vxe-table-custom-popup--body"},[ne?f("div",{class:"vxe-table-custom-popup--table-top"},E.callSlot(ne,ut)):os(E),f("div",{class:"vxe-table-custom-popup--table-wrapper"},[f("table",{},[f("colgroup",{},[$e?f("col",{class:"vxe-table-custom-popup--table-col-seq"}):We(),f("col",{class:"vxe-table-custom-popup--table-col-title"}),He?f("col",{class:"vxe-table-custom-popup--table-col-width"}):We(),Se?f("col",{class:"vxe-table-custom-popup--table-col-fixed"}):We()]),f("thead",{},[f("tr",{},[$e?f("th",{},[f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":pt,"is--indeterminate":ht}],title:Rt("vxe.table.allTitle"),onClick:ke},[f("span",{class:["vxe-checkbox--icon",ht?Jt().TABLE_CHECKBOX_INDETERMINATE:pt?Jt().TABLE_CHECKBOX_CHECKED:Jt().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},Rt("vxe.toolbar.customAll"))])]):We(),f("th",{},Rt("vxe.custom.setting.colTitle")),He?f("th",{},Rt("vxe.custom.setting.colResizable")):We(),Se?f("th",{},Rt(`vxe.custom.setting.${Ve?"colFixedMax":"colFixed"}`,[Ve])):We()])]),f(bn,{class:"vxe-table-custom--panel-list",tag:"tbody",name:"vxe-table-custom--list"},{default:()=>dt})])]),De?f("div",{class:"vxe-table-custom-popup--table-bottom"},E.callSlot(De,ut)):os(E),Ee()]),footer:()=>ze?E.callSlot(ze,ut):f("div",{class:"vxe-table-custom-popup--footer"},[a?f(a,{content:L.resetButtonText||Rt("vxe.custom.cstmRestore"),disabled:!be,onClick:Q}):We(),Te?a?f(a,{content:L.closeButtonText||Rt("vxe.table.customClose"),onClick:ue}):We():a?f(a,{content:L.cancelButtonText||Rt("vxe.table.customCancel"),onClick:ee}):We(),Te?We():a?f(a,{status:"primary",content:L.confirmButtonText||Rt("vxe.custom.cstmConfirm"),onClick:re}):We()])};return de&&(Ct.header=()=>E.callSlot(de,ut)),Ne==="drawer"?n?f(n,{key:"drawer",className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",et.className||""].join(" "),modelValue:U.visible,title:et.title||Rt("vxe.custom.cstmTitle"),width:et.width||Math.min(880,Math.floor(document.documentElement.clientWidth*.6)),position:et.position,resize:!!et.resize,escClosable:!!et.escClosable,maskClosable:!!et.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(Je){U.visible=Je}},Ct):We():o?f(o,{key:"modal",className:["vxe-table-custom-modal-wrapper","vxe-table--ignore-clear",fe.className||""].join(" "),modelValue:U.visible,title:fe.title||Rt("vxe.custom.cstmTitle"),width:fe.width||Math.min(880,document.documentElement.clientWidth),minWidth:fe.minWidth||700,height:fe.height||Math.min(680,document.documentElement.clientHeight),minHeight:fe.minHeight||400,showZoom:fe.showZoom,showMaximize:fe.showMaximize,showMinimize:fe.showMinimize,mask:fe.mask,lockView:fe.lockView,resize:fe.resize,escClosable:!!fe.escClosable,maskClosable:!!fe.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(Je){U.visible=Je}},Ct):We()};return()=>{const U=d.value;return["modal","drawer","popup"].includes(`${U.mode}`)?le():Ce()}}}),{getI18n:ls,getIcon:An,renderer:li}=te,Vd=Po({name:"VxeTableFilterPanel",props:{filterStore:Object},setup(e){const o=xo("$xeTable",{}),{reactData:n,internalData:a,getComputeMaps:v}=o,{computeFilterOpts:m}=v(),E=_e(()=>{const{filterStore:F}=e;return F&&F.options.some(D=>D.checked)}),I=(F,D)=>{const{filterStore:w}=e;w.options.forEach(C=>{C._checked=D,C.checked=D}),w.isAllSelected=D,w.isIndeterminate=!1},H=F=>{o.handleFilterConfirmFilter(F)},u=(F,D,w)=>{o.handleFilterChangeRadioOption(F,D,w)},d=F=>{o.handleFilterResetFilter(F)},b=(F,D,w)=>{o.handleFilterChangeMultipleOption(F,D,w)},B=(F,D,w)=>{o.handleFilterChangeOption(F,D,w)},j=(F,D)=>{const{filterStore:w}=e;w.multiple?I(F,D):d(F)},Z={changeRadioOption:u,changeMultipleOption:b,changeAllOption:j,changeOption:B,confirmFilter:H,resetFilter:d},$=(F,D)=>{const{filterStore:w}=e,{column:C,multiple:R,maxHeight:M}=w,_=C?C.slots:null,re=_?_.filter:null,ue=Object.assign({},a._currFilterParams,{$panel:Z,$table:o}),ee=D?D.renderTableFilter||D.renderFilter:null;if(re)return[f("div",{class:"vxe-table--filter-template"},o.callSlot(re,ue))];if(ee)return[f("div",{class:"vxe-table--filter-template"},vo(ee(F,ue)))];const V=R?w.isAllSelected:!w.options.some(J=>J._checked),Q=R&&w.isIndeterminate;return[f("ul",{class:"vxe-table--filter-header"},[f("li",{class:["vxe-table--filter-option",{"is--checked":V,"is--indeterminate":Q}],title:ls(R?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:J=>{j(J,!w.isAllSelected)}},(R?[f("span",{class:["vxe-checkbox--icon",Q?An().TABLE_CHECKBOX_INDETERMINATE:V?An().TABLE_CHECKBOX_CHECKED:An().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([f("span",{class:"vxe-checkbox--label"},ls("vxe.table.allFilter"))]))]),f("ul",{class:"vxe-table--filter-body",style:M?{maxHeight:`${M}px`}:{}},w.options.map(J=>{const pe=J._checked;return f("li",{class:["vxe-table--filter-option",{"is--checked":J._checked}],title:J.label,onClick:Ie=>{B(Ie,!J._checked,J)}},(R?[f("span",{class:["vxe-checkbox--icon",pe?An().TABLE_CHECKBOX_CHECKED:An().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([f("span",{class:"vxe-checkbox--label"},to(J.label,1))]))}))]},A=()=>{const{filterStore:F}=e,{column:D,multiple:w}=F,C=m.value,R=E.value,{filterRender:M}=D,_=ft(M)?li.get(M.name):null,re=!R&&!F.isAllSelected&&!F.isIndeterminate;return w&&(!_||!(_.showTableFilterFooter===!1||_.showFilterFooter===!1||_.isFooter===!1))?[f("div",{class:"vxe-table--filter-footer"},[f("button",{class:{"is--disabled":re},disabled:re,onClick:H},C.confirmButtonText||ls("vxe.table.confirmFilter")),f("button",{onClick:d},C.resetButtonText||ls("vxe.table.resetFilter"))])]:[]};return()=>{const{filterStore:F}=e,{initStore:D}=n,{visible:w,multiple:C,column:R}=F,M=R?R.filterRender:null,_=ft(M)?li.get(M.name):null,re=_?_.tableFilterClassName||_.filterClassName:"",ue=Object.assign({},a._currFilterParams,{$panel:Z,$table:o}),ee=m.value,{destroyOnClose:V}=ee;return f("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",Tl(re,ue),{"is--animat":o.props.animat,"is--multiple":C,"is--active":w}],style:F.style},D.filter&&(!V||w)&&R?$(M,_).concat(A()):[])}}}),{getI18n:Pl,getIcon:Nd}=te,_d=Po({name:"VxeTableImportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeButton"),a=te.getComponent("VxeSelect"),v=xo("$xeTable",{}),{computeImportOpts:m}=v.getComputeMaps(),E=Uo({loading:!1}),I=qe(),H=_e(()=>{const{storeData:T}=e;return`${T.filename}.${T.type}`}),u=_e(()=>{const{storeData:T}=e;return T.file&&T.type}),d=_e(()=>{const{storeData:T}=e,{type:F,typeList:D}=T;if(F){const w=r.find(D,C=>F===C.value);return w?w.label:"*.*"}return`*.${D.map(w=>w.value).join(", *.")}`}),b=()=>{const{storeData:T}=e;Object.assign(T,{filename:"",sheetName:"",type:""})},B=()=>{const{storeData:T,defaultOptions:F}=e;v.readFile(F).then(D=>{const{file:w}=D;Object.assign(T,_i(w),{file:w})}).catch(D=>D)},j=()=>{ce(()=>{const T=I.value;T&&T.focus()})},Z=()=>{const{storeData:T}=e;T.visible=!1},$=()=>{const{storeData:T,defaultOptions:F}=e,D=m.value;E.loading=!0,v.importByFile(T.file,Object.assign({},D,F)).then(()=>{E.loading=!1,T.visible=!1}).catch(()=>{E.loading=!1})};return()=>{const{defaultOptions:T,storeData:F}=e,D=H.value,w=u.value,C=d.value,R=T.slots||{},M=R.top,_=R.bottom,re=R.default,ue=R.footer;return o?f(o,{id:"VXE_IMPORT_MODAL",modelValue:F.visible,title:Pl("vxe.import.impTitle"),className:"vxe-table-export-popup-wrapper",width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:E.loading,"onUpdate:modelValue"(ee){F.visible=ee},onShow:j},{default:()=>{const ee={$table:v,$grid:v.xegrid,options:T,params:T.params};return f("div",{class:"vxe-table-export--panel"},[M?f("div",{class:"vxe-table-export--panel-top"},v.callSlot(M,ee)):We(),f("div",{class:"vxe-table-export--panel-body"},re?v.callSlot(re,ee):[f("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[f("tbody",[f("tr",[f("td",Pl("vxe.import.impFile")),f("td",[w?f("div",{class:"vxe-table-export--selected--file",title:D},[f("span",D),f("i",{class:Nd().INPUT_CLEAR,onClick:b})]):f("button",{ref:I,class:"vxe-table-export--select--file",onClick:B},Pl("vxe.import.impSelect"))])]),f("tr",[f("td",Pl("vxe.import.impType")),f("td",C)]),f("tr",[f("td",Pl("vxe.import.impMode")),f("td",[a?f(a,{modelValue:T.mode,options:F.modeList,"onUpdate:modelValue"(V){T.mode=V}}):We()])])])])]),_?f("div",{class:"vxe-table-export--panel-bottom"},v.callSlot(_,ee)):We()])},footer(){const ee={$table:v,$grid:v.xegrid,options:T,params:T.params};return f("div",{class:"vxe-table-export--panel-footer"},ue?v.callSlot(ue,ee):[f("div",{class:"vxe-table-export--panel-btns"},[n?f(n,{content:Pl("vxe.import.impCancel"),onClick:Z}):We(),n?f(n,{status:"primary",disabled:!w||E.loading,content:Pl("vxe.import.impConfirm"),onClick:$}):We()])])}}):We()}}}),{getI18n:It,getIcon:en}=te,Wd=Po({name:"VxeTableExportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeButton"),a=te.getComponent("VxeSelect"),v=te.getComponent("VxeInput"),m=te.getComponent("VxeCheckbox"),E=xo("$xeTable",{}),{computeExportOpts:I,computePrintOpts:H}=E.getComputeMaps(),u=Uo({isAll:!1,isIndeterminate:!1,loading:!1}),d=qe(),b=qe(),B=qe(),j=_e(()=>{const{storeData:V}=e;return V.columns.every(Q=>Q.checked)}),Z=_e(()=>{const{defaultOptions:V}=e;return["html","xml","xlsx","pdf"].indexOf(V.type)>-1}),$=_e(()=>{const{storeData:V,defaultOptions:Q}=e;return!Q.original&&Q.mode==="current"&&(V.isPrint||["html","xlsx"].indexOf(Q.type)>-1)}),A=_e(()=>{const{defaultOptions:V}=e;return!V.original&&["xlsx"].indexOf(V.type)>-1}),T=V=>{const{storeData:Q}=e,J=r.findTree(Q.columns,pe=>pe===V);if(J&&J.parent){const{parent:pe}=J;pe.children&&pe.children.length&&(pe.checked=pe.children.every(Ie=>Ie.checked),pe.halfChecked=!pe.checked&&pe.children.some(Ie=>Ie.checked||Ie.halfChecked),T(pe))}},F=()=>{const{storeData:V}=e,Q=V.columns;u.isAll=Q.every(J=>J.disabled||J.checked),u.isIndeterminate=!u.isAll&&Q.some(J=>!J.disabled&&(J.checked||J.halfChecked))},D=V=>{const Q=!V.checked;r.eachTree([V],J=>{J.checked=Q,J.halfChecked=!1}),T(V),F()},w=()=>{const{storeData:V}=e,Q=!u.isAll;r.eachTree(V.columns,J=>{J.disabled||(J.checked=Q,J.halfChecked=!1)}),u.isAll=Q,F()},C=()=>{ce(()=>{const V=b.value,Q=B.value,J=d.value,pe=V||Q||J;pe&&pe.focus()}),F()},R=()=>{const{storeData:V,defaultOptions:Q}=e,{hasMerge:J,columns:pe}=V,Ie=j.value,Pe=$.value,ke=r.searchTree(pe,G=>G.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},Q,{columns:ke,isMerge:J&&Pe&&Ie?Q.isMerge:!1})},M=()=>{const{storeData:V}=e,Q=H.value;V.visible=!1,E.print(Object.assign({},Q,R()))},_=()=>{const{storeData:V}=e,Q=I.value;u.loading=!0,E.exportData(Object.assign({},Q,R())).then(()=>{u.loading=!1,V.visible=!1}).catch(()=>{u.loading=!1})},re=()=>{const{storeData:V}=e;V.visible=!1},ue=()=>{const{storeData:V}=e;V.isPrint?M():_()};return()=>{const{defaultOptions:V,storeData:Q}=e,{isAll:J,isIndeterminate:pe}=u,{hasTree:Ie,hasMerge:Pe,isPrint:ke,hasColgroup:G,columns:K}=Q,{isHeader:Y}=V,se=[],oe=j.value,ge=Z.value,xe=$.value,Ee=A.value,Ce=V.slots||{},le=Ce.top,he=Ce.bottom,U=Ce.default,we=Ce.footer,be=Ce.parameter;return r.eachTree(K,ae=>{const L=to(ae.getTitle(),1),Te=ae.children&&ae.children.length,me=ae.checked,Ne=ae.halfChecked,Be=ae.type==="html";se.push(f("li",{key:ae.id,class:["vxe-table-export--panel-column-option",`level--${ae.level}`,{"is--group":Te,"is--checked":me,"is--indeterminate":Ne,"is--disabled":ae.disabled}],title:Be?"":L,onClick:()=>{ae.disabled||D(ae)}},[f("span",{class:["vxe-checkbox--icon",Ne?en().TABLE_CHECKBOX_INDETERMINATE:me?en().TABLE_CHECKBOX_CHECKED:en().TABLE_CHECKBOX_UNCHECKED]}),Be?f("span",{key:"1",class:"vxe-checkbox--label",innerHTML:L}):f("span",{key:"0",class:"vxe-checkbox--label"},L)]))}),o?f(o,{id:"VXE_EXPORT_MODAL",modelValue:Q.visible,title:It(ke?"vxe.export.printTitle":"vxe.export.expTitle"),className:"vxe-table-export-popup-wrapper",width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:u.loading,"onUpdate:modelValue"(ae){Q.visible=ae},onShow:C},{default:()=>{const ae={$table:E,$grid:E.xegrid,options:V,columns:K,params:V.params};return f("div",{class:"vxe-table-export--panel"},[le?f("div",{class:"vxe-table-export--panel-top"},E.callSlot(le,ae)):We(),f("div",{class:"vxe-table-export--panel-body"},U?E.callSlot(U,ae):[f("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[f("tbody",[[ke?We():f("tr",[f("td",It("vxe.export.expName")),f("td",[v?f(v,{ref:b,modelValue:V.filename,type:"text",clearable:!0,placeholder:It("vxe.export.expNamePlaceholder"),"onUpdate:modelValue"(L){V.filename=L}}):We()])]),ke?We():f("tr",[f("td",It("vxe.export.expType")),f("td",[a?f(a,{modelValue:V.type,options:Q.typeList,"onUpdate:modelValue"(L){V.type=L}}):We()])]),ke||ge?f("tr",[f("td",It("vxe.export.expSheetName")),f("td",[v?f(v,{ref:B,modelValue:V.sheetName,type:"text",clearable:!0,placeholder:It("vxe.export.expSheetNamePlaceholder"),"onUpdate:modelValue"(L){V.sheetName=L}}):We()])]):We(),f("tr",[f("td",It("vxe.export.expMode")),f("td",[a?f(a,{modelValue:V.mode,options:Q.modeList.map(L=>({value:L.value,label:It(L.label)})),"onUpdate:modelValue"(L){V.mode=L}}):We()])]),f("tr",[f("td",[It("vxe.export.expColumn")]),f("td",[f("div",{class:"vxe-table-export--panel-column"},[f("ul",{class:"vxe-table-export--panel-column-header"},[f("li",{class:["vxe-table-export--panel-column-option",{"is--checked":J,"is--indeterminate":pe}],title:It("vxe.table.allTitle"),onClick:w},[f("span",{class:["vxe-checkbox--icon",pe?en().TABLE_CHECKBOX_INDETERMINATE:J?en().TABLE_CHECKBOX_CHECKED:en().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},It("vxe.export.expCurrentColumn"))])]),f("ul",{class:"vxe-table-export--panel-column-body"},se)])])]),f("tr",[f("td",It("vxe.export.expOpts")),be?f("td",[f("div",{class:"vxe-table-export--panel-option-row"},E.callSlot(be,ae))]):f("td",[f("div",{class:"vxe-table-export--panel-option-row"},[m?f(m,{modelValue:V.isHeader,title:It("vxe.export.expHeaderTitle"),content:It("vxe.export.expOptHeader"),"onUpdate:modelValue"(L){V.isHeader=L}}):We(),m?f(m,{modelValue:V.isFooter,disabled:!Q.hasFooter,title:It("vxe.export.expFooterTitle"),content:It("vxe.export.expOptFooter"),"onUpdate:modelValue"(L){V.isFooter=L}}):We(),m?f(m,{modelValue:V.original,title:It("vxe.export.expOriginalTitle"),content:It("vxe.export.expOptOriginal"),"onUpdate:modelValue"(L){V.original=L}}):We()]),f("div",{class:"vxe-table-export--panel-option-row"},[m?f(m,{modelValue:Y&&G&&xe?V.isColgroup:!1,title:It("vxe.export.expColgroupTitle"),disabled:!Y||!G||!xe,content:It("vxe.export.expOptColgroup"),"onUpdate:modelValue"(L){V.isColgroup=L}}):We(),m?f(m,{modelValue:Pe&&xe&&oe?V.isMerge:!1,title:It("vxe.export.expMergeTitle"),disabled:!Pe||!xe||!oe,content:It("vxe.export.expOptMerge"),"onUpdate:modelValue"(L){V.isMerge=L}}):We(),ke||!m?We():f(m,{modelValue:Ee?V.useStyle:!1,disabled:!Ee,title:It("vxe.export.expUseStyleTitle"),content:It("vxe.export.expOptUseStyle"),"onUpdate:modelValue"(L){V.useStyle=L}}),m?f(m,{modelValue:Ie?V.isAllExpand:!1,disabled:!Ie,title:It("vxe.export.expAllExpandTitle"),content:It("vxe.export.expOptAllExpand"),"onUpdate:modelValue"(L){V.isAllExpand=L}}):We()])])])]])])]),he?f("div",{class:"vxe-table-export--panel-bottom"},E.callSlot(he,ae)):We()])},footer(){const ae={$table:E,$grid:E.xegrid,options:V,columns:K,params:V.params};return f("div",{class:"vxe-table-export--panel-footer"},we?E.callSlot(we,ae):[f("div",{class:"vxe-table-export--panel-btns"},[n?f(n,{content:It("vxe.export.expCancel"),onClick:re}):We(),n?f(n,{ref:d,status:"primary",content:It(ke?"vxe.export.expPrint":"vxe.export.expConfirm"),onClick:ue}):We()])])}}):We()}}}),{getIcon:zd}=te,Xd=Po({name:"VxeTableMenuPanel",setup(e,o){const n=r.uniqueId(),a=xo("$xeTable",{}),{reactData:v}=a,m=qe(),E={refElem:m},I={xID:n,props:e,context:o,getRefMaps:()=>E},H=()=>{const{ctxMenuStore:u}=v,{computeMenuOpts:d}=a.getComputeMaps(),b=d.value;return f(Qa,{to:"body",disabled:!1},[f("div",{ref:m,class:["vxe-table--context-menu-wrapper",b.className,{"is--visible":u.visible}],style:u.style},u.list.map((B,j)=>B.every(Z=>Z.visible===!1)?We():f("ul",{class:"vxe-context-menu--option-wrapper",key:j},B.map((Z,$)=>{const A=Z.children&&Z.children.some(D=>D.visible!==!1),T=Object.assign({},Z.prefixConfig),F=Object.assign({},Z.suffixConfig);return Z.visible===!1?null:f("li",{class:[Z.className,{"link--disabled":Z.disabled,"link--active":Z===u.selected}],key:`${j}_${$}`},[f("a",{class:"vxe-context-menu--link",onClick(D){a.ctxMenuLinkEvent(D,Z)},onMouseover(D){a.ctxMenuMouseoverEvent(D,Z)},onMouseout(D){a.ctxMenuMouseoutEvent(D,Z)}},[f("div",{class:["vxe-context-menu--link-prefix",T.className||""]},[f("i",{class:T.icon||Z.prefixIcon}),T.content?f("span",{},`${T.content}`):We()]),f("div",{class:"vxe-context-menu--link-content"},cl(Z.name)),f("div",{class:["vxe-context-menu--link-suffix",F.className||""]},[f("i",{class:F.icon||Z.suffixIcon||(A?zd().TABLE_MENU_OPTIONS:"")}),F.content?f("span",`${F.content}`):We()])]),A?f("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":Z===u.selected&&u.showChild}]},Z.children.map((D,w)=>{const C=Object.assign({},D.prefixConfig),R=Object.assign({},D.suffixConfig);return D.visible===!1?null:f("li",{class:[D.className,{"link--disabled":D.disabled,"link--active":D===u.selectChild}],key:`${j}_${$}_${w}`},[f("a",{class:"vxe-context-menu--link",onClick(M){a.ctxMenuLinkEvent(M,D)},onMouseover(M){a.ctxMenuMouseoverEvent(M,Z,D)},onMouseout(M){a.ctxMenuMouseoutEvent(M,Z)}},[f("div",{class:["vxe-context-menu--link-prefix",C.className||""]},[f("i",{class:C.icon||D.prefixIcon}),C.content?f("span",`${C.content}`):We()]),f("div",{class:"vxe-context-menu--link-content"},cl(D.name)),f("div",{class:["vxe-context-menu--link-suffix",R.className||""]},[f("i",{class:R.icon}),R.content?f("span",`${R.content}`):We()])])])})):null])}))))])};return I.renderVN=H,I},render(){return this.renderVN()}}),{getConfig:xt,getIcon:ns,getI18n:Sl,renderer:ni,formats:si,createEvent:qd,globalResize:Kd,interceptor:ri,hooks:Ud,globalEvents:St,GLOBAL_EVENT_KEYS:Lo,useFns:Yd,renderEmptyElement:bo}=te,ii="VXE_CUSTOM_STORE",pn=Po({name:"VxeTable",props:Er,emits:yr,setup(e,o){const{slots:n,emit:a}=o,v=r.uniqueId(),m=te.getComponent("VxeLoading"),E=te.getComponent("VxeTooltip"),I=xo("$xeTabs",null),{computeSize:H}=Yd.useSize(e),u=Uo({isCalcColumn:!1,staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selectCheckboxMaps:{},currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},treeIndeterminateMaps:{},mergeList:[],mergeFooterList:[],upDataFlag:0,reColumnFlag:0,pendingRowMaps:{},initStore:{filter:!1,import:!1,export:!1,custom:!1},customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},customColumnList:[],filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null},insertMaps:{},removeMaps:{}},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1},scrollVMLoading:!1,isCalcCellHeight:0,isCustomStatus:!1,isDragRowMove:!1,dragRow:null,isDragColMove:!1,dragCol:null,dragTipText:"",_isResize:!1,_isLoading:!1}),d={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},sourceDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},columnStatusMaps:{},rowStatusMaps:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1};let b={},B={};const j=qe(),Z=qe(),$=qe(),A=qe(),T=qe(),F=qe(),D=qe(),w=qe(),C=qe(),R=qe(),M=qe(),_=qe(),re=qe(),ue=qe(),ee=qe(),V=qe(),Q=qe(),J=qe(),pe=qe(),Ie=qe(),Pe=qe(),ke=qe(),G=qe(),K=qe(),Y=qe(),se=qe(),oe=qe(),ge=qe(),xe=qe(),Ee=qe(),Ce=xo("$xeGrid",null);let le;const he=_e(()=>{const{id:t}=e;return t?r.isFunction(t)?`${t({$table:h,$grid:Ce})||""}`:`${t}`:""}),U=_e(()=>Object.assign({},xt().table.validConfig,e.validConfig)),we=_e(()=>Object.assign({},xt().table.scrollX,e.scrollX)),be=_e(()=>{const t=we.value,{threshold:l}=t;return l?r.toNumber(l):0}),ae=_e(()=>Object.assign({},xt().table.scrollY,e.scrollY)),L=_e(()=>{const t=ae.value,{threshold:l}=t;return l?r.toNumber(l):0}),Te=_e(()=>({default:48,medium:44,small:40,mini:36})),me=_e(()=>Object.assign({},xt().table.columnConfig,e.columnConfig)),Ne=_e(()=>Object.assign({},xt().table.cellConfig,e.cellConfig)),Be=_e(()=>Object.assign({},xt().table.rowConfig,e.rowConfig)),je=_e(()=>Object.assign({},xt().table.rowDragConfig,e.rowDragConfig)),$e=_e(()=>Object.assign({},xt().table.columnDragConfig,e.columnDragConfig)),tt=_e(()=>Object.assign({},xt().table.resizeConfig,e.resizeConfig)),Se=_e(()=>Object.assign({},xt().table.resizableConfig,e.resizableConfig)),He=_e(()=>Object.assign({startIndex:0},xt().table.seqConfig,e.seqConfig)),Fe=_e(()=>Object.assign({},xt().table.radioConfig,e.radioConfig)),ve=_e(()=>Object.assign({},xt().table.checkboxConfig,e.checkboxConfig));let Me=qe();Me=_e(()=>Object.assign({},xt().tooltip,xt().table.tooltipConfig,e.tooltipConfig));const Ve=_e(()=>{const t=Me.value;return Object.assign({},t)}),Ye=_e(()=>{const t=Me.value;return Object.assign({isArrow:!1},t)}),Xe=_e(()=>Object.assign({},xt().table.editConfig,e.editConfig)),Ge=_e(()=>Object.assign({orders:["asc","desc",null]},xt().table.sortConfig,e.sortConfig)),fe=_e(()=>Object.assign({},xt().table.filterConfig,e.filterConfig)),et=_e(()=>Object.assign({},xt().table.mouseConfig,e.mouseConfig)),Ze=_e(()=>Object.assign({},xt().table.areaConfig,e.areaConfig)),st=_e(()=>Object.assign({},xt().table.keyboardConfig,e.keyboardConfig)),N=_e(()=>Object.assign({},xt().table.clipConfig,e.clipConfig)),de=_e(()=>Object.assign({},xt().table.fnrConfig,e.fnrConfig)),ne=_e(()=>Object.assign({},xt().table.menuConfig,e.menuConfig)),De=_e(()=>{const l=ne.value.header;return l&&l.options?l.options:[]}),Ae=_e(()=>{const l=ne.value.body;return l&&l.options?l.options:[]}),ze=_e(()=>{const l=ne.value.footer;return l&&l.options?l.options:[]}),dt=_e(()=>{const t=ne.value,l=De.value,s=Ae.value,i=ze.value;return!!(e.menuConfig&&ft(t)&&(l.length||s.length||i.length))}),pt=_e(()=>{const{ctxMenuStore:t}=u,l=[];return t.list.forEach(s=>{s.forEach(i=>{l.push(i)})}),l}),ht=_e(()=>Object.assign({},xt().table.exportConfig,e.exportConfig)),ut=_e(()=>Object.assign({},xt().table.importConfig,e.importConfig)),Ct=_e(()=>Object.assign({},xt().table.printConfig,e.printConfig)),Je=_e(()=>Object.assign({},xt().table.expandConfig,e.expandConfig)),Qe=_e(()=>Object.assign({},xt().table.treeConfig,e.treeConfig)),Tt=_e(()=>Object.assign({},xt().table.emptyRender,e.emptyRender)),ao=_e(()=>Object.assign({},xt().table.loadingConfig,e.loadingConfig)),Mt=_e(()=>e.border?Math.max(2,Math.ceil(u.scrollbarWidth/u.tableColumn.length)):1),Gt=_e(()=>Object.assign({},xt().table.customConfig,e.customConfig)),ho=_e(()=>{const{visibleColumn:t}=d,{tableColumn:l}=u;return l.length||t.length?t.filter(s=>s.width==="auto"||s.minWidth==="auto"):[]}),Xt=_e(()=>{const{tableColumn:t}=u,{collectColumn:l}=d;let s=0;return t.length&&l.length&&l.forEach(i=>{i.renderFixed&&s++}),s}),oo=_e(()=>{const t=Xt.value,l=me.value,{maxFixedSize:s}=l;return s?t>=s:!1}),mt=_e(()=>{const{border:t}=e;return t===!0?"full":t||"default"}),wo=_e(()=>{const{tableData:t}=u,{tableFullData:l}=d,s=ve.value,{strict:i,checkMethod:c}=s;return i?t.length||l.length?c?l.every(g=>!c({row:g})):!1:!0:!1}),lo=_e(()=>{const{overflowX:t,scrollXLoad:l,overflowY:s,scrollYLoad:i}=u;return{x:t&&l,y:s&&i}}),wt={refElem:j,refTooltip:Z,refValidTooltip:A,refTableFilter:F,refTableCustom:D,refTableMenu:T,refTableHeader:w,refTableBody:C,refTableFooter:R,refTableLeftHeader:M,refTableLeftBody:_,refTableLeftFooter:re,refTableRightHeader:ue,refTableRightBody:ee,refTableRightFooter:V,refLeftContainer:Q,refRightContainer:J,refCellResizeBar:pe,refCellResizeTip:Ie,refScrollXVirtualElem:Y,refScrollYVirtualElem:se,refScrollXHandleElem:oe,refScrollYHandleElem:ge,refScrollXSpaceElem:xe,refScrollYSpaceElem:Ee},no={computeSize:H,computeTableId:he,computeValidOpts:U,computeSXOpts:we,computeSYOpts:ae,computeColumnOpts:me,computeCellOpts:Ne,computeRowOpts:Be,computeRowDragOpts:je,computeColumnDragOpts:$e,computeResizeOpts:tt,computeResizableOpts:Se,computeSeqOpts:He,computeRadioOpts:Fe,computeCheckboxOpts:ve,computeTooltipOpts:Me,computeEditOpts:Xe,computeSortOpts:Ge,computeFilterOpts:fe,computeMouseOpts:et,computeAreaOpts:Ze,computeKeyboardOpts:st,computeClipOpts:N,computeFNROpts:de,computeHeaderMenu:De,computeBodyMenu:Ae,computeFooterMenu:ze,computeIsMenu:dt,computeMenuOpts:ne,computeExportOpts:ht,computeImportOpts:ut,computePrintOpts:Ct,computeExpandOpts:Je,computeTreeOpts:Qe,computeEmptyOpts:Tt,computeLoadingOpts:ao,computeCustomOpts:Gt,computeFixedColumnSize:Xt,computeIsMaxFixedColumn:oo,computeIsAllCheckboxDisabled:wo,computeVirtualScrollBars:lo},h={xID:v,props:e,context:o,reactData:u,internalData:d,getRefMaps:()=>wt,getComputeMaps:()=>no,xegrid:Ce},Vt=(t,l,s)=>{const i=r.get(t,s),c=r.get(l,s);return rl(i)&&rl(c)?!0:r.isString(i)||r.isNumber(i)?""+i==""+c:r.isEqual(i,c)},qt=t=>{const l=Ge.value,{orders:s}=l,i=t.order||null,c=s.indexOf(i)+1;return s[c<s.length?c:0]},Dt=t=>{const l=xt().version,s=r.toStringJSON(localStorage.getItem(ii)||""),i=s&&s._v===l?s:{_v:l};return(t?i[t]:i)||{}},po=(t,l)=>{const s=xt().version,i=Dt();i[t]=l||void 0,i._v=s,localStorage.setItem(ii,r.toJSONString(i))},so=t=>{const{fullAllDataRowIdData:l}=d,s={};return r.each(t,(i,c)=>{l[c]&&(s[c]=i)}),s},Nt=t=>{const{fullDataRowIdData:l}=d,s=[];return r.each(t,(i,c)=>{l[c]&&h.findRowIndexOf(s,l[c].row)===-1&&s.push(l[c].row)}),s},Kt=()=>{const{visibleColumn:t}=d,l=C.value,s=l?l.$el:null;if(s){const{scrollLeft:i,clientWidth:c}=s,g=i+c;let p=-1,x=0,y=0;for(let S=0,O=t.length;S<O&&(x+=t[S].renderWidth,p===-1&&i<x&&(p=S),!(p>=0&&(y++,x>g)));S++);return{toVisibleIndex:Math.max(0,p),visibleSize:Math.max(6,y)}}return{toVisibleIndex:0,visibleSize:6}},go=()=>{const t=w.value,l=C.value,s=l?l.$el:null,i=H.value,c=Te.value;let g=0;if(s){const p=t?t.$el:null;let x;x=s.querySelector("tr"),!x&&p&&(x=p.querySelector("tr")),x&&(g=x.clientHeight)}return g||(g=c[i||"default"]),Math.max(18,g)},Lt=()=>{const{showOverflow:t}=e,{scrollYStore:l,afterFullData:s,fullAllDataRowIdData:i}=d,c=C.value,g=c?c.$el:null,{rowHeight:p}=l;if(g){const{scrollTop:x,clientHeight:y}=g,S=x+y;let O=-1,W=0,k=0;if(t)O=Math.floor(x/p),k=Math.ceil(y/p)+1;else for(let X=0,q=s.length;X<q;X++){const P=s[X],ie=Re(h,P),Oe=i[ie];if(W+=Oe&&Oe.height||p,O===-1&&x<W&&(O=X),O>=0&&(k++,W>S))break}return{toVisibleIndex:Math.max(0,O),visibleSize:Math.max(8,k)}}return{toVisibleIndex:0,visibleSize:8}},Ht=(t,l,s)=>{for(let i=0,c=t.length;i<c;i++){const g=t[i],{startIndex:p,endIndex:x}=l,y=g[s],S=g[s+"span"],O=y+S;y<p&&p<O&&(l.startIndex=y),y<x&&x<O&&(l.endIndex=O),(l.startIndex!==p||l.endIndex!==x)&&(i=-1)}},Eo=(t,l,s)=>{if(t){const{treeConfig:i}=e,{visibleColumn:c}=d;r.isArray(t)||(t=[t]),i&&t.length&&zt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(g=>{let{row:p,col:x,rowspan:y,colspan:S}=g;if(s&&r.isNumber(p)&&(p=s[p]),r.isNumber(x)&&(x=c[x]),(s?p:r.isNumber(p))&&x&&(y||S)&&(y=r.toNumber(y)||1,S=r.toNumber(S)||1,y>1||S>1)){const O=r.findIndexOf(l,k=>(k._row===p||Re(h,k._row)===Re(h,p))&&(k._col.id===x||k._col.id===x.id)),W=l[O];if(W)W.rowspan=y,W.colspan=S,W._rowspan=y,W._colspan=S;else{const k=s?h.findRowIndexOf(s,p):p,X=b.getVTColumnIndex(x);l.push({row:k,col:X,rowspan:y,colspan:S,_row:p,_col:x,_rowspan:y,_colspan:S})}}})}},dl=(t,l,s)=>{const i=[];if(t){const{treeConfig:c}=e,{visibleColumn:g}=d;r.isArray(t)||(t=[t]),c&&t.length&&zt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(p=>{let{row:x,col:y}=p;s&&r.isNumber(x)&&(x=s[x]),r.isNumber(y)&&(y=g[y]);const S=r.findIndexOf(l,O=>(O._row===x||Re(h,O._row)===Re(h,x))&&(O._col.id===y||O._col.id===y.id));if(S>-1){const O=l.splice(S,1);i.push(O[0])}})}return i},ul=()=>{const{tableFullColumn:t}=d;t.forEach(l=>{l.order=null})},Go=t=>{const{parentHeight:l}=u,s=e[t];let i=0;if(s)if(s==="100%"||s==="auto")i=l;else{const c=h.getExcludeHeight();$n(s)?i=Math.floor((r.toInteger(s)||1)/100*l):i=r.toNumber(s),i=Math.max(40,i-c)}return i},_o=t=>{let{collectColumn:l}=d;const{resizableData:s,sortData:i,visibleData:c,fixedData:g}=t;let p=!1;s||i||c||g?(r.eachTree(l,(x,y,S,O,W)=>{const k=x.getKey();W||(g&&g[k]!==void 0&&(x.fixed=g[k]),i&&r.isNumber(i[k])&&(p=!0,x.renderSortNumber=i[k])),s&&r.isNumber(s[k])&&(x.resizeWidth=s[k]),c&&r.isBoolean(c[k])&&(x.visible=c[k])}),p&&(l=r.orderBy(l,"renderSortNumber"),d.collectColumn=l,d.tableFullColumn=Kn(l)),u.isCustomStatus=!0):u.isCustomStatus=!1},Kl=()=>{const{customConfig:t}=e,l=he.value,s=Gt.value,{storage:i,restoreStore:c}=s,g=i===!0,p=g?{}:Object.assign({},i||{}),x=g||p.resizable,y=g||p.visible,S=g||p.fixed,O=g||p.sort;if((t?ft(s):s.enabled)&&(x||y||S||O)){if(!l){zt("vxe.error.reqProp",["id"]);return}const W=Dt(l);return c?Promise.resolve(c({id:l,type:"restore",storeData:W})).then(k=>{if(k)return _o(k)}).catch(k=>k):_o(W)}},xn=()=>{const{tableFullColumn:t,collectColumn:l}=d,s=d.fullColumnIdData={},i=d.fullColumnFieldData={};et.value,me.value;const c=$e.value,{isCrossDrag:g,isSelfToChildDrag:p}=c,x=Gt.value,{storage:y}=x;Be.value;const S=l.some(cn);let O=!!e.showOverflow,W,k;const X=(q,P,ie,Oe,z)=>{const{id:ye,field:Le,fixed:Ke,type:Ue,treeNode:at}=q,it={$index:-1,_index:-1,column:q,colid:ye,index:P,items:ie,parent:z||null,width:0};Le?(i[Le]&&zt("vxe.error.colRepet",["field",Le]),i[Le]=it):(y||g||p)&&zt("vxe.error.reqProp",[`${q.getTitle()||Ue||""} -> column.field`]),at?k||(k=q):Ue==="expand"&&(W||(W=q)),O&&q.showOverflow===!1&&(O=!1),s[ye]&&zt("vxe.error.colRepet",["colId",ye]),s[ye]=it};S?r.eachTree(l,(q,P,ie,Oe,z,ye)=>{q.level=ye.length,X(q,P,ie,Oe,z)}):t.forEach(X),u.isGroup=S,u.treeNodeColumn=k,u.expandColumn=W,u.isAllOverflow=O},Wo=()=>{d.customHeight=Go("height"),d.customMinHeight=Go("minHeight"),d.customMaxHeight=Go("maxHeight")},Vn=(t,l)=>{const s=l.querySelectorAll(`.vxe-header--column.${t.id}>.vxe-cell,.vxe-body--column.${t.id}>.vxe-cell,.vxe-footer--column.${t.id}>.vxe-cell`),i=s[0];let c=0;if(i){const p=getComputedStyle(i);c=Math.floor(r.toNumber(p.paddingLeft)+r.toNumber(p.paddingRight))+2}let g=t.renderAutoWidth-c;return r.arrayEach(s,p=>{const x=p,y=x.parentElement;let S=0;if(`${y.tagName}`.toLowerCase()==="th")r.arrayEach(x.children,O=>{S+=O.offsetWidth+1});else{const O=x.firstElementChild;O&&(S=O.offsetWidth)}S&&(g=Math.max(g,Math.ceil(S)+4))}),g+c},Fl=()=>{const t=ho.value;return u.isCalcColumn=!0,ce().then(()=>{const{fullColumnIdData:l}=d,s=j.value;s&&(t.forEach(i=>{const c=i.id,g=l[c],p=Vn(i,s);g&&(g.width=Math.max(p,g.width)),i.renderAutoWidth=p}),h.analyColumnWidth()),u.isCalcColumn=!1})},Cl=()=>{const t=w.value,l=C.value,s=R.value,i=l?l.$el:null,c=t?t.$el:null,g=s?s.$el:null;if(!i)return;let p=0;const x=40,y=i.clientWidth-1;let S=y,O=S/100;const{fit:W}=e,{columnStore:k}=u,{resizeList:X,pxMinList:q,autoMinList:P,pxList:ie,scaleList:Oe,scaleMinList:z,autoList:ye,remainList:Le}=k;if(q.forEach(lt=>{const rt=r.toInteger(lt.minWidth);p+=rt,lt.renderWidth=rt}),P.forEach(lt=>{const rt=Math.max(60,r.toInteger(lt.renderAutoWidth));p+=rt,lt.renderWidth=rt}),z.forEach(lt=>{const rt=Math.floor(r.toInteger(lt.minWidth)*O);p+=rt,lt.renderWidth=rt}),Oe.forEach(lt=>{const rt=Math.floor(r.toInteger(lt.width)*O);p+=rt,lt.renderWidth=rt}),ie.forEach(lt=>{const rt=r.toInteger(lt.width);p+=rt,lt.renderWidth=rt}),ye.forEach(lt=>{const rt=Math.max(60,r.toInteger(lt.renderAutoWidth));p+=rt,lt.renderWidth=rt}),X.forEach(lt=>{const rt=r.toInteger(lt.resizeWidth);p+=rt,lt.renderWidth=rt}),S-=p,O=S>0?Math.floor(S/(z.length+q.length+P.length+Le.length)):0,W?S>0&&z.concat(q).concat(P).forEach(lt=>{p+=O,lt.renderWidth+=O}):O=x,Le.forEach(lt=>{const rt=Math.max(O,x);lt.renderWidth=rt,p+=rt}),W){const lt=Oe.concat(z).concat(q).concat(P).concat(Le);let rt=lt.length-1;if(rt>0){let Ot=y-p;if(Ot>0){for(;Ot>0&&rt>=0;)Ot--,lt[rt--].renderWidth++;p=y}}}const Ke=i.offsetHeight,Ue=i.scrollHeight>i.clientHeight;let at=0;Ue&&(at=Math.max(i.offsetWidth-i.clientWidth,0)),u.scrollbarWidth=at,u.overflowY=Ue,d.tableWidth=p,d.tableHeight=Ke;let it=0;c&&(it=c.clientHeight,ce(()=>{c&&i&&c.scrollLeft!==i.scrollLeft&&(c.scrollLeft=i.scrollLeft)})),d.headerHeight=it;let ct=!1,nt=0,gt=0;g?(nt=g.offsetHeight,ct=p>g.clientWidth,gt=Math.max(nt-g.clientHeight,0)):(ct=p>y,gt=Math.max(Ke-i.clientHeight,0)),d.footerHeight=nt,u.overflowX=ct,u.scrollbarHeight=gt,Wo(),u.parentHeight=Math.max(d.headerHeight+nt+20,B.getParentHeight()),ct&&B.checkScrolling()},fl=()=>{const{showOverflow:t}=e,{tableData:l,scrollXLoad:s}=u,{fullAllDataRowIdData:i}=d,c=j.value;if(!t&&c){let g=0,p=0,x=!1;l.forEach(y=>{const S=Re(h,y),O=i[S],W=c.querySelectorAll(`.vxe-body--row[rowid="${S}"]>.vxe-body--column>.vxe-cell`);if(O&&W.length){let k=0;for(let X=0;X<W.length;X++){const q=W[X],P=q.parentElement;if(!P||!P.clientWidth)break;x||(g=r.toNumber(getComputedStyle(P).paddingTop),p=r.toNumber(getComputedStyle(P).paddingBottom),x=!0);let ie=g+p;q&&(ie+=q.clientHeight),k=Math.max(k,ie)}O.height=s?Math.max(O.height,k):k}}),u.isCalcCellHeight++}},Cn=t=>{const{sortBy:l,sortType:s}=t;return i=>{let c;return l?c=r.isFunction(l)?l({row:i,column:t}):r.get(i,l):c=b.getCellLabel(i,t),!s||s==="auto"?isNaN(c)?c:r.toNumber(c):s==="number"?r.toNumber(c):s==="string"?r.toValueString(c):c}},wl=()=>{const{treeConfig:t}=e,{afterFullData:l,fullDataRowIdData:s,fullAllDataRowIdData:i,afterTreeFullData:c}=d,g=Qe.value,p=g.children||g.childrenField,x={};t?r.eachTree(c,(y,S,O,W)=>{const k=Re(h,y),X=i[k],q=W.map((P,ie)=>ie%2===0?Number(P)+1:".").join("");if(X)X.seq=q,X._index=S;else{const P={row:y,rowid:k,seq:q,index:-1,$index:-1,_index:-1,items:[],parent:null,level:0,height:0,oTop:0};i[k]=P,s[k]=P}x[k]=y},{children:g.transform?g.mapChildrenField:p}):l.forEach((y,S)=>{const O=Re(h,y),W=i[O],k=S+1;if(W)W.seq=k,W._index=S;else{const X={row:y,rowid:O,seq:k,index:-1,$index:-1,_index:S,items:[],parent:null,level:0,height:0,oTop:0};i[O]=X,s[O]=X}x[O]=y}),d.afterFullRowMaps=x},Do=()=>{const{treeConfig:t}=e,{treeExpandedMaps:l}=u,{fullAllDataRowIdData:s}=d,i=Qe.value,c=i.children||i.childrenField;if(t&&i.transform){const g=[],p={};return r.eachTree(d.afterTreeFullData,(x,y,S,O,W)=>{const k=Re(h,x),X=Re(h,W);if(!W||p[X]&&l[X]){const q=s[k];q&&(q._index=g.length),p[k]=1,g.push(x)}},{children:c}),d.afterFullData=g,Un(g),g}return d.afterFullData},Ul=()=>{const{treeConfig:t}=e,{tableFullColumn:l,tableFullData:s,tableFullTreeData:i}=d,c=fe.value,g=Ge.value,p=Qe.value,x=p.children||p.childrenField,{transform:y}=p,{remote:S,filterMethod:O}=c,{remote:W,sortMethod:k,multiple:X,chronological:q}=g;let P=[],ie=[];if(!S||!W){const Oe=[];let z=[];if(l.forEach(ye=>{const{field:Le,sortable:Ke,order:Ue,filters:at}=ye;if(!S&&at&&at.length){const it=[],ct=[];at.forEach(nt=>{nt.checked&&(ct.push(nt),it.push(nt.value))}),ct.length&&Oe.push({column:ye,valueList:it,itemList:ct})}!W&&Ke&&Ue&&z.push({column:ye,field:Le,property:Le,order:Ue,sortTime:ye.sortTime})}),X&&q&&z.length>1&&(z=r.orderBy(z,"sortTime")),!S&&Oe.length){const ye=Le=>Oe.every(({column:Ke,valueList:Ue,itemList:at})=>{const{filterMethod:it,filterRender:ct}=Ke,nt=ft(ct)?ni.get(ct.name):null,gt=nt?nt.tableFilterMethod||nt.filterMethod:null,lt=nt?nt.tableFilterDefaultMethod||nt.defaultTableFilterMethod||nt.defaultFilterMethod:null,rt=io(Le,Ke);return it?at.some(Ot=>it({value:Ot.value,option:Ot,cellValue:rt,row:Le,column:Ke,$table:h})):gt?at.some(Ot=>gt({value:Ot.value,option:Ot,cellValue:rt,row:Le,column:Ke,$table:h})):O?O({options:at,values:Ue,cellValue:rt,row:Le,column:Ke}):lt?at.some(Ot=>lt({value:Ot.value,option:Ot,cellValue:rt,row:Le,column:Ke,$table:h})):Ue.indexOf(r.get(Le,Ke.field))>-1});t&&y?(ie=r.searchTree(i,ye,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:x}),P=ie):(P=t?i.filter(ye):s.filter(ye),ie=P)}else t&&y?(ie=r.searchTree(i,()=>!0,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:x}),P=ie):(P=t?i.slice(0):s.slice(0),ie=P);if(!W&&z.length)if(t&&y){if(k){const ye=k({data:ie,sortList:z,$table:h});ie=r.isArray(ye)?ye:ie}else ie=r.orderBy(ie,z.map(({column:ye,order:Le})=>[Cn(ye),Le]));P=ie}else{if(k){const ye=k({data:P,sortList:z,$table:h});P=r.isArray(ye)?ye:P}else P=r.orderBy(P,z.map(({column:ye,order:Le})=>[Cn(ye),Le]));ie=P}}else t&&y?(ie=r.searchTree(i,()=>!0,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:x}),P=ie):(P=t?i.slice(0):s.slice(0),ie=P);d.afterFullData=P,d.afterTreeFullData=ie,wl()},co=()=>{const{border:t,showFooter:l,showOverflow:s,showHeaderOverflow:i,showFooterOverflow:c,mouseConfig:g,spanMethod:p,footerSpanMethod:x}=e,{isGroup:y,currentRow:S,tableColumn:O,scrollXLoad:W,scrollYLoad:k,overflowX:X,scrollbarWidth:q,scrollbarHeight:P,columnStore:ie,editStore:Oe,isAllOverflow:z,expandColumn:ye}=u;let{visibleColumn:Le,fullColumnIdData:Ke,tableHeight:Ue,tableWidth:at,headerHeight:it,footerHeight:ct,elemStore:nt,customHeight:gt,customMinHeight:lt,customMaxHeight:rt}=d;const Ot=["main","left","right"],Qo=Pe.value,No=Mt.value,pl=et.value,Xo=So(nt["main-body-wrapper"]);Qo&&(Qo.style.top=`${it}px`,Qo.style.height=Xo?`${Xo.offsetHeight-P}px`:""),gt>0&&l&&(gt+=P);const Fo=Y.value;Fo&&(Fo.style.height=`${P}px`);const Ro=se.value;if(Ro){let Zt=0,Oo=0;const Qt=lt-it-ct;rt&&(Oo=rt-it-ct,Oo=Math.max(Qt,Oo)),gt&&(Zt=gt-it-ct,Oo&&(Zt=Math.min(Oo,Zt)),Zt=Math.max(Qt,Zt)),Ro.style.top=`${it}px`,Ro.style.width=`${q}px`,Ro.style.height=`${Zt+(X?-Math.max(1,P):0)}px`}return Ot.forEach((Zt,Oo)=>{const Qt=Oo>0?Zt:"",gl=["header","body","footer"],Jo=Qt==="left";let kt=[],Pt;Qt&&(kt=Jo?ie.leftList:ie.rightList,Pt=Jo?Q.value:J.value),gl.forEach(jt=>{const At=So(nt[`${Zt}-${jt}-wrapper`]),uo=So(nt[`${Zt}-${jt}-table`]);if(jt==="header"){let fo=at,_t=O;y?_t=Le:Qt&&(_t=Le,(W||k||i)&&(p||x?_t=Le:_t=kt||[])),fo=_t.reduce((Co,Ao)=>Co+Ao.renderWidth,0),uo&&(uo.style.width=fo?`${fo+q}px`:"");const ko=So(nt[`${Zt}-${jt}-repair`]);ko&&(ko.style.width=`${at}px`);const Ut=So(nt[`${Zt}-${jt}-list`]);y&&Ut&&r.arrayEach(Ut.querySelectorAll(".col--group"),Co=>{const Ao=b.getColumnNode(Co);if(Ao){const Bl=Ao.item,{showHeaderOverflow:el}=Bl,Sn=r.isBoolean(el)?el:i,On=Sn==="title"||(Sn===!0||Sn==="tooltip")||Sn==="ellipsis";let Tn=0,Zl=0;On&&r.eachTree(Bl.children,Mn=>{(!Mn.children||!Bl.children.length)&&Zl++,Tn+=Mn.renderWidth},{children:"children"}),Co.style.width=On?`${Tn-Zl-(t?2:0)}px`:""}})}else if(jt==="body"){const fo=So(nt[`${Zt}-${jt}-emptyBlock`]);if(Xs(At)){let Ut=0;const Co=lt-it-ct;if(rt&&(Ut=rt-it-ct,Qt&&(Ut-=l?0:P),Ut=Math.max(Co,Ut),At.style.maxHeight=`${Ut}px`),gt){let Ao=gt-it-ct;Qt&&(Ao-=l?0:P),Ut&&(Ao=Math.min(Ut,Ao)),At.style.height=`${Math.max(Co,Ao)}px`}else At.style.height="";At.style.minHeight=`${Co}px`}Pt&&(Xs(At)&&(At.style.top=`${it}px`),Pt.style.height=`${(gt>0?gt-it-ct:Ue)+it+ct-P*(l?2:1)}px`,Pt.style.width=`${kt.reduce((Ut,Co)=>Ut+Co.renderWidth,Jo?0:q)}px`);let _t=at,ko=O;Qt&&(ko=Le,(W||k||s&&z)&&(ye||p||x?ko=Le:ko=kt||[])),_t=ko.reduce((Ut,Co)=>Ut+Co.renderWidth,0),uo&&(uo.style.width=_t?`${_t}px`:"",uo.style.paddingRight=q&&Qt&&(dn["-moz"]||dn.safari)?`${q}px`:""),fo&&(fo.style.width=_t?`${_t}px`:"")}else if(jt==="footer"){let fo=at,_t=O;Qt&&(_t=Le,(W||k||c)&&(p||x?_t=Le:_t=kt||[])),fo=_t.reduce((ko,Ut)=>ko+Ut.renderWidth,0),Xs(At)&&(Pt&&(At.style.top=`${gt>0?gt-ct:Ue+it}px`),At.style.marginTop=`${-Math.max(1,P)}px`),uo&&(uo.style.width=fo?`${fo+q}px`:"")}const To=So(nt[`${Zt}-${jt}-colgroup`]);To&&r.arrayEach(To.children,fo=>{const _t=fo.getAttribute("name");if(_t==="col_gutter"&&(fo.style.width=`${q}px`),Ke[_t]){const Ut=Ke[_t].column,{showHeaderOverflow:Co,showFooterOverflow:Ao,showOverflow:Bl}=Ut;let el;fo.style.width=`${Ut.renderWidth}px`,jt==="header"?el=r.isUndefined(Co)||r.isNull(Co)?i:Co:jt==="footer"?el=r.isUndefined(Ao)||r.isNull(Ao)?c:Ao:el=r.isUndefined(Bl)||r.isNull(Bl)?s:Bl;let Jn=el==="title"||(el===!0||el==="tooltip")||el==="ellipsis";const On=So(nt[`${Zt}-${jt}-list`]);k&&!Jn&&(Jn=!0),On&&r.arrayEach(On.querySelectorAll(`.${Ut.id}`),Tn=>{const Zl=parseInt(Tn.getAttribute("colspan")||1),Mn=Tn.querySelector(".vxe-cell");let Ar=Ut.renderWidth;if(Mn){if(Zl>1){const Za=b.getColumnIndex(Ut);for(let Ns=1;Ns<Zl;Ns++){const Lr=b.getColumns(Za+Ns);Lr&&(Ar+=Lr.renderWidth)}}Mn.style.width=Jn?`${Ar-No*Zl}px`:""}})}})})}),S&&b.setCurrentRow(S),g&&pl.selected&&Oe.selected.row&&Oe.selected.column&&h.addCellSelectedClass(),ce()},jo=t=>h.triggerValidate?h.triggerValidate(t):ce(),zo=(t,l)=>{jo("blur").catch(s=>s).then(()=>{h.handleEdit(l,t).then(()=>jo("change")).catch(s=>s)})},Yl=()=>{const{sortConfig:t}=e;if(t){const l=Ge.value;let{defaultSort:s}=l;s&&(r.isArray(s)||(s=[s]),s.length&&((t.multiple?s:s.slice(0,1)).forEach((i,c)=>{const{field:g,order:p}=i;if(g&&p){const x=b.getColumnByField(g);x&&x.sortable&&(x.order=p,x.sortTime=Date.now()+c)}}),l.remote||B.handleTableData(!0).then(co)))}},Nn=()=>{const{checkboxConfig:t}=e;if(t){const{fullDataRowIdData:l}=d,s=ve.value,{checkAll:i,checkRowKeys:c}=s;if(i)ro(!0,!0);else if(c){const g=[];c.forEach(p=>{l[p]&&g.push(l[p].row)}),yo(g,!0,!0)}}},hl=()=>{const{radioConfig:t}=e;if(t){const{fullDataRowIdData:l}=d,s=Fe.value,{checkRowKey:i,reserve:c}=s;if(i&&(l[i]&&kl(l[i].row,!0),c)){const g=xl(h);d.radioReserveRow={[g]:i}}}},Ts=()=>{const{expandConfig:t}=e;if(t){const{fullDataRowIdData:l}=d,s=Je.value,{expandAll:i,expandRowKeys:c}=s;if(i)b.setAllRowExpand(!0);else if(c){const g=[];c.forEach(p=>{l[p]&&g.push(l[p].row)}),b.setRowExpand(g,!0)}}},_n=t=>{Fe.value.reserve&&(d.radioReserveRow=t)},Io=(t,l)=>{const{checkboxReserveRowMap:s}=d;if(ve.value.reserve){const c=Re(h,t);l?s[c]=t:s[c]&&delete s[c]}},kl=(t,l)=>{const s=Fe.value,{checkMethod:i}=s;return t&&(l||!i||i({row:t}))&&(u.selectRadioRow=t,_n(t)),ce()},yo=(t,l,s)=>(t&&!r.isArray(t)&&(t=[t]),h.handleBatchSelectRows(t,!!l,s),h.checkSelectionStatus(),ce()),ro=(t,l)=>{const{treeConfig:s}=e,{selectCheckboxMaps:i}=u,{afterFullData:c,checkboxReserveRowMap:g}=d,p=Qe.value,x=p.children||p.childrenField,y=ve.value,{checkField:S,reserve:O,checkMethod:W}=y,k=y.indeterminateField||y.halfField,X={};if(S){const q=P=>{(l||!W||W({row:P}))&&(t&&(X[Re(h,P)]=P),r.set(P,S,t)),s&&k&&r.set(P,k,!1)};s?r.eachTree(c,q,{children:x}):c.forEach(q)}else s?t?r.eachTree(c,q=>{(l||!W||W({row:q}))&&(X[Re(h,q)]=q)},{children:x}):!l&&W&&r.eachTree(c,q=>{const P=Re(h,q);!W({row:q})&&i[P]&&(X[P]=q)},{children:x}):t?!l&&W?c.forEach(q=>{const P=Re(h,q);(i[P]||W({row:q}))&&(X[P]=q)}):c.forEach(q=>{X[Re(h,q)]=q}):!l&&W&&c.forEach(q=>{const P=Re(h,q);!W({row:q})&&i[P]&&(X[P]=q)});return O&&(t?r.each(X,(q,P)=>{g[P]=q}):c.forEach(q=>Io(q,!1))),u.selectCheckboxMaps=S?{}:X,u.isAllSelected=t,u.isIndeterminate=!1,u.treeIndeterminateMaps={},d.treeIndeterminateRowMaps={},B.checkSelectionStatus(),ce()},Al=()=>{const{treeConfig:t}=e,{expandColumn:l,currentRow:s,selectCheckboxMaps:i,selectRadioRow:c,rowExpandedMaps:g,treeExpandedMaps:p}=u,{fullDataRowIdData:x,fullAllDataRowIdData:y,radioReserveRow:S}=d,O=Je.value,W=Qe.value,k=Fe.value,X=ve.value;if(c&&!y[Re(h,c)]&&(u.selectRadioRow=null),k.reserve&&S){const q=Re(h,S);x[q]&&kl(x[q].row,!0)}u.selectCheckboxMaps=so(i),X.reserve&&yo(Nt(d.checkboxReserveRowMap),!0,!0),s&&!y[Re(h,s)]&&(u.currentRow=null),u.rowExpandedMaps=l?so(g):{},l&&O.reserve&&b.setRowExpand(Nt(d.rowExpandedReserveRowMap),!0),u.treeExpandedMaps=t?so(p):{},t&&W.reserve&&b.setTreeExpand(Nt(d.treeExpandedReserveRowMap),!0)},Wn=()=>{const{treeConfig:t}=e;if(t){const{tableFullData:l}=d,s=Qe.value,{expandAll:i,expandRowKeys:c}=s,g=s.children||s.childrenField;if(i)b.setAllTreeExpand(!0);else if(c){const p=[],x=xl(h);c.forEach(y=>{const S=r.findTree(l,O=>y===r.get(O,x),{children:g});S&&p.push(S.item)}),b.setTreeExpand(p,!0)}}},El=t=>{const l=Qe.value,s=ve.value,{transform:i,loadMethod:c}=l,{checkStrictly:g}=s;return new Promise(p=>{if(c){const{treeExpandLazyLoadedMaps:x}=u,{fullAllDataRowIdData:y}=d,S=Re(h,t),O=y[S];x[S]=t,Promise.resolve(c({$table:h,row:t})).then(W=>{if(O&&(O.treeLoaded=!0),x[S]&&delete x[S],r.isArray(W)||(W=[]),W)return b.loadTreeChildren(t,W).then(k=>{const{treeExpandedMaps:X}=u;return k.length&&!X[S]&&(X[S]=t),!g&&b.isCheckedByCheckboxRow(t)&&yo(k,!0),ce().then(()=>{if(i)return B.handleTableData(),wl(),ce()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:W}=u;O&&(O.treeLoaded=!1),W[S]&&delete W[S]}).finally(()=>{ce().then(()=>b.recalculate()).then(()=>p())})}else p()})},Ll=(t,l)=>{const{treeExpandedReserveRowMap:s}=d;if(Qe.value.reserve){const c=Re(h,t);l?s[c]=t:s[c]&&delete s[c]}},wn=t=>new Promise(l=>{const s=Je.value,{loadMethod:i}=s;if(i){const{fullAllDataRowIdData:c}=d,g=Object.assign({},u.rowExpandLazyLoadedMaps),p=Re(h,t),x=c[p];g[p]=t,u.rowExpandLazyLoadedMaps=g,i({$table:h,row:t,rowIndex:b.getRowIndex(t),$rowIndex:b.getVMRowIndex(t)}).then(()=>{const y=Object.assign({},u.rowExpandedMaps);x&&(x.expandLoaded=!0),y[p]=t,u.rowExpandedMaps=y}).catch(()=>{x&&(x.expandLoaded=!1)}).finally(()=>{const y=Object.assign({},u.rowExpandLazyLoadedMaps);y[p]&&delete y[p],u.rowExpandLazyLoadedMaps=y,ce().then(()=>b.recalculate()).then(()=>l())})}else l()}),zn=(t,l)=>{const{rowExpandedReserveRowMap:s}=d;if(Je.value.reserve){const c=Re(h,t);l?s[c]=t:s[c]&&delete s[c]}},Ft=()=>{const{mergeCells:t}=e;t&&b.setMergeCells(t)},Vo=()=>{const{mergeFooterItems:t}=e;t&&b.setMergeFooterItems(t)},Zo=()=>ce().then(()=>{const{scrollXLoad:t,scrollYLoad:l}=u,{scrollXStore:s,scrollYStore:i}=d,c=ae.value,g=we.value;if(t){const{visibleSize:y}=Kt(),S=Math.max(0,g.oSize?r.toNumber(g.oSize):dn.edge?5:0);s.offsetSize=S,s.visibleSize=y,s.endIndex=Math.max(s.startIndex+s.visibleSize+S,s.endIndex),B.updateScrollXData().then(()=>{$l()})}else B.updateScrollXSpace();fl();const p=go();i.rowHeight=p,u.rowHeight=p;const{visibleSize:x}=Lt();if(l){const y=Math.max(0,c.oSize?r.toNumber(c.oSize):dn.edge?10:0);i.offsetSize=y,i.visibleSize=x,i.endIndex=Math.max(i.startIndex+x+y,i.endIndex),B.updateScrollYData().then(()=>{En()})}else B.updateScrollYSpace();ce(co)}),Ms=t=>{const l=j.value;return d.rceRunTime=Date.now(),!l||!l.clientWidth?ce():(Fl(),Cl(),Zo().then(()=>{if(t===!0)return fl(),Fl(),Cl(),Zo()}))},Xn=t=>{const{keepSource:l,treeConfig:s,showOverflow:i}=e,{editStore:c,scrollYLoad:g}=u,{scrollYStore:p,scrollXStore:x,lastScrollLeft:y,lastScrollTop:S}=d,O=Qe.value,W=Be.value,{transform:k}=O,X=O.children||O.childrenField;let q=[],P=Uo(t?t.slice(0):[]);s&&(k?(q=r.toArrayTree(P,{key:O.rowField,parentKey:O.parentField,children:X,mapChildren:O.mapChildrenField}),P=q.slice(0)):q=P.slice(0)),p.startIndex=0,p.endIndex=1,x.startIndex=0,x.endIndex=1,u.scrollVMLoading=!1,c.insertMaps={},c.removeMaps={};const ie=Un(P);if(u.isDragRowMove=!1,d.tableFullData=P,d.tableFullTreeData=q,B.cacheRowMap(!0),d.tableSynchData=t,l&&B.cacheSourceMap(P),ie&&i&&!W.height){const Oe=d.tableFullColumn.find(z=>z.showOverflow===!1);Oe&&zt("vxe.error.errProp",[`column[field="${Oe.field}"].show-overflow=false`,"show-overflow=true"])}return h.clearCellAreas&&e.mouseConfig&&(h.clearCellAreas(),h.clearCopyCellArea()),b.clearMergeCells(),b.clearMergeFooterItems(),B.handleTableData(!0),b.updateFooter(),ce().then(()=>{Wo(),co()}).then(()=>{Zo()}).then(()=>(ie&&(p.endIndex=p.visibleSize),Al(),B.checkSelectionStatus(),new Promise(Oe=>{ce().then(()=>b.recalculate()).then(()=>{let z=y,ye=S;const Le=we.value,Ke=ae.value;Le.scrollToLeftOnChange&&(z=0),Ke.scrollToTopOnChange&&(ye=0),g===ie?qs(h,z,ye).then(Oe):setTimeout(()=>qs(h,z,ye).then(Oe))})})))},qn=()=>{Nn(),hl(),Ts(),Wn(),Ft(),Vo(),ce(()=>setTimeout(()=>b.recalculate()))},Ra=()=>{Yl()},Ds=()=>{const{scrollXLoad:t}=u,{visibleColumn:l,scrollXStore:s,fullColumnIdData:i}=d,c=t?l.slice(s.startIndex,s.endIndex):l.slice(0);c.forEach((g,p)=>{const x=g.id,y=i[x];y&&(y.$index=p)}),u.tableColumn=c},Sr=()=>{const t=r.orderBy(d.collectColumn,"renderSortNumber");d.collectColumn=t;const l=Kn(t);d.tableFullColumn=l,xn()},$l=()=>{const{mergeList:t,mergeFooterList:l}=u,{scrollXStore:s}=d,{startIndex:i,endIndex:c,offsetSize:g}=s,{toVisibleIndex:p,visibleSize:x}=Kt(),y={startIndex:Math.max(0,p-1-g),endIndex:p+x+g};Ht(t.concat(l),y,"col");const{startIndex:S,endIndex:O}=y;(p<=i||p>=c-x-1)&&(i!==S||c!==O)&&(s.startIndex=S,s.endIndex=O,B.updateScrollXData()),b.closeTooltip()},Kn=t=>{const l=[];return t.forEach(s=>{l.push(...s.children&&s.children.length?Kn(s.children):[s])}),l},Is=t=>{const{showOverflow:l}=e,s=Be.value,i=[],c=[],g=[],{isGroup:p,columnStore:x}=u,y=we.value,{collectColumn:S,tableFullColumn:O,scrollXStore:W,fullColumnIdData:k}=d;if(p){const P=[],ie=[],Oe=[];r.eachTree(S,(z,ye,Le,Ke,Ue)=>{const at=cn(z);Ue&&Ue.fixed&&(z.fixed=Ue.fixed),Ue&&z.fixed!==Ue.fixed&&zt("vxe.error.groupFixed"),at?z.visible=!!r.findTree(z.children,it=>cn(it)?!1:it.visible):z.visible&&(z.fixed==="left"?i.push(z):z.fixed==="right"?g.push(z):c.push(z))}),S.forEach(z=>{z.visible&&(z.fixed==="left"?P.push(z):z.fixed==="right"?Oe.push(z):ie.push(z))}),u.tableGroupColumn=P.concat(ie).concat(Oe)}else O.forEach(P=>{P.visible&&(P.fixed==="left"?i.push(P):P.fixed==="right"?g.push(P):c.push(P))});const X=i.concat(c).concat(g),q=!!y.enabled&&y.gt>-1&&(y.gt===0||y.gt<O.length);if(u.hasFixedColumn=i.length>0||g.length>0,Object.assign(x,{leftList:i,centerList:c,rightList:g}),q){if(l&&!s.height){const P=d.tableFullColumn.find(ie=>ie.showOverflow===!1);P&&zt("vxe.error.errProp",[`column[field="${P.field}"].show-overflow=false`,"show-overflow=true"])}if(t){const{visibleSize:P}=Kt();W.startIndex=0,W.endIndex=P,W.visibleSize=P}}return(X.length!==d.visibleColumn.length||!d.visibleColumn.every((P,ie)=>P===X[ie]))&&(b.clearMergeCells(),b.clearMergeFooterItems()),u.scrollXLoad=q,X.forEach((P,ie)=>{const Oe=P.id,z=k[Oe];z&&(z._index=ie)}),d.visibleColumn=X,Ds(),t?b.updateFooter().then(()=>b.recalculate()).then(()=>(b.updateCellAreas(),b.recalculate())):b.updateFooter()},Sa=()=>{const{collectColumn:t}=d;t.forEach((l,s)=>{const i=s+1;l.sortNumber=i,l.renderSortNumber=i})},Or=t=>{d.collectColumn=t;const l=Kn(t);return d.tableFullColumn=l,u._isLoading=!0,u.isDragColMove=!1,Sa(),Promise.resolve(Kl()).then(()=>(u._isLoading=!1,xn(),Is(!0).then(()=>{u.scrollXLoad&&$l()}),b.clearMergeCells(),b.clearMergeFooterItems(),B.handleTableData(!0),ce().then(()=>(le&&le.syncUpdate({collectColumn:d.collectColumn,$table:h}),h.handleUpdateCustomColumn&&h.handleUpdateCustomColumn(),b.recalculate()))))},Un=t=>{const{treeConfig:l}=e,s=ae.value,i=Qe.value,{transform:c}=i,g=t||d.tableFullData,p=(c||!l)&&!!s.enabled&&s.gt>-1&&(s.gt===0||s.gt<g.length);return u.scrollYLoad=p,p},Tr=(t,l)=>{const{treeExpandedMaps:s,treeExpandLazyLoadedMaps:i,treeNodeColumn:c}=u,g=Object.assign({},s),{fullAllDataRowIdData:p,tableFullData:x}=d,y=Qe.value,{reserve:S,lazy:O,accordion:W,toggleMethod:k}=y,X=y.children||y.childrenField,q=y.hasChild||y.hasChildField,P=[],ie=b.getColumnIndex(c),Oe=b.getVMColumnIndex(c);let z=k?t.filter(ye=>k({$table:h,expanded:l,column:c,columnIndex:ie,$columnIndex:Oe,row:ye})):t;if(W){z=z.length?[z[z.length-1]]:[];const ye=r.findTree(x,Le=>Le===z[0],{children:X});ye&&ye.items.forEach(Le=>{const Ke=Re(h,Le);g[Ke]&&delete g[Ke]})}return l?z.forEach(ye=>{const Le=Re(h,ye);if(!g[Le]){const Ke=p[Le];Ke&&(O&&ye[q]&&!Ke.treeLoaded&&!i[Le]?P.push(El(ye)):ye[X]&&ye[X].length&&(g[Le]=ye))}}):z.forEach(ye=>{const Le=Re(h,ye);g[Le]&&delete g[Le]}),S&&z.forEach(ye=>Ll(ye,l)),u.treeExpandedMaps=g,Promise.all(P).then(()=>b.recalculate())},Oa=(t,l)=>Tr(t,l).then(()=>{Do(),B.handleTableData(),wl()}).then(()=>b.recalculate()).then(()=>{setTimeout(()=>{b.updateCellAreas()},30)}),Mr=(t,l)=>{ro(l),t&&yt("checkbox-all",{records:b.getCheckboxRecords(),reserves:b.getCheckboxReserveRecords(),indeterminates:b.getCheckboxIndeterminateRecords(),checked:l},t)},En=()=>{const{showOverflow:t}=e,{mergeList:l}=u,{tableHeight:s,scrollYStore:i}=d,{startIndex:c,endIndex:g,offsetSize:p}=i,x=t?p:p+Math.min(8,Math.ceil(s/200)),{toVisibleIndex:y,visibleSize:S}=Lt(),O={startIndex:Math.max(0,y-1-p),endIndex:y+S+x};Ht(l,O,"row");const{startIndex:W,endIndex:k}=O;(y<=c||y>=g-S-1)&&(c!==W||g!==k)&&(i.startIndex=W,i.endIndex=k,h.updateScrollYData())},Yn=t=>function(l){const{fullAllDataRowIdData:s}=d;if(l){const i=Re(h,l),c=s[i];if(c)return c[t]}return-1},Fs=t=>function(l){const{fullColumnIdData:s}=d;if(l){const i=s[l.id];if(i)return i[t]}return-1},Ta=()=>{const{lxTimeout:t,lxRunTime:l,scrollXStore:s}=d,{visibleSize:i}=s,c=Math.min(80,Math.floor(i*3));t&&clearTimeout(t),(!l||l+c<Date.now())&&(d.lxRunTime=Date.now(),$l()),d.lxTimeout=setTimeout(()=>{d.lxTimeout=void 0,d.lxRunTime=void 0,$l()},c)},Ma=()=>{const{lyTimeout:t,lyRunTime:l,scrollYStore:s}=d,{visibleSize:i}=s,c=Math.min(80,Math.floor(i));t&&clearTimeout(t),(!l||l+c<Date.now())&&(d.lyRunTime=Date.now(),En()),d.lyTimeout=setTimeout(()=>{d.lyTimeout=void 0,d.lyRunTime=void 0,En()},c)},Da=t=>{const{intoRunScroll:l,inFooterScroll:s,inBodyScroll:i,lastScrollTop:c}=d;if(!l&&(s||i))return;const g=w.value,p=C.value,x=R.value,y=p.$el,S=g?g.$el:null,O=x?x.$el:null,W=ge.value,k=t.currentTarget,{scrollLeft:X}=k,q=W||y;let P=0;q&&(P=q.scrollTop);const ie=!0,Oe=P!==c;d.inVirtualScroll=!0,eo(y,X),eo(S,X),eo(O,X),h.triggerScrollXEvent(t),h.handleScrollEvent(t,Oe,ie,P,X,{type:"table",fixed:""})},Ia=t=>{const{intoRunScroll:l,inFooterScroll:s,inBodyScroll:i,lastScrollLeft:c}=d;if(!l&&(s||i))return;const g=C.value,p=_.value,x=ee.value,y=g.$el,S=p?p.$el:null,O=x?x.$el:null,W=oe.value,k=t.currentTarget,{scrollTop:X}=k,q=W||y;let P=0;q&&(P=q.scrollLeft);const ie=P!==c,Oe=!0;d.inVirtualScroll=!0,Wt(y,X),Wt(S,X),Wt(O,X),h.triggerScrollYEvent(t),h.handleScrollEvent(t,Oe,ie,X,P,{type:"table",fixed:""})},Fa=(t,l)=>{const{scrollXLoad:s,scrollYLoad:i}=u,{lcsTimeout:c}=d;c&&clearTimeout(c),d.lcsTimeout=setTimeout(()=>{d.lcsRunTime=Date.now(),d.lcsTimeout=void 0,d.inVirtualScroll=!1,d.inBodyScroll=!1,d.inFooterScroll=!1,d.bodyScrollType="",t&&s&&B.updateScrollXData().then(()=>{$l()}),l&&i&&B.updateScrollYData().then(()=>{En()}),b.updateCellAreas()},200)};let Dr;const yt=(t,l,s)=>{a(t,qd(s,{$table:h,$grid:Ce},l))},ka=(t,l)=>{const{fullColumnIdData:s}=d,i=Yt(h,t);return i&&s[i.id]?Kr(h,i,l):ce()};b={dispatchEvent:yt,clearAll(){return Ed(h)},syncData(){return an("vxe.error.delFunc",["syncData","getData"]),ce().then(()=>(u.tableData=[],a("update:data",d.tableFullData),ce()))},updateData(){const{scrollXLoad:t,scrollYLoad:l}=u;return B.handleTableData(!0).then(()=>{if(b.updateFooter(),t||l)return t&&B.updateScrollXSpace(),l&&B.updateScrollYSpace(),b.refreshScroll()}).then(()=>(b.updateCellAreas(),b.recalculate(!0))).then(()=>{setTimeout(()=>h.recalculate(),50)})},loadData(t){const{initStatus:l}=d;return Xn(t).then(()=>(d.inited=!0,d.initStatus=!0,l||qn(),b.recalculate()))},reloadData(t){return b.clearAll().then(()=>(d.inited=!0,d.initStatus=!0,Xn(t))).then(()=>(qn(),b.recalculate()))},setRow(t,l){if(t&&l){let s=t;r.isArray(t)||(s=[t]);const i=xl(h);s.forEach(c=>{const g=Re(h,c),p=r.clone(Object.assign({},l),!0);r.set(p,i,g),Object.assign(c,p)})}return ce()},reloadRow(t,l,s){const{keepSource:i}=e,{tableData:c}=u,{tableSourceData:g}=d;if(i){const p=b.getRowIndex(t),x=g[p];if(x&&t)if(s){const y=r.clone(r.get(l||t,s),!0);r.set(t,s,y),r.set(x,s,y)}else{const y=xl(h),S=Re(h,t),O=r.clone(Object.assign({},l),!0);r.set(O,y,S),r.destructuring(x,Object.assign(t,O))}u.tableData=c.slice(0)}return ce()},getParams(){return e.params},loadTreeChildren(t,l){const{keepSource:s}=e,{tableSourceData:i,fullDataRowIdData:c,fullAllDataRowIdData:g,sourceDataRowIdData:p}=d,x=Qe.value,{transform:y,mapChildrenField:S}=x,O=x.children||x.childrenField,W=g[Re(h,t)],k=W?W.level:0;return b.createData(l).then(X=>{if(s){const q=Re(h,t),P=r.findTree(i,ie=>q===Re(h,ie),{children:O});P&&(P.item[O]=r.clone(X,!0)),X.forEach(ie=>{const Oe=Re(h,ie);p[Oe]=r.clone(ie,!0)})}return r.eachTree(X,(q,P,ie,Oe,z,ye)=>{const Le=Re(h,q),Ke=z||W.row,Ue={row:q,rowid:Le,seq:-1,index:P,_index:-1,$index:-1,items:ie,parent:Ke,level:k+ye.length,height:0,oTop:0};c[Le]=Ue,g[Le]=Ue},{children:O}),t[O]=X,y&&(t[S]=r.clone(X,!1)),wl(),X})},loadColumn(t){const l=r.mapTree(t,s=>Uo(ot.createColumn(h,s)));return Or(l)},reloadColumn(t){return b.clearAll().then(()=>b.loadColumn(t))},getRowNode(t){if(t){const{fullAllDataRowIdData:l}=d,s=t.getAttribute("rowid");if(s){const i=l[s];if(i)return{rowid:i.rowid,item:i.row,index:i.index,items:i.items,parent:i.parent}}}return null},getColumnNode(t){if(t){const{fullColumnIdData:l}=d,s=t.getAttribute("colid");if(s){const i=l[s];if(i)return{colid:i.colid,item:i.column,index:i.index,items:i.items,parent:i.parent}}}return null},getRowSeq:Yn("seq"),getRowIndex:Yn("index"),getVTRowIndex:Yn("_index"),getVMRowIndex:Yn("$index"),getColumnIndex:Fs("index"),getVTColumnIndex:Fs("_index"),getVMColumnIndex:Fs("$index"),createData(t){return ce().then(()=>Uo(B.defineField(t)))},createRow(t){const l=r.isArray(t);return l||(t=[t||{}]),b.createData(t).then(s=>l?s:s[0])},revertData(t,l){const{keepSource:s}=e,{tableSourceData:i,sourceDataRowIdData:c}=d;if(!s)return ce();let g=t;return t?r.isArray(t)||(g=[t]):g=r.toArray(h.getUpdateRecords()),g.length&&g.forEach(p=>{if(!b.isInsertByRow(p)){const x=Re(h,p),y=c[x];y&&p&&(l?r.set(p,l,r.clone(r.get(y,l),!0)):r.destructuring(p,r.clone(y,!0)))}}),t?ce():b.reloadData(i)},clearData(t,l){const{tableFullData:s,visibleColumn:i}=d;return arguments.length?t&&!r.isArray(t)&&(t=[t]):t=s,l?t.forEach(c=>r.set(c,l,null)):t.forEach(c=>{i.forEach(g=>{g.field&&al(c,g,null)})}),ce()},getCellElement(t,l){const s=Yt(h,l);if(!s)return null;const i=Re(h,t),c=C.value,g=_.value,p=ee.value;let x;return s&&(s.fixed&&(s.fixed==="left"?g&&(x=g.$el):p&&(x=p.$el)),x||(x=c.$el),x)?x.querySelector(`.vxe-body--row[rowid="${i}"] .${s.id}`):null},getCellLabel(t,l){const s=Yt(h,l);if(!s)return null;const i=s.formatter,c=io(t,s);let g=c;if(i){let p;const{fullAllDataRowIdData:x}=d,y=Re(h,t),S=s.id,O=x[y];if(O&&(p=O.formatData,p||(p=x[y].formatData={}),O&&p[S]&&p[S].value===c))return p[S].label;const W={cellValue:c,row:t,rowIndex:b.getRowIndex(t),column:s,columnIndex:b.getColumnIndex(s)};if(r.isString(i)){const k=si.get(i),X=k?k.tableCellFormatMethod||k.cellFormatMethod:null;g=X?X(W):""}else if(r.isArray(i)){const k=si.get(i[0]),X=k?k.tableCellFormatMethod||k.cellFormatMethod:null;g=X?X(W,...i.slice(1)):""}else g=i(W);p&&(p[S]={value:c,label:g})}return g},isInsertByRow(t){const{editStore:l}=u,s=Re(h,t);return!!l.insertMaps[s]},removeInsertRow(){const{editStore:t}=u;return t.insertMaps={},h.remove(h.getInsertRecords())},isUpdateByRow(t,l){const{keepSource:s}=e,{tableFullColumn:i,fullDataRowIdData:c,sourceDataRowIdData:g}=d;if(s){const p=Re(h,t);if(!c[p])return!1;const x=g[p];if(x){if(arguments.length>1)return!Vt(x,t,l);for(let y=0,S=i.length;y<S;y++){const O=i[y].field;if(O&&!Vt(x,t,O))return!0}}}return!1},getColumns(t){const l=d.visibleColumn;return r.isUndefined(t)?l.slice(0):l[t]},getColid(t){const l=Yt(h,t);return l?l.id:null},getColumnById(t){const l=d.fullColumnIdData;return t&&l[t]?l[t].column:null},getColumnByField(t){const l=d.fullColumnFieldData;return t&&l[t]?l[t].column:null},getParentColumn(t){const l=d.fullColumnIdData,s=Yt(h,t);return s&&s.parentId&&l[s.parentId]?l[s.parentId].column:null},getTableColumn(){return{collectColumn:d.collectColumn.slice(0),fullColumn:d.tableFullColumn.slice(0),visibleColumn:d.visibleColumn.slice(0),tableColumn:u.tableColumn.slice(0)}},getFullColumns(){const{collectColumn:t}=d;return t.slice(0)},getData(t){const l=e.data||d.tableSynchData;return r.isUndefined(t)?l.slice(0):l[t]},getCheckboxRecords(t){const{treeConfig:l}=e,{tableFullData:s,afterFullData:i,afterTreeFullData:c,tableFullTreeData:g,fullDataRowIdData:p,afterFullRowMaps:x}=d,y=Qe.value,S=ve.value,{transform:O,mapChildrenField:W}=y,{checkField:k}=S,X=y.children||y.childrenField;let q=[];const P=t?O?g:s:O?c:i;if(k)l?q=r.filterTree(P,ie=>r.get(ie,k),{children:O?W:X}):q=P.filter(ie=>r.get(ie,k));else{const{selectCheckboxMaps:ie}=u;r.each(ie,(Oe,z)=>{t?p[z]&&q.push(p[z].row):x[z]&&q.push(x[z])})}return q},getTreeRowChildren(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=d,i=Qe.value,{transform:c,mapChildrenField:g}=i,p=i.children||i.childrenField;if(t&&l){let x;if(r.isString(t)?x=t:x=Re(h,t),x){const y=s[x],S=y?y.row:null;if(S)return S[c?g:p]||[]}}return[]},getTreeParentRow(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=d;if(t&&l){let i;if(r.isString(t)?i=t:i=Re(h,t),i){const c=s[i];return c?c.parent:null}}return null},getParentRow(t){return an("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),h.getTreeParentRow(t)},getRowById(t){const{fullDataRowIdData:l}=d,s=r.eqNull(t)?"":encodeURIComponent(t||"");return l[s]?l[s].row:null},getRowid(t){return Re(h,t)},getTableData(){const{tableData:t,footerTableData:l}=u,{tableFullData:s,afterFullData:i,tableFullTreeData:c}=d;return{fullData:e.treeConfig?c.slice(0):s.slice(0),visibleData:i.slice(0),tableData:t.slice(0),footerData:l.slice(0)}},getFullData(){const{treeConfig:t}=e,{tableFullData:l,tableFullTreeData:s}=d;if(t){const i=Qe.value,{transform:c,mapChildrenField:g}=i,p=i.children||i.childrenField;return c?r.toArrayTree(r.toTreeArray(s,{children:g}),{children:p}):s.slice(0)}return l.slice(0)},setColumnFixed(t,l){let s=!1;const i=r.isArray(t)?t:[t],c=me.value,g=oo.value;for(let p=0;p<i.length;p++){const x=i[p],y=Yt(h,x),S=Xr(h,y);if(S&&S.fixed!==l){if(!S.fixed&&g)return te.modal&&te.modal.message({status:"error",content:Sl("vxe.table.maxFixedCol",[c.maxFixedSize])}),ce();r.eachTree([S],O=>{O.fixed=l}),B.saveCustomStore("update:fixed"),s||(s=!0)}}return s?b.refreshColumn():ce()},clearColumnFixed(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=Yt(h,i),g=Xr(h,c);g&&g.fixed&&(r.eachTree([g],p=>{p.fixed=null}),B.saveCustomStore("update:fixed"),l||(l=!0))}),l?b.refreshColumn():ce()},hideColumn(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=Yt(h,i);c&&c.visible&&(c.visible=!1,l||(l=!0))}),l?B.handleCustom():ce()},showColumn(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=Yt(h,i);c&&!c.visible&&(c.visible=!0,l||(l=!0))}),l?B.handleCustom():ce()},setColumnWidth(t,l){let s=!1;return(r.isArray(t)?t:[t]).forEach(c=>{const g=Yt(h,c);if(g){const p=r.toInteger(l);let x=p;if($n(l)){const y=C.value,S=y?y.$el:null,O=S?S.clientWidth-1:0;x=Math.floor(p*O)}g.resizeWidth=x,s||(s=!0)}}),s?b.refreshColumn():ce()},getColumnWidth(t){const l=Yt(h,t);return l?l.renderWidth:0},resetColumn(t){return an("vxe.error.delFunc",["resetColumn","resetCustom"]),h.resetCustom(t)},refreshColumn(t){return t&&Sr(),Is(!0).then(()=>b.refreshScroll()).then(()=>b.recalculate())},refreshScroll(){const{lastScrollLeft:t,lastScrollTop:l}=d,s=C.value,i=R.value,c=_.value,g=ee.value,p=s?s.$el:null,x=c?c.$el:null,y=g?g.$el:null,S=i?i.$el:null;return new Promise(O=>{if(t||l)return qs(h,t,l).then().then(()=>{setTimeout(O,30)});Wt(p,l),Wt(x,l),Wt(y,l),eo(S,t),setTimeout(O,30)})},recalculate(t){return new Promise(l=>{const{rceTimeout:s,rceRunTime:i}=d,g=tt.value.refreshDelay||20,p=j.value;p&&p.clientWidth&&Cl(),s?(clearTimeout(s),i&&i+(g-5)<Date.now()?l(Ms(!!t)):ce(()=>{l()})):l(Ms(!!t)),d.rceTimeout=setTimeout(()=>{d.rceTimeout=void 0,Ms(!!t)},g)})},openTooltip(t,l){const s=$.value;return s&&s.open?s.open(t,l):ce()},closeTooltip(){const{tooltipStore:t}=u,l=Z.value,s=$.value;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:{}}),l&&l.close&&l.close()),s&&s.close&&s.close(),ce()},isAllCheckboxChecked(){return u.isAllSelected},isAllCheckboxIndeterminate(){return!u.isAllSelected&&u.isIndeterminate},getCheckboxIndeterminateRecords(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=d,{treeIndeterminateMaps:i}=u;if(l){const c=[],g=[];return r.each(i,(p,x)=>{p&&(c.push(p),s[x]&&g.push(p))}),t?c:g}return[]},setCheckboxRow(t,l){return t&&!r.isArray(t)&&(t=[t]),yo(t,l,!0)},setCheckboxRowKey(t,l){const{fullAllDataRowIdData:s}=d;r.isArray(t)||(t=[t]);const i=[];return t.forEach(c=>{const g=s[c];g&&i.push(g.row)}),yo(i,l,!0)},isCheckedByCheckboxRow(t){const{selectCheckboxMaps:l}=u,s=ve.value,{checkField:i}=s;return i?r.get(t,i):!!l[Re(h,t)]},isCheckedByCheckboxRowKey(t){const{selectCheckboxMaps:l}=u,{fullAllDataRowIdData:s}=d,i=ve.value,{checkField:c}=i;if(c){const g=s[t];return g?r.get(g.row,c):!1}return!!l[t]},isIndeterminateByCheckboxRow(t){const{treeIndeterminateMaps:l}=u;return!!l[Re(h,t)]&&!h.isCheckedByCheckboxRow(t)},isIndeterminateByCheckboxRowKey(t){const{treeIndeterminateMaps:l}=u;return!!l[t]&&!h.isCheckedByCheckboxRowKey(t)},toggleCheckboxRow(t){const{selectCheckboxMaps:l}=u,s=ve.value,{checkField:i}=s,c=i?!r.get(t,i):!l[Re(h,t)];return B.handleBatchSelectRows([t],c,!0),B.checkSelectionStatus(),ce()},setAllCheckboxRow(t){return ro(t,!0)},getRadioReserveRecord(t){const{treeConfig:l}=e,{fullDataRowIdData:s,radioReserveRow:i,afterFullData:c}=d,g=Fe.value,p=Qe.value,x=p.children||p.childrenField;if(g.reserve&&i){const y=Re(h,i);if(t){if(!s[y])return i}else{const S=xl(h);if(l){if(r.findTree(c,W=>y===r.get(W,S),{children:x}))return i}else if(!c.some(O=>y===r.get(O,S)))return i}}return null},clearRadioReserve(){return d.radioReserveRow=null,ce()},getCheckboxReserveRecords(t){const{treeConfig:l}=e,{afterFullData:s,fullDataRowIdData:i,checkboxReserveRowMap:c}=d,g=ve.value,p=Qe.value,x=p.children||p.childrenField,y=[];if(g.reserve){const S={};l?r.eachTree(s,O=>{S[Re(h,O)]=1},{children:x}):s.forEach(O=>{S[Re(h,O)]=1}),r.each(c,(O,W)=>{O&&(t?i[W]||y.push(O):S[W]||y.push(O))})}return y},clearCheckboxReserve(){return d.checkboxReserveRowMap={},ce()},toggleAllCheckboxRow(){return Mr(null,!u.isAllSelected),ce()},clearCheckboxRow(){const{treeConfig:t}=e,{tableFullData:l}=d,s=Qe.value,i=s.children||s.childrenField,c=ve.value,{checkField:g,reserve:p}=c,x=c.indeterminateField||c.halfField;if(g){const y=S=>{t&&x&&r.set(S,x,!1),r.set(S,g,!1)};t?r.eachTree(l,y,{children:i}):l.forEach(y)}return p&&l.forEach(y=>Io(y,!1)),u.isAllSelected=!1,u.isIndeterminate=!1,u.selectCheckboxMaps={},u.treeIndeterminateMaps={},ce()},setCurrentRow(t){const l=Be.value,s=j.value;return b.clearCurrentRow(),u.currentRow=t,(l.isCurrent||e.highlightCurrentRow)&&s&&r.arrayEach(s.querySelectorAll(`[rowid="${Re(h,t)}"]`),i=>il(i,"row--current")),ce()},isCheckedByRadioRow(t){const{selectRadioRow:l}=u;return t&&l?h.eqRow(l,t):!1},isCheckedByRadioRowKey(t){const{selectRadioRow:l}=u;return l?t===Re(h,l):!1},setRadioRow(t){return kl(t,!0)},setRadioRowKey(t){const{fullAllDataRowIdData:l}=d,s=l[t];return s?kl(s.row,!0):ce()},clearCurrentRow(){const t=j.value;return u.currentRow=null,d.hoverRow=null,t&&r.arrayEach(t.querySelectorAll(".row--current"),l=>Ho(l,"row--current")),ce()},clearRadioRow(){return u.selectRadioRow=null,ce()},getCurrentRecord(){return Be.value.isCurrent||e.highlightCurrentRow?u.currentRow:null},getRadioRecord(t){const{fullDataRowIdData:l,afterFullRowMaps:s}=d,{selectRadioRow:i}=u;if(i){const c=Re(h,i);if(t){if(l[c])return i}else if(s[c])return i}return null},getCurrentColumn(){return me.value.isCurrent||e.highlightCurrentColumn?u.currentColumn:null},setCurrentColumn(t){const l=Yt(h,t);return l&&(b.clearCurrentColumn(),u.currentColumn=l),ce()},clearCurrentColumn(){return u.currentColumn=null,ce()},setPendingRow(t,l){const s=Object.assign({},u.pendingRowMaps);return t&&!r.isArray(t)&&(t=[t]),l?t.forEach(i=>{const c=Re(h,i);c&&!s[c]&&(s[c]=i)}):t.forEach(i=>{const c=Re(h,i);c&&s[c]&&delete s[c]}),u.pendingRowMaps=s,ce()},togglePendingRow(t){const l=Object.assign({},u.pendingRowMaps);return t&&!r.isArray(t)&&(t=[t]),t.forEach(s=>{const i=Re(h,s);i&&(l[i]?delete l[i]:l[i]=s)}),u.pendingRowMaps=l,ce()},hasPendingByRow(t){return b.isPendingByRow(t)},isPendingByRow(t){const{pendingRowMaps:l}=u,s=Re(h,t);return!!l[s]},getPendingRecords(){const{pendingRowMaps:t}=u,{fullAllDataRowIdData:l}=d,s=[];return r.each(t,(i,c)=>{l[c]&&s.push(i)}),s},clearPendingRow(){return u.pendingRowMaps={},ce()},sort(t,l){const s=Ge.value,{multiple:i,remote:c,orders:g}=s;return t&&r.isString(t)&&(t=[{field:t,order:l}]),r.isArray(t)||(t=[t]),t.length?(i||ul(),(i?t:[t[0]]).forEach((p,x)=>{let{field:y,order:S}=p,O=y;r.isString(y)&&(O=b.getColumnByField(y)),O&&O.sortable&&(g.indexOf(S)===-1&&(S=qt(O)),O.order!==S&&(O.order=S),O.sortTime=Date.now()+x)}),c||B.handleTableData(!0),ce().then(()=>(b.updateCellAreas(),co()))):ce()},setSort(t,l){const s=Ge.value,{multiple:i,remote:c,orders:g}=s;if(r.isArray(t)||(t=[t]),t&&t.length){i||(t=[t[0]],ul());let p=null;return t.forEach((x,y)=>{let{field:S,order:O}=x,W=S;r.isString(S)&&(W=b.getColumnByField(S)),p||(p=W),W&&W.sortable&&(g.indexOf(O)===-1&&(O=qt(W)),W.order!==O&&(W.order=O),W.sortTime=Date.now()+y)}),l&&(c||B.handleTableData(!0),h.handleColumnSortEvent(new Event("click"),p)),ce().then(()=>(b.updateCellAreas(),co()))}return ce()},clearSort(t){const l=Ge.value;if(t){const s=Yt(h,t);s&&(s.order=null)}else ul();return l.remote||B.handleTableData(!0),ce().then(co)},isSort(t){if(t){const l=Yt(h,t);return l?l.sortable&&!!l.order:!1}return b.getSortColumns().length>0},getSortColumns(){const t=Ge.value,{multiple:l,chronological:s}=t,i=[],{tableFullColumn:c}=d;return c.forEach(g=>{const{field:p,order:x}=g;g.sortable&&x&&i.push({column:g,field:p,property:p,order:x,sortTime:g.sortTime})}),l&&s&&i.length>1?r.orderBy(i,"sortTime"):i},closeFilter(){const{filterStore:t}=u,{column:l,visible:s}=t;return Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),s&&yt("filter-visible",{column:l,property:l.field,field:l.field,filterList:h.getCheckedFilters(),visible:!1},null),ce()},isActiveFilterByColumn(t){const l=Yt(h,t);return l?l.filters&&l.filters.some(s=>s.checked):h.getCheckedFilters().length>0},isFilter(t){return b.isActiveFilterByColumn(t)},isRowExpandLoaded(t){const{fullAllDataRowIdData:l}=d,s=l[Re(h,t)];return s&&!!s.expandLoaded},clearRowExpandLoaded(t){const l=Object.assign({},u.rowExpandLazyLoadedMaps),{fullAllDataRowIdData:s}=d,i=Je.value,{lazy:c}=i,g=Re(h,t),p=s[g];return c&&p&&(p.expandLoaded=!1,delete l[g]),u.rowExpandLazyLoadedMaps=l,ce()},reloadRowExpand(t){const{rowExpandLazyLoadedMaps:l}=u,s=Je.value,{lazy:i}=s,c=Re(h,t);return i&&!l[c]&&b.clearRowExpandLoaded(t).then(()=>wn(t)),ce()},reloadExpandContent(t){return b.reloadRowExpand(t)},toggleRowExpand(t){return b.setRowExpand(t,!b.isRowExpandByRow(t))},setAllRowExpand(t){const l=Qe.value,{tableFullData:s,tableFullTreeData:i}=d,c=l.children||l.childrenField;let g=[];return e.treeConfig?r.eachTree(i,p=>{g.push(p)},{children:c}):g=s,b.setRowExpand(g,t)},setRowExpand(t,l){const{rowExpandedMaps:s,rowExpandLazyLoadedMaps:i,expandColumn:c}=u,{fullAllDataRowIdData:g}=d;let p=Object.assign({},s);const x=Je.value,{reserve:y,lazy:S,accordion:O,toggleMethod:W}=x,k=[],X=b.getColumnIndex(c),q=b.getVMColumnIndex(c);if(t){r.isArray(t)||(t=[t]),O&&(p={},t=t.slice(t.length-1,t.length));const P=W?t.filter(ie=>W({$table:h,expanded:l,column:c,columnIndex:X,$columnIndex:q,row:ie,rowIndex:b.getRowIndex(ie),$rowIndex:b.getVMRowIndex(ie)})):t;l?P.forEach(ie=>{const Oe=Re(h,ie);if(!p[Oe]){const z=g[Oe];S&&!z.expandLoaded&&!i[Oe]?k.push(wn(ie)):p[Oe]=ie}}):P.forEach(ie=>{const Oe=Re(h,ie);p[Oe]&&delete p[Oe]}),y&&P.forEach(ie=>zn(ie,l))}return u.rowExpandedMaps=p,Promise.all(k).then(()=>b.recalculate())},isRowExpandByRow(t){const{rowExpandedMaps:l}=u,s=Re(h,t);return!!l[s]},isExpandByRow(t){return b.isRowExpandByRow(t)},clearRowExpand(){const{tableFullData:t}=d,l=Je.value,{reserve:s}=l,i=b.getRowExpandRecords();return u.rowExpandedMaps={},s&&t.forEach(c=>zn(c,!1)),ce().then(()=>{i.length&&b.recalculate()})},clearRowExpandReserve(){return d.rowExpandedReserveRowMap={},ce()},getRowExpandRecords(){const t=[];return r.each(u.rowExpandedMaps,l=>{l&&t.push(l)}),t},getTreeExpandRecords(){const t=[];return r.each(u.treeExpandedMaps,l=>{l&&t.push(l)}),t},isTreeExpandLoaded(t){const{fullAllDataRowIdData:l}=d,s=l[Re(h,t)];return s&&!!s.treeLoaded},clearTreeExpandLoaded(t){const l=Object.assign({},u.treeExpandedMaps),{fullAllDataRowIdData:s}=d,i=Qe.value,{transform:c}=i;return t&&(r.isArray(t)||(t=[t]),t.forEach(g=>{const p=Re(h,g),x=s[p];x&&(x.treeLoaded=!1,l[p]&&delete l[p])})),u.treeExpandedMaps=l,c?(Do(),B.handleTableData()):ce()},reloadTreeExpand(t){const{treeExpandLazyLoadedMaps:l}=u,s=Qe.value,i=s.hasChild||s.hasChildField,{transform:c,lazy:g}=s,p=Re(h,t);return g&&t[i]&&!l[p]?b.clearTreeExpandLoaded(t).then(()=>El(t)).then(()=>{if(c)return Do(),B.handleTableData()}).then(()=>b.recalculate()):ce()},reloadTreeChilds(t){return b.reloadTreeExpand(t)},toggleTreeExpand(t){return b.setTreeExpand(t,!b.isTreeExpandByRow(t))},setAllTreeExpand(t){const{tableFullData:l}=d,s=Qe.value,{transform:i,lazy:c}=s,g=s.children||s.childrenField,p=[];return r.eachTree(l,x=>{const y=x[g];(c||y&&y.length)&&p.push(x)},{children:g}),b.setTreeExpand(p,t).then(()=>{if(i)return Do(),b.recalculate()})},setTreeExpand(t,l){const s=Qe.value,{transform:i}=s;return t&&(r.isArray(t)||(t=[t]),t.length)?i?Oa(t,l):Tr(t,l):ce()},isTreeExpandByRow(t){const{treeExpandedMaps:l}=u;return!!l[Re(h,t)]},clearTreeExpand(){const{tableFullTreeData:t}=d,l=Qe.value,s=l.children||l.childrenField,{transform:i,reserve:c}=l,g=b.getTreeExpandRecords();return u.treeExpandedMaps={},c&&r.eachTree(t,p=>Ll(p,!1),{children:s}),B.handleTableData().then(()=>{if(i)return Do(),B.handleTableData()}).then(()=>{if(g.length)return b.recalculate()})},clearTreeExpandReserve(){return d.treeExpandedReserveRowMap={},ce()},getScroll(){const{scrollXLoad:t,scrollYLoad:l}=u,i=C.value.$el;return{virtualX:t,virtualY:l,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}},scrollTo(t,l){const s=C.value,i=w.value,c=R.value,g=_.value,p=ee.value,x=s?s.$el:null,y=g?g.$el:null,S=p?p.$el:null,O=i?i.$el:null,W=c?c.$el:null;if(d.intoRunScroll=!0,r.isNumber(t)){const k=oe.value;k?eo(k,t):(eo(x,t),eo(O,t),eo(W,t))}if(r.isNumber(l)){const k=ge.value;k?Wt(k,l):(Wt(x,l),Wt(y,l),Wt(S,l))}return u.scrollXLoad||u.scrollYLoad?new Promise(k=>{setTimeout(()=>{ce(()=>{d.intoRunScroll=!1,k()})},30)}):ce()},scrollToRow(t,l){const{showOverflow:s}=e,{scrollYLoad:i,scrollXLoad:c}=u,g=[];return t&&(e.treeConfig?g.push(B.scrollToTreeRow(t)):g.push(qr(h,t))),l&&g.push(ka(l,t)),Promise.all(g).then(()=>{if(t)return!s&&(i||c)&&(fl(),Fl()),ce()})},scrollToColumn(t){const{fullColumnIdData:l}=d,s=Yt(h,t);return s&&l[s.id]?Kr(h,s):ce()},clearScroll(){const{scrollXStore:t,scrollYStore:l}=d,s=C.value,i=w.value,c=R.value,g=_.value,p=ee.value,x=g?g.$el:null,y=s?s.$el:null,S=p?p.$el:null,O=i?i.$el:null,W=c?c.$el:null,k=oe.value;k?eo(k,0):(eo(y,0),eo(O,0),eo(W,0));const X=ge.value;return X?Wt(X,0):(Wt(y,0),Wt(x,0),Wt(S,0)),t.startIndex=0,t.endIndex=t.visibleSize,l.startIndex=0,l.endIndex=l.visibleSize,ce().then(()=>{eo(y,0),eo(O,0),eo(W,0),Wt(y,0),Wt(x,0),Wt(S,0)})},updateFooter(){const{showFooter:t,footerData:l,footerMethod:s}=e,{visibleColumn:i,afterFullData:c}=d;let g=[];return t&&l&&l.length?g=l.slice(0):t&&s&&(g=i.length?s({columns:i,data:c,$table:h,$grid:Ce}):[]),u.footerTableData=g,ce()},updateStatus(t,l){const s=!r.isUndefined(l);return ce().then(()=>{const{editRules:i}=e,{validStore:c}=u,g=C.value;if(t&&g&&i){const{row:p,column:x}=t,y="change";if(h.hasCellRules&&h.hasCellRules(y,p,x)){const S=b.getCellElement(p,x);if(S)return h.validCellRules(y,p,x,l).then(()=>{s&&c.visible&&al(p,x,l),h.clearValidate(p,x)}).catch(({rule:O})=>{s&&al(p,x,l),h.showValidTooltip({rule:O,row:p,column:x,cell:S})})}}})},setMergeCells(t){return e.spanMethod&&zt("vxe.error.errConflicts",["merge-cells","span-method"]),Eo(t,u.mergeList,d.afterFullData),ce().then(()=>(b.updateCellAreas(),co()))},removeMergeCells(t){e.spanMethod&&zt("vxe.error.errConflicts",["merge-cells","span-method"]);const l=dl(t,u.mergeList,d.afterFullData);return ce().then(()=>(b.updateCellAreas(),co(),l))},getMergeCells(){return u.mergeList.slice(0)},clearMergeCells(){return u.mergeList=[],ce().then(()=>co())},setMergeFooterItems(t){return e.footerSpanMethod&&zt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),Eo(t,u.mergeFooterList),ce().then(()=>(b.updateCellAreas(),co()))},removeMergeFooterItems(t){e.footerSpanMethod&&zt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);const l=dl(t,u.mergeFooterList);return ce().then(()=>(b.updateCellAreas(),co(),l))},getMergeFooterItems(){return u.mergeFooterList.slice(0)},clearMergeFooterItems(){return u.mergeFooterList=[],ce().then(()=>co())},updateCellAreas(){const{mouseConfig:t}=e,l=et.value;return t&&l.area&&h.handleRecalculateCellAreas?h.handleRecalculateCellAreas():ce()},getCustomStoreData(){const{id:t}=e,l=Gt.value,{collectColumn:s}=d,{checkMethod:i}=l,c={},g={},p={},x={},y={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};if(!t)return zt("vxe.error.reqProp",["id"]),y;let S=0,O=0,W=0,k=0;return r.eachTree(s,(X,q,P,ie,Oe)=>{if(!Oe&&(s.forEach(z=>{const ye=z.getKey();ye&&(O=1,g[ye]=z.renderSortNumber)}),X.fixed!==X.defaultFixed)){const z=X.getKey();z&&(W=1,x[z]=X.fixed)}if(X.resizeWidth){const z=X.getKey();z&&(S=1,c[z]=X.renderWidth)}if(!i||i({column:X})){if(!X.visible&&X.defaultVisible){const z=X.getKey();z&&(k=1,p[z]=!1)}else if(X.visible&&!X.defaultVisible){const z=X.getKey();z&&(k=1,p[z]=!0)}}}),S&&(y.resizableData=c),O&&(y.sortData=g),W&&(y.fixedData=x),k&&(y.visibleData=p),y},focus(){return d.isActivated=!0,ce()},blur(){return d.isActivated=!1,ce()},connect(t){return t?(le=t,le.syncUpdate({collectColumn:d.collectColumn,$table:h})):zt("vxe.error.barUnableLink"),ce()}};const Aa=t=>{const{editStore:l,ctxMenuStore:s,filterStore:i,customStore:c}=u,{mouseConfig:g,editRules:p}=e,x=j.value,y=Xe.value,S=U.value,O=Ze.value,{actived:W}=l,k=A.value,X=F.value,q=D.value,P=T.value;if(X&&(vt(t,x,"vxe-cell--filter").flag||vt(t,X.$el).flag||vt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearFilter",i.args,b.closeFilter)),q&&(c.btnEl===t.target||vt(t,document.body,"vxe-toolbar-custom-target").flag||vt(t,q.$el).flag||vt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearCustom",{},()=>{h.closeCustom&&h.closeCustom()})),W.row){if(y.autoClear!==!1){const Oe=W.args.cell;(!Oe||!vt(t,Oe).flag)&&(k&&vt(t,k.$el).flag||(!d._lastCallTime||d._lastCallTime+50<Date.now())&&(vt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearEdit",W.args,()=>{let z;if(y.mode==="row"){const ye=vt(t,x,"vxe-body--row"),Le=ye.flag?b.getRowNode(ye.targetElem):null;z=Le?!h.eqRow(Le.item,W.args.row):!1}else z=!vt(t,x,"col--edit").flag;if(z||(z=vt(t,x,"vxe-header--row").flag),z||(z=vt(t,x,"vxe-footer--row").flag),!z&&e.height&&!u.overflowY){const ye=t.target;Wl(ye,"vxe-table--body-wrapper")&&(z=t.offsetY<ye.clientHeight)}(z||!vt(t,x).flag)&&setTimeout(()=>{h.handleClearEdit(t).then(()=>{!d.isActivated&&p&&S.autoClear&&(u.validErrorMaps={})})})})))}}else if(g&&!vt(t,x).flag&&!(Ce&&vt(t,Ce.getRefMaps().refElem.value).flag)&&!(P&&vt(t,P.getRefMaps().refElem.value).flag)&&!(le&&vt(t,le.getRefMaps().refElem.value).flag)&&(h.clearSelected&&h.clearSelected(),O.autoClear&&h.getCellAreas)){const Oe=h.getCellAreas();Oe&&Oe.length&&!vt(t,document.body,"vxe-table--ignore-areas-clear").flag&&B.preventEvent(t,"event.clearAreas",{},()=>{h.clearCellAreas(),h.clearCopyCellArea(),yt("clear-cell-area-selection",{cellAreas:Oe},t)})}h.closeMenu&&s.visible&&P&&!vt(t,P.getRefMaps().refElem.value).flag&&h.closeMenu();const ie=vt(t,Ce?Ce.getRefMaps().refElem.value:x).flag;!ie&&p&&S.autoClear&&(u.validErrorMaps={}),d.isActivated=ie},La=()=>{b.closeFilter(),h.closeMenu&&h.closeMenu()},$a=()=>{b.closeTooltip(),h.closeMenu&&h.closeMenu()},Ba=t=>{const{mouseConfig:l,keyboardConfig:s}=e,{filterStore:i,ctxMenuStore:c,editStore:g}=u,p=et.value,x=st.value,{actived:y}=g;St.hasKey(t,Lo.ESCAPE)&&B.preventEvent(t,"event.keydown",null,()=>{if(yt("keydown-start",{},t),s&&l&&p.area&&h.handleKeyboardCellAreaEvent)h.handleKeyboardCellAreaEvent(t);else if((y.row||i.visible||c.visible)&&(t.stopPropagation(),h.closeMenu&&h.closeMenu(),b.closeFilter(),s&&x.isEsc&&y.row)){const O=y.args;h.handleClearEdit(t),p.selected&&ce(()=>h.handleSelected(O,t))}yt("keydown",{},t),yt("keydown-end",{},t)})},Ha=t=>{d.isActivated&&B.preventEvent(t,"event.keydown",null,()=>{const{mouseConfig:l,keyboardConfig:s,treeConfig:i,editConfig:c,highlightCurrentRow:g}=e,{ctxMenuStore:p,editStore:x,currentRow:y}=u,{afterFullData:S}=d,O=dt.value,W=Ae.value,k=st.value,X=et.value,q=Xe.value,P=Qe.value,ie=pt.value,Oe=Be.value,{selected:z,actived:ye}=x,Le=P.children||P.childrenField,Ke=t.keyCode,Ue=St.hasKey(t,Lo.ESCAPE),at=St.hasKey(t,Lo.BACKSPACE),it=St.hasKey(t,Lo.TAB),ct=St.hasKey(t,Lo.ENTER),nt=St.hasKey(t,Lo.SPACEBAR),gt=St.hasKey(t,Lo.ARROW_LEFT),lt=St.hasKey(t,Lo.ARROW_UP),rt=St.hasKey(t,Lo.ARROW_RIGHT),Ot=St.hasKey(t,Lo.ARROW_DOWN),Qo=St.hasKey(t,Lo.DELETE),No=St.hasKey(t,Lo.F2),pl=St.hasKey(t,Lo.CONTEXT_MENU),Xo=t.metaKey,Fo=t.ctrlKey,Ro=t.shiftKey,Zt=t.altKey,Oo=gt||lt||rt||Ot,Qt=O&&p.visible&&(ct||nt||Oo),gl=ft(c)&&ye.column&&ye.row,Jo=q.beforeEditMethod||q.activeMethod;if(Qt)t.preventDefault(),p.showChild&&cn(p.selected)?h.moveCtxMenu(t,p,"selectChild",gt,!1,p.selected.children):h.moveCtxMenu(t,p,"selected",rt,!0,ie);else if(s&&l&&X.area&&h.handleKeyboardCellAreaEvent)h.handleKeyboardCellAreaEvent(t);else if(Ue){if(h.closeMenu&&h.closeMenu(),b.closeFilter(),s&&k.isEsc&&ye.row){const kt=ye.args;h.handleClearEdit(t),X.selected&&ce(()=>h.handleSelected(kt,t))}}else if(nt&&s&&k.isChecked&&z.row&&z.column&&(z.column.type==="checkbox"||z.column.type==="radio"))t.preventDefault(),z.column.type==="checkbox"?B.handleToggleCheckRowEvent(t,z.args):B.triggerRadioRowEvent(t,z.args);else if(No&&ft(c))gl||z.row&&z.column&&(t.preventDefault(),h.handleEdit(z.args,t));else if(pl)d._keyCtx=z.row&&z.column&&W.length,clearTimeout(Dr),Dr=setTimeout(()=>{d._keyCtx=!1},1e3);else if(ct&&!Zt&&s&&k.isEnter&&(z.row||ye.row||i&&(Oe.isCurrent||g)&&y)){const{isLastEnterAppendRow:kt,beforeEnterMethod:Pt,enterMethod:jt}=k;if(Fo){if(ye.row){const At=ye.args;h.handleClearEdit(t),X.selected&&ce(()=>{h.handleSelected(At,t)})}}else if(z.row||ye.row){const At=z.row?z.args:ye.args;if(Ro)k.enterToTab?h.moveTabSelected(At,Ro,t):h.moveSelected(At,gt,!0,rt,!1,t);else if(k.enterToTab)h.moveTabSelected(At,Ro,t);else{const uo=z.row||ye.row,To=z.column||ye.column,fo=h.getVTRowIndex(uo),_t={row:uo,rowIndex:h.getRowIndex(uo),$rowIndex:h.getVMRowIndex(uo),_rowIndex:fo,column:To,columnIndex:h.getColumnIndex(To),$columnIndex:h.getVMColumnIndex(To),_columnIndex:h.getVTColumnIndex(To),$table:h};if(!Pt||Pt(_t)!==!1){if(kt&&fo>=S.length-1){h.insertAt({},-1).then(({row:ko})=>{h.scrollToRow(ko,To),h.handleSelected(Object.assign(Object.assign({},At),{row:ko}),t)}),h.dispatchEvent("enter-append-row",_t,t);return}h.moveSelected(At,gt,!1,rt,!0,t),jt&&jt(_t)}}}else if(i&&(Oe.isCurrent||g)&&y){const At=y[Le];if(At&&At.length){t.preventDefault();const uo=At[0],To={$table:h,row:uo,rowIndex:b.getRowIndex(uo),$rowIndex:b.getVMRowIndex(uo)};b.setTreeExpand(y,!0).then(()=>b.scrollToRow(uo)).then(()=>B.triggerCurrentRowEvent(t,To))}}}else if(Oo&&s&&k.isArrow)gl||(z.row&&z.column?h.moveSelected(z.args,gt,lt,rt,Ot,t):(lt||Ot)&&(Oe.isCurrent||g)&&h.moveCurrentRow(lt,Ot,t));else if(it&&s&&k.isTab)z.row||z.column?h.moveTabSelected(z.args,Ro,t):(ye.row||ye.column)&&h.moveTabSelected(ye.args,Ro,t);else if(s&&k.isDel&&Qo&&ft(c)&&(z.row||z.column)){if(!gl){const{delMethod:kt}=k,Pt={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!Jo||Jo(Pt))&&(kt?kt(Pt):al(z.row,z.column,null),b.updateFooter(),yt("cell-delete-value",Pt,t))}}else if(at&&s&&k.isBack&&ft(c)&&(z.row||z.column)){if(!gl){const{backMethod:kt}=k;if(k.isDel&&ft(c)&&(z.row||z.column)){const Pt={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!Jo||Jo(Pt))&&(kt?kt(Pt):(al(z.row,z.column,null),h.handleEdit(z.args,t)),yt("cell-backspace-value",Pt,t))}}}else if(at&&s&&i&&k.isBack&&(Oe.isCurrent||g)&&y){const{parent:kt}=r.findTree(d.afterTreeFullData,Pt=>Pt===y,{children:Le});if(kt){t.preventDefault();const Pt={row:kt,rowIndex:b.getRowIndex(kt),$rowIndex:b.getVMRowIndex(kt),$table:h,$grid:Ce};b.setTreeExpand(kt,!1).then(()=>b.scrollToRow(kt)).then(()=>B.triggerCurrentRowEvent(t,Pt))}}else if(s&&ft(c)&&k.isEdit&&!Fo&&!Xo&&(nt||Ke>=48&&Ke<=57||Ke>=65&&Ke<=90||Ke>=96&&Ke<=111||Ke>=186&&Ke<=192||Ke>=219&&Ke<=222)){const{editMode:kt,editMethod:Pt}=k;if(z.column&&z.row&&ft(z.column.editRender)){const jt=q.beforeEditMethod||q.activeMethod,At={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!jt||jt(Object.assign(Object.assign({},z.args),{$table:h,$grid:Ce})))&&(Pt?Pt(At):(kt!=="insert"&&al(z.row,z.column,null),h.handleEdit(z.args,t)))}}yt("keydown",{},t)})},Pa=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=u,{isActivated:g}=d,p=et.value,x=st.value,{actived:y}=i;g&&!c.visible&&(y.row||y.column||l&&x.isClip&&s&&p.area&&h.handlePasteCellAreaEvent&&h.handlePasteCellAreaEvent(t),yt("paste",{},t))},ja=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=u,{isActivated:g}=d,p=et.value,x=st.value,{actived:y}=i;g&&!c.visible&&(y.row||y.column||l&&x.isClip&&s&&p.area&&h.handleCopyCellAreaEvent&&h.handleCopyCellAreaEvent(t),yt("copy",{},t))},Va=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=u,{isActivated:g}=d,p=et.value,x=st.value,{actived:y}=i;g&&!c.visible&&(y.row||y.column||l&&x.isClip&&s&&p.area&&h.handleCutCellAreaEvent&&h.handleCutCellAreaEvent(t),yt("cut",{},t))},Ir=()=>{h.closeMenu&&h.closeMenu();const t=j.value;if(!t||!t.clientWidth)return ce();b.recalculate(!0),b.updateCellAreas()},Gn=t=>{const l=Z.value;clearTimeout(d.tooltipTimeout),t?b.closeTooltip():l&&l.setActived&&l.setActived(!0)},Fr=()=>{const{dragRow:t,dragCol:l}=u;(t||l)&&(Zn(),ks(),Gl(),u.dragRow=null,u.dragCol=null,u.isDragColMove=!1,u.isDragRowMove=!1)},ks=()=>{const t=j.value;if(t){const l="row--drag-origin";r.arrayEach(t.querySelectorAll(`.${l}`),s=>{s.draggable=!1,Ho(s,l)})}},Na=t=>{const l=j.value;if(l){const s="row--drag-origin",i=Re(h,t);r.arrayEach(l.querySelectorAll(`[rowid="${i}"]`),c=>{il(c,s)})}},_a=t=>{const{dragConfig:l}=e,{dragRow:s}=u,i=je.value,{tooltipMethod:c}=i,g=c||(l?l.rowTooltipMethod:null);let p="";g?p=`${g({row:s})||""}`:p=Sl("vxe.table.dragTip",[t.textContent||""]),u.dragTipText=p},Wa=t=>{const l=j.value;if(l){const s=[];r.eachTree([t],c=>{s.push(`[colid="${c.id}"]`)});const i="col--drag-origin";r.arrayEach(l.querySelectorAll(s.join(",")),c=>{il(c,i)})}},Zn=()=>{const t=j.value;if(t){const l="col--drag-origin";r.arrayEach(t.querySelectorAll(`.${l}`),s=>{s.draggable=!1,Ho(s,l)})}},za=t=>{const{dragCol:l}=u,s=$e.value,{tooltipMethod:i}=s;let c="";i?c=`${i({column:l})||""}`:c=Sl("vxe.table.dragTip",[t.textContent||""]),u.dragTipText=c},Qn=(t,l,s,i,c)=>{const g=j.value;if(!g)return;const{scrollbarWidth:p,scrollbarHeight:x}=u,{prevDragToChild:y}=d,S=g.getBoundingClientRect(),O=g.clientWidth,W=g.clientHeight;if(l){const X=G.value;if(X)if(i){const q=l.getBoundingClientRect();let P=l.clientHeight;const ie=Math.max(1,q.y-S.y);ie+P>W-x&&(P=W-ie-x),X.style.display="block",X.style.top=`${ie}px`,X.style.height=`${P}px`,X.style.width=`${O-p}px`,X.setAttribute("drag-pos",c),X.setAttribute("drag-to-child",y?"y":"n")}else X.style.display=""}else if(s){const X=K.value;if(X)if(i){const q=Q.value,P=q?q.clientWidth:0,ie=J.value,Oe=ie?ie.clientWidth:0,z=s.getBoundingClientRect();let ye=s.clientWidth;const Le=Math.max(0,z.y-S.y),Ke=P;let Ue=z.x-S.x;Ue<Ke&&(ye-=Ke-Ue,Ue=Ke);const at=O-Oe-(Oe?0:p);Ue+ye>at&&(ye=at-Ue),X.style.display="block",X.style.top=`${Le}px`,X.style.left=`${Ue}px`,X.style.width=`${ye}px`,y?X.style.height=`${z.height}px`:X.style.height=`${W-Le-x}px`,X.setAttribute("drag-pos",c),X.setAttribute("drag-to-child",y?"y":"n")}else X.style.display=""}const k=ke.value;k&&(k.style.display="block",k.style.top=`${Math.min(g.clientHeight-g.scrollTop-k.clientHeight,t.clientY-S.y)}px`,k.style.left=`${Math.min(g.clientWidth-g.scrollLeft-k.clientWidth-16,t.clientX-S.x)}px`,k.setAttribute("drag-status",i?y?"sub":"normal":"disabled"))},Gl=()=>{const t=ke.value,l=G.value,s=K.value;t&&(t.style.display=""),l&&(l.style.display=""),s&&(s.style.display="")},As=(t,l,s,i,c)=>{c.cell=l;const{tooltipStore:g}=u,p=Me.value,{column:x,row:y}=c,{showAll:S,contentMethod:O}=p,W=O?O(c):null,k=O&&!r.eqNull(W),X=k?W:r.toString(x.type==="html"?s.innerText:s.textContent).trim(),q=s.scrollWidth>s.clientWidth;return X&&(S||k||q)&&(Object.assign(g,{row:y,column:x,visible:!0,currOpts:{}}),ce(()=>{const P=Z.value;P&&P.open&&P.open(q?s:i||s,to(X))})),ce()},yn=(t,l)=>{if(t){if(Ce)return Ce.callSlot(t,l);if(r.isFunction(t))return vo(t(l))}return[]};B={getSetupOptions(){return xt()},updateAfterDataIndex:wl,callSlot:yn,getParentElem(){const t=j.value;if(Ce){const l=Ce.getRefMaps().refElem.value;return l?l.parentNode:null}return t?t.parentNode:null},getParentHeight(){const{height:t}=e,l=j.value;if(l){const s=l.parentNode,i=t==="100%"||t==="auto"?ar(s):0;return Math.floor(Ce?Ce.getParentHeight():r.toNumber(getComputedStyle(s).height)-i)}return 0},getExcludeHeight(){return Ce?Ce.getExcludeHeight():0},defineField(t){const{treeConfig:l}=e,s=Je.value,i=Qe.value,c=Fe.value,g=ve.value,p=i.children||i.childrenField,x=xl(h);return r.isArray(t)||(t=[t]),t.map(y=>(d.tableFullColumn.forEach(O=>{const{field:W,editRender:k}=O;if(W&&!r.has(y,W)&&!y[W]){let X=null;if(k){const{defaultValue:q}=k;r.isFunction(q)?X=q({column:O}):r.isUndefined(q)||(X=q)}r.set(y,W,X)}}),[c.labelField,g.checkField,g.labelField,s.labelField].forEach(O=>{O&&rl(r.get(y,O))&&r.set(y,O,null)}),l&&i.lazy&&r.isUndefined(y[p])&&(y[p]=null),rl(r.get(y,x))&&r.set(y,x,Ks()),y))},handleTableData(t){const{scrollYLoad:l}=u,{scrollYStore:s,fullDataRowIdData:i}=d;let c=d.afterFullData;t&&(Ul(),c=Do());const g=l?c.slice(s.startIndex,s.endIndex):c.slice(0);return g.forEach((p,x)=>{const y=Re(h,p),S=i[y];S&&(S.$index=x)}),u.tableData=g,ce()},cacheRowMap(t){const{treeConfig:l}=e,s=Qe.value,{fullAllDataRowIdData:i,tableFullData:c,tableFullTreeData:g}=d,p=s.children||s.childrenField,x=s.hasChild||s.hasChildField,y=xl(h),S=l&&s.lazy,O={},W={},k=(X,q,P,ie,Oe,z)=>{let ye=Re(h,X);const Le=l&&ie?bd(ie):q+1,Ke=z?z.length-1:0;rl(ye)&&(ye=Ks(),r.set(X,y,ye)),S&&X[x]&&r.isUndefined(X[p])&&(X[p]=null);let Ue=i[ye];Ue||(Ue={row:X,rowid:ye,seq:Le,index:-1,_index:-1,$index:-1,items:P,parent:Oe,level:Ke,height:0,oTop:0}),Ue.row=X,Ue.items=P,Ue.parent=Oe,Ue.level=Ke,Ue.index=l&&Oe?-1:q,t&&(W[ye]=Ue),O[ye]=Ue};t&&(d.fullDataRowIdData=W),d.fullAllDataRowIdData=O,l?r.eachTree(g,k,{children:p}):c.forEach(k)},cacheSourceMap(t){const{treeConfig:l}=e,s=Qe.value;let{sourceDataRowIdData:i}=d;const c=r.clone(t,!0),g=xl(h);i=d.sourceDataRowIdData={};const p=x=>{let y=Re(h,x);rl(y)&&(y=Ks(),r.set(x,g,y)),i[y]=x};if(l){const x=s.children||s.childrenField;r.eachTree(c,p,{children:s.transform?s.mapChildrenField:x})}else c.forEach(p);d.tableSourceData=c},analyColumnWidth(){const{tableFullColumn:t}=d,l=me.value,{width:s,minWidth:i}=l,c=[],g=[],p=[],x=[],y=[],S=[],O=[],W=[];t.forEach(k=>{s&&!k.width&&(k.width=s),i&&!k.minWidth&&(k.minWidth=i),k.visible&&(k.resizeWidth?c.push(k):k.width==="auto"?O.push(k):ir(k.width)?g.push(k):$n(k.width)?y.push(k):ir(k.minWidth)?p.push(k):k.minWidth==="auto"?x.push(k):$n(k.minWidth)?S.push(k):W.push(k))}),Object.assign(u.columnStore,{resizeList:c,pxList:g,pxMinList:p,autoMinList:x,scaleList:y,scaleMinList:S,autoList:O,remainList:W})},handleResizeDblclickEvent(t,l){const s=Se.value,{isDblclickAutoWidth:i}=s,c=j.value;if(i&&c){const{fullColumnIdData:g}=d,{column:p}=l,x=p.id,y=g[x],O=t.target.parentNode,W=Object.assign(l,{cell:O}),k=oa(W);let X=Vn(p,c);y&&(X=Math.max(X,y.width)),p.resizeWidth=Math.max(k,X),u._isResize=!1,d._lastResizeTime=Date.now(),h.analyColumnWidth(),h.recalculate(!0).then(()=>{h.saveCustomStore("update:visible"),h.updateCellAreas(),h.dispatchEvent("resizable-change",Object.assign(Object.assign({},l),{resizeWidth:X}),t),setTimeout(()=>h.recalculate(!0),300)})}},saveCustomStore(t){const{customConfig:l}=e,s=he.value,i=Gt.value,{updateStore:c,storage:g}=i,p=g===!0,x=p?{}:Object.assign({},g||{}),y=p||x.resizable,S=p||x.visible,O=p||x.fixed,W=p||x.sort;if(t!=="reset"&&(u.isCustomStatus=!0),(l?ft(i):i.enabled)&&(y||S||O||W)){if(!s)return zt("vxe.error.reqProp",["id"]),ce();const k=t==="reset"?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:b.getCustomStoreData();if(c)return c({id:s,type:t,storeData:k});po(s,t==="reset"?null:k)}return ce()},handleCustom(){const{mouseConfig:t}=e;return t&&(h.clearSelected&&h.clearSelected(),h.clearCellAreas&&(h.clearCellAreas(),h.clearCopyCellArea())),B.analyColumnWidth(),b.refreshColumn(!0)},handleUpdateDataQueue(){u.upDataFlag++},handleRefreshColumnQueue(){u.reColumnFlag++},preventEvent(t,l,s,i,c){let g=ri.get(l);!g.length&&l==="event.clearEdit"&&(g=ri.get("event.clearActived"));let p;return g.some(x=>x(Object.assign({$grid:Ce,$table:h,$event:t},s))===!1)||i&&(p=i()),c&&c(),p},updateCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:l,treeIndeterminateMaps:s}=u,i=Object.assign({},l),c=Object.assign({},s),g=Qe.value,{transform:p,mapChildrenField:x}=g,y=g.children||g.childrenField,S=ve.value,{checkField:O,checkStrictly:W,checkMethod:k}=S,{afterTreeFullData:X}=d;if(!W){if(t){const q={},P=[];r.eachTree(X,ie=>{const Oe=Re(h,ie),z=ie[p?x:y];z&&z.length&&!q[Oe]&&(q[Oe]=1,P.unshift([ie,Oe,z]))},{children:p?x:y}),P.forEach(ie=>{const Oe=ie[0],z=ie[1],ye=ie[2];let Le=0,Ke=0,Ue=0;ye.forEach(k?ct=>{const nt=Re(h,ct),gt=O?r.get(ct,O):i[nt];k({row:ct})?(gt?Le++:c[nt]&&Ke++,Ue++):gt?Le++:c[nt]&&Ke++}:ct=>{const nt=Re(h,ct);(O?r.get(ct,O):i[nt])?Le++:c[nt]&&Ke++,Ue++});const at=Le>=Ue,it=!at&&(Le>=1||Ke>=1);O&&r.get(Oe,O,at),at?(O||(i[z]=Oe),c[z]&&delete c[z]):(O||i[z]&&delete i[z],it?c[z]=Oe:c[z]&&delete c[z])})}u.selectCheckboxMaps=i,u.treeIndeterminateMaps=c}},updateAllCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:l,treeIndeterminateMaps:s}=u,i=ve.value,{checkField:c,checkMethod:g}=i,{afterFullData:p,afterTreeFullData:x}=d;let y=0,S=0,O=0;const W=t?x:p;W.forEach(g?q=>{const P=Re(h,q),ie=c?r.get(q,c):l[P];g({row:q})?(ie?y++:s[P]&&S++,O++):ie?y++:s[P]&&S++}:q=>{const P=Re(h,q);(c?r.get(q,c):l[P])?y++:s[P]&&S++,O++});const k=W.length>0&&y>=O,X=!k&&(y>=1||S>=1);u.isAllSelected=k,u.isIndeterminate=X},checkSelectionStatus(){h.updateCheckboxStatus(),h.updateAllCheckboxStatus()},handleBatchSelectRows(t,l,s){const{treeConfig:i}=e,{selectCheckboxMaps:c}=u,g=Object.assign({},c),p=Qe.value,{transform:x,mapChildrenField:y}=p,S=p.children||p.childrenField,O=ve.value,{checkField:W,checkStrictly:k,checkMethod:X}=O,q=O.indeterminateField||O.halfField;if(W){if(i&&!k){r.eachTree(t,P=>{(s||!X||X({row:P}))&&(r.set(P,W,l),q&&r.set(P,q,!1),Io(P,l))},{children:x?y:S}),u.selectCheckboxMaps=g;return}else t.forEach(P=>{(s||!X||X({row:P}))&&(r.set(P,W,l),Io(P,l))});u.selectCheckboxMaps=g;return}if(i&&!k){r.eachTree(t,P=>{const ie=Re(h,P);(s||!X||X({row:P}))&&(l?g[ie]=P:g[ie]&&delete g[ie],Io(P,l))},{children:x?y:S}),u.selectCheckboxMaps=g;return}t.forEach(P=>{const ie=Re(h,P);(s||!X||X({row:P}))&&(l?g[ie]||(g[ie]=P):g[ie]&&delete g[ie],Io(P,l))}),u.selectCheckboxMaps=g},handleSelectRow({row:t},l,s){h.handleBatchSelectRows([t],l,s)},triggerHeaderTitleEvent(t,l,s){const i=l.content||l.message;if(i){const{tooltipStore:c}=u,{column:g}=s,p=cl(i);Gn(!0),c.row=null,c.column=g,c.visible=!0,c.currOpts=l,ce(()=>{const x=Z.value;x&&x.open&&x.open(t.currentTarget,p)})}},triggerHeaderTooltipEvent(t,l){const{tooltipStore:s}=u,{column:i}=l,c=t.currentTarget;Gn(!0),(s.column!==i||!s.visible)&&As(t,c,c,null,l)},triggerBodyTooltipEvent(t,l){const{editConfig:s}=e,{editStore:i}=u,{tooltipStore:c}=u,g=Xe.value,{actived:p}=i,{row:x,column:y}=l,S=t.currentTarget;if(Gn(c.column!==y||c.row!==x),!(y.editRender&&ft(s)&&(g.mode==="row"&&p.row===x||p.row===x&&p.column===y))&&(c.column!==y||c.row!==x||!c.visible)){let O,W;y.treeNode?(O=S.querySelector(".vxe-tree-cell"),y.type==="html"&&(W=S.querySelector(".vxe-cell--html"))):W=S.querySelector(y.type==="html"?".vxe-cell--html":".vxe-cell--label"),As(t,S,O||S.children[0],W,l)}},triggerFooterTooltipEvent(t,l){const{column:s}=l,{tooltipStore:i}=u,c=t.currentTarget;Gn(i.column!==s||!!i.row),(i.column!==s||!i.visible)&&As(t,c,c.querySelector(".vxe-cell--item")||c.children[0],null,l)},handleTargetLeaveEvent(){const t=Me.value;let l=Z.value;l&&l.setActived&&l.setActived(!1),t.enterable?d.tooltipTimeout=setTimeout(()=>{l=Z.value,l&&l.isActived&&!l.isActived()&&b.closeTooltip()},t.leaveDelay):b.closeTooltip()},triggerHeaderCellClickEvent(t,l){const{_lastResizeTime:s}=d,i=Ge.value,c=me.value,{column:g}=l,p=t.currentTarget,x=s&&s>Date.now()-300,y=vt(t,p,"vxe-cell--sort").flag,S=vt(t,p,"vxe-cell--filter").flag;i.trigger==="cell"&&!(x||y||S)&&B.triggerSortEvent(t,g,qt(g)),yt("header-cell-click",Object.assign({triggerResizable:x,triggerSort:y,triggerFilter:S,cell:p},l),t),(c.isCurrent||e.highlightCurrentColumn)&&B.triggerCurrentColumnEvent(t,l)},triggerHeaderCellDblclickEvent(t,l){yt("header-cell-dblclick",Object.assign({cell:t.currentTarget},l),t)},triggerCellClickEvent(t,l){const{highlightCurrentRow:s,editConfig:i}=e,{editStore:c}=u,g=Je.value,p=Xe.value,x=Qe.value,y=Fe.value,S=ve.value,O=st.value,W=Be.value,{actived:k,focused:X}=c,{row:q,column:P}=l,{type:ie,treeNode:Oe}=P,z=ie==="radio",ye=ie==="checkbox",Le=ie==="expand",Ke=t.currentTarget,Ue=z&&vt(t,Ke,"vxe-cell--radio").flag,at=ye&&vt(t,Ke,"vxe-cell--checkbox").flag,it=Oe&&vt(t,Ke,"vxe-tree--btn-wrapper").flag,ct=Le&&vt(t,Ke,"vxe-table--expanded").flag;l=Object.assign({cell:Ke,triggerRadio:Ue,triggerCheckbox:at,triggerTreeNode:it,triggerExpandNode:ct},l),!at&&!Ue&&(!ct&&(g.trigger==="row"||Le&&g.trigger==="cell")&&B.triggerRowExpandEvent(t,l),(x.trigger==="row"||Oe&&x.trigger==="cell")&&B.triggerTreeExpandEvent(t,l)),it||(ct||((W.isCurrent||s)&&!at&&!Ue&&B.triggerCurrentRowEvent(t,l),!Ue&&(y.trigger==="row"||z&&y.trigger==="cell")&&B.triggerRadioRowEvent(t,l),!at&&(S.trigger==="row"||ye&&S.trigger==="cell")&&B.handleToggleCheckRowEvent(t,l)),ft(i)&&(O.arrowCursorLock&&t&&p.mode==="cell"&&t.target&&/^input|textarea$/i.test(t.target.tagName)&&(X.column=P,X.row=q),p.trigger==="manual"?k.args&&k.row===q&&P!==k.column&&zo(t,l):(!k.args||q!==k.row||P!==k.column)&&(p.trigger==="click"||p.trigger==="dblclick"&&p.mode==="row"&&k.row===q)&&zo(t,l))),ft(i)&&p.trigger==="dblclick"&&k.row&&k.column&&(p.mode==="row"?h.eqRow(k.row,q)||h.handleClearEdit(t):p.mode==="cell"&&(!h.eqRow(k.row,q)||k.column.id!==P.id)&&h.handleClearEdit(t)),yt("cell-click",l,t)},triggerCellDblclickEvent(t,l){const{editConfig:s}=e,{editStore:i}=u,c=Xe.value,{actived:g}=i,p=t.currentTarget;l=Object.assign({cell:p},l),ft(s)&&c.trigger==="dblclick"&&(!g.args||t.currentTarget!==g.args.cell)&&(c.mode==="row"?jo("blur").catch(x=>x).then(()=>{h.handleEdit(l,t).then(()=>jo("change")).catch(x=>x)}):c.mode==="cell"&&h.handleEdit(l,t).then(()=>jo("change")).catch(x=>x)),yt("cell-dblclick",l,t)},handleToggleCheckRowEvent(t,l){const{selectCheckboxMaps:s}=u,i=ve.value,{checkField:c,trigger:g}=i,{row:p}=l;if(g==="manual")return;let x=!1;c?x=!r.get(p,c):x=!s[Re(h,p)],t?B.triggerCheckRowEvent(t,l,x):(B.handleBatchSelectRows([p],x),B.checkSelectionStatus())},triggerCheckRowEvent(t,l,s){const i=ve.value,{row:c}=l,{afterFullData:g}=d,{checkMethod:p,trigger:x}=i;if(x!=="manual"){if(t.stopPropagation(),i.isShiftKey&&t.shiftKey&&!e.treeConfig){const y=b.getCheckboxRecords();if(y.length){const S=y[0],O=b.getVTRowIndex(c),W=b.getVTRowIndex(S);if(O!==W){b.setAllCheckboxRow(!1);const k=O<W?g.slice(O,W+1):g.slice(W,O+1);yo(k,!0,!1),yt("checkbox-range-select",Object.assign({rangeRecords:k},l),t);return}}}(!p||p({row:c}))&&(B.handleBatchSelectRows([c],s),B.checkSelectionStatus(),yt("checkbox-change",Object.assign({records:b.getCheckboxRecords(),reserves:b.getCheckboxReserveRecords(),indeterminates:b.getCheckboxIndeterminateRecords(),checked:s},l),t))}},triggerCheckAllEvent(t,l){const s=ve.value,{trigger:i}=s;i!=="manual"&&(t&&t.stopPropagation(),Mr(t,l))},triggerRadioRowEvent(t,l){const{selectRadioRow:s}=u,{row:i}=l,c=Fe.value,{trigger:g}=c;if(g==="manual")return;t.stopPropagation();let p=i,x=s!==p;x?kl(p):c.strict||(x=s===p,x&&(p=null,b.clearRadioRow())),x&&yt("radio-change",Object.assign({oldValue:s,newValue:p},l),t)},triggerCurrentColumnEvent(t,l){const s=me.value,{currentMethod:i}=s,{column:c}=l;(!i||i({column:c}))&&b.setCurrentColumn(c)},triggerCurrentRowEvent(t,l){const{currentRow:s}=u,i=Be.value,{currentMethod:c}=i,{row:g}=l,p=s!==g;(!c||c({row:g}))&&(b.setCurrentRow(g),p&&yt("current-change",Object.assign({oldValue:s,newValue:g},l),t))},triggerRowExpandEvent(t,l){const{rowExpandLazyLoadedMaps:s,expandColumn:i}=u,c=Je.value,{row:g}=l,{lazy:p,trigger:x}=c;if(x==="manual")return;t.stopPropagation();const y=Re(h,g);if(!p||!s[y]){const S=!b.isRowExpandByRow(g),O=b.getColumnIndex(i),W=b.getVMColumnIndex(i);b.setRowExpand(g,S),yt("toggle-row-expand",{expanded:S,column:i,columnIndex:O,$columnIndex:W,row:g,rowIndex:b.getRowIndex(g),$rowIndex:b.getVMRowIndex(g)},t)}},triggerTreeExpandEvent(t,l){const{treeExpandLazyLoadedMaps:s}=u,i=Qe.value,{row:c,column:g}=l,{lazy:p,trigger:x}=i;if(x==="manual")return;t.stopPropagation();const y=Re(h,c);if(!p||!s[y]){const S=!b.isTreeExpandByRow(c),O=b.getColumnIndex(g),W=b.getVMColumnIndex(g);b.setTreeExpand(c,S),yt("toggle-tree-expand",{expanded:S,column:g,columnIndex:O,$columnIndex:W,row:c},t)}},handleColumnSortEvent(t,l){const{mouseConfig:s}=e,i=et.value,{field:c,sortable:g}=l;if(g){const p={$table:h,$event:t,column:l,field:c,property:c,order:l.order,sortList:b.getSortColumns(),sortTime:l.sortTime};s&&i.area&&h.handleSortEvent&&h.handleSortEvent(t,p),yt("sort-change",p,t)}},triggerSortEvent(t,l,s){const i=Ge.value,{field:c,sortable:g}=l;g&&(!s||l.order===s?b.clearSort(i.multiple?l:null):b.sort({field:c,order:s}),h.handleColumnSortEvent(t,l))},triggerHeaderCellMousedownEvent(t,l){const{mouseConfig:s}=e,i=et.value,c=me.value,g=$e.value,{trigger:p,isCrossDrag:x,isPeerDrag:y,disabledMethod:S}=g,O=t.currentTarget,W=O&&O.tagName&&O.tagName.toLowerCase()==="input",k=vt(t,O,"vxe-cell--checkbox").flag,X=vt(t,O,"vxe-cell--sort").flag,q=vt(t,O,"vxe-cell--filter").flag;let P=!1;const ie=c.drag&&p==="cell";if(!(W||k||X||q)){const{column:Oe}=l;ie&&!Oe.fixed&&(x||y||!Oe.parentId)&&!(S&&S(l))&&(P=!0,h.handleHeaderCellDragMousedownEvent(t,l))}!P&&s&&i.area&&h.handleHeaderCellAreaEvent&&h.handleHeaderCellAreaEvent(t,Object.assign({cell:O,triggerSort:X,triggerFilter:q},l)),h.focus(),h.closeMenu&&h.closeMenu()},triggerCellMousedownEvent(t,l){const{column:s}=l,{type:i,treeNode:c}=s,g=i==="radio",p=i==="checkbox",x=i==="expand",y=Be.value,S=je.value,{trigger:O,isCrossDrag:W,isPeerDrag:k,disabledMethod:X}=S,q=t.currentTarget;l.cell=q;const P=q&&q.tagName&&q.tagName.toLowerCase()==="input",ie=g&&vt(t,q,"vxe-cell--radio").flag,Oe=p&&vt(t,q,"vxe-cell--checkbox").flag,z=c&&vt(t,q,"vxe-tree--btn-wrapper").flag,ye=x&&vt(t,q,"vxe-table--expanded").flag;let Le=!1;y.drag&&(Le=O==="row"||s.dragSort&&O==="cell");let Ke=!1;P||ie||Oe||z||ye||Le&&(W||k||!l.level)&&!(X&&X(l))&&(Ke=!0,h.handleCellDragMousedownEvent(t,l)),!Ke&&h.handleCellMousedownEvent&&h.handleCellMousedownEvent(t,l),h.focus(),h.closeFilter(),h.closeMenu&&h.closeMenu()},triggerCellMouseupEvent(){Fr()},handleRowDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(rr(),0,0)},handleRowDragSwapEvent(t,l,s,i,c,g){const{treeConfig:p,dragConfig:x}=e,y=je.value,{fullAllDataRowIdData:S}=d,{isPeerDrag:O,isCrossDrag:W,isSelfToChildDrag:k,dragEndMethod:X}=y,q=Qe.value,{transform:P,rowField:ie,mapChildrenField:Oe,parentField:z}=q,ye=q.children||q.childrenField,{afterFullData:Le,tableFullData:Ke}=d,Ue=X||(x?x.dragEndMethod:null),at=c==="bottom"?1:0;return i&&s&&i!==s?Promise.resolve(Ue?Ue({oldRow:s,newRow:i,dragPos:c,dragToChild:!!g,offsetIndex:at}):!0).then(it=>{if(!it)return;let ct=-1,nt=-1;if(p){if(P){const gt=Re(h,s),lt=S[gt],rt=Re(h,i),Ot=S[rt];if(lt&&Ot){const{level:Qo}=lt,{level:No}=Ot,pl={};r.eachTree([s],Qt=>{pl[Re(h,Qt)]=Qt},{children:Oe});let Xo=!1;if(Qo&&No)if(O&&!W){if(lt.row[z]!==Ot.row[z])return}else{if(!W)return;if(pl[rt]&&(Xo=!0,!(W&&k))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}else if(Qo){if(!W)return}else if(No){if(!W)return;if(pl[rt]&&(Xo=!0,!(W&&k))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}const Fo=r.toTreeArray(d.afterTreeFullData,{children:ye}),Ro=h.findRowIndexOf(Fo,s);Fo.splice(Ro,1);const Oo=h.findRowIndexOf(Fo,i)+at;Fo.splice(Oo,0,s),Xo&&W&&k&&r.each(s[ye],Qt=>{Qt[z]=s[z]}),s[z]=g?i[ie]:i[z],d.tableFullTreeData=r.toArrayTree(Fo,{key:q.rowField,parentKey:q.parentField,children:ye,mapChildren:q.mapChildrenField})}}}else{ct=h.findRowIndexOf(Le,s);const gt=h.findRowIndexOf(Ke,s);Le.splice(ct,1),Ke.splice(gt,1);const lt=h.findRowIndexOf(Le,i),rt=h.findRowIndexOf(Ke,i);nt=lt+at;const Ot=rt+at;Le.splice(nt,0,s),Ke.splice(Ot,0,s)}u.isDragRowMove=!0,h.handleTableData(p&&P),h.cacheRowMap(),Un(),p&&P||h.updateAfterDataIndex(),h.checkSelectionStatus(),u.scrollYLoad&&h.updateScrollYSpace(),ce().then(()=>{h.updateCellAreas(),h.recalculate()}),yt("row-dragend",{oldRow:s,newRow:i,dragPos:c,dragToChild:!!g,offsetIndex:at,_index:{newIndex:nt,oldIndex:ct}},t)}).catch(()=>{}):Promise.resolve()},handleRowDragDragendEvent(t){const{treeConfig:l}=e,{fullAllDataRowIdData:s,prevDragToChild:i}=d,{dragRow:c}=u,g=Qe.value,{lazy:p}=g,x=g.hasChild||g.hasChildField,{prevDragRow:y,prevDragPos:S}=d;if(l&&i){if(p){const O=Re(h,y),W=s[O];y[x]?W&&W.treeLoaded&&h.handleRowDragSwapEvent(t,!0,c,y,S,i):h.handleRowDragSwapEvent(t,!0,c,y,S,i)}}else h.handleRowDragSwapEvent(t,!0,c,y,S,i);Gl(),ks(),d.prevDragToChild=!1,u.dragRow=null,u.dragCol=null,setTimeout(()=>{u.isDragRowMove=!1},500)},handleRowDragDragoverEvent(t){const{treeConfig:l}=e,{fullAllDataRowIdData:s}=d,{dragRow:i}=u,c=Qe.value,{lazy:g,transform:p,parentField:x}=c,y=c.hasChild||c.hasChildField,S=je.value,{isPeerDrag:O,isCrossDrag:W,isToChildDrag:k}=S;if(!i){t.preventDefault();return}const X=t.ctrlKey,q=t.currentTarget,P=q.getAttribute("rowid")||"",ie=s[P];if(ie){const Oe=ie.row,z=Re(h,Oe),ye=s[z];t.preventDefault();const{dragRow:Le}=u,Ue=t.clientY-q.getBoundingClientRect().y<q.clientHeight/2?"top":"bottom";if(d.prevDragToChild=!!(l&&p&&W&&k&&X),d.prevDragRow=Oe,d.prevDragPos=Ue,h.eqRow(Le,Oe)||X&&l&&g&&Oe[y]&&ye&&!ye.treeLoaded||!W&&l&&p&&(O?Le[x]!==Oe[x]:ie.level)){Qn(t,q,null,!1,Ue);return}Qn(t,q,null,!0,Ue),yt("row-dragover",{oldRow:Le,targetRow:Oe,dragPos:Ue},t)}},handleCellDragMousedownEvent(t,l){var s;t.stopPropagation();const{dragConfig:i}=e,c=je.value,{trigger:g,dragStartMethod:p}=c,{row:x}=l,y=t.currentTarget,S=g==="cell"||g==="row"?y:(s=y.parentElement)===null||s===void 0?void 0:s.parentElement,O=S.parentElement,W=p||(i?i.dragStartMethod:null);if(ks(),W&&!W(l)){O.draggable=!1,u.dragRow=null,u.dragCol=null,Gl();return}u.dragRow=x,u.dragCol=null,O.draggable=!0,Na(x),_a(S),yt("row-dragstart",l,t)},handleCellDragMouseupEvent(){Fr()},handleHeaderCellDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(rr(),0,0)},handleColDragSwapColumn(){Sr(),Is(!1).then(()=>{h.updateCellAreas(),h.saveCustomStore("update:sort")})},handleColDragSwapEvent(t,l,s,i,c,g){const{mouseConfig:p}=e,x=$e.value,{isPeerDrag:y,isCrossDrag:S,isSelfToChildDrag:O,isToChildDrag:W,dragEndMethod:k}=x,{collectColumn:X}=d,q=c==="right"?1:0;if(i&&s&&i!==s){const P=s,ie=i;return Promise.resolve(k?k({oldColumn:P,newColumn:ie,dragPos:c,dragToChild:!!g,offsetIndex:q}):!0).then(Oe=>{if(!Oe)return;let z=-1,ye=-1;const Le={};r.eachTree([P],it=>{Le[it.id]=it});let Ke=!1;if(P.parentId&&ie.parentId)if(y&&!S){if(P.parentId!==ie.parentId)return}else{if(!S)return;if(Le[ie.id]&&(Ke=!0,!(S&&O))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}else if(P.parentId){if(!S)return}else if(ie.parentId){if(!S)return;if(Le[ie.id]&&(Ke=!0,!(S&&O))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}const Ue=r.findTree(X,it=>it.id===P.id);if(Ke&&S&&O){if(Ue){const{items:it,index:ct}=Ue,nt=P.children||[];nt.forEach(gt=>{gt.parentId=P.parentId}),it.splice(ct,1,...nt),P.children=[]}}else if(Ue){const{items:it,index:ct,parent:nt}=Ue;it.splice(ct,1),nt||(z=ct)}const at=r.findTree(X,it=>it.id===ie.id);if(at){const{items:it,index:ct,parent:nt}=at;S&&W&&g?(P.parentId=ie.id,ie.children=(ie.children||[]).concat([P])):(P.parentId=ie.parentId,it.splice(ct+q,0,P)),nt||(ye=ct)}r.eachTree(X,(it,ct,nt,gt,lt)=>{if(!lt){const rt=ct+1;it.renderSortNumber=rt}}),u.isDragColMove=!0,p&&(h.clearSelected&&h.clearSelected(),h.clearCellAreas&&(h.clearCellAreas(),h.clearCopyCellArea())),yt("column-dragend",{oldColumn:P,newColumn:ie,dragPos:c,dragToChild:!!g,offsetIndex:q,_index:{newIndex:ye,oldIndex:z}},t),l&&h.handleColDragSwapColumn()}).catch(()=>{})}return Promise.resolve()},handleHeaderCellDragDragendEvent(t){const{dragCol:l}=u,{prevDragCol:s,prevDragPos:i,prevDragToChild:c}=d;h.handleColDragSwapEvent(t,!0,l,s,i,c),Gl(),Zn(),d.prevDragToChild=!1,u.dragRow=null,u.dragCol=null,setTimeout(()=>{u.isDragColMove=!1,h.recalculate().then(()=>{$l()})},500)},handleHeaderCellDragDragoverEvent(t){const{dragCol:l}=u,s=$e.value,{isToChildDrag:i,isPeerDrag:c,isCrossDrag:g}=s;if(!l){t.preventDefault();return}const p=t.ctrlKey,x=t.currentTarget,y=x.getAttribute("colid"),S=h.getColumnById(y);if(S){t.preventDefault();const{clientX:O}=t,k=O-x.getBoundingClientRect().x<x.clientWidth/2?"left":"right";if(d.prevDragToChild=!!(g&&i&&p),d.prevDragCol=S,d.prevDragPos=k,S.fixed||l&&l.id===S.id||!g&&(c?l.parentId!==S.parentId:S.parentId)){Qn(t,null,x,!1,k);return}Qn(t,null,x,!0,k),yt("column-dragover",{oldColumn:l,targetColumn:S,dragPos:k},t);const X=j.value;if(!X)return;const q=oe.value,P=C.value,ie=P?P.$el:null,Oe=q||ie;if(Oe){const z=X.getBoundingClientRect(),ye=X.clientWidth,Le=Q.value,Ke=Le?Le.clientWidth:0,Ue=J.value,at=Ue?Ue.clientWidth:0,it=z.x+Ke,ct=z.x+ye-at,nt=28,gt=O-it,lt=ct-O;if(gt>0&&gt<=nt){const rt=Math.floor(ye/(gt>nt/2?240:120));Oe.scrollLeft-=rt*(nt-gt)}else if(lt>0&&lt<=nt){const rt=Math.floor(ye/(lt>nt/2?240:120));Oe.scrollLeft+=rt*(nt-lt)}}}},handleHeaderCellDragMousedownEvent(t,l){var s;t.stopPropagation();const i=$e.value,{trigger:c,dragStartMethod:g}=i,{column:p}=l,x=t.currentTarget,y=c==="cell"?x:(s=x.parentElement)===null||s===void 0?void 0:s.parentElement;if(u.isDragColMove=!1,Zn(),g&&!g(l)){y.draggable=!1,u.dragRow=null,u.dragCol=null,Gl();return}u.dragCol=p,u.dragRow=null,y.draggable=!0,Wa(p),za(y),yt("column-dragstart",l,t)},handleHeaderCellDragMouseupEvent(){Zn(),Gl(),u.dragRow=null,u.dragCol=null,u.isDragColMove=!1},handleScrollEvent(t,l,s,i,c,g){const{highlightHoverRow:p}=e,{lastScrollLeft:x,lastScrollTop:y}=d,S=C.value,O=S?S.$el:null,W=Be.value,k=A.value,X=Z.value,q=O?O.clientHeight:0,P=O?O.clientWidth:0,ie=O?O.scrollHeight:0,Oe=O?O.scrollWidth:0;let z=!1,ye=!1,Le=!1,Ke=!1,Ue="",at=!1,it=!1,ct=!1,nt=!1;if(s){const lt=be.value;Le=c<=0,Le||(Ke=c+P>=Oe),c>x?(Ue="right",c+P>=Oe-lt&&(nt=!0)):(Ue="left",c<=lt&&(ct=!0)),B.checkScrolling(),d.lastScrollLeft=c}if(l){const lt=L.value;z=i<=0,z||(ye=i+q>=ie),i>y?(Ue="bottom",i+q>=ie-lt&&(it=!0)):(Ue="top",i<=lt&&(at=!0)),d.lastScrollTop=i}u.isDragColMove=!1,u.isDragRowMove=!1,u.lastScrollTime=Date.now();const gt=Object.assign({scrollTop:i,scrollLeft:c,bodyHeight:q,bodyWidth:P,scrollHeight:ie,scrollWidth:Oe,isX:s,isY:l,isTop:z,isBottom:ye,isLeft:Le,isRight:Ke,direction:Ue},g);Fa(s,l),(W.isHover||p)&&h.clearHoverRow(),k&&k.reactData.visible&&k.close(),X&&X.reactData.visible&&X.close(),(it||at||nt||ct)&&yt("scroll-boundary",gt,t),yt("scroll",gt,t)},triggerScrollXEvent(){we.value.immediate?$l():Ta()},triggerScrollYEvent(){ae.value.immediate?En():Ma()},scrollToTreeRow(t){const{treeConfig:l}=e,{tableFullData:s}=d,i=[];if(l){const c=Qe.value,g=c.children||c.childrenField,p=r.findTree(s,x=>h.eqRow(x,t),{children:g});if(p){const x=p.nodes;x.forEach((y,S)=>{S<x.length-1&&!b.isTreeExpandByRow(y)&&i.push(b.setTreeExpand(y,!0))})}}return Promise.all(i).then(()=>qr(h,t))},updateScrollYStatus:Un,updateScrollXSpace(){const{isGroup:t,scrollXLoad:l,scrollbarWidth:s}=u,{visibleColumn:i,scrollXStore:c,elemStore:g,tableWidth:p}=d,x=w.value,y=C.value,S=R.value,O=y?y.$el:null;if(O){const W=x?x.$el:null,k=S?S.$el:null,X=W?W.querySelector(".vxe-table--header"):null,q=O.querySelector(".vxe-table--body"),P=k?k.querySelector(".vxe-table--footer"):null,ie=i.slice(0,c.startIndex).reduce((Le,Ke)=>Le+Ke.renderWidth,0);let Oe="";l&&(Oe=`${ie}px`),X&&(X.style.marginLeft=t?"":Oe),q.style.marginLeft=Oe,P&&(P.style.marginLeft=Oe),["main"].forEach(Le=>{["header","body","footer"].forEach(Ue=>{const at=So(g[`${Le}-${Ue}-xSpace`]);at&&(at.style.width=l?`${p+(Ue==="header"?s:0)}px`:"")})});const ye=xe.value;ye&&(ye.style.width=`${p+s}px`),ce(()=>{co()})}},updateScrollYSpace(){const{showOverflow:t}=e,{scrollYLoad:l}=u,{scrollYStore:s,elemStore:i,afterFullData:c,fullAllDataRowIdData:g}=d,{startIndex:p,rowHeight:x}=s;let y=0,S=0;const O=["main","left","right"];let W="",k="";if(l){if(t)y=c.length*x,S=Math.max(0,p*x);else{for(let q=0;q<c.length;q++){const P=c[q],ie=Re(h,P),Oe=g[ie];Oe&&(y+=Oe.height||x)}for(let q=0;q<p;q++){const P=c[q],ie=Re(h,P),Oe=g[ie];Oe&&(S+=Oe.height||x)}}W=`${S}px`,k=`${y}px`}O.forEach(q=>{const P=["header","body","footer"],ie=So(i[`${q}-body-table`]);ie&&(ie.style.marginTop=W),P.forEach(Oe=>{const z=So(i[`${q}-${Oe}-ySpace`]);z&&(z.style.height=k)})});const X=Ee.value;X&&(X.style.height=k),ce(co)},updateScrollXData(){const{showOverflow:t}=e;return Ds(),fl(),ce().then(()=>{fl(),Ds(),B.updateScrollXSpace(),t||B.updateScrollYSpace()})},updateScrollYData(){return B.handleTableData(),fl(),ce().then(()=>{fl(),B.handleTableData(),B.updateScrollYSpace()})},checkScrolling(){const t=Q.value,l=J.value,s=C.value,i=s?s.$el:null,g=oe.value||i;g&&(t&&(g.scrollLeft>0?il(t,"scrolling--middle"):Ho(t,"scrolling--middle")),l&&(g.clientWidth<g.scrollWidth-Math.ceil(g.scrollLeft)?il(l,"scrolling--middle"):Ho(l,"scrolling--middle")))},updateZindex(){e.zIndex?d.tZindex=e.zIndex:d.tZindex<zi()&&(d.tZindex=Wi())},handleCheckedCheckboxRow:yo,triggerHoverEvent(t,{row:l}){B.setHoverRow(l)},setHoverRow(t){const l=Re(h,t),s=j.value;B.clearHoverRow(),s&&r.arrayEach(s.querySelectorAll(`[rowid="${l}"]`),i=>il(i,"row--hover")),d.hoverRow=t},clearHoverRow(){const t=j.value;t&&r.arrayEach(t.querySelectorAll(".vxe-body--row.row--hover"),l=>Ho(l,"row--hover")),d.hoverRow=null},getCell(t,l){return b.getCellElement(t,l)},findRowIndexOf(t,l){return l?r.findIndexOf(t,s=>h.eqRow(s,l)):-1},eqRow(t,l){return t&&l?t===l?!0:Re(h,t)===Re(h,l):!1}},Object.assign(h,b,B);const kr=t=>{const{showHeader:l,showFooter:s}=e,{tableData:i,tableColumn:c,tableGroupColumn:g,columnStore:p,footerTableData:x}=u,y=t==="left",S=y?p.leftList:p.rightList;return f("div",{ref:y?Q:J,class:`vxe-table--fixed-${t}-wrapper`},[l?f(ti,{ref:y?M:ue,fixedType:t,tableData:i,tableColumn:c,tableGroupColumn:g,fixedColumn:S}):bo(h),f(Jr,{ref:y?_:ee,fixedType:t,tableData:i,tableColumn:c,fixedColumn:S}),s?f(oi,{ref:y?re:V,footerTableData:x,tableColumn:c,fixedColumn:S,fixedType:t}):bo(h)])},Xa=()=>{const t=Tt.value,l={$table:h};if(n.empty)return n.empty(l);{const s=t.name?ni.get(t.name):null,i=s?s.renderTableEmpty||s.renderTableEmptyView||s.renderEmpty:null;if(i)return vo(i(t,l))}return cl(e.emptyText)||Sl("vxe.table.emptyText")},qa=()=>{const{dragConfig:t}=e,{dragRow:l,dragCol:s,dragTipText:i}=u,c=$e.value,x=(je.value.slots||{}).tip||(t&&t.slots?t.slots.rowTip:null),S=(c.slots||{}).tip;return l&&x?yn(x,{row:l}):s&&S?yn(S,{column:s}):[f("span",i)]},Ka=()=>{const{dragRow:t}=u,l=Be.value,s=me.value,i=je.value,c=$e.value;return l.drag||s.drag?f("div",{class:"vxe-table--drag-wrapper"},[f("div",{ref:G,class:["vxe-table--drag-row-line",{"is--guides":i.showGuidesStatus}]}),f("div",{ref:K,class:["vxe-table--drag-col-line",{"is--guides":c.showGuidesStatus}]}),f("div",{ref:ke,class:"vxe-table--drag-sort-tip"},[f("div",{class:"vxe-table--drag-sort-tip-wrapper"},[f("div",{class:"vxe-table--drag-sort-tip-status"},[f("span",{class:["vxe-table--drag-sort-tip-normal-status",t?ns().TABLE_DRAG_STATUS_ROW:ns().TABLE_DRAG_STATUS_COLUMN]}),f("span",{class:["vxe-table--drag-sort-tip-sub-status",ns().TABLE_DRAG_STATUS_SUB_ROW]}),f("span",{class:["vxe-table--drag-sort-tip-disabled-status",ns().TABLE_DRAG_DISABLED]})]),f("div",{class:"vxe-table--drag-sort-tip-content"},qa())])])]):bo(h)};function Ls(){const t=j.value;t&&t.clientWidth&&t.clientHeight&&b.recalculate()}const Ua=()=>{const{loading:t,stripe:l,showHeader:s,height:i,treeConfig:c,mouseConfig:g,showFooter:p,highlightCell:x,highlightHoverRow:y,highlightHoverColumn:S,editConfig:O,editRules:W}=e,{isCalcColumn:k,isGroup:X,overflowX:q,overflowY:P,scrollXLoad:ie,scrollYLoad:Oe,scrollbarHeight:z,tableData:ye,tableColumn:Le,tableGroupColumn:Ke,footerTableData:Ue,initStore:at,columnStore:it,filterStore:ct,customStore:nt,tooltipStore:gt}=u,{leftList:lt,rightList:rt}=it,Ot=n.loading,Qo=Ve.value,No=U.value,pl=ve.value,Xo=Qe.value,Fo=Be.value,Ro=me.value,Zt=H.value,Oo=mt.value,Qt=et.value,gl=Ze.value,Jo=Ye.value,kt=ao.value,Pt=dt.value,jt=u._isLoading||t,At=lo.value,uo=Se.value,To=g&&Qt.area,fo=$e.value;return f("div",{ref:j,class:["vxe-table","vxe-table--render-default",`tid_${v}`,`border--${Oo}`,{[`size--${Zt}`]:Zt,[`valid-msg--${No.msgMode}`]:!!W,"vxe-editable":!!O,"old-cell-valid":W&&xt().cellVaildMode==="obsolete","cell--highlight":x,"cell--selected":g&&Qt.selected,"cell--area":To,"header-cell--area":To&&gl.selectCellByHeader,"body-cell--area":To&&gl.selectCellByBody,"row--highlight":Fo.isHover||y,"column--highlight":Ro.isHover||S,"checkbox--range":pl.range,"column--calc":k,"col--drag-cell":Ro.drag&&fo.trigger==="cell","is--header":s,"is--footer":p,"is--group":X,"is--tree-line":c&&(Xo.showLine||Xo.line),"is--fixed-left":lt.length,"is--fixed-right":rt.length,"is--animat":!!e.animat,"is--padding":e.padding,"is--round":e.round,"is--stripe":!c&&l,"is--loading":jt,"is--empty":!jt&&!ye.length,"is--scroll-y":P,"is--scroll-x":q,"is--virtual-x":ie,"is--virtual-y":Oe}],spellcheck:!1,onKeydown:Ba},[f("div",{class:"vxe-table-slots"},n.default?n.default({}):[]),f("div",{key:"tw",class:"vxe-table--render-wrapper"},[f("div",{class:"vxe-table--main-wrapper"},[s?f(ti,{ref:w,tableData:ye,tableColumn:Le,tableGroupColumn:Ke}):bo(h),f(Jr,{ref:C,tableData:ye,tableColumn:Le}),p?f(oi,{ref:R,footerTableData:Ue,tableColumn:Le}):bo(h)]),f("div",{class:"vxe-table--fixed-wrapper"},[lt&&lt.length&&q?kr("left"):bo(h),rt&&rt.length&&q?kr("right"):bo(h)])]),At.x?f("div",{key:"vx",ref:Y,class:"vxe-table--scroll-x-virtual"},[f("div",{ref:oe,class:"vxe-table--scroll-x-handle",onScroll:Da},[f("div",{ref:xe,class:"vxe-table--scroll-x-space"})])]):bo(h),At.y?f("div",{key:"vy",ref:se,class:"vxe-table--scroll-y-virtual"},[f("div",{ref:ge,class:"vxe-table--scroll-y-handle",onScroll:Ia},[f("div",{ref:Ee,class:"vxe-table--scroll-y-space"})])]):bo(h),f("div",{key:"tn",ref:Pe,class:"vxe-table--empty-placeholder"},[f("div",{class:"vxe-table--empty-content"},Xa())]),f("div",{key:"tl",class:"vxe-table--border-line"}),f("div",{key:"cl",ref:pe,class:"vxe-table--resizable-bar",style:q?{"padding-bottom":`${z}px`}:null},uo.showDragTip?[f("div",{ref:Ie,class:"vxe-table--resizable-number-tip"},"23432px")]:[]),m?f(m,{key:"lg",class:"vxe-table--loading",modelValue:jt,icon:kt.icon,text:kt.text},Ot?{default:()=>yn(Ot,{$table:h,$grid:Ce,loading:jt})}:{}):Ot?f("div",{class:["vxe-loading--custom-wrapper",{"is--visible":jt}]},yn(Ot,{$table:h,$grid:Ce,loading:jt})):bo(h),at.custom?f(jd,{key:"cs",ref:D,customStore:nt}):bo(h),at.filter?f(Vd,{key:"tf",ref:F,filterStore:ct}):bo(h),at.import&&e.importConfig?f(_d,{key:"it",defaultOptions:u.importParams,storeData:u.importStore}):bo(h),at.export&&(e.exportConfig||e.printConfig)?f(Wd,{key:"et",defaultOptions:u.exportParams,storeData:u.exportStore}):bo(h),Pt?f(Xd,{key:"tm",ref:T}):bo(h),Ka(),E?f("div",{},[f(E,{key:"ctp",ref:$,isArrow:!1,enterable:!1}),f(E,Object.assign({key:"btp",ref:Z},Qo,gt.currOpts)),e.editRules&&No.showMessage&&(No.message==="default"?!i:No.message==="tooltip")?f(E,Object.assign({key:"vtp",ref:A,class:[{"old-cell-valid":W&&xt().cellVaildMode==="obsolete"},"vxe-table--valid-error"]},No.message==="tooltip"||ye.length===1?Jo:{})):bo(h)]):bo(h)])},$s=qe(0);Et(()=>e.data?e.data.length:-1,()=>{$s.value++}),Et(()=>e.data,()=>{$s.value++}),Et($s,()=>{const{initStatus:t}=d,l=e.data||[];l&&l.length>=5e4&&an("vxe.error.errLargeData",["loadData(data), reloadData(data)"]),Xn(l).then(()=>{const{scrollXLoad:s,scrollYLoad:i,expandColumn:c}=u;d.inited=!0,d.initStatus=!0,t||qn(),(s||i)&&c&&an("vxe.error.scrollErrProp",["column.type=expand"]),b.recalculate()})});const Bs=qe(0);Et(()=>u.staticColumns.length,()=>{Bs.value++}),Et(()=>u.staticColumns,()=>{Bs.value++}),Et(Bs,()=>{Or(r.clone(u.staticColumns))});const Hs=qe(0);Et(()=>u.tableColumn.length,()=>{Hs.value++}),Et(()=>u.tableColumn,()=>{Hs.value++}),Et(Hs,()=>{B.analyColumnWidth()}),Et(()=>u.upDataFlag,()=>{ce(()=>{b.updateData()})}),Et(()=>u.reColumnFlag,()=>{ce(()=>{b.refreshColumn()})}),Et(()=>e.showHeader,()=>{ce(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})}),Et(()=>e.showFooter,()=>{ce(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})});const Ps=qe(0);Et(()=>e.footerData?e.footerData.length:-1,()=>{Ps.value++}),Et(()=>e.footerData,()=>{Ps.value++}),Et(Ps,()=>{b.updateFooter()}),Et(()=>e.height,()=>{ce(()=>b.recalculate(!0))}),Et(()=>e.maxHeight,()=>{ce(()=>b.recalculate(!0))}),Et(H,()=>{ce(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})}),Et(()=>e.syncResize,t=>{t&&(Ls(),ce(()=>{Ls(),setTimeout(()=>Ls())}))});const js=qe(0);Et(()=>e.mergeCells?e.mergeCells.length:-1,()=>{js.value++}),Et(()=>e.mergeCells,()=>{js.value++}),Et(js,()=>{b.clearMergeCells(),ce(()=>{e.mergeCells&&b.setMergeCells(e.mergeCells)})});const Vs=qe(0);Et(()=>e.mergeFooterItems?e.mergeFooterItems.length:-1,()=>{Vs.value++}),Et(()=>e.mergeFooterItems,()=>{Vs.value++}),Et(Vs,()=>{b.clearMergeFooterItems(),ce(()=>{e.mergeFooterItems&&b.setMergeFooterItems(e.mergeFooterItems)})}),I&&Et(()=>I?I.reactData.resizeFlag:null,()=>{Ir()}),Ud.forEach(t=>{const{setupTable:l}=t;if(l){const s=l(h);s&&r.isObject(s)&&Object.assign(h,s)}}),B.preventEvent(null,"created",{$table:h});let Rn;return Ja(()=>{b.recalculate().then(()=>b.refreshScroll()),B.preventEvent(null,"activated",{$table:h})}),ec(()=>{d.isActivated=!1,B.preventEvent(null,"deactivated",{$table:h})}),zl(()=>{const t=me.value,l=Be.value,s=Gt.value;(t.drag||l.drag||s.allowSort)&&Zi(),ce(()=>{const{data:i,treeConfig:c,showOverflow:g}=e,{scrollXStore:p,scrollYStore:x}=d,y=ae.value;if(Xe.value,Qe.value,Fe.value,ve.value,Je.value,Be.value,Object.assign(x,{startIndex:0,endIndex:0,visibleSize:0,adaptive:y.adaptive!==!1}),Object.assign(p,{startIndex:0,endIndex:0,visibleSize:0}),Xn(i||[]).then(()=>{i&&i.length&&(d.inited=!0,d.initStatus=!0,qn()),Ra(),co()}),e.autoResize){const S=j.value,O=B.getParentElem();Rn=Kd.create(()=>{e.autoResize&&b.recalculate(!0)}),S&&Rn.observe(S),O&&Rn.observe(O)}}),St.on(h,"paste",Pa),St.on(h,"copy",ja),St.on(h,"cut",Va),St.on(h,"mousedown",Aa),St.on(h,"blur",La),St.on(h,"mousewheel",$a),St.on(h,"keydown",Ha),St.on(h,"resize",Ir),St.on(h,"contextmenu",h.handleGlobalContextmenuEvent),B.preventEvent(null,"mounted",{$table:h})}),Ri(()=>{Rn&&Rn.disconnect(),b.closeFilter(),h.closeMenu&&h.closeMenu(),B.preventEvent(null,"beforeUnmount",{$table:h})}),Xl(()=>{St.off(h,"paste"),St.off(h,"copy"),St.off(h,"cut"),St.off(h,"mousedown"),St.off(h,"blur"),St.off(h,"mousewheel"),St.off(h,"keydown"),St.off(h,"resize"),St.off(h,"contextmenu"),B.preventEvent(null,"unmounted",{$table:h})}),Il("$xeColgroup",null),Il("$xeTable",h),h.renderVN=Ua,h},render(){return this.renderVN()}});function Gd(e){const o=_e(()=>{const{renderParams:m}=e;return m.column}),n=_e(()=>{const{renderParams:m}=e;return m.row}),a=_e(()=>{const{renderOpts:m}=e;return m.props||{}}),v=_e({get(){const{renderParams:m}=e,{row:E,column:I}=m;return r.get(E,I.field)},set(m){const{renderParams:E}=e,{row:I,column:H}=E;return r.set(I,H.field,m)}});return{currColumn:o,currRow:n,cellModel:v,cellOptions:a}}const{renderer:ai,hooks:Zd}=te,Qd=["openFilter","setFilter","clearFilter","saveFilterPanel","resetFilterPanel","getCheckedFilters","updateFilterOptionStatus"];Zd.add("tableFilterModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refTableHeader:v,refTableBody:m,refTableFilter:E}=e.getRefMaps(),{computeFilterOpts:I,computeMouseOpts:H}=e.getComputeMaps(),u=$=>{const{filterStore:A}=n;A.options.forEach(T=>{T.checked=T._checked}),e.confirmFilterEvent($)},d=($,A,T)=>{const{filterStore:F}=n;F.options.forEach(D=>{D._checked=!1}),T._checked=A,e.checkFilterOptions(),u($)},b=($,A,T)=>{T._checked=A,e.checkFilterOptions()},B=$=>{const{filterStore:A}=n;e.handleClearFilter(A.column),e.confirmFilterEvent($)},j={checkFilterOptions(){const{filterStore:$}=n;$.isAllSelected=$.options.every(A=>A._checked),$.isIndeterminate=!$.isAllSelected&&$.options.some(A=>A._checked)},triggerFilterEvent($,A,T){const{initStore:F,filterStore:D}=n;if(D.column===A&&D.visible)D.visible=!1;else{const{target:w,pageX:C}=$,{visibleWidth:R}=ws(),{filters:M,filterMultiple:_,filterRender:re}=A,ue=ft(re)?ai.get(re.name):null,ee=A.filterRecoverMethod||(ue?ue.tableFilterRecoverMethod||ue.filterRecoverMethod:null);a._currFilterParams=T,Object.assign(D,{multiple:_,options:M,column:A,style:null}),D.options.forEach(V=>{const{_checked:Q,checked:J}=V;V._checked=J,!J&&Q!==J&&ee&&ee({option:V,column:A,$table:e})}),this.checkFilterOptions(),D.visible=!0,F.filter=!0,ce(()=>{const V=v.value,Q=m.value,J=V?V.$el:null,pe=Q.$el;if(!pe)return;const Ie=E.value,Pe=Ie?Ie.$el:null;if(!Pe)return;const ke=Pe.offsetWidth,G=Pe.offsetHeight,K=Pe.querySelector(".vxe-table--filter-header"),Y=Pe.querySelector(".vxe-table--filter-footer"),se=ke/2,oe=10,ge=pe.clientWidth-ke-oe;let xe,Ee;const Ce={top:`${w.offsetTop+w.offsetParent.offsetTop+w.offsetHeight}px`};let le=null;const he=pe.clientHeight-(J?J.clientHeight/2:0);if(G>=he&&(le=Math.max(40,he-(Y?Y.offsetHeight:0)-(K?K.offsetHeight:0))),A.fixed==="left"?xe=w.offsetLeft+w.offsetParent.offsetLeft-se:A.fixed==="right"?Ee=w.offsetParent.offsetWidth-w.offsetLeft+(w.offsetParent.offsetParent.offsetWidth-w.offsetParent.offsetLeft)-A.renderWidth-se:xe=w.offsetLeft+w.offsetParent.offsetLeft-se-pe.scrollLeft,xe){const U=C+ke-se+oe-R;U>0&&(xe-=U),Ce.left=`${Math.min(ge,Math.max(oe,xe))}px`}else if(Ee){const U=C+ke-se+oe-R;U>0&&(Ee+=U),Ce.right=`${Math.max(oe,Ee)}px`}D.style=Ce,D.maxHeight=le})}e.dispatchEvent("filter-visible",{column:A,field:A.field,property:A.field,filterList:e.getCheckedFilters(),visible:D.visible},$)},handleClearFilter($){if($){const{filters:A,filterRender:T}=$;if(A){const F=ft(T)?ai.get(T.name):null,D=$.filterResetMethod||(F?F.tableFilterResetMethod||F.filterResetMethod:null);A.forEach(w=>{w._checked=!1,w.checked=!1,D||(w.data=r.clone(w.resetValue,!0))}),D&&D({options:A,column:$,$table:e})}}},handleColumnConfirmFilter($,A){const{mouseConfig:T}=o,{scrollXLoad:F,scrollYLoad:D}=n,w=I.value,C=H.value,{field:R}=$,M=[],_=[];$.filters.forEach(ee=>{ee.checked&&(M.push(ee.value),_.push(ee.data))});const re=e.getCheckedFilters(),ue={$table:e,$event:A,column:$,field:R,property:R,values:M,datas:_,filters:re,filterList:re};return w.remote||(e.handleTableData(!0),e.checkSelectionStatus()),T&&C.area&&e.handleFilterEvent&&e.handleFilterEvent(A,ue),A&&e.dispatchEvent("filter-change",ue,A),e.closeFilter(),e.updateFooter().then(()=>{const{scrollXLoad:ee,scrollYLoad:V}=n;if(F||ee||D||V)return(F||ee)&&e.updateScrollXSpace(),(D||V)&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>{setTimeout(()=>e.recalculate(),50)})},confirmFilterEvent($){const{filterStore:A}=n,{column:T}=A;e.handleColumnConfirmFilter(T,$)},handleFilterChangeRadioOption:d,handleFilterChangeMultipleOption:b,handleFilterChangeOption($,A,T){const{filterStore:F}=n;F.multiple?b($,A,T):d($,A,T)},handleFilterConfirmFilter:u,handleFilterResetFilter:B};return Object.assign(Object.assign({},{openFilter($){const A=Yt(e,$);if(A&&A.filters){const{elemStore:T}=a,{fixed:F}=A;return e.scrollToColumn(A).then(()=>{const D=So(T[`${F||"main"}-header-wrapper`]||T["main-header-wrapper"]);if(D){const w=D.querySelector(`.vxe-header--column.${A.id} .vxe-filter--btn`);gd(w,"click")}})}return ce()},setFilter($,A,T){const F=Yt(e,$);return F&&F.filters&&(F.filters=ta(A||[]),T)?e.handleColumnConfirmFilter(F,new Event("click")):ce()},clearFilter($){const{filterStore:A}=n,{tableFullColumn:T}=a,F=I.value;let D;return $?(D=Yt(e,$),D&&j.handleClearFilter(D)):T.forEach(j.handleClearFilter),(!$||D!==A.column)&&Object.assign(A,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),F.remote?ce():e.updateData()},saveFilterPanel(){return u(null),ce()},resetFilterPanel(){return B(null),ce()},getCheckedFilters(){const{tableFullColumn:$}=a,A=[];return $.forEach(T=>{const{field:F,filters:D}=T,w=[],C=[];D&&D.length&&(D.forEach(R=>{R.checked&&(w.push(R.value),C.push(R.data))}),w.length&&A.push({column:T,field:F,property:F,values:w,datas:C}))}),A},updateFilterOptionStatus($,A){return $._checked=A,$.checked=A,ce()}}),j)},setupGrid(e){return e.extendTableMethods(Qd)}});const{menus:Jd,hooks:eu,globalEvents:ss,GLOBAL_EVENT_KEYS:rs}=te,tu=["closeMenu"];eu.add("tableMenuModule",{setupTable(e){const{xID:o,props:n,reactData:a,internalData:v}=e,{refElem:m,refTableFilter:E,refTableMenu:I}=e.getRefMaps(),{computeMouseOpts:H,computeIsMenu:u,computeMenuOpts:d}=e.getComputeMaps();let b={},B={};const j=(Z,$,A)=>{const{ctxMenuStore:T}=a,F=u.value,D=d.value,w=D[$],C=D.visibleMethod;if(w){const{options:R,disabled:M}=w;M?Z.preventDefault():F&&R&&R.length&&(A.options=R,e.preventEvent(Z,"event.showMenu",A,()=>{if(!C||C(A)){Z.preventDefault(),e.updateZindex();const{scrollTop:_,scrollLeft:re,visibleHeight:ue,visibleWidth:ee}=ws();let V=Z.clientY+_,Q=Z.clientX+re;const J=()=>{v._currMenuParams=A,Object.assign(T,{visible:!0,list:R,selected:null,selectChild:null,showChild:!1,style:{zIndex:v.tZindex,top:`${V}px`,left:`${Q}px`}}),ce(()=>{const G=I.value.getRefMaps().refElem.value,K=G.clientHeight,Y=G.clientWidth,{boundingTop:se,boundingLeft:oe}=ps(G),ge=se+K-ue,xe=oe+Y-ee;ge>-10&&(T.style.top=`${Math.max(_+2,V-K-2)}px`),xe>-10&&(T.style.left=`${Math.max(re+2,Q-Y-2)}px`)})},{keyboard:pe,row:Ie,column:Pe}=A;pe&&Ie&&Pe?e.scrollToRow(Ie,Pe).then(()=>{const ke=e.getCellElement(Ie,Pe);if(ke){const{boundingTop:G,boundingLeft:K}=ps(ke);V=G+_+Math.floor(ke.offsetHeight/2),Q=K+re+Math.floor(ke.offsetWidth/2)}J()}):J()}else b.closeMenu()}))}e.closeFilter()};return b={closeMenu(){return Object.assign(a.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),ce()}},B={moveCtxMenu(Z,$,A,T,F,D){let w;const C=r.findIndexOf(D,R=>$[A]===R);if(T)F&&cn($.selected)?$.showChild=!0:($.showChild=!1,$.selectChild=null);else if(ss.hasKey(Z,rs.ARROW_UP)){for(let R=C-1;R>=0;R--)if(D[R].visible!==!1){w=D[R];break}$[A]=w||D[D.length-1]}else if(ss.hasKey(Z,rs.ARROW_DOWN)){for(let R=C+1;R<D.length;R++)if(D[R].visible!==!1){w=D[R];break}$[A]=w||D[0]}else $[A]&&(ss.hasKey(Z,rs.ENTER)||ss.hasKey(Z,rs.SPACEBAR))&&B.ctxMenuLinkEvent(Z,$[A])},handleOpenMenuEvent:j,handleGlobalContextmenuEvent(Z){const{mouseConfig:$,menuConfig:A}=n,{editStore:T,ctxMenuStore:F}=a,{visibleColumn:D}=v,w=E.value,C=I.value,R=H.value,M=d.value,_=m.value,{selected:re}=T,ue=["header","body","footer"];if(ft(A)){if(F.visible&&C&&vt(Z,C.getRefMaps().refElem.value).flag){Z.preventDefault();return}if(v._keyCtx){const ee="body",V={type:ee,$table:e,keyboard:!0,columns:D.slice(0),$event:Z};if($&&R.area){const Q=e.getActiveCellArea();if(Q&&Q.row&&Q.column){V.row=Q.row,V.column=Q.column,j(Z,ee,V);return}}else if($&&R.selected&&re.row&&re.column){V.row=re.row,V.column=re.column,j(Z,ee,V);return}}for(let ee=0;ee<ue.length;ee++){const V=ue[ee],Q=vt(Z,_,`vxe-${V}--column`,pe=>pe.parentNode.parentNode.parentNode.getAttribute("xid")===o),J={type:V,$table:e,columns:D.slice(0),$event:Z};if(Q.flag){const pe=Q.targetElem,Ie=e.getColumnNode(pe),Pe=Ie?Ie.item:null;let ke=`${V}-`;if(Pe&&Object.assign(J,{column:Pe,columnIndex:e.getColumnIndex(Pe),cell:pe}),V==="body"){const K=e.getRowNode(pe.parentNode),Y=K?K.item:null;ke="",Y&&(J.row=Y,J.rowIndex=e.getRowIndex(Y))}const G=`${ke}cell-menu`;j(Z,V,J),e.dispatchEvent(G,J,Z);return}else if(vt(Z,_,`vxe-table--${V}-wrapper`,pe=>pe.getAttribute("xid")===o).flag){M.trigger==="cell"?Z.preventDefault():j(Z,V,J);return}}}w&&!vt(Z,w.$el).flag&&e.closeFilter(),b.closeMenu()},ctxMenuMouseoverEvent(Z,$,A){const T=Z.currentTarget,{ctxMenuStore:F}=a;Z.preventDefault(),Z.stopPropagation(),F.selected=$,F.selectChild=A,A||(F.showChild=cn($),F.showChild&&ce(()=>{const D=T.nextElementSibling;if(D){const{boundingTop:w,boundingLeft:C,visibleHeight:R,visibleWidth:M}=ps(T),_=w+T.offsetHeight,re=C+T.offsetWidth;let ue="",ee="";re+D.offsetWidth>M-10&&(ue="auto",ee=`${T.offsetWidth}px`);let V="",Q="";_+D.offsetHeight>R-10&&(V="auto",Q="0"),D.style.left=ue,D.style.right=ee,D.style.top=V,D.style.bottom=Q}}))},ctxMenuMouseoutEvent(Z,$){const{ctxMenuStore:A}=a;$.children||(A.selected=null),A.selectChild=null},ctxMenuLinkEvent(Z,$){if(!$.disabled&&($.code||!$.children||!$.children.length)){const A=Jd.get($.code),T=Object.assign({},v._currMenuParams,{menu:$,$table:e,$grid:e.xegrid,$event:Z}),F=A?A.tableMenuMethod||A.menuMethod:null;F&&F(T,Z),e.dispatchEvent("menu-click",T,Z),b.closeMenu()}}},Object.assign(Object.assign({},b),B)},setupGrid(e){return e.extendTableMethods(tu)}});const{getConfig:ou,renderer:lu,hooks:nu,getI18n:ci}=te,su=["insert","insertAt","insertNextAt","insertChild","insertChildAt","insertChildNextAt","remove","removeCheckboxRow","removeRadioRow","removeCurrentRow","getRecordset","getInsertRecords","getRemoveRecords","getUpdateRecords","getEditRecord","getActiveRecord","getSelectedCell","clearEdit","clearActived","clearSelected","isEditByRow","isActiveByRow","setEditRow","setActiveRow","setEditCell","setActiveCell","setSelectCell"];nu.add("tableEditModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refElem:v}=e.getRefMaps(),{computeMouseOpts:m,computeEditOpts:E,computeCheckboxOpts:I,computeTreeOpts:H,computeValidOpts:u}=e.getComputeMaps();let d={},b={};const B=(w,C)=>{const{model:R,editRender:M}=C;M&&(R.value=io(w,C),R.update=!1)},j=(w,C)=>{const{model:R,editRender:M}=C;M&&R.update&&(al(w,C,R.value),R.update=!1,R.value=null)},Z=()=>{const w=v.value;if(w){const C=w.querySelector(".col--selected");C&&Ho(C,"col--selected")}};function $(){const{editStore:w,tableColumn:C}=n,R=E.value,{actived:M}=w,{row:_,column:re}=M;(_||re)&&(R.mode==="row"?C.forEach(ue=>j(_,ue)):j(_,re))}function A(w,C){const{tableFullTreeData:R,afterFullData:M,fullDataRowIdData:_,fullAllDataRowIdData:re}=a,ue=H.value,{rowField:ee,parentField:V,mapChildrenField:Q}=ue,J=ue.children||ue.childrenField,pe=C?"push":"unshift";w.forEach(Ie=>{const Pe=Ie[V],ke=Re(e,Ie),G=Pe?r.findTree(R,K=>Pe===K[ee],{children:Q}):null;if(G){const{item:K}=G,Y=re[Re(e,K)],se=Y?Y.level:0;let oe=K[J],ge=K[Q];r.isArray(oe)||(oe=K[J]=[]),r.isArray(ge)||(ge=K[J]=[]),oe[pe](Ie),ge[pe](Ie);const xe={row:Ie,rowid:ke,seq:-1,index:-1,_index:-1,$index:-1,items:oe,parent:K,level:se+1,height:0,oTop:0};_[ke]=xe,re[ke]=xe}else{M[pe](Ie),R[pe](Ie);const K={row:Ie,rowid:ke,seq:-1,index:-1,_index:-1,$index:-1,items:R,parent:null,level:0,height:0,oTop:0};_[ke]=K,re[ke]=K}})}const T=(w,C,R)=>{const{treeConfig:M}=o,{mergeList:_,editStore:re}=n,{tableFullTreeData:ue,afterFullData:ee,tableFullData:V,fullDataRowIdData:Q,fullAllDataRowIdData:J}=a,pe=H.value,{transform:Ie,rowField:Pe,mapChildrenField:ke}=pe,G=pe.children||pe.childrenField;r.isArray(w)||(w=[w]);const K=Uo(e.defineField(w.map(se=>Object.assign(M&&Ie?{[ke]:[],[G]:[]}:{},se))));if(r.eqNull(C))M&&Ie?A(K,!1):(K.forEach(se=>{const oe=Re(e,se),ge={row:se,rowid:oe,seq:-1,index:-1,_index:-1,$index:-1,items:ee,parent:null,level:0,height:0,oTop:0};Q[oe]=ge,J[oe]=ge,ee.unshift(se),V.unshift(se)}),_.forEach(se=>{const{row:oe}=se;oe>0&&(se.row=oe+K.length)}));else if(C===-1)M&&Ie?A(K,!0):(K.forEach(se=>{const oe=Re(e,se),ge={row:se,rowid:oe,seq:-1,index:-1,_index:-1,$index:-1,items:ee,parent:null,level:0,height:0,oTop:0};Q[oe]=ge,J[oe]=ge,ee.push(se),V.push(se)}),_.forEach(se=>{const{row:oe,rowspan:ge}=se;oe+ge>ee.length&&(se.rowspan=ge+K.length)}));else if(M&&Ie){const se=r.findTree(ue,oe=>C[Pe]===oe[Pe],{children:ke});if(se){const{parent:oe}=se,ge=oe?oe[ke]:ue,xe=J[Re(e,oe)],Ee=xe?xe.level:0;if(K.forEach((Ce,le)=>{const he=Re(e,Ce);oe&&(Ce[pe.parentField]=oe[Pe]);let U=se.index+le;R&&(U=U+1),ge.splice(U,0,Ce);const we={row:Ce,rowid:he,seq:-1,index:-1,_index:-1,$index:-1,items:ge,parent:oe,level:Ee+1,height:0,oTop:0};Q[he]=we,J[he]=we}),oe){const Ce=r.findTree(ue,le=>C[Pe]===le[Pe],{children:G});if(Ce){const le=Ce.items;let he=Ce.index;R&&(he=he+1),le.splice(he,0,...K)}}}else A(K,!0)}else{if(M)throw new Error(ci("vxe.error.noTree",["insert"]));let se=-1;if(r.isNumber(C)?C<ee.length&&(se=C):se=e.findRowIndexOf(ee,C),R&&(se=Math.min(ee.length,se+1)),se===-1)throw new Error(ci("vxe.error.unableInsert"));ee.splice(se,0,...K);const oe=e.findRowIndexOf(V,C);oe>-1?V.splice(oe+(R?1:0),0,...K):V.push(...K),_.forEach(ge=>{const{row:xe,rowspan:Ee}=ge;xe>se?ge.row=xe+K.length:xe+Ee>se&&(ge.rowspan=Ee+K.length)})}const{insertMaps:Y}=re;return K.forEach(se=>{const oe=Re(e,se);Y[oe]=se}),e.cacheRowMap(),e.updateScrollYStatus(),e.handleTableData(M&&Ie),M&&Ie||e.updateAfterDataIndex(),e.updateFooter(),e.checkSelectionStatus(),n.scrollYLoad&&e.updateScrollYSpace(),ce().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:K.length?K[K.length-1]:null,rows:K}))},F=(w,C,R,M)=>{const{treeConfig:_}=o,re=H.value,{transform:ue,rowField:ee,parentField:V}=re;return _&&ue?(r.isArray(w)||(w=[w]),T(w.map(Q=>Object.assign({},Q,{[V]:C[ee]})),R,M)):(zt("vxe.error.errProp",["tree-config.treeConfig=false","tree-config.treeConfig=true"]),Promise.resolve({row:null,rows:[]}))},D=(w,C)=>{const{mouseConfig:R}=o,{editStore:M}=n,{actived:_,focused:re}=M,{row:ue,column:ee}=_,V=u.value,Q=m.value;if(ue||ee){if(C&&Re(e,C)!==Re(e,ue))return ce();$(),_.args=null,_.row=null,_.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:ue,rowIndex:e.getRowIndex(ue),$rowIndex:e.getVMRowIndex(ue),column:ee,columnIndex:e.getColumnIndex(ee),$columnIndex:e.getVMColumnIndex(ee)},w||null)}return ce(()=>{if(R&&Q.area&&e.handleRecalculateCellAreas)return e.handleRecalculateCellAreas()}),V.autoClear&&(V.msgMode!=="full"||ou().cellVaildMode==="obsolete")&&e.clearValidate?e.clearValidate():(re.row=null,re.column=null,ce())};return d={insert(w){return T(w,null)},insertAt(w,C){return T(w,C)},insertNextAt(w,C){return T(w,C,!0)},insertChild(w,C){return F(w,C,null)},insertChildAt(w,C,R){return F(w,C,R)},insertChildNextAt(w,C,R){return F(w,C,R,!0)},remove(w){const{treeConfig:C}=o,{mergeList:R,editStore:M,selectCheckboxMaps:_}=n,{tableFullTreeData:re,afterFullData:ue,tableFullData:ee}=a,V=I.value,Q=H.value,{transform:J,mapChildrenField:pe}=Q,Ie=Q.children||Q.childrenField,{actived:Pe,removeMaps:ke}=M,G=Object.assign({},M.insertMaps),K=Object.assign({},n.pendingRowMaps),{checkField:Y}=V;let se=[];if(w?r.isArray(w)||(w=[w]):w=ee,w.forEach(oe=>{if(!e.isInsertByRow(oe)){const ge=Re(e,oe);ke[ge]=oe}}),!Y){const oe=Object.assign({},_);w.forEach(ge=>{const xe=Re(e,ge);oe[xe]&&delete oe[xe]}),n.selectCheckboxMaps=oe}return ee===w?(w=se=ee.slice(0),a.tableFullData=[],a.afterFullData=[],e.clearMergeCells()):C&&J?w.forEach(oe=>{const ge=Re(e,oe),xe=r.findTree(re,le=>ge===Re(e,le),{children:pe});if(xe){const le=xe.items.splice(xe.index,1);se.push(le[0])}const Ee=r.findTree(re,le=>ge===Re(e,le),{children:Ie});Ee&&Ee.items.splice(Ee.index,1);const Ce=e.findRowIndexOf(ue,oe);Ce>-1&&ue.splice(Ce,1)}):w.forEach(oe=>{const ge=e.findRowIndexOf(ee,oe);if(ge>-1){const Ee=ee.splice(ge,1);se.push(Ee[0])}const xe=e.findRowIndexOf(ue,oe);xe>-1&&(R.forEach(Ee=>{const{row:Ce,rowspan:le}=Ee;Ce>xe?Ee.row=Ce-1:Ce+le>xe&&(Ee.rowspan=le-1)}),ue.splice(xe,1))}),Pe.row&&e.findRowIndexOf(w,Pe.row)>-1&&d.clearEdit(),w.forEach(oe=>{const ge=Re(e,oe);G[ge]&&delete G[ge],K[ge]&&delete K[ge]}),M.insertMaps=G,n.pendingRowMaps=K,e.updateFooter(),e.cacheRowMap(),e.handleTableData(C&&J),C&&J||e.updateAfterDataIndex(),e.checkSelectionStatus(),n.scrollYLoad&&e.updateScrollYSpace(),ce().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:se.length?se[se.length-1]:null,rows:se}))},removeCheckboxRow(){return d.remove(e.getCheckboxRecords()).then(w=>(e.clearCheckboxRow(),w))},removeRadioRow(){const w=e.getRadioRecord();return d.remove(w||[]).then(C=>(e.clearRadioRow(),C))},removeCurrentRow(){const w=e.getCurrentRecord();return d.remove(w||[]).then(C=>(e.clearCurrentRow(),C))},getRecordset(){const w=d.getRemoveRecords(),C=e.getPendingRecords(),R=w.concat(C),M=d.getUpdateRecords().filter(_=>!R.some(re=>e.eqRow(re,_)));return{insertRecords:d.getInsertRecords(),removeRecords:w,updateRecords:M,pendingRecords:C}},getInsertRecords(){const{editStore:w}=n,{fullAllDataRowIdData:C}=a,{insertMaps:R}=w,M=[];return r.each(R,(_,re)=>{C[re]&&M.push(_)}),M},getRemoveRecords(){const{editStore:w}=n,{removeMaps:C}=w,R=[];return r.each(C,M=>{R.push(M)}),R},getUpdateRecords(){const{keepSource:w,treeConfig:C}=o,{tableFullData:R}=a,M=H.value;return w?($(),C?r.filterTree(R,_=>e.isUpdateByRow(_),M):R.filter(_=>e.isUpdateByRow(_))):[]},getActiveRecord(){return this.getEditRecord()},getEditRecord(){const{editStore:w}=n,{afterFullData:C}=a,R=v.value,{args:M,row:_}=w.actived;return M&&e.findRowIndexOf(C,_)>-1&&R.querySelectorAll(".vxe-body--column.col--active").length?Object.assign({},M):null},getSelectedCell(){const{editStore:w}=n,{args:C,column:R}=w.selected;return C&&R?Object.assign({},C):null},clearActived(w){return this.clearEdit(w)},clearEdit(w){return D(null,w)},clearSelected(){const{editStore:w}=n,{selected:C}=w;return C.row=null,C.column=null,Z(),ce()},isActiveByRow(w){return this.isEditByRow(w)},isEditByRow(w){const{editStore:C}=n;return C.actived.row===w},setActiveRow(w){return d.setEditRow(w)},setEditRow(w,C){const{visibleColumn:R}=a;let M=r.find(R,_=>ft(_.editRender));return C&&(M=r.isString(C)?e.getColumnByField(C):C),e.setEditCell(w,M)},setActiveCell(w,C){return d.setEditCell(w,C)},setEditCell(w,C){const{editConfig:R}=o,M=r.isString(C)?e.getColumnByField(C):C;return w&&M&&ft(R)&&ft(M.editRender)?e.scrollToRow(w,M).then(()=>{const _=e.getCellElement(w,M);return _&&(b.handleEdit({row:w,rowIndex:e.getRowIndex(w),column:M,columnIndex:e.getColumnIndex(M),cell:_,$table:e}),a._lastCallTime=Date.now()),ce()}):ce()},setSelectCell(w,C){const{tableData:R}=n,M=E.value,_=r.isString(C)?e.getColumnByField(C):C;if(w&&_&&M.trigger!=="manual"){const re=e.findRowIndexOf(R,w);if(re>-1&&_){const ue=e.getCellElement(w,_),ee={row:w,rowIndex:re,column:_,columnIndex:e.getColumnIndex(_),cell:ue};e.handleSelected(ee,{})}}return ce()}},b={handleEdit(w,C){const{editConfig:R,mouseConfig:M}=o,{editStore:_,tableColumn:re}=n,ue=E.value,{mode:ee}=ue,{actived:V,focused:Q}=_,{row:J,column:pe}=w,{editRender:Ie}=pe,Pe=w.cell||e.getCellElement(J,pe),ke=ue.beforeEditMethod||ue.activeMethod;if(w.cell=Pe,Pe&&ft(R)&&ft(Ie)&&!e.isPendingByRow(J)){if(V.row!==J||ee==="cell"&&V.column!==pe){let G="edit-disabled";if(!ke||ke(Object.assign(Object.assign({},w),{$table:e,$grid:e.xegrid}))){M&&(d.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),V.column&&D(C),G="edit-activated",pe.renderHeight=Pe.offsetHeight,V.args=w,V.row=J,V.column=pe,ee==="row"?re.forEach(Y=>B(J,Y)):B(J,pe);const K=ue.afterEditMethod;ce(()=>{b.handleFocus(w,C),K&&K(Object.assign(Object.assign({},w),{$table:e,$grid:e.xegrid}))})}e.dispatchEvent(G,{row:J,rowIndex:e.getRowIndex(J),$rowIndex:e.getVMRowIndex(J),column:pe,columnIndex:e.getColumnIndex(pe),$columnIndex:e.getVMColumnIndex(pe)},C),G==="edit-activated"&&e.dispatchEvent("edit-actived",{row:J,rowIndex:e.getRowIndex(J),$rowIndex:e.getVMRowIndex(J),column:pe,columnIndex:e.getColumnIndex(pe),$columnIndex:e.getVMColumnIndex(pe)},C)}else{const{column:G}=V;if(M&&(d.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),G!==pe){const{model:K}=G;K.update&&al(J,G,K.value),e.clearValidate&&e.clearValidate(J,pe)}pe.renderHeight=Pe.offsetHeight,V.args=w,V.column=pe,setTimeout(()=>{b.handleFocus(w,C)})}Q.column=null,Q.row=null,e.focus()}return ce()},handleActived(w,C){return b.handleEdit(w,C)},handleClearEdit:D,handleFocus(w){const{row:C,column:R,cell:M}=w,{editRender:_}=R,re=E.value;if(ft(_)){const ue=lu.get(_.name);let ee=_.autofocus||_.autoFocus,V=_.autoSelect||_.autoselect,Q;if(re.autoFocus&&(!ee&&ue&&(ee=ue.tableAutoFocus||ue.tableAutofocus||ue.autofocus),!V&&ue&&(V=ue.tableAutoSelect||ue.autoselect),r.isFunction(ee)?Q=ee(w):ee&&(ee===!0?Q=M.querySelector("input,textarea"):Q=M.querySelector(ee),Q&&Q.focus())),Q){if(V)Q.select();else if(dn.msie){const J=Q.createTextRange();J.collapse(!1),J.select()}}else re.autoPos&&(R.fixed||e.scrollToRow(C,R))}},handleSelected(w,C){const{mouseConfig:R}=o,{editStore:M}=n,_=m.value,re=E.value,{actived:ue,selected:ee}=M,{row:V,column:Q}=w,J=R&&_.selected;return J&&(ee.row!==V||ee.column!==Q)&&(ue.row!==V||re.mode==="cell"&&ue.column!==Q)&&(D(C),d.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea()),ee.args=w,ee.row=V,ee.column=Q,J&&b.addCellSelectedClass(),e.focus(),C&&e.dispatchEvent("cell-selected",w,C)),ce()},addCellSelectedClass(){const{editStore:w}=n,{selected:C}=w,{row:R,column:M}=C;if(Z(),R&&M){const _=e.getCellElement(R,M);_&&il(_,"col--selected")}}},Object.assign(Object.assign({},d),b)},setupGrid(e){return e.extendTableMethods(su)}});const ru='body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}';function iu(e,o){return new Blob([e],{type:`text/${o.type};charset=utf-8;`})}function au(e,o){const{style:n}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>',`<style>${ru}</style>`,n?`<style>${n}</style>`:"","</head>",`<body>${o}</body>`,"</html>"].join("")}const{getI18n:ol,hooks:cu,renderer:Gs}=te;let tn;const du="\uFEFF",Vl=`\r
`;function di(e){return e.field||["seq","checkbox","radio"].indexOf(e.type)>-1}const fa=e=>{const o=[];return e.forEach(n=>{n.childNodes&&n.childNodes.length?(o.push(n),o.push(...fa(n.childNodes))):o.push(n)}),o},uu=e=>{let o=1;const n=(m,E)=>{if(E&&(m._level=E._level+1,o<m._level&&(o=m._level)),m.childNodes&&m.childNodes.length){let I=0;m.childNodes.forEach(H=>{n(H,m),I+=H._colSpan}),m._colSpan=I}else m._colSpan=1};e.forEach(m=>{m._level=1,n(m)});const a=[];for(let m=0;m<o;m++)a.push([]);return fa(e).forEach(m=>{m.childNodes&&m.childNodes.length?m._rowSpan=1:m._rowSpan=o-m._level+1,a[m._level-1].push(m)}),a};function fu(e){return e===!0?"full":e||"default"}function on(e){return e==="TRUE"||e==="true"||e===!0}function is(e,o){const{footerFilterMethod:n}=e;return n?o.filter((a,v)=>n({items:a,$rowIndex:v})):o}function hu(e,o){if(o){if(e.type==="seq")return`	${o}`;switch(e.cellType){case"string":if(!isNaN(o))return`	${o}`;break;case"number":break;default:if(o.length>=12&&!isNaN(o))return`	${o}`;break}}return o}function ln(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function $o(e,o){return e.getElementsByTagName(o)}function ui(e){return`#${e}@${r.uniqueId()}`}function ha(e,o){return e.replace(/#\d+@\d+/g,n=>r.hasOwnProp(o,n)?o[n]:n)}function fi(e,o){return ha(e,o).replace(/^"+$/g,a=>'"'.repeat(Math.ceil(a.length/2)))}function pa(e,o,n){const a=o.split(Vl),v=[];let m=[];if(a.length){const E={},I=Date.now();a.forEach(H=>{if(H){const u={};H=H.replace(/("")|(\n)/g,(b,B)=>{const j=ui(I);return E[j]=B?'"':`
`,j}).replace(/"(.*?)"/g,(b,B)=>{const j=ui(I);return E[j]=ha(B,E),j});const d=H.split(n);m.length?(d.forEach((b,B)=>{B<m.length&&(u[m[B]]=fi(b.trim(),E))}),v.push(u)):m=d.map(b=>fi(b.trim(),E))}})}return{fields:m,rows:v}}function pu(e,o){return pa(e,o,",")}function gu(e,o){return pa(e,o,"	")}function mu(e,o){const a=new DOMParser().parseFromString(o,"text/html"),v=$o(a,"body"),m=[],E=[];if(v.length){const I=$o(v[0],"table");if(I.length){const H=$o(I[0],"thead");if(H.length){r.arrayEach($o(H[0],"tr"),d=>{r.arrayEach($o(d,"th"),b=>{E.push(b.textContent)})});const u=$o(I[0],"tbody");u.length&&r.arrayEach($o(u[0],"tr"),d=>{const b={};r.arrayEach($o(d,"td"),(B,j)=>{E[j]&&(b[E[j]]=B.textContent||"")}),m.push(b)})}}}return{fields:E,rows:m}}function bu(e,o){const a=new DOMParser().parseFromString(o,"application/xml"),v=$o(a,"Worksheet"),m=[],E=[];if(v.length){const I=$o(v[0],"Table");if(I.length){const H=$o(I[0],"Row");H.length&&(r.arrayEach($o(H[0],"Cell"),u=>{E.push(u.textContent)}),r.arrayEach(H,(u,d)=>{if(d){const b={},B=$o(u,"Cell");r.arrayEach(B,(j,Z)=>{E[Z]&&(b[E[Z]]=j.textContent)}),m.push(b)}}))}}return{fields:E,rows:m}}function hi(e){r.eachTree(e,o=>{delete o._level,delete o._colSpan,delete o._rowSpan,delete o._children,delete o.childNodes},{children:"children"})}function vu(e,o){const n=[];return e.forEach(a=>{const v=a.field;v&&n.push(v)}),o.some(a=>n.indexOf(a)>-1)}const xu=["exportData","importByFile","importData","saveFile","readFile","print","getPrintHtml","openImport","closeImport","openExport","closeExport","openPrint","closePrint"];cu.add("tableExportModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{computeTreeOpts:v,computePrintOpts:m,computeExportOpts:E,computeImportOpts:I,computeCustomOpts:H,computeSeqOpts:u,computeRadioOpts:d,computeCheckboxOpts:b,computeColumnOpts:B}=e.getComputeMaps(),j=xo("$xeGrid",null),Z=G=>{const K=v.value,Y=K.children||K.childrenField;return G[Y]&&G[Y].length},$=(G,K,Y,se,oe)=>{const xe=u.value.seqMethod||se.seqMethod;return xe?xe({row:K,rowIndex:e.getRowIndex(K),$rowIndex:Y,column:se,columnIndex:e.getColumnIndex(se),$columnIndex:oe}):G};function A(G,K){const Y=B.value,se=K.headerExportMethod||Y.headerExportMethod;return se?se({column:K,options:G,$table:e}):(G.original?K.field:K.getTitle())||""}const T=G=>r.isBoolean(G)?G?"TRUE":"FALSE":G,F=G=>rl(G)?"":`${G}`,D=(G,K,Y)=>{const{isAllExpand:se,mode:oe}=G,{treeConfig:ge}=o,xe=d.value,Ee=b.value,Ce=v.value,le=B.value;if(tn||(tn=document.createElement("div")),ge){const he=Ce.children||Ce.childrenField,U=[],we=new Map;return r.eachTree(Y,(be,ae,L,Te,me,Ne)=>{const Be=be._row||be,je=me&&me._row?me._row:me;if(se||!je||we.has(je)&&e.isTreeExpandByRow(je)){const $e=Z(Be),tt={_row:Be,_level:Ne.length-1,_hasChild:$e,_expand:$e&&e.isTreeExpandByRow(Be)};K.forEach((Se,He)=>{let Fe="";const ve=Se.editRender||Se.cellRender;let Me=Se.exportMethod||le.exportMethod;if(!Me&&ve&&ve.name){const Ve=Gs.get(ve.name);Ve&&(Me=Ve.tableExportMethod||Ve.exportMethod)}if(Me||(Me=le.exportMethod),Me)Fe=Me({$table:e,row:Be,column:Se,options:G});else switch(Se.type){case"seq":{const Ve=Te.map((Ye,Xe)=>Xe%2===0?Number(Ye)+1:".").join("");Fe=oe==="all"?Ve:$(Ve,Be,ae,Se,He);break}case"checkbox":Fe=T(e.isCheckedByCheckboxRow(Be)),tt._checkboxLabel=Ee.labelField?r.get(Be,Ee.labelField):"",tt._checkboxDisabled=Ee.checkMethod&&!Ee.checkMethod({row:Be});break;case"radio":Fe=T(e.isCheckedByRadioRow(Be)),tt._radioLabel=xe.labelField?r.get(Be,xe.labelField):"",tt._radioDisabled=xe.checkMethod&&!xe.checkMethod({row:Be});break;default:if(G.original)Fe=io(Be,Se);else if(Fe=e.getCellLabel(Be,Se),Se.type==="html")tn.innerHTML=Fe,Fe=tn.innerText.trim();else{const Ve=e.getCellElement(Be,Se);Ve&&(Fe=Ve.innerText.trim())}}tt[Se.id]=F(Fe)}),we.set(Be,1),U.push(Object.assign(tt,Be))}},{children:he}),U}return Y.map((he,U)=>{const we={_row:he};return K.forEach((be,ae)=>{let L="";const Te=be.editRender||be.cellRender;let me=be.exportMethod||le.exportMethod;if(!me&&Te&&Te.name){const Ne=Gs.get(Te.name);Ne&&(me=Ne.tableExportMethod||Ne.exportMethod)}if(me)L=me({$table:e,row:he,column:be,options:G});else switch(be.type){case"seq":{const Ne=U+1;L=oe==="all"?Ne:$(Ne,he,U,be,ae);break}case"checkbox":L=T(e.isCheckedByCheckboxRow(he)),we._checkboxLabel=Ee.labelField?r.get(he,Ee.labelField):"",we._checkboxDisabled=Ee.checkMethod&&!Ee.checkMethod({row:he});break;case"radio":L=T(e.isCheckedByRadioRow(he)),we._radioLabel=xe.labelField?r.get(he,xe.labelField):"",we._radioDisabled=xe.checkMethod&&!xe.checkMethod({row:he});break;default:if(G.original)L=io(he,be);else if(L=e.getCellLabel(he,be),be.type==="html")tn.innerHTML=L,L=tn.innerText.trim();else{const Ne=e.getCellElement(he,be);Ne&&(L=Ne.innerText.trim())}}we[be.id]=F(L)}),we})},w=G=>{const{columns:K,dataFilterMethod:Y}=G;let se=G.data;return Y&&(se=se.filter((oe,ge)=>Y({row:oe,$rowIndex:ge}))),D(G,K,se)},C=(G,K,Y)=>{const se=B.value,oe=Y.editRender||Y.cellRender;let ge=Y.footerExportMethod;if(!ge&&oe&&oe.name){const Ee=Gs.get(oe.name);Ee&&(ge=Ee.tableFooterExportMethod||Ee.footerExportMethod)}ge||(ge=se.footerExportMethod);const xe=e.getVTColumnIndex(Y);return ge?ge({$table:e,items:K,itemIndex:xe,row:K,_columnIndex:xe,column:Y,options:G}):r.isArray(K)?r.toValueString(K[xe]):r.get(K,Y.field)},R=(G,K,Y)=>{let se=du;if(G.isHeader&&(se+=K.map(oe=>ln(A(G,oe))).join(",")+Vl),Y.forEach(oe=>{se+=K.map(ge=>ln(hu(ge,oe[ge.id]))).join(",")+Vl}),G.isFooter){const{footerTableData:oe}=n;is(G,oe).forEach(xe=>{se+=K.map(Ee=>ln(C(G,xe,Ee))).join(",")+Vl})}return se},M=(G,K,Y)=>{let se="";if(G.isHeader&&(se+=K.map(oe=>ln(A(G,oe))).join("	")+Vl),Y.forEach(oe=>{se+=K.map(ge=>ln(oe[ge.id])).join("	")+Vl}),G.isFooter){const{footerTableData:oe}=n;is(G,oe).forEach(xe=>{se+=K.map(Ee=>ln(C(G,xe,Ee))).join("	")+Vl})}return se},_=(G,K,Y)=>{const se=G[K],oe=r.isUndefined(se)||r.isNull(se)?Y:se;let Ce=oe==="title"||(oe===!0||oe==="tooltip")||oe==="ellipsis";const{scrollXLoad:le,scrollYLoad:he}=n;return(le||he)&&!Ce&&(Ce=!0),Ce},re=(G,K,Y)=>{const{id:se,border:oe,treeConfig:ge,headerAlign:xe,align:Ee,footerAlign:Ce,showOverflow:le,showHeaderOverflow:he}=o,{isAllSelected:U,isIndeterminate:we,mergeList:be}=n,ae=v.value,{print:L,isHeader:Te,isFooter:me,isColgroup:Ne,isMerge:Be,colgroups:je,original:$e}=G,tt="check-all",He=[`<table class="${["vxe-table",`border--${fu(oe)}`,L?"is--print":"",Te?"is--header":""].filter(ve=>ve).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${K.map(ve=>`<col style="width:${ve.renderWidth}px">`).join("")}</colgroup>`];if(Te&&(He.push("<thead>"),Ne&&!$e?je.forEach(ve=>{He.push(`<tr>${ve.map(Me=>{const Ve=Me.headerAlign||Me.align||xe||Ee,Ye=_(Me,"showHeaderOverflow",he)?["col--ellipsis"]:[],Xe=A(G,Me);let Ge=0,fe=0;r.eachTree([Me],Ze=>{(!Ze.childNodes||!Me.childNodes.length)&&fe++,Ge+=Ze.renderWidth},{children:"childNodes"});const et=Ge-fe;return Ve&&Ye.push(`col--${Ve}`),Me.type==="checkbox"?`<th class="${Ye.join(" ")}" colspan="${Me._colSpan}" rowspan="${Me._rowSpan}"><div ${L?"":`style="width: ${et}px"`}><input type="checkbox" class="${tt}" ${U?"checked":""}><span>${Xe}</span></div></th>`:`<th class="${Ye.join(" ")}" colspan="${Me._colSpan}" rowspan="${Me._rowSpan}" title="${Xe}"><div ${L?"":`style="width: ${et}px"`}><span>${to(Xe,!0)}</span></div></th>`}).join("")}</tr>`)}):He.push(`<tr>${K.map(ve=>{const Me=ve.headerAlign||ve.align||xe||Ee,Ve=_(ve,"showHeaderOverflow",he)?["col--ellipsis"]:[],Ye=A(G,ve);return Me&&Ve.push(`col--${Me}`),ve.type==="checkbox"?`<th class="${Ve.join(" ")}"><div ${L?"":`style="width: ${ve.renderWidth}px"`}><input type="checkbox" class="${tt}" ${U?"checked":""}><span>${Ye}</span></div></th>`:`<th class="${Ve.join(" ")}" title="${Ye}"><div ${L?"":`style="width: ${ve.renderWidth}px"`}><span>${to(Ye,!0)}</span></div></th>`}).join("")}</tr>`),He.push("</thead>")),Y.length&&(He.push("<tbody>"),ge?Y.forEach(ve=>{He.push("<tr>"+K.map(Me=>{const Ve=Me.align||Ee,Ye=_(Me,"showOverflow",le)?["col--ellipsis"]:[],Xe=ve[Me.id];if(Ve&&Ye.push(`col--${Ve}`),Me.treeNode){let Ge="";return ve._hasChild&&(Ge=`<i class="${ve._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),Ye.push("vxe-table--tree-node"),Me.type==="radio"?`<td class="${Ye.join(" ")}" title="${Xe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ve._level*ae.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ge}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${se}" ${ve._radioDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._radioLabel}</span></div></div></div></td>`:Me.type==="checkbox"?`<td class="${Ye.join(" ")}" title="${Xe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ve._level*ae.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ge}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${ve._checkboxDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._checkboxLabel}</span></div></div></div></td>`:`<td class="${Ye.join(" ")}" title="${Xe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ve._level*ae.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ge}</div><div class="vxe-table--tree-cell">${Xe}</div></div></div></td>`}return Me.type==="radio"?`<td class="${Ye.join(" ")}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><input type="radio" name="radio_${se}" ${ve._radioDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._radioLabel}</span></div></td>`:Me.type==="checkbox"?`<td class="${Ye.join(" ")}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><input type="checkbox" ${ve._checkboxDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._checkboxLabel}</span></div></td>`:`<td class="${Ye.join(" ")}" title="${Xe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}>${to(Xe,!0)}</div></td>`}).join("")+"</tr>")}):Y.forEach(ve=>{He.push("<tr>"+K.map(Me=>{const Ve=Me.align||Ee,Ye=_(Me,"showOverflow",le)?["col--ellipsis"]:[],Xe=ve[Me.id];let Ge=1,fe=1;if(Be&&be.length){const et=e.getVTRowIndex(ve._row),Ze=e.getVTColumnIndex(Me),st=aa(be,et,Ze);if(st){const{rowspan:N,colspan:de}=st;if(!N||!de)return"";N>1&&(Ge=N),de>1&&(fe=de)}}return Ve&&Ye.push(`col--${Ve}`),Me.type==="radio"?`<td class="${Ye.join(" ")}" rowspan="${Ge}" colspan="${fe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><input type="radio" name="radio_${se}" ${ve._radioDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._radioLabel}</span></div></td>`:Me.type==="checkbox"?`<td class="${Ye.join(" ")}" rowspan="${Ge}" colspan="${fe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}><input type="checkbox" ${ve._checkboxDisabled?"disabled ":""}${on(Xe)?"checked":""}><span>${ve._checkboxLabel}</span></div></td>`:`<td class="${Ye.join(" ")}" rowspan="${Ge}" colspan="${fe}" title="${Xe}"><div ${L?"":`style="width: ${Me.renderWidth}px"`}>${to(Xe,!0)}</div></td>`}).join("")+"</tr>")}),He.push("</tbody>")),me){const{footerTableData:ve}=n,Me=is(G,ve);Me.length&&(He.push("<tfoot>"),Me.forEach(Ve=>{He.push(`<tr>${K.map(Ye=>{const Xe=Ye.footerAlign||Ye.align||Ce||Ee,Ge=_(Ye,"showOverflow",le)?["col--ellipsis"]:[],fe=C(G,Ve,Ye);return Xe&&Ge.push(`col--${Xe}`),`<td class="${Ge.join(" ")}" title="${fe}"><div ${L?"":`style="width: ${Ye.renderWidth}px"`}>${to(fe,!0)}</div></td>`}).join("")}</tr>`)}),He.push("</tfoot>"))}const Fe=!U&&we?`<script>(function(){var a=document.querySelector(".${tt}");if(a){a.indeterminate=true}})()<\/script>`:"";return He.push("</table>",Fe),L?He.join(""):au(G,He.join(""))},ue=(G,K,Y)=>{let se=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${G.sheetName}">`,"<Table>",K.map(oe=>`<Column ss:Width="${oe.renderWidth}"/>`).join("")].join("");if(G.isHeader&&(se+=`<Row>${K.map(oe=>`<Cell><Data ss:Type="String">${A(G,oe)}</Data></Cell>`).join("")}</Row>`),Y.forEach(oe=>{se+="<Row>"+K.map(ge=>`<Cell><Data ss:Type="String">${oe[ge.id]}</Data></Cell>`).join("")+"</Row>"}),G.isFooter){const{footerTableData:oe}=n;is(G,oe).forEach(xe=>{se+=`<Row>${K.map(Ee=>`<Cell><Data ss:Type="String">${C(G,xe,Ee)}</Data></Cell>`).join("")}</Row>`})}return`${se}</Table></Worksheet></Workbook>`},ee=(G,K,Y)=>{if(K.length)switch(G.type){case"csv":return R(G,K,Y);case"txt":return M(G,K,Y);case"html":return re(G,K,Y);case"xml":return ue(G,K,Y)}return""},V=(G,K)=>{const{filename:Y,type:se,download:oe}=G;if(!oe){const ge=iu(K,G);return Promise.resolve({type:se,content:K,blob:ge})}te.saveFile&&te.saveFile({filename:Y,type:se,content:K}).then(()=>{G.message!==!1&&te.modal&&te.modal.message({content:ol("vxe.table.expSuccess"),status:"success"})})},Q=G=>{const{remote:K,columns:Y,colgroups:se,exportMethod:oe,afterExportMethod:ge}=G;return new Promise(xe=>{if(K){const Ee={options:G,$table:e,$grid:j};xe(oe?oe(Ee):Ee)}else{const Ee=w(G);xe(e.preventEvent(null,"event.export",{options:G,columns:Y,colgroups:se,datas:Ee},()=>V(G,ee(G,Y,Ee))))}}).then(xe=>(hi(Y),G.print||ge&&ge({status:!0,options:G,$table:e,$grid:j}),Object.assign({status:!0},xe))).catch(()=>{hi(Y),G.print||ge&&ge({status:!1,options:G,$table:e,$grid:j});const xe={status:!1};return Promise.reject(xe)})},J=(G,K)=>{const{tableFullColumn:Y,_importResolve:se,_importReject:oe}=a;let ge={fields:[],rows:[]};switch(K.type){case"csv":ge=pu(Y,G);break;case"txt":ge=gu(Y,G);break;case"html":ge=mu(Y,G);break;case"xml":ge=bu(Y,G);break}const{fields:xe,rows:Ee}=ge;vu(Y,xe)?e.createData(Ee).then(le=>{let he;return(K.mode==="insert"||K.mode==="insertBottom")&&(he=e.insertAt(le,-1)),K.mode==="insertTop"?he=e.insert(le):he=e.reloadData(le),K.message!==!1&&te.modal&&te.modal.message({content:ol("vxe.table.impSuccess",[Ee.length]),status:"success"}),he.then(()=>{se&&se({status:!0})})}):K.message!==!1&&(te.modal&&te.modal.message({content:ol("vxe.error.impFields"),status:"error"}),oe&&oe({status:!1}))},pe=(G,K)=>{const{importMethod:Y,afterImportMethod:se}=K,{type:oe,filename:ge}=_i(G),xe=I.value;if(!Y&&!r.includes(r.keys(xe._typeMaps),oe)){K.message!==!1&&te.modal&&te.modal.message({content:ol("vxe.error.notType",[oe]),status:"error"});const Ce={status:!1};return Promise.reject(Ce)}return new Promise((Ce,le)=>{const he=we=>{Ce(we),a._importResolve=null,a._importReject=null},U=we=>{le(we),a._importResolve=null,a._importReject=null};if(a._importResolve=he,a._importReject=U,window.FileReader){const we=Object.assign({mode:"insertTop"},K,{type:oe,filename:ge});if(we.remote)Y?Promise.resolve(Y({file:G,options:we,$table:e})).then(()=>{he({status:!0})}).catch(()=>{he({status:!0})}):he({status:!0});else{const{tableFullColumn:be}=a;e.preventEvent(null,"event.import",{file:G,options:we,columns:be},()=>{const ae=new FileReader;ae.onerror=()=>{zt("vxe.error.notType",[oe]),U({status:!1})},ae.onload=L=>{J(L.target.result,we)},ae.readAsText(G,we.encoding||"UTF-8")})}}else he({status:!0})}).then(()=>{se&&se({status:!0,options:K,$table:e})}).catch(Ce=>(se&&se({status:!1,options:K,$table:e}),Promise.reject(Ce)))},Ie=(G,K)=>{const{treeConfig:Y,showHeader:se,showFooter:oe}=o,{initStore:ge,mergeList:xe,mergeFooterList:Ee,isGroup:Ce,footerTableData:le,exportStore:he,exportParams:U}=n,{collectColumn:we}=a,be=E.value,ae=Y,L=H.value,Te=e.getCheckboxRecords(),me=j?j.getComputeMaps().computeProxyOpts.value:{},Ne=!!le.length,Be=!!(xe.length||Ee.length),je=Object.assign({message:!0,isHeader:se,isFooter:oe,isColgroup:Ce,isMerge:Be,useStyle:!0,current:"current",modes:["current","selected"].concat(me.ajax&&me.ajax.queryAll?["all"]:[])},G),$e=je.types||r.keys(be._typeMaps),tt=je.modes||[],Se=L.checkMethod,He=we.slice(0),{columns:Fe}=je,ve=$e.map(fe=>({value:fe,label:ol(`vxe.export.types.${fe}`)})),Me=tt.map(fe=>fe&&fe.value?{value:fe.value,label:fe.label||fe.value}:{value:fe,label:ol(`vxe.export.modes.${fe}`)});r.eachTree(He,(fe,et,Ze,st,N)=>{(fe.children&&fe.children.length||di(fe))&&(fe.checked=Fe?Fe.some(ne=>{if(gs(ne))return fe.id===ne.id;if(r.isString(ne))return fe.field===ne;{const De=ne.id||ne.colId,Ae=ne.type,ze=ne.field;if(De)return fe.id===De;if(ze&&Ae)return fe.field===ze&&fe.type===Ae;if(ze)return fe.field===ze;if(Ae)return fe.type===Ae}return!1}):fe.visible,fe.halfChecked=!1,fe.disabled=N&&N.disabled||(Se?!Se({column:fe}):!1))}),Object.assign(he,{columns:He,typeList:ve,modeList:Me,hasFooter:Ne,hasMerge:Be,hasTree:ae,isPrint:K,hasColgroup:Ce,visible:!0}),Object.assign(U,{mode:Te.length?"selected":"current"},je);const{filename:Ve,sheetName:Ye,mode:Xe,type:Ge}=U;return Ve&&(r.isFunction(Ve)?U.filename=Ve({options:je,$table:e,$grid:j}):U.filename=`${Ve}`),Ye&&(r.isFunction(Ye)?U.sheetName=Ye({options:je,$table:e,$grid:j}):U.sheetName=`${Ye}`),Me.some(fe=>fe.value===Xe)||(U.mode=Me[0].value),ve.some(fe=>fe.value===Ge)||(U.type=ve[0].value),ge.export=!0,ce()},Pe=()=>te.modal?te.modal.close("VXE_EXPORT_MODAL"):Promise.resolve(),ke={exportData(G){const{treeConfig:K}=o,{isGroup:Y,tableGroupColumn:se}=n,{tableFullColumn:oe,afterFullData:ge}=a,xe=E.value,Ee=v.value,Ce=Object.assign({isHeader:!0,isFooter:!0,isColgroup:!0,download:!0,type:"csv",mode:"current"},xe,G),{filename:le,sheetName:he,type:U,mode:we,columns:be,original:ae,columnFilterMethod:L,beforeExportMethod:Te,includeFields:me,excludeFields:Ne}=Ce;let Be=[];const je=be&&be.length?be:null,$e=Object.assign({},Ce,{filename:"",sheetName:""});!je&&!L&&($e.columnFilterMethod=({column:Se})=>Ne&&r.includes(Ne,Se.field)?!1:me?!!r.includes(me,Se.field):ae?Se.field:di(Se)),je?($e._isCustomColumn=!0,Be=r.searchTree(r.mapTree(je,Se=>{let He;if(Se){if(gs(Se))He=Se;else if(r.isString(Se))He=e.getColumnByField(Se);else{const Fe=Se.id||Se.colId,ve=Se.type,Me=Se.field;Fe?He=e.getColumnById(Fe):Me&&ve?He=oe.find(Ve=>Ve.field===Me&&Ve.type===ve):Me?He=e.getColumnByField(Me):ve&&(He=oe.find(Ve=>Ve.type===ve))}return He||{}}},{children:"childNodes",mapChildren:"_children"}),(Se,He)=>gs(Se)&&(!L||L({column:Se,$columnIndex:He})),{children:"_children",mapChildren:"childNodes",original:!0})):Be=r.searchTree(Y?se:oe,(Se,He)=>Se.visible&&(!L||L({column:Se,$columnIndex:He})),{children:"children",mapChildren:"childNodes",original:!0});const tt=[];if(r.eachTree(Be,Se=>{Se.children&&Se.children.length||tt.push(Se)},{children:"childNodes"}),$e.columns=tt,$e.colgroups=uu(Be),le&&(r.isFunction(le)?$e.filename=le({options:Ce,$table:e,$grid:j}):$e.filename=`${le}`),$e.filename||($e.filename=ol($e.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[r.toDateString(Date.now(),"yyyyMMddHHmmss")])),he&&(r.isFunction(he)?$e.sheetName=he({options:Ce,$table:e,$grid:j}):$e.sheetName=`${he}`),$e.sheetName||($e.sheetName=document.title||""),!$e.exportMethod&&!r.includes(r.keys(xe._typeMaps),U)){zt("vxe.error.notType",[U]);const Se={status:!1};return Promise.reject(Se)}if($e.print||Te&&Te({options:$e,$table:e,$grid:j}),!$e.data)if($e.data=[],we==="selected"){const Se=e.getCheckboxRecords();["html","pdf"].indexOf(U)>-1&&K?Ce.data=r.searchTree(e.getTableData().fullData,He=>e.findRowIndexOf(Se,He)>-1,Object.assign({},Ee,{data:"_row"})):Ce.data=Se}else if(we==="all"){if(j&&!$e.remote){const Se=j.reactData,{computeProxyOpts:He}=j.getComputeMaps(),Fe=He.value,{sortData:ve}=Se,{beforeQueryAll:Me,afterQueryAll:Ve,ajax:Ye={}}=Fe,Xe=Fe.response||Fe.props||{},Ge=Ye.queryAll,fe=Ye.queryAllSuccess,et=Ye.queryAllError;if(Ge){const Ze={$table:e,$grid:j,sort:ve.length?ve[0]:{},sorts:ve,filters:Se.filterData,form:Se.formData,options:$e};return Promise.resolve((Me||Ge)(Ze)).then(st=>{const N=Xe.list;return $e.data=(N?r.isFunction(N)?N({data:st,$grid:j}):r.get(st,N):st)||[],Ve&&Ve(Ze),fe&&fe(Object.assign(Object.assign({},Ze),{response:st})),Q($e)}).catch(st=>{et&&et(Object.assign(Object.assign({},Ze),{response:st}))})}}}else we==="current"&&($e.data=ge);return Q($e)},importByFile(G,K){const Y=Object.assign({},K),{beforeImportMethod:se}=Y;return se&&se({options:Y,$table:e}),pe(G,Y)},importData(G){const K=I.value,Y=Object.assign({types:r.keys(K._typeMaps)},K,G),{beforeImportMethod:se,afterImportMethod:oe}=Y;return se&&se({options:Y,$table:e}),te.readFile(Y).catch(ge=>(oe&&oe({status:!1,options:Y,$table:e}),Promise.reject(ge))).then(ge=>{const{file:xe}=ge;return pe(xe,Y)})},saveFile(G){return te.saveFile(G)},readFile(G){return te.readFile(G)},print(G){const K=m.value,Y=Object.assign({original:!1},K,G,{type:"html",download:!1,remote:!1,print:!0}),{sheetName:se}=Y;let oe="";se&&(r.isFunction(se)?oe=se({options:Y,$table:e,$grid:j}):oe=`${se}`),oe||(oe=document.title||"");const ge=Y.beforePrintMethod,xe=Y.html||Y.content;return new Promise((Ee,Ce)=>{te.print?Ee(xe?te.print({title:oe,html:xe,customStyle:Y.style,beforeMethod:ge?({html:le})=>ge({html:le,content:le,options:Y,$table:e}):void 0}):ke.exportData(Y).then(({content:le})=>te.print({title:oe,html:le,customStyle:Y.style,beforeMethod:ge?({html:he})=>ge({html:he,content:he,options:Y,$table:e}):void 0}))):Ce({status:!1})})},getPrintHtml(G){const K=m.value,Y=Object.assign({original:!1},K,G,{type:"html",download:!1,remote:!1,print:!0});return e.exportData(Y).then(({content:se})=>({html:se}))},closeImport(){return te.modal?te.modal.close("VXE_IMPORT_MODAL"):Promise.resolve()},openImport(G){const{treeConfig:K,importConfig:Y}=o,{initStore:se,importStore:oe,importParams:ge}=n,xe=I.value,Ee=Object.assign({mode:"insertTop",message:!0,types:r.keys(xe._typeMaps),modes:["insertTop","covering"]},xe,G),Ce=Ee.types||[],le=Ee.modes||[];if(!!K){Ee.message&&te.modal&&te.modal.message({content:ol("vxe.error.treeNotImp"),status:"error"});return}Y||zt("vxe.error.reqProp",["import-config"]);const U=Ce.map(be=>({value:be,label:ol(`vxe.export.types.${be}`)})),we=le.map(be=>be&&be.value?{value:be.value,label:be.label||be.value}:{value:be,label:ol(`vxe.import.modes.${be}`)});Object.assign(oe,{file:null,type:"",filename:"",modeList:we,typeList:U,visible:!0}),Object.assign(ge,Ee),we.some(be=>be.value===ge.mode)||(ge.mode=we[0].value),se.import=!0},closeExport:Pe,openExport(G){const K=E.value,Y=Object.assign({message:!0,types:r.keys(K._typeMaps)},K,G);Ie(Y)},closePrint:Pe,openPrint(G){const K=m.value,Y=Object.assign({message:!0},K,G);Ie(Y,!0)}};return ke},setupGrid(e){return e.extendTableMethods(xu)}});const{hooks:Cu}=te;function wu(e,o){let n=0,a=0;const v=!dn.firefox&&Wl(e,"vxe-checkbox--label");if(v){const m=getComputedStyle(e);n-=r.toNumber(m.paddingTop),a-=r.toNumber(m.paddingLeft)}for(;e&&e!==o;)if(n+=e.offsetTop,a+=e.offsetLeft,e=e.offsetParent,v){const m=getComputedStyle(e);n-=r.toNumber(m.paddingTop),a-=r.toNumber(m.paddingLeft)}return{offsetTop:n,offsetLeft:a}}Cu.add("tableKeyboardModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refElem:v}=e.getRefMaps(),{computeEditOpts:m,computeCheckboxOpts:E,computeMouseOpts:I,computeTreeOpts:H}=e.getComputeMaps();function u(j,Z,$,A,T,F){let D=0,w=[],C=0;const R=F>0,{scrollYLoad:M}=n,{afterFullData:_,scrollYStore:re}=a;if(M){R?C=T+F:C=A.height-T+Math.abs(F);const ue=e.getVTRowIndex(Z.row);R?w=_.slice(ue,ue+Math.ceil(C/re.rowHeight)):w=_.slice(ue-Math.floor(C/re.rowHeight),ue+1)}else{R?C=j.clientY-A.y:C=A.y-j.clientY+A.height;const ue=R?"next":"previous";for(;$&&D<C;){const ee=e.getRowNode($);ee&&(w.push(ee.item),D+=$.offsetHeight,$=$[`${ue}ElementSibling`])}}return w}const d=(j,Z)=>{const{column:$,cell:A}=Z;if($.type==="checkbox"){const T=v.value,{elemStore:F}=a,D=j.clientX,w=j.clientY,C=So(F[`${$.fixed||"main"}-body-wrapper`]||F["main-body-wrapper"]);if(!C)return;const R=C.querySelector(".vxe-table--checkbox-range"),M=document.onmousemove,_=document.onmouseup,re=A.parentElement,ue=e.getCheckboxRecords();let ee=[];const V=1,Q=wu(j.target,C),J=Q.offsetTop+j.offsetY,pe=Q.offsetLeft+j.offsetX,Ie=C.scrollTop,Pe=re.offsetHeight,ke=re.getBoundingClientRect(),G=w-ke.y;let K=null,Y=!1,se=1;const oe=(Ce,le)=>{e.dispatchEvent(`checkbox-range-${Ce}`,{records:e.getCheckboxRecords(),reserves:e.getCheckboxReserveRecords()},le)},ge=Ce=>{const{clientX:le,clientY:he}=Ce,U=le-D,we=he-w+(C.scrollTop-Ie);let be=Math.abs(we),ae=Math.abs(U),L=J,Te=pe;we<V?(L+=we,L<V&&(L=V,be=J)):be=Math.min(be,C.scrollHeight-J-V),U<V?(Te+=U,ae>pe&&(Te=V,ae=pe)):ae=Math.min(ae,C.clientWidth-pe-V),R.style.height=`${be}px`,R.style.width=`${ae}px`,R.style.left=`${Te}px`,R.style.top=`${L}px`,R.style.display="block";const me=u(Ce,Z,re,ke,G,we<V?-be:be);be>10&&me.length!==ee.length&&(ee=me,Ce.ctrlKey?me.forEach(Ne=>{e.handleBatchSelectRows([Ne],ue.indexOf(Ne)===-1)}):(e.setAllCheckboxRow(!1),e.handleCheckedCheckboxRow(me,!0,!1)),oe("change",Ce))},xe=()=>{clearTimeout(K),K=null},Ee=Ce=>{xe(),K=setTimeout(()=>{if(K){const{scrollLeft:le,scrollTop:he,clientHeight:U,scrollHeight:we}=C,be=Math.ceil(se*50/Pe);Y?he+U<we?(e.scrollTo(le,he+be),Ee(Ce),ge(Ce)):xe():he?(e.scrollTo(le,he-be),Ee(Ce),ge(Ce)):xe()}},50)};il(T,"drag--range"),document.onmousemove=Ce=>{Ce.preventDefault(),Ce.stopPropagation();const{clientY:le}=Ce,{boundingTop:he}=ps(C);le<he?(Y=!1,se=he-le,K||Ee(Ce)):le>he+C.clientHeight?(Y=!0,se=le-he-C.clientHeight,K||Ee(Ce)):K&&xe(),ge(Ce)},document.onmouseup=Ce=>{xe(),Ho(T,"drag--range"),R.removeAttribute("style"),document.onmousemove=M,document.onmouseup=_,oe("end",Ce)},oe("start",j)}};return{moveTabSelected(j,Z,$){const{editConfig:A}=o,{afterFullData:T,visibleColumn:F}=a,D=m.value;let w,C,R;const M=Object.assign({},j),_=e.getVTRowIndex(M.row),re=e.getVTColumnIndex(M.column);$.preventDefault(),Z?re<=0?_>0&&(C=_-1,w=T[C],R=F.length-1):R=re-1:re>=F.length-1?_<T.length-1&&(C=_+1,w=T[C],R=0):R=re+1;const ue=F[R];ue&&(w?(M.rowIndex=C,M.row=w):M.rowIndex=_,M.columnIndex=R,M.column=ue,M.cell=e.getCellElement(M.row,M.column),A?(D.trigger==="click"||D.trigger==="dblclick")&&(D.mode==="row"?e.handleEdit(M,$):e.scrollToRow(M.row,M.column).then(()=>e.handleSelected(M,$))):e.scrollToRow(M.row,M.column).then(()=>e.handleSelected(M,$)))},moveCurrentRow(j,Z,$){const{treeConfig:A}=o,{currentRow:T}=n,{afterFullData:F}=a,D=H.value,w=D.children||D.childrenField;let C;if($.preventDefault(),T)if(A){const{index:R,items:M}=r.findTree(F,_=>_===T,{children:w});j&&R>0?C=M[R-1]:Z&&R<M.length-1&&(C=M[R+1])}else{const R=e.getVTRowIndex(T);j&&R>0?C=F[R-1]:Z&&R<F.length-1&&(C=F[R+1])}else C=F[0];if(C){const R={$table:e,row:C,rowIndex:e.getRowIndex(C),$rowIndex:e.getVMRowIndex(C)};e.scrollToRow(C).then(()=>e.triggerCurrentRowEvent($,R))}},moveSelected(j,Z,$,A,T,F){const{afterFullData:D,visibleColumn:w}=a,C=Object.assign({},j),R=e.getVTRowIndex(C.row),M=e.getVTColumnIndex(C.column);F.preventDefault(),$&&R>0?(C.rowIndex=R-1,C.row=D[C.rowIndex]):T&&R<D.length-1?(C.rowIndex=R+1,C.row=D[C.rowIndex]):Z&&M?(C.columnIndex=M-1,C.column=w[C.columnIndex]):A&&M<w.length-1&&(C.columnIndex=M+1,C.column=w[C.columnIndex]),e.scrollToRow(C.row,C.column).then(()=>{C.cell=e.getCellElement(C.row,C.column),e.handleSelected(C,F)})},handleCellMousedownEvent:(j,Z)=>{const{editConfig:$,checkboxConfig:A,mouseConfig:T}=o,F=E.value,D=I.value,w=m.value;if(T&&D.area&&e.handleMousedownCellAreaEvent)return e.handleMousedownCellAreaEvent(j,Z);A&&F.range&&d(j,Z),T&&D.selected&&(!$||w.mode==="cell")&&e.handleSelected(Z,j)}}}});const{getConfig:Eu,validators:yu,hooks:Ru}=te;class Ln{constructor(o){Object.assign(this,{$options:o,required:o.required,min:o.min,max:o.max,type:o.type,pattern:o.pattern,validator:o.validator,trigger:o.trigger,maxWidth:o.maxWidth})}get content(){return cl(this.$options.content||this.$options.message)}get message(){return this.content}}const Su=["fullValidate","validate","fullValidateField","validateField","clearValidate"];Ru.add("tableValidatorModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refValidTooltip:v}=e.getRefMaps(),{computeValidOpts:m,computeTreeOpts:E,computeEditOpts:I}=e.getComputeMaps();let H={},u={},d;const b=$=>new Promise(A=>{m.value.autoPos===!1?(e.dispatchEvent("valid-error",$,null),A()):e.handleEdit($,{type:"valid-error",trigger:"call"}).then(()=>{A(u.showValidTooltip($))})}),B=$=>{if(m.value.msgMode==="single"){const T=Object.keys($),F={};if(T.length){const D=T[0];F[D]=$[D]}return F}return $},j=($,A,T,F)=>{const D={},{editRules:w,treeConfig:C}=o,{afterFullData:R}=a,M=E.value,_=M.children||M.childrenField,re=m.value;let ue;$===!0?ue=R:$&&(r.isFunction($)?T=$:ue=r.isArray($)?$:[$]),ue||(e.getInsertRecords?ue=e.getInsertRecords().concat(e.getUpdateRecords()):ue=[]);const ee=[];a._lastCallTime=Date.now(),d=!1,H.clearValidate();const V={};if(w){const Q=A&&A.length?A:e.getColumns(),J=pe=>{if(F||!d){const Ie=[];Q.forEach(Pe=>{const ke=r.isString(Pe)?Pe:Pe.field;(F||!d)&&r.has(w,ke)&&Ie.push(u.validCellRules("all",pe,Pe).catch(({rule:G,rules:K})=>{const Y={rule:G,rules:K,rowIndex:e.getRowIndex(pe),row:pe,columnIndex:e.getColumnIndex(Pe),column:Pe,field:ke,$table:e};if(D[ke]||(D[ke]=[]),V[`${Re(e,pe)}:${Pe.id}`]={column:Pe,row:pe,rule:G,content:G.content},D[ke].push(Y),!F)return d=!0,Promise.reject(Y)}))}),ee.push(Promise.all(Ie))}};return C?r.eachTree(ue,J,{children:_}):ue.forEach(J),Promise.all(ee).then(()=>{const pe=Object.keys(D);return n.validErrorMaps=B(V),ce().then(()=>{if(pe.length)return Promise.reject(D[pe[0]][0]);T&&T()})}).catch(pe=>new Promise((Ie,Pe)=>{const ke=()=>{ce(()=>{T?(T(D),Ie()):Eu().validToReject==="obsolete"?Pe(D):Ie(D)})},G=()=>{pe.cell=e.getCellElement(pe.row,pe.column),pd(pe.cell),b(pe).then(ke)};if(re.autoPos===!1)ke();else{const K=pe.row,Y=pe.column;e.scrollToRow(K,Y).then(G)}}))}else n.validErrorMaps={};return ce().then(()=>{T&&T()})};H={fullValidate($,A){return j($,null,A,!0)},validate($,A){return j($,null,A)},fullValidateField($,A){const T=(r.isArray(A)?A:A?[A]:[]).map(F=>Yt(e,F));return T.length?j($,T,null,!0):ce()},validateField($,A){const T=(r.isArray(A)?A:A?[A]:[]).map(F=>Yt(e,F));return T.length?j($,T,null):ce()},clearValidate($,A){const{validErrorMaps:T}=n,F=v.value,D=m.value,w=r.isArray($)?$:$?[$]:[],C=(r.isArray(A)?A:A?[A]:[]).map(M=>Yt(e,M));let R={};if(F&&F.reactData.visible&&F.close(),D.msgMode==="single")return n.validErrorMaps={},ce();if(w.length&&C.length)R=Object.assign({},T),w.forEach(M=>{C.forEach(_=>{const re=`${Re(e,M)}:${_.id}`;R[re]&&delete R[re]})});else if(w.length){const M=w.map(_=>`${Re(e,_)}`);r.each(T,(_,re)=>{M.indexOf(re.split(":")[0])>-1&&(R[re]=_)})}else if(C.length){const M=C.map(_=>`${_.id}`);r.each(T,(_,re)=>{M.indexOf(re.split(":")[1])>-1&&(R[re]=_)})}return n.validErrorMaps=R,ce()}};const Z=($,A)=>{const{type:T,min:F,max:D,pattern:w}=$,C=T==="number",R=C?r.toNumber(A):r.getSize(A);return!!(C&&isNaN(A)||!r.eqNull(F)&&R<r.toNumber(F)||!r.eqNull(D)&&R>r.toNumber(D)||w&&!(r.isRegExp(w)?w:new RegExp(w)).test(A))};return u={validCellRules($,A,T,F){const{editRules:D}=o,{field:w}=T,C=[],R=[];if(w&&D){const M=r.get(D,w);if(M){const _=r.isUndefined(F)?r.get(A,w):F;M.forEach(re=>{const{type:ue,trigger:ee,required:V,validator:Q}=re;if($==="all"||!ee||$===ee)if(Q){const J={cellValue:_,rule:re,rules:M,row:A,rowIndex:e.getRowIndex(A),column:T,columnIndex:e.getColumnIndex(T),field:T.field,$table:e,$grid:e.xegrid};let pe;if(r.isString(Q)){const Ie=yu.get(Q);if(Ie){const Pe=Ie.tableCellValidatorMethod||Ie.cellValidatorMethod;Pe&&(pe=Pe(J))}}else pe=Q(J);pe&&(r.isError(pe)?(d=!0,C.push(new Ln({type:"custom",trigger:ee,content:pe.message,rule:new Ln(re)}))):pe.catch&&R.push(pe.catch(Ie=>{d=!0,C.push(new Ln({type:"custom",trigger:ee,content:Ie&&Ie.message?Ie.message:re.content||re.message,rule:new Ln(re)}))})))}else{const J=ue==="array",pe=r.isArray(_);let Ie=!0;J||pe?Ie=!pe||!_.length:r.isString(_)?Ie=rl(_.trim()):Ie=rl(_),(V?Ie||Z(re,_):!Ie&&Z(re,_))&&(d=!0,C.push(new Ln(re)))}})}}return Promise.all(R).then(()=>{if(C.length){const M={rules:C,rule:C[0]};return Promise.reject(M)}})},hasCellRules($,A,T){const{editRules:F}=o,{field:D}=T;if(D&&F){const w=r.get(F,D);return w&&!!r.find(w,C=>$==="all"||!C.trigger||$===C.trigger)}return!1},triggerValidate($){const{editConfig:A,editRules:T}=o,{editStore:F}=n,{actived:D}=F,w=I.value,C=m.value;if(T&&C.msgMode==="single"&&(n.validErrorMaps={}),A&&T&&D.row){const{row:R,column:M,cell:_}=D.args;if(u.hasCellRules($,R,M))return u.validCellRules($,R,M).then(()=>{w.mode==="row"&&H.clearValidate(R,M)}).catch(({rule:re})=>{if(!re.trigger||$===re.trigger){const ue={rule:re,row:R,column:M,cell:_};return u.showValidTooltip(ue),Promise.reject(ue)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip($){const{height:A}=o,{tableData:T,validStore:F,validErrorMaps:D}=n,{rule:w,row:C,column:R,cell:M}=$,_=m.value,re=v.value,ue=w.content;return F.visible=!0,_.msgMode==="single"?n.validErrorMaps={[`${Re(e,C)}:${R.id}`]:{column:R,row:C,rule:w,content:ue}}:n.validErrorMaps=Object.assign({},D,{[`${Re(e,C)}:${R.id}`]:{column:R,row:C,rule:w,content:ue}}),e.dispatchEvent("valid-error",$,null),re&&re&&(_.message==="tooltip"||_.message==="default"&&!A&&T.length<2)?re.open(M,ue):ce()}},Object.assign(Object.assign({},H),u)},setupGrid(e){return e.extendTableMethods(Su)}});const Ou=["openCustom","closeCustom","saveCustom","cancelCustom","resetCustom","toggleCustomAllCheckbox","setCustomAllCheckbox"];te.hooks.add("tableCustomModule",{setupTable(e){const{reactData:o,internalData:n}=e,{computeCustomOpts:a}=e.getComputeMaps(),{refElem:v}=e.getRefMaps(),m=e.xegrid,E=()=>{const{customStore:T}=o,F=v.value;let D=0;F&&(D=F.clientHeight-28),T.maxHeight=Math.max(88,D)},I=()=>{const{initStore:T,customStore:F}=o;return F.visible=!0,T.custom=!0,H(),Z(),E(),ce().then(()=>E())},H=()=>{const{customStore:T}=o,{collectColumn:F}=n;if(T.visible){const D={},w={},C={};r.eachTree(F,R=>{const M=R.getKey();R.renderFixed=R.fixed,R.renderVisible=R.visible,R.renderResizeWidth=R.renderWidth,D[M]=R.renderSortNumber,w[M]=R.fixed,C[M]=R.visible}),T.oldSortMaps=D,T.oldFixedMaps=w,T.oldVisibleMaps=C,o.customColumnList=F.slice(0)}},u=()=>{const{customStore:T}=o,F=a.value;return T.visible&&(T.visible=!1,F.immediate||e.handleCustom()),ce()},d=()=>{const{customColumnList:T}=o,F=a.value,{allowVisible:D,allowSort:w,allowFixed:C,allowResizable:R}=F;return r.eachTree(T,(M,_,re,ue,ee)=>{if(ee)M.fixed=ee.fixed;else{if(w){const V=_+1;M.renderSortNumber=V}C&&(M.fixed=M.renderFixed)}R&&M.renderVisible&&(!M.children||M.children.length)&&M.renderResizeWidth!==M.renderWidth&&(M.resizeWidth=M.renderResizeWidth,M.renderWidth=M.renderResizeWidth),D&&(M.visible=M.renderVisible)}),o.isCustomStatus=!0,o.isDragColMove=!0,setTimeout(()=>{o.isDragColMove=!1},1e3),e.saveCustomStore("confirm")},b=()=>{const{customColumnList:T,customStore:F}=o,{oldSortMaps:D,oldFixedMaps:w,oldVisibleMaps:C}=F,R=a.value,{allowVisible:M,allowSort:_,allowFixed:re,allowResizable:ue}=R;return r.eachTree(T,ee=>{const V=ee.getKey(),Q=!!C[V],J=w[V]||"";M&&(ee.renderVisible=Q,ee.visible=Q),re&&(ee.renderFixed=J,ee.fixed=J),_&&(ee.renderSortNumber=D[V]||0),ue&&(ee.renderResizeWidth=ee.renderWidth)},{children:"children"}),ce()},B=T=>{const{customStore:F}=o,{customColumnList:D}=o,w=a.value,{checkMethod:C,visibleMethod:R}=w,M=!!T;return w.immediate?(r.eachTree(D,_=>{R&&!R({column:_})||C&&!C({column:_})||(_.visible=M,_.renderVisible=M,_.halfVisible=!1)}),F.isAll=M,o.isCustomStatus=!0,e.handleCustom(),e.saveCustomStore("update:visible")):(r.eachTree(D,_=>{R&&!R({column:_})||C&&!C({column:_})||(_.renderVisible=M,_.halfVisible=!1)}),F.isAll=M),e.checkCustomStatus(),ce()},j={openCustom:I,closeCustom:u,saveCustom:d,cancelCustom:b,resetCustom(T){const{collectColumn:F}=n,D=a.value,{checkMethod:w}=D,C=Object.assign({visible:!0,resizable:T===!0,fixed:T===!0,sort:T===!0},T);return r.eachTree(F,R=>{C.resizable&&(R.resizeWidth=0),C.fixed&&(R.fixed=R.defaultFixed),C.sort&&(R.renderSortNumber=R.sortNumber),(!w||w({column:R}))&&(R.visible=R.defaultVisible),R.renderResizeWidth=R.renderWidth}),o.isCustomStatus=!1,e.saveCustomStore("reset"),e.handleCustom()},toggleCustomAllCheckbox(){const{customStore:T}=o,F=!T.isAll;return B(F)},setCustomAllCheckbox:B},Z=()=>{const{customStore:T}=o,{collectColumn:F}=n,D=a.value,{checkMethod:w}=D;T.isAll=F.every(C=>(w?!w({column:C}):!1)||C.renderVisible),T.isIndeterminate=!T.isAll&&F.some(C=>(!w||w({column:C}))&&(C.renderVisible||C.halfVisible))},$=(T,F)=>{(m||e).dispatchEvent("custom",{type:T},F)},A={checkCustomStatus:Z,emitCustomEvent:$,triggerCustomEvent(T){const{customStore:F}=e.reactData;F.visible?(u(),$("close",T)):(F.btnEl=T.target,I(),$("open",T))},customOpenEvent(T){const{customStore:F}=o;F.visible||(F.activeBtn=!0,F.btnEl=T.target,e.openCustom(),e.emitCustomEvent("open",T))},customCloseEvent(T){const{customStore:F}=o;F.visible&&(F.activeBtn=!1,e.closeCustom(),e.emitCustomEvent("close",T))},handleUpdateCustomColumn:H};return Object.assign(Object.assign({},j),A)},setupGrid(e){return e.extendTableMethods(Ou)}});const{getConfig:as,renderer:Tu,getI18n:cr}=te,ga="modelValue",ma={};function ll(e,o,n){return r.eqNull(e)?r.eqNull(o)?n:o:e}function Mu(e,o){return e&&o.valueFormat?r.toStringDate(e,o.valueFormat):e}function Du(e,o,n){const{dateConfig:a={}}=o;return r.toDateString(Mu(e,o),a.labelFormat||n)}function Zs(e,o){return Du(e,o,cr(`vxe.input.date.labelFormat.${o.type||"date"}`))}function Iu(e){return`vxe-${e.replace("$","")}`}function Bo({name:e}){return ur(e)}function Es({name:e}){return ur(Iu(e))}function ba(e,o,n){const{$panel:a}=e;a.changeOption({},o,n)}function ys(e){let{name:o,attrs:n}=e;return o==="input"&&(n=Object.assign({type:"text"},n)),n}function va(e){const{name:o,immediate:n,props:a}=e;if(!n){if(o==="VxeInput"||o==="$input"){const{type:v}=a||{};return!(!v||v==="text"||v==="number"||v==="integer"||v==="float")}return!(o==="input"||o==="textarea"||o==="$textarea")}return n}function Yo(e,o,n,a){return r.assign({immediate:va(e)},ma,a,e.props,{[ga]:n})}function bs(e,o,n,a){return r.assign({},ma,a,e.props,{[ga]:n})}function Rs(e,o){return o.$type==="cell"||va(e)}function nl(e,o,n){const{placeholder:a}=e;return[f("span",{class:"vxe-cell--label"},a&&Ni(n)?[f("span",{class:"vxe-cell--placeholder"},to(cl(a),1))]:to(n,1))]}function xa(e,o,n,a){const{events:v}=e,m=ca(e),E=da(e),I=E===m,H={};return v&&r.objectEach(v,(u,d)=>{H[hn(d)]=function(...b){u(o,...b)}}),n&&(H[hn(m)]=function(u){n(u),I&&a&&a(u),v&&v[m]&&v[m](o,u)}),!I&&a&&(H[hn(E)]=function(...u){a(...u),v&&v[E]&&v[E](o,...u)}),H}function jn(e,o,n,a){const{events:v}=e,m=ca(e),E=da(e),I={};return r.objectEach(v,(H,u)=>{I[hn(u)]=function(...d){H(o,...d)}}),n&&(I[hn(m)]=function(H){n(H),v&&v[m]&&v[m](o,H)}),a&&(I[hn(E)]=function(...H){a(...H),v&&v[E]&&v[E](o,...H)}),I}function Ko(e,o){const{$table:n,row:a,column:v}=o,{name:m}=e,{model:E}=v,I=Rs(e,o);return jn(e,o,H=>{E.update=!0,E.value=H,I&&al(a,v,H)},H=>{if(!I&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(m)){const u=H.value;E.update=!0,E.value=u,n.updateStatus(o,u)}else n.updateStatus(o)})}function vs(e,o,n){return jn(e,o,a=>{n.data=a},()=>{ba(o,!r.eqNull(n.data),n)})}function Ca(e,o){const{$table:n,row:a,column:v}=o,{model:m}=v;return xa(e,o,E=>{const I=E.target.value;Rs(e,o)?al(a,v,I):(m.update=!0,m.value=I)},E=>{const I=E.target.value;n.updateStatus(o,I)})}function wa(e,o,n){return xa(e,o,a=>{n.data=a.target.value},()=>{ba(o,!r.eqNull(n.data),n)})}function Qs(e,o){const{row:n,column:a}=o,{name:v}=e,m=Rs(e,o)?io(n,a):a.model.value;return[f(v,Object.assign(Object.assign(Object.assign({class:`vxe-default-${v}`},ys(e)),{value:m}),Ca(e,o)))]}function Fu(e,o){return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,null)),jn(e,o)))]}function Mo(e,o){const{row:n,column:a}=o,v=io(n,a);return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,v)),Ko(e,o)))]}function pi(e,o){const{options:n}=e,{row:a,column:v}=o,m=io(a,v);return[f(Bo(e),Object.assign(Object.assign({options:n},Yo(e,o,m)),Ko(e,o)))]}function cs(e,o){const{row:n,column:a}=o,v=io(n,a);return[f(Es(e),Object.assign(Object.assign({},Yo(e,o,v)),Ko(e,o)))]}function Ea(e,o){return[f(ur("vxe-button"),Object.assign(Object.assign({},Yo(e,o,null)),jn(e,o)))]}function ku(e,o){return e.children.map(n=>Ea(n,o)[0])}function ya(e,o,n){const{optionGroups:a,optionGroupProps:v={}}=e,m=v.options||"options",E=v.label||"label";return a.map((I,H)=>f("optgroup",{key:H,label:I[E]},n(I[m],e,o)))}function xs(e,o,n){const{optionProps:a={}}=o,{row:v,column:m}=n,E=a.label||"label",I=a.value||"value",H=a.disabled||"disabled",u=Rs(o,n)?io(v,m):m.model.value;return e.map((d,b)=>f("option",{key:b,value:d[I],disabled:d[H],selected:d[I]==u},d[E]))}function Au(e,o){const{column:n}=o,{name:a}=e,v=ys(e);return n.filters.map((m,E)=>f(a,Object.assign(Object.assign(Object.assign({key:E,class:`vxe-default-${a}`},v),{value:m.data}),wa(e,o,m))))}function Js(e,o){const{column:n}=o;return n.filters.map((a,v)=>{const m=a.data;return f(Bo(e),Object.assign(Object.assign({key:v},bs(e,e,m)),vs(e,o,a)))})}function Lu(e,o){const{column:n}=o;return n.filters.map((a,v)=>{const m=a.data;return f(Es(e),Object.assign(Object.assign({key:v},bs(e,e,m)),vs(e,o,a)))})}function ds({option:e,row:o,column:n}){const{data:a}=e;return r.get(o,n.field)==a}function us({option:e,row:o,column:n}){const{data:a}=e,v=r.get(o,n.field);return r.toValueString(v).indexOf(a)>-1}function gi(e,o){return[f("select",Object.assign(Object.assign({class:"vxe-default-select"},ys(e)),Ca(e,o)),e.optionGroups?ya(e,o,xs):xs(e.options,e,o))]}function mi(e,o){const{row:n,column:a}=o,{options:v,optionProps:m,optionGroups:E,optionGroupProps:I}=e,H=io(n,a);return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,H,{options:v,optionProps:m,optionGroups:E,optionGroupProps:I})),Ko(e,o)))]}function bi(e,o){const{row:n,column:a}=o,{options:v,optionProps:m}=e,E=io(n,a);return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,E,{options:v,optionProps:m})),Ko(e,o)))]}function vi(e,o){const{row:n,column:a}=o,{options:v,optionProps:m,optionGroups:E,optionGroupProps:I}=e,H=io(n,a);return[f(Es(e),Object.assign(Object.assign({},Yo(e,o,H,{options:v,optionProps:m,optionGroups:E,optionGroupProps:I})),Ko(e,o)))]}function ms(e,{row:o,column:n}){const{options:a,optionGroups:v,optionProps:m={},optionGroupProps:E={}}=e,I=r.get(o,n.field);let H;const u=m.label||"label",d=m.value||"value";return I!=null?r.map(r.isArray(I)?I:[I],v?b=>{const B=E.options||"options";for(let j=0;j<v.length&&(H=r.find(v[j][B],Z=>Z[d]==b),!H);j++);return H?H[u]:b}:b=>(H=r.find(a,B=>B[d]==b),H?H[u]:b)).join(", "):""}function er(e){const{row:o,column:n,options:a}=e;return a.original?io(o,n):ms(n.editRender||n.cellRender,e)}function dr(e,{row:o,column:n}){const{options:a,optionProps:v={}}=e,m=r.get(o,n.field),E=v.label||"label",I=v.value||"value",H=v.children||"children";if(m!=null){const u={};return r.eachTree(a,d=>{u[r.get(d,I)]=d},{children:H}),r.map(r.isArray(m)?m:[m],d=>{const b=u[d];return b&&r.get(b,E)}).join(", ")}return""}function xi(e){const{row:o,column:n,options:a}=e;return a.original?io(o,n):dr(n.editRender||n.cellRender,e)}Tu.mixin({input:{tableAutoFocus:"input",renderTableEdit:Qs,renderTableDefault:Qs,renderTableFilter:Au,tableFilterDefaultMethod:us},textarea:{tableAutoFocus:"textarea",renderTableEdit:Qs},select:{renderTableEdit:gi,renderTableDefault:gi,renderTableCell(e,o){return nl(e,o,ms(e,o))},renderTableFilter(e,o){const{column:n}=o;return n.filters.map((a,v)=>f("select",Object.assign(Object.assign({key:v,class:"vxe-default-select"},ys(e)),wa(e,o,a)),e.optionGroups?ya(e,o,xs):xs(e.options,e,o)))},tableFilterDefaultMethod:ds,tableExportMethod:er},VxeInput:{tableAutoFocus:"input",renderTableEdit:Mo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:v}=o,m=as().input||{},E=n.digits||m.digits||2;let I=r.get(a,v.field);if(I)switch(n.type){case"date":case"week":case"month":case"quarter":case"year":I=Zs(I,n);break;case"float":I=r.toFixed(r.floor(I,E),E);break}return nl(e,o,I)},renderTableDefault:Mo,renderTableFilter:Js,tableFilterDefaultMethod:us},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Mo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:v}=o,{type:m}=n;let E=r.get(a,v.field);if(E){const I=as().numberInput||{};if(m==="float"){const H=ll(n.autoFill,I.autoFill,!0),u=ll(n.digits,I.digits,1);E=r.toFixed(r.floor(E,u),u),H||(E=r.toNumber(E))}else if(m==="amount"){const H=ll(n.autoFill,I.autoFill,!0),u=ll(n.digits,I.digits,2),d=ll(n.showCurrency,I.showCurrency,!1);if(E=r.commafy(r.toNumber(E),{digits:u}),!H){const[b,B]=E.split(".");if(B){const j=B.replace(/0+$/,"");E=j?[b,".",j].join(""):b}}d&&(E=`${n.currencySymbol||I.currencySymbol||cr("vxe.numberInput.currencySymbol")||""}${E}`)}}return nl(e,o,E)},renderTableFooter(e,o){const{props:n={}}=e,{row:a,column:v,_columnIndex:m}=o,{type:E}=n,I=r.isArray(a)?a[m]:r.get(a,v.field);if(r.isNumber(I)){const H=as().numberInput||{};if(E==="float"){const u=ll(n.autoFill,H.autoFill,!0),d=ll(n.digits,H.digits,1);let b=r.toFixed(r.floor(I,d),d);return u||(b=r.toNumber(b)),b}else if(E==="amount"){const u=ll(n.autoFill,H.autoFill,!0),d=ll(n.digits,H.digits,2),b=ll(n.showCurrency,H.showCurrency,!1);let B=r.commafy(r.toNumber(I),{digits:d});if(!u){const[j,Z]=B.split(".");if(Z){const $=Z.replace(/0+$/,"");B=$?[j,".",$].join(""):j}}return b&&(B=`${n.currencySymbol||H.currencySymbol||cr("vxe.numberInput.currencySymbol")||""}${B}`),B}}return cl(I,1)},renderTableDefault:Mo,renderTableFilter:Js,tableFilterDefaultMethod:us,tableExportMethod(e){const{row:o,column:n}=e;return r.get(o,n.field)}},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Mo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:v}=o;let m=r.get(a,v.field);return m&&n.type!=="time"&&(m=Zs(m,n)),nl(e,o,m)},renderTableDefault:Mo,renderTableFilter:Js,tableFilterDefaultMethod:ds},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Mo,renderTableCell(e,o){const{row:n,column:a}=o,v=r.get(n,a.field);return nl(e,o,v)}},VxeButton:{renderTableDefault:Fu},VxeButtonGroup:{renderTableDefault(e,o){const{options:n}=e;return[f(Bo(e),Object.assign(Object.assign({options:n},Yo(e,o,null)),jn(e,o)))]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:mi,renderTableDefault:mi,renderTableCell(e,o){return nl(e,o,ms(e,o))},renderTableFilter(e,o){const{column:n}=o,{options:a,optionProps:v,optionGroups:m,optionGroupProps:E}=e;return n.filters.map((I,H)=>{const u=I.data;return f(Bo(e),Object.assign(Object.assign({key:H},bs(e,o,u,{options:a,optionProps:v,optionGroups:m,optionGroupProps:E})),vs(e,o,I)))})},tableFilterDefaultMethod:ds,tableExportMethod:er},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:bi,renderTableCell(e,o){return nl(e,o,dr(e,o))},tableExportMethod:xi},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:bi,renderTableCell(e,o){return nl(e,o,dr(e,o))},tableExportMethod:xi},VxeColorPicker:{tableAutoFocus:"input",renderTableEdit(e,o){const{row:n,column:a}=o,{options:v}=e,m=io(n,a);return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,m,{colors:v})),Ko(e,o)))]},renderTableCell(e,o){const{row:n,column:a}=o,v=r.get(n,a.field);return f("span",{class:"vxe-color-picker--readonly"},[f("div",{class:"vxe-color-picker--readonly-color",style:{backgroundColor:v}})])}},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit(e,o){const{row:n,column:a}=o,{options:v}=e,m=io(n,a);return[f(Bo(e),Object.assign(Object.assign({},Yo(e,o,m,{icons:v})),Ko(e,o)))]},renderTableCell(e,o){const{row:n,column:a}=o,v=r.get(n,a.field);return f("i",{class:v})}},VxeRadioGroup:{renderTableDefault:pi},VxeCheckboxGroup:{renderTableDefault:pi},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Mo,renderTableDefault:Mo},VxeUpload:{renderTableEdit:Mo,renderTableCell:Mo,renderTableDefault:Mo},VxeImage:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:v}=e,m=io(n,a);return[f(Bo(e),Object.assign(Object.assign(Object.assign({},v),{src:m}),Ko(e,o)))]}},VxeImageGroup:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:v}=e,m=io(n,a);return[f(Bo(e),Object.assign(Object.assign(Object.assign({},v),{urlList:m}),Ko(e,o)))]}},VxeTextEllipsis:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:v}=e,m=io(n,a);return[f(Bo(e),Object.assign(Object.assign(Object.assign({},v),{content:m}),Ko(e,o)))]}},VxeRate:{renderTableDefault:Mo},VxeSlider:{renderTableDefault:Mo},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:cs,renderTableCell(e,o){var n;const{props:a={}}=e,{row:v,column:m}=o,E=a.digits||((n=as().input)===null||n===void 0?void 0:n.digits)||2;let I=r.get(v,m.field);if(I)switch(a.type){case"date":case"week":case"month":case"year":I=Zs(I,a);break;case"float":I=r.toFixed(r.floor(I,E),E);break}return nl(e,o,I)},renderTableDefault:cs,renderTableFilter:Lu,tableFilterDefaultMethod:us},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:Ea},$buttons:{renderTableDefault:ku},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:vi,renderTableDefault:vi,renderTableCell(e,o){return nl(e,o,ms(e,o))},renderTableFilter(e,o){const{column:n}=o,{options:a,optionProps:v,optionGroups:m,optionGroupProps:E}=e;return n.filters.map((I,H)=>{const u=I.data;return f(Es(e),Object.assign(Object.assign({key:H},bs(e,o,u,{options:a,optionProps:v,optionGroups:m,optionGroupProps:E})),vs(e,o,I)))})},tableFilterDefaultMethod:ds,tableExportMethod:er},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:cs,renderTableDefault:cs}});const Ss=Object.assign({},pn,{install(e){e.component(pn.name,pn)}}),$u={useCellView:Gd};te.dynamicApp&&te.dynamicApp.component(pn.name,pn);te.component(pn);te.tableHandle=$u;const Bu=Ss,{getConfig:qo,getIcon:Ol,getI18n:nn,renderer:Ci,commands:wi,createEvent:Hu,useFns:Pu}=te,gn=Po({name:"VxeToolbar",props:{loading:Boolean,refresh:[Boolean,Object],import:[Boolean,Object],export:[Boolean,Object],print:[Boolean,Object],zoom:[Boolean,Object],custom:[Boolean,Object],buttons:{type:Array,default:()=>qo().toolbar.buttons},tools:{type:Array,default:()=>qo().toolbar.tools},perfect:{type:Boolean,default:()=>qo().toolbar.perfect},size:{type:String,default:()=>qo().toolbar.size||qo().size},className:[String,Function]},emits:["button-click","tool-click"],setup(e,o){const{slots:n,emit:a}=o,v=r.uniqueId(),m=te.getComponent("VxeButton"),{computeSize:E}=Pu.useSize(e),I=Uo({isRefresh:!1,connectFlag:0,columns:[]}),H={connectTable:null},u=qe(),d={refElem:u},b={xID:v,props:e,context:o,reactData:I,internalData:H,getRefMaps:()=>d};let B={};const j=xo("$xeGrid",null),Z=_e(()=>Object.assign({},r.clone(qo().toolbar.refresh,!0),e.refresh)),$=_e(()=>Object.assign({},r.clone(qo().toolbar.import,!0),e.import)),A=_e(()=>Object.assign({},r.clone(qo().toolbar.export,!0),e.export)),T=_e(()=>Object.assign({},r.clone(qo().toolbar.print,!0),e.print)),F=_e(()=>Object.assign({},r.clone(qo().toolbar.zoom,!0),e.zoom)),D=_e(()=>Object.assign({},r.clone(qo().toolbar.custom,!0),e.custom)),w=_e(()=>{const{connectTable:le}=H,he=le;if((I.connectFlag||he)&&he){const{computeCustomOpts:U}=he.getComputeMaps();return U.value}return{trigger:""}}),C=_e(()=>w.value.trigger),R=()=>{const{connectTable:le}=H;if(le)return!0;zt("vxe.error.barUnableLink")},M=({$event:le})=>{const{connectTable:he}=H,U=he;U&&(U.triggerCustomEvent?U.triggerCustomEvent(le):zt("vxe.error.reqModule",["VxeTableCustomModule"]))},_=({$event:le})=>{const{connectTable:he}=H,U=he;U?U.customOpenEvent(le):zt("vxe.error.reqModule",["VxeTableCustomModule"])},re=({$event:le})=>{const{connectTable:he}=H,U=he;if(U){const{customStore:we}=U.reactData;we.activeBtn=!1,setTimeout(()=>{!we.activeBtn&&!we.activeWrapper&&U.customCloseEvent(le)},350)}},ue=({$event:le})=>{const{isRefresh:he}=I,U=Z.value;if(!he){const we=U.queryMethod||U.query;if(we){I.isRefresh=!0;try{Promise.resolve(we({})).catch(be=>be).then(()=>{I.isRefresh=!1})}catch{I.isRefresh=!1}}else j&&(I.isRefresh=!0,j.triggerToolbarCommitEvent({code:U.code||"reload"},le).catch(be=>be).then(()=>{I.isRefresh=!1}))}},ee=({$event:le})=>{j&&j.triggerZoomEvent(le)},V=(le,he)=>{const{connectTable:U}=H,we=U,{code:be}=he;if(be)if(j)j.triggerToolbarBtnEvent(he,le);else{const ae=wi.get(be),L={code:be,button:he,$table:we,$grid:j,$event:le};if(ae){const Te=ae.tableCommandMethod||ae.commandMethod;Te&&Te(L)}b.dispatchEvent("button-click",L,le)}},Q=(le,he)=>{const{connectTable:U}=H,we=U,{code:be}=he;if(be)if(j)j.triggerToolbarTolEvent(he,le);else{const ae=wi.get(be),L={code:be,tool:he,$table:we,$grid:j,$event:le};if(ae){const Te=ae.tableCommandMethod||ae.commandMethod;Te&&Te(L)}b.dispatchEvent("tool-click",L,le)}},J=()=>{if(R()){const{connectTable:le}=H,he=le;he&&he.openImport()}},pe=()=>{if(R()){const{connectTable:le}=H,he=le;he&&he.openExport()}},Ie=()=>{if(R()){const{connectTable:le}=H,he=le;he&&he.openPrint()}};B={dispatchEvent:(le,he,U)=>{a(le,Hu(U,{$toolbar:b},he))},syncUpdate(le){H.connectTable=le.$table,I.columns=le.collectColumn,I.connectFlag++}},Object.assign(b,B);const ke=(le,he)=>{const{dropdowns:U}=le,we=[];return U?U.map((be,ae)=>be.visible===!1?We():m?f(m,{key:ae,disabled:be.disabled,loading:be.loading,type:be.type,mode:be.mode,icon:be.icon,circle:be.circle,round:be.round,status:be.status,content:be.name,title:be.title,routerLink:be.routerLink,permissionCode:be.permissionCode,prefixTooltip:be.prefixTooltip,suffixTooltip:be.suffixTooltip,onClick:({$event:L})=>he?V(L,be):Q(L,be)}):We()):we},G=()=>{const{buttons:le}=e,{connectTable:he}=H,U=he,we=n.buttonPrefix||n["button-prefix"],be=n.buttonSuffix||n["button-suffix"],ae=[];return we&&ae.push(...vo(we({buttons:le||[],$grid:j,$table:U}))),le&&le.forEach((L,Te)=>{const{dropdowns:me,buttonRender:Ne}=L;if(L.visible!==!1){const Be=Ne?Ci.get(Ne.name):null;if(Ne&&Be&&Be.renderToolbarButton){const je=Be.toolbarButtonClassName,$e={$grid:j,$table:U,button:L};ae.push(f("span",{key:`br${L.code||Te}`,class:["vxe-button--item",je?r.isFunction(je)?je($e):je:""]},vo(Be.renderToolbarButton(Ne,$e))))}else m&&ae.push(f(m,{key:`bd${L.code||Te}`,disabled:L.disabled,loading:L.loading,type:L.type,mode:L.mode,icon:L.icon,circle:L.circle,round:L.round,status:L.status,content:L.name,title:L.title,routerLink:L.routerLink,permissionCode:L.permissionCode,prefixTooltip:L.prefixTooltip,suffixTooltip:L.suffixTooltip,destroyOnClose:L.destroyOnClose,placement:L.placement,transfer:L.transfer,onClick:({$event:je})=>V(je,L)},me&&me.length?{dropdowns:()=>ke(L,!0)}:{}))}}),be&&ae.push(...vo(be({buttons:le||[],$grid:j,$table:U}))),ae},K=()=>{const{tools:le}=e,{connectTable:he}=H,U=he,we=n.toolPrefix||n["tool-prefix"],be=n.toolSuffix||n["tool-suffix"],ae=[];return we&&ae.push(...vo(we({tools:le||[],$grid:j,$table:U}))),le&&le.forEach((L,Te)=>{const{dropdowns:me,toolRender:Ne}=L;if(L.visible!==!1){const Be=Ne?Ne.name:null,je=Ne?Ci.get(Be):null;if(Ne&&je&&je.renderToolbarTool){const $e=je.toolbarToolClassName,tt={$grid:j,$table:U,tool:L};ae.push(f("span",{key:Be,class:["vxe-tool--item",$e?r.isFunction($e)?$e(tt):$e:""]},vo(je.renderToolbarTool(Ne,tt))))}else m&&ae.push(f(m,{key:Te,disabled:L.disabled,loading:L.loading,type:L.type,mode:L.mode,icon:L.icon,circle:L.circle,round:L.round,status:L.status,content:L.name,title:L.title,routerLink:L.routerLink,permissionCode:L.permissionCode,prefixTooltip:L.prefixTooltip,suffixTooltip:L.suffixTooltip,destroyOnClose:L.destroyOnClose,placement:L.placement,transfer:L.transfer,onClick:({$event:$e})=>Q($e,L)},me&&me.length?{dropdowns:()=>ke(L,!1)}:{}))}}),be&&ae.push(...vo(be({tools:le||[],$grid:j,$table:U}))),ae},Y=()=>{const le=$.value;return m?f(m,{key:"import",circle:!0,icon:le.icon||Ol().TOOLBAR_TOOLS_IMPORT,title:nn("vxe.toolbar.import"),onClick:J}):We()},se=()=>{const le=A.value;return m?f(m,{key:"export",circle:!0,icon:le.icon||Ol().TOOLBAR_TOOLS_EXPORT,title:nn("vxe.toolbar.export"),onClick:pe}):We()},oe=()=>{const le=T.value;return m?f(m,{key:"print",circle:!0,icon:le.icon||Ol().TOOLBAR_TOOLS_PRINT,title:nn("vxe.toolbar.print"),onClick:Ie}):We()},ge=()=>{const le=Z.value;return m?f(m,{key:"refresh",circle:!0,icon:I.isRefresh?le.iconLoading||Ol().TOOLBAR_TOOLS_REFRESH_LOADING:le.icon||Ol().TOOLBAR_TOOLS_REFRESH,title:nn("vxe.toolbar.refresh"),onClick:ue}):We()},xe=()=>{const le=F.value;return j&&m?f(m,{key:"zoom",circle:!0,icon:j.isMaximized()?le.iconOut||Ol().TOOLBAR_TOOLS_MINIMIZE:le.iconIn||Ol().TOOLBAR_TOOLS_FULLSCREEN,title:nn(`vxe.toolbar.zoom${j.isMaximized()?"Out":"In"}`),onClick:ee}):We()},Ee=()=>{const le=D.value,he=C.value,U={};return he==="manual"||(he==="hover"?(U.onMouseenter=_,U.onMouseleave=re):U.onClick=M),m?f(m,Object.assign({key:"custom",circle:!0,icon:le.icon||Ol().TOOLBAR_TOOLS_CUSTOM,title:nn("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},U)):We()},Ce=()=>{const{perfect:le,loading:he,refresh:U,zoom:we,custom:be,className:ae}=e,{connectTable:L}=H,Te=E.value,me=n.tools,Ne=n.buttons,Be=L;return f("div",{ref:u,class:["vxe-toolbar",ae?r.isFunction(ae)?ae({$toolbar:b}):ae:"",{[`size--${Te}`]:Te,"is--perfect":le,"is--loading":he}]},[f("div",{class:"vxe-buttons--wrapper"},Ne?Ne({$grid:j,$table:Be}):G()),f("div",{class:"vxe-tools--wrapper"},me?me({$grid:j,$table:Be}):K()),f("div",{class:"vxe-tools--operate"},[e.import?Y():We(),e.export?se():We(),e.print?oe():We(),U?ge():We(),we&&j?xe():We(),be?Ee():We()])])};return b.renderVN=Ce,ce(()=>{const{refresh:le}=e,he=Z.value,U=he.queryMethod||he.query;le&&!j&&!U&&an("vxe.error.notFunc",["queryMethod"]),D.value}),b},render(){return this.renderVN()}}),Os=Object.assign({},gn,{install(e){e.component(gn.name,gn)}});te.dynamicApp&&te.dynamicApp.component(gn.name,gn);te.component(gn);const ju=Os,{getConfig:vl,getI18n:sn,commands:Vu,hooks:Nu,useFns:_u,createEvent:Wu,globalEvents:tr,GLOBAL_EVENT_KEYS:zu,renderEmptyElement:Ei}=te,Xu=Object.keys(Er),yi=["clearAll","syncData","updateData","loadData","reloadData","reloadRow","loadColumn","reloadColumn","getRowNode","getColumnNode","getRowIndex","getVTRowIndex","getVMRowIndex","getColumnIndex","getVTColumnIndex","getVMColumnIndex","setRow","createData","createRow","revertData","clearData","isInsertByRow","isUpdateByRow","getColumns","getColumnById","getColumnByField","getTableColumn","getFullColumns","getData","getCheckboxRecords","getParentRow","getTreeParentRow","getRowSeq","getRowById","getRowid","getTableData","getFullData","setColumnFixed","clearColumnFixed","setColumnWidth","getColumnWidth","hideColumn","showColumn","resetColumn","refreshColumn","refreshScroll","recalculate","closeTooltip","isAllCheckboxChecked","isAllCheckboxIndeterminate","getCheckboxIndeterminateRecords","setCheckboxRow","setCheckboxRowKey","isCheckedByCheckboxRow","isCheckedByCheckboxRowKey","isIndeterminateByCheckboxRow","isIndeterminateByCheckboxRowKey","toggleCheckboxRow","setAllCheckboxRow","getRadioReserveRecord","clearRadioReserve","getCheckboxReserveRecords","clearCheckboxReserve","toggleAllCheckboxRow","clearCheckboxRow","setCurrentRow","isCheckedByRadioRow","isCheckedByRadioRowKey","setRadioRow","setRadioRowKey","clearCurrentRow","clearRadioRow","getCurrentRecord","getRadioRecord","getCurrentColumn","setCurrentColumn","clearCurrentColumn","setPendingRow","togglePendingRow","getPendingRecords","clearPendingRow","sort","setSort","clearSort","isSort","getSortColumns","closeFilter","isFilter","isActiveFilterByColumn","isRowExpandLoaded","clearRowExpandLoaded","reloadRowExpand","reloadRowExpand","toggleRowExpand","setAllRowExpand","setRowExpand","isExpandByRow","isRowExpandByRow","clearRowExpand","clearRowExpandReserve","getRowExpandRecords","getTreeExpandRecords","isTreeExpandLoaded","clearTreeExpandLoaded","reloadTreeExpand","reloadTreeChilds","toggleTreeExpand","setAllTreeExpand","setTreeExpand","isTreeExpandByRow","clearTreeExpand","clearTreeExpandReserve","getScroll","scrollTo","scrollToRow","scrollToColumn","clearScroll","updateFooter","updateStatus","setMergeCells","removeInsertRow","removeMergeCells","getMergeCells","clearMergeCells","setMergeFooterItems","removeMergeFooterItems","getMergeFooterItems","clearMergeFooterItems","getCustomStoreData","openTooltip","getCellLabel","getCellElement","focus","blur","connect"],qu=[...yr,"page-change","form-submit","form-submit-invalid","form-reset","form-collapse","form-toggle-collapse","proxy-query","proxy-delete","proxy-save","toolbar-button-click","toolbar-tool-click","zoom"],mn=Po({name:"VxeGrid",props:Object.assign(Object.assign({},Er),{layouts:Array,columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:()=>vl().grid.size||vl().size}}),emits:qu,setup(e,o){var n;const{slots:a,emit:v}=o,m=r.uniqueId(),E=te.getComponent("VxeForm"),I=te.getComponent("VxePager"),H=[["Form"],["Toolbar","Top","Table","Bottom","Pager"]],{computeSize:u}=_u.useSize(e),d=Uo({tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:((n=vl().pager)===null||n===void 0?void 0:n.pageSize)||10,currentPage:1}}),b=qe(),B=qe(),j=qe(),Z=qe(),$=qe(),A=qe(),T=qe(),F=qe(),D=qe(),w=qe(),C=N=>{const de={};return N.forEach(ne=>{de[ne]=(...De)=>{const Ae=B.value;if(Ae&&Ae[ne])return Ae[ne](...De)}}),de},R=C(yi);yi.forEach(N=>{R[N]=(...de)=>{const ne=B.value;if(ne&&ne[N])return ne&&ne[N](...de)}});const M=_e(()=>r.merge({},r.clone(vl().grid.proxyConfig,!0),e.proxyConfig)),_=_e(()=>{const N=M.value;return r.isBoolean(N.message)?N.message:N.showResponseMsg}),re=_e(()=>M.value.showActiveMsg),ue=_e(()=>Object.assign({},vl().grid.pagerConfig,e.pagerConfig)),ee=_e(()=>Object.assign({},vl().grid.formConfig,e.formConfig)),V=_e(()=>Object.assign({},vl().grid.toolbarConfig,e.toolbarConfig)),Q=_e(()=>Object.assign({},vl().grid.zoomConfig,e.zoomConfig)),J=_e(()=>{const{height:N,maxHeight:de}=e,{isZMax:ne,tZindex:De}=d,Ae={};return ne?Ae.zIndex=De:(N&&(Ae.height=N==="auto"||N==="100%"?"100%":_r(N)),de&&(Ae.maxHeight=de==="auto"||de==="100%"?"100%":_r(de))),Ae}),pe=_e(()=>{const N={},de=e;return Xu.forEach(ne=>{N[ne]=de[ne]}),N}),Ie=_e(()=>{const{seqConfig:N,pagerConfig:de,loading:ne,editConfig:De,proxyConfig:Ae}=e,{isZMax:ze,tableLoading:dt,tablePage:pt,tableData:ht}=d,ut=pe.value,Ct=M.value,Je=ue.value,Qe=Object.assign({},ut);return ze&&(ut.maxHeight?Qe.maxHeight="100%":Qe.height="100%"),Ae&&ft(Ct)&&(Qe.loading=ne||dt,Qe.data=ht,de&&Ct.seq&&ft(Je)&&(Qe.seqConfig=Object.assign({},N,{startIndex:(pt.currentPage-1)*pt.pageSize}))),De&&(Qe.editConfig=Object.assign({},De)),Qe}),Pe=_e(()=>{const{layouts:N}=e;let de=[];N&&N.length?de=N:de=vl().grid.layouts||H;let ne=[],De=[],Ae=[];return de.length&&(r.isArray(de[0])?(ne=de[0],De=de[1]||[],Ae=de[2]||[]):De=de),{headKeys:ne,bodyKeys:De,footKeys:Ae}}),ke=_e(()=>{const N=ue.value;return`${N.currentPage}${N.pageSize}`}),G={refElem:b,refTable:B,refForm:j,refToolbar:Z,refPager:$},K={computeProxyOpts:M,computePagerOpts:ue,computeFormOpts:ee,computeToolbarOpts:V,computeZoomOpts:Q},Y={xID:m,props:e,context:o,reactData:d,getRefMaps:()=>G,getComputeMaps:()=>K},se=()=>{const N=V.value;e.toolbarConfig&&ft(N)&&ce(()=>{const de=B.value,ne=Z.value;de&&ne&&de.connect(ne)})},oe=()=>{const{proxyConfig:N}=e,{formData:de}=d,ne=M.value,De=ee.value;return N&&ft(ne)&&ne.form?de:De.data},ge=()=>{const{tablePage:N}=d,{pagerConfig:de}=e,ne=ue.value,{currentPage:De,pageSize:Ae}=ne;de&&ft(ne)&&(De&&(N.currentPage=De),Ae&&(N.pageSize=Ae))},xe=N=>{const de=re.value,ne=B.value,De=ne.getCheckboxRecords();De.length?(ne.togglePendingRow(De),R.clearCheckboxRow()):de&&te.modal&&te.modal.message({id:N,content:sn("vxe.grid.selectOneRecord"),status:"warning"})},Ee=(N,de)=>{const ne=M.value,Ae=(ne.response||ne.props||{}).message;let ze;return N&&Ae&&(ze=r.isFunction(Ae)?Ae({data:N,$grid:Y}):r.get(N,Ae)),ze||sn(de)},Ce=(N,de,ne)=>{const De=re.value,Ae=R.getCheckboxRecords();if(De)if(Ae.length){if(te.modal)return te.modal.confirm({id:`cfm_${N}`,content:sn(de),escClosable:!0}).then(ze=>{if(ze==="confirm")return ne()})}else te.modal&&te.modal.message({id:`msg_${N}`,content:sn("vxe.grid.selectOneRecord"),status:"warning"});else Ae.length&&ne();return Promise.resolve()},le=N=>{const{proxyConfig:de}=e,{tablePage:ne}=d,{$event:De,currentPage:Ae,pageSize:ze}=N,dt=M.value;ne.currentPage=Ae,ne.pageSize=ze,fe.dispatchEvent("page-change",N,De),de&&ft(dt)&&fe.commitProxy("query").then(pt=>{fe.dispatchEvent("proxy-query",pt,De)})},he=N=>{const de=B.value,{proxyConfig:ne}=e,{computeSortOpts:De}=de.getComputeMaps(),Ae=M.value;De.value.remote&&(d.sortData=N.sortList,ne&&ft(Ae)&&(d.tablePage.currentPage=1,fe.commitProxy("query").then(dt=>{fe.dispatchEvent("proxy-query",dt,N.$event)}))),fe.dispatchEvent("sort-change",N,N.$event)},U=N=>{const de=B.value,{proxyConfig:ne}=e,{computeFilterOpts:De}=de.getComputeMaps(),Ae=M.value;De.value.remote&&(d.filterData=N.filterList,ne&&ft(Ae)&&(d.tablePage.currentPage=1,fe.commitProxy("query").then(dt=>{fe.dispatchEvent("proxy-query",dt,N.$event)}))),fe.dispatchEvent("filter-change",N,N.$event)},we=N=>{const{proxyConfig:de}=e,ne=M.value;de&&ft(ne)&&fe.commitProxy("reload").then(De=>{fe.dispatchEvent("proxy-query",Object.assign(Object.assign({},De),{isReload:!0}),N.$event)}),fe.dispatchEvent("form-submit",N,N.$event)},be=N=>{const{proxyConfig:de}=e,{$event:ne}=N,De=M.value,Ae=B.value;de&&ft(De)&&(Ae.clearScroll(),fe.commitProxy("reload").then(ze=>{fe.dispatchEvent("proxy-query",Object.assign(Object.assign({},ze),{isReload:!0}),ne)})),fe.dispatchEvent("form-reset",N,ne)},ae=N=>{fe.dispatchEvent("form-submit-invalid",N,N.$event)},L=N=>{const{$event:de}=N;ce(()=>R.recalculate(!0)),fe.dispatchEvent("form-toggle-collapse",N,de),fe.dispatchEvent("form-collapse",N,de)},Te=N=>{const{isZMax:de}=d;return(N?!de:de)&&(d.isZMax=!de,d.tZindex<zi()&&(d.tZindex=Wi())),ce().then(()=>R.recalculate(!0)).then(()=>d.isZMax)},me=(N,de)=>{const ne=N[de];if(ne)if(r.isString(ne)){if(a[ne])return a[ne]}else return ne;return null},Ne=()=>{const{formConfig:N,proxyConfig:de}=e,{formData:ne}=d,De=M.value,Ae=ee.value;if(N&&ft(Ae)||a.form){let ze=[];if(a.form)ze=a.form({$grid:Y});else if(Ae.items){const dt={};if(!Ae.inited){Ae.inited=!0;const pt=De.beforeItem;De&&pt&&Ae.items.forEach(ht=>{pt({$grid:Y,item:ht})})}Ae.items.forEach(pt=>{r.each(pt.slots,ht=>{r.isFunction(ht)||a[ht]&&(dt[ht]=a[ht])})}),E&&ze.push(f(E,Object.assign(Object.assign({ref:j},Object.assign({},Ae,{data:de&&ft(De)&&De.form?ne:Ae.data})),{onSubmit:we,onReset:be,onSubmitInvalid:ae,onCollapse:L}),dt))}return f("div",{ref:A,key:"form",class:"vxe-grid--form-wrapper"},ze)}return We()},Be=()=>{const{toolbarConfig:N}=e,de=V.value;if(N&&ft(de)||a.toolbar){let ne=[];if(a.toolbar)ne=a.toolbar({$grid:Y});else{const De=de.slots;let Ae,ze;const dt={};De&&(Ae=me(De,"buttons"),ze=me(De,"tools"),Ae&&(dt.buttons=Ae),ze&&(dt.tools=ze)),ne.push(f(Os,Object.assign({ref:Z},de),dt))}return f("div",{ref:T,key:"toolbar",class:"vxe-grid--toolbar-wrapper"},ne)}return We()},je=()=>a.top?f("div",{ref:F,key:"top",class:"vxe-grid--top-wrapper"},a.top({$grid:Y})):We(),$e=()=>{const N=a.left;return N?f("div",{class:"vxe-grid--left-wrapper"},N({$grid:Y})):We()},tt=()=>{const N=a.right;return N?f("div",{class:"vxe-grid--right-wrapper"},N({$grid:Y})):We()},Se=()=>{const{proxyConfig:N}=e,de=Ie.value,ne=M.value,De=Object.assign({},Ve),Ae=a.empty,ze=a.loading,dt=a.rowDragIcon||a["row-drag-icon"],pt=a.columnDragIcon||a["column-drag-icon"];N&&ft(ne)&&(ne.sort&&(De.onSortChange=he),ne.filter&&(De.onFilterChange=U));const ht={};return Ae&&(ht.empty=Ae),ze&&(ht.loading=ze),dt&&(ht.rowDragIcon=dt),pt&&(ht.columnDragIcon=pt),f("div",{class:"vxe-grid--table-wrapper"},[f(Ss,Object.assign(Object.assign({ref:B},de),De),ht)])},He=()=>a.bottom?f("div",{ref:D,key:"bottom",class:"vxe-grid--bottom-wrapper"},a.bottom({$grid:Y})):We(),Fe=()=>{const{proxyConfig:N,pagerConfig:de}=e,ne=M.value,De=ue.value;if(de&&ft(De)||a.pager){let Ae=[];if(a.pager)Ae=a.pager({$grid:Y});else{const ze=De.slots,dt={};let pt,ht;ze&&(pt=me(ze,"left"),ht=me(ze,"right"),pt&&(dt.left=pt),ht&&(dt.right=ht)),I&&Ae.push(f(I,Object.assign(Object.assign(Object.assign({ref:$},De),N&&ft(ne)?d.tablePage:{}),{onPageChange:le}),dt))}return f("div",{ref:w,key:"pager",class:"vxe-grid--pager-wrapper"},Ae)}return We()},ve=N=>{const de=[];return N.forEach(ne=>{switch(ne){case"Form":de.push(Ne());break;case"Toolbar":de.push(Be());break;case"Top":de.push(je());break;case"Table":de.push(f("div",{key:"table",class:"vxe-grid--table-container"},[$e(),Se(),tt()]));break;case"Bottom":de.push(He());break;case"Pager":de.push(Fe());break;default:zt("vxe.error.notProp",[`layouts -> ${ne}`]);break}}),de},Me=()=>{const N=Pe.value,{headKeys:de,bodyKeys:ne,footKeys:De}=N,Ae=a.asideLeft||a["aside-left"],ze=a.asideRight||a["aside-right"];return[f("div",{class:"vxe-grid--layout-header-wrapper"},ve(de)),f("div",{class:"vxe-grid--layout-body-wrapper"},[Ae?f("div",{class:"vxe-grid--layout-aside-left-wrapper"},Ae({})):Ei(Y),f("div",{class:"vxe-grid--layout-body-content-wrapper"},ve(ne)),ze?f("div",{class:"vxe-grid--layout-aside-right-wrapper"},ze({})):Ei(Y)]),f("div",{class:"vxe-grid--layout-footer-wrapper"},ve(De))]},Ve={};yr.forEach(N=>{const de=r.camelCase(`on-${N}`);Ve[de]=(...ne)=>v(N,...ne)});const Ye=()=>{const{proxyConfig:N,formConfig:de}=e,{proxyInited:ne}=d,De=M.value,Ae=ee.value;if(N&&ft(De)){if(de&&ft(Ae)&&De.form&&Ae.items){const ze={};Ae.items.forEach(dt=>{const{field:pt,itemRender:ht}=dt;if(pt){let ut=null;if(ht){const{defaultValue:Ct}=ht;r.isFunction(Ct)?ut=Ct({item:dt}):r.isUndefined(Ct)||(ut=Ct)}ze[pt]=ut}}),d.formData=ze}ne||(d.proxyInited=!0,De.autoLoad!==!1&&ce().then(()=>fe.commitProxy("_init")).then(ze=>{fe.dispatchEvent("proxy-query",Object.assign(Object.assign({},ze),{isInited:!0}),new Event("init"))}))}},Xe=N=>{const de=Q.value;tr.hasKey(N,zu.ESCAPE)&&d.isZMax&&de.escRestore!==!1&&et.triggerZoomEvent(N)},fe={dispatchEvent:(N,de,ne)=>{v(N,Wu(ne,{$grid:Y},de))},commitProxy(N,...de){const{toolbarConfig:ne,pagerConfig:De,editRules:Ae,validConfig:ze}=e,{tablePage:dt}=d,pt=re.value,ht=_.value,ut=M.value,Ct=ue.value,Je=V.value,{beforeQuery:Qe,afterQuery:Tt,beforeDelete:ao,afterDelete:Mt,beforeSave:Gt,afterSave:ho,ajax:Xt={}}=ut,oo=ut.response||ut.props||{},mt=B.value,wo=oe();let lo=null,wt=null;if(r.isString(N)){const{buttons:h}=Je,Vt=ne&&ft(Je)&&h?r.findTree(h,qt=>qt.code===N,{children:"dropdowns"}):null;lo=Vt?Vt.item:null,wt=N}else lo=N,wt=lo.code;const no=lo?lo.params:null;switch(wt){case"insert":return mt.insert({});case"insert_edit":return mt.insert({}).then(({row:h})=>mt.setEditRow(h));case"insert_actived":return mt.insert({}).then(({row:h})=>mt.setEditRow(h));case"mark_cancel":xe(wt);break;case"remove":return Ce(wt,"vxe.grid.removeSelectRecord",()=>mt.removeCheckboxRow());case"import":mt.importData(no);break;case"open_import":mt.openImport(no);break;case"export":mt.exportData(no);break;case"open_export":mt.openExport(no);break;case"reset_custom":return mt.resetCustom(!0);case"_init":case"reload":case"query":{const h=Xt.query,Vt=Xt.querySuccess,qt=Xt.queryError;if(h){const Dt=wt==="_init",po=wt==="reload";let so=[],Nt=[],Kt={};if(De&&((Dt||po)&&(dt.currentPage=1),ft(Ct)&&(Kt=Object.assign({},dt))),Dt){let Lt=null;if(mt){const{computeSortOpts:Ht}=mt.getComputeMaps();Lt=Ht.value.defaultSort}Lt&&(r.isArray(Lt)||(Lt=[Lt]),so=Lt.map(Ht=>({field:Ht.field,property:Ht.field,order:Ht.order}))),mt&&(Nt=mt.getCheckedFilters())}else mt&&(po?mt.clearAll():(so=mt.getSortColumns(),Nt=mt.getCheckedFilters()));const go={code:wt,button:lo,isInited:Dt,isReload:po,$grid:Y,page:Kt,sort:so.length?so[0]:{},sorts:so,filters:Nt,form:wo,options:h};return d.sortData=so,d.filterData=Nt,d.tableLoading=!0,Promise.resolve((Qe||h)(go,...de)).then(Lt=>{if(d.tableLoading=!1,Lt)if(De&&ft(Ct)){const Ht=oo.total,Eo=(r.isFunction(Ht)?Ht({data:Lt,$grid:Y}):r.get(Lt,Ht||"page.total"))||0;dt.total=r.toNumber(Eo);const dl=oo.result;d.tableData=(r.isFunction(dl)?dl({data:Lt,$grid:Y}):r.get(Lt,dl||"result"))||[];const ul=Math.max(Math.ceil(Eo/dt.pageSize),1);dt.currentPage>ul&&(dt.currentPage=ul)}else{const Ht=oo.list;d.tableData=(Ht?r.isFunction(Ht)?Ht({data:Lt,$grid:Y}):r.get(Lt,Ht):Lt)||[]}else d.tableData=[];return Tt&&Tt(go,...de),Vt&&Vt(Object.assign(Object.assign({},go),{response:Lt})),{status:!0}}).catch(Lt=>(d.tableLoading=!1,qt&&qt(Object.assign(Object.assign({},go),{response:Lt})),{status:!1}))}break}case"delete":{const h=Xt.delete,Vt=Xt.deleteSuccess,qt=Xt.deleteError;if(h){const Dt=R.getCheckboxRecords(),po=Dt.filter(Kt=>!mt.isInsertByRow(Kt)),Nt={$grid:Y,code:wt,button:lo,body:{removeRecords:po},form:wo,options:h};if(Dt.length)return Ce(wt,"vxe.grid.deleteSelectRecord",()=>po.length?(d.tableLoading=!0,Promise.resolve((ao||h)(Nt,...de)).then(Kt=>(d.tableLoading=!1,mt.setPendingRow(po,!1),ht&&te.modal&&te.modal.message({content:Ee(Kt,"vxe.grid.delSuccess"),status:"success"}),Mt?Mt(Nt,...de):fe.commitProxy("query"),Vt&&Vt(Object.assign(Object.assign({},Nt),{response:Kt})),{status:!0})).catch(Kt=>(d.tableLoading=!1,ht&&te.modal&&te.modal.message({id:wt,content:Ee(Kt,"vxe.grid.operError"),status:"error"}),qt&&qt(Object.assign(Object.assign({},Nt),{response:Kt})),{status:!1}))):mt.remove(Dt));pt&&te.modal&&te.modal.message({id:wt,content:sn("vxe.grid.selectOneRecord"),status:"warning"})}break}case"save":{const h=Xt.save,Vt=Xt.saveSuccess,qt=Xt.saveError;if(h){const Dt=mt.getRecordset(),{insertRecords:po,removeRecords:so,updateRecords:Nt,pendingRecords:Kt}=Dt,go={$grid:Y,code:wt,button:lo,body:Dt,form:wo,options:h};po.length&&(Dt.pendingRecords=Kt.filter(Ht=>mt.findRowIndexOf(po,Ht)===-1)),Kt.length&&(Dt.insertRecords=po.filter(Ht=>mt.findRowIndexOf(Kt,Ht)===-1));let Lt=Promise.resolve();return Ae&&(Lt=mt[ze&&ze.msgMode==="full"?"fullValidate":"validate"](Dt.insertRecords.concat(Nt))),Lt.then(Ht=>{if(!Ht){if(Dt.insertRecords.length||so.length||Nt.length||Dt.pendingRecords.length)return d.tableLoading=!0,Promise.resolve((Gt||h)(go,...de)).then(Eo=>(d.tableLoading=!1,mt.clearPendingRow(),ht&&te.modal&&te.modal.message({content:Ee(Eo,"vxe.grid.saveSuccess"),status:"success"}),ho?ho(go,...de):fe.commitProxy("query"),Vt&&Vt(Object.assign(Object.assign({},go),{response:Eo})),{status:!0})).catch(Eo=>(d.tableLoading=!1,ht&&te.modal&&te.modal.message({id:wt,content:Ee(Eo,"vxe.grid.operError"),status:"error"}),qt&&qt(Object.assign(Object.assign({},go),{response:Eo})),{status:!1}));pt&&te.modal&&te.modal.message({id:wt,content:sn("vxe.grid.dataUnchanged"),status:"info"})}})}break}default:{const h=Vu.get(wt);if(h){const Vt=h.tableCommandMethod||h.commandMethod;Vt&&Vt({code:wt,button:lo,$grid:Y,$table:mt},...de)}}}return ce()},zoom(){return d.isZMax?fe.revert():fe.maximize()},isMaximized(){return d.isZMax},maximize(){return Te(!0)},revert(){return Te()},getFormData:oe,getFormItems(N){const de=ee.value,{formConfig:ne}=e,{items:De}=de,Ae=[];return r.eachTree(ne&&ft(de)&&De?De:[],ze=>{Ae.push(ze)},{children:"children"}),r.isUndefined(N)?Ae:Ae[N]},getProxyInfo(){const N=B.value;if(e.proxyConfig){const{sortData:de}=d;return{data:d.tableData,filter:d.filterData,form:oe(),sort:de.length?de[0]:{},sorts:de,pager:d.tablePage,pendingRecords:N?N.getPendingRecords():[]}}return null}},et={extendTableMethods:C,callSlot(N,de){return N&&(r.isString(N)&&(N=a[N]||null),r.isFunction(N))?vo(N(de)):[]},getExcludeHeight(){const{height:N}=e,{isZMax:de}=d,ne=b.value,De=A.value,Ae=T.value,ze=F.value,dt=D.value,pt=w.value;return(de||!(N==="auto"||N==="100%")?0:ar(ne.parentNode))+ar(ne)+kn(De)+kn(Ae)+kn(ze)+kn(dt)+kn(pt)},getParentHeight(){const N=b.value;return N?(d.isZMax?ws().visibleHeight:r.toNumber(getComputedStyle(N.parentNode).height))-et.getExcludeHeight():0},triggerToolbarCommitEvent(N,de){const{code:ne}=N;return fe.commitProxy(N,de).then(De=>{ne&&De&&De.status&&["query","reload","delete","save"].includes(ne)&&fe.dispatchEvent(ne==="delete"||ne==="save"?`proxy-${ne}`:"proxy-query",Object.assign(Object.assign({},De),{isReload:ne==="reload"}),de)})},triggerToolbarBtnEvent(N,de){et.triggerToolbarCommitEvent(N,de),fe.dispatchEvent("toolbar-button-click",{code:N.code,button:N},de)},triggerToolbarTolEvent(N,de){et.triggerToolbarCommitEvent(N,de),fe.dispatchEvent("toolbar-tool-click",{code:N.code,tool:N},de)},triggerZoomEvent(N){fe.zoom(),fe.dispatchEvent("zoom",{type:d.isZMax?"max":"revert"},N)}};Object.assign(Y,R,fe,et);const Ze=qe(0);Et(()=>e.columns?e.columns.length:-1,()=>{Ze.value++}),Et(()=>e.columns,()=>{Ze.value++}),Et(Ze,()=>{ce(()=>Y.loadColumn(e.columns||[]))}),Et(()=>e.toolbarConfig,()=>{se()}),Et(ke,()=>{ge()}),Et(()=>e.proxyConfig,()=>{Ye()}),Nu.forEach(N=>{const{setupGrid:de}=N;if(de){const ne=de(Y);ne&&r.isObject(ne)&&Object.assign(Y,ne)}}),ge(),zl(()=>{ce(()=>{const{columns:N}=e;N&&N.length&&Y.loadColumn(N),se(),Ye()}),tr.on(Y,"keydown",Xe)}),Xl(()=>{tr.off(Y,"keydown")});const st=()=>{const N=u.value,de=J.value;return f("div",{ref:b,class:["vxe-grid",{[`size--${N}`]:N,"is--animat":!!e.animat,"is--round":e.round,"is--maximize":d.isZMax,"is--loading":e.loading||d.tableLoading}],style:de},Me())};return Y.renderVN=st,Il("$xeGrid",Y),Y},render(){return this.renderVN()}}),Rr=Object.assign({},mn,{install(e){e.component(mn.name,mn)}});te.dynamicApp&&te.dynamicApp.component(mn.name,mn);te.component(mn);const Ku=Rr,Uu={vxe:{base:{pleaseInput:"请输入",pleaseSelect:"请选择",comma:"，",fullStop:"。"},loading:{text:"加载中..."},error:{downErr:"下载失败",errLargeData:"当绑定的数据量过大时，应该请使用 {0}，否则可能会出现卡顿",groupFixed:"如果使用分组表头，冻结列必须按组设置",groupMouseRange:'分组表头与 "{0}" 不能同时使用，这可能会出现错误',groupTag:'分组列头应该使用 "{0}" 而不是 "{1}"，这可能会出现错误',scrollErrProp:'启用虚拟滚动后不支持该参数 "{0}"',errConflicts:'参数 "{0}" 与 "{1}" 有冲突',unableInsert:"无法插入到指定位置，请检查参数是否正确",useErr:'安装 "{0}" 模块时发生错误，可能顺序不正确，依赖的模块需要在 Table 之前安装',barUnableLink:"工具栏无法关联表格",expandContent:'展开行的插槽应该是 "content"，请检查是否正确',reqComp:'缺少 "{0}" 组件，请检查是否正确安装。 https://vxeui.com/#/start/useGlobal',reqModule:'缺少 "{0}" 模块',reqProp:'缺少必要的 "{0}" 参数，这可能会导致出现错误',emptyProp:'参数 "{0}" 不允许为空',errProp:'不支持的参数 "{0}"，可能为 "{1}"',colRepet:'column.{0}="{1}" 重复了，这可能会导致某些功能无法使用',notFunc:'方法 "{0}" 不存在',errFunc:'参数 "{0}" 不是一个方法',notValidators:'全局校验 "{0}" 不存在',notFormats:'全局格式化 "{0}" 不存在',notCommands:'全局指令 "{0}" 不存在',notSlot:'插槽 "{0}" 不存在',noTree:'树结构不支持 "{0}"',notProp:'不支持的参数 "{0}"',checkProp:'当数据量过大时可能会导致复选框卡顿，建议设置参数 "{0}" 提升渲染速度',coverProp:'"{0}" 的参数 "{1}" 重复定义，这可能会出现错误',uniField:'字段名 "{0}" 重复定义，这可能会出现错误',repeatKey:'主键重复 {0}="{1}"，这可能会出现错误',delFunc:'方法 "{0}" 已废弃，请使用 "{1}"',delProp:'参数 "{0}" 已废弃，请使用 "{1}"',delEvent:'事件 "{0}" 已废弃，请使用 "{1}"',removeProp:'参数 "{0}" 已废弃，不建议使用，这可能会导致出现错误',errFormat:'全局的格式化内容应该使用 "VXETable.formats" 定义，挂载 "formatter={0}" 的方式已不建议使用',notType:'不支持的文件类型 "{0}"',notExp:"该浏览器不支持导入/导出功能",impFields:"导入失败，请检查字段名和数据格式是否正确",treeNotImp:"树表格不支持导入",treeCrossDrag:"只能拖拽第一层级",treeDragChild:"父级不能拖拽到自己的子级中",reqPlugin:'可选扩展插件 "{1}" https://vxeui.com/other{0}/#/{1}/install'},table:{emptyText:"暂无数据",allTitle:"全选/取消",seqTitle:"序号",actionTitle:"操作",confirmFilter:"筛选",resetFilter:"重置",allFilter:"全部",sortAsc:"升序：最低到最高",sortDesc:"降序：最高到最低",filter:"对所选的列启用筛选",impSuccess:"成功导入 {0} 条记录",expLoading:"正在导出中",expSuccess:"导出成功",expError:"导出失败",expFilename:"导出_{0}",expOriginFilename:"导出_源_{0}",customTitle:"列设置",customAll:"全部",customConfirm:"确认",customClose:"关闭",customCancel:"取消",customRestore:"恢复默认",maxFixedCol:"最大冻结列的数量不能超过 {0} 个",dragTip:"移动：{0}",resizeColTip:"{0} 像素"},grid:{selectOneRecord:"请至少选择一条记录！",deleteSelectRecord:"您确定要删除所选记录吗？",removeSelectRecord:"您确定要移除所选记录吗？",dataUnchanged:"数据未改动！",delSuccess:"成功删除所选记录！",saveSuccess:"保存成功！",operError:"发生错误，操作失败！"},select:{search:"搜索",loadingText:"加载中",emptyText:"暂无数据"},pager:{goto:"前往",gotoTitle:"页数",pagesize:"{0}条/页",total:"共 {0} 条记录",pageClassifier:"页",homePage:"首页",homePageTitle:"首页",prevPage:"上一页",prevPageTitle:"上一页",nextPage:"下一页",nextPageTitle:"下一页",prevJump:"向上跳页",prevJumpTitle:"向上跳页",nextJump:"向下跳页",nextJumpTitle:"向下跳页",endPage:"末页",endPageTitle:"末页"},alert:{title:"系统提示"},button:{confirm:"确认",cancel:"取消"},filter:{search:"搜索"},custom:{cstmTitle:"列设置",cstmRestore:"恢复默认",cstmCancel:"取消",cstmConfirm:"确定",cstmConfirmRestore:"请确认是否恢复成默认列配置？",cstmDragTarget:"移动：{0}",setting:{colSort:"排序",sortHelpTip:"点击并拖动图标可以调整列的排序",colTitle:"列标题",colResizable:"列宽（像素）",colVisible:"是否显示",colFixed:"冻结列",colFixedMax:"冻结列（最多 {0} 列）",fixedLeft:"左侧",fixedUnset:"不设置",fixedRight:"右侧"}},import:{modes:{covering:"覆盖方式（直接覆盖表格数据）",insert:"底部追加（在表格的底部追加新数据）",insertTop:"顶部追加（在表格的顶部追加新数据）",insertBottom:"底部追加（在表格的底部追加新数据）"},impTitle:"导入数据",impFile:"文件名",impSelect:"选择文件",impType:"文件类型",impOpts:"参数设置",impMode:"导入模式",impConfirm:"导入",impCancel:"取消"},export:{types:{csv:"CSV (逗号分隔)(*.csv)",html:"网页(*.html)",xml:"XML 数据(*.xml)",txt:"文本文件(制表符分隔)(*.txt)",xls:"Excel 97-2003 工作簿(*.xls)",xlsx:"Excel 工作簿(*.xlsx)",pdf:"PDF (*.pdf)"},modes:{current:"当前数据（当前页的数据）",selected:"选中数据（当前页选中的数据）",all:"全量数据（包括所有分页的数据）"},printTitle:"打印数据",expTitle:"导出数据",expName:"文件名",expNamePlaceholder:"请输入文件名",expSheetName:"标题",expSheetNamePlaceholder:"请输入标题",expType:"保存类型",expMode:"选择数据",expCurrentColumn:"全部字段",expColumn:"选择字段",expOpts:"参数设置",expOptHeader:"表头",expHeaderTitle:"是否需要表头",expOptFooter:"表尾",expFooterTitle:"是否需要表尾",expOptColgroup:"分组表头",expColgroupTitle:"如果存在，则支持带有分组结构的表头",expOptMerge:"合并",expMergeTitle:"如果存在，则支持带有合并结构的单元格",expOptAllExpand:"展开层级",expAllExpandTitle:"如果存在，则支持将带有层级结构的数据全部展开",expOptUseStyle:"样式",expUseStyleTitle:"如果存在，则支持带样式的单元格",expOptOriginal:"源数据",expOriginalTitle:"如果为源数据，则支持导入到表格中",expPrint:"打印",expConfirm:"导出",expCancel:"取消"},modal:{errTitle:"错误提示",zoomMin:"最小化",zoomIn:"最大化",zoomOut:"还原",close:"关闭",miniMaxSize:"最小化窗口的数量不能超过 {0} 个",footPropErr:"show-footer 仅用于启用表尾，需配合 show-confirm-button | show-cancel-button | 插槽使用"},drawer:{close:"关闭"},form:{folding:"收起",unfolding:"展开"},toolbar:{import:"导入",export:"导出",print:"打印",refresh:"刷新",zoomIn:"全屏",zoomOut:"还原",custom:"列设置",customAll:"全部",customConfirm:"确认",customRestore:"重置",fixedLeft:"冻结在左侧",fixedRight:"冻结在右侧",cancelFixed:"取消冻结列"},input:{date:{m1:"01 月",m2:"02 月",m3:"03 月",m4:"04 月",m5:"05 月",m6:"06 月",m7:"07 月",m8:"08 月",m9:"09 月",m10:"10 月",m11:"11 月",m12:"12 月",quarterLabel:"{0} 年",monthLabel:"{0} 年",dayLabel:"{0} 年 {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy 年第 WW 周",month:"yyyy-MM",quarter:"yyyy 年第 q 季度",year:"yyyy"},weeks:{w:"周",w0:"周日",w1:"周一",w2:"周二",w3:"周三",w4:"周四",w5:"周五",w6:"周六"},months:{m0:"一月",m1:"二月",m2:"三月",m3:"四月",m4:"五月",m5:"六月",m6:"七月",m7:"八月",m8:"九月",m9:"十月",m10:"十一月",m11:"十二月"},quarters:{q1:"第一季度",q2:"第二季度",q3:"第三季度",q4:"第四季度"}}},numberInput:{currencySymbol:"￥"},imagePreview:{popupTitle:"预览",operBtn:{zoomOut:"缩小",zoomIn:"放大",pctFull:"等比例缩放",pct11:"显示原始尺寸",rotateLeft:"向左旋转",rotateRight:"向右旋转",print:"点击打印图片",download:"点击下载图片"}},upload:{fileBtnText:"点击或拖拽上传",imgBtnText:"点击或拖拽上传",dragPlaceholder:"请把文件拖放到这个区域即可上传",imgSizeHint:"单张{0}",imgCountHint:"最多{0}张",fileTypeHint:"支持 {0} 文件类型",fileSizeHint:"单个文件大小不超过{0}",fileCountHint:"最多可上传{0}个文件",uploadTypeErr:"文件类型不匹配！",overCountErr:"最多只能选择{0}个文件！",overCountExtraErr:"已超出最大数量{0}个，超出的{1}个文件将被忽略！",overSizeErr:"文件大小最大不能超过{0}！",reUpload:"重新上传",uploadProgress:"上传中 {0}%",uploadErr:"上传失败",uploadSuccess:"上传成功",moreBtnText:"更多（{0}）",viewItemTitle:"点击查看",morePopup:{readTitle:"查看列表",imageTitle:"上传图片",fileTitle:"上传文件"}},empty:{defText:"暂无数据"},colorPicker:{clear:"清除",confirm:"确认",copySuccess:"已复制到剪贴板：{0}"},formDesign:{formName:"表单名称",defFormTitle:"未命名的表单",widgetPropTab:"控件属性",widgetFormTab:"表单属性",error:{wdFormUni:"该类型的控件在表单中只允许添加一个",wdSubUni:"该类型的控件在子表中只允许添加一个"},styleSetting:{btn:"样式设置",title:"表单的样式设置",layoutTitle:"控件布局",verticalLayout:"上下布局",horizontalLayout:"横向布局",styleTitle:"标题样式",boldTitle:"标题加粗",fontBold:"加粗",fontNormal:"常规",colonTitle:"显示冒号",colonVisible:"显示",colonHidden:"隐藏",alignTitle:"对齐方式",widthTitle:"标题宽度",alignLeft:"居左",alignRight:"居右",unitPx:"像素",unitPct:"百分比"},widget:{group:{base:"基础控件",layout:"布局控件",system:"系统控件",module:"模块控件",chart:"图表控件",advanced:"高级控件"},copyTitle:"副本_{0}",component:{input:"输入框",textarea:"文本域",select:"下拉选择",row:"一行多列",title:"标题",text:"文本",subtable:"子表",VxeSwitch:"是/否",VxeInput:"输入框",VxeNumberInput:"数字",VxeDatePicker:"日期",VxeTextarea:"文本域",VxeSelect:"下拉选择",VxeTreeSelect:"树形选择",VxeRadioGroup:"单选框",VxeCheckboxGroup:"复选框",VxeUploadFile:"文件",VxeUploadImage:"图片",VxeRate:"评分",VxeSlider:"滑块"}},widgetProp:{name:"控件名称",placeholder:"提示语",required:"必填校验",multiple:"允许多选",displaySetting:{name:"显示设置",pc:"电脑端",mobile:"手机端",visible:"显示",hidden:"隐藏"},dataSource:{name:"数据源",defValue:"选项{0}",addOption:"添加选项",batchEditOption:"批量编辑",batchEditTip:"每行对应一个选项，支持从表格、Excel、WPS 中直接复制粘贴。",batchEditSubTip:"每行对应一个选项，如果是分组，子项可以是空格或制表键开头，支持从表格、Excel、WPS 中直接复制粘贴。",buildOption:"生成选项"},rowProp:{colSize:"列数",col2:"两列",col3:"三列",col4:"四列",col6:"六列",layout:"布局"},textProp:{name:"内容",alignTitle:"对齐方式",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",colorTitle:"字体颜色",sizeTitle:"字体大小",boldTitle:"字体加粗",fontNormal:"常规",fontBold:"加粗"},subtableProp:{seqTitle:"序号",showSeq:"显示序号",showCheckbox:"允许多选",errSubDrag:"子表不支持该控件，请使用其他控件",colPlace:"将控件拖拽进来"},uploadProp:{limitFileCount:"文件数量限制",limitFileSize:"文件大小限制",multiFile:"允许上传多个文件",limitImgCount:"图片数量限制",limitImgSize:"图片大小限制",multiImg:"允许上传多张图片"}}},listDesign:{fieldSettingTab:"字段设置",listSettingTab:"参数设置",searchTitle:"查询条件",listTitle:"列表字段",searchField:"查询字段",listField:"列表字段",activeBtn:{ActionButtonUpdate:"编辑",ActionButtonDelete:"删除"},search:{addBtn:"编辑",emptyText:"未配置查询条件",editPopupTitle:"编辑查询字段"},searchPopup:{colTitle:"标题",saveBtn:"保存"}},text:{copySuccess:"已复制到剪贴板",copyError:"当前环境不支持该操作"},countdown:{formats:{yyyy:"年",MM:"月",dd:"天",HH:"时",mm:"分",ss:"秒"}},plugins:{extendCellArea:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",selectErr:"无法操作指定区域的单元格",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作",cpInvalidErr:"该操作无法进行，您选择的区域中存在被禁止的列（{0}）"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},body:{row:"行：{0}",col:"列：{0}"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},filterComplexInput:{menus:{fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧"},cases:{equal:"等于",gt:"大于",lt:"小于",begin:"开头是",endin:"结尾是",include:"包含",isSensitive:"区分大小写"}},filterCombination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},empty:"(空白)",notData:"无匹配项"}},pro:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},renderer:{search:"搜索",cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},combination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结到左侧",fixedRight:"冻结到右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},empty:"(空白)",notData:"无匹配项"}}}},Yu=[Cr,wr,Rr,Ss,Os];function Gu(e,o){te.setConfig(o),Yu.forEach(n=>n.install(e))}if(!te.hasLanguage("zh-CN")){const e="zh-CN";te.setI18n(e,Uu),te.setLanguage(e)}te.setTheme("light");const Ju=Object.freeze(Object.defineProperty({__proto__:null,Colgroup:Fd,Column:Id,Grid:Ku,Table:Bu,Toolbar:ju,VXETable:id,VxeColgroup:wr,VxeColumn:Cr,VxeGrid:Rr,VxeTable:Ss,VxeToolbar:Os,VxeUI:te,_t:Ui,clipboard:ld,commands:td,config:qi,formats:ed,getConfig:Wc,getI18n:Uc,getIcon:Xc,getTheme:Nc,globalEvents:Yc,globalResize:Gc,hooks:sd,install:Gu,interceptor:od,log:nd,menus:Jc,modal:ud,print:dd,readFile:cd,renderer:Zc,saveFile:ad,setConfig:_c,setI18n:Kc,setIcon:zc,setLanguage:qc,setTheme:Vc,setup:Xi,t:Ki,use:rd,validators:Qc,version:vr},Symbol.toStringTag,{value:"Module"}));export{mr as D,jl as G,te as V,ac as a,cc as b,uc as c,Lc as d,fc as e,Pi as f,rc as g,rn as h,mc as i,vc as j,bc as k,wc as l,br as m,Ss as n,Cr as o,Fc as p,wr as q,jc as r,sc as s,Rr as t,Ac as u,Ec as v,Os as w,Ju as x};
