
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as N,Y as D,O as A,r as p,I as a,o as w,e as K,w as s,a as c,h as n,b as e,Z as O,c as E,t as i,$ as P,q as m,a0 as T,F as Z,f as j,_ as G}from"./index-BNUlLVNv.js";import{_ as H}from"./HTabList.vue_vue_type_script_setup_true_lang-CCM_imqJ.js";const M={class:"mb-6"},Q={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},X={class:"mb-4 flex-center-between"},Y={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},J={key:1,class:"flex-col-center"},W={class:"mt-2 op-50"},ee={class:"mt-4 text-center -mb-4"},le=N({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(C,{emit:L}){const h=C,g=L,{t:l}=D(),I=A(),S="kpu-web",f=p(!1),u=p("default"),x=p(),t=p({account:h.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),R=p({account:[{required:!0,trigger:"blur",message:l("loginFrom.rules.account")}],password:[{required:!0,trigger:"blur",message:l("loginFrom.rules.password")},{min:6,max:18,trigger:"blur",message:l("loginFrom.rules.passwordLength")}]});function _(){var d;(d=x.value)==null||d.validate(o=>{o&&(f.value=!0,I.login({username:t.value.account,password:t.value.password}).then(()=>{t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),g("onLogin",t.value.account)}).finally(()=>{f.value=!1}))})}function b(d){t.value.account=d,t.value.password="123456",_()}return(d,o)=>{const $=H,F=G,y=a("ElInput"),k=a("ElFormItem"),q=a("ElCheckbox"),V=a("ElLink"),v=a("ElButton"),B=a("el-image"),z=a("ElDivider"),U=a("ElForm");return w(),K(U,{ref_key:"formRef",ref:x,model:e(t),rules:e(R),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[c("div",M,[n($,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=r=>O(u)?u.value=r:null),options:[{label:e(l)("loginFrom.accountLogin"),value:"default"},{label:e(l)("loginFrom.qrcodeLogin"),value:"qrcode"}]},null,8,["modelValue","options"])]),e(u)==="default"?(w(),E(Z,{key:0},[c("h3",Q,i(e(l)("loginFrom.intro",{title:e(S)})),1),c("div",null,[n(k,{prop:"account"},{default:s(()=>[n(y,{modelValue:e(t).account,"onUpdate:modelValue":o[1]||(o[1]=r=>e(t).account=r),size:"large",placeholder:e(l)("loginFrom.form.account"),type:"text",tabindex:"1"},{prefix:s(()=>[n(F,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(k,{prop:"password"},{default:s(()=>[n(y,{modelValue:e(t).password,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).password=r),type:"password",size:"large",placeholder:e(l)("loginFrom.form.password"),tabindex:"2","show-password":"",onKeyup:P(_,["enter"])},{prefix:s(()=>[n(F,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),c("div",X,[n(q,{modelValue:e(t).remember,"onUpdate:modelValue":o[3]||(o[3]=r=>e(t).remember=r)},{default:s(()=>[m(i(e(l)("loginFrom.remember")),1)]),_:1},8,["modelValue"]),n(V,{type:"primary",underline:!1,onClick:o[4]||(o[4]=r=>g("onResetPassword",e(t).account))},{default:s(()=>[m(i(e(l)("loginFrom.forget")),1)]),_:1})]),n(v,{loading:e(f),type:"primary",size:"large",style:{width:"100%"},onClick:T(_,["prevent"])},{default:s(()=>[m(i(e(l)("loginFrom.form.login")),1)]),_:1},8,["loading"]),c("div",Y,[m(i(e(l)("loginFrom.noAccount"))+" ",1),n(V,{type:"primary",underline:!1,onClick:o[5]||(o[5]=r=>g("onRegister",e(t).account))},{default:s(()=>[m(i(e(l)("loginFrom.register")),1)]),_:1})])],64)):e(u)==="qrcode"?(w(),E("div",J,[n(B,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),c("div",W,i(e(l)("loginFrom.wechatQrcode")),1)])):j("",!0),c("div",ee,[n(z,null,{default:s(()=>[m(i(e(l)("loginFrom.testLogin")),1)]),_:1}),n(v,{type:"primary",size:"small",plain:"",onClick:o[6]||(o[6]=r=>b("kpu"))},{default:s(()=>o[8]||(o[8]=[m(" kpu ")])),_:1}),n(v,{size:"small",plain:"",onClick:o[7]||(o[7]=r=>b("test"))},{default:s(()=>o[9]||(o[9]=[m(" test ")])),_:1})])]),_:1},8,["model","rules"])}}});export{le as _};
