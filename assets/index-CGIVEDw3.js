
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{aZ as E,a_ as H,a$ as T,b0 as O,b1 as z,al as J,r as f,b2 as K,d as W,x as Z,aw as q,N as G,b as P,aQ as Q,y as X,l as ee,z as S,A as te,o as ae,c as ne,j as l,w as d,f as a,aH as se,aC as w,U as M,e as o,aD as oe,C as re,p as $,t as k,$ as le,D as ce,aE as ie,Z as ue,aI as de,aW as L,a0 as fe,_ as me,m as pe}from"./index-vu1a6MAo.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";function ge(e,t){return E(t,function(n){return e[n]})}function B(e){return e==null?[]:ge(e,H(e))}var ve=Math.floor,_e=Math.random;function F(e,t){return e+ve(_e()*(t-e+1))}function D(e){var t=e.length;return t?e[F(0,t-1)]:void 0}function he(e){return D(B(e))}function be(e){var t=T(e)?D:he;return t(e)}function j(e,t){var n=-1,c=e.length,u=c-1;for(t=t===void 0?c:t;++n<t;){var m=F(n,u),g=e[m];e[m]=e[n],e[n]=g}return e.length=t,e}function ye(e){return j(O(e))}function xe(e){return j(B(e))}function Se(e){var t=T(e)?ye:xe;return t(e)}const C=z().format("YYYY-MM-DD"),N=J("bing",()=>{const e=f([]);async function t(){JSON.parse(localStorage.getItem(`backgroundList-${C}`))||await K({url:"https://api.vuejs-core.cn/getBingImage",method:"get"}).then(({data:n})=>{e.value=n.data,Object.keys(localStorage).forEach(c=>{c.startsWith("backgroundList")&&localStorage.removeItem(c)}),localStorage.setItem(`backgroundList-${C}`,JSON.stringify(n.data))})}return{backgroundList:e,setBackgroundList:t}});N().setBackgroundList();const we={class:"flex-center cursor-pointer px-2 py-1"},Me={class:"screen-lock"},$e={class:"screen-lock-content"},Le={class:"screen-lock-content-title"},Ce=["src"],Ie={class:"screen-lock-content-form"},Te={class:"mb-4 flex items-center justify-center"},I="https://cdn.jsdelivr.net/gh/chuzhixin/image/vab-image-lock/",Be=W({name:"Lock",__name:"index",setup(e){const t={mounted(p){var s;(s=p.querySelector("input"))==null||s.focus()}},n=f({enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0"}),c=Z(()=>({enter:"duration-300 ease-out",enterFrom:"-translate-y-full",enterTo:"translate-y-0",leave:"duration-200 ease-in",leaveFrom:"translate-y-0",leaveTo:"-translate-y-full"})),{t:u}=q(),m="kpu-web",g=G(),r=P();function U(){r.lock=!0,L.local.set("lock","true")}function V(){r.lock=!1,L.local.set("lock","false")}const Y=N(),h=f(`${I}${Math.round(31*Math.random())}.jpg`),i=Q({background:"#a0cfff",backgroundSize:"100%",filter:"blur(5px)",transform:"scale(1.05)",transition:"all 3s  ease-in-out"});function b(){i.transform="scale(1.05)",i.transition="none",h.value=be(Se(Y.backgroundList))||`${I}${Math.round(31*Math.random())}.jpg`,i.background=`fixed url(${h.value}) center`,setTimeout(()=>{i.transform="scale(1.2)",i.transition="all 3s  ease-in-out"},0)}const R=f(),v=f({password:"123456"});async function y(){v.value.password==="123456"?await V():fe.error("请输入正确的密码",{zIndex:2001})}return X(()=>r.lock,()=>{setTimeout(()=>{r.lock?i.transform="scale(1.2)":i.transform="scale(1.05)"},500)},{immediate:!0}),ee(()=>{setTimeout(()=>{b()},50),S("alt+l",p=>{r.settings.toolbar.lock&&r.settings.navSearch.enableHotkeys&&(p.preventDefault(),r.lock=!0)})}),te(()=>{S.unbind("alt+l")}),(p,s)=>{const _=me,A=pe;return ae(),ne("div",we,[l(_,{name:"i-ri:lock-line",onClick:U}),l(a(de),{as:"template",appear:"",show:a(r).lock},{default:d(()=>[l(a(se),{class:"lock-drawer fixed inset-0 z-2000 flex backdrop-filter-none",onClose:s[2]||(s[2]=x=>a(r).lock=!1)},{default:d(()=>[l(a(w),M({as:"template"},a(n),{class:a(n).enterFrom,appear:""}),{default:d(()=>s[3]||(s[3]=[o("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1},16,["class"]),l(a(w),M({as:"template"},a(c),{class:a(c).enterFrom,appear:""}),{default:d(()=>[l(a(oe),{class:"overflow-hidden! p-0!",relative:"","w-full":"","w-screen":"",flex:"","flex-1":"","flex-col":"","bg-white":"","dark-bg-stone-8":"","focus-outline-none":""},{default:d(()=>[o("div",Me,[o("div",{id:"screen-lock-background",class:"screen-lock-background",style:re(a(i))},null,4),o("div",$e,[o("div",Le,[o("img",{width:"180px",src:a(g).avatar,alt:""},null,8,Ce),l(_,{name:"i-ri:lock-2-line",class:"i-ri:lock-2-line"}),$(" "+k(a(u)(a(m)))+" "+k(a(u)("屏幕已锁定")),1)]),o("div",Ie,[o("div",{ref_key:"formRef",ref:R,onSubmit:s[1]||(s[1]=le(()=>{},["prevent"]))},[o("div",Te,[ce(o("input",{"onUpdate:modelValue":s[0]||(s[0]=x=>a(v).password=x),class:"form-input",autocomplete:"off",placeholder:"请输出密码123456",type:"password",onKeyup:ue(y,["enter"])},null,544),[[ie,a(v).password],[t]]),l(A,{class:"form-button","native-type":"submit",type:"primary",onClick:y},{default:d(()=>[l(_,{name:"i-ri:rotate-lock-2-line",class:"i-ri:rotate-lock-2-line"}),$(" "+k(a(u)("解锁")),1)]),_:1})])],544)]),o("span",{onClick:b},k(a(u)("切换壁纸")),1)])])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1},8,["show"])])}}}),je=ke(Be,[["__scopeId","data-v-d54a0c2e"]]);export{je as default};
