
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{b5 as H,b6 as K,b7 as C,b8 as O,b9 as z,aV as E,r as f,ba as G,d as J,x as q,aA as P,N as W,b as Q,aY as X,y as Z,l as ee,z as S,A as te,o as ae,c as ne,j as l,w as d,f as a,aK as se,aF as w,a9 as L,e as o,aG as oe,C as re,p as M,t as k,ae as le,D as ce,aH as ie,ad as ue,aL as de,b1 as T,af as fe,_ as me,m as pe}from"./index-2if5aP_c.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";function ge(e,t){return H(t,function(n){return e[n]})}function F(e){return e==null?[]:ge(e,K(e))}var ve=Math.floor,be=Math.random;function I(e,t){return e+ve(be()*(t-e+1))}function j(e){var t=e.length;return t?e[I(0,t-1)]:void 0}function he(e){return j(F(e))}function _e(e){var t=C(e)?j:he;return t(e)}function D(e,t){var n=-1,c=e.length,u=c-1;for(t=t===void 0?c:t;++n<t;){var m=I(n,u),g=e[m];e[m]=e[n],e[n]=g}return e.length=t,e}function ye(e){return D(O(e))}function xe(e){return D(F(e))}function Se(e){var t=C(e)?ye:xe;return t(e)}const $=z().format("YYYY-MM-DD"),N=E("bing",()=>{const e=f([]);async function t(){JSON.parse(localStorage.getItem(`backgroundList-${$}`))||await G({url:"https://api.vuejs-core.cn/getBingImage",method:"get"}).then(({data:n})=>{e.value=n.data,Object.keys(localStorage).forEach(c=>{c.startsWith("backgroundList")&&localStorage.removeItem(c)}),localStorage.setItem(`backgroundList-${$}`,JSON.stringify(n.data))})}return{backgroundList:e,setBackgroundList:t}});N().setBackgroundList();const we={class:"flex-center cursor-pointer px-2 py-1"},Le={class:"screen-lock"},Me={class:"screen-lock-content"},Te={class:"screen-lock-content-title"},$e=["src"],Be={class:"screen-lock-content-form"},Ce={class:"mb-4 flex items-center justify-center"},B="https://cdn.jsdelivr.net/gh/chuzhixin/image/vab-image-lock/",Fe=J({name:"Lock",__name:"index",setup(e){const t={mounted(p){var s;(s=p.querySelector("input"))==null||s.focus()}},n=f({enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0"}),c=q(()=>({enter:"duration-300 ease-out",enterFrom:"-translate-y-full",enterTo:"translate-y-0",leave:"duration-200 ease-in",leaveFrom:"translate-y-0",leaveTo:"-translate-y-full"})),{t:u}=P(),m="kpu-web",g=W(),r=Q();function V(){r.lock=!0,T.local.set("lock","true")}function Y(){r.lock=!1,T.local.set("lock","false")}const U=N(),h=f(`${B}${Math.round(31*Math.random())}.jpg`),i=X({background:"#a0cfff",backgroundSize:"100%",filter:"blur(5px)",transform:"scale(1.05)",transition:"all 3s  ease-in-out"});function _(){i.transform="scale(1.05)",i.transition="none",h.value=_e(Se(U.backgroundList))||`${B}${Math.round(31*Math.random())}.jpg`,i.background=`fixed url(${h.value}) center`,setTimeout(()=>{i.transform="scale(1.2)",i.transition="all 3s  ease-in-out"},0)}const A=f(),v=f({password:"123456"});async function y(){v.value.password==="123456"?await Y():fe.error("请输入正确的密码",{zIndex:2001})}return Z(()=>r.lock,()=>{setTimeout(()=>{r.lock?i.transform="scale(1.2)":i.transform="scale(1.05)"},500)},{immediate:!0}),ee(()=>{setTimeout(()=>{_()},50),S("alt+l",p=>{r.settings.toolbar.lock&&r.settings.navSearch.enableHotkeys&&(p.preventDefault(),r.lock=!0)})}),te(()=>{S.unbind("alt+l")}),(p,s)=>{const b=me,R=pe;return ae(),ne("div",we,[l(b,{name:"i-ri:lock-line",onClick:V}),l(a(de),{as:"template",appear:"",show:a(r).lock},{default:d(()=>[l(a(se),{class:"lock-drawer fixed inset-0 z-2000 flex backdrop-filter-none",onClose:s[2]||(s[2]=x=>a(r).lock=!1)},{default:d(()=>[l(a(w),L({as:"template"},a(n),{class:a(n).enterFrom,appear:""}),{default:d(()=>s[3]||(s[3]=[o("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1},16,["class"]),l(a(w),L({as:"template"},a(c),{class:a(c).enterFrom,appear:""}),{default:d(()=>[l(a(oe),{class:"overflow-hidden! p-0!",relative:"","w-full":"","w-screen":"",flex:"","flex-1":"","flex-col":"","bg-white":"","dark-bg-stone-8":"","focus-outline-none":""},{default:d(()=>[o("div",Le,[o("div",{id:"screen-lock-background",class:"screen-lock-background",style:re(a(i))},null,4),o("div",Me,[o("div",Te,[o("img",{width:"180px",src:a(g).avatar,alt:""},null,8,$e),l(b,{name:"i-ri:lock-2-line",class:"i-ri:lock-2-line"}),M(" "+k(a(u)(a(m)))+" "+k(a(u)("屏幕已锁定")),1)]),o("div",Be,[o("div",{ref_key:"formRef",ref:A,onSubmit:s[1]||(s[1]=le(()=>{},["prevent"]))},[o("div",Ce,[ce(o("input",{"onUpdate:modelValue":s[0]||(s[0]=x=>a(v).password=x),class:"form-input",autocomplete:"off",placeholder:"请输出密码123456",type:"password",onKeyup:ue(y,["enter"])},null,544),[[ie,a(v).password],[t]]),l(R,{class:"form-button","native-type":"submit",type:"primary",onClick:y},{default:d(()=>[l(b,{name:"i-ri:rotate-lock-2-line",class:"i-ri:rotate-lock-2-line"}),M(" "+k(a(u)("解锁")),1)]),_:1})])],544)]),o("span",{onClick:_},k(a(u)("切换壁纸")),1)])])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1},8,["show"])])}}}),De=ke(Fe,[["__scopeId","data-v-ec6facab"]]);export{De as default};
