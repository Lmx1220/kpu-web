
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import B from"./HDropdown-CBQdiJ5K.js";import{d as M,j as R,u as H,ay as N,ax as D,x as V,y as O,r as T,z as q,o as d,c as u,h as o,w as l,a as b,b as a,f as m,aH as z,aM as E,n as y,F,U,e as v,q as j,t as A,a0 as P,L as G,_ as J,ar as K,k as Q}from"./index-BWACZs8a.js";import{S as W}from"./sortable.esm-Cw1ESr5Y.js";import{u as X}from"./useTabbar-CX4O3h5r.js";const Y={class:"h-6 w-6 flex-center cursor-pointer rounded-1 bg-[var(--g-container-bg)] text-lg shadow transition-background-color transition-shadow"},Z={class:"quick-button"},tt=["disabled"],at=["disabled"],et=["disabled"],st=["title","onClick"],ot=M({name:"TabbarMoreAction",__name:"moreAction",setup(nt){const L=R(),x=H(),f=N(),i=X(),{t:p}=D(),{generateI18nTitle:w}=V(),_=O(()=>i.getId()),k=T(),g=T(!1);q(()=>k.value,r=>{r&&new W(k.value.$el,{animation:200,ghostClass:"ghost",draggable:".tab",onStart:()=>{g.value=!0},onEnd:()=>{g.value=!1},onMove:e=>{const s=e.dragged,n=e.related;return s.classList.contains("pinned")?n.classList.contains("pinned"):!n.classList.contains("pinned")},onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&f.sort(e.newIndex,e.oldIndex)}})});function h(r){switch(r){case"search-tabs":G.emit("global-search-toggle","tab");break;case"other-side":i.closeOtherSide();break;case"left-side":i.closeLeftSide();break;case"right-side":i.closeRightSide();break}}function C(r,e,s){let n;return!r&&e||r&&!s?n=e:r&&s&&(n=s),n}return(r,e)=>{const s=J,n=K,$=B;return d(),u("div",null,[o($,{placement:"bottom-end","popper-class":"tabbar-dropdown"},{dropdown:l(()=>[b("div",Z,[a(x).settings.toolbar.navSearch?(d(),u("button",{key:0,class:"button",onClick:e[0]||(e[0]=t=>h("search-tabs"))},[o(n,{text:a(p)("app.tabbar.searchTabs")},{default:l(()=>[o(s,{name:"i-ri:search-line"})]),_:1},8,["text"])])):m("",!0),b("button",{class:"button",disabled:!a(i).checkCloseOtherSide(),onClick:e[1]||(e[1]=t=>h("other-side"))},[o(n,{text:a(p)("app.tabbar.closeOtherSide")},{default:l(()=>[o(s,{name:"i-ri:close-fill"})]),_:1},8,["text"])],8,tt),b("button",{class:"button",disabled:!a(i).checkCloseLeftSide(),onClick:e[2]||(e[2]=t=>h("left-side"))},[o(n,{text:a(p)("app.tabbar.closeLeftSide")},{default:l(()=>[o(s,{name:"i-ph:arrow-line-left"})]),_:1},8,["text"])],8,at),b("button",{class:"button",disabled:!a(i).checkCloseRightSide(),onClick:e[3]||(e[3]=t=>h("right-side"))},[o(n,{text:a(p)("app.tabbar.closeRightSide")},{default:l(()=>[o(s,{name:"i-ph:arrow-line-right"})]),_:1},8,["text"])],8,et)]),o(a(z),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"max-h-[300px]"},{default:l(()=>[o(E,{ref_key:"dropdownTabContainerRef",ref:k,name:a(g)?void 0:"dropdown-tab",tag:"div",class:y(["tabs",{dragging:a(g)}])},{default:l(()=>[(d(!0),u(F,null,U(a(f).list,t=>{var S,I;return d(),u("div",{key:t.tabId,class:y(["tab",{actived:t.tabId===a(_),pinned:t.isPermanent||t.isPin}])},[(d(),u("div",{key:t.tabId,class:"title",title:((S=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:S.title)||a(w)(t.title),onClick:c=>a(L).push(t.fullPath)},[a(x).settings.tabbar.enableIcon&&C(t.tabId===a(_),t.icon,t.activeIcon)?(d(),v(s,{key:0,name:C(t.tabId===a(_),t.icon,t.activeIcon)},null,8,["name"])):m("",!0),j(" "+A(((I=t.customTitleList.find(c=>c.fullPath===t.fullPath))==null?void 0:I.title)||a(w)(t.title)),1)],8,st)),!t.isPermanent&&t.isPin?(d(),v(s,{key:0,name:"i-ri:pushpin-2-fill",class:"action-icon",onClick:P(c=>a(f).unPin(t.tabId),["stop"])},null,8,["onClick"])):!t.isPermanent&&a(f).list.length>1?(d(),v(s,{key:1,name:"ri:close-fill",class:"action-icon",onClick:P(c=>a(i).closeById(t.tabId),["stop"])},null,8,["onClick"])):m("",!0)],2)}),128))]),_:1},8,["name","class"])]),_:1})]),default:l(()=>[b("div",Y,[o(s,{name:"i-ri:arrow-down-s-fill"})])]),_:1})])}}}),ct=Q(ot,[["__scopeId","data-v-f82179cd"]]);export{ct as default};
