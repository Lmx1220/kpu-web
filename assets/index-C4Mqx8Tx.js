
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as N,W as z,P,r as p,D as a,o as x,h as j,w as s,e as m,j as n,f as e,Y as A,c as E,t as i,af as K,s as c,ag as T,F as G,i as H,_ as M}from"./index-nFO8NRRw.js";import{_ as O}from"./HTabList.vue_vue_type_script_setup_true_lang-IRXxM8Bv.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-resolve-button-type-Dv44iQ7-.js";const W={class:"mb-6"},X={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},Y={class:"mb-4 flex-center-between"},Z={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},J={key:1,class:"flex-col-center"},ee={class:"mt-2 op-50"},oe={class:"mt-4 text-center -mb-4"},te=N({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(h,{emit:L}){const C=h,g=L,{t:l}=z(),I=P(),S="kpu-web",f=p(!1),u=p("default"),w=p(),t=p({account:C.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),R=p({account:[{required:!0,trigger:"blur",message:l("loginFrom.rules.account")}],password:[{required:!0,trigger:"blur",message:l("loginFrom.rules.password")},{min:6,max:18,trigger:"blur",message:l("loginFrom.rules.passwordLength")}]});function _(){var d;(d=w.value)==null||d.validate(o=>{o&&(f.value=!0,I.login({username:t.value.account,password:t.value.password}).then(()=>{t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),g("onLogin",t.value.account)}).finally(()=>{f.value=!1}))})}function F(d){t.value.account=d,t.value.password="123456",_()}return(d,o)=>{const B=O,b=M,y=a("ElInput"),k=a("ElFormItem"),$=a("ElCheckbox"),V=a("ElLink"),v=a("ElButton"),q=a("el-image"),U=a("ElDivider"),D=a("ElForm");return x(),j(D,{ref_key:"formRef",ref:w,model:e(t),rules:e(R),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[m("div",W,[n(B,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=r=>A(u)?u.value=r:null),options:[{label:e(l)("loginFrom.accountLogin"),value:"default"},{label:e(l)("loginFrom.qrcodeLogin"),value:"qrcode"}]},null,8,["modelValue","options"])]),e(u)==="default"?(x(),E(G,{key:0},[m("h3",X,i(e(l)("loginFrom.intro",{title:e(S)})),1),m("div",null,[n(k,{prop:"account"},{default:s(()=>[n(y,{modelValue:e(t).account,"onUpdate:modelValue":o[1]||(o[1]=r=>e(t).account=r),placeholder:e(l)("loginFrom.form.account"),type:"text",tabindex:"1"},{prefix:s(()=>[n(b,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(k,{prop:"password"},{default:s(()=>[n(y,{modelValue:e(t).password,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).password=r),type:"password",placeholder:e(l)("loginFrom.form.password"),tabindex:"2","show-password":"",onKeyup:K(_,["enter"])},{prefix:s(()=>[n(b,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),m("div",Y,[n($,{modelValue:e(t).remember,"onUpdate:modelValue":o[3]||(o[3]=r=>e(t).remember=r)},{default:s(()=>[c(i(e(l)("loginFrom.remember")),1)]),_:1},8,["modelValue"]),n(V,{type:"primary",underline:!1,onClick:o[4]||(o[4]=r=>g("onResetPassword",e(t).account))},{default:s(()=>[c(i(e(l)("loginFrom.forget")),1)]),_:1})]),n(v,{loading:e(f),type:"primary",size:"large",style:{width:"100%"},onClick:T(_,["prevent"])},{default:s(()=>[c(i(e(l)("loginFrom.form.login")),1)]),_:1},8,["loading"]),m("div",Z,[c(i(e(l)("loginFrom.noAccount"))+" ",1),n(V,{type:"primary",underline:!1,onClick:o[5]||(o[5]=r=>g("onRegister",e(t).account))},{default:s(()=>[c(i(e(l)("loginFrom.register")),1)]),_:1})])],64)):e(u)==="qrcode"?(x(),E("div",J,[n(q,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),m("div",ee,i(e(l)("loginFrom.wechatQrcode")),1)])):H("",!0),m("div",oe,[n(U,null,{default:s(()=>[c(i(e(l)("loginFrom.testLogin")),1)]),_:1}),n(v,{type:"primary",size:"small",plain:"",onClick:o[6]||(o[6]=r=>F("kpu"))},{default:s(()=>[c(" kpu ")]),_:1}),n(v,{size:"small",plain:"",onClick:o[7]||(o[7]=r=>F("test"))},{default:s(()=>[c(" test ")]),_:1})])]),_:1},8,["model","rules"])}}}),ae=Q(te,[["__scopeId","data-v-1817a065"]]);export{ae as default};
