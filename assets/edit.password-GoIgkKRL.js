
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as y}from"./index-BPe9gTgL.js";import{d as h,O as x,r as w,C as t,c as C,j as e,w as l,M as P,o as B,f as r,q as F,N as q,P as _}from"./index-BSkZKgnl.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-DpWBfo0M.js";const R=h({name:"PersonalEditPassword",__name:"edit.password",setup(U){const c=x(),d=w(),s=w({password:"",newpassword:"",checkpassword:""}),i=w({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(p,o,n)=>{o!==s.value.newpassword?n(new Error("请确认新密码")):n()}}]});function f(){d.value&&d.value.validate(p=>{p&&c.editPassword(s.value).then(()=>{q({type:"success",message:"模拟修改成功，请重新登录"}),c.logout()})})}return(p,o)=>{const n=I,u=t("ElInput"),m=t("ElFormItem"),g=t("ElForm"),E=t("ElCol"),V=t("ElRow"),b=P,k=t("ElButton"),v=y;return B(),C("div",null,[e(n,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(b,null,{default:l(()=>[e(V,null,{default:l(()=>[e(E,{md:24,lg:12},{default:l(()=>[e(g,{ref_key:"formRef",ref:d,model:r(s),rules:r(i),"label-width":"120px"},{default:l(()=>[e(m,{label:"原密码",prop:"password"},{default:l(()=>[e(u,{modelValue:r(s).password,"onUpdate:modelValue":o[0]||(o[0]=a=>r(s).password=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(m,{label:"新密码",prop:"newpassword"},{default:l(()=>[e(u,{modelValue:r(s).newpassword,"onUpdate:modelValue":o[1]||(o[1]=a=>r(s).newpassword=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(m,{label:"确认新密码",prop:"checkpassword"},{default:l(()=>[e(u,{modelValue:r(s).checkpassword,"onUpdate:modelValue":o[2]||(o[2]=a=>r(s).checkpassword=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(v,null,{default:l(()=>[e(k,{type:"primary",size:"large",onClick:f},{default:l(()=>o[3]||(o[3]=[F(" 提交 ")])),_:1})]),_:1})])}}});typeof _=="function"&&_(R);export{R as default};
