
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as z,X as D,Q as j,r as p,G as r,o as x,h as A,w as s,e as m,j as n,f as e,Z as G,c as h,v as i,ag as K,t as c,ah as P,F as Q,i as T,_ as X,l as Z}from"./index-fOXGxjjY.js";import{_ as H}from"./HTabList.vue_vue_type_script_setup_true_lang-C2tfL6Yu.js";import"./use-resolve-button-type-BSbqtZ82.js";const M={class:"mb-6"},O={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},J={class:"mb-4 flex-center-between"},W={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},Y={key:1,class:"flex-col-center"},ee={class:"mt-2 op-50"},oe={class:"mt-4 text-center -mb-4"},te=z({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(E,{emit:L}){const C=E,g=L,{t:l}=D(),I=j(),S="kpu-web",f=p(!1),u=p("default"),w=p(),t=p({account:C.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),R=p({account:[{required:!0,trigger:"blur",message:l("loginFrom.rules.account")}],password:[{required:!0,trigger:"blur",message:l("loginFrom.rules.password")},{min:6,max:18,trigger:"blur",message:l("loginFrom.rules.passwordLength")}]});function _(){var d;(d=w.value)==null||d.validate(o=>{o&&(f.value=!0,I.login({username:t.value.account,password:t.value.password}).then(()=>{t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),g("onLogin",t.value.account)}).finally(()=>{f.value=!1}))})}function F(d){t.value.account=d,t.value.password="123456",_()}return(d,o)=>{const B=H,b=X,y=r("ElInput"),k=r("ElFormItem"),$=r("ElCheckbox"),V=r("ElLink"),v=r("ElButton"),q=r("el-image"),U=r("ElDivider"),N=r("ElForm");return x(),A(N,{ref_key:"formRef",ref:w,model:e(t),rules:e(R),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[m("div",M,[n(B,{modelValue:e(u),"onUpdate:modelValue":o[0]||(o[0]=a=>G(u)?u.value=a:null),options:[{label:e(l)("loginFrom.accountLogin"),value:"default"},{label:e(l)("loginFrom.qrcodeLogin"),value:"qrcode"}]},null,8,["modelValue","options"])]),e(u)==="default"?(x(),h(Q,{key:0},[m("h3",O,i(e(l)("loginFrom.intro",{title:e(S)})),1),m("div",null,[n(k,{prop:"account"},{default:s(()=>[n(y,{modelValue:e(t).account,"onUpdate:modelValue":o[1]||(o[1]=a=>e(t).account=a),placeholder:e(l)("loginFrom.form.account"),type:"text",tabindex:"1"},{prefix:s(()=>[n(b,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(k,{prop:"password"},{default:s(()=>[n(y,{modelValue:e(t).password,"onUpdate:modelValue":o[2]||(o[2]=a=>e(t).password=a),type:"password",placeholder:e(l)("loginFrom.form.password"),tabindex:"2","show-password":"",onKeyup:K(_,["enter"])},{prefix:s(()=>[n(b,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),m("div",J,[n($,{modelValue:e(t).remember,"onUpdate:modelValue":o[3]||(o[3]=a=>e(t).remember=a)},{default:s(()=>[c(i(e(l)("loginFrom.remember")),1)]),_:1},8,["modelValue"]),n(V,{type:"primary",underline:!1,onClick:o[4]||(o[4]=a=>g("onResetPassword",e(t).account))},{default:s(()=>[c(i(e(l)("loginFrom.forget"))+"? ",1)]),_:1})]),n(v,{loading:e(f),type:"primary",size:"large",style:{width:"100%"},onClick:P(_,["prevent"])},{default:s(()=>[c(i(e(l)("loginFrom.form.login")),1)]),_:1},8,["loading"]),m("div",W,[c(i(e(l)("loginFrom.noAccount"))+"? ",1),n(V,{type:"primary",underline:!1,onClick:o[5]||(o[5]=a=>g("onRegister",e(t).account))},{default:s(()=>[c(i(e(l)("loginFrom.register")),1)]),_:1})])],64)):e(u)==="qrcode"?(x(),h("div",Y,[n(q,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),m("div",ee,i(e(l)("loginFrom.wechatQrcode")),1)])):T("",!0),m("div",oe,[n(U,null,{default:s(()=>[c(i(e(l)("loginFrom.testLogin")),1)]),_:1}),n(v,{type:"primary",size:"small",plain:"",onClick:o[6]||(o[6]=a=>F("kpu"))},{default:s(()=>[c(" admin ")]),_:1}),n(v,{size:"small",plain:"",onClick:o[7]||(o[7]=a=>F("test"))},{default:s(()=>[c(" test ")]),_:1})])]),_:1},8,["model","rules"])}}}),ae=Z(te,[["__scopeId","data-v-e4904aa9"]]);export{ae as default};
