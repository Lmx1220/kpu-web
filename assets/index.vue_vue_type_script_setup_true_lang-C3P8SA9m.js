
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as B,ag as j,P as q,r as h,o as D,b as N,e as a,y as i,f as t,j as e,ah as A,H as F,I as k,w as s,Z as S,T as $,W as U,X,x as c,p as Z,ai as E}from"./index-putfknEa.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-Db0VW2na.js";import{_ as H}from"./index-DaouMrR2.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-DhwDqiuf.js";import{u as Q,t as W,o as J,s as V,b as M,_ as v,a as b,c as I,F as x}from"./vee-validate-zod-DFzDRMRC.js";const Y={class:"min-h-500px w-full flex-col-stretch-center p-12"},tt={class:"mb-6 space-y-2"},et={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},ot={class:"mb-4"},st={class:"mb-4 flex-center-between"},at={class:"flex-center-start"},nt={class:"mt-4 flex-center gap-2 text-sm"},lt={class:"text-secondary-foreground op-50"},it={class:"mt-4 text-center -mb-4"},rt={class:"space-x-2"},ct={class:"flex-col-center"},ut={class:"mt-2 text-sm text-secondary-foreground op-50"},mt="kpu-web",vt=B({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(T,{emit:C}){const L=T,p=C,{t:n}=j(),P=q(),f=h(!1),u=h("default"),m=Q({validationSchema:W(J({account:V().min(1,n("loginFrom.rules.account")),password:V().min(1,n("loginFrom.rules.password")),remember:M()})),initialValues:{account:L.account??localStorage.getItem("login_account")??"",password:"",remember:!!localStorage.getItem("login_account")}}),_=m.handleSubmit(r=>{f.value=!0,P.login({username:r.account,password:r.password}).then(()=>{r.remember?localStorage.setItem("login_account",r.account):localStorage.removeItem("login_account"),p("onLogin",r.account)}).finally(()=>{f.value=!1})});function y(r){m.setFieldValue("account",r),m.setFieldValue("password","123456"),_()}return(r,o)=>{const R=O,w=H,K=G,d=Z,z=E;return D(),N("div",Y,[a("div",tt,[a("h3",et,i(t(n)("loginFrom.intro")),1),a("p",{class:"text-sm text-muted-foreground lg:text-base"},i(mt))]),a("div",ot,[e(R,{modelValue:t(u),"onUpdate:modelValue":o[0]||(o[0]=l=>A(u)?u.value=l:null),list:[{label:t(n)("loginFrom.accountLogin"),value:"default"},{label:t(n)("loginFrom.qrcodeLogin"),value:"qrcode"}],class:"inline-flex"},null,8,["modelValue","list"])]),F(a("div",null,[a("form",{onSubmit:o[3]||(o[3]=(...l)=>t(_)&&t(_)(...l))},[e(t(x),{name:"account"},{default:s(({componentField:l,errors:g})=>[e(t(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[e(t(b),null,{default:s(()=>[e(w,S({type:"text",placeholder:t(n)("loginFrom.form.account"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),e($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[e(t(I),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),e(t(x),{name:"password"},{default:s(({componentField:l,errors:g})=>[e(t(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[e(t(b),null,{default:s(()=>[e(w,S({type:"password",placeholder:t(n)("loginFrom.form.password"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),e($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[e(t(I),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),a("div",st,[a("div",at,[e(t(x),{type:"checkbox",name:"remember"},{default:s(({componentField:l})=>[e(t(v),null,{default:s(()=>[e(t(b),null,{default:s(()=>[e(K,U(X(l)),{default:s(()=>[c(i(t(n)("loginFrom.remember")),1)]),_:2},1040)]),_:2},1024)]),_:2},1024)]),_:1})]),e(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[1]||(o[1]=l=>p("onResetPassword",t(m).values.account))},{default:s(()=>[c(i(t(n)("loginFrom.forget")),1)]),_:1})]),e(d,{loading:t(f),size:"lg",class:"w-full",type:"submit"},{default:s(()=>[c(i(t(n)("loginFrom.form.login")),1)]),_:1},8,["loading"]),a("div",nt,[a("span",lt,i(t(n)("loginFrom.noAccount")),1),e(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[2]||(o[2]=l=>p("onRegister",t(m).values.account))},{default:s(()=>[c(i(t(n)("loginFrom.register")),1)]),_:1})])],32),a("div",it,[e(z,null,{default:s(()=>[c(i(t(n)("loginFrom.testLogin")),1)]),_:1}),a("div",rt,[e(d,{variant:"default",size:"sm",plain:"",onClick:o[4]||(o[4]=l=>y("kpu"))},{default:s(()=>o[6]||(o[6]=[c(" kpu ")])),_:1}),e(d,{variant:"outline",size:"sm",plain:"",onClick:o[5]||(o[5]=l=>y("test"))},{default:s(()=>o[7]||(o[7]=[c(" test ")])),_:1})])])],512),[[k,t(u)==="default"]]),F(a("div",null,[a("div",ct,[o[8]||(o[8]=a("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1)),a("div",ut,i(t(n)("loginFrom.wechatQrcode")),1)])],512),[[k,t(u)==="qrcode"]])])}}});export{vt as _};
