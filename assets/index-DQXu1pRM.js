
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-B0Xuimgy.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-C2ukESE2.js";import{d as g,P as B,r as b,aN as M,o as u,b as p,e as n,j as t,w as s,f as e,Z as y,T as x,x as K,p as V,F as C,m as O,n as A,y as v,i as T,h as D,l as L,u as R,B as U,ag as q,N as Z,ah as G,ad as H}from"./index-putfknEa.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-BjneWBqv.js";import{_ as Q}from"./index-DaouMrR2.js";import{u as W,t as X,o as Y,s as w,_ as k,a as P,c as $,F as S}from"./vee-validate-zod-DFzDRMRC.js";import{p as ee}from"./index-GW34aOAv.js";const te={class:"w-full flex-col-stretch-center"},se=g({name:"EditPasswordForm",__name:"EditPasswordForm",setup(m){const l=B(),o=b(!1),f=W({validationSchema:X(Y({password:w().min(1,"请输入原密码"),newPassword:w().min(1,"请输入新密码").min(6,"密码长度为6到18位").max(18,"密码长度为6到18位"),checkPassword:w().min(1,"请确认新密码")}).refine(c=>c.newPassword===c.checkPassword,{message:"两次输入的密码不一致",path:["checkPassword"]})),initialValues:{password:"",newPassword:"",checkPassword:""}}).handleSubmit(c=>{o.value=!0,l.editPassword(c).then(async()=>{M.success("模拟修改成功，请重新登录"),l.logout()}).finally(()=>{o.value=!1})});return(c,a)=>{const h=Q,_=V;return u(),p("div",te,[a[2]||(a[2]=n("div",{class:"mb-6 space-y-2"},[n("h3",{class:"text-4xl color-[var(--el-text-color-primary)] font-bold"}," 修改密码 "),n("p",{class:"text-sm text-muted-foreground lg:text-base"}," 请输入原密码、新密码和确认密码 ")],-1)),n("form",{onSubmit:a[0]||(a[0]=(...i)=>e(f)&&e(f)(...i))},[t(e(S),{name:"password"},{default:s(({componentField:i,errors:d})=>[t(e(k),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(P),null,{default:s(()=>[t(h,y({type:"password",placeholder:"请输入原密码",class:["w-full",d.length&&"border-destructive"]},i),null,16,["class"])]),_:2},1024),t(x,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e($),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(S),{name:"newPassword"},{default:s(({componentField:i,errors:d})=>[t(e(k),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(P),null,{default:s(()=>[t(h,y({type:"password",placeholder:"请输入新密码",class:["w-full",d.length&&"border-destructive"]},i),null,16,["class"])]),_:2},1024),t(x,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e($),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(S),{name:"checkPassword"},{default:s(({componentField:i,errors:d})=>[t(e(k),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(P),null,{default:s(()=>[t(h,y({type:"password",placeholder:"请确认新密码",class:["w-full",d.length&&"border-destructive"]},i),null,16,["class"])]),_:2},1024),t(x,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e($),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(_,{loading:e(o),size:"lg",class:"mt-8 w-full",type:"submit"},{default:s(()=>a[1]||(a[1]=[K(" 保存 ")])),_:1},8,["loading"])],32)])}}}),ae={class:"min-h-full w-full"},oe={class:"fixed inset-s-0 bottom-0 top-0 h-full w-40 border-e"},ne=["onClick"],le={class:"text-base text-accent-foreground leading-tight"},ce={class:"text-xs text-accent-foreground/50"},re={class:"ms-40 min-h-full flex-col-center p-10"},ie={key:0},de=g({__name:"profile",setup(m){const l=b(0),o=b([{title:"基本设置",description:"账号的基本信息，头像、昵称等"},{title:"安全设置",description:"定期修改密码可以提高帐号安全性"}]);return(r,f)=>(u(),p("div",ae,[n("div",oe,[(u(!0),p(C,null,O(e(o),(c,a)=>(u(),p("div",{key:a,class:A(["cursor-pointer px-4 py-3 transition-background-color space-y-2 hover-bg-accent/50",{"bg-accent hover-bg-accent!":e(l)===a}]),onClick:h=>l.value=a},[n("div",le,v(c.title),1),n("div",ce,v(c.description),1)],10,ne))),128))]),n("div",re,[e(l)===0?(u(),p("div",ie," 请开发者自行扩展 ")):T("",!0),e(l)===1?(u(),D(se,{key:1})):T("",!0)])]))}}),ue={class:"space-y-2"},pe={class:"text-xs text-secondary-foreground/50 font-light"},me={class:"flex-center-start gap-2"},_e={class:"space-y-1"},fe={class:"text-base lh-none"},he=g({__name:"index",setup(m){const l=L(),o=R(),r=B(),{generateI18nTitle:f}=U(),{t:c}=q(),a=b(!1);return(h,_)=>{const i=J,d=H,F=V,N=E,j=I;return u(),p(C,null,[t(N,{align:"end",items:[[{label:e(f)(e(o).settings.home.title),icon:"i-mdi:home",handle:()=>e(l).push({path:e(o).settings.home.fullPath}),hide:!e(o).settings.home.enable},{label:e(c)("app.preferences"),icon:"i-mdi:account",handle:()=>a.value=!0}],[{label:e(c)("app.hotkeys.title"),icon:"i-mdi:keyboard",handle:()=>e(Z).emit("global-hotkeys-intro-toggle"),hide:e(o).mode!=="pc"}],[{label:e(c)("app.logout"),icon:"i-mdi:logout",handle:()=>e(r).logout(e(o).settings.home.fullPath)}]],class:"flex-center"},{label:s(()=>[n("div",ue,[n("div",pe,v(e(c)("app.currentAccount")),1),n("div",me,[t(i,{src:e(r).avatar,fallback:e(r).account.slice(0,5),shape:"square"},null,8,["src","fallback"]),n("div",_e,[n("div",fe,v(e(r).account),1),_[1]||(_[1]=n("div",{class:"text-xs text-secondary-foreground/50 font-normal"}," 这里可以显示邮箱 ",-1))])])])]),default:s(()=>[t(F,{variant:"ghost",class:"h-9 flex-center gap-1 px-2"},{default:s(()=>[t(i,{src:e(r).avatar,class:"size-6"},{default:s(()=>[t(d,{name:"i-carbon:user-avatar-filled-alt",size:24,class:"text-secondary-foreground/50"})]),_:1},8,["src"]),e(o).mode==="pc"?(u(),p(C,{key:0},[K(v(e(r).account)+" ",1),t(d,{name:"i-ep:caret-bottom"})],64)):T("",!0)]),_:1})]),_:1},8,["items"]),t(j,{modelValue:e(a),"onUpdate:modelValue":_[0]||(_[0]=z=>G(a)?a.value=z:null),"align-center":"",header:!1,footer:!1,"close-on-click-overlay":!1,"close-on-press-escape":!1,class:"h-500px min-w-600px overflow-hidden","content-class":"min-h-full p-0 flex"},{default:s(()=>[t(de)]),_:1},8,["modelValue"])],64)}}}),ve=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));function ge(m){const l=Object.assign({"./ToolbarEnd/index.vue":ve}),o=`./${ee(m)}/index.vue`,r=l[o];return r||{default:g({name:"SlotsInvalidComponent",render:()=>null})}}function Se(m){const l=ge(m);return g(l.default)}export{Se as u};
