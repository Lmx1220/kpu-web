
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as R,i as M,u as N,v as L,x as U,y as O,b as y,o as w,e as S,w as v,h as k,c as j,U as B,q,t as F,F as V,aM as G,n as H,f as W,k as z}from"./index-D_P7dC0L.js";import J from"./index-DfMRq9fx.js";import{_ as K}from"./item.vue_vue_type_script_setup_true_lang-DOKiOCP1.js";var d={};Object.defineProperty(d,"__esModule",{value:!0});d.TokenData=void 0;d.parse=C;var Q=d.compile=te;d.match=re;d.pathToRegexp=A;d.stringify=ae;const E="/",T=n=>n,D=/^[$_\p{ID_Start}]$/u,b=/^[$\u200c\u200d\p{ID_Continue}]$/u,$="https://git.new/pathToRegexpError",X={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function Y(n){return n.replace(/[{}()\[\]+?!:*]/g,"\\$&")}function m(n){return n.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}function*Z(n){const t=[...n];let e=0;function a(){let r="";if(D.test(t[++e]))for(r+=t[e];b.test(t[++e]);)r+=t[e];else if(t[e]==='"'){let s=e;for(;e<t.length;){if(t[++e]==='"'){e++,s=0;break}t[e]==="\\"?r+=t[++e]:r+=t[e]}if(s)throw new TypeError(`Unterminated quote at ${s}: ${$}`)}if(!r)throw new TypeError(`Missing parameter name at ${e}: ${$}`);return r}for(;e<t.length;){const r=t[e],s=X[r];if(s)yield{type:s,index:e++,value:r};else if(r==="\\")yield{type:"ESCAPED",index:e++,value:t[e++]};else if(r===":"){const i=a();yield{type:"PARAM",index:e,value:i}}else if(r==="*"){const i=a();yield{type:"WILDCARD",index:e,value:i}}else yield{type:"CHAR",index:e,value:t[e++]}}return{type:"END",index:e,value:""}}class ee{constructor(t){this.tokens=t}peek(){if(!this._peek){const t=this.tokens.next();this._peek=t.value}return this._peek}tryConsume(t){const e=this.peek();if(e.type===t)return this._peek=void 0,e.value}consume(t){const e=this.tryConsume(t);if(e!==void 0)return e;const{type:a,index:r}=this.peek();throw new TypeError(`Unexpected ${a} at ${r}, expected ${t}: ${$}`)}text(){let t="",e;for(;e=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)t+=e;return t}}class x{constructor(t){this.tokens=t}}d.TokenData=x;function C(n,t={}){const{encodePath:e=T}=t,a=new ee(Z(n));function r(i){const o=[];for(;;){const c=a.text();c&&o.push({type:"text",value:e(c)});const u=a.tryConsume("PARAM");if(u){o.push({type:"param",name:u});continue}const l=a.tryConsume("WILDCARD");if(l){o.push({type:"wildcard",name:l});continue}if(a.tryConsume("{")){o.push({type:"group",tokens:r("}")});continue}return a.consume(i),o}}const s=r("END");return new x(s)}function te(n,t={}){const{encode:e=encodeURIComponent,delimiter:a=E}=t,r=n instanceof x?n:C(n,t),s=P(r.tokens,a,e);return function(o={}){const[c,...u]=s(o);if(u.length)throw new TypeError(`Missing parameters: ${u.join(", ")}`);return c}}function P(n,t,e){const a=n.map(r=>ne(r,t,e));return r=>{const s=[""];for(const i of a){const[o,...c]=i(r);s[0]+=o,s.push(...c)}return s}}function ne(n,t,e){if(n.type==="text")return()=>[n.value];if(n.type==="group"){const r=P(n.tokens,t,e);return s=>{const[i,...o]=r(s);return o.length?[""]:[i]}}const a=e||T;return n.type==="wildcard"&&e!==!1?r=>{const s=r[n.name];if(s==null)return["",n.name];if(!Array.isArray(s)||s.length===0)throw new TypeError(`Expected "${n.name}" to be a non-empty array`);return[s.map((i,o)=>{if(typeof i!="string")throw new TypeError(`Expected "${n.name}/${o}" to be a string`);return a(i)}).join(t)]}:r=>{const s=r[n.name];if(s==null)return["",n.name];if(typeof s!="string")throw new TypeError(`Expected "${n.name}" to be a string`);return[a(s)]}}function re(n,t={}){const{decode:e=decodeURIComponent,delimiter:a=E}=t,{regexp:r,keys:s}=A(n,t),i=s.map(o=>e===!1?T:o.type==="param"?e:c=>c.split(a).map(e));return function(c){const u=r.exec(c);if(!u)return!1;const l=u[0],p=Object.create(null);for(let f=1;f<u.length;f++){if(u[f]===void 0)continue;const h=s[f-1],_=i[f-1];p[h.name]=_(u[f])}return{path:l,params:p}}}function A(n,t={}){const{delimiter:e=E,end:a=!0,sensitive:r=!1,trailing:s=!0}=t,i=[],o=[],c=r?"":"i",l=(Array.isArray(n)?n:[n]).map(h=>h instanceof x?h:C(h,t));for(const{tokens:h}of l)for(const _ of g(h,0,[])){const I=se(_,e,i);o.push(I)}let p=`^(?:${o.join("|")})`;return s&&(p+=`(?:${m(e)}$)?`),p+=a?"$":`(?=${m(e)}|$)`,{regexp:new RegExp(p,c),keys:i}}function*g(n,t,e){if(t===n.length)return yield e;const a=n[t];if(a.type==="group"){const r=e.slice();for(const s of g(a.tokens,0,r))yield*g(n,t+1,s)}else e.push(a);yield*g(n,t+1,e)}function se(n,t,e){let a="",r="",s=!0;for(let i=0;i<n.length;i++){const o=n[i];if(o.type==="text"){a+=m(o.value),r+=o.value,s||(s=o.value.includes(t));continue}if(o.type==="param"||o.type==="wildcard"){if(!s&&!r)throw new TypeError(`Missing text after "${o.name}": ${$}`);o.type==="param"?a+=`(${oe(t,s?"":r)}+)`:a+="([\\s\\S]+)",e.push(o),r="",s=!1;continue}}return a}function oe(n,t){return t.length<2?n.length<2?`[^${m(n+t)}]`:`(?:(?!${m(n)})[^${m(t)}])`:n.length<2?`(?:(?!${m(t)})[^${m(n)}])`:`(?:(?!${m(t)}|${m(n)})[\\s\\S])`}function ae(n){return n.tokens.map(function t(e,a,r){if(e.type==="text")return Y(e.value);if(e.type==="group")return`{${e.tokens.map(t).join("")}}`;const i=ie(e.name)&&ue(r[a+1])?e.name:JSON.stringify(e.name);if(e.type==="param")return`:${i}`;if(e.type==="wildcard")return`*${i}`;throw new TypeError(`Unexpected token: ${e}`)}).join("")}function ie(n){const[t,...e]=n;return D.test(t)?e.every(a=>b.test(a)):!1}function ue(n){return(n==null?void 0:n.type)!=="text"?!0:!b.test(n.value[0])}const ce=R({name:"Breadcrumb",__name:"index",setup(n){const t=M(),e=N(),a=L(),{generateI18nTitle:r}=U(),s=O(()=>{var c,u;const o=[];if(e.settings.home.enable&&o.push({path:e.settings.home.fullPath,title:r(e.settings.home.title)}),t.fullPath!==e.settings.home.fullPath&&e.settings.breadcrumb.enableMainMenu&&!["single"].includes(e.settings.menu.mode)){const l=a.allMenus.findIndex(p=>p.children.some(f=>t.fullPath.indexOf(`${f.path}/`)===0||t.fullPath===f.path));(c=a.allMenus[l])!=null&&c.meta&&o.push({path:"",title:r((u=a.allMenus[l].meta)==null?void 0:u.title)})}if(t.meta.breadcrumbNeste){t.meta.breadcrumbNeste.forEach(p=>{p.hide===!1&&o.push({path:p.path,title:r(p.title)})});const l=e.customTitleList.find(p=>p.fullPath===t.fullPath);l&&(o[o.length-1].title=l.title)}return o});function i(o){return Q(o)(t.params)}return(o,c)=>y(e).mode==="pc"&&y(e).settings.app.routeBaseOn!=="filesystem"?(w(),S(J,{key:0,class:H(["breadcrumb whitespace-nowrap px-2",{[`breadcrumb-${y(e).settings.breadcrumb.style}`]:y(e).settings.breadcrumb.style!==""}])},{default:v(()=>[k(G,{name:"breadcrumb"},{default:v(()=>[(w(!0),j(V,null,B(y(s),(u,l)=>(w(),S(K,{key:`${l}_${u.path}_${u.title}`,to:l<y(s).length-1&&u.path!==""?i(u.path):""},{default:v(()=>[q(F(u.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1},8,["class"])):W("",!0)}}),me=z(ce,[["__scopeId","data-v-c97351fa"]]);export{me as default};
