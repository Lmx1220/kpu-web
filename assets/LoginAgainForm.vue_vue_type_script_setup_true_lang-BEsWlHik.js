
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as $,P as B,u as P,ag as j,r as g,o as q,b as K,e as o,y as r,f as s,j as t,ah as N,H as _,I as v,w as a,Z as b,T as y,x as k,p as C}from"./index-putfknEa.js";import{_ as D}from"./index-DaouMrR2.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-DhwDqiuf.js";import{u as Z,t as z,o as E,s as x,_ as h,a as w,c as F,F as A}from"./vee-validate-zod-DFzDRMRC.js";const G={class:"w-full flex-col-stretch-center p-12"},H={class:"mb-6 space-y-2"},O={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},Q={class:"text-sm text-muted-foreground lg:text-base"},R={class:"mb-4"},X={class:"flex-col-center"},J={class:"mt-2 text-sm text-secondary-foreground op-50"},os=$({__name:"LoginAgainForm",emits:["onAfterLogin"],setup(M,{emit:S}){const T=S,u=B(),V=P(),{t:e}=j(),m=g(!1),i=g("default"),p=Z({validationSchema:z(E({account:x().min(1,e("loginAgainFrom.rules.account")),password:x().min(1,e("loginAgainFrom.rules.password"))})),initialValues:{account:u.account,password:""}}).handleSubmit(c=>{m.value=!0,u.login({username:c.account,password:c.password}).then(async()=>{V.settings.app.enablePermission&&await u.getPermissions(),T("onAfterLogin",c.account)}).finally(()=>{m.value=!1})});return(c,l)=>{const I=U,f=D,L=C;return q(),K("div",G,[o("div",H,[o("h3",O,r(s(e)("loginAgainFrom.intro")),1),o("p",Q,r(s(e)("loginAgainFrom.subIntro")),1)]),o("div",R,[t(I,{modelValue:s(i),"onUpdate:modelValue":l[0]||(l[0]=n=>N(i)?i.value=n:null),list:[{label:s(e)("loginAgainFrom.accountLogin"),value:"default"},{label:s(e)("loginAgainFrom.qrcodeLogin"),value:"qrcode"}],class:"inline-flex"},null,8,["modelValue","list"])]),_(o("div",null,[o("form",{onSubmit:l[1]||(l[1]=(...n)=>s(p)&&s(p)(...n))},[t(s(A),{name:"account"},{default:a(({componentField:n,errors:d})=>[t(s(h),{class:"relative pb-6 space-y-0"},{default:a(()=>[t(s(w),null,{default:a(()=>[t(f,b({type:"text",placeholder:s(e)("loginAgainFrom.form.account"),class:["w-full",d.length&&"border-destructive"],disabled:""},n),null,16,["placeholder","class"])]),_:2},1024),t(y,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[t(s(F),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(s(A),{name:"password"},{default:a(({componentField:n,errors:d})=>[t(s(h),{class:"relative pb-6 space-y-0"},{default:a(()=>[t(s(w),null,{default:a(()=>[t(f,b({type:"password",placeholder:s(e)("loginAgainFrom.form.password"),class:["w-full",d.length&&"border-destructive"]},n),null,16,["placeholder","class"])]),_:2},1024),t(y,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:a(()=>[t(s(F),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(L,{loading:s(m),size:"lg",class:"w-full",type:"submit"},{default:a(()=>[k(r(s(e)("loginAgainFrom.form.login")),1)]),_:1},8,["loading"])],32)],512),[[v,s(i)==="default"]]),_(o("div",null,[o("div",X,[l[2]||(l[2]=o("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1)),o("div",J,r(s(e)("loginAgainFrom.wechatQrcode")),1)])],512),[[v,s(i)==="qrcode"]])])}}});export{os as _};
