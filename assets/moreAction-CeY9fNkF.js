
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CrH7osH_.js";import{d as V,l as O,u as A,aX as D,bn as E,B as F,c as U,r as x,C as j,o as l,b as u,j as s,w as o,e as T,f as a,F as C,h as _,i as w,aV as G,n as L,m as X,N as q,_ as H,p as J,aI as Q,aU as W,x as Y,y as Z,bp as z,s as ee}from"./index-putfknEa.js";import{_ as ae}from"./index-DaouMrR2.js";import{S as te}from"./sortable.esm-C83syoBY.js";import{u as se}from"./useTabbar-CyYdn1mD.js";const ne={class:"max-h-[320px] w-[200px] flex flex-col"},oe={class:"flex-center-between gap-2 p-4"},ie=["title","onClick"],le=V({name:"TabbarMoreAction",__name:"moreAction",setup(re){const B=O(),S=A(),p=D(),r=se(),{t:f}=E(),{generateI18nTitle:I}=F(),h=U(()=>r.getId()),m=x(),g=x(!1),v=x(!1);j(()=>m.value,c=>{c&&new te(m.value.$el,{animation:200,ghostClass:"ghost",draggable:".tab",onStart:()=>{g.value=!0},onEnd:()=>{g.value=!1},onMove:t=>{const n=t.dragged,i=t.related;return n.classList.contains("pinned")?i.classList.contains("pinned"):!i.classList.contains("pinned")},onUpdate:t=>{t.newIndex!==void 0&&t.oldIndex!==void 0&&p.sort(t.newIndex,t.oldIndex)}})});function k(c){switch(c){case"search-tabs":q.emit("global-search-toggle","tab");break;case"other-side":r.closeOtherSide();break;case"left-side":r.closeLeftSide();break;case"right-side":r.closeRightSide();break}}function y(c,t,n){let i;return!c&&t||c&&!n?i=t:c&&n&&(i=n),i}return(c,t)=>{const n=H,i=J,N=ae,b=Q,R=W,K=M;return l(),u("div",null,[s(K,{align:"end",class:"min-w-auto p-0"},{panel:o(()=>[T("div",ne,[T("div",oe,[a(v)?(l(),u(C,{key:0},[s(N,{placeholder:a(f)("searchPlaceholder"),class:"h-8 w-0 flex-1 border border-input rounded-md bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none"},null,8,["placeholder"]),s(i,{variant:"outline",size:"icon",class:"h-8 w-8",onClick:t[0]||(t[0]=e=>v.value=!1)},{default:o(()=>[s(n,{name:"i-ri:close-fill",size:16})]),_:1})],64)):(l(),u(C,{key:1},[s(b,{text:a(f)("app.tabbar.searchTabs")},{default:o(()=>[a(S).settings.toolbar.navSearch?(l(),_(i,{key:0,variant:"secondary",size:"icon",class:"h-8 w-8",onClick:t[1]||(t[1]=e=>v.value=!0)},{default:o(()=>[s(n,{name:"i-ri:search-line"})]),_:1})):w("",!0)]),_:1},8,["text"]),s(b,{text:a(f)("app.tabbar.closeOtherSide")},{default:o(()=>[s(i,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!a(r).checkCloseOtherSide(),onClick:t[2]||(t[2]=e=>k("other-side"))},{default:o(()=>[s(n,{name:"i-ri:close-fill"})]),_:1},8,["disabled"])]),_:1},8,["text"]),s(b,{text:a(f)("app.tabbar.closeLeftSide")},{default:o(()=>[s(i,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!a(r).checkCloseLeftSide(),onClick:t[3]||(t[3]=e=>k("left-side"))},{default:o(()=>[s(n,{name:"i-ph:arrow-line-left"})]),_:1},8,["disabled"])]),_:1},8,["text"]),s(b,{text:a(f)("app.tabbar.closeRightSide")},{default:o(()=>[s(i,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!a(r).checkCloseRightSide(),onClick:t[4]||(t[4]=e=>k("right-side"))},{default:o(()=>[s(n,{name:"i-ph:arrow-line-right"})]),_:1},8,["disabled"])]),_:1},8,["text"])],64))]),s(R,{scrollbar:!1,mask:"","gradient-color":"hsl(var(--popover))",class:"mb-4 flex-1 -mt-2"},{default:o(()=>[s(G,{ref_key:"dropdownTabContainerRef",ref:m,tag:"div",class:L(["tabs space-y-1",{dragging:a(g)}])},{default:o(()=>[(l(!0),u(C,null,X(a(p).list,e=>{var $,P;return l(),u("div",{key:e.tabId,class:L(["relative mx-4 h-8 rounded-md px-2 tab",{"bg-accent":e.tabId===a(h),pinned:e.isPermanent||e.isPin}])},[(l(),u("div",{key:e.tabId,class:"title",title:(($=e.customTitleList.find(d=>d.fullPath===e.fullPath))==null?void 0:$.title)||a(I)(e.title),onClick:d=>a(B).push(e.fullPath)},[a(S).settings.tabbar.enableIcon&&y(e.tabId===a(h),e.icon,e.activeIcon)?(l(),_(n,{key:0,name:y(e.tabId===a(h),e.icon,e.activeIcon)},null,8,["name"])):w("",!0),Y(" "+Z(((P=e.customTitleList.find(d=>d.fullPath===e.fullPath))==null?void 0:P.title)||a(I)(e.title)),1)],8,ie)),!e.isPermanent&&e.isPin?(l(),_(n,{key:0,name:"i-ri:pushpin-2-fill",class:"action-icon",onClick:z(d=>a(p).unPin(e.tabId),["stop"])},null,8,["onClick"])):!e.isPermanent&&a(p).list.length>1?(l(),_(n,{key:1,name:"ri:close-fill",class:"action-icon",onClick:z(d=>a(r).closeById(e.tabId),["stop"])},null,8,["onClick"])):w("",!0)],2)}),128))]),_:1},8,["class"])]),_:1})])]),default:o(()=>[s(i,{variant:"outline",size:"icon",class:"h-7 w-7"},{default:o(()=>[s(n,{name:"i-ep:caret-bottom"})]),_:1})]),_:1})])}}}),be=ee(le,[["__scopeId","data-v-e6a4bdf4"]]);export{be as default};
