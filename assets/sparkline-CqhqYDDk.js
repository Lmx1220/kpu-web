
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-BYjOVmS1.js";import{d as W,bl as O,r as $,v as z,o as C,b as y,H as Z,I as G,f as i,q as J,y as Q,i as T,s as U,j as h,w as tt}from"./index-putfknEa.js";import{_ as et}from"./index.vue_vue_type_script_setup_true_lang-CjtEiaWg.js";function P(t,o,e,l){return Number.parseFloat((o-l*o/t+e).toFixed(2))}function ot(t){[...t.querySelectorAll("*")].forEach(o=>t.removeChild(o))}function lt(t){return t.value}function _(t,o){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in o)e.setAttribute(l,o[l]);return e}function at(t,o,e){if(ot(t),o.length<=1)return;e=e||{},typeof o[0]=="number"&&(o=o.map(s=>({value:s})));const l=e.onmousemove,a=e.onmouseout,f="interactive"in e?e.interactive:!!l,n=e.spotRadius||2,u=n*2,I=e.cursorWidth||2,S=Number.parseFloat(t.attributes["stroke-width"].value),K=e.fetch||lt,b=o.map(s=>K(s)),M=Number.parseFloat(t.attributes.width.value)-u*2,w=Number.parseFloat(t.attributes.height.value),N=w-S*2-u,D=Math.max(...b),c=-1e3,F=b.length-1,R=M/F,m=[],V=P(D,N,S+n,b[0]);let g=`M${u} ${V}`;b.forEach((s,d)=>{const r=d*R+u,p=P(D,N,S+n,s);m.push(Object.assign({},o[d],{index:d,x:r,y:p})),g+=` L ${r} ${p}`});const B=_("path",{class:"sparkline--line",d:g,fill:"none"}),H=`${g} V ${w} L ${u} ${w} Z`,X=_("path",{class:"sparkline--fill",d:H,stroke:"none"});if(t.appendChild(X),t.appendChild(B),!f)return;const v=_("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:w,"stroke-width":I}),x=_("circle",{class:"sparkline--spot",cx:c,cy:c,r:n});t.appendChild(v),t.appendChild(x);const A=_("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(A),A.addEventListener("mouseout",s=>{v.setAttribute("x1",c.toString()),v.setAttribute("x2",c.toString()),x.setAttribute("cx",c.toString()),a&&a(s)}),A.addEventListener("mousemove",s=>{const d=s.offsetX;let r=m.find(j=>j.x>=d);r||(r=m[F]);const p=m[m.indexOf(r)-1];let k,L;p?(L=p.x+(r.x-p.x)/2,k=d>=L?r:p):k=r;const E=k.x,Y=k.y;x.setAttribute("cx",E),x.setAttribute("cy",Y),v.setAttribute("x1",E),v.setAttribute("x2",E),l&&l(s,k)})}const st={class:"sparkline"},nt=["width","height","stroke-width","stroke","fill"],rt=W({name:"KSparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){O(a=>({56361300:a.cursorColor,"04c6d514":a.spotColor}));const o=t,e=$(),l=$({show:!1,content:"",top:0,left:0});return z(()=>{at(e.value,o.value,o.tooltip&&{onmousemove:(a,f)=>{l.value.show=!0,l.value.content=f.tooltip,l.value.top=a.offsetY,l.value.left=a.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(a,f)=>(C(),y("div",st,[(C(),y("svg",{ref_key:"sparklineRef",ref:e,width:a.width,height:a.height,"stroke-width":a.strokeWidth,stroke:a.strokeColor,fill:a.fillColor},null,8,nt)),a.tooltip?Z((C(),y("span",{key:0,class:"tooltip",style:J([`left: ${i(l).left}px`,`top: ${i(l).top}px`])},Q(i(l).content),5)),[[G,i(l).show]]):T("",!0)]))}}),it=U(rt,[["__scopeId","data-v-bda852de"]]),ft=W({name:"ComponentExampleSparkline",__name:"sparkline",setup(t){const o=$([1,5,2,4,8,3,7]),e=$([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,a)=>{const f=et,n=it,u=q;return C(),y("div",null,[h(f,{title:"迷你图",content:"Sparkline"}),h(u,null,{default:tt(()=>[h(n,{value:i(o)},null,8,["value"]),h(n,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(n,{value:i(e),tooltip:""},null,8,["value"]),h(n,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});export{ft as default};
