
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as B,P as q,r as h,$ as n,o as D,a as N,b as a,M as i,e as t,h as e,Q as U,R as F,S,w as s,z as k,T as $,t as j,v as A,L as c,U as Q,m as E,V as G}from"./bootstrap-BssOdyNs.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CkjT5ZXv.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-CGivfc7g.js";import{u as X,t as Z,o as H,s as V,b as J,_ as v,a as b,c as T,F as x}from"./vee-validate-zod-CH1tI7Ov.js";const W={class:"min-h-500px w-full flex-col-stretch-center p-12"},Y={class:"mb-6 space-y-2"},tt={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},et={class:"mb-4"},ot={class:"mb-4 flex-center-between"},st={class:"flex-center-start"},at={class:"mt-4 flex-center gap-2 text-sm"},nt={class:"text-secondary-foreground op-50"},lt={class:"mt-4 text-center -mb-4"},it={class:"space-x-2"},rt={class:"flex-col-center"},ct={class:"mt-2 text-sm text-secondary-foreground op-50"},ut="kpu-web",ft=B({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(C,{emit:L}){const R=C,p=L,I=q(),_=h(!1),u=h("default"),m=X({validationSchema:Z(H({account:V().min(1,n("loginFrom.rules.account")),password:V().min(1,n("loginFrom.rules.password")),remember:J()})),initialValues:{account:R.account??localStorage.getItem("login_account")??"",password:"",remember:!!localStorage.getItem("login_account")}}),f=m.handleSubmit(r=>{_.value=!0,I.login({username:r.account,password:r.password}).then(()=>{r.remember?localStorage.setItem("login_account",r.account):localStorage.removeItem("login_account"),p("onLogin",r.account)}).finally(()=>{_.value=!1})});function y(r){m.setFieldValue("account",r),m.setFieldValue("password","123456"),f()}return(r,o)=>{const P=O,w=Q,z=M,d=E,K=G;return D(),N("div",W,[a("div",Y,[a("h3",tt,i(t(n)("loginFrom.intro")),1),a("p",{class:"text-sm text-muted-foreground lg:text-base"},i(ut))]),a("div",et,[e(P,{modelValue:t(u),"onUpdate:modelValue":o[0]||(o[0]=l=>U(u)?u.value=l:null),list:[{label:t(n)("loginFrom.accountLogin"),value:"default"},{label:t(n)("loginFrom.qrcodeLogin"),value:"qrcode"}],class:"inline-flex"},null,8,["modelValue","list"])]),F(a("div",null,[a("form",{onSubmit:o[3]||(o[3]=(...l)=>t(f)&&t(f)(...l))},[e(t(x),{name:"account"},{default:s(({componentField:l,errors:g})=>[e(t(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[e(t(b),null,{default:s(()=>[e(w,k({type:"text",placeholder:t(n)("loginFrom.form.account"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),e($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[e(t(T),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),e(t(x),{name:"password"},{default:s(({componentField:l,errors:g})=>[e(t(v),{class:"relative pb-6 space-y-0"},{default:s(()=>[e(t(b),null,{default:s(()=>[e(w,k({type:"password",placeholder:t(n)("loginFrom.form.password"),class:["w-full",g.length&&"border-destructive"]},l),null,16,["placeholder","class"])]),_:2},1024),e($,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[e(t(T),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),a("div",ot,[a("div",st,[e(t(x),{type:"checkbox",name:"remember"},{default:s(({componentField:l})=>[e(t(v),null,{default:s(()=>[e(t(b),null,{default:s(()=>[e(z,j(A(l)),{default:s(()=>[c(i(t(n)("loginFrom.remember")),1)]),_:2},1040)]),_:2},1024)]),_:2},1024)]),_:1})]),e(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[1]||(o[1]=l=>p("onResetPassword",t(m).values.account))},{default:s(()=>[c(i(t(n)("loginFrom.forget")),1)]),_:1})]),e(d,{loading:t(_),size:"lg",class:"w-full",type:"submit"},{default:s(()=>[c(i(t(n)("loginFrom.form.login")),1)]),_:1},8,["loading"]),a("div",at,[a("span",nt,i(t(n)("loginFrom.noAccount")),1),e(d,{variant:"link",class:"h-auto p-0",type:"button",onClick:o[2]||(o[2]=l=>p("onRegister",t(m).values.account))},{default:s(()=>[c(i(t(n)("loginFrom.register")),1)]),_:1})])],32),a("div",lt,[e(K,null,{default:s(()=>[c(i(t(n)("loginFrom.testLogin")),1)]),_:1}),a("div",it,[e(d,{variant:"default",size:"sm",plain:"",onClick:o[4]||(o[4]=l=>y("kpu"))},{default:s(()=>o[6]||(o[6]=[c(" kpu ")])),_:1}),e(d,{variant:"outline",size:"sm",plain:"",onClick:o[5]||(o[5]=l=>y("test"))},{default:s(()=>o[7]||(o[7]=[c(" test ")])),_:1})])])],512),[[S,t(u)==="default"]]),F(a("div",null,[a("div",rt,[o[8]||(o[8]=a("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1)),a("div",ct,i(t(n)("loginFrom.wechatQrcode")),1)])],512),[[S,t(u)==="qrcode"]])])}}});export{ft as _};
