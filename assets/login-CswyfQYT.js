
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-C-UfPR4o.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-BKbVgd95.js";import{d as oe,u as te,a as le,b as ae,c as se,r as d,s as h,e as v,f as ne,h as e,w as t,i as s,j as o,k as F,v as U,p as re,l as ie,m as de,o as ue,t as $,n as pe,q as i,x as q,y as z,_ as ce,z as me}from"./index-RH8yPTKC.js";import ge from"./index-ceu5hOUI.js";import"./HDropdownMenu.vue_vue_type_script_setup_true_lang-9JE-MPF_.js";const y=b=>(re("data-v-e04534f1"),b=b(),ie(),b),fe=y(()=>s("div",{class:"bg-banner"},null,-1)),_e={id:"login-box"},ve={class:"login-banner"},we=["src"],he=["src"],ye={class:"title-container"},be={class:"title"},ke={class:"flex-bar"},xe={class:"sub-link"},Ve=y(()=>s("span",{class:"text"},"还没有帐号?",-1)),Ee={style:{"margin-top":"20px","margin-bottom":"-20px","text-align":"center"}},Ce=y(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),Re={class:"sub-link"},Se=y(()=>s("span",{class:"text"},"已经有帐号?",-1)),Fe=y(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),Ue={class:"sub-link"},qe=oe({name:"Login",__name:"login",setup(b){var P;const{t:x}=de(),L=new URL("/assets/logo-BGVN89r2.png",import.meta.url).href,B=new URL("/assets/login-banner-ZfMZACb6.png",import.meta.url).href,D="kpu-web",N=te(),M=le(),A=ae(),K=se(),m=d("login"),w=d(!1),T=d(((P=N.query.redirect)==null?void 0:P.toString())??K.settings.home.fullPath),V=d(),n=d({account:h.local.get("login_account")??"",password:"",remember:h.local.has("login_account")}),Z=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]});function E(){V.value&&V.value.validate(f=>{if(f){w.value=!0;try{A.login({username:n.value.account,password:n.value.password}).then(()=>{w.value=!1,n.value.remember?h.local.set("login_account",n.value.account??""):h.local.remove("login_account"),M.push(T.value)}).catch(()=>{w.value=!1})}catch(l){console.error(l)}}})}const C=d(),u=d({account:"",captcha:"",password:"",checkPassword:""}),j=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(f,l,r)=>{l!==u.value.password?r(new Error("两次输入的密码不一致")):r()}}]});function G(){z({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),C.value&&C.value.validate(f=>{})}const R=d(),g=d({account:h.local.get("login_account")??"",captcha:"",newPassword:""}),H=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"}]});function J(){z({message:"重置密码模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),R.value&&R.value.validate(f=>{})}function I(f){n.value.account=f,n.value.password="kpu",E()}return(f,l)=>{const r=ce,O=ee,p=v("ElInput"),c=v("ElFormItem"),Q=v("ElCheckbox"),k=v("ElLink"),_=v("ElButton"),W=v("ElDivider"),S=v("ElForm"),X=Y;return ue(),ne("div",null,[fe,e(O,{class:"i18n-selector"},{default:t(()=>[e(r,{name:"i-ri:translate"})]),_:1}),s("div",_e,[s("div",ve,[s("img",{src:o(L),class:"logo"},null,8,we),s("img",{src:o(B),class:"banner"},null,8,he)]),F(e(S,{ref_key:"loginFormRef",ref:V,model:o(n),rules:o(Z),class:"login-form",autocapitalize:"on"},{default:t(()=>[s("div",ye,[s("h3",be," 欢迎来到 "+$(o(D))+" ! 👋🏻 ",1)]),s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(n).account,"onUpdate:modelValue":l[0]||(l[0]=a=>o(n).account=a),placeholder:o(x)("app.account"),autocomplete:"on",tabindex:"1",text:""},{prefix:t(()=>[e(r,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(c,{prop:"password"},{default:t(()=>[e(p,{modelValue:o(n).password,"onUpdate:modelValue":l[1]||(l[1]=a=>o(n).password=a),type:"password",placeholder:o(x)("app.password"),tabindex:"2",autocomplete:"on","show-password":"",onKeyup:pe(E,["enter"])},{prefix:t(()=>[e(r,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),s("div",ke,[e(Q,{modelValue:o(n).remember,"onUpdate:modelValue":l[2]||(l[2]=a=>o(n).remember=a)},{default:t(()=>[i(" 记住我 ")]),_:1},8,["modelValue"]),e(k,{underline:!1,type:"primary",onClick:l[3]||(l[3]=a=>m.value="reset")},{default:t(()=>[i(" 忘记密码了? ")]),_:1})]),e(_,{loading:o(w),size:"large",style:{width:"100%"},type:"primary",onClick:q(E,["prevent"])},{default:t(()=>[i($(o(x)("app.login")),1)]),_:1},8,["loading"]),s("div",xe,[Ve,e(k,{underline:!1,type:"primary",onClick:l[4]||(l[4]=a=>m.value="register")},{default:t(()=>[i(" 创建新帐号 ")]),_:1})]),s("div",Ee,[e(W,null,{default:t(()=>[i("演示账号一键登录")]),_:1}),e(_,{plain:"",size:"small",type:"primary",onClick:l[5]||(l[5]=a=>I("kpu"))},{default:t(()=>[i(" kpu ")]),_:1}),e(_,{plain:"",size:"small",onClick:l[6]||(l[6]=a=>I("test"))},{default:t(()=>[i(" test ")]),_:1})])]),_:1},8,["model","rules"]),[[U,o(m)==="login"]]),F(e(S,{ref_key:"registerFormRef",ref:C,model:o(u),rules:o(j),class:"login-form","auto-complete":"on"},{default:t(()=>[Ce,s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(u).account,"onUpdate:modelValue":l[7]||(l[7]=a=>o(u).account=a),autocomplete:"on",placeholder:"用户名",tabindex:"1"},{prefix:t(()=>[e(r,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"captcha"},{default:t(()=>[e(p,{modelValue:o(u).captcha,"onUpdate:modelValue":l[8]||(l[8]=a=>o(u).captcha=a),autocomplete:"on",placeholder:"验证码",tabindex:"2"},{prefix:t(()=>[e(r,{name:"ep:key"})]),append:t(()=>[e(_,null,{default:t(()=>[i("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"password"},{default:t(()=>[e(p,{modelValue:o(u).password,"onUpdate:modelValue":l[9]||(l[9]=a=>o(u).password=a),type:"password",placeholder:"密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:t(()=>[e(r,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"checkPassword"},{default:t(()=>[e(p,{modelValue:o(u).checkPassword,"onUpdate:modelValue":l[10]||(l[10]=a=>o(u).checkPassword=a),type:"password",placeholder:"确认密码",tabindex:"4",autocomplete:"on","show-password":""},{prefix:t(()=>[e(r,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(_,{loading:o(w),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:q(G,["prevent"])},{default:t(()=>[i(" 注册 ")]),_:1},8,["loading"]),s("div",Re,[Se,e(k,{underline:!1,type:"primary",onClick:l[11]||(l[11]=a=>m.value="login")},{default:t(()=>[i(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[U,o(m)==="register"]]),F(e(S,{ref_key:"resetFormRef",ref:R,model:o(g),rules:o(H),class:"login-form","auto-complete":"on"},{default:t(()=>[Fe,s("div",null,[e(c,{prop:"account"},{default:t(()=>[e(p,{modelValue:o(g).account,"onUpdate:modelValue":l[12]||(l[12]=a=>o(g).account=a),autocomplete:"on",placeholder:"用户名",tabindex:"1"},{prefix:t(()=>[e(r,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"captcha"},{default:t(()=>[e(p,{modelValue:o(g).captcha,"onUpdate:modelValue":l[13]||(l[13]=a=>o(g).captcha=a),autocomplete:"on",placeholder:"验证码",tabindex:"2"},{prefix:t(()=>[e(r,{name:"ep:key"})]),append:t(()=>[e(_,null,{default:t(()=>[i("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"newPassword"},{default:t(()=>[e(p,{modelValue:o(g).newPassword,"onUpdate:modelValue":l[14]||(l[14]=a=>o(g).newPassword=a),type:"password",placeholder:"新密码",tabindex:"3",autocomplete:"on","show-password":""},{prefix:t(()=>[e(r,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(_,{loading:o(w),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:q(J,["prevent"])},{default:t(()=>[i(" 确认 ")]),_:1},8,["loading"]),s("div",Ue,[e(k,{underline:!1,type:"primary",onClick:l[15]||(l[15]=a=>m.value="login")},{default:t(()=>[i(" 返回登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[U,o(m)==="reset"]])]),e(ge),e(X,{class:"login-switcher"})])}}}),Be=me(qe,[["__scopeId","data-v-e04534f1"]]);export{Be as default};
