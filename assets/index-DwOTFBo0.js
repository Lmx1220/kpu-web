
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as H,k as W,u as z,A as J,B as K,c as Q,f as T,o as R,h as L,w as I,j as X,b as Y,m as Z,F as ee,aV as te,n as ne,i as re,x as se,y as oe,s as ae}from"./index-putfknEa.js";import ie from"./index-DuUVS2VT.js";import{_ as ue}from"./item.vue_vue_type_script_setup_true_lang-IseKDZqu.js";var y={},U;function ce(){if(U)return y;U=1,Object.defineProperty(y,"__esModule",{value:!0}),y.TokenData=void 0,y.parse=d,y.compile=D,y.match=j,y.pathToRegexp=N,y.stringify=q;const b="/",m=n=>n,c=/^[$_\p{ID_Start}]$/u,x=/^[$\u200c\u200d\p{ID_Continue}]$/u,g="https://git.new/pathToRegexpError",C={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function A(n){return n.replace(/[{}()\[\]+?!:*]/g,"\\$&")}function u(n){return n.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}function*v(n){const t=[...n];let e=0;function o(){let r="";if(c.test(t[++e]))for(r+=t[e];x.test(t[++e]);)r+=t[e];else if(t[e]==='"'){let s=e;for(;e<t.length;){if(t[++e]==='"'){e++,s=0;break}t[e]==="\\"?r+=t[++e]:r+=t[e]}if(s)throw new TypeError(`Unterminated quote at ${s}: ${g}`)}if(!r)throw new TypeError(`Missing parameter name at ${e}: ${g}`);return r}for(;e<t.length;){const r=t[e],s=C[r];if(s)yield{type:s,index:e++,value:r};else if(r==="\\")yield{type:"ESCAPED",index:e++,value:t[e++]};else if(r===":"){const i=o();yield{type:"PARAM",index:e,value:i}}else if(r==="*"){const i=o();yield{type:"WILDCARD",index:e,value:i}}else yield{type:"CHAR",index:e,value:t[e++]}}return{type:"END",index:e,value:""}}class h{constructor(t){this.tokens=t}peek(){if(!this._peek){const t=this.tokens.next();this._peek=t.value}return this._peek}tryConsume(t){const e=this.peek();if(e.type===t)return this._peek=void 0,e.value}consume(t){const e=this.tryConsume(t);if(e!==void 0)return e;const{type:o,index:r}=this.peek();throw new TypeError(`Unexpected ${o} at ${r}, expected ${t}: ${g}`)}text(){let t="",e;for(;e=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)t+=e;return t}}class l{constructor(t){this.tokens=t}}y.TokenData=l;function d(n,t={}){const{encodePath:e=m}=t,o=new h(v(n));function r(i){const a=[];for(;;){const p=o.text();p&&a.push({type:"text",value:e(p)});const f=o.tryConsume("PARAM");if(f){a.push({type:"param",name:f});continue}const E=o.tryConsume("WILDCARD");if(E){a.push({type:"wildcard",name:E});continue}if(o.tryConsume("{")){a.push({type:"group",tokens:r("}")});continue}return o.consume(i),a}}const s=r("END");return new l(s)}function D(n,t={}){const{encode:e=encodeURIComponent,delimiter:o=b}=t,r=n instanceof l?n:d(n,t),s=M(r.tokens,o,e);return function(a={}){const[p,...f]=s(a);if(f.length)throw new TypeError(`Missing parameters: ${f.join(", ")}`);return p}}function M(n,t,e){const o=n.map(r=>O(r,t,e));return r=>{const s=[""];for(const i of o){const[a,...p]=i(r);s[0]+=a,s.push(...p)}return s}}function O(n,t,e){if(n.type==="text")return()=>[n.value];if(n.type==="group"){const r=M(n.tokens,t,e);return s=>{const[i,...a]=r(s);return a.length?[""]:[i]}}const o=e||m;return n.type==="wildcard"&&e!==!1?r=>{const s=r[n.name];if(s==null)return["",n.name];if(!Array.isArray(s)||s.length===0)throw new TypeError(`Expected "${n.name}" to be a non-empty array`);return[s.map((i,a)=>{if(typeof i!="string")throw new TypeError(`Expected "${n.name}/${a}" to be a string`);return o(i)}).join(t)]}:r=>{const s=r[n.name];if(s==null)return["",n.name];if(typeof s!="string")throw new TypeError(`Expected "${n.name}" to be a string`);return[o(s)]}}function j(n,t={}){const{decode:e=decodeURIComponent,delimiter:o=b}=t,{regexp:r,keys:s}=N(n,t),i=s.map(a=>e===!1?m:a.type==="param"?e:p=>p.split(o).map(e));return function(p){const f=r.exec(p);if(!f)return!1;const E=f[0],$=Object.create(null);for(let _=1;_<f.length;_++){if(f[_]===void 0)continue;const w=s[_-1],P=i[_-1];$[w.name]=P(f[_])}return{path:E,params:$}}}function N(n,t={}){const{delimiter:e=b,end:o=!0,sensitive:r=!1,trailing:s=!0}=t,i=[],a=[],p=r?"":"i",E=(Array.isArray(n)?n:[n]).map(w=>w instanceof l?w:d(w,t));for(const{tokens:w}of E)for(const P of S(w,0,[])){const G=k(P,e,i);a.push(G)}let $=`^(?:${a.join("|")})`;return s&&($+=`(?:${u(e)}$)?`),$+=o?"$":`(?=${u(e)}|$)`,{regexp:new RegExp($,p),keys:i}}function*S(n,t,e){if(t===n.length)return yield e;const o=n[t];if(o.type==="group"){const r=e.slice();for(const s of S(o.tokens,0,r))yield*S(n,t+1,s)}else e.push(o);yield*S(n,t+1,e)}function k(n,t,e){let o="",r="",s=!0;for(let i=0;i<n.length;i++){const a=n[i];if(a.type==="text"){o+=u(a.value),r+=a.value,s||(s=a.value.includes(t));continue}if(a.type==="param"||a.type==="wildcard"){if(!s&&!r)throw new TypeError(`Missing text after "${a.name}": ${g}`);a.type==="param"?o+=`(${B(t,s?"":r)}+)`:o+="([\\s\\S]+)",e.push(a),r="",s=!1;continue}}return o}function B(n,t){return t.length<2?n.length<2?`[^${u(n+t)}]`:`(?:(?!${u(n)})[^${u(t)}])`:n.length<2?`(?:(?!${u(t)})[^${u(n)}])`:`(?:(?!${u(t)}|${u(n)})[\\s\\S])`}function q(n){return n.tokens.map(function t(e,o,r){if(e.type==="text")return A(e.value);if(e.type==="group")return`{${e.tokens.map(t).join("")}}`;const i=V(e.name)&&F(r[o+1])?e.name:JSON.stringify(e.name);if(e.type==="param")return`:${i}`;if(e.type==="wildcard")return`*${i}`;throw new TypeError(`Unexpected token: ${e}`)}).join("")}function V(n){const[t,...e]=n;return c.test(t)?e.every(o=>x.test(o)):!1}function F(n){return(n==null?void 0:n.type)!=="text"?!0:!x.test(n.value[0])}return y}var le=ce();const pe=H({name:"Breadcrumb",__name:"index",setup(b){const m=W(),c=z(),x=J(),{generateI18nTitle:g}=K(),C=Q(()=>{var v,h;const u=[];if(c.settings.home.enable&&u.push({path:c.settings.home.fullPath,title:g(c.settings.home.title)}),m.fullPath!==c.settings.home.fullPath&&c.settings.breadcrumb.enableMainMenu&&!["single"].includes(c.settings.menu.mode)){const l=x.allMenus.findIndex(d=>d.children.some(D=>m.fullPath.indexOf(`${D.path}/`)===0||m.fullPath===D.path));(v=x.allMenus[l])!=null&&v.meta&&u.push({path:"",title:g((h=x.allMenus[l].meta)==null?void 0:h.title)})}if(m.meta.breadcrumbNeste){m.meta.breadcrumbNeste.forEach(d=>{d.hide===!1&&u.push({path:d.path,title:g(d.title)})});const l=c.customTitleList.find(d=>d.fullPath===m.fullPath);l&&(u[u.length-1].title=l.title)}return u});function A(u){return le.compile(u)(m.params)}return(u,v)=>T(c).mode==="pc"&&T(c).settings.app.routeBaseOn!=="filesystem"?(R(),L(ie,{key:0,class:ne(["breadcrumb whitespace-nowrap px-2",{[`breadcrumb-${T(c).settings.breadcrumb.style}`]:T(c).settings.breadcrumb.style!==""}])},{default:I(()=>[X(te,{name:"breadcrumb"},{default:I(()=>[(R(!0),Y(ee,null,Z(T(C),(h,l)=>(R(),L(ue,{key:`${l}_${h.path}_${h.title}`,to:l<T(C).length-1&&h.path!==""?A(h.path):""},{default:I(()=>[se(oe(h.title),1)]),_:2},1032,["to"]))),128))]),_:1})]),_:1},8,["class"])):re("",!0)}}),he=ae(pe,[["__scopeId","data-v-c97351fa"]]);export{he as default};
