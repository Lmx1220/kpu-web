
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{c7 as r,a7 as _o,ai as go,c as _e,ab as Fl,h as We,P as wt,ag as u,d as Lo,r as ze,aa as zl,aX as ql,a9 as ae,aj as Ei,aP as bn,aH as Ka,c8 as Ua,cc as Ya,aJ as dr}from"./bootstrap-CKvMAU9X.js";const Ga="4.0.29",Xl={coreVersion:Ga,uiVersion:"",tableVersion:""};var fn=null,Ns=null,Rl=null,$r="z-index-manage",Hl=null,Br="z-index-style",yi="m",Ri="s",Pn={m:1e3,s:1e3};function ur(){return fn||typeof document<"u"&&(fn=document),fn}function Oi(){return fn&&!Ns&&(Ns=fn.body||fn.getElementsByTagName("body")[0]),Ns}function Za(){var e=0,o=ur();if(o){var n=Oi();if(n)for(var a=n.getElementsByTagName("*"),x=0;x<a.length;x++){var m=a[x];if(m&&m.style&&m.nodeType===1){var y=m.style.zIndex;y&&/^\d+$/.test(y)&&(e=Math.max(e,Number(y)))}}}return e}function Qa(){if(!Hl){var e=ur();e&&(Hl=e.getElementById(Br),Hl||(Hl=e.createElement("style"),Hl.id=Br,e.getElementsByTagName("head")[0].appendChild(Hl)))}return Hl}function Si(){var e=Qa();if(e){var o="--dom-",n="-z-index";e.innerHTML=":root{"+o+"main"+n+":"+xs()+";"+o+"sub"+n+":"+hr()+"}"}}function Ti(){if(!Rl){var e=ur();if(e&&(Rl=e.getElementById($r),!Rl)){var o=Oi();o&&(Rl=e.createElement("div"),Rl.id=$r,Rl.style.display="none",o.appendChild(Rl),fr(Pn.m),pr(Pn.s))}}return Rl}function Mi(e){return function(o){if(o){o=Number(o),Pn[e]=o;var n=Ti();n&&(n.dataset?n.dataset[e]=o+"":n.setAttribute("data-"+e,o+""))}return Si(),Pn[e]}}var fr=Mi(yi);function Di(e,o){return function(a){var x,m=Ti();if(m){var y=m.dataset?m.dataset[e]:m.getAttribute("data-"+e);y&&(x=Number(y))}return x||(x=Pn[e]),a?Number(a)<x?o():a:x}}var xs=Di(yi,Ii);function Ii(){return fr(xs()+1)}var pr=Mi(Ri),Fi=Di(Ri,ki);function hr(){return xs()+Fi()}function ki(){return pr(Fi()+1),hr()}var gr={setCurrent:fr,getCurrent:xs,getNext:Ii,setSubCurrent:pr,getSubCurrent:hr,getSubNext:ki,getMax:Za};Si();const vn={size:"",version:1,zIndex:999,resizeInterval:500},Ai={theme:""};function mr(e){const o=!e||e==="default"?"light":e;if(Ai.theme=o,typeof document<"u"){const n=document.documentElement;n&&n.setAttribute("data-vxe-ui-theme",o)}return Xl}function Ja(){return Ai.theme}function ec(e){return e&&(e.zIndex&&gr.setCurrent(e.zIndex),e.theme&&mr(e.theme),r.merge(vn,e)),Xl}function tc(e,o){return arguments.length?r.get(vn,e,o):vn}const oc={},tr={};function lc(e){return e&&Object.assign(tr,e),Xl}function nc(e){return arguments.length?r.get(tr,e):tr}const Vl={F2:"F2",ESCAPE:"Escape",ENTER:"Enter",TAB:"Tab",DELETE:"Delete",BACKSPACE:"Backspace",SPACEBAR:" ",CONTEXT_MENU:"ContextMenu",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",R:"R",P:"P",Z:"Z",X:"X",C:"C",V:"V",M:"M"},or=r.browse(),Hr={" ":"Spacebar",Apps:Vl.CONTEXT_MENU,Del:Vl.DELETE,Up:Vl.ARROW_UP,Down:Vl.ARROW_DOWN,Left:Vl.ARROW_LEFT,Right:Vl.ARROW_RIGHT},Li=or.firefox?"DOMMouseScroll":"mousewheel",lr=[];function gl(e){const o=e.type===Li;lr.forEach(({type:n,cb:a})=>{e.cancelBubble||(n===e.type||o&&n==="mousewheel")&&a(e)})}class sc{constructor(o,n,a){Object.defineProperty(this,"$event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"key",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:""}),this.$event=o,o&&(o.type&&(this.type=o.type),o.key&&(this.key=o.key),o.code&&(this.code=o.code)),Object.assign(this,n,a)}stopPropagation(){const o=this.$event;o&&o.stopPropagation()}preventDefault(){const o=this.$event;o&&o.preventDefault()}}const rc=(e,o,n)=>new sc(e,o,n),ic={on(e,o,n){lr.push({comp:e,type:o,cb:n})},off(e,o){r.remove(lr,n=>n.comp===e&&n.type===o)},hasKey(e,o){const{key:n}=e;return o=o.toLowerCase(),n?o===n.toLowerCase()||!!(Hr[n]&&Hr[n].toLowerCase()===o):!1}};or.isDoc&&(or.msie||(window.addEventListener("copy",gl,!1),window.addEventListener("cut",gl,!1),window.addEventListener("paste",gl,!1)),document.addEventListener("keydown",gl,!1),document.addEventListener("contextmenu",gl,!1),window.addEventListener("mousedown",gl,!1),window.addEventListener("blur",gl,!1),window.addEventListener("resize",gl,!1),window.addEventListener(Li,r.throttle(gl,100,{leading:!0,trailing:!1}),{passive:!0,capture:!1}));let Pr;const Nl=[],ac=500;function cc(){Nl.length&&(Nl.forEach(e=>{e.tarList.forEach(o=>{const{target:n,width:a,heighe:x}=o,m=n.clientWidth,y=n.clientHeight;(m&&a!==m||y&&x!==y)&&(o.width=m,o.heighe=y,setTimeout(e.callback))})}),$i())}function $i(){clearTimeout(Pr),Pr=setTimeout(cc,vn.resizeInterval||ac)}class dc{constructor(o){Object.defineProperty(this,"tarList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=o}observe(o){if(o){const{tarList:n}=this;n.some(a=>a.target===o)||n.push({target:o,width:o.clientWidth,heighe:o.clientHeight}),Nl.length||$i(),Nl.some(a=>a===this)||Nl.push(this)}}unobserve(o){r.remove(Nl,n=>n.tarList.some(a=>a.target===o))}disconnect(){r.remove(Nl,o=>o===this)}}const uc={create(e){return window.ResizeObserver?new window.ResizeObserver(e):new dc(e)}},Vn=_o({language:"",langMaps:{}});let Vr=!1;function Bi(e,o){const{langMaps:n,language:a}=Vn,{i18n:x}=vn;return x?`${x(e,o)||""}`:(Vr||(n[a]||console.error(`[vxe core] 语言包未安装。Language not installed. https://${Xl.uiVersion?"vxeui.com":"vxetable.cn"}/#/start/i18n`),Vr=!0),r.toFormatString(r.get(n[a],e,e),o))}function fc(e){return Vn.language=e||"zh-CN",Xl}function pc(e,o){return Vn.langMaps[e]=Object.assign({},o),Xl}function hc(e){const{langMaps:o}=Vn;return!!o[e]}function gc(){const{language:e}=Vn;return e}function _s(e,o){return function(n,a){const x=`[vxe ${o||""}] ${Bi(n,a)}`;return console[e](x),x}}const jr="4.0.29",mc={create:_s,warn:_s("warn",`v${jr}`),err:_s("error",`v${jr}`)},In={},an={mixin(e){return r.each(e,(o,n)=>an.add(n,o)),an},get(e){return In[e]||null},add(e,o){if(e&&o){const n=In[e];n?Object.assign(n,o):In[e]=o}return an},forEach(e){return r.objectEach(In,e),an},delete(e){return delete In[e],an}};class Hi{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const bc=new Hi;class vc{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={menuMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const xc=new vc;class Cc{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={cellFormatMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const wc=new Cc;class Ec{constructor(){Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mixin(o){return r.each(o,(n,a)=>{this.add(a,n)}),this}has(o){return!!this.get(o)}get(o){return this.store[o]}add(o,n){const a=this.store[o];return r.isFunction(n)&&(n={commandMethod:n}),this.store[o]=a?r.merge(a,n):n,this}delete(o){delete this.store[o]}forEach(o){r.objectEach(this.store,o)}}const yc=new Ec,Fn={},ds={mixin(e){return r.each(e,(o,n)=>{ds.add(n,o)}),ds},get(e){return Fn[e]||[]},add(e,o){r.isFunction(o)&&(o={tableInterceptorMethod:o});const n=o.tableInterceptorMethod;if(n){let a=Fn[e];a||(a=Fn[e]=[]),a.push(n)}return ds},delete(e,o){const n=Fn[e];if(n){r.isFunction(o)&&(o={tableInterceptorMethod:o});const a=o?o.tableInterceptorMethod:null;a?r.remove(n,x=>x===a):delete Fn[e]}}};let Jo;const kn={text:"",html:""};function Rc(e){if(!Jo){Jo=document.createElement("textarea"),Jo.id="$VxeCopy";const o=Jo.style;o.width="48px",o.height="24px",o.position="fixed",o.zIndex="0",o.left="-500px",o.top="-500px",document.body.appendChild(Jo)}Jo.value=e}const Oc={getStore(){return kn},setStore(e){Object.assign(kn,e||{})},copy(e){let o=!1;try{const n=r.toValueString(e);Rc(n),Jo.select(),Jo.setSelectionRange(0,Jo.value.length),o=document.execCommand("copy"),Jo.blur(),kn.text=n,kn.html=""}catch{}return o},getText(){return kn.text||""}};function us(e,o){let n=!0,a=!1;const x=o||vn.permissionMethod;if(e&&x){n=!1,a=!0;let y=!1,I=!1;const P=String(e).split("|");for(let d=0;d<P.length;d++){const f=P[d];let b=!0,j=!1;const A=x({code:f});if(r.isBoolean(A)?b=A:A&&(b=!!A.visible,j=!!A.disabled),!j&&!I&&(I=!0,a=j),b&&!y&&(y=!0,n=b),y&&I)break}}return{code:e,visible:n,disabled:a}}const Sc={getCheckInfo(e){return us(e)},checkVisible(e){return us(e).visible},checkDisable(e){return us(e).disabled}},Tc=new Hi;function Mc(e){const o=go("xeSizeInfo",null),n=_e(()=>e.size||(o?o.value:null));return Fl("xeSizeInfo",n),{computeSize:n}}function Dc(e){return{computePermissionInfo:_e(()=>us(e.permissionCode,e.permissionMethod))}}const Ic={useSize:Mc,usePermission:Dc},Nr=[];function Fc(e,o){return e&&e.install&&Nr.indexOf(e)===-1&&(e.install(te,o),Nr.push(e)),te}const Pi={};function kc(e){return Pi[e]||null}function Ac(e){e&&e.name&&(Pi[e.name]=e)}function Lc(){return We()}const te=Object.assign(Xl,{renderEmptyElement:Lc,setTheme:mr,getTheme:Ja,setConfig:ec,getConfig:tc,setIcon:lc,getIcon:nc,setLanguage:fc,hasLanguage:hc,getLanguage:gc,setI18n:pc,getI18n:Bi,globalEvents:ic,GLOBAL_EVENT_KEYS:Vl,createEvent:rc,globalResize:uc,renderer:an,validators:bc,menus:xc,formats:wc,commands:yc,interceptor:ds,clipboard:Oc,log:mc,permission:Sc,globalStore:oc,hooks:Tc,component:Ac,getComponent:kc,useFns:Ic,use:Fc});mr();function ct(e){return e&&e.enabled!==!1}function Vi(e){return e==null||e===""}function ji(e){const o=e.name,n=r.lastIndexOf(o,"."),a=o.substring(n+1,o.length).toLowerCase();return{filename:o.substring(0,n),type:a}}function Ni(){return gr.getNext()}function _i(){return gr.getCurrent()}function cn(e){return e&&e.children&&e.children.length>0}function ll(e,o){if(e){const n=te.getConfig().translate;return r.toValueString(n?n(""+e,o):e)}return""}function so(e,o){return""+(Vi(e)?o?te.getConfig().emptyCell:"":e)}function el(e){return e===""||r.eqNull(e)}const br="4.10.0";te.version=br;te.tableVersion=br;te.setConfig({emptyCell:"　",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{},resizableConfig:{dragMode:"auto",showDragTip:!0},radioConfig:{strict:!0},rowDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0},columnDragConfig:{showIcon:!0,animation:!0,showGuidesStatus:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"beautify"},columnConfig:{maxFixedSize:4},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0},drawerOptions:{mask:!0,lockView:!0,escClosable:!0,resize:!0}},sortConfig:{showIcon:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},treeConfig:{rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0,selectCellByBody:!0},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},scrollX:{gt:60},scrollY:{gt:100}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showResponseMsg:!0,showActiveMsg:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}});const mt="vxe-table-icon-";te.setIcon({TABLE_SORT_ASC:mt+"caret-up",TABLE_SORT_DESC:mt+"caret-down",TABLE_FILTER_NONE:mt+"funnel",TABLE_FILTER_MATCH:mt+"funnel",TABLE_EDIT:mt+"edit",TABLE_TITLE_PREFIX:mt+"question-circle-fill",TABLE_TITLE_SUFFIX:mt+"question-circle-fill",TABLE_TREE_LOADED:mt+"spinner roll",TABLE_TREE_OPEN:mt+"caret-right rotate90",TABLE_TREE_CLOSE:mt+"caret-right",TABLE_EXPAND_LOADED:mt+"spinner roll",TABLE_EXPAND_OPEN:mt+"arrow-right rotate90",TABLE_EXPAND_CLOSE:mt+"arrow-right",TABLE_CHECKBOX_CHECKED:mt+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:mt+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:mt+"checkbox-indeterminate-fill",TABLE_RADIO_CHECKED:mt+"radio-checked-fill",TABLE_RADIO_UNCHECKED:mt+"radio-unchecked",TABLE_CUSTOM_SORT:mt+"drag-handle",TABLE_MENU_OPTIONS:mt+"arrow-right",TABLE_DRAG_ROW:mt+"drag-handle",TABLE_DRAG_COLUMN:mt+"drag-handle",TABLE_DRAG_STATUS_ROW:mt+"sort",TABLE_DRAG_STATUS_SUB_ROW:mt+"add-sub",TABLE_DRAG_STATUS_COLUMN:mt+"swap",TABLE_DRAG_DISABLED:mt+"no-drop",TOOLBAR_TOOLS_REFRESH:mt+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:mt+"repeat roll",TOOLBAR_TOOLS_IMPORT:mt+"upload",TOOLBAR_TOOLS_EXPORT:mt+"download",TOOLBAR_TOOLS_PRINT:mt+"print",TOOLBAR_TOOLS_FULLSCREEN:mt+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:mt+"minimize",TOOLBAR_TOOLS_CUSTOM:mt+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:mt+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:mt+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:mt+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:mt+"fixed-right-fill"});const $c=te.setTheme,Bc=te.getTheme,Hc=te.setConfig,Pc=te.getConfig,Vc=te.setIcon,jc=te.getIcon,Nc=te.setLanguage,_c=te.setI18n,Wc=te.getI18n,zc=te.globalEvents,qc=te.globalResize,Xc=te.renderer,Kc=te.validators,Uc=te.menus,Yc=te.formats,Gc=te.commands,Zc=te.interceptor,Qc=te.clipboard,Jc=te.log,ed=te.hooks,td=te.use,Wi=e=>te.setConfig(e);te.setup=Wi;const zi=e=>te.setConfig(e);te.config=zi;const qi=(e,o)=>te.getI18n(e,o);te.t=qi;const Xi=(e,o)=>ll(e,o);te._t=Xi;const od=te,ld=e=>te.saveFile(e),nd=e=>te.readFile(e),sd=e=>te.print(e),rd={get(e){return te.modal.get(e)},close(e){return te.modal.close(e)},open(e){return te.modal.open(e)},alert(e,o,n){return te.modal.alert(e,o,n)},confirm(e,o,n){return te.modal.confirm(e,o,n)},message(e,o){return te.modal.message(e,o)},notification(e,o,n){return te.modal.notification(e,o,n)}},{log:Ki}=te,Ui="table v4.10.0",fs=Ki.create("warn",Ui),Gt=Ki.create("error",Ui),{getI18n:id,formats:Wu}=te;class nr{constructor(o,n,{renderHeader:a,renderCell:x,renderFooter:m,renderData:y}={}){const I=o.xegrid,P=n.formatter,d=r.isBoolean(n.visible)?n.visible:!0;if(Object.assign(this,{type:n.type,property:n.field,field:n.field,title:n.title,width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth,resizable:n.resizable,fixed:n.fixed,align:n.align,headerAlign:n.headerAlign,footerAlign:n.footerAlign,showOverflow:n.showOverflow,showHeaderOverflow:n.showHeaderOverflow,showFooterOverflow:n.showFooterOverflow,className:n.className,headerClassName:n.headerClassName,footerClassName:n.footerClassName,formatter:P,footerFormatter:n.footerFormatter,sortable:n.sortable,sortBy:n.sortBy,sortType:n.sortType,filters:Ji(n.filters),filterMultiple:r.isBoolean(n.filterMultiple)?n.filterMultiple:!0,filterMethod:n.filterMethod,filterResetMethod:n.filterResetMethod,filterRecoverMethod:n.filterRecoverMethod,filterRender:n.filterRender,treeNode:n.treeNode,dragSort:n.dragSort,cellType:n.cellType,cellRender:n.cellRender,editRender:n.editRender,contentRender:n.contentRender,headerExportMethod:n.headerExportMethod,exportMethod:n.exportMethod,footerExportMethod:n.footerExportMethod,titleHelp:n.titleHelp,titlePrefix:n.titlePrefix,titleSuffix:n.titleSuffix,params:n.params,id:n.colId||r.uniqueId("col_"),parentId:null,visible:d,halfVisible:!1,defaultVisible:d,defaultFixed:n.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:a||n.renderHeader,renderCell:x||n.renderCell,renderFooter:m||n.renderFooter,renderData:y,slots:n.slots}),I){const{computeProxyOpts:f}=I.getComputeMaps(),b=f.value;b.beforeColumn&&b.beforeColumn({$grid:I,column:this})}}getTitle(){return ll(this.title||(this.type==="seq"?id("vxe.table.seqTitle"):""))}getKey(){const{type:o}=this;return this.field||(o?`type=${o}`:null)}update(o,n){o!=="filters"&&(o==="field"&&(this.property=n),this[o]=n)}}const Ws={},dn=r.browse();let un;function Yi(){return un||(un=new Image,un.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),un}function sr(){return un||Yi()}function Ml(e,o){return e?r.isFunction(e)?e(o):e:""}function Gi(e){return Ws[e]||(Ws[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),Ws[e]}function Zi(e,o,n){if(e){const a=e.parentNode;if(n.top+=e.offsetTop,n.left+=e.offsetLeft,a&&a!==document.documentElement&&a!==document.body&&(n.top-=a.scrollTop,n.left-=a.scrollLeft),!(o&&(e===o||e.offsetParent===o))&&e.offsetParent)return Zi(e.offsetParent,o,n)}return n}function rr(e){return e&&/^\d+(px)?$/.test(e)}function Bn(e){return e&&/^\d+%$/.test(e)}function Wl(e,o){return e&&e.className&&e.className.match&&e.className.match(Gi(o))}function Ao(e,o){e&&Wl(e,o)&&(e.className=e.className.replace(Gi(o),""))}function tl(e,o){e&&!Wl(e,o)&&(Ao(e,o),e.className=`${e.className} ${o}`)}function Cs(){const e=document.documentElement,o=document.body;return{scrollTop:e.scrollTop||o.scrollTop,scrollLeft:e.scrollLeft||o.scrollLeft,visibleHeight:e.clientHeight||o.clientHeight,visibleWidth:e.clientWidth||o.clientWidth}}function An(e){return e?e.offsetHeight:0}function ir(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.paddingTop),a=r.toNumber(o.paddingBottom);return n+a}return 0}function Kt(e,o){e&&(e.scrollTop=o)}function no(e,o){e&&(e.scrollLeft=o)}function vr(e,o){const n=o.type==="html"?e.innerText:e.textContent;e.getAttribute("title")!==n&&e.setAttribute("title",n)}function bt(e,o,n,a){let x,m=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;m&&m.nodeType&&m!==document;){if(n&&Wl(m,n)&&(!a||a(m)))x=m;else if(m===o)return{flag:n?!!x:!0,container:o,targetElem:x};m=m.parentNode}return{flag:!1}}function ad(e,o){return Zi(e,o,{left:0,top:0})}function ps(e){const o=e.getBoundingClientRect(),n=o.top,a=o.left,{scrollTop:x,scrollLeft:m,visibleHeight:y,visibleWidth:I}=Cs();return{boundingTop:n,top:x+n,boundingLeft:a,left:m+a,visibleHeight:y,visibleWidth:I}}const _r="scrollIntoViewIfNeeded",Wr="scrollIntoView";function cd(e){e&&(e[_r]?e[_r]():e[Wr]&&e[Wr]())}function dd(e,o){e&&e.dispatchEvent(new Event(o))}function zs(e){return e&&e.nodeType===1}const Qi=(e,o)=>{const n=[];return e.forEach(a=>{a.parentId=o?o.id:null,a.visible&&(a.children&&a.children.length&&a.children.some(x=>x.visible)?(n.push(a),n.push(...Qi(a.children,a))):n.push(a))}),n},ud=e=>{let o=1;const n=(m,y)=>{if(y&&(m.level=y.level+1,o<m.level&&(o=m.level)),m.children&&m.children.length&&m.children.some(I=>I.visible)){let I=0;m.children.forEach(P=>{P.visible&&(n(P,m),I+=P.colSpan)}),m.colSpan=I}else m.colSpan=1};e.forEach(m=>{m.level=1,n(m)});const a=[];for(let m=0;m<o;m++)a.push([]);return Qi(e).forEach(m=>{m.children&&m.children.length&&m.children.some(y=>y.visible)?m.rowSpan=1:m.rowSpan=o-m.level+1,a[m.level-1].push(m)}),a};function qs(e,o,n){const a=e.internalData;return e.clearScroll().then(()=>{if(o||n)return a.lastScrollLeft=0,a.lastScrollTop=0,a.inVirtualScroll=!1,a.inBodyScroll=!1,a.inFooterScroll=!1,a.bodyScrollType="",e.scrollTo(o,n)})}function Xs(){return r.uniqueId("row_")}function vl(e){const{props:o}=e,{computeRowOpts:n}=e.getComputeMaps(),{rowId:a}=o,x=n.value;return a||x.keyField||"_X_ROW_KEY"}function Oe(e,o){const n=r.get(o,vl(e));return r.eqNull(n)?"":encodeURIComponent(n)}const to=(e,o)=>o?r.isString(o)?e.getColumnByField(o):o:null;function Qn(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.paddingLeft),a=r.toNumber(o.paddingRight);return n+a}return 0}function Jl(e){if(e){const o=getComputedStyle(e),n=r.toNumber(o.marginLeft),a=r.toNumber(o.marginRight);return e.offsetWidth+n+a}return 0}function ml(e,o){return e.querySelector(".vxe-cell"+o)}function Ji(e){return e&&r.isArray(e)?e.map(({label:o,value:n,data:a,resetValue:x,checked:m})=>({label:o,value:n,data:a,resetValue:x,checked:!!m,_checked:!!m})):e}function fd(e){return e.map((o,n)=>n%2===0?Number(o)+1:".").join("")}function ao(e,o){return r.get(e,o.field)}function ol(e,o,n){return r.set(e,o.field,n)}function Eo(e){if(e){const o=e.value;if(o)return o.$el||o}return null}function pd(e){const{$table:o,column:n,cell:a}=e,{props:x}=o,{computeResizableOpts:m}=o.getComputeMaps(),y=m.value,{minWidth:I}=y;if(I){const T=r.isFunction(I)?I(e):I;if(T!=="auto")return Math.max(1,r.toNumber(T))}const{showHeaderOverflow:P}=x,{showHeaderOverflow:d,minWidth:f}=n,b=r.isUndefined(d)||r.isNull(d)?P:d,$=b==="title"||(b===!0||b==="tooltip")||b==="ellipsis",L=r.floor((r.toNumber(getComputedStyle(a).fontSize)||14)*1.6),M=Qn(a)+Qn(ml(a,""));let F=L+M;if($){const T=Qn(ml(a,">.vxe-cell--drag-handle")),w=Qn(ml(a,">.vxe-cell--checkbox")),C=Jl(ml(a,">.vxe-cell--required-icon")),R=Jl(ml(a,">.vxe-cell--edit-icon")),k=Jl(ml(a,">.vxe-cell-title-prefix-icon")),_=Jl(ml(a,">.vxe-cell-title-suffix-icon")),se=Jl(ml(a,">.vxe-cell--sort")),he=Jl(ml(a,">.vxe-cell--filter"));F+=T+w+C+R+k+_+he+se}if(f){const{refTableBody:T}=o.getRefMaps(),w=T.value,C=w?w.$el:null;if(C){if(Bn(f)){const k=(C.clientWidth-1)/100;return Math.max(F,Math.floor(r.toInteger(f)*k))}else if(rr(f))return Math.max(F,r.toInteger(f))}}return F}function hs(e){return e&&(e.constructor===nr||e instanceof nr)}function hd(e,o,n){return hs(o)?o:_o(new nr(e,o,n))}function ea(e,o,n){Object.keys(o).forEach(a=>{wt(()=>o[a],x=>{n.update(a,x),e&&(a==="filters"?(e.setFilter(n,x),e.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(a)&&e.handleRefreshColumnQueue())})})}function ta(e,o,n,a){const{reactData:x}=e,{staticColumns:m}=x,y=o.parentNode,I=a?a.columnConfig:null,P=I?I.children:m;y&&P&&(P.splice(r.arrayIndexOf(y.children,o),0,n),x.staticColumns=m.slice(0))}function oa(e,o){const{reactData:n}=e,{staticColumns:a}=n,x=r.findTree(a,m=>m.id===o.id,{children:"children"});x&&x.items.splice(x.index,1),n.staticColumns=a.slice(0)}function zr(e,o){const{internalData:n}=e,{fullColumnIdData:a}=n;if(!o)return null;let x=o.parentId;for(;a[x];){const m=a[x].column;if(x=m.parentId,!x)return m}return o}function la(e,o,n){for(let a=0;a<e.length;a++){const{row:x,col:m,rowspan:y,colspan:I}=e[a];if(m>-1&&x>-1&&y&&I){if(x===o&&m===n)return{rowspan:y,colspan:I};if(o>=x&&o<x+y&&n>=m&&n<m+I)return{rowspan:0,colspan:0}}}}function gd(e){const{props:o,internalData:n}=e;return n.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearPendingRow(),e.clearFilter&&e.clearFilter(),e.clearSelected&&(o.keyboardConfig||o.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&o.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}function md(e){return e.clearFilter&&e.clearFilter(),gd(e)}function qr(e,o){const{reactData:n,internalData:a}=e,x=e.props,{showOverflow:m}=x,{refTableBody:y}=e.getRefMaps(),{columnStore:I,scrollYLoad:P}=n,{afterFullData:d,scrollYStore:f,fullAllDataRowIdData:b}=a,j=y.value,{leftList:A,rightList:Q}=I,$=j?j.$el:null,L=Oe(e,o);let M=0;A.forEach(T=>{M+=T.renderWidth});let F=0;if(Q.forEach(T=>{F+=T.renderWidth}),$){const T=$.clientHeight,w=$.scrollTop,C=$.querySelector(`[rowid="${L}"]`);if(C){const R=C.offsetParent,k=C.offsetTop+(R?R.offsetTop:0),_=C.clientHeight;if(k<w||k>w+T)return e.scrollTo(null,k);if(k+_>=T+w)return e.scrollTo(null,w+_)}else if(P){if(m)return e.scrollTo(null,(e.findRowIndexOf(d,o)-1)*f.rowHeight);let R=0;const k=b[L],_=k?k.height:0;for(let se=0;se<d.length;se++){const he=d[se],Z=Oe(e,he);if(he===o||Z===L)break;const N=b[Z];R+=N?N.height:0}return R<w?e.scrollTo(null,R-M-1):e.scrollTo(null,R+_-(T-F-1))}}return Promise.resolve()}function Xr(e,o,n){const{reactData:a,internalData:x}=e,{refTableBody:m}=e.getRefMaps(),{columnStore:y,scrollXLoad:I}=a,{visibleColumn:P}=x,{leftList:d,rightList:f}=y,b=m.value,j=b?b.$el:null;if(o.fixed)return Promise.resolve();let A=0;d.forEach($=>{A+=$.renderWidth});let Q=0;if(f.forEach($=>{Q+=$.renderWidth}),j){const $=j.clientWidth,L=j.scrollLeft;let M=null;if(n){const F=Oe(e,n);M=j.querySelector(`[rowid="${F}"] .${o.id}`)}if(M||(M=j.querySelector(`.${o.id}`)),M){const F=M.offsetParent,T=M.offsetLeft+(F?F.offsetLeft:0),w=M.clientWidth;if(T<L+A)return e.scrollTo(T-A-1);if(T+w-L>$-Q)return e.scrollTo(T+w-($-Q-1))}else if(I){let F=0;const T=o.renderWidth;for(let w=0;w<P.length;w++){const C=P[w];if(C===o||C.id===o.id)break;F+=C.renderWidth}return F<L?e.scrollTo(F-A-1):e.scrollTo(F+T-($-Q-1))}}return Promise.resolve()}function pn(e){return"on"+e.substring(0,1).toLocaleUpperCase()+e.substring(1)}function na(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"update:modelValue"}function sa(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function xo(e){return e==null?[]:r.isArray(e)?e:[e]}const{getI18n:Jn,getIcon:Nt,renderer:Hn,formats:Kr,renderEmptyElement:_l}=te;function bd(e){const{$table:o,column:n}=e,a=n.titlePrefix||n.titleHelp;return a?u("i",{class:["vxe-cell-title-prefix-icon",a.icon||Nt().TABLE_TITLE_PREFIX],onMouseenter(x){o.triggerHeaderTitleEvent(x,a,e)},onMouseleave(x){o.handleTargetLeaveEvent(x)}}):_l(o)}function vd(e){const{$table:o,column:n}=e,a=n.titleSuffix;return a?u("i",{class:["vxe-cell-title-suffix-icon",a.icon||Nt().TABLE_TITLE_SUFFIX],onMouseenter(x){o.triggerHeaderTitleEvent(x,a,e)},onMouseleave(x){o.handleTargetLeaveEvent(x)}}):_l(o)}function Ur(e){const{$table:o}=e,n=o.props,{dragConfig:a}=n,{computeRowDragOpts:x}=o.getComputeMaps(),m=x.value,{icon:y,trigger:I,disabledMethod:P}=m,d=P||(a?a.rowDisabledMethod:null),f=d&&d(e),b={};return I!=="cell"&&(b.onMousedown=j=>{f||o.handleCellDragMousedownEvent(j,e)},b.onMouseup=o.handleCellDragMouseupEvent),u("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":f}]},b),[u("i",{class:y||(a?a.rowIcon:"")||Nt().TABLE_DRAG_ROW})])}function bo(e,o){const{$table:n,column:a,level:x}=e,{dragSort:m}=a,y=n.props,{treeConfig:I,dragConfig:P}=y,{computeRowOpts:d,computeRowDragOpts:f}=n.getComputeMaps(),b=d.value,j=f.value,{showIcon:A,isPeerDrag:Q,isCrossDrag:$,visibleMethod:L}=j,M=L||(P?P.rowVisibleMethod:null),F=r.isArray(o)?o:[o];return m&&b.drag&&(A||P&&P.showRowIcon)&&(!M||M(e))&&(I?(Q||$||!x)&&F.unshift(Ur(e)):F.unshift(Ur(e))),F}function xd(e){const{$table:o,column:n}=e,{computeColumnOpts:a,computeColumnDragOpts:x}=o.getComputeMaps(),m=a.value,y=x.value,{showIcon:I,icon:P,trigger:d,isPeerDrag:f,isCrossDrag:b,visibleMethod:j,disabledMethod:A}=y;if(m.drag&&I&&(!j||j(e))&&!n.fixed&&(f||b||!n.parentId)){const Q=A&&A(e),$={};return d!=="cell"&&($.onMousedown=L=>{Q||o.handleHeaderCellDragMousedownEvent(L,e)},$.onMouseup=o.handleHeaderCellDragMouseupEvent),u("span",Object.assign({key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":Q}]},$),[u("i",{class:P||Nt().TABLE_DRAG_COLUMN})])}return _l(o)}function Yo(e,o){return[bd(e),xd(e),...r.isArray(o)?o:[o],vd(e)]}function Ol(e,o){const{$table:n,column:a}=e,x=n.props,m=n.reactData,{computeTooltipOpts:y}=n.getComputeMaps(),{showHeaderOverflow:I}=x,{type:P,showHeaderOverflow:d}=a,b=y.value.showAll,j=r.isUndefined(d)||r.isNull(d)?I:d,A=j==="title",Q=j===!0||j==="tooltip",$={};return(A||Q||b)&&($.onMouseenter=L=>{m._isResize||(A?vr(L.currentTarget,a):(Q||b)&&n.triggerHeaderTooltipEvent(L,e))}),(Q||b)&&($.onMouseleave=L=>{m._isResize||(Q||b)&&n.handleTargetLeaveEvent(L)}),[P==="html"&&r.isString(o)?u("span",Object.assign({class:"vxe-cell--title",innerHTML:o},$)):u("span",Object.assign({class:"vxe-cell--title"},$),xo(o))]}function Yr(e,o){if(r.isFunction(e))return`${e(o)}`;const n=r.isArray(e),a=n?Kr.get(e[0]):Kr.get(e),x=a?a.tableFooterCellFormatMethod:null;return x?`${n?x(o,...e.slice(1)):x(o)}`:""}function Cd(e){const{$table:o,column:n,_columnIndex:a,items:x,row:m}=e,{slots:y,editRender:I,cellRender:P,footerFormatter:d}=n,f=I||P,b=y?y.footer:null;if(b)return o.callSlot(b,e);if(f){const A=Hn.get(f.name);if(A){const Q=A.renderTableFooter||A.renderFooter;if(Q)return xo(Q(f,e))}}let j="";return r.isArray(x)?(j=x[a],[d?Yr(d,{itemValue:j,column:n,row:m,items:x,_columnIndex:a}):so(j,1)]):(j=r.get(m,n.field),[d?Yr(d,{itemValue:j,column:n,row:m,items:x,_columnIndex:a}):so(j,1)])}function Gr(e){const{$table:o,row:n,column:a}=e;return so(o.getCellLabel(n,a),1)}const Je={createColumn(e,o){const{type:n,sortable:a,filters:x,editRender:m,treeNode:y}=o,{props:I}=e,{editConfig:P}=I,{computeEditOpts:d,computeCheckboxOpts:f}=e.getComputeMaps(),b=f.value,j=d.value,A={renderHeader:Je.renderDefaultHeader,renderCell:y?Je.renderTreeCell:Je.renderDefaultCell,renderFooter:Je.renderDefaultFooter};switch(n){case"seq":A.renderHeader=Je.renderSeqHeader,A.renderCell=y?Je.renderTreeIndexCell:Je.renderSeqCell;break;case"radio":A.renderHeader=Je.renderRadioHeader,A.renderCell=y?Je.renderTreeRadioCell:Je.renderRadioCell;break;case"checkbox":A.renderHeader=Je.renderCheckboxHeader,A.renderCell=b.checkField?y?Je.renderTreeSelectionCellByProp:Je.renderCheckboxCellByProp:y?Je.renderTreeSelectionCell:Je.renderCheckboxCell;break;case"expand":A.renderCell=Je.renderExpandCell,A.renderData=Je.renderExpandData;break;case"html":A.renderCell=y?Je.renderTreeHTMLCell:Je.renderHTMLCell,x&&a?A.renderHeader=Je.renderSortAndFilterHeader:a?A.renderHeader=Je.renderSortHeader:x&&(A.renderHeader=Je.renderFilterHeader);break;default:P&&m?(A.renderHeader=Je.renderEditHeader,A.renderCell=j.mode==="cell"?y?Je.renderTreeCellEdit:Je.renderCellEdit:y?Je.renderTreeRowEdit:Je.renderRowEdit):x&&a?A.renderHeader=Je.renderSortAndFilterHeader:a?A.renderHeader=Je.renderSortHeader:x&&(A.renderHeader=Je.renderFilterHeader)}return hd(e,o,A)},renderHeaderTitle(e){const{$table:o,column:n}=e,{slots:a,editRender:x,cellRender:m}=n,y=x||m,I=a?a.header:null;if(I)return Ol(e,o.callSlot(I,e));if(y){const P=Hn.get(y.name);if(P){const d=P.renderTableHeader||P.renderHeader;if(d)return Ol(e,xo(d(y,e)))}}return Ol(e,so(n.getTitle(),1))},renderDefaultHeader(e){return Yo(e,Je.renderHeaderTitle(e))},renderDefaultCell(e){const{$table:o,row:n,column:a}=e,{slots:x,editRender:m,cellRender:y}=a,I=m||y,P=x?x.default:null;if(P)return bo(e,o.callSlot(P,e));if(I){const b=Hn.get(I.name);if(b){const j=b.renderTableCell||b.renderCell,A=b.renderTableDefault||b.renderDefault,Q=m?j:A;if(Q)return bo(e,xo(Q(I,Object.assign({$type:m?"edit":"cell"},e))))}}const d=o.getCellLabel(n,a),f=m?m.placeholder:"";return bo(e,[u("span",{class:"vxe-cell--label"},[m&&el(d)?u("span",{class:"vxe-cell--placeholder"},so(ll(f),1)):u("span",so(d,1))])])},renderTreeCell(e){return Je.renderTreeIcon(e,Je.renderDefaultCell(e))},renderDefaultFooter(e){return[u("span",{class:"vxe-cell--item"},Cd(e))]},renderTreeIcon(e,o){const{$table:n,isHidden:a}=e,x=n.reactData,m=n.internalData,{computeTreeOpts:y}=n.getComputeMaps(),{treeExpandedMaps:I,treeExpandLazyLoadedMaps:P}=x,{fullAllDataRowIdData:d}=m,f=y.value,{row:b,column:j,level:A}=e,{slots:Q}=j,{indent:$,lazy:L,trigger:M,iconLoaded:F,showIcon:T,iconOpen:w,iconClose:C}=f,R=f.children||f.childrenField,k=f.hasChild||f.hasChildField,_=b[R],se=_&&_.length,he=Q?Q.icon:null;let Z=!1,N=!1,J=!1,ee=!1;const fe={};if(he)return n.callSlot(he,e);if(!a){const ke=Oe(n,b);if(N=!!I[ke],L){const Be=d[ke];J=!!P[ke],Z=b[k],ee=!!Be.treeLoaded}}return(!M||M==="default")&&(fe.onClick=ke=>{n.triggerTreeExpandEvent(ke,e)}),[u("div",{class:["vxe-cell--tree-node",{"is--active":N}],style:{paddingLeft:`${A*$}px`}},[T&&(L?ee?se:Z:se)?[u("div",Object.assign({class:"vxe-tree--btn-wrapper"},fe),[u("i",{class:["vxe-tree--node-btn",J?F||Nt().TABLE_TREE_LOADED:N?w||Nt().TABLE_TREE_OPEN:C||Nt().TABLE_TREE_CLOSE]})])]:null,u("div",{class:"vxe-tree-cell"},o)])]},renderSeqHeader(e){const{$table:o,column:n}=e,{slots:a}=n,x=a?a.header:null;return Yo(e,Ol(e,x?o.callSlot(x,e):so(n.getTitle(),1)))},renderSeqCell(e){const{$table:o,column:n}=e,a=o.props,{treeConfig:x}=a,{computeSeqOpts:m}=o.getComputeMaps(),y=m.value,{slots:I}=n,P=I?I.default:null;if(P)return bo(e,o.callSlot(P,e));const{seq:d}=e,f=y.seqMethod;return bo(e,[u("span",`${so(f?f(e):x?d:(y.startIndex||0)+d,1)}`)])},renderTreeIndexCell(e){return Je.renderTreeIcon(e,Je.renderSeqCell(e))},renderRadioHeader(e){const{$table:o,column:n}=e,{slots:a}=n,x=a?a.header:null,m=a?a.title:null;return Yo(e,Ol(e,x?o.callSlot(x,e):[u("span",{class:"vxe-radio--label"},m?o.callSlot(m,e):so(n.getTitle(),1))]))},renderRadioCell(e){const{$table:o,column:n,isHidden:a}=e,x=o.reactData,{computeRadioOpts:m}=o.getComputeMaps(),{selectRadioRow:y}=x,I=m.value,{slots:P}=n,{labelField:d,checkMethod:f,visibleMethod:b}=I,{row:j}=e,A=P?P.default:null,Q=P?P.radio:null,$=o.eqRow(j,y),L=!b||b({row:j});let M=!!f,F;a||(F={onClick(C){!M&&L&&o.triggerRadioRowEvent(C,e)}},f&&(M=!f({row:j})));const T=Object.assign(Object.assign({},e),{checked:$,disabled:M,visible:L});if(Q)return bo(e,o.callSlot(Q,T));const w=[];return L&&w.push(u("span",{class:["vxe-radio--icon",$?Nt().TABLE_RADIO_CHECKED:Nt().TABLE_RADIO_UNCHECKED]})),(A||d)&&w.push(u("span",{class:"vxe-radio--label"},A?o.callSlot(A,T):r.get(j,d))),bo(e,[u("span",Object.assign({class:["vxe-cell--radio",{"is--checked":$,"is--disabled":M}]},F),w)])},renderTreeRadioCell(e){return Je.renderTreeIcon(e,Je.renderRadioCell(e))},renderCheckboxHeader(e){const{$table:o,column:n,isHidden:a}=e,x=o.reactData,{computeIsAllCheckboxDisabled:m,computeCheckboxOpts:y}=o.getComputeMaps(),{isAllSelected:I,isIndeterminate:P}=x,d=m.value,{slots:f}=n,b=f?f.header:null,j=f?f.title:null,A=y.value,Q=n.getTitle(),$={};a||($.onClick=M=>{d||o.triggerCheckAllEvent(M,!I)});const L=Object.assign(Object.assign({},e),{checked:I,disabled:d,indeterminate:P});return b?Yo(e,Ol(L,o.callSlot(b,L))):(A.checkStrictly?!A.showHeader:A.showHeader===!1)?Yo(e,Ol(L,[u("span",{class:"vxe-checkbox--label"},j?o.callSlot(j,L):Q)])):Yo(e,Ol(L,[u("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":I,"is--disabled":d,"is--indeterminate":P}],title:Jn("vxe.table.allTitle")},$),[u("span",{class:["vxe-checkbox--icon",P?Nt().TABLE_CHECKBOX_INDETERMINATE:I?Nt().TABLE_CHECKBOX_CHECKED:Nt().TABLE_CHECKBOX_UNCHECKED]})].concat(j||Q?[u("span",{class:"vxe-checkbox--label"},j?o.callSlot(j,L):Q)]:[]))]))},renderCheckboxCell(e){const{$table:o,row:n,column:a,isHidden:x}=e,m=o.props,y=o.reactData,{treeConfig:I}=m,{selectCheckboxMaps:P,treeIndeterminateMaps:d}=y,{computeCheckboxOpts:f}=o.getComputeMaps(),b=f.value,{labelField:j,checkMethod:A,visibleMethod:Q}=b,{slots:$}=a,L=$?$.default:null,M=$?$.checkbox:null;let F=!1,T=!1;const w=!Q||Q({row:n});let C=!!A;const R={};if(!x){const se=Oe(o,n);T=!!P[se],R.onClick=he=>{!C&&w&&o.triggerCheckRowEvent(he,e,!T)},A&&(C=!A({row:n})),I&&(F=!!d[se])}const k=Object.assign(Object.assign({},e),{checked:T,disabled:C,visible:w,indeterminate:F});if(M)return bo(e,o.callSlot(M,k));const _=[];return w&&_.push(u("span",{class:["vxe-checkbox--icon",F?Nt().TABLE_CHECKBOX_INDETERMINATE:T?Nt().TABLE_CHECKBOX_CHECKED:Nt().TABLE_CHECKBOX_UNCHECKED]})),(L||j)&&_.push(u("span",{class:"vxe-checkbox--label"},L?o.callSlot(L,k):r.get(n,j))),bo(e,[u("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":T,"is--disabled":C,"is--indeterminate":F,"is--hidden":!w}]},R),_)])},renderTreeSelectionCell(e){return Je.renderTreeIcon(e,Je.renderCheckboxCell(e))},renderCheckboxCellByProp(e){const{$table:o,row:n,column:a,isHidden:x}=e,m=o.props,y=o.reactData,{treeConfig:I}=m,{treeIndeterminateMaps:P}=y,{computeCheckboxOpts:d}=o.getComputeMaps(),f=d.value,{labelField:b,checkField:j,checkMethod:A,visibleMethod:Q}=f,$=f.indeterminateField||f.halfField,{slots:L}=a,M=L?L.default:null,F=L?L.checkbox:null;let T=!1,w=!1;const C=!Q||Q({row:n});let R=!!A;const k={};if(!x){const he=Oe(o,n);w=r.get(n,j),k.onClick=Z=>{!R&&C&&o.triggerCheckRowEvent(Z,e,!w)},A&&(R=!A({row:n})),I&&(T=!!P[he])}const _=Object.assign(Object.assign({},e),{checked:w,disabled:R,visible:C,indeterminate:T});if(F)return bo(e,o.callSlot(F,_));const se=[];return C&&(se.push(u("span",{class:["vxe-checkbox--icon",T?Nt().TABLE_CHECKBOX_INDETERMINATE:w?Nt().TABLE_CHECKBOX_CHECKED:Nt().TABLE_CHECKBOX_UNCHECKED]})),(M||b)&&se.push(u("span",{class:"vxe-checkbox--label"},M?o.callSlot(M,_):r.get(n,b)))),bo(e,[u("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":w,"is--disabled":R,"is--indeterminate":$&&!w?n[$]:T,"is--hidden":!C}]},k),se)])},renderTreeSelectionCellByProp(e){return Je.renderTreeIcon(e,Je.renderCheckboxCellByProp(e))},renderExpandCell(e){const{$table:o,isHidden:n,row:a,column:x}=e,m=o.reactData,{rowExpandedMaps:y,rowExpandLazyLoadedMaps:I}=m,{computeExpandOpts:P}=o.getComputeMaps(),d=P.value,{lazy:f,labelField:b,iconLoaded:j,showIcon:A,iconOpen:Q,iconClose:$,visibleMethod:L}=d,{slots:M}=x,F=M?M.default:null,T=M?M.icon:null;let w=!1,C=!1;if(T)return bo(e,o.callSlot(T,e));if(!n){const R=Oe(o,a);w=!!y[R],f&&(C=!!I[R])}return bo(e,[A&&(!L||L(e))?u("span",{class:["vxe-table--expanded",{"is--active":w}],onClick(R){o.triggerRowExpandEvent(R,e)}},[u("i",{class:["vxe-table--expand-btn",C?j||Nt().TABLE_EXPAND_LOADED:w?Q||Nt().TABLE_EXPAND_OPEN:$||Nt().TABLE_EXPAND_CLOSE]})]):_l(o),F||b?u("span",{class:"vxe-table--expand-label"},F?o.callSlot(F,e):r.get(a,b)):_l(o)])},renderExpandData(e){const{$table:o,column:n}=e,{slots:a,contentRender:x}=n,m=a?a.content:null;if(m)return o.callSlot(m,e);if(x){const y=Hn.get(x.name);if(y){const I=y.renderTableExpand||y.renderExpand;if(I)return xo(I(x,e))}}return[]},renderHTMLCell(e){const{$table:o,column:n}=e,{slots:a}=n,x=a?a.default:null;return x?bo(e,o.callSlot(x,e)):bo(e,[u("span",{class:"vxe-cell--html",innerHTML:Gr(e)})])},renderTreeHTMLCell(e){return Je.renderTreeIcon(e,Je.renderHTMLCell(e))},renderSortAndFilterHeader(e){return Yo(e,Je.renderHeaderTitle(e).concat(Je.renderSortIcon(e).concat(Je.renderFilterIcon(e))))},renderSortHeader(e){return Yo(e,Je.renderHeaderTitle(e).concat(Je.renderSortIcon(e)))},renderSortIcon(e){const{$table:o,column:n}=e,{computeSortOpts:a}=o.getComputeMaps(),x=a.value,{showIcon:m,iconLayout:y,iconAsc:I,iconDesc:P}=x,{order:d}=n;return m?[u("span",{class:["vxe-cell--sort",`vxe-cell--sort-${y}-layout`]},[u("i",{class:["vxe-sort--asc-btn",I||Nt().TABLE_SORT_ASC,{"sort--active":d==="asc"}],title:Jn("vxe.table.sortAsc"),onClick(f){f.stopPropagation(),o.triggerSortEvent(f,n,"asc")}}),u("i",{class:["vxe-sort--desc-btn",P||Nt().TABLE_SORT_DESC,{"sort--active":d==="desc"}],title:Jn("vxe.table.sortDesc"),onClick(f){f.stopPropagation(),o.triggerSortEvent(f,n,"desc")}})])]:[]},renderFilterHeader(e){return Yo(e,Je.renderHeaderTitle(e).concat(Je.renderFilterIcon(e)))},renderFilterIcon(e){const{$table:o,column:n,hasFilter:a}=e,x=o.reactData,{filterStore:m}=x,{computeFilterOpts:y}=o.getComputeMaps(),I=y.value,{showIcon:P,iconNone:d,iconMatch:f}=I;return P?[u("span",{class:["vxe-cell--filter",{"is--active":m.visible&&m.column===n}]},[u("i",{class:["vxe-filter--btn",a?f||Nt().TABLE_FILTER_MATCH:d||Nt().TABLE_FILTER_NONE],title:Jn("vxe.table.filter"),onClick(b){o.triggerFilterEvent&&o.triggerFilterEvent(b,e.column,e)}})])]:[]},renderEditHeader(e){const{$table:o,column:n}=e,a=o.props,{computeEditOpts:x}=o.getComputeMaps(),{editConfig:m,editRules:y}=a,I=x.value,{sortable:P,filters:d,editRender:f}=n;let b=!1;if(y){const A=r.get(y,n.field);A&&(b=A.some(Q=>Q.required))}let j=[];return ct(m)&&(j=[b&&I.showAsterisk?u("i",{class:"vxe-cell--required-icon"}):_l(o),ct(f)&&I.showIcon?u("i",{class:["vxe-cell--edit-icon",I.icon||Nt().TABLE_EDIT]}):_l(o)]),Yo(e,j.concat(Je.renderHeaderTitle(e)).concat(P?Je.renderSortIcon(e):[]).concat(d?Je.renderFilterIcon(e):[]))},renderRowEdit(e){const{$table:o,column:n}=e,a=o.reactData,{editStore:x}=a,{actived:m}=x,{editRender:y}=n;return Je.runRenderer(e,ct(y)&&m&&m.row===e.row)},renderTreeRowEdit(e){return Je.renderTreeIcon(e,Je.renderRowEdit(e))},renderCellEdit(e){const{$table:o,column:n}=e,a=o.reactData,{editStore:x}=a,{actived:m}=x,{editRender:y}=n;return Je.runRenderer(e,ct(y)&&m&&m.row===e.row&&m.column===e.column)},renderTreeCellEdit(e){return Je.renderTreeIcon(e,Je.renderCellEdit(e))},runRenderer(e,o){const{$table:n,column:a}=e,{slots:x,editRender:m,formatter:y}=a,I=x?x.default:null,P=x?x.edit:null,d=Hn.get(m.name),f=d?d.renderTableEdit||d.renderEdit:null,b=Object.assign({$type:"",isEdit:o},e);return o?(b.$type="edit",P?n.callSlot(P,b):f?xo(f(m,b)):[]):I?bo(e,n.callSlot(I,b)):y?bo(e,[u("span",{class:"vxe-cell--label"},Gr(b))]):Je.renderDefaultCell(b)}},ra={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],footerFormatter:[Function,Array,String],sortable:Boolean,sortBy:[String,Function],sortType:String,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,treeNode:Boolean,dragSort:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,params:Object},Dl=Lo({name:"VxeColumn",props:ra,setup(e,{slots:o}){const n=ze(),a=go("$xeTable",null),x=go("$xeColgroup",null);if(!a)return()=>We();const m=Je.createColumn(a,e);m.slots=o;const y=()=>u("div",{ref:n}),I={columnConfig:m,renderVN:y};return ea(a,e,m),zl(()=>{const P=n.value;P&&ta(a,P,m,x)}),ql(()=>{oa(a,m)}),Fl("$xeColumn",I),Fl("$xeGrid",null),y}}),xr=Object.assign({},Dl,{install(e){e.component(Dl.name,Dl),e.component("VxeTableColumn",Dl)}});te.dynamicApp&&(te.dynamicApp.component(Dl.name,Dl),te.dynamicApp.component("VxeTableColumn",Dl));te.component(Dl);const wd=xr,Il=Lo({name:"VxeColgroup",props:ra,setup(e,{slots:o}){const n=ze(),a=go("$xeTable",null),x=go("$xeColgroup",null);if(!a)return()=>We();const m=Je.createColumn(a,e),y={};o.header&&(y.header=o.header),m.slots=y,m.children=[],ea(a,e,m),zl(()=>{const d=n.value;d&&ta(a,d,m,x)}),ql(()=>{oa(a,m)});const I=()=>u("div",{ref:n},o.default?o.default():[]);return Fl("$xeColgroup",{columnConfig:m}),Fl("$xeGrid",null),I}}),Cr=Object.assign({},Il,{install(e){e.component(Il.name,Il),e.component("VxeTableColgroup",Il)}});te.dynamicApp&&(te.dynamicApp.component(Il.name,Il),te.dynamicApp.component("VxeTableColgroup",Il));te.component(Il);const Ed=Cr,{getI18n:yd,renderer:Zr,renderEmptyElement:Ks}=te,en="body",Rd={mini:3,small:2,medium:1},Qr=Lo({name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:""}},setup(e){const o=go("$xeTable",{}),n=go("xesize",null),{xID:a,props:x,context:m,reactData:y,internalData:I}=o,{refTableBody:P,refTableHeader:d,refTableFooter:f,refTableLeftBody:b,refTableRightBody:j,refScrollXHandleElem:A,refScrollYHandleElem:Q}=o.getRefMaps(),{computeEditOpts:$,computeMouseOpts:L,computeAreaOpts:M,computeSYOpts:F,computeEmptyOpts:T,computeTooltipOpts:w,computeRadioOpts:C,computeExpandOpts:R,computeTreeOpts:k,computeCheckboxOpts:_,computeCellOpts:se,computeValidOpts:he,computeRowOpts:Z,computeColumnOpts:N,computeRowDragOpts:J,computeColumnDragOpts:ee}=o.getComputeMaps(),fe=ze(),ke=ze(),Be=ze(),Ae=ze(),Y=ze(),H=ze(),ce=ze(),ne=()=>{if(n){const Ee=n.value;if(Ee)return Rd[Ee]||0}return 0},oe=()=>{const{delayHover:Ee}=x,{lastScrollTime:Me,_isResize:xe}=y;return!!(xe||Me&&Date.now()<Me+Ee)},me=(Ee,Me)=>{let xe=1;if(!Ee)return xe;const Ze=k.value,Fe=Ze.children||Ze.childrenField,$e=Ee[Fe];if($e&&o.isTreeExpandByRow(Ee))for(let He=0;He<$e.length;He++)xe+=me($e[He]);return xe},be=(Ee,Me,xe)=>{let Ze=1;return xe&&(Ze=me(Me[xe-1])),y.rowHeight*Ze-(xe?1:12-ne())},Se=Ee=>{const{row:Me,column:xe}=Ee,{afterFullData:Ze}=I,{treeConfig:Fe}=x,$e=k.value,{slots:He,treeNode:ge}=xe,{fullAllDataRowIdData:we}=I,je=Oe(o,Me),Ne=we[je];let Ie=0,Ke=0,ye=[];if(Ne&&(Ie=Ne.level,Ke=Ne._index,ye=Ne.items),He&&He.line)return o.callSlot(He.line,Ee);const lt=o.eqRow(Ze[0],Me);return Fe&&ge&&($e.showLine||$e.line)?[u("div",{class:"vxe-tree--line-wrapper"},[u("div",{class:"vxe-tree--line",style:{height:`${lt?1:be(Ee,ye,Ke)}px`,left:`${Ie*$e.indent+(Ie?2-ne():0)+16}px`}})])]:[]},Ce=(Ee,Me,xe,Ze,Fe,$e,He,ge,we,je,Ne,Ie)=>{const{fullAllDataRowIdData:Ke}=I,{columnKey:ye,height:lt,showOverflow:B,cellClassName:le,cellStyle:de,align:Le,spanMethod:Te,mouseConfig:Qe,editConfig:Ye,editRules:nt,tooltipConfig:ft}=x,{tableData:Et,overflowX:gt,currentColumn:xt,scrollXLoad:At,scrollYLoad:st,mergeList:et,editStore:Ot,isAllOverflow:Ut,validErrorMaps:Yt}=y,{afterFullData:Dt}=I,_t=se.value,dt=he.value,It=_.value,Ft=$.value,yt=w.value,co=Z.value,ht=J.value,{disabledMethod:St}=ht,h=F.value,Lt=N.value,Zt=L.value,po=M.value,{selectCellToRow:oo}=po,{type:qt,cellRender:Qt,editRender:Ct,align:Vt,showOverflow:ro,className:$o,treeNode:nl,slots:xl}=we,{verticalAlign:Kl}=_t,{actived:Ul}=Ot,{rHeight:sl}=h,{height:Cl}=co,kl=we.id,xn=Ct||Qt,Po=xn?Zr.get(xn.name):null,Cn=Po?Po.tableCellClassName||Po.cellClassName:null,wl=Po?Po.tableCellStyle||Po.cellStyle:"",Al=yt.showAll,wn=o.getColumnIndex(we),Yl=o.getVTColumnIndex(we),rl=ct(Ct);let El=xe?we.fixed!==xe:we.fixed&&gt;const io=r.isUndefined(ro)||r.isNull(ro)?B:ro,il=io==="ellipsis",zo=io==="title",al=io===!0||io==="tooltip",Ll=B||zo||al||il;let Nn;const cl={},Ss=Ke[Me],dl=Vt||(Po?Po.tableCellAlign:"")||Le,Bo=Yt[`${Me}:${kl}`],ul=nt&&dt.showMessage&&(dt.message==="default"?lt||Et.length>1:dt.message==="inline"),Vo={colid:kl},ho={$table:o,$grid:o.xegrid,isEdit:!1,seq:Ee,rowid:Me,row:Fe,rowIndex:$e,$rowIndex:He,_rowIndex:ge,column:we,columnIndex:wn,$columnIndex:je,_columnIndex:Yl,fixed:xe,type:en,isHidden:El,level:Ze,visibleData:Dt,data:Et,items:Ie};let $l=!1,En=!1;if(co.drag&&($l=ht.trigger==="row"||we.dragSort&&ht.trigger==="cell"),$l&&(En=!!(St&&St(ho))),(zo||al||Al||ft)&&(cl.onMouseenter=$t=>{oe()||(zo?vr($t.currentTarget,we):(al||Al)&&o.triggerBodyTooltipEvent($t,ho),o.dispatchEvent("cell-mouseenter",Object.assign({cell:$t.currentTarget},ho),$t))}),(al||Al||ft)&&(cl.onMouseleave=$t=>{oe()||((al||Al)&&o.handleTargetLeaveEvent($t),o.dispatchEvent("cell-mouseleave",Object.assign({cell:$t.currentTarget},ho),$t))}),($l||It.range||Qe)&&(cl.onMousedown=$t=>{o.triggerCellMousedownEvent($t,ho)}),$l&&(cl.onMouseup=o.triggerCellMouseupEvent),cl.onClick=$t=>{o.triggerCellClickEvent($t,ho)},cl.onDblclick=$t=>{o.triggerCellDblclickEvent($t,ho)},et.length){const $t=la(et,ge,Yl);if($t){const{rowspan:Ho,colspan:qo}=$t;if(!Ho||!qo)return null;Ho>1&&(Vo.rowspan=Ho),qo>1&&(Vo.colspan=qo)}}else if(Te){const{rowspan:$t=1,colspan:Ho=1}=Te(ho)||{};if(!$t||!Ho)return null;$t>1&&(Vo.rowspan=$t),Ho>1&&(Vo.colspan=Ho)}El&&et&&(Vo.colspan>1||Vo.rowspan>1)&&(El=!1),!El&&Ye&&(Ct||Qt)&&(Ft.showStatus||Ft.showUpdateStatus)&&(Nn=o.isUpdateByRow(Fe,we.field));const yl=[];if(El&&B&&Ut)yl.push(u("div",{class:["vxe-cell",{"c--title":zo,"c--tooltip":al,"c--ellipsis":il}],style:{maxHeight:Ll&&(sl||Cl)?`${sl||Cl}px`:""}}));else if(yl.push(...Se(ho),u("div",{class:["vxe-cell",{"c--title":zo,"c--tooltip":al,"c--ellipsis":il}],style:{maxHeight:Ll&&(sl||Cl)?`${sl||Cl}px`:""},title:zo?o.getCellLabel(Fe,we):null},we.renderCell(ho))),ul&&Bo){const $t=Bo.rule,Ho=xl?xl.valid:null,qo=Object.assign(Object.assign(Object.assign({},ho),Bo),{rule:Bo});yl.push(u("div",{class:["vxe-cell--valid-error-tip",Ml(dt.className,qo)],style:$t&&$t.maxWidth?{width:`${$t.maxWidth}px`}:null},[u("div",{class:`vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-${dt.theme||"normal"}`},[Ho?o.callSlot(Ho,qo):[u("span",{class:"vxe-cell--valid-error-msg"},Bo.content)]])]))}let Gl="";Ll&&(sl||Cl)?Gl=`${sl||Cl}px`:(At||st)&&(Ll||(Gl=`${Ss.height||24}px`)),Qe&&Zt.area&&oo&&(!je&&oo===!0||oo===we.field)&&yl.push(u("div",{class:"vxe-cell--area-status"}));const _n=!we.resizeWidth&&(we.minWidth==="auto"||we.width==="auto");return u("td",Object.assign(Object.assign(Object.assign({class:["vxe-body--column",kl,{[`col--${dl}`]:dl,[`col--vertical-${Kl}`]:Kl,[`col--${qt}`]:qt,"col--last":je===Ne.length-1,"col--tree-node":nl,"col--edit":rl,"col--ellipsis":Ll,"fixed--width":!_n,"fixed--hidden":El,"is--drag-cell":$l,"is--drag-disabled":En,"col--dirty":Nn,"col--active":Ye&&rl&&Ul.row===Fe&&(Ul.column===we||Ft.mode==="row"),"col--valid-error":!!Bo,"col--current":xt===we},Ml(Cn,ho),Ml($o,ho),Ml(le,ho)],key:ye||At||st||Lt.useKey||co.useKey||Lt.drag?kl:je},Vo),{style:Object.assign({height:Gl},r.isFunction(wl)?wl(ho):wl,r.isFunction(de)?de(ho):de)}),cl),yl)},re=(Ee,Me,xe)=>{const{stripe:Ze,rowKey:Fe,highlightHoverRow:$e,rowClassName:He,rowStyle:ge,showOverflow:we,editConfig:je,treeConfig:Ne}=x,{hasFixedColumn:Ie,treeExpandedMaps:Ke,scrollXLoad:ye,scrollYLoad:lt,rowExpandedMaps:B,expandColumn:le,selectRadioRow:de,pendingRowMaps:Le,isDragColMove:Te}=y,{fullAllDataRowIdData:Qe}=I,Ye=_.value,nt=C.value,ft=k.value,Et=$.value,gt=Z.value,xt=N.value,At=ee.value,{transform:st,seqMode:et}=ft,Ot=ft.children||ft.childrenField,Ut=[];return Me.forEach((Yt,Dt)=>{const _t={};let dt=Dt;dt=o.getRowIndex(Yt),(gt.isHover||$e)&&(_t.onMouseenter=Qt=>{oe()||o.triggerHoverEvent(Qt,{row:Yt,rowIndex:dt})},_t.onMouseleave=()=>{oe()||o.clearHoverRow()});const It=Oe(o,Yt),Ft=Qe[It];let yt=0,co=-1,ht=0;Ft&&(yt=Ft.level,Ne&&st&&et==="increasing"?co=Ft._index+1:co=Ft.seq,ht=Ft._index);const St={$table:o,seq:co,rowid:It,fixed:Ee,type:en,level:yt,row:Yt,rowIndex:dt,$rowIndex:Dt,_rowIndex:ht},h=le&&!!B[It];let Lt=!1,Zt=[],po=!1;je&&(po=o.isInsertByRow(Yt)),Ne&&!lt&&!st&&(Zt=Yt[Ot],Lt=Zt&&Zt.length>0&&!!Ke[It]),gt.drag&&(!Ne||st)&&(_t.onDragstart=o.handleRowDragDragstartEvent,_t.onDragend=o.handleRowDragDragendEvent,_t.onDragover=o.handleRowDragDragoverEvent);const oo=["vxe-body--row",Ne?`row--level-${yt}`:"",{"row--stripe":Ze&&(ht+1)%2===0,"is--new":po,"is--expand-row":h,"is--expand-tree":Lt,"row--new":po&&(Et.showStatus||Et.showInsertStatus),"row--radio":nt.highlight&&o.eqRow(de,Yt),"row--checked":Ye.highlight&&o.isCheckedByCheckboxRow(Yt),"row--pending":!!Le[It]},Ml(He,St)],qt=xe.map((Qt,Ct)=>Ce(co,It,Ee,yt,Yt,dt,Dt,ht,Qt,Ct,xe,Me));if(Ut.push(xt.drag&&At.animation?u(bn,Object.assign({name:`vxe-header--col-list${Te?"":"-disabled"}`,tag:"tr",class:oo,rowid:It,style:ge?r.isFunction(ge)?ge(St):ge:null,key:Fe||ye||lt||gt.useKey||gt.drag||xt.drag||Ne?It:Dt},_t),{default:()=>qt}):u("tr",Object.assign({class:oo,rowid:It,style:ge?r.isFunction(ge)?ge(St):ge:null,key:Fe||ye||lt||gt.useKey||gt.drag||xt.drag||Ne?It:Dt},_t),qt)),h){const Qt=R.value,{height:Ct,padding:Vt}=Qt,ro={};Ct&&(ro.height=`${Ct}px`),Ne&&(ro.paddingLeft=`${yt*ft.indent+30}px`);const{showOverflow:$o}=le,nl=r.isUndefined($o)||r.isNull($o)?we:$o,xl={$table:o,seq:co,column:le,fixed:Ee,type:en,level:yt,row:Yt,rowIndex:dt,$rowIndex:Dt,_rowIndex:ht};Ut.push(u("tr",Object.assign({class:["vxe-body--expanded-row",{"is--padding":Vt}],key:`expand_${It}`,style:ge?r.isFunction(ge)?ge(xl):ge:null},_t),[u("td",{class:{"vxe-body--expanded-column":1,"fixed--hidden":Ee&&!Ie,"col--ellipsis":nl},colspan:xe.length},[u("div",{class:{"vxe-body--expanded-cell":1,"is--ellipsis":Ct},style:ro},[le.renderData(xl)])])]))}Lt&&Ut.push(...re(Ee,Zt,xe))}),Ut},ve=Ee=>{const{fixedType:Me}=e,{lastScrollTop:xe,lastScrollLeft:Ze,inVirtualScroll:Fe,inBodyScroll:$e,bodyScrollType:He,inFooterScroll:ge}=I;if(Fe||ge||$e&&He!==Me)return;const we=d.value,je=P.value,Ne=f.value,Ie=b.value,Ke=j.value,ye=fe.value,lt=we?we.$el:null,B=Ne?Ne.$el:null,le=je.$el;if(!le)return;const de=Ie?Ie.$el:null,Le=Ke?Ke.$el:null,Te=A.value,Qe=Q.value,Ye=ye.scrollTop,nt=le.scrollLeft,ft=nt!==Ze,Et=Ye!==xe;I.inBodyScroll=!0,I.bodyScrollType=Me,Et&&(de&&Me==="left"?(Kt(le,Ye),Kt(Le,Ye)):Le&&Me==="right"?(Kt(le,Ye),Kt(de,Ye)):(Kt(de,Ye),Kt(Le,Ye)),Kt(Qe,Ye),o.triggerScrollYEvent(Ee)),ft&&(no(Te,nt),no(lt,nt),no(B,nt),o.triggerScrollXEvent(Ee)),o.handleScrollEvent(Ee,Et,ft,Ye,nt,{type:en,fixed:Me})};let X,ie=0,ue=0,pe=0,W=!1;const Ge=(Ee,Me,xe,Ze,Fe)=>{const{elemStore:$e}=I,{scrollXLoad:He,scrollYLoad:ge}=y,we=P.value,je=b.value,Ne=j.value,Ie=je?je.$el:null,Ke=Ne?Ne.$el:null,ye=we.$el,lt=Eo($e["main-body-ySpace"]),B=Eo($e["main-body-xSpace"]),le=ge&&lt?lt.clientHeight:ye.clientHeight,de=He&&B?B.clientWidth:ye.clientWidth,Le=W===Me?Math.max(0,ie-pe):0;W=Me,ie=Math.abs(Me?xe-Le:xe+Le),ue=0,pe=0,clearTimeout(X);const Te=()=>{if(pe<ie){const{fixedType:Qe}=e;ue=Math.max(5,Math.floor(ue*1.5)),pe=pe+ue,pe>ie&&(ue=ue-(pe-ie));const{scrollTop:Ye,clientHeight:nt,scrollHeight:ft}=ye,Et=Ye+ue*(Me?-1:1);ye.scrollTop=Et,Ie&&(Ie.scrollTop=Et),Ke&&(Ke.scrollTop=Et),(Me?Et<ft-nt:Et>=0)&&(X=setTimeout(Te,10)),o.dispatchEvent("scroll",{type:en,fixed:Qe,scrollTop:ye.scrollTop,scrollLeft:ye.scrollLeft,scrollHeight:ye.scrollHeight,scrollWidth:ye.scrollWidth,bodyHeight:le,bodyWidth:de,isX:Ze,isY:Fe},Ee)}};Te()},Ve=Ee=>{const{deltaY:Me,deltaX:xe}=Ee,{highlightHoverRow:Ze}=x,{scrollYLoad:Fe}=y,{lastScrollTop:$e,lastScrollLeft:He}=I,ge=Z.value,we=P.value,je=fe.value,Ne=we.$el,Ie=Me,Ke=xe,ye=Ie<0;if(ye?je.scrollTop<=0:je.scrollTop>=je.scrollHeight-je.clientHeight)return;const lt=je.scrollTop+Ie,B=Ne.scrollLeft+Ke,le=B!==He,de=lt!==$e;de&&(Ee.preventDefault(),I.lastScrollTop=lt,I.lastScrollLeft=B,y.lastScrollTime=Date.now(),(ge.isHover||Ze)&&o.clearHoverRow(),Ge(Ee,ye,Ie,le,de),Fe&&o.triggerScrollYEvent(Ee))};return zl(()=>{ae(()=>{const{fixedType:Ee}=e,{elemStore:Me}=I,xe=`${Ee||"main"}-body-`;Me[`${xe}wrapper`]=fe,Me[`${xe}table`]=ke,Me[`${xe}colgroup`]=Be,Me[`${xe}list`]=Ae,Me[`${xe}xSpace`]=Y,Me[`${xe}ySpace`]=H,Me[`${xe}emptyBlock`]=ce})}),Ei(()=>{clearTimeout(X)}),ql(()=>{const{fixedType:Ee}=e,{elemStore:Me}=I,xe=`${Ee||"main"}-body-`;Me[`${xe}wrapper`]=null,Me[`${xe}table`]=null,Me[`${xe}colgroup`]=null,Me[`${xe}list`]=null,Me[`${xe}xSpace`]=null,Me[`${xe}ySpace`]=null,Me[`${xe}emptyBlock`]=null}),()=>{const{slots:Ee}=m,{fixedColumn:Me,fixedType:xe,tableColumn:Ze}=e,{showOverflow:Fe,spanMethod:$e,footerSpanMethod:He,mouseConfig:ge}=x,{isGroup:we,tableData:je,scrollXLoad:Ne,scrollYLoad:Ie,isAllOverflow:Ke,isDragRowMove:ye,expandColumn:lt,dragRow:B,dragCol:le}=y,{visibleColumn:de,fullAllDataRowIdData:Le,fullColumnIdData:Te}=I,Qe=Z.value,Ye=F.value,nt=T.value,ft=L.value,Et=J.value;let gt=je,xt=Ze;if(xe&&(xt=de,(Ne||Ie||Fe&&Ke)&&(lt||$e||He?xt=de:xt=Me||[])),Ie&&B&&gt.length>2){const Ot=Le[Oe(o,B)];if(Ot){const Ut=Ot._index,Yt=gt[0],Dt=gt[gt.length-1],_t=Le[Oe(o,Yt)],dt=Le[Oe(o,Dt)];if(_t&&dt){const It=_t._index,Ft=dt._index;Ut<It?gt=[B].concat(gt):Ut>Ft&&(gt=gt.concat([B]))}}}if(!xe&&!we&&Ne&&le&&xt.length>2){const Ot=Te[le.id];if(Ot){const Ut=Ot._index,Yt=xt[0],Dt=xt[xt.length-1],_t=Te[Yt.id],dt=Te[Dt.id];if(_t&&dt){const It=_t._index,Ft=dt._index;Ut<It?xt=[le].concat(xt):Ut>Ft&&(xt=xt.concat([le]))}}}let At;const st=Ee?Ee.empty:null;if(st)At=o.callSlot(st,{$table:o,$grid:o.xegrid});else{const Ot=nt.name?Zr.get(nt.name):null,Ut=Ot?Ot.renderTableEmpty||Ot.renderTableEmptyView||Ot.renderEmpty:null;Ut?At=xo(Ut(nt,{$table:o})):At=x.emptyText||yd("vxe.table.emptyText")}const et={onScroll:ve};return Ye.mode==="wheel"&&(et.onWheel=Ve),u("div",Object.assign({ref:fe,class:["vxe-table--body-wrapper",xe?`fixed-${xe}--wrapper`:"body--wrapper"],xid:a},et),[xe?Ks(o):u("div",{ref:Y,class:"vxe-body--x-space"}),u("div",{ref:H,class:"vxe-body--y-space"}),u("table",{ref:ke,class:"vxe-table--body",xid:a,cellspacing:0,cellpadding:0,border:0},[u("colgroup",{ref:Be},xt.map((Ot,Ut)=>u("col",{name:Ot.id,key:Ut}))),Qe.drag&&Et.animation?u(bn,{ref:Ae,name:`vxe-body--row-list${ye?"":"-disabled"}`,tag:"tbody"},{default:()=>re(xe,gt,xt)}):u("tbody",{ref:Ae},re(xe,gt,xt))]),u("div",{class:"vxe-table--checkbox-range"}),ge&&ft.area?u("div",{class:"vxe-table--cell-area"},[u("span",{class:"vxe-table--cell-main-area"},ft.extension?[u("span",{class:"vxe-table--cell-main-area-btn",onMousedown(Ot){o.triggerCellAreaExtendMousedownEvent&&o.triggerCellAreaExtendMousedownEvent(Ot,{$table:o,fixed:xe,type:en})}})]:[]),u("span",{class:"vxe-table--cell-copy-area"}),u("span",{class:"vxe-table--cell-extend-area"}),u("span",{class:"vxe-table--cell-multi-area"}),u("span",{class:"vxe-table--cell-active-area"})]):Ks(o),xe?Ks(o):u("div",{class:"vxe-table--empty-block",ref:ce},[u("div",{class:"vxe-table--empty-content"},At)])])}}}),{renderer:Od,renderEmptyElement:Sd}=te,Jr="header",ei=Lo({name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},setup(e){const o=go("$xeTable",{}),{xID:n,props:a,reactData:x,internalData:m}=o,{refElem:y,refTableBody:I,refLeftContainer:P,refRightContainer:d,refCellResizeBar:f,refCellResizeTip:b}=o.getRefMaps(),{computeColumnOpts:j,computeColumnDragOpts:A,computeResizableOpts:Q}=o.getComputeMaps(),$=ze([]),L=ze(),M=ze(),F=ze(),T=ze(),w=ze(),C=ze(),R=()=>{const{isGroup:Z}=x;$.value=Z?ud(e.tableGroupColumn):[]},k=(Z,N)=>{const{column:J}=N,{fixedType:ee}=e,{visibleColumn:fe}=m,ke=Q.value,Be=I.value,Ae=y.value,Y=P.value,H=d.value,ce=f.value,ne=b.value,{clientX:oe}=Z,me=L.value,be=Z.target,Se=N.cell=be.parentNode;let Ce=0;const re=Be.$el,ve=ad(be,me),X=be.clientWidth,ie=Math.floor(X/2),ue=pd(N)-ie;let pe=ve.left-Se.clientWidth+X+ue,W=ve.left+ie;const Ge=document.onmousemove,Ve=document.onmouseup,qe=ee==="left",Ee=ee==="right";let Me=0;if(qe||Ee){const Ze=qe?"nextElementSibling":"previousElementSibling";let Fe=Se[Ze];for(;Fe&&!Wl(Fe,"fixed--hidden");)Wl(Fe,"col--group")||(Me+=Fe.offsetWidth),Fe=Fe[Ze];Ee&&H&&(W=H.offsetLeft+Me)}const xe=function(Ze){Ze.stopPropagation(),Ze.preventDefault();const Fe=Ze.clientX-oe;let $e=W+Fe;const He=ee?0:re.scrollLeft;qe?$e=Math.min($e,(H?H.offsetLeft:re.clientWidth)-Me-ue):Ee?(pe=(Y?Y.clientWidth:0)+Me+ue,$e=Math.min($e,W+Se.clientWidth-ue)):pe=Math.max(re.scrollLeft,pe),Ce=Math.max($e,pe);const ge=Ce-He;if(ce.style.left=`${ge}px`,ke.showDragTip&&ne){const we=Ae.clientWidth,je=me.getBoundingClientRect(),Ne=ce.clientWidth,Ie=ne.clientWidth,Ke=ne.clientHeight;let ye=-Ie;ge<Ie+Ne?ye=Ie+Ne-ge:ge>we&&(ye+=we-ge),ne.style.left=`${ye}px`,ne.style.top=`${Math.min(Ae.clientHeight-Ke,Math.max(0,Ze.clientY-je.y-Ke/2))}px`,ne.textContent=`${J.renderWidth+(Ee?W-Ce:Ce-W)}px`}};x._isResize=!0,tl(Ae,"drag--resize"),ce.style.display="block",document.onmousemove=xe,document.onmouseup=function(Ze){document.onmousemove=Ge,document.onmouseup=Ve;const Fe=J.renderWidth+(Ee?W-Ce:Ce-W);J.resizeWidth=Fe,ke.dragMode==="fixed"&&fe.forEach($e=>{$e.id!==J.id&&($e.resizeWidth||($e.resizeWidth=$e.renderWidth))}),ce.style.display="none",x._isResize=!1,m._lastResizeTime=Date.now(),o.analyColumnWidth(),o.recalculate(!0).then(()=>{o.saveCustomStore("update:visible"),o.updateCellAreas(),o.dispatchEvent("resizable-change",Object.assign(Object.assign({},N),{resizeWidth:Fe}),Ze),setTimeout(()=>o.recalculate(!0),300)}),Ao(Ae,"drag--resize")},xe(Z),o.closeMenu&&o.closeMenu()},_=(Z,N)=>{const{fixedType:J}=e,{resizable:ee,border:fe,columnKey:ke,headerCellClassName:Be,headerCellStyle:Ae,showHeaderOverflow:Y,headerAlign:H,align:ce,mouseConfig:ne}=a,{currentColumn:oe,scrollXLoad:me,scrollYLoad:be,overflowX:Se,scrollbarWidth:Ce}=x,re=j.value,ve=A.value,{disabledMethod:X}=ve;return Z.map((ie,ue)=>{const{type:pe,showHeaderOverflow:W,headerAlign:Ge,align:Ve,headerClassName:qe,editRender:Ee,cellRender:Me}=ie,xe=ie.id,Ze=Ee||Me,Fe=Ze?Od.get(Ze.name):null,$e=ie.children&&ie.children.length,He=J?ie.fixed!==J&&!$e:!!ie.fixed&&Se,ge=r.eqNull(W)?Y:W,we=Ge||(Fe?Fe.tableHeaderCellAlign:"")||H||Ve||(Fe?Fe.tableCellAlign:"")||ce;let je=ge==="ellipsis";const Ne=ge==="title",Ie=ge===!0||ge==="tooltip";let Ke=Ne||Ie||je;const ye=ie.filters&&ie.filters.some(nt=>nt.checked),lt=o.getColumnIndex(ie),B=o.getVTColumnIndex(ie),le={$table:o,$grid:o.xegrid,$rowIndex:N,column:ie,columnIndex:lt,$columnIndex:ue,_columnIndex:B,fixed:J,type:Jr,isHidden:He,hasFilter:ye},de={colid:xe,colspan:ie.colSpan>1?ie.colSpan:null,rowspan:ie.rowSpan>1?ie.rowSpan:null},Le={onClick:nt=>o.triggerHeaderCellClickEvent(nt,le),onDblclick:nt=>o.triggerHeaderCellDblclickEvent(nt,le)};me&&!Ke&&(je=Ke=!0);const Te=re.drag&&ve.trigger==="cell";let Qe=!1;Te&&(Qe=!!(X&&X(le))),(ne||Te)&&(Le.onMousedown=nt=>o.triggerHeaderCellMousedownEvent(nt,le)),re.drag&&(Le.onDragstart=o.handleHeaderCellDragDragstartEvent,Le.onDragend=o.handleHeaderCellDragDragendEvent,Le.onDragover=o.handleHeaderCellDragDragoverEvent,Te&&(Le.onMouseup=o.handleHeaderCellDragMouseupEvent));const Ye=!ie.resizeWidth&&(ie.minWidth==="auto"||ie.width==="auto");return u("th",Object.assign(Object.assign(Object.assign({class:["vxe-header--column",xe,{[`col--${we}`]:we,[`col--${pe}`]:pe,"col--last":ue===Z.length-1,"col--fixed":ie.fixed,"col--group":$e,"col--ellipsis":Ke,"fixed--width":!Ye,"fixed--hidden":He,"is--sortable":ie.sortable,"col--filter":!!ie.filters,"is--filter-active":ye,"is--drag-active":!ie.fixed&&!Qe,"is--drag-disabled":Qe,"col--current":oe===ie},qe?r.isFunction(qe)?qe(le):qe:"",Be?r.isFunction(Be)?Be(le):Be:""],style:Ae?r.isFunction(Ae)?Ae(le):Ae:null},de),Le),{key:ke||me||be||re.useKey||re.drag||$e?xe:ue}),[u("div",{class:["vxe-cell",{"c--title":Ne,"c--tooltip":Ie,"c--ellipsis":je}]},ie.renderHeader(le)),!He&&!$e&&(r.isBoolean(ie.resizable)?ie.resizable:re.resizable||ee)?u("div",{class:["vxe-resizable",{"is--line":!fe||fe==="none"}],onMousedown:nt=>k(nt,le)}):null])}).concat(Ce?[u("th",{key:`gr${N}`,class:"vxe-header--gutter col--gutter"})]:[])},se=Z=>{const{fixedType:N}=e,{headerRowClassName:J,headerRowStyle:ee}=a,{isDragColMove:fe}=x,ke=j.value,Be=A.value;return Z.map((Ae,Y)=>{const H={$table:o,$rowIndex:Y,fixed:N,type:Jr};return ke.drag&&Be.animation?u(bn,{key:Y,name:`vxe-header--col-list${fe?"":"-disabled"}`,tag:"tr",class:["vxe-header--row",J?r.isFunction(J)?J(H):J:""],style:ee?r.isFunction(ee)?ee(H):ee:null},{default:()=>_(Ae,Y)}):u("tr",{key:Y,class:["vxe-header--row",J?r.isFunction(J)?J(H):J:""],style:ee?r.isFunction(ee)?ee(H):ee:null},_(Ae,Y))})},he=()=>{const{fixedType:Z,fixedColumn:N,tableColumn:J}=e,{showHeaderOverflow:ee,spanMethod:fe,footerSpanMethod:ke}=a,{isGroup:Be,scrollXLoad:Ae,scrollYLoad:Y,scrollbarWidth:H,dragCol:ce}=x,{visibleColumn:ne,fullColumnIdData:oe}=m;let me=$.value,be=J;if(Be?be=ne:(Z&&(be=ne,(Ae||Y||ee)&&(fe||ke?be=ne:be=N||[])),me=[be]),!Z&&!Be&&Ae&&ce&&be.length>2){const Se=oe[ce.id];if(Se){const Ce=Se._index,re=be[0],ve=be[be.length-1],X=oe[re.id],ie=oe[ve.id];if(X&&ie){const ue=X._index,pe=ie._index;Ce<ue?(be=[ce].concat(be),me=[[ce].concat(me[0])].concat(me.slice(1))):Ce>pe&&(be=be.concat([ce]),me=[me[0].concat([ce])].concat(me.slice(1)))}}}return u("div",{ref:L,class:["vxe-table--header-wrapper",Z?`fixed-${Z}--wrapper`:"body--wrapper"],xid:n},[Z?Sd(o):u("div",{ref:w,class:"vxe-body--x-space"}),u("table",{ref:M,class:"vxe-table--header",xid:n,cellspacing:0,cellpadding:0,border:0},[u("colgroup",{ref:F},be.map((Se,Ce)=>u("col",{name:Se.id,key:Ce})).concat(H?[u("col",{name:"col_gutter"})]:[])),u("thead",{ref:T},se(me))]),u("div",{ref:C,class:"vxe-table--header-border-line"})])};return wt(()=>e.tableColumn,R),zl(()=>{ae(()=>{const{fixedType:Z}=e,{internalData:N}=o,{elemStore:J}=N,ee=`${Z||"main"}-header-`;J[`${ee}wrapper`]=L,J[`${ee}table`]=M,J[`${ee}colgroup`]=F,J[`${ee}list`]=T,J[`${ee}xSpace`]=w,J[`${ee}repair`]=C,R()})}),ql(()=>{const{fixedType:Z}=e,{internalData:N}=o,{elemStore:J}=N,ee=`${Z||"main"}-header-`;J[`${ee}wrapper`]=null,J[`${ee}table`]=null,J[`${ee}colgroup`]=null,J[`${ee}list`]=null,J[`${ee}xSpace`]=null,J[`${ee}repair`]=null}),he}}),{renderer:Td,renderEmptyElement:Md}=te,Us="footer";function Dd(e,o,n){for(let a=0;a<e.length;a++){const{row:x,col:m,rowspan:y,colspan:I}=e[a];if(m>-1&&x>-1&&y&&I){if(x===o&&m===n)return{rowspan:y,colspan:I};if(o>=x&&o<x+y&&n>=m&&n<m+I)return{rowspan:0,colspan:0}}}}const ti=Lo({name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},setup(e){const o=go("$xeTable",{}),{xID:n,props:a,reactData:x,internalData:m}=o,{refTableHeader:y,refTableBody:I,refScrollXHandleElem:P}=o.getRefMaps(),{computeTooltipOpts:d,computeColumnOpts:f,computeColumnDragOpts:b}=o.getComputeMaps(),j=ze(),A=ze(),Q=ze(),$=ze(),L=ze(),M=C=>{const{inVirtualScroll:R,inBodyScroll:k}=m;if(R||k)return;const{fixedType:_}=e,se=y.value,he=I.value,Z=se?se.$el:null,N=j.value;if(!N)return;const J=he?he.$el:null;if(!J)return;const ee=P.value,fe=N.scrollLeft,ke=!0,Be=!1,Ae=J.scrollTop;m.inFooterScroll=!0,no(ee,fe),no(Z,fe),no(J,fe),o.triggerScrollXEvent(C),o.handleScrollEvent(C,Be,ke,Ae,fe,{type:Us,fixed:_})},F=(C,R,k,_,se)=>{const{fixedType:he}=e,{footerCellClassName:Z,footerCellStyle:N,footerAlign:J,footerSpanMethod:ee,align:fe,columnKey:ke,showFooterOverflow:Be}=a,{scrollXLoad:Ae,scrollYLoad:Y,overflowX:H,scrollbarWidth:ce,currentColumn:ne,mergeFooterList:oe}=x,me=d.value,be=f.value;return C.map((Se,Ce)=>{const{type:re,showFooterOverflow:ve,footerAlign:X,align:ie,footerClassName:ue,editRender:pe,cellRender:W}=Se,Ge=pe||W,Ve=Ge?Td.get(Ge.name):null,qe=me.showAll,Ee=Se.children&&Se.children.length,Me=he?Se.fixed!==he&&!Ee:Se.fixed&&H,xe=r.eqNull(ve)?Be:ve,Ze=X||(Ve?Ve.tableFooterCellAlign:"")||J||ie||(Ve?Ve.tableCellAlign:"")||fe;let Fe=xe==="ellipsis";const $e=xe==="title",He=xe===!0||xe==="tooltip";let ge=$e||He||Fe;const we={colid:Se.id},je={},Ne=o.getColumnIndex(Se),Ie=o.getVTColumnIndex(Se),Ke=Ie,ye={$table:o,$grid:o.xegrid,row:k,rowIndex:se,_rowIndex:se,$rowIndex:_,column:Se,columnIndex:Ne,$columnIndex:Ce,_columnIndex:Ie,itemIndex:Ke,items:k,fixed:he,type:Us,data:R};if(Ae&&!ge&&(Fe=ge=!0),($e||He||qe)&&(je.onMouseenter=B=>{$e?vr(B.currentTarget,Se):(He||qe)&&o.triggerFooterTooltipEvent(B,ye)}),(He||qe)&&(je.onMouseleave=B=>{(He||qe)&&o.handleTargetLeaveEvent(B)}),je.onClick=B=>{o.dispatchEvent("footer-cell-click",Object.assign({cell:B.currentTarget},ye),B)},je.onDblclick=B=>{o.dispatchEvent("footer-cell-dblclick",Object.assign({cell:B.currentTarget},ye),B)},oe.length){const B=Dd(oe,se,Ie);if(B){const{rowspan:le,colspan:de}=B;if(!le||!de)return null;le>1&&(we.rowspan=le),de>1&&(we.colspan=de)}}else if(ee){const{rowspan:B=1,colspan:le=1}=ee(ye)||{};if(!B||!le)return null;B>1&&(we.rowspan=B),le>1&&(we.colspan=le)}const lt=!Se.resizeWidth&&(Se.minWidth==="auto"||Se.width==="auto");return u("td",Object.assign(Object.assign(Object.assign(Object.assign({class:["vxe-footer--column",Se.id,{[`col--${Ze}`]:Ze,[`col--${re}`]:re,"col--last":Ce===C.length-1,"fixed--width":!lt,"fixed--hidden":Me,"col--ellipsis":ge,"col--current":ne===Se},Ml(ue,ye),Ml(Z,ye)]},we),{style:N?r.isFunction(N)?N(ye):N:null}),je),{key:ke||Ae||Y||be.useKey||be.drag?Se.id:Ce}),[u("div",{class:["vxe-cell",{"c--title":$e,"c--tooltip":He,"c--ellipsis":Fe}]},Se.renderFooter(ye))])}).concat(ce?[u("td",{key:`gr${_}`,class:"vxe-footer--gutter col--gutter"})]:[])},T=C=>{const{fixedType:R,footerTableData:k}=e,{footerRowClassName:_,footerRowStyle:se}=a,{isDragColMove:he}=x,Z=f.value,N=b.value;return k.map((J,ee)=>{const fe=ee,ke={$table:o,row:J,_rowIndex:fe,$rowIndex:ee,fixed:R,type:Us};return Z.drag&&N.animation?u(bn,{key:ee,name:`vxe-header--col-list${he?"":"-disabled"}`,tag:"tr",class:["vxe-footer--row",_?r.isFunction(_)?_(ke):_:""],style:se?r.isFunction(se)?se(ke):se:null},{default:()=>F(C,k,J,ee,fe)}):u("tr",{key:ee,class:["vxe-footer--row",_?r.isFunction(_)?_(ke):_:""],style:se?r.isFunction(se)?se(ke):se:null},F(C,k,J,ee,fe))})},w=()=>{const{fixedType:C,fixedColumn:R,tableColumn:k}=e,{spanMethod:_,footerSpanMethod:se,showFooterOverflow:he}=a,{visibleColumn:Z,fullColumnIdData:N}=m,{isGroup:J,scrollXLoad:ee,scrollYLoad:fe,scrollbarWidth:ke,dragCol:Be}=x;let Ae=k;if(C&&(Ae=Z,(ee||fe||he)&&(_||se?Ae=Z:Ae=R||[])),!C&&!J&&ee&&Be&&Ae.length>2){const H=N[Be.id];if(H){const ce=H._index,ne=Ae[0],oe=Ae[Ae.length-1],me=N[ne.id],be=N[oe.id];if(me&&be){const Se=me._index,Ce=be._index;ce<Se?Ae=[Be].concat(Ae):ce>Ce&&(Ae=Ae.concat([Be]))}}}const Y={};return C||(Y.onScroll=M),u("div",Object.assign({ref:j,class:["vxe-table--footer-wrapper",C?`fixed-${C}--wrapper`:"body--wrapper"],xid:n},Y),[C?Md(o):u("div",{ref:L,class:"vxe-body--x-space"}),u("table",{ref:A,class:"vxe-table--footer",xid:n,cellspacing:0,cellpadding:0,border:0},[u("colgroup",{ref:Q},Ae.map((H,ce)=>u("col",{name:H.id,key:ce})).concat(ke?[u("col",{name:"col_gutter"})]:[])),u("tfoot",{ref:$},T(Ae))])])};return zl(()=>{ae(()=>{const{fixedType:C}=e,{elemStore:R}=m,k=`${C||"main"}-footer-`;R[`${k}wrapper`]=j,R[`${k}table`]=A,R[`${k}colgroup`]=Q,R[`${k}list`]=$,R[`${k}xSpace`]=L})}),ql(()=>{const{fixedType:C}=e,{elemStore:R}=m,k=`${C||"main"}-footer-`;R[`${k}wrapper`]=null,R[`${k}table`]=null,R[`${k}colgroup`]=null,R[`${k}list`]=null,R[`${k}xSpace`]=null}),w}}),{getConfig:jt}=te,wr={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>jt().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>jt().table.resizable},stripe:{type:Boolean,default:()=>jt().table.stripe},border:{type:[Boolean,String],default:()=>jt().table.border},padding:{type:Boolean,default:()=>jt().table.padding},round:{type:Boolean,default:()=>jt().table.round},size:{type:String,default:()=>jt().table.size||jt().size},fit:{type:Boolean,default:()=>jt().table.fit},loading:Boolean,align:{type:String,default:()=>jt().table.align},headerAlign:{type:String,default:()=>jt().table.headerAlign},footerAlign:{type:String,default:()=>jt().table.footerAlign},showHeader:{type:Boolean,default:()=>jt().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>jt().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>jt().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>jt().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>jt().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>jt().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>jt().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>jt().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>jt().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>jt().table.emptyText},keepSource:{type:Boolean,default:()=>jt().table.keepSource},autoResize:{type:Boolean,default:()=>jt().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,cellConfig:Object,rowConfig:Object,dragConfig:Object,rowDragConfig:Object,columnDragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:Object,importConfig:Object,printConfig:Object,expandConfig:Object,treeConfig:Object,menuConfig:Object,mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:Object,validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:Object,customConfig:Object,scrollX:Object,scrollY:Object,animat:{type:Boolean,default:()=>jt().table.animat},delayHover:{type:Number,default:()=>jt().table.delayHover},params:Object},Er=["update:data","keydown-start","keydown","keydown-end","paste","copy","cut","current-change","radio-change","checkbox-change","checkbox-all","checkbox-range-start","checkbox-range-change","checkbox-range-end","checkbox-range-select","cell-click","cell-dblclick","cell-menu","cell-mouseenter","cell-mouseleave","cell-selected","cell-delete-value","cell-backspace-value","header-cell-click","header-cell-dblclick","header-cell-menu","footer-cell-click","footer-cell-dblclick","footer-cell-menu","clear-merge","sort-change","clear-sort","filter-change","filter-visible","clear-filter","resizable-change","toggle-row-expand","toggle-tree-expand","menu-click","edit-closed","row-dragstart","row-dragover","row-dragend","column-dragstart","column-dragover","column-dragend","enter-append-row","edit-actived","edit-activated","edit-disabled","valid-error","scroll","scroll-boundary","custom","change-fnr","open-fnr","show-fnr","hide-fnr","fnr-change","fnr-find","fnr-find-all","fnr-replace","fnr-replace-all","cell-area-copy","cell-area-cut","cell-area-paste","cell-area-merge","clear-cell-area-selection","clear-cell-area-merge","header-cell-area-selection","cell-area-selection-invalid","cell-area-selection-start","cell-area-selection-drag","cell-area-selection-end","cell-area-extension-start","cell-area-extension-drag","cell-area-extension-end","cell-area-selection-all-start","cell-area-selection-all-end","cell-area-arrows-start","cell-area-arrows-end","active-cell-change-start","active-cell-change-end"],{getI18n:Tt,getIcon:lo,renderEmptyElement:es}=te,Id=Lo({name:"TableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeDrawer"),a=te.getComponent("VxeButton"),x=te.getComponent("VxeNumberInput"),m=te.getComponent("VxeRadioGroup"),y=go("$xeTable",{}),{props:I,reactData:P,internalData:d}=y,{computeCustomOpts:f,computeColumnDragOpts:b,computeColumnOpts:j,computeIsMaxFixedColumn:A,computeResizableOpts:Q}=y.getComputeMaps(),$=ze(),L=ze(),M=ze(),F=ze(),T=ze();let w,C=!1,R;const k=X=>{const{customStore:ie}=e;ie.activeWrapper=!0,y.customOpenEvent(X)},_=X=>{const{customStore:ie}=e;ie.activeWrapper=!1,setTimeout(()=>{!ie.activeBtn&&!ie.activeWrapper&&y.customCloseEvent(X)},300)},se=({$event:X})=>{P.isCustomStatus=!0,y.saveCustom(),y.closeCustom(),y.emitCustomEvent("confirm",X)},he=({$event:X})=>{y.closeCustom(),y.emitCustomEvent("close",X)},Z=({$event:X})=>{y.cancelCustom(),y.closeCustom(),y.emitCustomEvent("cancel",X)},N=X=>{y.resetCustom(!0),y.closeCustom(),y.emitCustomEvent("reset",X)},J=({$event:X})=>{te.modal?te.modal.confirm({content:Tt("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(ie=>{ie==="confirm"&&N(X)}):N(X)},ee=X=>{const{customColumnList:ie}=P,ue=r.findTree(ie,pe=>pe===X);if(ue&&ue.parent){const{parent:pe}=ue;pe.children&&pe.children.length&&(pe.renderVisible=pe.children.every(W=>W.renderVisible),pe.halfVisible=!pe.renderVisible&&pe.children.some(W=>W.renderVisible||W.halfVisible),ee(pe))}},fe=X=>{const ie=!X.renderVisible;f.value.immediate?(r.eachTree([X],pe=>{pe.visible=ie,pe.renderVisible=ie,pe.halfVisible=!1}),P.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:visible")):r.eachTree([X],pe=>{pe.renderVisible=ie,pe.halfVisible=!1}),ee(X),y.checkCustomStatus()},ke=X=>{f.value.immediate&&X.renderResizeWidth!==X.renderWidth&&(X.resizeWidth=X.renderResizeWidth,X.renderWidth=X.renderResizeWidth,P.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:width"))},Be=(X,ie)=>{const ue=A.value;f.value.immediate?(X.renderFixed===ie?r.eachTree([X],W=>{W.fixed="",W.renderFixed=""}):(!ue||X.renderFixed)&&r.eachTree([X],W=>{W.fixed=ie,W.renderFixed=ie}),P.isCustomStatus=!0,y.handleCustom(),y.saveCustomStore("update:fixed")):X.renderFixed===ie?r.eachTree([X],W=>{W.renderFixed=""}):(!ue||X.renderFixed)&&r.eachTree([X],W=>{W.renderFixed=ie})},Ae=()=>{y.toggleCustomAllCheckbox()},Y=(X,ie,ue,pe)=>{const W=L.value;if(!W)return;const Ge=W.getBoundingClientRect();if(ie){const qe=M.value;if(qe)if(ue){const Ee=ie.getBoundingClientRect();qe.style.display="block",qe.style.top=`${Math.max(1,Ee.y+W.scrollTop-Ge.y)}px`,qe.style.height=`${Ee.height}px`,qe.style.width=`${Ee.width}px`,qe.setAttribute("drag-pos",pe),qe.setAttribute("drag-to-child",C?"y":"n")}else qe.style.display=""}const Ve=F.value;Ve&&(Ve.style.display="block",Ve.style.top=`${Math.min(W.clientHeight+W.scrollTop-Ve.clientHeight,X.clientY+W.scrollTop-Ge.y)}px`,Ve.style.left=`${Math.min(W.clientWidth+W.scrollLeft-Ve.clientWidth,X.clientX+W.scrollLeft-Ge.x)}px`,Ve.setAttribute("drag-status",ue?C?"sub":"normal":"disabled"))},H=()=>{const X=F.value,ie=M.value;X&&(X.style.display=""),ie&&(ie.style.display="")},ce=X=>{const W=X.currentTarget.parentElement.parentElement.parentElement,Ge=W.getAttribute("colid"),Ve=y.getColumnById(Ge);W.draggable=!0,T.value=Ve,tl(W,"active--drag-origin")},ne=X=>{const W=X.currentTarget.parentElement.parentElement.parentElement;H(),W.draggable=!1,T.value=null,Ao(W,"active--drag-origin")},oe=X=>{X.dataTransfer&&X.dataTransfer.setDragImage(sr(),0,0)},me=X=>{const{mouseConfig:ie}=I,{customColumnList:ue}=P,{collectColumn:pe}=d,W=f.value,{immediate:Ge}=W,Ve=X.currentTarget,qe=T.value,Ee=b.value,{isCrossDrag:Me,isSelfToChildDrag:xe,isToChildDrag:Ze,dragEndMethod:Fe}=Ee,$e=R==="bottom"?1:0;if(w&&qe&&w!==qe){const He=qe,ge=w;Promise.resolve(Fe?Fe({oldColumn:He,newColumn:ge,dragPos:R,offsetIndex:$e}):!0).then(we=>{if(!we)return;let je=-1,Ne=-1;const Ie={};r.eachTree([He],ye=>{Ie[ye.id]=ye});let Ke=!1;if(Ge){if(He.parentId&&ge.parentId){if(!Me)return;if(Ie[ge.id]&&(Ke=!0,!(Me&&xe))){te.modal&&te.modal.message({status:"error",content:Tt("vxe.error.treeDragChild")});return}}else if(He.parentId){if(!Me)return}else if(ge.parentId){if(!Me)return;if(Ie[ge.id]&&(Ke=!0,!(Me&&xe))){te.modal&&te.modal.message({status:"error",content:Tt("vxe.error.treeDragChild")});return}}const ye=r.findTree(pe,B=>B.id===He.id);if(Ke&&Me&&xe){if(ye){const{items:B,index:le}=ye,de=He.children||[];de.forEach(Le=>{Le.parentId=He.parentId}),B.splice(le,1,...de),He.children=[]}}else if(ye){const{items:B,index:le,parent:de}=ye;B.splice(le,1),de||(je=le)}const lt=r.findTree(pe,B=>B.id===ge.id);if(lt){const{items:B,index:le,parent:de}=lt;Me&&Ze&&C?(He.parentId=ge.id,ge.children=(ge.children||[]).concat([He])):(He.parentId=ge.parentId,B.splice(le+$e,0,He)),de||(Ne=le)}r.eachTree(pe,(B,le,de,Le,Te)=>{if(!Te){const Qe=le+1;B.renderSortNumber=Qe}})}else je=r.findIndexOf(ue,ye=>ye.id===He.id),ue.splice(je,1),Ne=r.findIndexOf(ue,ye=>ye.id===ge.id),ue.splice(Ne+$e,0,He);P.isDragColMove=!0,ie&&(y.clearSelected&&y.clearSelected(),y.clearCellAreas&&(y.clearCellAreas(),y.clearCopyCellArea())),y.dispatchEvent("column-dragend",{oldColumn:He,newColumn:ge,dragPos:R,offsetIndex:$e,_index:{newIndex:Ne,oldIndex:je}},X),Ge&&(P.customColumnList=pe.slice(0),y.handleColDragSwapColumn())}).catch(()=>{})}H(),T.value=null,Ve.draggable=!1,Ve.removeAttribute("drag-pos"),Ao(Ve,"active--drag-target"),Ao(Ve,"active--drag-origin")},be=X=>{const ie=f.value,{immediate:ue}=ie,pe=b.value,{isCrossDrag:W,isToChildDrag:Ge}=pe,Ve=X.currentTarget,qe=X.ctrlKey,Ee=Ve.getAttribute("colid"),Me=y.getColumnById(Ee),xe=T.value;if(Me&&(W||Me.level===1)){X.preventDefault();const Fe=X.clientY-Ve.getBoundingClientRect().y<Ve.clientHeight/2?"top":"bottom";if(xe&&xe.id===Me.id||!W&&Me.level>1||!ue&&Me.level>1||Me.renderFixed){Y(X,Ve,!1,Fe);return}C=!!(W&&Ge&&qe&&ue),w=Me,R=Fe,Y(X,Ve,!0,Fe)}},Se=()=>{const X=T.value,ie=b.value;return u("div",{},[u("div",{ref:M,class:["vxe-table-custom-popup--drag-line",{"is--guides":ie.showGuidesStatus}]}),u("div",{ref:F,class:"vxe-table-custom-popup--drag-tip"},[u("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[u("div",{class:"vxe-table-custom-popup--drag-tip-status"},[u("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",lo().TABLE_DRAG_STATUS_ROW]}),u("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",lo().TABLE_DRAG_STATUS_SUB_ROW]}),u("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",lo().TABLE_DRAG_DISABLED]})]),u("div",{class:"vxe-table-custom-popup--drag-tip-content"},Tt("vxe.custom.cstmDragTarget",[X&&X.type!=="html"?X.getTitle():""]))])])])},Ce=()=>{const{customStore:X}=e,{isCustomStatus:ie,customColumnList:ue}=P,pe=f.value,{immediate:W}=pe,Ge=b.value,{maxHeight:Ve}=X,{checkMethod:qe,visibleMethod:Ee,allowVisible:Me,allowSort:xe,allowFixed:Ze,trigger:Fe,placement:$e}=pe,He=A.value,{isCrossDrag:ge}=Ge,we=pe.slots||{},je=we.header,Ne=we.top,Ie=we.bottom,Ke=we.default,ye=we.footer,lt=[],B={},le=X.isAll,de=X.isIndeterminate;Fe==="hover"&&(B.onMouseenter=k,B.onMouseleave=_);const Le={$table:y,$grid:y.xegrid,columns:ue,isAllChecked:le,isAllIndeterminate:de,isCustomStatus:ie};return r.eachTree(ue,(Te,Qe,Ye,nt,ft)=>{if(Ee?Ee({column:Te}):!0){const gt=Te.renderVisible,xt=Te.halfVisible,At=Te.children&&Te.children.length,st=so(Te.getTitle(),1),et=qe?!qe({column:Te}):!1,Ot=!gt;lt.push(u("li",{key:Te.id,colid:Te.id,class:["vxe-table-custom--option",`level--${Te.level}`,{"is--hidden":et||Ot,"is--group":At}],onDragstart:oe,onDragend:me,onDragover:be},[Me?u("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":gt,"is--indeterminate":xt,"is--disabled":et}],title:Tt("vxe.custom.setting.colVisible"),onClick:()=>{et||fe(Te)}},[u("span",{class:["vxe-checkbox--icon",xt?lo().TABLE_CHECKBOX_INDETERMINATE:gt?lo().TABLE_CHECKBOX_CHECKED:lo().TABLE_CHECKBOX_UNCHECKED]})]):We(),u("div",{class:"vxe-table-custom--name-option"},[xe&&(ge&&W||Te.level===1)?u("div",{class:"vxe-table-custom--sort-option"},[u("span",Object.assign({class:["vxe-table-custom--sort-btn",{"is--disabled":et||Ot||Te.renderFixed}],title:Tt("vxe.custom.setting.sortHelpTip")},et||Ot||Te.renderFixed?{}:{onMousedown:ce,onMouseup:ne}),[u("i",{class:lo().TABLE_CUSTOM_SORT})])]):We(),Te.type==="html"?u("div",{key:"1",class:"vxe-table-custom--checkbox-label",innerHTML:st}):u("div",{key:"0",class:"vxe-table-custom--checkbox-label"},st)]),!ft&&Ze?u("div",{class:"vxe-table-custom--fixed-option"},[a?u(a,{mode:"text",icon:Te.renderFixed==="left"?lo().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:lo().TOOLBAR_TOOLS_FIXED_LEFT,status:Te.renderFixed==="left"?"primary":"",disabled:et||Ot||He&&!Te.renderFixed,title:Tt(Te.renderFixed==="left"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft"),onClick:()=>{Be(Te,"left")}}):We(),a?u(a,{mode:"text",icon:Te.renderFixed==="right"?lo().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:lo().TOOLBAR_TOOLS_FIXED_RIGHT,status:Te.renderFixed==="right"?"primary":"",disabled:et||Ot||He&&!Te.renderFixed,title:Tt(Te.renderFixed==="right"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight"),onClick:()=>{Be(Te,"right")}}):We()]):We()]))}}),u("div",{ref:$,key:"simple",class:["vxe-table-custom-wrapper",`placement--${$e}`,{"is--active":X.visible}],style:Ve&&!["left","right"].includes($e)?{maxHeight:`${Ve}px`}:{}},X.visible?[u("div",{class:"vxe-table-custom--header"},je?y.callSlot(je,Le):[u("ul",{class:"vxe-table-custom--panel-list"},[u("li",{class:"vxe-table-custom--option"},[Me?u("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":le,"is--indeterminate":de}],title:Tt("vxe.table.allTitle"),onClick:Ae},[u("span",{class:["vxe-checkbox--icon",de?lo().TABLE_CHECKBOX_INDETERMINATE:le?lo().TABLE_CHECKBOX_CHECKED:lo().TABLE_CHECKBOX_UNCHECKED]}),u("span",{class:"vxe-checkbox--label"},Tt("vxe.toolbar.customAll"))]):u("span",{class:"vxe-checkbox--label"},Tt("vxe.table.customTitle"))])])]),u("div",{ref:L,class:"vxe-table-custom--body"},[Ne?u("div",{class:"vxe-table-custom--panel-top"},y.callSlot(Ne,Le)):es(y),Ke?u("div",{class:"vxe-table-custom--panel-body"},y.callSlot(Ke,Le)):u(bn,Object.assign({class:"vxe-table-custom--panel-list",name:"vxe-table-custom--list",tag:"ul"},B),{default:()=>lt}),Ie?u("div",{class:"vxe-table-custom--panel-bottom"},y.callSlot(Ie,Le)):es(y),Se()]),pe.showFooter?u("div",{class:"vxe-table-custom--footer"},ye?y.callSlot(ye,Le):[u("div",{class:"vxe-table-custom--footer-buttons"},[a?u(a,{mode:"text",content:pe.resetButtonText||Tt("vxe.table.customRestore"),disabled:!ie,onClick:J}):We(),W?a?u(a,{mode:"text",content:pe.closeButtonText||Tt("vxe.table.customClose"),onClick:he}):We():a?u(a,{mode:"text",content:pe.cancelButtonText||Tt("vxe.table.customCancel"),onClick:Z}):We(),W?We():a?u(a,{mode:"text",status:"primary",content:pe.confirmButtonText||Tt("vxe.table.customConfirm"),onClick:se}):We()])]):null]:[])},re=()=>{const{customStore:X}=e,{resizable:ie}=I,{isCustomStatus:ue,customColumnList:pe}=P,W=f.value,{immediate:Ge}=W,Ve=b.value,{mode:qe,modalOptions:Ee,drawerOptions:Me,allowVisible:xe,allowSort:Ze,allowFixed:Fe,allowResizable:$e,checkMethod:He,visibleMethod:ge}=W,we=j.value,{maxFixedSize:je}=we,Ne=Q.value,{minWidth:Ie,maxWidth:Ke}=Ne,ye=Object.assign({},Ee),lt=Object.assign({},Me),B=A.value,{isCrossDrag:le}=Ve,de=W.slots||{},Le=de.header,Te=de.top,Qe=de.bottom,Ye=de.default,nt=de.footer,ft=[],Et=X.isAll,gt=X.isIndeterminate,xt={$table:y,$grid:y.xegrid,columns:pe,isAllChecked:Et,isAllIndeterminate:gt,isCustomStatus:ue};r.eachTree(pe,(st,et,Ot,Ut,Yt)=>{if(ge?ge({column:st}):!0){let _t=0,dt=0;if($e){const h={$table:y,column:st,columnIndex:et,$columnIndex:et,$rowIndex:-1};Ie&&(_t=r.toNumber(r.isFunction(Ie)?Ie(h):Ie)),Ke&&(dt=r.toNumber(r.isFunction(Ke)?Ke(h):Ke))}const It=st.renderVisible,Ft=st.halfVisible,yt=so(st.getTitle(),1),co=st.children&&st.children.length,ht=He?!He({column:st}):!1,St=!It;ft.push(u("tr",{key:st.id,colid:st.id,class:[`vxe-table-custom-popup--row level--${st.level}`,{"is--group":co}],onDragstart:oe,onDragend:me,onDragover:be},[xe?u("td",{class:"vxe-table-custom-popup--column-item col--visible"},[u("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":It,"is--indeterminate":Ft,"is--disabled":ht}],title:Tt("vxe.custom.setting.colVisible"),onClick:()=>{ht||fe(st)}},[u("span",{class:["vxe-checkbox--icon",Ft?lo().TABLE_CHECKBOX_INDETERMINATE:It?lo().TABLE_CHECKBOX_CHECKED:lo().TABLE_CHECKBOX_UNCHECKED]})])]):We(),u("td",{class:"vxe-table-custom-popup--column-item col--name"},[u("div",{class:"vxe-table-custom-popup--name"},[Ze?le&&Ge||st.level===1?u("div",Object.assign({class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":ht||St||st.renderFixed}],title:Tt("vxe.custom.setting.sortHelpTip")},ht||St||st.renderFixed?{}:{onMousedown:ce,onMouseup:ne}),[u("i",{class:lo().TABLE_CUSTOM_SORT})]):u("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):We(),st.type==="html"?u("div",{key:"1",class:"vxe-table-custom-popup--title",innerHTML:yt}):u("div",{key:"0",class:"vxe-table-custom-popup--title",title:yt},yt)])]),$e?u("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[st.children&&st.children.length||!(r.isBoolean(st.resizable)?st.resizable:we.resizable||ie)?u("span","-"):x?u(x,{type:"integer",immediate:!1,disabled:ht||St,modelValue:st.renderResizeWidth,min:_t||void 0,max:dt||void 0,"onUpdate:modelValue"(h){const Lt=Math.max(0,Number(h));st.renderResizeWidth=Lt},onChange(){ke(st)}}):We()]):We(),Fe?u("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[Yt?u("span","-"):m?u(m,{modelValue:st.renderFixed||"",type:"button",size:"mini",disabled:ht||St,options:[{label:Tt("vxe.custom.setting.fixedLeft"),value:"left",disabled:ht||St||B},{label:Tt("vxe.custom.setting.fixedUnset"),value:"",disabled:ht||St},{label:Tt("vxe.custom.setting.fixedRight"),value:"right",disabled:ht||St||B}],"onUpdate:modelValue"(h){Be(st,h)}}):We()]):We()]))}});const At={default:()=>Ye?y.callSlot(Ye,xt):u("div",{ref:L,class:"vxe-table-custom-popup--body"},[Te?u("div",{class:"vxe-table-custom-popup--table-top"},y.callSlot(Te,xt)):es(y),u("div",{class:"vxe-table-custom-popup--table-wrapper"},[u("table",{},[u("colgroup",{},[xe?u("col",{class:"vxe-table-custom-popup--table-col-seq"}):We(),u("col",{class:"vxe-table-custom-popup--table-col-title"}),$e?u("col",{class:"vxe-table-custom-popup--table-col-width"}):We(),Fe?u("col",{class:"vxe-table-custom-popup--table-col-fixed"}):We()]),u("thead",{},[u("tr",{},[xe?u("th",{},[u("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":Et,"is--indeterminate":gt}],title:Tt("vxe.table.allTitle"),onClick:Ae},[u("span",{class:["vxe-checkbox--icon",gt?lo().TABLE_CHECKBOX_INDETERMINATE:Et?lo().TABLE_CHECKBOX_CHECKED:lo().TABLE_CHECKBOX_UNCHECKED]}),u("span",{class:"vxe-checkbox--label"},Tt("vxe.toolbar.customAll"))])]):We(),u("th",{},Tt("vxe.custom.setting.colTitle")),$e?u("th",{},Tt("vxe.custom.setting.colResizable")):We(),Fe?u("th",{},Tt(`vxe.custom.setting.${je?"colFixedMax":"colFixed"}`,[je])):We()])]),u(bn,{class:"vxe-table-custom--panel-list",tag:"tbody",name:"vxe-table-custom--list"},{default:()=>ft})])]),Qe?u("div",{class:"vxe-table-custom-popup--table-bottom"},y.callSlot(Qe,xt)):es(y),Se()]),footer:()=>nt?y.callSlot(nt,xt):u("div",{class:"vxe-table-custom-popup--footer"},[a?u(a,{content:W.resetButtonText||Tt("vxe.custom.cstmRestore"),disabled:!ue,onClick:J}):We(),Ge?a?u(a,{content:W.closeButtonText||Tt("vxe.table.customClose"),onClick:he}):We():a?u(a,{content:W.cancelButtonText||Tt("vxe.table.customCancel"),onClick:Z}):We(),Ge?We():a?u(a,{status:"primary",content:W.confirmButtonText||Tt("vxe.custom.cstmConfirm"),onClick:se}):We()])};return Le&&(At.header=()=>y.callSlot(Le,xt)),qe==="drawer"?n?u(n,{key:"drawer",className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",lt.className||""].join(" "),modelValue:X.visible,title:lt.title||Tt("vxe.custom.cstmTitle"),width:lt.width||Math.min(880,Math.floor(document.documentElement.clientWidth*.6)),position:lt.position,resize:!!lt.resize,escClosable:!!lt.escClosable,maskClosable:!!lt.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(st){X.visible=st}},At):We():o?u(o,{key:"modal",className:["vxe-table-custom-modal-wrapper","vxe-table--ignore-clear",ye.className||""].join(" "),modelValue:X.visible,title:ye.title||Tt("vxe.custom.cstmTitle"),width:ye.width||Math.min(880,document.documentElement.clientWidth),minWidth:ye.minWidth||700,height:ye.height||Math.min(680,document.documentElement.clientHeight),minHeight:ye.minHeight||400,showZoom:ye.showZoom,showMaximize:ye.showMaximize,showMinimize:ye.showMinimize,mask:ye.mask,lockView:ye.lockView,resize:ye.resize,escClosable:!!ye.escClosable,maskClosable:!!ye.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(st){X.visible=st}},At):We()};return()=>{const X=f.value;return["modal","drawer","popup"].includes(`${X.mode}`)?re():Ce()}}}),{getI18n:ts,getIcon:Ln,renderer:oi}=te,Fd=Lo({name:"VxeTableFilterPanel",props:{filterStore:Object},setup(e){const o=go("$xeTable",{}),{reactData:n,internalData:a,getComputeMaps:x}=o,{computeFilterOpts:m}=x(),y=_e(()=>{const{filterStore:F}=e;return F&&F.options.some(T=>T.checked)}),I=(F,T)=>{const{filterStore:w}=e;w.options.forEach(C=>{C._checked=T,C.checked=T}),w.isAllSelected=T,w.isIndeterminate=!1},P=F=>{o.handleFilterConfirmFilter(F)},d=(F,T,w)=>{o.handleFilterChangeRadioOption(F,T,w)},f=F=>{o.handleFilterResetFilter(F)},b=(F,T,w)=>{o.handleFilterChangeMultipleOption(F,T,w)},j=(F,T,w)=>{o.handleFilterChangeOption(F,T,w)},A=(F,T)=>{const{filterStore:w}=e;w.multiple?I(F,T):f(F)},Q={changeRadioOption:d,changeMultipleOption:b,changeAllOption:A,changeOption:j,confirmFilter:P,resetFilter:f},$=(F,T)=>{const{filterStore:w}=e,{column:C,multiple:R,maxHeight:k}=w,_=C?C.slots:null,se=_?_.filter:null,he=Object.assign({},a._currFilterParams,{$panel:Q,$table:o}),Z=T?T.renderTableFilter||T.renderFilter:null;if(se)return[u("div",{class:"vxe-table--filter-template"},o.callSlot(se,he))];if(Z)return[u("div",{class:"vxe-table--filter-template"},xo(Z(F,he)))];const N=R?w.isAllSelected:!w.options.some(ee=>ee._checked),J=R&&w.isIndeterminate;return[u("ul",{class:"vxe-table--filter-header"},[u("li",{class:["vxe-table--filter-option",{"is--checked":N,"is--indeterminate":J}],title:ts(R?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:ee=>{A(ee,!w.isAllSelected)}},(R?[u("span",{class:["vxe-checkbox--icon",J?Ln().TABLE_CHECKBOX_INDETERMINATE:N?Ln().TABLE_CHECKBOX_CHECKED:Ln().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([u("span",{class:"vxe-checkbox--label"},ts("vxe.table.allFilter"))]))]),u("ul",{class:"vxe-table--filter-body",style:k?{maxHeight:`${k}px`}:{}},w.options.map(ee=>{const fe=ee._checked;return u("li",{class:["vxe-table--filter-option",{"is--checked":ee._checked}],title:ee.label,onClick:ke=>{j(ke,!ee._checked,ee)}},(R?[u("span",{class:["vxe-checkbox--icon",fe?Ln().TABLE_CHECKBOX_CHECKED:Ln().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([u("span",{class:"vxe-checkbox--label"},so(ee.label,1))]))}))]},L=()=>{const{filterStore:F}=e,{column:T,multiple:w}=F,C=m.value,R=y.value,{filterRender:k}=T,_=ct(k)?oi.get(k.name):null,se=!R&&!F.isAllSelected&&!F.isIndeterminate;return w&&(!_||!(_.showTableFilterFooter===!1||_.showFilterFooter===!1||_.isFooter===!1))?[u("div",{class:"vxe-table--filter-footer"},[u("button",{class:{"is--disabled":se},disabled:se,onClick:P},C.confirmButtonText||ts("vxe.table.confirmFilter")),u("button",{onClick:f},C.resetButtonText||ts("vxe.table.resetFilter"))])]:[]};return()=>{const{filterStore:F}=e,{initStore:T}=n,{visible:w,multiple:C,column:R}=F,k=R?R.filterRender:null,_=ct(k)?oi.get(k.name):null,se=_?_.tableFilterClassName||_.filterClassName:"",he=Object.assign({},a._currFilterParams,{$panel:Q,$table:o}),Z=m.value,{destroyOnClose:N}=Z;return u("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",Ml(se,he),{"is--animat":o.props.animat,"is--multiple":C,"is--active":w}],style:F.style},T.filter&&(!N||w)&&R?$(k,_).concat(L()):[])}}}),{getI18n:Pl,getIcon:kd}=te,Ad=Lo({name:"VxeTableImportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeButton"),a=te.getComponent("VxeSelect"),x=go("$xeTable",{}),{computeImportOpts:m}=x.getComputeMaps(),y=_o({loading:!1}),I=ze(),P=_e(()=>{const{storeData:M}=e;return`${M.filename}.${M.type}`}),d=_e(()=>{const{storeData:M}=e;return M.file&&M.type}),f=_e(()=>{const{storeData:M}=e,{type:F,typeList:T}=M;if(F){const w=r.find(T,C=>F===C.value);return w?w.label:"*.*"}return`*.${T.map(w=>w.value).join(", *.")}`}),b=()=>{const{storeData:M}=e;Object.assign(M,{filename:"",sheetName:"",type:""})},j=()=>{const{storeData:M,defaultOptions:F}=e;x.readFile(F).then(T=>{const{file:w}=T;Object.assign(M,ji(w),{file:w})}).catch(T=>T)},A=()=>{ae(()=>{const M=I.value;M&&M.focus()})},Q=()=>{const{storeData:M}=e;M.visible=!1},$=()=>{const{storeData:M,defaultOptions:F}=e,T=m.value;y.loading=!0,x.importByFile(M.file,Object.assign({},T,F)).then(()=>{y.loading=!1,M.visible=!1}).catch(()=>{y.loading=!1})};return()=>{const{defaultOptions:M,storeData:F}=e,T=P.value,w=d.value,C=f.value,R=M.slots||{},k=R.top,_=R.bottom,se=R.default,he=R.footer;return o?u(o,{id:"VXE_IMPORT_MODAL",modelValue:F.visible,title:Pl("vxe.import.impTitle"),className:"vxe-table-export-popup-wrapper",width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:y.loading,"onUpdate:modelValue"(Z){F.visible=Z},onShow:A},{default:()=>{const Z={$table:x,$grid:x.xegrid,options:M,params:M.params};return u("div",{class:"vxe-table-export--panel"},[k?u("div",{class:"vxe-table-export--panel-top"},x.callSlot(k,Z)):We(),u("div",{class:"vxe-table-export--panel-body"},se?x.callSlot(se,Z):[u("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[u("tbody",[u("tr",[u("td",Pl("vxe.import.impFile")),u("td",[w?u("div",{class:"vxe-table-export--selected--file",title:T},[u("span",T),u("i",{class:kd().INPUT_CLEAR,onClick:b})]):u("button",{ref:I,class:"vxe-table-export--select--file",onClick:j},Pl("vxe.import.impSelect"))])]),u("tr",[u("td",Pl("vxe.import.impType")),u("td",C)]),u("tr",[u("td",Pl("vxe.import.impMode")),u("td",[a?u(a,{modelValue:M.mode,options:F.modeList,"onUpdate:modelValue"(N){M.mode=N}}):We()])])])])]),_?u("div",{class:"vxe-table-export--panel-bottom"},x.callSlot(_,Z)):We()])},footer(){const Z={$table:x,$grid:x.xegrid,options:M,params:M.params};return u("div",{class:"vxe-table-export--panel-footer"},he?x.callSlot(he,Z):[u("div",{class:"vxe-table-export--panel-btns"},[n?u(n,{content:Pl("vxe.import.impCancel"),onClick:Q}):We(),n?u(n,{status:"primary",disabled:!w||y.loading,content:Pl("vxe.import.impConfirm"),onClick:$}):We()])])}}):We()}}}),{getI18n:kt,getIcon:tn}=te,Ld=Lo({name:"VxeTableExportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const o=te.getComponent("VxeModal"),n=te.getComponent("VxeButton"),a=te.getComponent("VxeSelect"),x=te.getComponent("VxeInput"),m=te.getComponent("VxeCheckbox"),y=go("$xeTable",{}),{computeExportOpts:I,computePrintOpts:P}=y.getComputeMaps(),d=_o({isAll:!1,isIndeterminate:!1,loading:!1}),f=ze(),b=ze(),j=ze(),A=_e(()=>{const{storeData:N}=e;return N.columns.every(J=>J.checked)}),Q=_e(()=>{const{defaultOptions:N}=e;return["html","xml","xlsx","pdf"].indexOf(N.type)>-1}),$=_e(()=>{const{storeData:N,defaultOptions:J}=e;return!J.original&&J.mode==="current"&&(N.isPrint||["html","xlsx"].indexOf(J.type)>-1)}),L=_e(()=>{const{defaultOptions:N}=e;return!N.original&&["xlsx"].indexOf(N.type)>-1}),M=N=>{const{storeData:J}=e,ee=r.findTree(J.columns,fe=>fe===N);if(ee&&ee.parent){const{parent:fe}=ee;fe.children&&fe.children.length&&(fe.checked=fe.children.every(ke=>ke.checked),fe.halfChecked=!fe.checked&&fe.children.some(ke=>ke.checked||ke.halfChecked),M(fe))}},F=()=>{const{storeData:N}=e,J=N.columns;d.isAll=J.every(ee=>ee.disabled||ee.checked),d.isIndeterminate=!d.isAll&&J.some(ee=>!ee.disabled&&(ee.checked||ee.halfChecked))},T=N=>{const J=!N.checked;r.eachTree([N],ee=>{ee.checked=J,ee.halfChecked=!1}),M(N),F()},w=()=>{const{storeData:N}=e,J=!d.isAll;r.eachTree(N.columns,ee=>{ee.disabled||(ee.checked=J,ee.halfChecked=!1)}),d.isAll=J,F()},C=()=>{ae(()=>{const N=b.value,J=j.value,ee=f.value,fe=N||J||ee;fe&&fe.focus()}),F()},R=()=>{const{storeData:N,defaultOptions:J}=e,{hasMerge:ee,columns:fe}=N,ke=A.value,Be=$.value,Ae=r.searchTree(fe,Y=>Y.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},J,{columns:Ae,isMerge:ee&&Be&&ke?J.isMerge:!1})},k=()=>{const{storeData:N}=e,J=P.value;N.visible=!1,y.print(Object.assign({},J,R()))},_=()=>{const{storeData:N}=e,J=I.value;d.loading=!0,y.exportData(Object.assign({},J,R())).then(()=>{d.loading=!1,N.visible=!1}).catch(()=>{d.loading=!1})},se=()=>{const{storeData:N}=e;N.visible=!1},he=()=>{const{storeData:N}=e;N.isPrint?k():_()};return()=>{const{defaultOptions:N,storeData:J}=e,{isAll:ee,isIndeterminate:fe}=d,{hasTree:ke,hasMerge:Be,isPrint:Ae,hasColgroup:Y,columns:H}=J,{isHeader:ce}=N,ne=[],oe=A.value,me=Q.value,be=$.value,Se=L.value,Ce=N.slots||{},re=Ce.top,ve=Ce.bottom,X=Ce.default,ie=Ce.footer,ue=Ce.parameter;return r.eachTree(H,pe=>{const W=so(pe.getTitle(),1),Ge=pe.children&&pe.children.length,Ve=pe.checked,qe=pe.halfChecked,Ee=pe.type==="html";ne.push(u("li",{key:pe.id,class:["vxe-table-export--panel-column-option",`level--${pe.level}`,{"is--group":Ge,"is--checked":Ve,"is--indeterminate":qe,"is--disabled":pe.disabled}],title:Ee?"":W,onClick:()=>{pe.disabled||T(pe)}},[u("span",{class:["vxe-checkbox--icon",qe?tn().TABLE_CHECKBOX_INDETERMINATE:Ve?tn().TABLE_CHECKBOX_CHECKED:tn().TABLE_CHECKBOX_UNCHECKED]}),Ee?u("span",{key:"1",class:"vxe-checkbox--label",innerHTML:W}):u("span",{key:"0",class:"vxe-checkbox--label"},W)]))}),o?u(o,{id:"VXE_EXPORT_MODAL",modelValue:J.visible,title:kt(Ae?"vxe.export.printTitle":"vxe.export.expTitle"),className:"vxe-table-export-popup-wrapper",width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:d.loading,"onUpdate:modelValue"(pe){J.visible=pe},onShow:C},{default:()=>{const pe={$table:y,$grid:y.xegrid,options:N,columns:H,params:N.params};return u("div",{class:"vxe-table-export--panel"},[re?u("div",{class:"vxe-table-export--panel-top"},y.callSlot(re,pe)):We(),u("div",{class:"vxe-table-export--panel-body"},X?y.callSlot(X,pe):[u("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[u("tbody",[[Ae?We():u("tr",[u("td",kt("vxe.export.expName")),u("td",[x?u(x,{ref:b,modelValue:N.filename,type:"text",clearable:!0,placeholder:kt("vxe.export.expNamePlaceholder"),"onUpdate:modelValue"(W){N.filename=W}}):We()])]),Ae?We():u("tr",[u("td",kt("vxe.export.expType")),u("td",[a?u(a,{modelValue:N.type,options:J.typeList,"onUpdate:modelValue"(W){N.type=W}}):We()])]),Ae||me?u("tr",[u("td",kt("vxe.export.expSheetName")),u("td",[x?u(x,{ref:j,modelValue:N.sheetName,type:"text",clearable:!0,placeholder:kt("vxe.export.expSheetNamePlaceholder"),"onUpdate:modelValue"(W){N.sheetName=W}}):We()])]):We(),u("tr",[u("td",kt("vxe.export.expMode")),u("td",[a?u(a,{modelValue:N.mode,options:J.modeList.map(W=>({value:W.value,label:kt(W.label)})),"onUpdate:modelValue"(W){N.mode=W}}):We()])]),u("tr",[u("td",[kt("vxe.export.expColumn")]),u("td",[u("div",{class:"vxe-table-export--panel-column"},[u("ul",{class:"vxe-table-export--panel-column-header"},[u("li",{class:["vxe-table-export--panel-column-option",{"is--checked":ee,"is--indeterminate":fe}],title:kt("vxe.table.allTitle"),onClick:w},[u("span",{class:["vxe-checkbox--icon",fe?tn().TABLE_CHECKBOX_INDETERMINATE:ee?tn().TABLE_CHECKBOX_CHECKED:tn().TABLE_CHECKBOX_UNCHECKED]}),u("span",{class:"vxe-checkbox--label"},kt("vxe.export.expCurrentColumn"))])]),u("ul",{class:"vxe-table-export--panel-column-body"},ne)])])]),u("tr",[u("td",kt("vxe.export.expOpts")),ue?u("td",[u("div",{class:"vxe-table-export--panel-option-row"},y.callSlot(ue,pe))]):u("td",[u("div",{class:"vxe-table-export--panel-option-row"},[m?u(m,{modelValue:N.isHeader,title:kt("vxe.export.expHeaderTitle"),content:kt("vxe.export.expOptHeader"),"onUpdate:modelValue"(W){N.isHeader=W}}):We(),m?u(m,{modelValue:N.isFooter,disabled:!J.hasFooter,title:kt("vxe.export.expFooterTitle"),content:kt("vxe.export.expOptFooter"),"onUpdate:modelValue"(W){N.isFooter=W}}):We(),m?u(m,{modelValue:N.original,title:kt("vxe.export.expOriginalTitle"),content:kt("vxe.export.expOptOriginal"),"onUpdate:modelValue"(W){N.original=W}}):We()]),u("div",{class:"vxe-table-export--panel-option-row"},[m?u(m,{modelValue:ce&&Y&&be?N.isColgroup:!1,title:kt("vxe.export.expColgroupTitle"),disabled:!ce||!Y||!be,content:kt("vxe.export.expOptColgroup"),"onUpdate:modelValue"(W){N.isColgroup=W}}):We(),m?u(m,{modelValue:Be&&be&&oe?N.isMerge:!1,title:kt("vxe.export.expMergeTitle"),disabled:!Be||!be||!oe,content:kt("vxe.export.expOptMerge"),"onUpdate:modelValue"(W){N.isMerge=W}}):We(),Ae||!m?We():u(m,{modelValue:Se?N.useStyle:!1,disabled:!Se,title:kt("vxe.export.expUseStyleTitle"),content:kt("vxe.export.expOptUseStyle"),"onUpdate:modelValue"(W){N.useStyle=W}}),m?u(m,{modelValue:ke?N.isAllExpand:!1,disabled:!ke,title:kt("vxe.export.expAllExpandTitle"),content:kt("vxe.export.expOptAllExpand"),"onUpdate:modelValue"(W){N.isAllExpand=W}}):We()])])])]])])]),ve?u("div",{class:"vxe-table-export--panel-bottom"},y.callSlot(ve,pe)):We()])},footer(){const pe={$table:y,$grid:y.xegrid,options:N,columns:H,params:N.params};return u("div",{class:"vxe-table-export--panel-footer"},ie?y.callSlot(ie,pe):[u("div",{class:"vxe-table-export--panel-btns"},[n?u(n,{content:kt("vxe.export.expCancel"),onClick:se}):We(),n?u(n,{ref:f,status:"primary",content:kt(Ae?"vxe.export.expPrint":"vxe.export.expConfirm"),onClick:he}):We()])])}}):We()}}}),{getIcon:$d}=te,Bd=Lo({name:"VxeTableMenuPanel",setup(e,o){const n=r.uniqueId(),a=go("$xeTable",{}),{reactData:x}=a,m=ze(),y={refElem:m},I={xID:n,props:e,context:o,getRefMaps:()=>y},P=()=>{const{ctxMenuStore:d}=x,{computeMenuOpts:f}=a.getComputeMaps(),b=f.value;return u(Ka,{to:"body",disabled:!1},[u("div",{ref:m,class:["vxe-table--context-menu-wrapper",b.className,{"is--visible":d.visible}],style:d.style},d.list.map((j,A)=>j.every(Q=>Q.visible===!1)?We():u("ul",{class:"vxe-context-menu--option-wrapper",key:A},j.map((Q,$)=>{const L=Q.children&&Q.children.some(T=>T.visible!==!1),M=Object.assign({},Q.prefixConfig),F=Object.assign({},Q.suffixConfig);return Q.visible===!1?null:u("li",{class:[Q.className,{"link--disabled":Q.disabled,"link--active":Q===d.selected}],key:`${A}_${$}`},[u("a",{class:"vxe-context-menu--link",onClick(T){a.ctxMenuLinkEvent(T,Q)},onMouseover(T){a.ctxMenuMouseoverEvent(T,Q)},onMouseout(T){a.ctxMenuMouseoutEvent(T,Q)}},[u("div",{class:["vxe-context-menu--link-prefix",M.className||""]},[u("i",{class:M.icon||Q.prefixIcon}),M.content?u("span",{},`${M.content}`):We()]),u("div",{class:"vxe-context-menu--link-content"},ll(Q.name)),u("div",{class:["vxe-context-menu--link-suffix",F.className||""]},[u("i",{class:F.icon||Q.suffixIcon||(L?$d().TABLE_MENU_OPTIONS:"")}),F.content?u("span",`${F.content}`):We()])]),L?u("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":Q===d.selected&&d.showChild}]},Q.children.map((T,w)=>{const C=Object.assign({},T.prefixConfig),R=Object.assign({},T.suffixConfig);return T.visible===!1?null:u("li",{class:[T.className,{"link--disabled":T.disabled,"link--active":T===d.selectChild}],key:`${A}_${$}_${w}`},[u("a",{class:"vxe-context-menu--link",onClick(k){a.ctxMenuLinkEvent(k,T)},onMouseover(k){a.ctxMenuMouseoverEvent(k,Q,T)},onMouseout(k){a.ctxMenuMouseoutEvent(k,Q)}},[u("div",{class:["vxe-context-menu--link-prefix",C.className||""]},[u("i",{class:C.icon||T.prefixIcon}),C.content?u("span",`${C.content}`):We()]),u("div",{class:"vxe-context-menu--link-content"},ll(T.name)),u("div",{class:["vxe-context-menu--link-suffix",R.className||""]},[u("i",{class:R.icon}),R.content?u("span",`${R.content}`):We()])])])})):null])}))))])};return I.renderVN=P,I},render(){return this.renderVN()}}),{getConfig:vt,getIcon:os,getI18n:Sl,renderer:li,formats:ni,createEvent:Hd,globalResize:Pd,interceptor:si,hooks:Vd,globalEvents:Mt,GLOBAL_EVENT_KEYS:Io,useFns:jd,renderEmptyElement:vo}=te,ri="VXE_CUSTOM_STORE",hn=Lo({name:"VxeTable",props:wr,emits:Er,setup(e,o){const{slots:n,emit:a}=o,x=r.uniqueId(),m=te.getComponent("VxeLoading"),y=te.getComponent("VxeTooltip"),I=go("$xeTabs",null),{computeSize:P}=jd.useSize(e),d=_o({isCalcColumn:!1,staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selectCheckboxMaps:{},currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},treeIndeterminateMaps:{},mergeList:[],mergeFooterList:[],upDataFlag:0,reColumnFlag:0,pendingRowMaps:{},initStore:{filter:!1,import:!1,export:!1,custom:!1},customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},customColumnList:[],filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null},insertMaps:{},removeMaps:{}},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1},scrollVMLoading:!1,isCustomStatus:!1,isDragRowMove:!1,dragRow:null,isDragColMove:!1,dragCol:null,dragTipText:"",_isResize:!1,_isLoading:!1}),f={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},sourceDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},columnStatusMaps:{},rowStatusMaps:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1};let b={},j={};const A=ze(),Q=ze(),$=ze(),L=ze(),M=ze(),F=ze(),T=ze(),w=ze(),C=ze(),R=ze(),k=ze(),_=ze(),se=ze(),he=ze(),Z=ze(),N=ze(),J=ze(),ee=ze(),fe=ze(),ke=ze(),Be=ze(),Ae=ze(),Y=ze(),H=ze(),ce=ze(),ne=ze(),oe=ze(),me=ze(),be=ze(),Se=ze(),Ce=go("$xeGrid",null);let re;const ve=_e(()=>{const{id:t}=e;return t?r.isFunction(t)?`${t({$table:h,$grid:Ce})||""}`:`${t}`:""}),X=_e(()=>Object.assign({},vt().table.validConfig,e.validConfig)),ie=_e(()=>Object.assign({},vt().table.scrollX,e.scrollX)),ue=_e(()=>{const t=ie.value,{threshold:l}=t;return l?r.toNumber(l):0}),pe=_e(()=>Object.assign({},vt().table.scrollY,e.scrollY)),W=_e(()=>{const t=pe.value,{threshold:l}=t;return l?r.toNumber(l):0}),Ge=_e(()=>({default:48,medium:44,small:40,mini:36})),Ve=_e(()=>Object.assign({},vt().table.columnConfig,e.columnConfig)),qe=_e(()=>Object.assign({},vt().table.cellConfig,e.cellConfig)),Ee=_e(()=>Object.assign({},vt().table.rowConfig,e.rowConfig)),Me=_e(()=>Object.assign({},vt().table.rowDragConfig,e.rowDragConfig)),xe=_e(()=>Object.assign({},vt().table.columnDragConfig,e.columnDragConfig)),Ze=_e(()=>Object.assign({},vt().table.resizeConfig,e.resizeConfig)),Fe=_e(()=>Object.assign({},vt().table.resizableConfig,e.resizableConfig)),$e=_e(()=>Object.assign({startIndex:0},vt().table.seqConfig,e.seqConfig)),He=_e(()=>Object.assign({},vt().table.radioConfig,e.radioConfig)),ge=_e(()=>Object.assign({},vt().table.checkboxConfig,e.checkboxConfig));let we=ze();we=_e(()=>Object.assign({},vt().tooltip,vt().table.tooltipConfig,e.tooltipConfig));const je=_e(()=>{const t=we.value;return Object.assign({},t)}),Ne=_e(()=>{const t=we.value;return Object.assign({isArrow:!1},t)}),Ie=_e(()=>Object.assign({},vt().table.editConfig,e.editConfig)),Ke=_e(()=>Object.assign({orders:["asc","desc",null]},vt().table.sortConfig,e.sortConfig)),ye=_e(()=>Object.assign({},vt().table.filterConfig,e.filterConfig)),lt=_e(()=>Object.assign({},vt().table.mouseConfig,e.mouseConfig)),B=_e(()=>Object.assign({},vt().table.areaConfig,e.areaConfig)),le=_e(()=>Object.assign({},vt().table.keyboardConfig,e.keyboardConfig)),de=_e(()=>Object.assign({},vt().table.clipConfig,e.clipConfig)),Le=_e(()=>Object.assign({},vt().table.fnrConfig,e.fnrConfig)),Te=_e(()=>Object.assign({},vt().table.menuConfig,e.menuConfig)),Qe=_e(()=>{const l=Te.value.header;return l&&l.options?l.options:[]}),Ye=_e(()=>{const l=Te.value.body;return l&&l.options?l.options:[]}),nt=_e(()=>{const l=Te.value.footer;return l&&l.options?l.options:[]}),ft=_e(()=>{const t=Te.value,l=Qe.value,s=Ye.value,i=nt.value;return!!(e.menuConfig&&ct(t)&&(l.length||s.length||i.length))}),Et=_e(()=>{const{ctxMenuStore:t}=d,l=[];return t.list.forEach(s=>{s.forEach(i=>{l.push(i)})}),l}),gt=_e(()=>Object.assign({},vt().table.exportConfig,e.exportConfig)),xt=_e(()=>Object.assign({},vt().table.importConfig,e.importConfig)),At=_e(()=>Object.assign({},vt().table.printConfig,e.printConfig)),st=_e(()=>Object.assign({},vt().table.expandConfig,e.expandConfig)),et=_e(()=>Object.assign({},vt().table.treeConfig,e.treeConfig)),Ot=_e(()=>Object.assign({},vt().table.emptyRender,e.emptyRender)),Ut=_e(()=>Object.assign({},vt().table.loadingConfig,e.loadingConfig)),Yt=_e(()=>e.border?Math.max(2,Math.ceil(d.scrollbarWidth/d.tableColumn.length)):1),Dt=_e(()=>Object.assign({},vt().table.customConfig,e.customConfig)),_t=_e(()=>{const{visibleColumn:t}=f,{tableColumn:l}=d;return l.length||t.length?t.filter(s=>s.width==="auto"||s.minWidth==="auto"):[]}),dt=_e(()=>{const{tableColumn:t}=d,{collectColumn:l}=f;let s=0;return t.length&&l.length&&l.forEach(i=>{i.renderFixed&&s++}),s}),It=_e(()=>{const t=dt.value,l=Ve.value,{maxFixedSize:s}=l;return s?t>=s:!1}),Ft=_e(()=>{const{border:t}=e;return t===!0?"full":t||"default"}),yt=_e(()=>{const{tableData:t}=d,{tableFullData:l}=f,s=ge.value,{strict:i,checkMethod:c}=s;return i?t.length||l.length?c?l.every(g=>!c({row:g})):!1:!0:!1}),co=_e(()=>{const{overflowX:t,scrollXLoad:l,overflowY:s,scrollYLoad:i}=d;return{x:t&&l,y:s&&i}}),ht={refElem:A,refTooltip:Q,refValidTooltip:L,refTableFilter:F,refTableCustom:T,refTableMenu:M,refTableHeader:w,refTableBody:C,refTableFooter:R,refTableLeftHeader:k,refTableLeftBody:_,refTableLeftFooter:se,refTableRightHeader:he,refTableRightBody:Z,refTableRightFooter:N,refLeftContainer:J,refRightContainer:ee,refCellResizeBar:fe,refCellResizeTip:ke,refScrollXVirtualElem:ce,refScrollYVirtualElem:ne,refScrollXHandleElem:oe,refScrollYHandleElem:me,refScrollXSpaceElem:be,refScrollYSpaceElem:Se},St={computeSize:P,computeTableId:ve,computeValidOpts:X,computeSXOpts:ie,computeSYOpts:pe,computeColumnOpts:Ve,computeCellOpts:qe,computeRowOpts:Ee,computeRowDragOpts:Me,computeColumnDragOpts:xe,computeResizeOpts:Ze,computeResizableOpts:Fe,computeSeqOpts:$e,computeRadioOpts:He,computeCheckboxOpts:ge,computeTooltipOpts:we,computeEditOpts:Ie,computeSortOpts:Ke,computeFilterOpts:ye,computeMouseOpts:lt,computeAreaOpts:B,computeKeyboardOpts:le,computeClipOpts:de,computeFNROpts:Le,computeHeaderMenu:Qe,computeBodyMenu:Ye,computeFooterMenu:nt,computeIsMenu:ft,computeMenuOpts:Te,computeExportOpts:gt,computeImportOpts:xt,computePrintOpts:At,computeExpandOpts:st,computeTreeOpts:et,computeEmptyOpts:Ot,computeLoadingOpts:Ut,computeCustomOpts:Dt,computeFixedColumnSize:dt,computeIsMaxFixedColumn:It,computeIsAllCheckboxDisabled:yt,computeVirtualScrollBars:co},h={xID:x,props:e,context:o,reactData:d,internalData:f,getRefMaps:()=>ht,getComputeMaps:()=>St,xegrid:Ce},Lt=(t,l,s)=>{const i=r.get(t,s),c=r.get(l,s);return el(i)&&el(c)?!0:r.isString(i)||r.isNumber(i)?""+i==""+c:r.isEqual(i,c)},Zt=t=>{const l=Ke.value,{orders:s}=l,i=t.order||null,c=s.indexOf(i)+1;return s[c<s.length?c:0]},po=t=>{const l=vt().version,s=r.toStringJSON(localStorage.getItem(ri)||""),i=s&&s._v===l?s:{_v:l};return(t?i[t]:i)||{}},oo=(t,l)=>{const s=vt().version,i=po();i[t]=l||void 0,i._v=s,localStorage.setItem(ri,r.toJSONString(i))},qt=t=>{const{fullAllDataRowIdData:l}=f,s={};return r.each(t,(i,c)=>{l[c]&&(s[c]=i)}),s},Qt=t=>{const{fullDataRowIdData:l}=f,s=[];return r.each(t,(i,c)=>{l[c]&&h.findRowIndexOf(s,l[c].row)===-1&&s.push(l[c].row)}),s},Ct=()=>{const{visibleColumn:t}=f,l=C.value,s=l?l.$el:null;if(s){const{scrollLeft:i,clientWidth:c}=s,g=i+c;let p=-1,v=0,E=0;for(let O=0,S=t.length;O<S&&(v+=t[O].renderWidth,p===-1&&i<v&&(p=O),!(p>=0&&(E++,v>g)));O++);return{toVisibleIndex:Math.max(0,p),visibleSize:Math.max(6,E)}}return{toVisibleIndex:0,visibleSize:6}},Vt=()=>{const t=w.value,l=C.value,s=l?l.$el:null,i=P.value,c=Ge.value;let g=0;if(s){const p=t?t.$el:null;let v;v=s.querySelector("tr"),!v&&p&&(v=p.querySelector("tr")),v&&(g=v.clientHeight)}return g||(g=c[i||"default"]),Math.max(18,g)},ro=()=>{const{scrollYStore:t,afterFullData:l,fullAllDataRowIdData:s}=f,i=C.value,c=i?i.$el:null,{rowHeight:g}=t;if(c){const{scrollTop:p,clientHeight:v}=c,E=p+v;let O=-1,S=0,q=0;for(let D=0,K=l.length;D<K;D++){const U=l[D],V=Oe(h,U),G=s[V];if(!G||(S+=G.height||g,O===-1&&p<S&&(O=D),O>=0&&(q++,S>E)))break}return{toVisibleIndex:Math.max(0,O),visibleSize:Math.max(8,q)}}return{toVisibleIndex:0,visibleSize:8}},$o=(t,l,s)=>{for(let i=0,c=t.length;i<c;i++){const g=t[i],{startIndex:p,endIndex:v}=l,E=g[s],O=g[s+"span"],S=E+O;E<p&&p<S&&(l.startIndex=E),E<v&&v<S&&(l.endIndex=S),(l.startIndex!==p||l.endIndex!==v)&&(i=-1)}},nl=(t,l,s)=>{if(t){const{treeConfig:i}=e,{visibleColumn:c}=f;r.isArray(t)||(t=[t]),i&&t.length&&Gt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(g=>{let{row:p,col:v,rowspan:E,colspan:O}=g;if(s&&r.isNumber(p)&&(p=s[p]),r.isNumber(v)&&(v=c[v]),(s?p:r.isNumber(p))&&v&&(E||O)&&(E=r.toNumber(E)||1,O=r.toNumber(O)||1,E>1||O>1)){const S=r.findIndexOf(l,D=>(D._row===p||Oe(h,D._row)===Oe(h,p))&&(D._col.id===v||D._col.id===v.id)),q=l[S];if(q)q.rowspan=E,q.colspan=O,q._rowspan=E,q._colspan=O;else{const D=s?h.findRowIndexOf(s,p):p,K=b.getVTColumnIndex(v);l.push({row:D,col:K,rowspan:E,colspan:O,_row:p,_col:v,_rowspan:E,_colspan:O})}}})}},xl=(t,l,s)=>{const i=[];if(t){const{treeConfig:c}=e,{visibleColumn:g}=f;r.isArray(t)||(t=[t]),c&&t.length&&Gt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(p=>{let{row:v,col:E}=p;s&&r.isNumber(v)&&(v=s[v]),r.isNumber(E)&&(E=g[E]);const O=r.findIndexOf(l,S=>(S._row===v||Oe(h,S._row)===Oe(h,v))&&(S._col.id===E||S._col.id===E.id));if(O>-1){const S=l.splice(O,1);i.push(S[0])}})}return i},Kl=()=>{const{tableFullColumn:t}=f;t.forEach(l=>{l.order=null})},Ul=t=>{const{parentHeight:l}=d,s=e[t];let i=0;if(s)if(s==="100%"||s==="auto")i=l;else{const c=h.getExcludeHeight();Bn(s)?i=Math.floor((r.toInteger(s)||1)/100*l):i=r.toNumber(s),i=Math.max(40,i-c)}return i},sl=t=>{let{collectColumn:l}=f;const{resizableData:s,sortData:i,visibleData:c,fixedData:g}=t;let p=!1;s||i||c||g?(r.eachTree(l,(v,E,O,S,q)=>{const D=v.getKey();q||(g&&g[D]!==void 0&&(v.fixed=g[D]),i&&r.isNumber(i[D])&&(p=!0,v.renderSortNumber=i[D])),s&&r.isNumber(s[D])&&(v.resizeWidth=s[D]),c&&r.isBoolean(c[D])&&(v.visible=c[D])}),p&&(l=r.orderBy(l,"renderSortNumber"),f.collectColumn=l,f.tableFullColumn=qn(l)),d.isCustomStatus=!0):d.isCustomStatus=!1},Cl=()=>{const{customConfig:t}=e,l=ve.value,s=Dt.value,{storage:i,restoreStore:c}=s,g=i===!0,p=g?{}:Object.assign({},i||{}),v=g||p.resizable,E=g||p.visible,O=g||p.fixed,S=g||p.sort;if((t?ct(s):s.enabled)&&(v||E||O||S)){if(!l){Gt("vxe.error.reqProp",["id"]);return}const q=po(l);return c?Promise.resolve(c({id:l,type:"restore",storeData:q})).then(D=>{if(D)return sl(D)}).catch(D=>D):sl(q)}},kl=()=>{const{tableFullColumn:t,collectColumn:l}=f,s=f.fullColumnIdData={},i=f.fullColumnFieldData={};lt.value,Ve.value;const c=xe.value,{isCrossDrag:g,isSelfToChildDrag:p}=c;Ee.value;const v=l.some(cn);let E=!!e.showOverflow,O,S;const q=(D,K,U,V,G)=>{const{id:De,field:z,fixed:Re,type:Pe,treeNode:Ue}=D,Xe={$index:-1,_index:-1,column:D,colid:De,index:K,items:U,parent:G||null,width:0};z?(i[z]&&Gt("vxe.error.colRepet",["field",z]),i[z]=Xe):(g||p)&&Gt("vxe.error.emptyProp",["column.field"]),Ue?S||(S=D):Pe==="expand"&&(O||(O=D)),E&&D.showOverflow===!1&&(E=!1),s[De]&&Gt("vxe.error.colRepet",["colId",De]),s[De]=Xe};v?r.eachTree(l,(D,K,U,V,G,De)=>{D.level=De.length,q(D,K,U,V,G)}):t.forEach(q),d.isGroup=v,d.treeNodeColumn=S,d.expandColumn=O,d.isAllOverflow=E},xn=()=>{f.customHeight=Ul("height"),f.customMinHeight=Ul("minHeight"),f.customMaxHeight=Ul("maxHeight")},Po=()=>{const t=_t.value;return d.isCalcColumn=!0,ae().then(()=>{const{fullColumnIdData:l}=f,s=A.value;s&&(t.forEach(i=>{const c=i.id,g=l[c],p=s.querySelectorAll(`.vxe-header--column.${i.id}>.vxe-cell,.vxe-body--column.${i.id}>.vxe-cell,.vxe-footer--column.${i.id}>.vxe-cell`),v=p[0];let E=0;if(v){const S=getComputedStyle(v);E=Math.floor(r.toNumber(S.paddingLeft)+r.toNumber(S.paddingRight))+2}let O=i.renderAutoWidth-E;r.arrayEach(p,S=>{const q=S,D=q.parentElement;let K=0;if(`${D.tagName}`.toLowerCase()==="th")r.arrayEach(q.children,U=>{K+=U.offsetWidth+1});else{const U=q.firstElementChild;U&&(K=U.offsetWidth)}K&&(O=Math.max(O,Math.ceil(K)+4))}),g&&(g.width=Math.max(O,g.width)),i.renderAutoWidth=O+E}),j.analyColumnWidth()),d.isCalcColumn=!1})},Cn=()=>{const t=w.value,l=C.value,s=R.value,i=l?l.$el:null,c=t?t.$el:null,g=s?s.$el:null;if(!i)return;let p=0;const v=40,E=i.clientWidth-1;let O=E,S=O/100;const{fit:q}=e,{columnStore:D}=d,{resizeList:K,pxMinList:U,autoMinList:V,pxList:G,scaleList:De,scaleMinList:z,autoList:Re,remainList:Pe}=D;if(U.forEach(tt=>{const rt=r.toInteger(tt.minWidth);p+=rt,tt.renderWidth=rt}),V.forEach(tt=>{const rt=Math.max(60,r.toInteger(tt.renderAutoWidth));p+=rt,tt.renderWidth=rt}),z.forEach(tt=>{const rt=Math.floor(r.toInteger(tt.minWidth)*S);p+=rt,tt.renderWidth=rt}),De.forEach(tt=>{const rt=Math.floor(r.toInteger(tt.width)*S);p+=rt,tt.renderWidth=rt}),G.forEach(tt=>{const rt=r.toInteger(tt.width);p+=rt,tt.renderWidth=rt}),Re.forEach(tt=>{const rt=Math.max(60,r.toInteger(tt.renderAutoWidth));p+=rt,tt.renderWidth=rt}),K.forEach(tt=>{const rt=r.toInteger(tt.resizeWidth);p+=rt,tt.renderWidth=rt}),O-=p,S=O>0?Math.floor(O/(z.length+U.length+V.length+Pe.length)):0,q?O>0&&z.concat(U).concat(V).forEach(tt=>{p+=S,tt.renderWidth+=S}):S=v,Pe.forEach(tt=>{const rt=Math.max(S,v);tt.renderWidth=rt,p+=rt}),q){const tt=De.concat(z).concat(U).concat(V).concat(Pe);let rt=tt.length-1;if(rt>0){let Bt=E-p;if(Bt>0){for(;Bt>0&&rt>=0;)Bt--,tt[rt--].renderWidth++;p=E}}}const Ue=i.offsetHeight,Xe=i.scrollHeight>i.clientHeight;let ut=0;Xe&&(ut=Math.max(i.offsetWidth-i.clientWidth,0)),d.scrollbarWidth=ut,d.overflowY=Xe,f.tableWidth=p,f.tableHeight=Ue;let it=0;c&&(it=c.clientHeight,ae(()=>{c&&i&&c.scrollLeft!==i.scrollLeft&&(c.scrollLeft=i.scrollLeft)})),f.headerHeight=it;let at=!1,ot=0,pt=0;g?(ot=g.offsetHeight,at=p>g.clientWidth,pt=Math.max(ot-g.clientHeight,0)):(at=p>E,pt=Math.max(Ue-i.clientHeight,0)),f.footerHeight=ot,d.overflowX=at,d.scrollbarHeight=pt,xn(),d.parentHeight=Math.max(f.headerHeight+ot+20,j.getParentHeight()),at&&j.checkScrolling()},wl=()=>{const{showOverflow:t}=e,{tableData:l,scrollXLoad:s,scrollYLoad:i}=d,{fullAllDataRowIdData:c}=f,g=A.value;if(!t&&(s||i)&&g){let p=0,v=0,E=!1;l.forEach(O=>{const S=Oe(h,O),q=c[S],D=g.querySelectorAll(`.vxe-body--row[rowid="${S}"]>.vxe-body--column>.vxe-cell`);if(q&&D.length){let K=0;for(let U=0;U<D.length;U++){const V=D[U],G=V.parentElement;if(!G||!G.clientWidth)break;E||(p=r.toNumber(getComputedStyle(G).paddingTop),v=r.toNumber(getComputedStyle(G).paddingBottom),E=!0);let De=p+v;V&&(De+=V.clientHeight),K=Math.max(K,De)}q.height=s?Math.max(q.height,K):K}})}},Al=t=>{const{sortBy:l,sortType:s}=t;return i=>{let c;return l?c=r.isFunction(l)?l({row:i,column:t}):r.get(i,l):c=b.getCellLabel(i,t),!s||s==="auto"?isNaN(c)?c:r.toNumber(c):s==="number"?r.toNumber(c):s==="string"?r.toValueString(c):c}},wn=()=>{const{treeConfig:t}=e,{afterFullData:l,fullDataRowIdData:s,fullAllDataRowIdData:i}=f,c=et.value;t&&c.transform&&l.forEach((g,p)=>{const v=Oe(h,g),E=i[v];if(E)E._index=p;else{const O={row:g,rowid:v,seq:"-1",index:-1,$index:-1,_index:p,items:[],parent:null,level:0,height:0};i[v]=O,s[v]=O}})},Yl=()=>{const{treeConfig:t}=e,{afterFullData:l,fullDataRowIdData:s,fullAllDataRowIdData:i,afterTreeFullData:c}=f,g=et.value,p=g.children||g.childrenField,v={};t?(r.eachTree(c,(E,O,S,q)=>{const D=Oe(h,E),K=i[D],U=q.map((V,G)=>G%2===0?Number(V)+1:".").join("");if(K)K.seq=U;else{const V={row:E,rowid:D,seq:U,index:-1,$index:-1,_index:-1,items:[],parent:null,level:0,height:0};i[D]=V,s[D]=V}v[D]=E},{children:g.transform?g.mapChildrenField:p}),wn()):l.forEach((E,O)=>{const S=Oe(h,E),q=i[S],D=O+1;if(q)q.seq=D,q._index=O;else{const K={row:E,rowid:S,seq:D,index:-1,$index:-1,_index:O,items:[],parent:null,level:0,height:0};i[S]=K,s[S]=K}v[S]=E}),f.afterFullRowMaps=v},rl=()=>{const{treeConfig:t}=e,{treeExpandedMaps:l}=d,{fullAllDataRowIdData:s}=f,i=et.value,c=i.children||i.childrenField;if(t&&i.transform){const g=[],p={};return r.eachTree(f.afterTreeFullData,(v,E,O,S,q)=>{const D=Oe(h,v),K=Oe(h,q);if(!q||p[K]&&l[K]){const U=s[D];U&&(U._index=g.length),p[D]=1,g.push(v)}},{children:c}),f.afterFullData=g,Xn(g),g}return f.afterFullData},El=()=>{const{treeConfig:t}=e,{tableFullColumn:l,tableFullData:s,tableFullTreeData:i}=f,c=ye.value,g=Ke.value,p=et.value,v=p.children||p.childrenField,{transform:E}=p,{remote:O,filterMethod:S}=c,{remote:q,sortMethod:D,multiple:K,chronological:U}=g;let V=[],G=[];if(!O||!q){const De=[];let z=[];if(l.forEach(Re=>{const{field:Pe,sortable:Ue,order:Xe,filters:ut}=Re;if(!O&&ut&&ut.length){const it=[],at=[];ut.forEach(ot=>{ot.checked&&(at.push(ot),it.push(ot.value))}),at.length&&De.push({column:Re,valueList:it,itemList:at})}!q&&Ue&&Xe&&z.push({column:Re,field:Pe,property:Pe,order:Xe,sortTime:Re.sortTime})}),K&&U&&z.length>1&&(z=r.orderBy(z,"sortTime")),!O&&De.length){const Re=Pe=>De.every(({column:Ue,valueList:Xe,itemList:ut})=>{const{filterMethod:it,filterRender:at}=Ue,ot=ct(at)?li.get(at.name):null,pt=ot?ot.tableFilterMethod||ot.filterMethod:null,tt=ot?ot.tableFilterDefaultMethod||ot.defaultTableFilterMethod||ot.defaultFilterMethod:null,rt=ao(Pe,Ue);return it?ut.some(Bt=>it({value:Bt.value,option:Bt,cellValue:rt,row:Pe,column:Ue,$table:h})):pt?ut.some(Bt=>pt({value:Bt.value,option:Bt,cellValue:rt,row:Pe,column:Ue,$table:h})):S?S({options:ut,values:Xe,cellValue:rt,row:Pe,column:Ue}):tt?ut.some(Bt=>tt({value:Bt.value,option:Bt,cellValue:rt,row:Pe,column:Ue,$table:h})):Xe.indexOf(r.get(Pe,Ue.field))>-1});t&&E?(G=r.searchTree(i,Re,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:v}),V=G):(V=t?i.filter(Re):s.filter(Re),G=V)}else t&&E?(G=r.searchTree(i,()=>!0,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:v}),V=G):(V=t?i.slice(0):s.slice(0),G=V);if(!q&&z.length)if(t&&E){if(D){const Re=D({data:G,sortList:z,$table:h});G=r.isArray(Re)?Re:G}else G=r.orderBy(G,z.map(({column:Re,order:Pe})=>[Al(Re),Pe]));V=G}else{if(D){const Re=D({data:V,sortList:z,$table:h});V=r.isArray(Re)?Re:V}else V=r.orderBy(V,z.map(({column:Re,order:Pe})=>[Al(Re),Pe]));G=V}}else t&&E?(G=r.searchTree(i,()=>!0,{original:!0,isEvery:!0,children:p.mapChildrenField,mapChildren:v}),V=G):(V=t?i.slice(0):s.slice(0),G=V);f.afterFullData=V,f.afterTreeFullData=G,Yl()},io=()=>{const{border:t,showFooter:l,showOverflow:s,showHeaderOverflow:i,showFooterOverflow:c,mouseConfig:g,spanMethod:p,footerSpanMethod:v}=e,{isGroup:E,currentRow:O,tableColumn:S,scrollXLoad:q,scrollYLoad:D,overflowX:K,scrollbarWidth:U,scrollbarHeight:V,columnStore:G,editStore:De,isAllOverflow:z,expandColumn:Re}=d;let{visibleColumn:Pe,fullColumnIdData:Ue,tableHeight:Xe,tableWidth:ut,headerHeight:it,footerHeight:at,elemStore:ot,customHeight:pt,customMinHeight:tt,customMaxHeight:rt}=f;const Bt=["main","left","right"],Xo=Be.value,So=Yt.value,fl=lt.value,To=Eo(ot["main-body-wrapper"]);Xo&&(Xo.style.top=`${it}px`,Xo.style.height=To?`${To.offsetHeight-V}px`:""),pt>0&&l&&(pt+=V);const pl=ce.value;pl&&(pl.style.height=`${V}px`);const yo=ne.value;if(yo){let Jt=0,mo=0;const Co=tt-it-at;rt&&(mo=rt-it-at,mo=Math.max(Co,mo)),pt&&(Jt=pt-it-at,mo&&(Jt=Math.min(mo,Jt)),Jt=Math.max(Co,Jt)),yo.style.top=`${it}px`,yo.style.width=`${U}px`,yo.style.height=`${Jt+(K?-Math.max(1,V):0)}px`}return Bt.forEach((Jt,mo)=>{const Co=mo>0?Jt:"",hl=["header","body","footer"],Ko=Co==="left";let Ht=[],Wt;Co&&(Ht=Ko?G.leftList:G.rightList,Wt=Ko?J.value:ee.value),hl.forEach(zt=>{const Pt=Eo(ot[`${Jt}-${zt}-wrapper`]),uo=Eo(ot[`${Jt}-${zt}-table`]);if(zt==="header"){let fo=ut,Xt=S;E?Xt=Pe:Co&&(Xt=Pe,(q||D||i)&&(p||v?Xt=Pe:Xt=Ht||[])),fo=Xt.reduce((wo,Do)=>wo+Do.renderWidth,0),uo&&(uo.style.width=fo?`${fo+U}px`:"");const Mo=Eo(ot[`${Jt}-${zt}-repair`]);Mo&&(Mo.style.width=`${ut}px`);const eo=Eo(ot[`${Jt}-${zt}-list`]);E&&eo&&r.arrayEach(eo.querySelectorAll(".col--group"),wo=>{const Do=b.getColumnNode(wo);if(Do){const Bl=Do.item,{showHeaderOverflow:Uo}=Bl,Sn=r.isBoolean(Uo)?Uo:i,Tn=Sn==="title"||(Sn===!0||Sn==="tooltip")||Sn==="ellipsis";let Mn=0,Ql=0;Tn&&r.eachTree(Bl.children,Dn=>{(!Dn.children||!Bl.children.length)&&Ql++,Mn+=Dn.renderWidth},{children:"children"}),wo.style.width=Tn?`${Mn-Ql-(t?2:0)}px`:""}})}else if(zt==="body"){const fo=Eo(ot[`${Jt}-${zt}-emptyBlock`]);if(zs(Pt)){let eo=0;const wo=tt-it-at;if(rt&&(eo=rt-it-at,Co&&(eo-=l?0:V),eo=Math.max(wo,eo),Pt.style.maxHeight=`${eo}px`),pt){let Do=pt-it-at;Co&&(Do-=l?0:V),eo&&(Do=Math.min(eo,Do)),Pt.style.height=`${Math.max(wo,Do)}px`}else Pt.style.height="";Pt.style.minHeight=`${wo}px`}Wt&&(zs(Pt)&&(Pt.style.top=`${it}px`),Wt.style.height=`${(pt>0?pt-it-at:Xe)+it+at-V*(l?2:1)}px`,Wt.style.width=`${Ht.reduce((eo,wo)=>eo+wo.renderWidth,Ko?0:U)}px`);let Xt=ut,Mo=S;Co&&(Mo=Pe,(q||D||s&&z)&&(Re||p||v?Mo=Pe:Mo=Ht||[])),Xt=Mo.reduce((eo,wo)=>eo+wo.renderWidth,0),uo&&(uo.style.width=Xt?`${Xt}px`:"",uo.style.paddingRight=U&&Co&&(dn["-moz"]||dn.safari)?`${U}px`:""),fo&&(fo.style.width=Xt?`${Xt}px`:"")}else if(zt==="footer"){let fo=ut,Xt=S;Co&&(Xt=Pe,(q||D||c)&&(p||v?Xt=Pe:Xt=Ht||[])),fo=Xt.reduce((Mo,eo)=>Mo+eo.renderWidth,0),zs(Pt)&&(Wt&&(Pt.style.top=`${pt>0?pt-at:Xe+it}px`),Pt.style.marginTop=`${-Math.max(1,V)}px`),uo&&(uo.style.width=fo?`${fo+U}px`:"")}const Ro=Eo(ot[`${Jt}-${zt}-colgroup`]);Ro&&r.arrayEach(Ro.children,fo=>{const Xt=fo.getAttribute("name");if(Xt==="col_gutter"&&(fo.style.width=`${U}px`),Ue[Xt]){const eo=Ue[Xt].column,{showHeaderOverflow:wo,showFooterOverflow:Do,showOverflow:Bl}=eo;let Uo;fo.style.width=`${eo.renderWidth}px`,zt==="header"?Uo=r.isUndefined(wo)||r.isNull(wo)?i:wo:zt==="footer"?Uo=r.isUndefined(Do)||r.isNull(Do)?c:Do:Uo=r.isUndefined(Bl)||r.isNull(Bl)?s:Bl;let Zn=Uo==="title"||(Uo===!0||Uo==="tooltip")||Uo==="ellipsis";const Tn=Eo(ot[`${Jt}-${zt}-list`]);D&&!Zn&&(Zn=!0),Tn&&r.arrayEach(Tn.querySelectorAll(`.${eo.id}`),Mn=>{const Ql=parseInt(Mn.getAttribute("colspan")||1),Dn=Mn.querySelector(".vxe-cell");let Ar=eo.renderWidth;if(Dn){if(Ql>1){const Xa=b.getColumnIndex(eo);for(let js=1;js<Ql;js++){const Lr=b.getColumns(Xa+js);Lr&&(Ar+=Lr.renderWidth)}}Dn.style.width=Zn?`${Ar-So*Ql}px`:""}})}})})}),O&&b.setCurrentRow(O),g&&fl.selected&&De.selected.row&&De.selected.column&&h.addCellSelectedClass(),ae()},il=t=>h.triggerValidate?h.triggerValidate(t):ae(),zo=(t,l)=>{il("blur").catch(s=>s).then(()=>{h.handleEdit(l,t).then(()=>il("change")).catch(s=>s)})},al=()=>{const{sortConfig:t}=e;if(t){const l=Ke.value;let{defaultSort:s}=l;s&&(r.isArray(s)||(s=[s]),s.length&&((t.multiple?s:s.slice(0,1)).forEach((i,c)=>{const{field:g,order:p}=i;if(g&&p){const v=b.getColumnByField(g);v&&v.sortable&&(v.order=p,v.sortTime=Date.now()+c)}}),l.remote||j.handleTableData(!0).then(io)))}},Ll=()=>{const{checkboxConfig:t}=e;if(t){const{fullDataRowIdData:l}=f,s=ge.value,{checkAll:i,checkRowKeys:c}=s;if(i)Vo(!0,!0);else if(c){const g=[];c.forEach(p=>{l[p]&&g.push(l[p].row)}),ul(g,!0,!0)}}},Nn=()=>{const{radioConfig:t}=e;if(t){const{fullDataRowIdData:l}=f,s=He.value,{checkRowKey:i,reserve:c}=s;if(i&&(l[i]&&Bo(l[i].row,!0),c)){const g=vl(h);f.radioReserveRow={[g]:i}}}},cl=()=>{const{expandConfig:t}=e;if(t){const{fullDataRowIdData:l}=f,s=st.value,{expandAll:i,expandRowKeys:c}=s;if(i)b.setAllRowExpand(!0);else if(c){const g=[];c.forEach(p=>{l[p]&&g.push(l[p].row)}),b.setRowExpand(g,!0)}}},Ss=t=>{He.value.reserve&&(f.radioReserveRow=t)},dl=(t,l)=>{const{checkboxReserveRowMap:s}=f;if(ge.value.reserve){const c=Oe(h,t);l?s[c]=t:s[c]&&delete s[c]}},Bo=(t,l)=>{const s=He.value,{checkMethod:i}=s;return t&&(l||!i||i({row:t}))&&(d.selectRadioRow=t,Ss(t)),ae()},ul=(t,l,s)=>(t&&!r.isArray(t)&&(t=[t]),h.handleBatchSelectRows(t,!!l,s),h.checkSelectionStatus(),ae()),Vo=(t,l)=>{const{treeConfig:s}=e,{selectCheckboxMaps:i}=d,{afterFullData:c,checkboxReserveRowMap:g}=f,p=et.value,v=p.children||p.childrenField,E=ge.value,{checkField:O,reserve:S,checkMethod:q}=E,D=E.indeterminateField||E.halfField,K={};if(O){const U=V=>{(l||!q||q({row:V}))&&(t&&(K[Oe(h,V)]=V),r.set(V,O,t)),s&&D&&r.set(V,D,!1)};s?r.eachTree(c,U,{children:v}):c.forEach(U)}else s?t?r.eachTree(c,U=>{(l||!q||q({row:U}))&&(K[Oe(h,U)]=U)},{children:v}):!l&&q&&r.eachTree(c,U=>{const V=Oe(h,U);!q({row:U})&&i[V]&&(K[V]=U)},{children:v}):t?!l&&q?c.forEach(U=>{const V=Oe(h,U);(i[V]||q({row:U}))&&(K[V]=U)}):c.forEach(U=>{K[Oe(h,U)]=U}):!l&&q&&c.forEach(U=>{const V=Oe(h,U);!q({row:U})&&i[V]&&(K[V]=U)});return S&&(t?r.each(K,(U,V)=>{g[V]=U}):c.forEach(U=>dl(U,!1))),d.selectCheckboxMaps=O?{}:K,d.isAllSelected=t,d.isIndeterminate=!1,d.treeIndeterminateMaps={},f.treeIndeterminateRowMaps={},j.checkSelectionStatus(),ae()},ho=()=>{const{treeConfig:t}=e,{expandColumn:l,currentRow:s,selectCheckboxMaps:i,selectRadioRow:c,rowExpandedMaps:g,treeExpandedMaps:p}=d,{fullDataRowIdData:v,fullAllDataRowIdData:E,radioReserveRow:O}=f,S=st.value,q=et.value,D=He.value,K=ge.value;if(c&&!E[Oe(h,c)]&&(d.selectRadioRow=null),D.reserve&&O){const U=Oe(h,O);v[U]&&Bo(v[U].row,!0)}d.selectCheckboxMaps=qt(i),K.reserve&&ul(Qt(f.checkboxReserveRowMap),!0,!0),s&&!E[Oe(h,s)]&&(d.currentRow=null),d.rowExpandedMaps=l?qt(g):{},l&&S.reserve&&b.setRowExpand(Qt(f.rowExpandedReserveRowMap),!0),d.treeExpandedMaps=t?qt(p):{},t&&q.reserve&&b.setTreeExpand(Qt(f.treeExpandedReserveRowMap),!0)},$l=()=>{const{treeConfig:t}=e;if(t){const{tableFullData:l}=f,s=et.value,{expandAll:i,expandRowKeys:c}=s,g=s.children||s.childrenField;if(i)b.setAllTreeExpand(!0);else if(c){const p=[],v=vl(h);c.forEach(E=>{const O=r.findTree(l,S=>E===r.get(S,v),{children:g});O&&p.push(O.item)}),b.setTreeExpand(p,!0)}}},En=t=>{const l=et.value,s=ge.value,{transform:i,loadMethod:c}=l,{checkStrictly:g}=s;return new Promise(p=>{if(c){const{treeExpandLazyLoadedMaps:v}=d,{fullAllDataRowIdData:E}=f,O=Oe(h,t),S=E[O];v[O]=t,Promise.resolve(c({$table:h,row:t})).then(q=>{if(S&&(S.treeLoaded=!0),v[O]&&delete v[O],r.isArray(q)||(q=[]),q)return b.loadTreeChildren(t,q).then(D=>{const{treeExpandedMaps:K}=d;return D.length&&!K[O]&&(K[O]=t),!g&&b.isCheckedByCheckboxRow(t)&&ul(D,!0),ae().then(()=>{if(i)return j.handleTableData(),wn(),ae()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:q}=d;S&&(S.treeLoaded=!1),q[O]&&delete q[O]}).finally(()=>{ae().then(()=>b.recalculate()).then(()=>p())})}else p()})},yl=(t,l)=>{const{treeExpandedReserveRowMap:s}=f;if(et.value.reserve){const c=Oe(h,t);l?s[c]=t:s[c]&&delete s[c]}},Gl=t=>new Promise(l=>{const s=st.value,{loadMethod:i}=s;if(i){const{fullAllDataRowIdData:c}=f,{rowExpandLazyLoadedMaps:g}=d,p=Oe(h,t),v=c[p];g[p]=t,i({$table:h,row:t,rowIndex:b.getRowIndex(t),$rowIndex:b.getVMRowIndex(t)}).then(()=>{const{rowExpandedMaps:E}=d;v&&(v.expandLoaded=!0),E[p]=t}).catch(()=>{v&&(v.expandLoaded=!1)}).finally(()=>{const{rowExpandLazyLoadedMaps:E}=d;E[p]&&delete E[p],ae().then(()=>b.recalculate()).then(()=>l())})}else l()}),_n=(t,l)=>{const{rowExpandedReserveRowMap:s}=f;if(st.value.reserve){const c=Oe(h,t);l?s[c]=t:s[c]&&delete s[c]}},$t=()=>{const{mergeCells:t}=e;t&&b.setMergeCells(t)},Ho=()=>{const{mergeFooterItems:t}=e;t&&b.setMergeFooterItems(t)},qo=()=>ae().then(()=>{const{scrollXLoad:t,scrollYLoad:l}=d,{scrollXStore:s,scrollYStore:i}=f,c=pe.value,g=ie.value;if(t){const{visibleSize:E}=Ct(),O=Math.max(0,g.oSize?r.toNumber(g.oSize):dn.edge?5:0);s.offsetSize=O,s.visibleSize=E,s.endIndex=Math.max(s.startIndex+s.visibleSize+O,s.endIndex),j.updateScrollXData()}else j.updateScrollXSpace();wl();const p=Vt();i.rowHeight=p,d.rowHeight=p;const{visibleSize:v}=ro();if(l){const E=Math.max(0,c.oSize?r.toNumber(c.oSize):dn.edge?10:0);i.offsetSize=E,i.visibleSize=v,i.endIndex=Math.max(i.startIndex+v+E,i.endIndex),j.updateScrollYData()}else j.updateScrollYSpace();ae(io)}),Ts=t=>{const l=A.value;return f.reRunTime=Date.now(),!l||!l.clientWidth?ae():(Po(),Cn(),qo().then(()=>{if(t===!0)return wl(),Po(),Cn(),qo()}))},Wn=t=>{const{keepSource:l,treeConfig:s,showOverflow:i}=e,{editStore:c,scrollYLoad:g}=d,{scrollYStore:p,scrollXStore:v,lastScrollLeft:E,lastScrollTop:O}=f,S=et.value,q=Ee.value,{transform:D}=S,K=S.children||S.childrenField;let U=[],V=_o(t?t.slice(0):[]);s&&(D?(U=r.toArrayTree(V,{key:S.rowField,parentKey:S.parentField,children:K,mapChildren:S.mapChildrenField}),V=U.slice(0)):U=V.slice(0)),p.startIndex=0,p.endIndex=1,v.startIndex=0,v.endIndex=1,d.scrollVMLoading=!1,c.insertMaps={},c.removeMaps={};const G=Xn(V);if(d.isDragRowMove=!1,f.tableFullData=V,f.tableFullTreeData=U,j.cacheRowMap(!0),f.tableSynchData=t,l&&j.cacheSourceMap(V),G&&i&&!q.height){const De=f.tableFullColumn.find(z=>z.showOverflow===!1);De&&Gt("vxe.error.errProp",[`column[field="${De.field}"].show-overflow=false`,"show-overflow=true"])}return h.clearCellAreas&&e.mouseConfig&&(h.clearCellAreas(),h.clearCopyCellArea()),b.clearMergeCells(),b.clearMergeFooterItems(),j.handleTableData(!0),b.updateFooter(),ae().then(()=>{xn(),io()}).then(()=>{qo()}).then(()=>(G&&(p.endIndex=p.visibleSize),ho(),j.checkSelectionStatus(),new Promise(De=>{ae().then(()=>b.recalculate()).then(()=>{let z=E,Re=O;const Pe=ie.value,Ue=pe.value;Pe.scrollToLeftOnChange&&(z=0),Ue.scrollToTopOnChange&&(Re=0),g===G?qs(h,z,Re).then(De):setTimeout(()=>qs(h,z,Re).then(De))})})))},zn=()=>{Ll(),Nn(),cl(),$l(),$t(),Ho(),ae(()=>setTimeout(()=>b.recalculate()))},xa=()=>{al()},Rr=()=>{const{scrollXLoad:t}=d,{visibleColumn:l,scrollXStore:s,fullColumnIdData:i}=f,c=t?l.slice(s.startIndex,s.endIndex):l.slice(0);c.forEach((g,p)=>{const v=g.id,E=i[v];E&&(E.$index=p)}),d.tableColumn=c},Or=()=>{const t=r.orderBy(f.collectColumn,"renderSortNumber");f.collectColumn=t;const l=qn(t);f.tableFullColumn=l,kl()},yn=()=>{const{mergeList:t,mergeFooterList:l}=d,{scrollXStore:s}=f,{startIndex:i,endIndex:c,offsetSize:g}=s,{toVisibleIndex:p,visibleSize:v}=Ct(),E={startIndex:Math.max(0,p-1-g),endIndex:p+v+g};$o(t.concat(l),E,"col");const{startIndex:O,endIndex:S}=E;(p<=i||p>=c-v-1)&&(i!==O||c!==S)&&(s.startIndex=O,s.endIndex=S,j.updateScrollXData()),b.closeTooltip()},qn=t=>{const l=[];return t.forEach(s=>{l.push(...s.children&&s.children.length?qn(s.children):[s])}),l},Ms=t=>{const{showOverflow:l}=e,s=Ee.value,i=[],c=[],g=[],{isGroup:p,columnStore:v}=d,E=ie.value,{collectColumn:O,tableFullColumn:S,scrollXStore:q,fullColumnIdData:D}=f;if(p){const V=[],G=[],De=[];r.eachTree(O,(z,Re,Pe,Ue,Xe)=>{const ut=cn(z);Xe&&Xe.fixed&&(z.fixed=Xe.fixed),Xe&&z.fixed!==Xe.fixed&&Gt("vxe.error.groupFixed"),ut?z.visible=!!r.findTree(z.children,it=>cn(it)?!1:it.visible):z.visible&&(z.fixed==="left"?i.push(z):z.fixed==="right"?g.push(z):c.push(z))}),O.forEach(z=>{z.visible&&(z.fixed==="left"?V.push(z):z.fixed==="right"?De.push(z):G.push(z))}),d.tableGroupColumn=V.concat(G).concat(De)}else S.forEach(V=>{V.visible&&(V.fixed==="left"?i.push(V):V.fixed==="right"?g.push(V):c.push(V))});const K=i.concat(c).concat(g),U=!!E.enabled&&E.gt>-1&&(E.gt===0||E.gt<S.length);if(d.hasFixedColumn=i.length>0||g.length>0,Object.assign(v,{leftList:i,centerList:c,rightList:g}),U){if(l&&!s.height){const V=f.tableFullColumn.find(G=>G.showOverflow===!1);V&&Gt("vxe.error.errProp",[`column[field="${V.field}"].show-overflow=false`,"show-overflow=true"])}if(t){const{visibleSize:V}=Ct();q.startIndex=0,q.endIndex=V,q.visibleSize=V}}return(K.length!==f.visibleColumn.length||!f.visibleColumn.every((V,G)=>V===K[G]))&&(b.clearMergeCells(),b.clearMergeFooterItems()),d.scrollXLoad=U,K.forEach((V,G)=>{const De=V.id,z=D[De];z&&(z._index=G)}),f.visibleColumn=K,Rr(),t?b.updateFooter().then(()=>b.recalculate()).then(()=>(b.updateCellAreas(),b.recalculate())):b.updateFooter()},Ca=()=>{const{collectColumn:t}=f;t.forEach((l,s)=>{const i=s+1;l.sortNumber=i,l.renderSortNumber=i})},Sr=t=>{f.collectColumn=t;const l=qn(t);return f.tableFullColumn=l,d._isLoading=!0,d.isDragColMove=!1,Ca(),Promise.resolve(Cl()).then(()=>(d._isLoading=!1,kl(),Ms(!0).then(()=>{d.scrollXLoad&&yn()}),b.clearMergeCells(),b.clearMergeFooterItems(),j.handleTableData(!0),ae().then(()=>(re&&re.syncUpdate({collectColumn:f.collectColumn,$table:h}),h.handleUpdateCustomColumn&&h.handleUpdateCustomColumn(),b.recalculate()))))},Xn=t=>{const{treeConfig:l}=e,s=pe.value,i=et.value,{transform:c}=i,g=t||f.tableFullData,p=(c||!l)&&!!s.enabled&&s.gt>-1&&(s.gt===0||s.gt<g.length);return d.scrollYLoad=p,p},Tr=(t,l)=>{const{treeExpandedMaps:s,treeExpandLazyLoadedMaps:i,treeNodeColumn:c}=d,g=Object.assign({},s),{fullAllDataRowIdData:p,tableFullData:v}=f,E=et.value,{reserve:O,lazy:S,accordion:q,toggleMethod:D}=E,K=E.children||E.childrenField,U=E.hasChild||E.hasChildField,V=[],G=b.getColumnIndex(c),De=b.getVMColumnIndex(c);let z=D?t.filter(Re=>D({$table:h,expanded:l,column:c,columnIndex:G,$columnIndex:De,row:Re})):t;if(q){z=z.length?[z[z.length-1]]:[];const Re=r.findTree(v,Pe=>Pe===z[0],{children:K});Re&&Re.items.forEach(Pe=>{const Ue=Oe(h,Pe);g[Ue]&&delete g[Ue]})}return l?z.forEach(Re=>{const Pe=Oe(h,Re);if(!g[Pe]){const Ue=p[Pe];Ue&&(S&&Re[U]&&!Ue.treeLoaded&&!i[Pe]?V.push(En(Re)):Re[K]&&Re[K].length&&(g[Pe]=Re))}}):z.forEach(Re=>{const Pe=Oe(h,Re);g[Pe]&&delete g[Pe]}),O&&z.forEach(Re=>yl(Re,l)),d.treeExpandedMaps=g,Promise.all(V).then(()=>b.recalculate())},wa=(t,l)=>Tr(t,l).then(()=>{rl(),j.handleTableData(),wn()}).then(()=>b.recalculate()).then(()=>{setTimeout(()=>{b.updateCellAreas()},30)}),Mr=(t,l)=>{Vo(l),t&&Rt("checkbox-all",{records:b.getCheckboxRecords(),reserves:b.getCheckboxReserveRecords(),indeterminates:b.getCheckboxIndeterminateRecords(),checked:l},t)},Ds=()=>{const{showOverflow:t}=e,{mergeList:l}=d,{tableHeight:s,scrollYStore:i}=f,{startIndex:c,endIndex:g,offsetSize:p}=i,v=t?p:p+Math.min(8,Math.ceil(s/200)),{toVisibleIndex:E,visibleSize:O}=ro(),S={startIndex:Math.max(0,E-1-v),endIndex:E+O+v};$o(l,S,"row");const{startIndex:q,endIndex:D}=S;(E<=c||E>=g-O-1)&&(c!==q||g!==D)&&(i.startIndex=q,i.endIndex=D,j.updateScrollYData())},Kn=t=>function(l){const{fullAllDataRowIdData:s}=f;if(l){const i=Oe(h,l),c=s[i];if(c)return c[t]}return-1},Is=t=>function(l){const{fullColumnIdData:s}=f;if(l){const i=s[l.id];if(i)return i[t]}return-1},Ea=()=>{const{lxTimeout:t,lxRunTime:l,scrollXStore:s}=f,{visibleSize:i}=s,c=Math.min(80,Math.floor(i*3));t&&clearTimeout(t),(!l||l+c<Date.now())&&(f.lxRunTime=Date.now(),yn()),f.lxTimeout=setTimeout(()=>{f.lxRunTime=void 0,f.lxRunTime=void 0,yn()},c)},ya=()=>{const{lyTimeout:t,lyRunTime:l,scrollYStore:s}=f,{visibleSize:i}=s,c=Math.min(80,Math.floor(i));t&&clearTimeout(t),(!l||l+c<Date.now())&&(f.lyRunTime=Date.now(),Ds()),f.lyTimeout=setTimeout(()=>{f.lyTimeout=void 0,f.lyRunTime=void 0,Ds()},c)},Ra=t=>{const{intoRunScroll:l,inFooterScroll:s,inBodyScroll:i,lastScrollTop:c}=f;if(!l&&(s||i))return;const g=w.value,p=C.value,v=R.value,E=p.$el,O=g?g.$el:null,S=v?v.$el:null,q=me.value,D=t.currentTarget,{scrollLeft:K}=D,U=q||E;let V=0;U&&(V=U.scrollTop);const G=!0,De=V!==c;f.inVirtualScroll=!0,no(E,K),no(O,K),no(S,K),h.triggerScrollXEvent(t),h.handleScrollEvent(t,De,G,V,K,{type:"table",fixed:""})},Oa=t=>{const{intoRunScroll:l,inFooterScroll:s,inBodyScroll:i,lastScrollLeft:c}=f;if(!l&&(s||i))return;const g=C.value,p=_.value,v=Z.value,E=g.$el,O=p?p.$el:null,S=v?v.$el:null,q=oe.value,D=t.currentTarget,{scrollTop:K}=D,U=q||E;let V=0;U&&(V=U.scrollLeft);const G=V!==c,De=!0;f.inVirtualScroll=!0,Kt(E,K),Kt(O,K),Kt(S,K),h.triggerScrollYEvent(t),h.handleScrollEvent(t,De,G,K,V,{type:"table",fixed:""})},Sa=(t,l)=>{const{scrollXLoad:s,scrollYLoad:i}=d,{lcsTimeout:c}=f;c&&clearTimeout(c),f.lcsTimeout=setTimeout(()=>{f.lcsTimeout=void 0,f.inVirtualScroll=!1,f.inBodyScroll=!1,f.inFooterScroll=!1,f.bodyScrollType="",t&&s&&j.updateScrollXData(),l&&i&&j.updateScrollYData(),b.updateCellAreas()},200)};let Dr;const Rt=(t,l,s)=>{a(t,Hd(s,{$table:h,$grid:Ce},l))},Ta=(t,l)=>{const{fullColumnIdData:s}=f,i=to(h,t);return i&&s[i.id]?Xr(h,i,l):ae()};b={dispatchEvent:Rt,clearAll(){return md(h)},syncData(){return fs("vxe.error.delFunc",["syncData","getData"]),ae().then(()=>(d.tableData=[],a("update:data",f.tableFullData),ae()))},updateData(){const{scrollXLoad:t,scrollYLoad:l}=d;return j.handleTableData(!0).then(()=>{if(b.updateFooter(),t||l)return t&&j.updateScrollXSpace(),l&&j.updateScrollYSpace(),b.refreshScroll()}).then(()=>(b.updateCellAreas(),b.recalculate(!0))).then(()=>{setTimeout(()=>h.recalculate(),50)})},loadData(t){const{initStatus:l}=f;return Wn(t).then(()=>(f.inited=!0,f.initStatus=!0,l||zn(),b.recalculate()))},reloadData(t){return b.clearAll().then(()=>(f.inited=!0,f.initStatus=!0,Wn(t))).then(()=>(zn(),b.recalculate()))},setRow(t,l){if(t&&l){let s=t;r.isArray(t)||(s=[t]);const i=vl(h);s.forEach(c=>{const g=Oe(h,c),p=r.clone(Object.assign({},l),!0);r.set(p,i,g),Object.assign(c,p)})}return ae()},reloadRow(t,l,s){const{keepSource:i}=e,{tableData:c}=d,{tableSourceData:g}=f;if(i){const p=b.getRowIndex(t),v=g[p];if(v&&t)if(s){const E=r.clone(r.get(l||t,s),!0);r.set(t,s,E),r.set(v,s,E)}else{const E=vl(h),O=Oe(h,t),S=r.clone(Object.assign({},l),!0);r.set(S,E,O),r.destructuring(v,Object.assign(t,S))}d.tableData=c.slice(0)}return ae()},getParams(){return e.params},loadTreeChildren(t,l){const{keepSource:s}=e,{tableSourceData:i,fullDataRowIdData:c,fullAllDataRowIdData:g,sourceDataRowIdData:p}=f,v=et.value,{transform:E,mapChildrenField:O}=v,S=v.children||v.childrenField,q=g[Oe(h,t)],D=q?q.level:0;return b.createData(l).then(K=>{if(s){const U=Oe(h,t),V=r.findTree(i,G=>U===Oe(h,G),{children:S});V&&(V.item[S]=r.clone(K,!0)),K.forEach(G=>{const De=Oe(h,G);p[De]=r.clone(G,!0)})}return r.eachTree(K,(U,V,G,De,z,Re)=>{const Pe=Oe(h,U),Ue=z||q.row,Xe={row:U,rowid:Pe,seq:-1,index:V,_index:-1,$index:-1,items:G,parent:Ue,level:D+Re.length,height:0};c[Pe]=Xe,g[Pe]=Xe},{children:S}),t[S]=K,E&&(t[O]=r.clone(K,!1)),Yl(),K})},loadColumn(t){const l=r.mapTree(t,s=>_o(Je.createColumn(h,s)));return Sr(l)},reloadColumn(t){return b.clearAll().then(()=>b.loadColumn(t))},getRowNode(t){if(t){const{fullAllDataRowIdData:l}=f,s=t.getAttribute("rowid");if(s){const i=l[s];if(i)return{rowid:i.rowid,item:i.row,index:i.index,items:i.items,parent:i.parent}}}return null},getColumnNode(t){if(t){const{fullColumnIdData:l}=f,s=t.getAttribute("colid");if(s){const i=l[s];if(i)return{colid:i.colid,item:i.column,index:i.index,items:i.items,parent:i.parent}}}return null},getRowSeq:Kn("seq"),getRowIndex:Kn("index"),getVTRowIndex:Kn("_index"),getVMRowIndex:Kn("$index"),getColumnIndex:Is("index"),getVTColumnIndex:Is("_index"),getVMColumnIndex:Is("$index"),createData(t){return ae().then(()=>_o(j.defineField(t)))},createRow(t){const l=r.isArray(t);return l||(t=[t||{}]),b.createData(t).then(s=>l?s:s[0])},revertData(t,l){const{keepSource:s}=e,{tableSourceData:i,sourceDataRowIdData:c}=f;if(!s)return ae();let g=t;return t?r.isArray(t)||(g=[t]):g=r.toArray(h.getUpdateRecords()),g.length&&g.forEach(p=>{if(!b.isInsertByRow(p)){const v=Oe(h,p),E=c[v];E&&p&&(l?r.set(p,l,r.clone(r.get(E,l),!0)):r.destructuring(p,r.clone(E,!0)))}}),t?ae():b.reloadData(i)},clearData(t,l){const{tableFullData:s,visibleColumn:i}=f;return arguments.length?t&&!r.isArray(t)&&(t=[t]):t=s,l?t.forEach(c=>r.set(c,l,null)):t.forEach(c=>{i.forEach(g=>{g.field&&ol(c,g,null)})}),ae()},getCellElement(t,l){const s=to(h,l);if(!s)return null;const i=Oe(h,t),c=C.value,g=_.value,p=Z.value;let v;return s&&(s.fixed&&(s.fixed==="left"?g&&(v=g.$el):p&&(v=p.$el)),v||(v=c.$el),v)?v.querySelector(`.vxe-body--row[rowid="${i}"] .${s.id}`):null},getCellLabel(t,l){const s=to(h,l);if(!s)return null;const i=s.formatter,c=ao(t,s);let g=c;if(i){let p;const{fullAllDataRowIdData:v}=f,E=Oe(h,t),O=s.id,S=v[E];if(S&&(p=S.formatData,p||(p=v[E].formatData={}),S&&p[O]&&p[O].value===c))return p[O].label;const q={cellValue:c,row:t,rowIndex:b.getRowIndex(t),column:s,columnIndex:b.getColumnIndex(s)};if(r.isString(i)){const D=ni.get(i),K=D?D.tableCellFormatMethod||D.cellFormatMethod:null;g=K?K(q):""}else if(r.isArray(i)){const D=ni.get(i[0]),K=D?D.tableCellFormatMethod||D.cellFormatMethod:null;g=K?K(q,...i.slice(1)):""}else g=i(q);p&&(p[O]={value:c,label:g})}return g},isInsertByRow(t){const{editStore:l}=d,s=Oe(h,t);return!!l.insertMaps[s]},removeInsertRow(){const{editStore:t}=d;return t.insertMaps={},h.remove(h.getInsertRecords())},isUpdateByRow(t,l){const{keepSource:s}=e,{tableFullColumn:i,fullDataRowIdData:c,sourceDataRowIdData:g}=f;if(s){const p=Oe(h,t);if(!c[p])return!1;const v=g[p];if(v){if(arguments.length>1)return!Lt(v,t,l);for(let E=0,O=i.length;E<O;E++){const S=i[E].field;if(S&&!Lt(v,t,S))return!0}}}return!1},getColumns(t){const l=f.visibleColumn;return r.isUndefined(t)?l.slice(0):l[t]},getColid(t){const l=to(h,t);return l?l.id:null},getColumnById(t){const l=f.fullColumnIdData;return t&&l[t]?l[t].column:null},getColumnByField(t){const l=f.fullColumnFieldData;return t&&l[t]?l[t].column:null},getParentColumn(t){const l=f.fullColumnIdData,s=to(h,t);return s&&s.parentId&&l[s.parentId]?l[s.parentId].column:null},getTableColumn(){return{collectColumn:f.collectColumn.slice(0),fullColumn:f.tableFullColumn.slice(0),visibleColumn:f.visibleColumn.slice(0),tableColumn:d.tableColumn.slice(0)}},getFullColumns(){const{collectColumn:t}=f;return t.slice(0)},getData(t){const l=e.data||f.tableSynchData;return r.isUndefined(t)?l.slice(0):l[t]},getCheckboxRecords(t){const{treeConfig:l}=e,{tableFullData:s,afterFullData:i,afterTreeFullData:c,tableFullTreeData:g,fullDataRowIdData:p,afterFullRowMaps:v}=f,E=et.value,O=ge.value,{transform:S,mapChildrenField:q}=E,{checkField:D}=O,K=E.children||E.childrenField;let U=[];const V=t?S?g:s:S?c:i;if(D)l?U=r.filterTree(V,G=>r.get(G,D),{children:S?q:K}):U=V.filter(G=>r.get(G,D));else{const{selectCheckboxMaps:G}=d;r.each(G,(De,z)=>{t?p[z]&&U.push(p[z].row):v[z]&&U.push(v[z])})}return U},getTreeRowChildren(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=f,i=et.value,{transform:c,mapChildrenField:g}=i,p=i.children||i.childrenField;if(t&&l){let v;if(r.isString(t)?v=t:v=Oe(h,t),v){const E=s[v],O=E?E.row:null;if(O)return O[c?g:p]||[]}}return[]},getTreeParentRow(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=f;if(t&&l){let i;if(r.isString(t)?i=t:i=Oe(h,t),i){const c=s[i];return c?c.parent:null}}return null},getParentRow(t){return fs("vxe.error.delFunc",["getParentRow","getTreeParentRow"]),h.getTreeParentRow(t)},getRowById(t){const{fullDataRowIdData:l}=f,s=r.eqNull(t)?"":encodeURIComponent(t||"");return l[s]?l[s].row:null},getRowid(t){return Oe(h,t)},getTableData(){const{tableData:t,footerTableData:l}=d,{tableFullData:s,afterFullData:i,tableFullTreeData:c}=f;return{fullData:e.treeConfig?c.slice(0):s.slice(0),visibleData:i.slice(0),tableData:t.slice(0),footerData:l.slice(0)}},getFullData(){const{treeConfig:t}=e,{tableFullData:l,tableFullTreeData:s}=f;if(t){const i=et.value,{transform:c,mapChildrenField:g}=i,p=i.children||i.childrenField;return c?r.toArrayTree(r.toTreeArray(s,{children:g}),{children:p}):s.slice(0)}return l.slice(0)},setColumnFixed(t,l){let s=!1;const i=r.isArray(t)?t:[t],c=Ve.value,g=It.value;for(let p=0;p<i.length;p++){const v=i[p],E=to(h,v),O=zr(h,E);if(O&&O.fixed!==l){if(!O.fixed&&g)return te.modal&&te.modal.message({status:"error",content:Sl("vxe.table.maxFixedCol",[c.maxFixedSize])}),ae();r.eachTree([O],S=>{S.fixed=l}),j.saveCustomStore("update:fixed"),s||(s=!0)}}return s?b.refreshColumn():ae()},clearColumnFixed(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=to(h,i),g=zr(h,c);g&&g.fixed&&(r.eachTree([g],p=>{p.fixed=null}),j.saveCustomStore("update:fixed"),l||(l=!0))}),l?b.refreshColumn():ae()},hideColumn(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=to(h,i);c&&c.visible&&(c.visible=!1,l||(l=!0))}),l?j.handleCustom():ae()},showColumn(t){let l=!1;return(r.isArray(t)?t:[t]).forEach(i=>{const c=to(h,i);c&&!c.visible&&(c.visible=!0,l||(l=!0))}),l?j.handleCustom():ae()},setColumnWidth(t,l){let s=!1;return(r.isArray(t)?t:[t]).forEach(c=>{const g=to(h,c);if(g){const p=r.toInteger(l);let v=p;if(Bn(l)){const E=C.value,O=E?E.$el:null,S=O?O.clientWidth-1:0;v=Math.floor(p*S)}g.resizeWidth=v,s||(s=!0)}}),s?b.refreshColumn():ae()},getColumnWidth(t){const l=to(h,t);return l?l.renderWidth:0},resetColumn(t){return fs("vxe.error.delFunc",["resetColumn","resetCustom"]),h.resetCustom(t)},refreshColumn(t){return t&&Or(),Ms(!0).then(()=>b.refreshScroll()).then(()=>b.recalculate())},refreshScroll(){const{lastScrollLeft:t,lastScrollTop:l}=f,s=C.value,i=R.value,c=_.value,g=Z.value,p=s?s.$el:null,v=c?c.$el:null,E=g?g.$el:null,O=i?i.$el:null;return new Promise(S=>{if(t||l)return qs(h,t,l).then().then(()=>{setTimeout(S,30)});Kt(p,l),Kt(v,l),Kt(E,l),no(O,t),setTimeout(S,30)})},recalculate(t){return new Promise(l=>{const{rceTimeout:s,reRunTime:i}=f,g=Ze.value.refreshDelay||20,p=A.value;p&&p.clientWidth&&Cn(),s?(clearTimeout(s),i&&i+(g-5)<Date.now()?l(Ts(!!t)):ae(()=>{l()})):l(Ts(!!t)),f.rceTimeout=setTimeout(()=>{f.rceTimeout=void 0,Ts(!!t)},g)})},openTooltip(t,l){const s=$.value;return s&&s.open?s.open(t,l):ae()},closeTooltip(){const{tooltipStore:t}=d,l=Q.value,s=$.value;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:{}}),l&&l.close&&l.close()),s&&s.close&&s.close(),ae()},isAllCheckboxChecked(){return d.isAllSelected},isAllCheckboxIndeterminate(){return!d.isAllSelected&&d.isIndeterminate},getCheckboxIndeterminateRecords(t){const{treeConfig:l}=e,{fullDataRowIdData:s}=f,{treeIndeterminateMaps:i}=d;if(l){const c=[],g=[];return r.each(i,(p,v)=>{p&&(c.push(p),s[v]&&g.push(p))}),t?c:g}return[]},setCheckboxRow(t,l){return t&&!r.isArray(t)&&(t=[t]),ul(t,l,!0)},setCheckboxRowKey(t,l){const{fullAllDataRowIdData:s}=f;r.isArray(t)||(t=[t]);const i=[];return t.forEach(c=>{const g=s[c];g&&i.push(g.row)}),ul(i,l,!0)},isCheckedByCheckboxRow(t){const{selectCheckboxMaps:l}=d,s=ge.value,{checkField:i}=s;return i?r.get(t,i):!!l[Oe(h,t)]},isCheckedByCheckboxRowKey(t){const{selectCheckboxMaps:l}=d,{fullAllDataRowIdData:s}=f,i=ge.value,{checkField:c}=i;if(c){const g=s[t];return g?r.get(g.row,c):!1}return!!l[t]},isIndeterminateByCheckboxRow(t){const{treeIndeterminateMaps:l}=d;return!!l[Oe(h,t)]&&!h.isCheckedByCheckboxRow(t)},isIndeterminateByCheckboxRowKey(t){const{treeIndeterminateMaps:l}=d;return!!l[t]&&!h.isCheckedByCheckboxRowKey(t)},toggleCheckboxRow(t){const{selectCheckboxMaps:l}=d,s=ge.value,{checkField:i}=s,c=i?!r.get(t,i):!l[Oe(h,t)];return j.handleBatchSelectRows([t],c,!0),j.checkSelectionStatus(),ae()},setAllCheckboxRow(t){return Vo(t,!0)},getRadioReserveRecord(t){const{treeConfig:l}=e,{fullDataRowIdData:s,radioReserveRow:i,afterFullData:c}=f,g=He.value,p=et.value,v=p.children||p.childrenField;if(g.reserve&&i){const E=Oe(h,i);if(t){if(!s[E])return i}else{const O=vl(h);if(l){if(r.findTree(c,q=>E===r.get(q,O),{children:v}))return i}else if(!c.some(S=>E===r.get(S,O)))return i}}return null},clearRadioReserve(){return f.radioReserveRow=null,ae()},getCheckboxReserveRecords(t){const{treeConfig:l}=e,{afterFullData:s,fullDataRowIdData:i,checkboxReserveRowMap:c}=f,g=ge.value,p=et.value,v=p.children||p.childrenField,E=[];if(g.reserve){const O={};l?r.eachTree(s,S=>{O[Oe(h,S)]=1},{children:v}):s.forEach(S=>{O[Oe(h,S)]=1}),r.each(c,(S,q)=>{S&&(t?i[q]||E.push(S):O[q]||E.push(S))})}return E},clearCheckboxReserve(){return f.checkboxReserveRowMap={},ae()},toggleAllCheckboxRow(){return Mr(null,!d.isAllSelected),ae()},clearCheckboxRow(){const{treeConfig:t}=e,{tableFullData:l}=f,s=et.value,i=s.children||s.childrenField,c=ge.value,{checkField:g,reserve:p}=c,v=c.indeterminateField||c.halfField;if(g){const E=O=>{t&&v&&r.set(O,v,!1),r.set(O,g,!1)};t?r.eachTree(l,E,{children:i}):l.forEach(E)}return p&&l.forEach(E=>dl(E,!1)),d.isAllSelected=!1,d.isIndeterminate=!1,d.selectCheckboxMaps={},d.treeIndeterminateMaps={},ae()},setCurrentRow(t){const l=Ee.value,s=A.value;return b.clearCurrentRow(),d.currentRow=t,(l.isCurrent||e.highlightCurrentRow)&&s&&r.arrayEach(s.querySelectorAll(`[rowid="${Oe(h,t)}"]`),i=>tl(i,"row--current")),ae()},isCheckedByRadioRow(t){const{selectRadioRow:l}=d;return t&&l?h.eqRow(l,t):!1},isCheckedByRadioRowKey(t){const{selectRadioRow:l}=d;return l?t===Oe(h,l):!1},setRadioRow(t){return Bo(t,!0)},setRadioRowKey(t){const{fullAllDataRowIdData:l}=f,s=l[t];return s?Bo(s.row,!0):ae()},clearCurrentRow(){const t=A.value;return d.currentRow=null,f.hoverRow=null,t&&r.arrayEach(t.querySelectorAll(".row--current"),l=>Ao(l,"row--current")),ae()},clearRadioRow(){return d.selectRadioRow=null,ae()},getCurrentRecord(){return Ee.value.isCurrent||e.highlightCurrentRow?d.currentRow:null},getRadioRecord(t){const{fullDataRowIdData:l,afterFullRowMaps:s}=f,{selectRadioRow:i}=d;if(i){const c=Oe(h,i);if(t){if(l[c])return i}else if(s[c])return i}return null},getCurrentColumn(){return Ve.value.isCurrent||e.highlightCurrentColumn?d.currentColumn:null},setCurrentColumn(t){const l=to(h,t);return l&&(b.clearCurrentColumn(),d.currentColumn=l),ae()},clearCurrentColumn(){return d.currentColumn=null,ae()},setPendingRow(t,l){const s=Object.assign({},d.pendingRowMaps);return t&&!r.isArray(t)&&(t=[t]),l?t.forEach(i=>{const c=Oe(h,i);c&&!s[c]&&(s[c]=i)}):t.forEach(i=>{const c=Oe(h,i);c&&s[c]&&delete s[c]}),d.pendingRowMaps=s,ae()},togglePendingRow(t){const l=Object.assign({},d.pendingRowMaps);return t&&!r.isArray(t)&&(t=[t]),t.forEach(s=>{const i=Oe(h,s);i&&(l[i]?delete l[i]:l[i]=s)}),d.pendingRowMaps=l,ae()},hasPendingByRow(t){return b.isPendingByRow(t)},isPendingByRow(t){const{pendingRowMaps:l}=d,s=Oe(h,t);return!!l[s]},getPendingRecords(){const{pendingRowMaps:t}=d,{fullAllDataRowIdData:l}=f,s=[];return r.each(t,(i,c)=>{l[c]&&s.push(i)}),s},clearPendingRow(){return d.pendingRowMaps={},ae()},sort(t,l){const s=Ke.value,{multiple:i,remote:c,orders:g}=s;return t&&r.isString(t)&&(t=[{field:t,order:l}]),r.isArray(t)||(t=[t]),t.length?(i||Kl(),(i?t:[t[0]]).forEach((p,v)=>{let{field:E,order:O}=p,S=E;r.isString(E)&&(S=b.getColumnByField(E)),S&&S.sortable&&(g.indexOf(O)===-1&&(O=Zt(S)),S.order!==O&&(S.order=O),S.sortTime=Date.now()+v)}),c||j.handleTableData(!0),ae().then(()=>(b.updateCellAreas(),io()))):ae()},setSort(t,l){const s=Ke.value,{multiple:i,remote:c,orders:g}=s;if(r.isArray(t)||(t=[t]),t&&t.length){i||(t=[t[0]],Kl());let p=null;return t.forEach((v,E)=>{let{field:O,order:S}=v,q=O;r.isString(O)&&(q=b.getColumnByField(O)),p||(p=q),q&&q.sortable&&(g.indexOf(S)===-1&&(S=Zt(q)),q.order!==S&&(q.order=S),q.sortTime=Date.now()+E)}),l&&(c||j.handleTableData(!0),h.handleColumnSortEvent(new Event("click"),p)),ae().then(()=>(b.updateCellAreas(),io()))}return ae()},clearSort(t){const l=Ke.value;if(t){const s=to(h,t);s&&(s.order=null)}else Kl();return l.remote||j.handleTableData(!0),ae().then(io)},isSort(t){if(t){const l=to(h,t);return l?l.sortable&&!!l.order:!1}return b.getSortColumns().length>0},getSortColumns(){const t=Ke.value,{multiple:l,chronological:s}=t,i=[],{tableFullColumn:c}=f;return c.forEach(g=>{const{field:p,order:v}=g;g.sortable&&v&&i.push({column:g,field:p,property:p,order:v,sortTime:g.sortTime})}),l&&s&&i.length>1?r.orderBy(i,"sortTime"):i},closeFilter(){const{filterStore:t}=d,{column:l,visible:s}=t;return Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),s&&Rt("filter-visible",{column:l,property:l.field,field:l.field,filterList:h.getCheckedFilters(),visible:!1},null),ae()},isActiveFilterByColumn(t){const l=to(h,t);return l?l.filters&&l.filters.some(s=>s.checked):h.getCheckedFilters().length>0},isFilter(t){return b.isActiveFilterByColumn(t)},isRowExpandLoaded(t){const{fullAllDataRowIdData:l}=f,s=l[Oe(h,t)];return s&&!!s.expandLoaded},clearRowExpandLoaded(t){const{rowExpandLazyLoadedMaps:l}=d,{fullAllDataRowIdData:s}=f,i=st.value,{lazy:c}=i,g=Oe(h,t),p=s[g];return c&&p&&(p.expandLoaded=!1,delete l[g]),ae()},reloadRowExpand(t){const{rowExpandLazyLoadedMaps:l}=d,s=st.value,{lazy:i}=s,c=Oe(h,t);return i&&!l[c]&&b.clearRowExpandLoaded(t).then(()=>Gl(t)),ae()},reloadExpandContent(t){return b.reloadRowExpand(t)},toggleRowExpand(t){return b.setRowExpand(t,!b.isRowExpandByRow(t))},setAllRowExpand(t){const l=et.value,{tableFullData:s,tableFullTreeData:i}=f,c=l.children||l.childrenField;let g=[];return e.treeConfig?r.eachTree(i,p=>{g.push(p)},{children:c}):g=s,b.setRowExpand(g,t)},setRowExpand(t,l){const{rowExpandedMaps:s,rowExpandLazyLoadedMaps:i,expandColumn:c}=d,{fullAllDataRowIdData:g}=f;let p=Object.assign({},s);const v=st.value,{reserve:E,lazy:O,accordion:S,toggleMethod:q}=v,D=[],K=b.getColumnIndex(c),U=b.getVMColumnIndex(c);if(t){r.isArray(t)||(t=[t]),S&&(p={},t=t.slice(t.length-1,t.length));const V=q?t.filter(G=>q({$table:h,expanded:l,column:c,columnIndex:K,$columnIndex:U,row:G,rowIndex:b.getRowIndex(G),$rowIndex:b.getVMRowIndex(G)})):t;l?V.forEach(G=>{const De=Oe(h,G);if(!p[De]){const z=g[De];O&&!z.expandLoaded&&!i[De]?D.push(Gl(G)):p[De]=G}}):V.forEach(G=>{const De=Oe(h,G);p[De]&&delete p[De]}),E&&V.forEach(G=>_n(G,l))}return d.rowExpandedMaps=p,Promise.all(D).then(()=>b.recalculate())},isRowExpandByRow(t){const{rowExpandedMaps:l}=d,s=Oe(h,t);return!!l[s]},isExpandByRow(t){return b.isRowExpandByRow(t)},clearRowExpand(){const{tableFullData:t}=f,l=st.value,{reserve:s}=l,i=b.getRowExpandRecords();return d.rowExpandedMaps={},s&&t.forEach(c=>_n(c,!1)),ae().then(()=>{i.length&&b.recalculate()})},clearRowExpandReserve(){return f.rowExpandedReserveRowMap={},ae()},getRowExpandRecords(){const t=[];return r.each(d.rowExpandedMaps,l=>{l&&t.push(l)}),t},getTreeExpandRecords(){const t=[];return r.each(d.treeExpandedMaps,l=>{l&&t.push(l)}),t},isTreeExpandLoaded(t){const{fullAllDataRowIdData:l}=f,s=l[Oe(h,t)];return s&&!!s.treeLoaded},clearTreeExpandLoaded(t){const{treeExpandedMaps:l}=d,{fullAllDataRowIdData:s}=f,i=et.value,{transform:c}=i;return t&&(r.isArray(t)||(t=[t]),t.forEach(g=>{const p=Oe(h,g),v=s[p];v&&(v.treeLoaded=!1,l[p]&&delete l[p])})),c?(rl(),j.handleTableData()):ae()},reloadTreeExpand(t){const{treeExpandLazyLoadedMaps:l}=d,s=et.value,i=s.hasChild||s.hasChildField,{transform:c,lazy:g}=s,p=Oe(h,t);return g&&t[i]&&!l[p]?b.clearTreeExpandLoaded(t).then(()=>En(t)).then(()=>{if(c)return rl(),j.handleTableData()}).then(()=>b.recalculate()):ae()},reloadTreeChilds(t){return b.reloadTreeExpand(t)},toggleTreeExpand(t){return b.setTreeExpand(t,!b.isTreeExpandByRow(t))},setAllTreeExpand(t){const{tableFullData:l}=f,s=et.value,{transform:i,lazy:c}=s,g=s.children||s.childrenField,p=[];return r.eachTree(l,v=>{const E=v[g];(c||E&&E.length)&&p.push(v)},{children:g}),b.setTreeExpand(p,t).then(()=>{if(i)return rl(),b.recalculate()})},setTreeExpand(t,l){const s=et.value,{transform:i}=s;return t&&(r.isArray(t)||(t=[t]),t.length)?i?wa(t,l):Tr(t,l):ae()},isTreeExpandByRow(t){const{treeExpandedMaps:l}=d;return!!l[Oe(h,t)]},clearTreeExpand(){const{tableFullTreeData:t}=f,l=et.value,s=l.children||l.childrenField,{transform:i,reserve:c}=l,g=b.getTreeExpandRecords();return d.treeExpandedMaps={},c&&r.eachTree(t,p=>yl(p,!1),{children:s}),j.handleTableData().then(()=>{if(i)return rl(),j.handleTableData()}).then(()=>{if(g.length)return b.recalculate()})},clearTreeExpandReserve(){return f.treeExpandedReserveRowMap={},ae()},getScroll(){const{scrollXLoad:t,scrollYLoad:l}=d,i=C.value.$el;return{virtualX:t,virtualY:l,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}},scrollTo(t,l){const s=C.value,i=w.value,c=R.value,g=_.value,p=Z.value,v=s?s.$el:null,E=g?g.$el:null,O=p?p.$el:null,S=i?i.$el:null,q=c?c.$el:null;if(f.intoRunScroll=!0,r.isNumber(t)){const D=oe.value;D?no(D,t):(no(v,t),no(S,t),no(q,t))}if(r.isNumber(l)){const D=me.value;D?Kt(D,l):(Kt(v,l),Kt(E,l),Kt(O,l))}return d.scrollXLoad||d.scrollYLoad?new Promise(D=>{setTimeout(()=>{ae(()=>{f.intoRunScroll=!1,D()})},30)}):ae()},scrollToRow(t,l){const s=[];return t&&(e.treeConfig?s.push(j.scrollToTreeRow(t)):s.push(qr(h,t))),l&&s.push(Ta(l,t)),Promise.all(s)},scrollToColumn(t){const{fullColumnIdData:l}=f,s=to(h,t);return s&&l[s.id]?Xr(h,s):ae()},clearScroll(){const{scrollXStore:t,scrollYStore:l}=f,s=C.value,i=w.value,c=R.value,g=_.value,p=Z.value,v=g?g.$el:null,E=s?s.$el:null,O=p?p.$el:null,S=i?i.$el:null,q=c?c.$el:null,D=oe.value;D?no(D,0):(no(E,0),no(S,0),no(q,0));const K=me.value;return K?Kt(K,0):(Kt(E,0),Kt(v,0),Kt(O,0)),t.startIndex=0,t.endIndex=t.visibleSize,l.startIndex=0,l.endIndex=l.visibleSize,ae().then(()=>{no(E,0),no(S,0),no(q,0),Kt(E,0),Kt(v,0),Kt(O,0)})},updateFooter(){const{showFooter:t,footerData:l,footerMethod:s}=e,{visibleColumn:i,afterFullData:c}=f;let g=[];return t&&l&&l.length?g=l.slice(0):t&&s&&(g=i.length?s({columns:i,data:c,$table:h,$grid:Ce}):[]),d.footerTableData=g,ae()},updateStatus(t,l){const s=!r.isUndefined(l);return ae().then(()=>{const{editRules:i}=e,{validStore:c}=d,g=C.value;if(t&&g&&i){const{row:p,column:v}=t,E="change";if(h.hasCellRules&&h.hasCellRules(E,p,v)){const O=b.getCellElement(p,v);if(O)return h.validCellRules(E,p,v,l).then(()=>{s&&c.visible&&ol(p,v,l),h.clearValidate(p,v)}).catch(({rule:S})=>{s&&ol(p,v,l),h.showValidTooltip({rule:S,row:p,column:v,cell:O})})}}})},setMergeCells(t){return e.spanMethod&&Gt("vxe.error.errConflicts",["merge-cells","span-method"]),nl(t,d.mergeList,f.afterFullData),ae().then(()=>(b.updateCellAreas(),io()))},removeMergeCells(t){e.spanMethod&&Gt("vxe.error.errConflicts",["merge-cells","span-method"]);const l=xl(t,d.mergeList,f.afterFullData);return ae().then(()=>(b.updateCellAreas(),io(),l))},getMergeCells(){return d.mergeList.slice(0)},clearMergeCells(){return d.mergeList=[],ae().then(()=>io())},setMergeFooterItems(t){return e.footerSpanMethod&&Gt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),nl(t,d.mergeFooterList),ae().then(()=>(b.updateCellAreas(),io()))},removeMergeFooterItems(t){e.footerSpanMethod&&Gt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);const l=xl(t,d.mergeFooterList);return ae().then(()=>(b.updateCellAreas(),io(),l))},getMergeFooterItems(){return d.mergeFooterList.slice(0)},clearMergeFooterItems(){return d.mergeFooterList=[],ae().then(()=>io())},updateCellAreas(){const{mouseConfig:t}=e,l=lt.value;return t&&l.area&&h.handleRecalculateCellAreas?h.handleRecalculateCellAreas():ae()},getCustomStoreData(){const{id:t}=e,l=Dt.value,{collectColumn:s}=f,{checkMethod:i}=l,c={},g={},p={},v={},E={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};if(!t)return Gt("vxe.error.reqProp",["id"]),E;let O=0,S=0,q=0,D=0;return r.eachTree(s,(K,U,V,G,De)=>{if(!De&&(s.forEach(z=>{const Re=z.getKey();Re&&(S=1,g[Re]=z.renderSortNumber)}),K.fixed!==K.defaultFixed)){const z=K.getKey();z&&(q=1,v[z]=K.fixed)}if(K.resizeWidth){const z=K.getKey();z&&(O=1,c[z]=K.renderWidth)}if(!i||i({column:K})){if(!K.visible&&K.defaultVisible){const z=K.getKey();z&&(D=1,p[z]=!1)}else if(K.visible&&!K.defaultVisible){const z=K.getKey();z&&(D=1,p[z]=!0)}}}),O&&(E.resizableData=c),S&&(E.sortData=g),q&&(E.fixedData=v),D&&(E.visibleData=p),E},focus(){return f.isActivated=!0,ae()},blur(){return f.isActivated=!1,ae()},connect(t){return t?(re=t,re.syncUpdate({collectColumn:f.collectColumn,$table:h})):Gt("vxe.error.barUnableLink"),ae()}};const Ma=t=>{const{editStore:l,ctxMenuStore:s,filterStore:i,customStore:c}=d,{mouseConfig:g,editRules:p}=e,v=A.value,E=Ie.value,O=X.value,S=B.value,{actived:q}=l,D=L.value,K=F.value,U=T.value,V=M.value;if(K&&(bt(t,v,"vxe-cell--filter").flag||bt(t,K.$el).flag||bt(t,document.body,"vxe-table--ignore-clear").flag||j.preventEvent(t,"event.clearFilter",i.args,b.closeFilter)),U&&(c.btnEl===t.target||bt(t,document.body,"vxe-toolbar-custom-target").flag||bt(t,U.$el).flag||bt(t,document.body,"vxe-table--ignore-clear").flag||j.preventEvent(t,"event.clearCustom",{},()=>{h.closeCustom&&h.closeCustom()})),q.row){if(E.autoClear!==!1){const De=q.args.cell;(!De||!bt(t,De).flag)&&(D&&bt(t,D.$el).flag||(!f._lastCallTime||f._lastCallTime+50<Date.now())&&(bt(t,document.body,"vxe-table--ignore-clear").flag||j.preventEvent(t,"event.clearEdit",q.args,()=>{let z;if(E.mode==="row"){const Re=bt(t,v,"vxe-body--row"),Pe=Re.flag?b.getRowNode(Re.targetElem):null;z=Pe?!h.eqRow(Pe.item,q.args.row):!1}else z=!bt(t,v,"col--edit").flag;if(z||(z=bt(t,v,"vxe-header--row").flag),z||(z=bt(t,v,"vxe-footer--row").flag),!z&&e.height&&!d.overflowY){const Re=t.target;Wl(Re,"vxe-table--body-wrapper")&&(z=t.offsetY<Re.clientHeight)}(z||!bt(t,v).flag)&&setTimeout(()=>{h.handleClearEdit(t).then(()=>{!f.isActivated&&p&&O.autoClear&&(d.validErrorMaps={})})})})))}}else if(g&&!bt(t,v).flag&&!(Ce&&bt(t,Ce.getRefMaps().refElem.value).flag)&&!(V&&bt(t,V.getRefMaps().refElem.value).flag)&&!(re&&bt(t,re.getRefMaps().refElem.value).flag)&&(h.clearSelected&&h.clearSelected(),S.autoClear&&h.getCellAreas)){const De=h.getCellAreas();De&&De.length&&!bt(t,document.body,"vxe-table--ignore-areas-clear").flag&&j.preventEvent(t,"event.clearAreas",{},()=>{h.clearCellAreas(),h.clearCopyCellArea(),Rt("clear-cell-area-selection",{cellAreas:De},t)})}h.closeMenu&&s.visible&&V&&!bt(t,V.getRefMaps().refElem.value).flag&&h.closeMenu();const G=bt(t,Ce?Ce.getRefMaps().refElem.value:v).flag;!G&&p&&O.autoClear&&(d.validErrorMaps={}),f.isActivated=G},Da=()=>{b.closeFilter(),h.closeMenu&&h.closeMenu()},Ia=()=>{b.closeTooltip(),h.closeMenu&&h.closeMenu()},Fa=t=>{const{mouseConfig:l,keyboardConfig:s}=e,{filterStore:i,ctxMenuStore:c,editStore:g}=d,p=lt.value,v=le.value,{actived:E}=g;Mt.hasKey(t,Io.ESCAPE)&&j.preventEvent(t,"event.keydown",null,()=>{if(Rt("keydown-start",{},t),s&&l&&p.area&&h.handleKeyboardCellAreaEvent)h.handleKeyboardCellAreaEvent(t);else if((E.row||i.visible||c.visible)&&(t.stopPropagation(),h.closeMenu&&h.closeMenu(),b.closeFilter(),s&&v.isEsc&&E.row)){const S=E.args;h.handleClearEdit(t),p.selected&&ae(()=>h.handleSelected(S,t))}Rt("keydown",{},t),Rt("keydown-end",{},t)})},ka=t=>{f.isActivated&&j.preventEvent(t,"event.keydown",null,()=>{const{mouseConfig:l,keyboardConfig:s,treeConfig:i,editConfig:c,highlightCurrentRow:g}=e,{ctxMenuStore:p,editStore:v,currentRow:E}=d,{afterFullData:O}=f,S=ft.value,q=Ye.value,D=le.value,K=lt.value,U=Ie.value,V=et.value,G=Et.value,De=Ee.value,{selected:z,actived:Re}=v,Pe=V.children||V.childrenField,Ue=t.keyCode,Xe=Mt.hasKey(t,Io.ESCAPE),ut=Mt.hasKey(t,Io.BACKSPACE),it=Mt.hasKey(t,Io.TAB),at=Mt.hasKey(t,Io.ENTER),ot=Mt.hasKey(t,Io.SPACEBAR),pt=Mt.hasKey(t,Io.ARROW_LEFT),tt=Mt.hasKey(t,Io.ARROW_UP),rt=Mt.hasKey(t,Io.ARROW_RIGHT),Bt=Mt.hasKey(t,Io.ARROW_DOWN),Xo=Mt.hasKey(t,Io.DELETE),So=Mt.hasKey(t,Io.F2),fl=Mt.hasKey(t,Io.CONTEXT_MENU),To=t.metaKey,pl=t.ctrlKey,yo=t.shiftKey,Jt=t.altKey,mo=pt||tt||rt||Bt,Co=S&&p.visible&&(at||ot||mo),hl=ct(c)&&Re.column&&Re.row,Ko=U.beforeEditMethod||U.activeMethod;if(Co)t.preventDefault(),p.showChild&&cn(p.selected)?h.moveCtxMenu(t,p,"selectChild",pt,!1,p.selected.children):h.moveCtxMenu(t,p,"selected",rt,!0,G);else if(s&&l&&K.area&&h.handleKeyboardCellAreaEvent)h.handleKeyboardCellAreaEvent(t);else if(Xe){if(h.closeMenu&&h.closeMenu(),b.closeFilter(),s&&D.isEsc&&Re.row){const Ht=Re.args;h.handleClearEdit(t),K.selected&&ae(()=>h.handleSelected(Ht,t))}}else if(ot&&s&&D.isChecked&&z.row&&z.column&&(z.column.type==="checkbox"||z.column.type==="radio"))t.preventDefault(),z.column.type==="checkbox"?j.handleToggleCheckRowEvent(t,z.args):j.triggerRadioRowEvent(t,z.args);else if(So&&ct(c))hl||z.row&&z.column&&(t.preventDefault(),h.handleEdit(z.args,t));else if(fl)f._keyCtx=z.row&&z.column&&q.length,clearTimeout(Dr),Dr=setTimeout(()=>{f._keyCtx=!1},1e3);else if(at&&!Jt&&s&&D.isEnter&&(z.row||Re.row||i&&(De.isCurrent||g)&&E)){const{isLastEnterAppendRow:Ht,beforeEnterMethod:Wt,enterMethod:zt}=D;if(pl){if(Re.row){const Pt=Re.args;h.handleClearEdit(t),K.selected&&ae(()=>{h.handleSelected(Pt,t)})}}else if(z.row||Re.row){const Pt=z.row?z.args:Re.args;if(yo)D.enterToTab?h.moveTabSelected(Pt,yo,t):h.moveSelected(Pt,pt,!0,rt,!1,t);else if(D.enterToTab)h.moveTabSelected(Pt,yo,t);else{const uo=z.row||Re.row,Ro=z.column||Re.column,fo=h.getVTRowIndex(uo),Xt={row:uo,rowIndex:h.getRowIndex(uo),$rowIndex:h.getVMRowIndex(uo),_rowIndex:fo,column:Ro,columnIndex:h.getColumnIndex(Ro),$columnIndex:h.getVMColumnIndex(Ro),_columnIndex:h.getVTColumnIndex(Ro),$table:h};if(!Wt||Wt(Xt)!==!1){if(Ht&&fo>=O.length-1){h.insertAt({},-1).then(({row:Mo})=>{h.scrollToRow(Mo,Ro),h.handleSelected(Object.assign(Object.assign({},Pt),{row:Mo}),t)}),h.dispatchEvent("enter-append-row",Xt,t);return}h.moveSelected(Pt,pt,!1,rt,!0,t),zt&&zt(Xt)}}}else if(i&&(De.isCurrent||g)&&E){const Pt=E[Pe];if(Pt&&Pt.length){t.preventDefault();const uo=Pt[0],Ro={$table:h,row:uo,rowIndex:b.getRowIndex(uo),$rowIndex:b.getVMRowIndex(uo)};b.setTreeExpand(E,!0).then(()=>b.scrollToRow(uo)).then(()=>j.triggerCurrentRowEvent(t,Ro))}}}else if(mo&&s&&D.isArrow)hl||(z.row&&z.column?h.moveSelected(z.args,pt,tt,rt,Bt,t):(tt||Bt)&&(De.isCurrent||g)&&h.moveCurrentRow(tt,Bt,t));else if(it&&s&&D.isTab)z.row||z.column?h.moveTabSelected(z.args,yo,t):(Re.row||Re.column)&&h.moveTabSelected(Re.args,yo,t);else if(s&&D.isDel&&Xo&&ct(c)&&(z.row||z.column)){if(!hl){const{delMethod:Ht}=D,Wt={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!Ko||Ko(Wt))&&(Ht?Ht(Wt):ol(z.row,z.column,null),b.updateFooter(),Rt("cell-delete-value",Wt,t))}}else if(ut&&s&&D.isBack&&ct(c)&&(z.row||z.column)){if(!hl){const{backMethod:Ht}=D;if(D.isDel&&ct(c)&&(z.row||z.column)){const Wt={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!Ko||Ko(Wt))&&(Ht?Ht(Wt):(ol(z.row,z.column,null),h.handleEdit(z.args,t)),Rt("cell-backspace-value",Wt,t))}}}else if(ut&&s&&i&&D.isBack&&(De.isCurrent||g)&&E){const{parent:Ht}=r.findTree(f.afterTreeFullData,Wt=>Wt===E,{children:Pe});if(Ht){t.preventDefault();const Wt={row:Ht,rowIndex:b.getRowIndex(Ht),$rowIndex:b.getVMRowIndex(Ht),$table:h,$grid:Ce};b.setTreeExpand(Ht,!1).then(()=>b.scrollToRow(Ht)).then(()=>j.triggerCurrentRowEvent(t,Wt))}}else if(s&&ct(c)&&D.isEdit&&!pl&&!To&&(ot||Ue>=48&&Ue<=57||Ue>=65&&Ue<=90||Ue>=96&&Ue<=111||Ue>=186&&Ue<=192||Ue>=219&&Ue<=222)){const{editMode:Ht,editMethod:Wt}=D;if(z.column&&z.row&&ct(z.column.editRender)){const zt=U.beforeEditMethod||U.activeMethod,Pt={row:z.row,rowIndex:b.getRowIndex(z.row),column:z.column,columnIndex:b.getColumnIndex(z.column),$table:h,$grid:Ce};(!zt||zt(Object.assign(Object.assign({},z.args),{$table:h,$grid:Ce})))&&(Wt?Wt(Pt):(Ht!=="insert"&&ol(z.row,z.column,null),h.handleEdit(z.args,t)))}}Rt("keydown",{},t)})},Aa=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=d,{isActivated:g}=f,p=lt.value,v=le.value,{actived:E}=i;g&&!c.visible&&(E.row||E.column||l&&v.isClip&&s&&p.area&&h.handlePasteCellAreaEvent&&h.handlePasteCellAreaEvent(t),Rt("paste",{},t))},La=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=d,{isActivated:g}=f,p=lt.value,v=le.value,{actived:E}=i;g&&!c.visible&&(E.row||E.column||l&&v.isClip&&s&&p.area&&h.handleCopyCellAreaEvent&&h.handleCopyCellAreaEvent(t),Rt("copy",{},t))},$a=t=>{const{keyboardConfig:l,mouseConfig:s}=e,{editStore:i,filterStore:c}=d,{isActivated:g}=f,p=lt.value,v=le.value,{actived:E}=i;g&&!c.visible&&(E.row||E.column||l&&v.isClip&&s&&p.area&&h.handleCutCellAreaEvent&&h.handleCutCellAreaEvent(t),Rt("cut",{},t))},Ir=()=>{h.closeMenu&&h.closeMenu();const t=A.value;if(!t||!t.clientWidth)return ae();b.recalculate(!0),b.updateCellAreas()},Un=t=>{const l=Q.value;clearTimeout(f.tooltipTimeout),t?b.closeTooltip():l&&l.setActived&&l.setActived(!0)},Fr=()=>{const{dragRow:t,dragCol:l}=d;(t||l)&&(Yn(),Fs(),Zl(),d.dragRow=null,d.dragCol=null,d.isDragColMove=!1,d.isDragRowMove=!1)},Fs=()=>{const t=A.value;if(t){const l="row--drag-origin";r.arrayEach(t.querySelectorAll(`.${l}`),s=>{s.draggable=!1,Ao(s,l)})}},Ba=t=>{const l=A.value;if(l){const s="row--drag-origin",i=Oe(h,t);r.arrayEach(l.querySelectorAll(`[rowid="${i}"]`),c=>{tl(c,s)})}},Ha=t=>{const{dragConfig:l}=e,{dragRow:s}=d,i=Me.value,{tooltipMethod:c}=i,g=c||(l?l.rowTooltipMethod:null);let p="";g?p=`${g({row:s})||""}`:p=Sl("vxe.table.dragTip",[t.textContent||""]),d.dragTipText=p},Pa=t=>{const l=A.value;if(l){const s=[];r.eachTree([t],c=>{s.push(`[colid="${c.id}"]`)});const i="col--drag-origin";r.arrayEach(l.querySelectorAll(s.join(",")),c=>{tl(c,i)})}},Yn=()=>{const t=A.value;if(t){const l="col--drag-origin";r.arrayEach(t.querySelectorAll(`.${l}`),s=>{s.draggable=!1,Ao(s,l)})}},Va=t=>{const{dragCol:l}=d,s=xe.value,{tooltipMethod:i}=s;let c="";i?c=`${i({column:l})||""}`:c=Sl("vxe.table.dragTip",[t.textContent||""]),d.dragTipText=c},Gn=(t,l,s,i,c)=>{const g=A.value;if(!g)return;const{scrollbarWidth:p,scrollbarHeight:v}=d,{prevDragToChild:E}=f,O=g.getBoundingClientRect(),S=g.clientWidth,q=g.clientHeight;if(l){const K=Y.value;if(K)if(i){const U=l.getBoundingClientRect();let V=l.clientHeight;const G=Math.max(1,U.y-O.y);G+V>q-v&&(V=q-G-v),K.style.display="block",K.style.top=`${G}px`,K.style.height=`${V}px`,K.style.width=`${S-p}px`,K.setAttribute("drag-pos",c),K.setAttribute("drag-to-child",E?"y":"n")}else K.style.display=""}else if(s){const K=H.value;if(K)if(i){const U=J.value,V=U?U.clientWidth:0,G=ee.value,De=G?G.clientWidth:0,z=s.getBoundingClientRect();let Re=s.clientWidth;const Pe=Math.max(0,z.y-O.y),Ue=V;let Xe=z.x-O.x;Xe<Ue&&(Re-=Ue-Xe,Xe=Ue);const ut=S-De-(De?0:p);Xe+Re>ut&&(Re=ut-Xe),K.style.display="block",K.style.top=`${Pe}px`,K.style.left=`${Xe}px`,K.style.width=`${Re}px`,E?K.style.height=`${z.height}px`:K.style.height=`${q-Pe-v}px`,K.setAttribute("drag-pos",c),K.setAttribute("drag-to-child",E?"y":"n")}else K.style.display=""}const D=Ae.value;D&&(D.style.display="block",D.style.top=`${Math.min(g.clientHeight-g.scrollTop-D.clientHeight,t.clientY-O.y)}px`,D.style.left=`${Math.min(g.clientWidth-g.scrollLeft-D.clientWidth-16,t.clientX-O.x)}px`,D.setAttribute("drag-status",i?E?"sub":"normal":"disabled"))},Zl=()=>{const t=Ae.value,l=Y.value,s=H.value;t&&(t.style.display=""),l&&(l.style.display=""),s&&(s.style.display="")},ks=(t,l,s,i,c)=>{c.cell=l;const{tooltipStore:g}=d,p=we.value,{column:v,row:E}=c,{showAll:O,contentMethod:S}=p,q=S?S(c):null,D=S&&!r.eqNull(q),K=D?q:r.toString(v.type==="html"?s.innerText:s.textContent).trim(),U=s.scrollWidth>s.clientWidth;return K&&(O||D||U)&&(Object.assign(g,{row:E,column:v,visible:!0,currOpts:{}}),ae(()=>{const V=Q.value;V&&V.open&&V.open(U?s:i||s,so(K))})),ae()},Rn=(t,l)=>{if(t){if(Ce)return Ce.callSlot(t,l);if(r.isFunction(t))return xo(t(l))}return[]};j={getSetupOptions(){return vt()},updateAfterDataIndex:Yl,callSlot:Rn,getParentElem(){const t=A.value;if(Ce){const l=Ce.getRefMaps().refElem.value;return l?l.parentNode:null}return t?t.parentNode:null},getParentHeight(){const{height:t}=e,l=A.value;if(l){const s=l.parentNode,i=t==="100%"||t==="auto"?ir(s):0;return Math.floor(Ce?Ce.getParentHeight():r.toNumber(getComputedStyle(s).height)-i)}return 0},getExcludeHeight(){return Ce?Ce.getExcludeHeight():0},defineField(t){const{treeConfig:l}=e,s=st.value,i=et.value,c=He.value,g=ge.value,p=i.children||i.childrenField,v=vl(h);return r.isArray(t)||(t=[t]),t.map(E=>(f.tableFullColumn.forEach(S=>{const{field:q,editRender:D}=S;if(q&&!r.has(E,q)&&!E[q]){let K=null;if(D){const{defaultValue:U}=D;r.isFunction(U)?K=U({column:S}):r.isUndefined(U)||(K=U)}r.set(E,q,K)}}),[c.labelField,g.checkField,g.labelField,s.labelField].forEach(S=>{S&&el(r.get(E,S))&&r.set(E,S,null)}),l&&i.lazy&&r.isUndefined(E[p])&&(E[p]=null),el(r.get(E,v))&&r.set(E,v,Xs()),E))},handleTableData(t){const{scrollYLoad:l}=d,{scrollYStore:s,fullDataRowIdData:i}=f;let c=f.afterFullData;t&&(El(),c=rl());const g=l?c.slice(s.startIndex,s.endIndex):c.slice(0);return g.forEach((p,v)=>{const E=Oe(h,p),O=i[E];O&&(O.$index=v)}),d.tableData=g,ae()},cacheRowMap(t){const{treeConfig:l}=e,s=et.value,{fullAllDataRowIdData:i,tableFullData:c,tableFullTreeData:g}=f,p=s.children||s.childrenField,v=s.hasChild||s.hasChildField,E=vl(h),O=l&&s.lazy,S={},q={},D=(K,U,V,G,De,z)=>{let Re=Oe(h,K);const Pe=l&&G?fd(G):U+1,Ue=z?z.length-1:0;el(Re)&&(Re=Xs(),r.set(K,E,Re)),O&&K[v]&&r.isUndefined(K[p])&&(K[p]=null);let Xe=i[Re];Xe||(Xe={row:K,rowid:Re,seq:Pe,index:-1,_index:-1,$index:-1,items:V,parent:De,level:Ue,height:0}),Xe.row=K,Xe.items=V,Xe.parent=De,Xe.level=Ue,Xe.index=l&&De?-1:U,t&&(q[Re]=Xe),S[Re]=Xe};t&&(f.fullDataRowIdData=q),f.fullAllDataRowIdData=S,l?r.eachTree(g,D,{children:p}):c.forEach(D)},cacheSourceMap(t){const{treeConfig:l}=e,s=et.value;let{sourceDataRowIdData:i}=f;const c=r.clone(t,!0),g=vl(h);i=f.sourceDataRowIdData={};const p=v=>{let E=Oe(h,v);el(E)&&(E=Xs(),r.set(v,g,E)),i[E]=v};if(l){const v=s.children||s.childrenField;r.eachTree(c,p,{children:s.transform?s.mapChildrenField:v})}else c.forEach(p);f.tableSourceData=c},analyColumnWidth(){const{tableFullColumn:t}=f,l=Ve.value,{width:s,minWidth:i}=l,c=[],g=[],p=[],v=[],E=[],O=[],S=[],q=[];t.forEach(D=>{s&&!D.width&&(D.width=s),i&&!D.minWidth&&(D.minWidth=i),D.visible&&(D.resizeWidth?c.push(D):D.width==="auto"?S.push(D):rr(D.width)?g.push(D):Bn(D.width)?E.push(D):rr(D.minWidth)?p.push(D):D.minWidth==="auto"?v.push(D):Bn(D.minWidth)?O.push(D):q.push(D))}),Object.assign(d.columnStore,{resizeList:c,pxList:g,pxMinList:p,autoMinList:v,scaleList:E,scaleMinList:O,autoList:S,remainList:q})},saveCustomStore(t){const{customConfig:l}=e,s=ve.value,i=Dt.value,{updateStore:c,storage:g}=i,p=g===!0,v=p?{}:Object.assign({},g||{}),E=p||v.resizable,O=p||v.visible,S=p||v.fixed,q=p||v.sort;if((l?ct(i):i.enabled)&&(E||O||S||q)){if(!s)return Gt("vxe.error.reqProp",["id"]),ae();const D=t==="reset"?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:b.getCustomStoreData();if(c)return c({id:s,type:t,storeData:D});oo(s,t==="reset"?null:D)}return ae()},handleCustom(){const{mouseConfig:t}=e;return t&&(h.clearSelected&&h.clearSelected(),h.clearCellAreas&&(h.clearCellAreas(),h.clearCopyCellArea())),j.analyColumnWidth(),b.refreshColumn(!0)},handleUpdateDataQueue(){d.upDataFlag++},handleRefreshColumnQueue(){d.reColumnFlag++},preventEvent(t,l,s,i,c){let g=si.get(l);!g.length&&l==="event.clearEdit"&&(g=si.get("event.clearActived"));let p;return g.some(v=>v(Object.assign({$grid:Ce,$table:h,$event:t},s))===!1)||i&&(p=i()),c&&c(),p},updateCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:l,treeIndeterminateMaps:s}=d,i=Object.assign({},l),c=Object.assign({},s),g=et.value,{transform:p,mapChildrenField:v}=g,E=g.children||g.childrenField,O=ge.value,{checkField:S,checkStrictly:q,checkMethod:D}=O,{afterTreeFullData:K}=f;if(!q){if(t){const U={},V=[];r.eachTree(K,G=>{const De=Oe(h,G),z=G[p?v:E];z&&z.length&&!U[De]&&(U[De]=1,V.unshift([G,De,z]))},{children:p?v:E}),V.forEach(G=>{const De=G[0],z=G[1],Re=G[2];let Pe=0,Ue=0,Xe=0;Re.forEach(D?at=>{const ot=Oe(h,at),pt=S?r.get(at,S):i[ot];D({row:at})?(pt?Pe++:c[ot]&&Ue++,Xe++):pt?Pe++:c[ot]&&Ue++}:at=>{const ot=Oe(h,at);(S?r.get(at,S):i[ot])?Pe++:c[ot]&&Ue++,Xe++});const ut=Pe>=Xe,it=!ut&&(Pe>=1||Ue>=1);S&&r.get(De,S,ut),ut?(S||(i[z]=De),c[z]&&delete c[z]):(S||i[z]&&delete i[z],it?c[z]=De:c[z]&&delete c[z])})}d.selectCheckboxMaps=i,d.treeIndeterminateMaps=c}},updateAllCheckboxStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:l,treeIndeterminateMaps:s}=d,i=ge.value,{checkField:c,checkMethod:g}=i,{afterFullData:p,afterTreeFullData:v}=f;let E=0,O=0,S=0;(t?v:p).forEach(g?U=>{const V=Oe(h,U),G=c?r.get(U,c):l[V];g({row:U})?(G?E++:s[V]&&O++,S++):G?E++:s[V]&&O++}:U=>{const V=Oe(h,U);(c?r.get(U,c):l[V])?E++:s[V]&&O++,S++});const D=E>=S,K=!D&&(E>=1||O>=1);d.isAllSelected=D,d.isIndeterminate=K},checkSelectionStatus(){h.updateCheckboxStatus(),h.updateAllCheckboxStatus()},handleBatchSelectRows(t,l,s){const{treeConfig:i}=e,{selectCheckboxMaps:c}=d,g=Object.assign({},c),p=et.value,{transform:v,mapChildrenField:E}=p,O=p.children||p.childrenField,S=ge.value,{checkField:q,checkStrictly:D,checkMethod:K}=S,U=S.indeterminateField||S.halfField;if(q){if(i&&!D){r.eachTree(t,V=>{(s||!K||K({row:V}))&&(r.set(V,q,l),U&&r.set(V,U,!1),dl(V,l))},{children:v?E:O}),d.selectCheckboxMaps=g;return}else t.forEach(V=>{(s||!K||K({row:V}))&&(r.set(V,q,l),dl(V,l))});d.selectCheckboxMaps=g;return}if(i&&!D){r.eachTree(t,V=>{const G=Oe(h,V);(s||!K||K({row:V}))&&(l?g[G]=V:g[G]&&delete g[G],dl(V,l))},{children:v?E:O}),d.selectCheckboxMaps=g;return}t.forEach(V=>{const G=Oe(h,V);(s||!K||K({row:V}))&&(l?g[G]||(g[G]=V):g[G]&&delete g[G],dl(V,l))}),d.selectCheckboxMaps=g},handleSelectRow({row:t},l,s){h.handleBatchSelectRows([t],l,s)},triggerHeaderTitleEvent(t,l,s){const i=l.content||l.message;if(i){const{tooltipStore:c}=d,{column:g}=s,p=ll(i);Un(!0),c.row=null,c.column=g,c.visible=!0,c.currOpts=l,ae(()=>{const v=Q.value;v&&v.open&&v.open(t.currentTarget,p)})}},triggerHeaderTooltipEvent(t,l){const{tooltipStore:s}=d,{column:i}=l,c=t.currentTarget;Un(!0),(s.column!==i||!s.visible)&&ks(t,c,c,null,l)},triggerBodyTooltipEvent(t,l){const{editConfig:s}=e,{editStore:i}=d,{tooltipStore:c}=d,g=Ie.value,{actived:p}=i,{row:v,column:E}=l,O=t.currentTarget;if(Un(c.column!==E||c.row!==v),!(E.editRender&&ct(s)&&(g.mode==="row"&&p.row===v||p.row===v&&p.column===E))&&(c.column!==E||c.row!==v||!c.visible)){let S,q;E.treeNode?(S=O.querySelector(".vxe-tree-cell"),E.type==="html"&&(q=O.querySelector(".vxe-cell--html"))):q=O.querySelector(E.type==="html"?".vxe-cell--html":".vxe-cell--label"),ks(t,O,S||O.children[0],q,l)}},triggerFooterTooltipEvent(t,l){const{column:s}=l,{tooltipStore:i}=d,c=t.currentTarget;Un(i.column!==s||!!i.row),(i.column!==s||!i.visible)&&ks(t,c,c.querySelector(".vxe-cell--item")||c.children[0],null,l)},handleTargetLeaveEvent(){const t=we.value;let l=Q.value;l&&l.setActived&&l.setActived(!1),t.enterable?f.tooltipTimeout=setTimeout(()=>{l=Q.value,l&&l.isActived&&!l.isActived()&&b.closeTooltip()},t.leaveDelay):b.closeTooltip()},triggerHeaderCellClickEvent(t,l){const{_lastResizeTime:s}=f,i=Ke.value,c=Ve.value,{column:g}=l,p=t.currentTarget,v=s&&s>Date.now()-300,E=bt(t,p,"vxe-cell--sort").flag,O=bt(t,p,"vxe-cell--filter").flag;i.trigger==="cell"&&!(v||E||O)&&j.triggerSortEvent(t,g,Zt(g)),Rt("header-cell-click",Object.assign({triggerResizable:v,triggerSort:E,triggerFilter:O,cell:p},l),t),(c.isCurrent||e.highlightCurrentColumn)&&j.triggerCurrentColumnEvent(t,l)},triggerHeaderCellDblclickEvent(t,l){Rt("header-cell-dblclick",Object.assign({cell:t.currentTarget},l),t)},triggerCellClickEvent(t,l){const{highlightCurrentRow:s,editConfig:i}=e,{editStore:c}=d,g=st.value,p=Ie.value,v=et.value,E=He.value,O=ge.value,S=le.value,q=Ee.value,{actived:D,focused:K}=c,{row:U,column:V}=l,{type:G,treeNode:De}=V,z=G==="radio",Re=G==="checkbox",Pe=G==="expand",Ue=t.currentTarget,Xe=z&&bt(t,Ue,"vxe-cell--radio").flag,ut=Re&&bt(t,Ue,"vxe-cell--checkbox").flag,it=De&&bt(t,Ue,"vxe-tree--btn-wrapper").flag,at=Pe&&bt(t,Ue,"vxe-table--expanded").flag;l=Object.assign({cell:Ue,triggerRadio:Xe,triggerCheckbox:ut,triggerTreeNode:it,triggerExpandNode:at},l),!ut&&!Xe&&(!at&&(g.trigger==="row"||Pe&&g.trigger==="cell")&&j.triggerRowExpandEvent(t,l),(v.trigger==="row"||De&&v.trigger==="cell")&&j.triggerTreeExpandEvent(t,l)),it||(at||((q.isCurrent||s)&&!ut&&!Xe&&j.triggerCurrentRowEvent(t,l),!Xe&&(E.trigger==="row"||z&&E.trigger==="cell")&&j.triggerRadioRowEvent(t,l),!ut&&(O.trigger==="row"||Re&&O.trigger==="cell")&&j.handleToggleCheckRowEvent(t,l)),ct(i)&&(S.arrowCursorLock&&t&&p.mode==="cell"&&t.target&&/^input|textarea$/i.test(t.target.tagName)&&(K.column=V,K.row=U),p.trigger==="manual"?D.args&&D.row===U&&V!==D.column&&zo(t,l):(!D.args||U!==D.row||V!==D.column)&&(p.trigger==="click"||p.trigger==="dblclick"&&p.mode==="row"&&D.row===U)&&zo(t,l))),ct(i)&&p.trigger==="dblclick"&&D.row&&D.column&&(p.mode==="row"?h.eqRow(D.row,U)||h.handleClearEdit(t):p.mode==="cell"&&(!h.eqRow(D.row,U)||D.column.id!==V.id)&&h.handleClearEdit(t)),Rt("cell-click",l,t)},triggerCellDblclickEvent(t,l){const{editConfig:s}=e,{editStore:i}=d,c=Ie.value,{actived:g}=i,p=t.currentTarget;l=Object.assign({cell:p},l),ct(s)&&c.trigger==="dblclick"&&(!g.args||t.currentTarget!==g.args.cell)&&(c.mode==="row"?il("blur").catch(v=>v).then(()=>{h.handleEdit(l,t).then(()=>il("change")).catch(v=>v)}):c.mode==="cell"&&h.handleEdit(l,t).then(()=>il("change")).catch(v=>v)),Rt("cell-dblclick",l,t)},handleToggleCheckRowEvent(t,l){const{selectCheckboxMaps:s}=d,i=ge.value,{checkField:c,trigger:g}=i,{row:p}=l;if(g==="manual")return;let v=!1;c?v=!r.get(p,c):v=!s[Oe(h,p)],t?j.triggerCheckRowEvent(t,l,v):(j.handleBatchSelectRows([p],v),j.checkSelectionStatus())},triggerCheckRowEvent(t,l,s){const i=ge.value,{row:c}=l,{afterFullData:g}=f,{checkMethod:p,trigger:v}=i;if(v!=="manual"){if(t.stopPropagation(),i.isShiftKey&&t.shiftKey&&!e.treeConfig){const E=b.getCheckboxRecords();if(E.length){const O=E[0],S=b.getVTRowIndex(c),q=b.getVTRowIndex(O);if(S!==q){b.setAllCheckboxRow(!1);const D=S<q?g.slice(S,q+1):g.slice(q,S+1);ul(D,!0,!1),Rt("checkbox-range-select",Object.assign({rangeRecords:D},l),t);return}}}(!p||p({row:c}))&&(j.handleBatchSelectRows([c],s),j.checkSelectionStatus(),Rt("checkbox-change",Object.assign({records:b.getCheckboxRecords(),reserves:b.getCheckboxReserveRecords(),indeterminates:b.getCheckboxIndeterminateRecords(),checked:s},l),t))}},triggerCheckAllEvent(t,l){const s=ge.value,{trigger:i}=s;i!=="manual"&&(t&&t.stopPropagation(),Mr(t,l))},triggerRadioRowEvent(t,l){const{selectRadioRow:s}=d,{row:i}=l,c=He.value,{trigger:g}=c;if(g==="manual")return;t.stopPropagation();let p=i,v=s!==p;v?Bo(p):c.strict||(v=s===p,v&&(p=null,b.clearRadioRow())),v&&Rt("radio-change",Object.assign({oldValue:s,newValue:p},l),t)},triggerCurrentColumnEvent(t,l){const s=Ve.value,{currentMethod:i}=s,{column:c}=l;(!i||i({column:c}))&&b.setCurrentColumn(c)},triggerCurrentRowEvent(t,l){const{currentRow:s}=d,i=Ee.value,{currentMethod:c}=i,{row:g}=l,p=s!==g;(!c||c({row:g}))&&(b.setCurrentRow(g),p&&Rt("current-change",Object.assign({oldValue:s,newValue:g},l),t))},triggerRowExpandEvent(t,l){const{rowExpandLazyLoadedMaps:s,expandColumn:i}=d,c=st.value,{row:g}=l,{lazy:p,trigger:v}=c;if(v==="manual")return;t.stopPropagation();const E=Oe(h,g);if(!p||!s[E]){const O=!b.isRowExpandByRow(g),S=b.getColumnIndex(i),q=b.getVMColumnIndex(i);b.setRowExpand(g,O),Rt("toggle-row-expand",{expanded:O,column:i,columnIndex:S,$columnIndex:q,row:g,rowIndex:b.getRowIndex(g),$rowIndex:b.getVMRowIndex(g)},t)}},triggerTreeExpandEvent(t,l){const{treeExpandLazyLoadedMaps:s}=d,i=et.value,{row:c,column:g}=l,{lazy:p,trigger:v}=i;if(v==="manual")return;t.stopPropagation();const E=Oe(h,c);if(!p||!s[E]){const O=!b.isTreeExpandByRow(c),S=b.getColumnIndex(g),q=b.getVMColumnIndex(g);b.setTreeExpand(c,O),Rt("toggle-tree-expand",{expanded:O,column:g,columnIndex:S,$columnIndex:q,row:c},t)}},handleColumnSortEvent(t,l){const{mouseConfig:s}=e,i=lt.value,{field:c,sortable:g}=l;if(g){const p={$table:h,$event:t,column:l,field:c,property:c,order:l.order,sortList:b.getSortColumns(),sortTime:l.sortTime};s&&i.area&&h.handleSortEvent&&h.handleSortEvent(t,p),Rt("sort-change",p,t)}},triggerSortEvent(t,l,s){const i=Ke.value,{field:c,sortable:g}=l;g&&(!s||l.order===s?b.clearSort(i.multiple?l:null):b.sort({field:c,order:s}),h.handleColumnSortEvent(t,l))},triggerHeaderCellMousedownEvent(t,l){const{mouseConfig:s}=e,i=lt.value,c=Ve.value,g=xe.value,{trigger:p,disabledMethod:v}=g,E=t.currentTarget,O=E&&E.tagName&&E.tagName.toLowerCase()==="input",S=bt(t,E,"vxe-cell--checkbox").flag,q=bt(t,E,"vxe-cell--sort").flag,D=bt(t,E,"vxe-cell--filter").flag;let K=!1;if(!(O||S||q||D)){const{column:U}=l;c.drag&&!U.fixed&&p==="cell"&&!(v&&v(l))&&(K=!0,h.handleHeaderCellDragMousedownEvent(t,l))}!K&&s&&i.area&&h.handleHeaderCellAreaEvent&&h.handleHeaderCellAreaEvent(t,Object.assign({cell:E,triggerSort:q,triggerFilter:D},l)),h.focus(),h.closeMenu&&h.closeMenu()},triggerCellMousedownEvent(t,l){const{column:s}=l,{type:i,treeNode:c}=s,g=i==="radio",p=i==="checkbox",v=i==="expand",E=Ee.value,O=Me.value,{trigger:S,disabledMethod:q}=O,D=t.currentTarget;l.cell=D;const K=D&&D.tagName&&D.tagName.toLowerCase()==="input",U=g&&bt(t,D,"vxe-cell--radio").flag,V=p&&bt(t,D,"vxe-cell--checkbox").flag,G=c&&bt(t,D,"vxe-tree--btn-wrapper").flag,De=v&&bt(t,D,"vxe-table--expanded").flag;let z=!1;E.drag&&(z=S==="row"||s.dragSort&&S==="cell");let Re=!1;K||U||V||G||De||z&&!(q&&q(l))&&(Re=!0,h.handleCellDragMousedownEvent(t,l)),!Re&&h.handleCellMousedownEvent&&h.handleCellMousedownEvent(t,l),h.focus(),h.closeFilter(),h.closeMenu&&h.closeMenu()},triggerCellMouseupEvent(){Fr()},handleRowDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(sr(),0,0)},handleRowDragDragendEvent(t){const{treeConfig:l,dragConfig:s}=e,i=Me.value,{fullAllDataRowIdData:c,prevDragToChild:g}=f,{isPeerDrag:p,isCrossDrag:v,isSelfToChildDrag:E,dragEndMethod:O}=i,S=et.value,{transform:q,rowField:D,mapChildrenField:K,parentField:U}=S,V=S.children||S.childrenField,{dragRow:G}=d,{afterFullData:De,tableFullData:z,prevDragRow:Re,prevDragPos:Pe}=f,Ue=O||(s?s.dragEndMethod:null),Xe=Pe==="bottom"?1:0;Re&&G&&Re!==G&&Promise.resolve(Ue?Ue({oldRow:G,newRow:Re,dragPos:Pe,offsetIndex:Xe}):!0).then(ut=>{if(!ut)return;let it=-1,at=-1;if(l){if(q){const ot=Oe(h,G),pt=c[ot],tt=Oe(h,Re),rt=c[tt];if(pt&&rt){const{level:Bt}=pt,{level:Xo}=rt,So={};r.eachTree([G],mo=>{So[Oe(h,mo)]=mo},{children:K});let fl=!1;if(Bt&&Xo)if(p){if(pt.row[U]!==rt.row[U])return}else{if(!v)return;if(So[tt]&&(fl=!0,!(v&&E))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}else if(Bt){if(!v)return}else if(Xo){if(!v)return;if(So[tt]&&(fl=!0,!(v&&E))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}const To=r.toTreeArray(f.afterTreeFullData,{children:V}),pl=h.findRowIndexOf(To,G);To.splice(pl,1);const Jt=h.findRowIndexOf(To,Re)+Xe;To.splice(Jt,0,G),fl&&v&&E&&r.each(G[V],mo=>{mo[U]=G[U]}),G[U]=g?Re[D]:Re[U],f.tableFullTreeData=r.toArrayTree(To,{key:S.rowField,parentKey:S.parentField,children:V,mapChildren:S.mapChildrenField})}}}else{it=h.findRowIndexOf(De,G);const ot=h.findRowIndexOf(z,G);De.splice(it,1),z.splice(ot,1);const pt=h.findRowIndexOf(De,Re),tt=h.findRowIndexOf(z,Re);at=pt+Xe;const rt=tt+Xe;De.splice(at,0,G),z.splice(rt,0,G)}d.isDragRowMove=!0,h.handleTableData(l&&q),h.cacheRowMap(),Xn(),l&&q||h.updateAfterDataIndex(),h.checkSelectionStatus(),d.scrollYLoad&&h.updateScrollYSpace(),ae().then(()=>{h.updateCellAreas(),h.recalculate()}),Rt("row-dragend",{oldRow:G,newRow:Re,dragPos:Pe,offsetIndex:Xe,_index:{newIndex:at,oldIndex:it}},t)}).catch(()=>{}),Zl(),Fs(),f.prevDragToChild=!1,d.dragRow=null,d.dragCol=null,setTimeout(()=>{d.isDragRowMove=!1},500)},handleRowDragDragoverEvent(t){const{treeConfig:l}=e,{fullAllDataRowIdData:s}=f,{dragRow:i}=d,c=et.value,{transform:g,parentField:p}=c,v=Me.value,{isPeerDrag:E,isCrossDrag:O,isToChildDrag:S}=v;if(!i){t.preventDefault();return}const q=t.ctrlKey,D=t.currentTarget,K=D.getAttribute("rowid")||"",U=s[K];if(U){const V=U.row;t.preventDefault();const{dragRow:G}=d,z=t.clientY-D.getBoundingClientRect().y<D.clientHeight/2?"top":"bottom";if(h.eqRow(G,V)||!O&&l&&g&&(E?G[p]!==V[p]:U.level)){Gn(t,D,null,!1,z);return}f.prevDragToChild=!!(l&&g&&O&&S&&q),f.prevDragRow=V,f.prevDragPos=z,Gn(t,D,null,!0,z),Rt("row-dragover",{oldRow:G,targetRow:V,dragPos:z},t)}},handleCellDragMousedownEvent(t,l){var s;t.stopPropagation();const{dragConfig:i}=e,c=Me.value,{trigger:g,dragStartMethod:p}=c,{row:v}=l,E=t.currentTarget,O=g==="cell"||g==="row"?E:(s=E.parentElement)===null||s===void 0?void 0:s.parentElement,S=O.parentElement,q=p||(i?i.dragStartMethod:null);if(Fs(),q&&!q(l)){S.draggable=!1,d.dragRow=null,d.dragCol=null,Zl();return}d.dragRow=v,d.dragCol=null,S.draggable=!0,Ba(v),Ha(O),Rt("row-dragstart",l,t)},handleCellDragMouseupEvent(){Fr()},handleHeaderCellDragDragstartEvent(t){t.dataTransfer&&t.dataTransfer.setDragImage(sr(),0,0)},handleColDragSwapColumn(){Or(),Ms(!1).then(()=>{h.updateCellAreas(),h.saveCustomStore("update:sort")})},handleColDragSwapEvent(t,l,s,i,c,g){const{mouseConfig:p}=e,v=xe.value,{isPeerDrag:E,isCrossDrag:O,isSelfToChildDrag:S,isToChildDrag:q,dragEndMethod:D}=v,{collectColumn:K}=f,U=c==="right"?1:0;if(i&&s&&i!==s){const V=s,G=i;return Promise.resolve(D?D({oldColumn:V,newColumn:G,dragPos:c,offsetIndex:U}):!0).then(De=>{if(!De)return;let z=-1,Re=-1;const Pe={};r.eachTree([V],it=>{Pe[it.id]=it});let Ue=!1;if(V.parentId&&G.parentId)if(E){if(V.parentId!==G.parentId)return}else{if(!O)return;if(Pe[G.id]&&(Ue=!0,!(O&&S))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}else if(V.parentId){if(!O)return}else if(G.parentId){if(!O)return;if(Pe[G.id]&&(Ue=!0,!(O&&S))){te.modal&&te.modal.message({status:"error",content:Sl("vxe.error.treeDragChild")});return}}const Xe=r.findTree(K,it=>it.id===V.id);if(Ue&&O&&S){if(Xe){const{items:it,index:at}=Xe,ot=V.children||[];ot.forEach(pt=>{pt.parentId=V.parentId}),it.splice(at,1,...ot),V.children=[]}}else if(Xe){const{items:it,index:at,parent:ot}=Xe;it.splice(at,1),ot||(z=at)}const ut=r.findTree(K,it=>it.id===G.id);if(ut){const{items:it,index:at,parent:ot}=ut;O&&q&&g?(V.parentId=G.id,G.children=(G.children||[]).concat([V])):(V.parentId=G.parentId,it.splice(at+U,0,V)),ot||(Re=at)}r.eachTree(K,(it,at,ot,pt,tt)=>{if(!tt){const rt=at+1;it.renderSortNumber=rt}}),d.isDragColMove=!0,p&&(h.clearSelected&&h.clearSelected(),h.clearCellAreas&&(h.clearCellAreas(),h.clearCopyCellArea())),Rt("column-dragend",{oldColumn:V,newColumn:G,dragPos:c,offsetIndex:U,_index:{newIndex:Re,oldIndex:z}},t),l&&h.handleColDragSwapColumn()}).catch(()=>{})}return Promise.resolve()},handleHeaderCellDragDragendEvent(t){const{dragCol:l}=d,{prevDragCol:s,prevDragPos:i,prevDragToChild:c}=f;h.handleColDragSwapEvent(t,!0,l,s,i,c),Zl(),Yn(),f.prevDragToChild=!1,d.dragRow=null,d.dragCol=null,setTimeout(()=>{d.isDragColMove=!1,h.recalculate().then(()=>{yn()})},500)},handleHeaderCellDragDragoverEvent(t){const{dragCol:l}=d,s=xe.value,{isToChildDrag:i,isPeerDrag:c,isCrossDrag:g}=s;if(!l){t.preventDefault();return}const p=t.ctrlKey,v=t.currentTarget,E=v.getAttribute("colid"),O=h.getColumnById(E);if(O){t.preventDefault();const{clientX:S}=t,D=S-v.getBoundingClientRect().x<v.clientWidth/2?"left":"right";if(O.fixed||l&&l.id===O.id||!g&&(c?l.parentId!==O.parentId:O.parentId)){Gn(t,null,v,!1,D);return}f.prevDragToChild=!!(g&&i&&p),f.prevDragCol=O,f.prevDragPos=D,Gn(t,null,v,!0,D),Rt("column-dragover",{oldColumn:l,targetColumn:O,dragPos:D},t);const K=A.value;if(!K)return;const U=oe.value,V=C.value,G=V?V.$el:null,De=U||G;if(De){const z=K.getBoundingClientRect(),Re=K.clientWidth,Pe=J.value,Ue=Pe?Pe.clientWidth:0,Xe=ee.value,ut=Xe?Xe.clientWidth:0,it=z.x+Ue,at=z.x+Re-ut,ot=28,pt=S-it,tt=at-S;if(pt>0&&pt<=ot){const rt=Math.floor(Re/(pt>ot/2?240:120));De.scrollLeft-=rt*(ot-pt)}else if(tt>0&&tt<=ot){const rt=Math.floor(Re/(tt>ot/2?240:120));De.scrollLeft+=rt*(ot-tt)}}}},handleHeaderCellDragMousedownEvent(t,l){var s;t.stopPropagation();const i=xe.value,{trigger:c,dragStartMethod:g}=i,{column:p}=l,v=t.currentTarget,E=c==="cell"?v:(s=v.parentElement)===null||s===void 0?void 0:s.parentElement;if(d.isDragColMove=!1,Yn(),g&&!g(l)){E.draggable=!1,d.dragRow=null,d.dragCol=null,Zl();return}d.dragCol=p,d.dragRow=null,E.draggable=!0,Pa(p),Va(E),Rt("column-dragstart",l,t)},handleHeaderCellDragMouseupEvent(){Yn(),Zl(),d.dragRow=null,d.dragCol=null,d.isDragColMove=!1},handleScrollEvent(t,l,s,i,c,g){const{highlightHoverRow:p}=e,{lastScrollLeft:v,lastScrollTop:E}=f,O=C.value,S=O?O.$el:null,q=Ee.value,D=L.value,K=Q.value,U=S?S.clientHeight:0,V=S?S.clientWidth:0,G=S?S.scrollHeight:0,De=S?S.scrollWidth:0;let z=!1,Re=!1,Pe=!1,Ue=!1,Xe="",ut=!1,it=!1,at=!1,ot=!1;if(s){const tt=ue.value;Pe=c<=0,Pe||(Ue=c+V>=De),c>v?(Xe="right",c+V>=De-tt&&(ot=!0)):(Xe="left",c<=tt&&(at=!0)),j.checkScrolling(),f.lastScrollLeft=c}if(l){const tt=W.value;z=i<=0,z||(Re=i+U>=G),i>E?(Xe="bottom",i+U>=G-tt&&(it=!0)):(Xe="top",i<=tt&&(ut=!0)),f.lastScrollTop=i}d.isDragColMove=!1,d.isDragRowMove=!1,d.lastScrollTime=Date.now();const pt=Object.assign({scrollTop:i,scrollLeft:c,bodyHeight:U,bodyWidth:V,scrollHeight:G,scrollWidth:De,isX:s,isY:l,isTop:z,isBottom:Re,isLeft:Pe,isRight:Ue,direction:Xe},g);Sa(s,l),(q.isHover||p)&&h.clearHoverRow(),D&&D.reactData.visible&&D.close(),K&&K.reactData.visible&&K.close(),(it||ut||ot||at)&&Rt("scroll-boundary",pt,t),Rt("scroll",pt,t)},triggerScrollXEvent(){ie.value.immediate?yn():Ea()},triggerScrollYEvent(){pe.value.immediate?Ds():ya()},scrollToTreeRow(t){const{treeConfig:l}=e,{tableFullData:s}=f,i=[];if(l){const c=et.value,g=c.children||c.childrenField,p=r.findTree(s,v=>h.eqRow(v,t),{children:g});if(p){const v=p.nodes;v.forEach((E,O)=>{O<v.length-1&&!b.isTreeExpandByRow(E)&&i.push(b.setTreeExpand(E,!0))})}}return Promise.all(i).then(()=>qr(h,t))},updateScrollYStatus:Xn,updateScrollXSpace(){const{isGroup:t,scrollXLoad:l,scrollbarWidth:s}=d,{visibleColumn:i,scrollXStore:c,elemStore:g,tableWidth:p}=f,v=w.value,E=C.value,O=R.value,S=E?E.$el:null;if(S){const q=v?v.$el:null,D=O?O.$el:null,K=q?q.querySelector(".vxe-table--header"):null,U=S.querySelector(".vxe-table--body"),V=D?D.querySelector(".vxe-table--footer"):null,G=i.slice(0,c.startIndex).reduce((Pe,Ue)=>Pe+Ue.renderWidth,0);let De="";l&&(De=`${G}px`),K&&(K.style.marginLeft=t?"":De),U.style.marginLeft=De,V&&(V.style.marginLeft=De),["main"].forEach(Pe=>{["header","body","footer"].forEach(Xe=>{const ut=Eo(g[`${Pe}-${Xe}-xSpace`]);ut&&(ut.style.width=l?`${p+(Xe==="header"?s:0)}px`:"")})});const Re=be.value;Re&&(Re.style.width=`${p+s}px`),ae(io)}},updateScrollYSpace(){const{showOverflow:t}=e,{scrollYLoad:l}=d,{scrollYStore:s,elemStore:i,afterFullData:c,fullAllDataRowIdData:g}=f,{startIndex:p,rowHeight:v}=s;let E=0,O=0;const S=["main","left","right"];let q="",D="";if(l){if(t)E=c.length*v,O=Math.max(0,p*v);else{for(let U=0;U<c.length;U++){const V=c[U],G=Oe(h,V),De=g[G];De&&(E+=De.height||v)}for(let U=0;U<p;U++){const V=c[U],G=Oe(h,V),De=g[G];De&&(O+=De.height||v)}}q=`${O}px`,D=`${E}px`}S.forEach(U=>{const V=["header","body","footer"],G=Eo(i[`${U}-body-table`]);G&&(G.style.marginTop=q),V.forEach(De=>{const z=Eo(i[`${U}-${De}-ySpace`]);z&&(z.style.height=D)})});const K=Se.value;K&&(K.style.height=D),ae(io)},updateScrollXData(){const{showOverflow:t}=e;return ae().then(()=>{Rr(),wl(),j.updateScrollXSpace(),t||j.updateScrollYSpace()})},updateScrollYData(){return ae().then(()=>{j.handleTableData(),wl(),j.updateScrollYSpace()})},checkScrolling(){const t=J.value,l=ee.value,s=C.value,i=s?s.$el:null,g=oe.value||i;g&&(t&&(g.scrollLeft>0?tl(t,"scrolling--middle"):Ao(t,"scrolling--middle")),l&&(g.clientWidth<g.scrollWidth-Math.ceil(g.scrollLeft)?tl(l,"scrolling--middle"):Ao(l,"scrolling--middle")))},updateZindex(){e.zIndex?f.tZindex=e.zIndex:f.tZindex<_i()&&(f.tZindex=Ni())},handleCheckedCheckboxRow:ul,triggerHoverEvent(t,{row:l}){j.setHoverRow(l)},setHoverRow(t){const l=Oe(h,t),s=A.value;j.clearHoverRow(),s&&r.arrayEach(s.querySelectorAll(`[rowid="${l}"]`),i=>tl(i,"row--hover")),f.hoverRow=t},clearHoverRow(){const t=A.value;t&&r.arrayEach(t.querySelectorAll(".vxe-body--row.row--hover"),l=>Ao(l,"row--hover")),f.hoverRow=null},getCell(t,l){return b.getCellElement(t,l)},findRowIndexOf(t,l){return l?r.findIndexOf(t,s=>h.eqRow(s,l)):-1},eqRow(t,l){return t&&l?t===l?!0:Oe(h,t)===Oe(h,l):!1}},Object.assign(h,b,j);const kr=t=>{const{showHeader:l,showFooter:s}=e,{tableData:i,tableColumn:c,tableGroupColumn:g,columnStore:p,footerTableData:v}=d,E=t==="left",O=E?p.leftList:p.rightList;return u("div",{ref:E?J:ee,class:`vxe-table--fixed-${t}-wrapper`},[l?u(ei,{ref:E?k:he,fixedType:t,tableData:i,tableColumn:c,tableGroupColumn:g,fixedColumn:O}):vo(h),u(Qr,{ref:E?_:Z,fixedType:t,tableData:i,tableColumn:c,fixedColumn:O}),s?u(ti,{ref:E?se:N,footerTableData:v,tableColumn:c,fixedColumn:O,fixedType:t}):vo(h)])},ja=()=>{const t=Ot.value,l={$table:h};if(n.empty)return n.empty(l);{const s=t.name?li.get(t.name):null,i=s?s.renderTableEmpty||s.renderTableEmptyView||s.renderEmpty:null;if(i)return xo(i(t,l))}return ll(e.emptyText)||Sl("vxe.table.emptyText")},Na=()=>{const{dragConfig:t}=e,{dragRow:l,dragCol:s,dragTipText:i}=d,c=xe.value,v=(Me.value.slots||{}).tip||(t&&t.slots?t.slots.rowTip:null),O=(c.slots||{}).tip;return l&&v?Rn(v,{row:l}):s&&O?Rn(O,{column:s}):[u("span",i)]},_a=()=>{const{dragRow:t}=d,l=Ee.value,s=Ve.value,i=Me.value,c=xe.value;return l.drag||s.drag?u("div",{class:"vxe-table--drag-wrapper"},[u("div",{ref:Y,class:["vxe-table--drag-row-line",{"is--guides":i.showGuidesStatus}]}),u("div",{ref:H,class:["vxe-table--drag-col-line",{"is--guides":c.showGuidesStatus}]}),u("div",{ref:Ae,class:"vxe-table--drag-sort-tip"},[u("div",{class:"vxe-table--drag-sort-tip-wrapper"},[u("div",{class:"vxe-table--drag-sort-tip-status"},[u("span",{class:["vxe-table--drag-sort-tip-normal-status",t?os().TABLE_DRAG_STATUS_ROW:os().TABLE_DRAG_STATUS_COLUMN]}),u("span",{class:["vxe-table--drag-sort-tip-sub-status",os().TABLE_DRAG_STATUS_SUB_ROW]}),u("span",{class:["vxe-table--drag-sort-tip-disabled-status",os().TABLE_DRAG_DISABLED]})]),u("div",{class:"vxe-table--drag-sort-tip-content"},Na())])])]):vo(h)};function As(){const t=A.value;t&&t.clientWidth&&t.clientHeight&&b.recalculate()}const Wa=()=>{const{loading:t,stripe:l,showHeader:s,height:i,treeConfig:c,mouseConfig:g,showFooter:p,highlightCell:v,highlightHoverRow:E,highlightHoverColumn:O,editConfig:S,editRules:q}=e,{isCalcColumn:D,isGroup:K,overflowX:U,overflowY:V,scrollXLoad:G,scrollYLoad:De,scrollbarHeight:z,tableData:Re,tableColumn:Pe,tableGroupColumn:Ue,footerTableData:Xe,initStore:ut,columnStore:it,filterStore:at,customStore:ot,tooltipStore:pt}=d,{leftList:tt,rightList:rt}=it,Bt=n.loading,Xo=je.value,So=X.value,fl=ge.value,To=et.value,pl=Ee.value,yo=Ve.value,Jt=P.value,mo=Ft.value,Co=lt.value,hl=B.value,Ko=Ne.value,Ht=Ut.value,Wt=ft.value,zt=d._isLoading||t,Pt=co.value,uo=Fe.value,Ro=g&&Co.area,fo=xe.value;return u("div",{ref:A,class:["vxe-table","vxe-table--render-default",`tid_${x}`,`border--${mo}`,{[`size--${Jt}`]:Jt,[`valid-msg--${So.msgMode}`]:!!q,"vxe-editable":!!S,"old-cell-valid":q&&vt().cellVaildMode==="obsolete","cell--highlight":v,"cell--selected":g&&Co.selected,"cell--area":Ro,"header-cell--area":Ro&&hl.selectCellByHeader,"body-cell--area":Ro&&hl.selectCellByBody,"row--highlight":pl.isHover||E,"column--highlight":yo.isHover||O,"checkbox--range":fl.range,"column--calc":D,"col--drag-cell":yo.drag&&fo.trigger==="cell","is--header":s,"is--footer":p,"is--group":K,"is--tree-line":c&&(To.showLine||To.line),"is--fixed-left":tt.length,"is--fixed-right":rt.length,"is--animat":!!e.animat,"is--padding":e.padding,"is--round":e.round,"is--stripe":!c&&l,"is--loading":zt,"is--empty":!zt&&!Re.length,"is--scroll-y":V,"is--scroll-x":U,"is--virtual-x":G,"is--virtual-y":De}],spellcheck:!1,onKeydown:Fa},[u("div",{class:"vxe-table-slots"},n.default?n.default({}):[]),u("div",{key:"tw",class:"vxe-table--render-wrapper"},[u("div",{class:"vxe-table--main-wrapper"},[s?u(ei,{ref:w,tableData:Re,tableColumn:Pe,tableGroupColumn:Ue}):vo(h),u(Qr,{ref:C,tableData:Re,tableColumn:Pe}),p?u(ti,{ref:R,footerTableData:Xe,tableColumn:Pe}):vo(h)]),u("div",{class:"vxe-table--fixed-wrapper"},[tt&&tt.length&&U?kr("left"):vo(h),rt&&rt.length&&U?kr("right"):vo(h)])]),Pt.x?u("div",{key:"vx",ref:ce,class:"vxe-table--scroll-x-virtual"},[u("div",{ref:oe,class:"vxe-table--scroll-x-handle",onScroll:Ra},[u("div",{ref:be,class:"vxe-table--scroll-x-space"})])]):vo(h),Pt.y?u("div",{key:"vy",ref:ne,class:"vxe-table--scroll-y-virtual"},[u("div",{ref:me,class:"vxe-table--scroll-y-handle",onScroll:Oa},[u("div",{ref:Se,class:"vxe-table--scroll-y-space"})])]):vo(h),u("div",{key:"tn",ref:Be,class:"vxe-table--empty-placeholder"},[u("div",{class:"vxe-table--empty-content"},ja())]),u("div",{key:"tl",class:"vxe-table--border-line"}),u("div",{key:"cl",ref:fe,class:"vxe-table--resizable-bar",style:U?{"padding-bottom":`${z}px`}:null},uo.showDragTip?[u("div",{ref:ke,class:"vxe-table--resizable-number-tip"},"23432px")]:[]),m?u(m,{key:"lg",class:"vxe-table--loading",modelValue:zt,icon:Ht.icon,text:Ht.text},Bt?{default:()=>Rn(Bt,{$table:h,$grid:Ce,loading:zt})}:{}):Bt?u("div",{class:["vxe-loading--custom-wrapper",{"is--visible":zt}]},Rn(Bt,{$table:h,$grid:Ce,loading:zt})):vo(h),ut.custom?u(Id,{key:"cs",ref:T,customStore:ot}):vo(h),ut.filter?u(Fd,{key:"tf",ref:F,filterStore:at}):vo(h),ut.import&&e.importConfig?u(Ad,{key:"it",defaultOptions:d.importParams,storeData:d.importStore}):vo(h),ut.export&&(e.exportConfig||e.printConfig)?u(Ld,{key:"et",defaultOptions:d.exportParams,storeData:d.exportStore}):vo(h),Wt?u(Bd,{key:"tm",ref:M}):vo(h),_a(),y?u("div",{},[u(y,{key:"ctp",ref:$,isArrow:!1,enterable:!1}),u(y,Object.assign({key:"btp",ref:Q},Xo,pt.currOpts)),e.editRules&&So.showMessage&&(So.message==="default"?!i:So.message==="tooltip")?u(y,Object.assign({key:"vtp",ref:L,class:[{"old-cell-valid":q&&vt().cellVaildMode==="obsolete"},"vxe-table--valid-error"]},So.message==="tooltip"||Re.length===1?Ko:{})):vo(h)]):vo(h)])},Ls=ze(0);wt(()=>e.data?e.data.length:-1,()=>{Ls.value++}),wt(()=>e.data,()=>{Ls.value++}),wt(Ls,()=>{const{initStatus:t}=f;Wn(e.data||[]).then(()=>{f.inited=!0,f.initStatus=!0,t||zn(),b.recalculate()})});const $s=ze(0);wt(()=>d.staticColumns.length,()=>{$s.value++}),wt(()=>d.staticColumns,()=>{$s.value++}),wt($s,()=>{Sr(r.clone(d.staticColumns))});const Bs=ze(0);wt(()=>d.tableColumn.length,()=>{Bs.value++}),wt(()=>d.tableColumn,()=>{Bs.value++}),wt(Bs,()=>{j.analyColumnWidth()}),wt(()=>d.upDataFlag,()=>{ae(()=>{b.updateData()})}),wt(()=>d.reColumnFlag,()=>{ae(()=>{b.refreshColumn()})}),wt(()=>e.showHeader,()=>{ae(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})}),wt(()=>e.showFooter,()=>{ae(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})});const Hs=ze(0);wt(()=>e.footerData?e.footerData.length:-1,()=>{Hs.value++}),wt(()=>e.footerData,()=>{Hs.value++}),wt(Hs,()=>{b.updateFooter()}),wt(()=>e.height,()=>{ae(()=>b.recalculate(!0))}),wt(()=>e.maxHeight,()=>{ae(()=>b.recalculate(!0))}),wt(P,()=>{ae(()=>{b.recalculate(!0).then(()=>b.refreshScroll())})}),wt(()=>e.syncResize,t=>{t&&(As(),ae(()=>{As(),setTimeout(()=>As())}))});const Ps=ze(0);wt(()=>e.mergeCells?e.mergeCells.length:-1,()=>{Ps.value++}),wt(()=>e.mergeCells,()=>{Ps.value++}),wt(Ps,()=>{b.clearMergeCells(),ae(()=>{e.mergeCells&&b.setMergeCells(e.mergeCells)})});const Vs=ze(0);wt(()=>e.mergeFooterItems?e.mergeFooterItems.length:-1,()=>{Vs.value++}),wt(()=>e.mergeFooterItems,()=>{Vs.value++}),wt(Vs,()=>{b.clearMergeFooterItems(),ae(()=>{e.mergeFooterItems&&b.setMergeFooterItems(e.mergeFooterItems)})}),I&&wt(()=>I?I.reactData.resizeFlag:null,()=>{Ir()}),Vd.forEach(t=>{const{setupTable:l}=t;if(l){const s=l(h);s&&r.isObject(s)&&Object.assign(h,s)}}),j.preventEvent(null,"created",{$table:h});let On;return Ua(()=>{b.recalculate().then(()=>b.refreshScroll()),j.preventEvent(null,"activated",{$table:h})}),Ya(()=>{f.isActivated=!1,j.preventEvent(null,"deactivated",{$table:h})}),zl(()=>{const t=Ve.value,l=Ee.value,s=Dt.value;(t.drag||l.drag||s.allowSort)&&Yi(),ae(()=>{const{data:i,treeConfig:c,showOverflow:g}=e,{scrollXStore:p,scrollYStore:v}=f,E=pe.value;if(Ie.value,et.value,He.value,ge.value,st.value,Ee.value,Object.assign(v,{startIndex:0,endIndex:0,visibleSize:0,adaptive:E.adaptive!==!1}),Object.assign(p,{startIndex:0,endIndex:0,visibleSize:0}),Wn(i||[]).then(()=>{i&&i.length&&(f.inited=!0,f.initStatus=!0,zn()),xa(),io()}),e.autoResize){const O=A.value,S=j.getParentElem();On=Pd.create(()=>{e.autoResize&&b.recalculate(!0)}),O&&On.observe(O),S&&On.observe(S)}}),Mt.on(h,"paste",Aa),Mt.on(h,"copy",La),Mt.on(h,"cut",$a),Mt.on(h,"mousedown",Ma),Mt.on(h,"blur",Da),Mt.on(h,"mousewheel",Ia),Mt.on(h,"keydown",ka),Mt.on(h,"resize",Ir),Mt.on(h,"contextmenu",h.handleGlobalContextmenuEvent),j.preventEvent(null,"mounted",{$table:h})}),Ei(()=>{On&&On.disconnect(),b.closeFilter(),h.closeMenu&&h.closeMenu(),j.preventEvent(null,"beforeUnmount",{$table:h})}),ql(()=>{Mt.off(h,"paste"),Mt.off(h,"copy"),Mt.off(h,"cut"),Mt.off(h,"mousedown"),Mt.off(h,"blur"),Mt.off(h,"mousewheel"),Mt.off(h,"keydown"),Mt.off(h,"resize"),Mt.off(h,"contextmenu"),j.preventEvent(null,"unmounted",{$table:h})}),Fl("$xeColgroup",null),Fl("$xeTable",h),h.renderVN=Wa,h},render(){return this.renderVN()}});function Nd(e){const o=_e(()=>{const{renderParams:m}=e;return m.column}),n=_e(()=>{const{renderParams:m}=e;return m.row}),a=_e(()=>{const{renderOpts:m}=e;return m.props||{}}),x=_e({get(){const{renderParams:m}=e,{row:y,column:I}=m;return r.get(y,I.field)},set(m){const{renderParams:y}=e,{row:I,column:P}=y;return r.set(I,P.field,m)}});return{currColumn:o,currRow:n,cellModel:x,cellOptions:a}}const{renderer:ii,hooks:_d}=te,Wd=["openFilter","setFilter","clearFilter","saveFilterPanel","resetFilterPanel","getCheckedFilters","updateFilterOptionStatus"];_d.add("tableFilterModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refTableHeader:x,refTableBody:m,refTableFilter:y}=e.getRefMaps(),{computeFilterOpts:I,computeMouseOpts:P}=e.getComputeMaps(),d=$=>{const{filterStore:L}=n;L.options.forEach(M=>{M.checked=M._checked}),e.confirmFilterEvent($)},f=($,L,M)=>{const{filterStore:F}=n;F.options.forEach(T=>{T._checked=!1}),M._checked=L,e.checkFilterOptions(),d($)},b=($,L,M)=>{M._checked=L,e.checkFilterOptions()},j=$=>{const{filterStore:L}=n;e.handleClearFilter(L.column),e.confirmFilterEvent($)},A={checkFilterOptions(){const{filterStore:$}=n;$.isAllSelected=$.options.every(L=>L._checked),$.isIndeterminate=!$.isAllSelected&&$.options.some(L=>L._checked)},triggerFilterEvent($,L,M){const{initStore:F,filterStore:T}=n;if(T.column===L&&T.visible)T.visible=!1;else{const{target:w,pageX:C}=$,{visibleWidth:R}=Cs(),{filters:k,filterMultiple:_,filterRender:se}=L,he=ct(se)?ii.get(se.name):null,Z=L.filterRecoverMethod||(he?he.tableFilterRecoverMethod||he.filterRecoverMethod:null);a._currFilterParams=M,Object.assign(T,{multiple:_,options:k,column:L,style:null}),T.options.forEach(N=>{const{_checked:J,checked:ee}=N;N._checked=ee,!ee&&J!==ee&&Z&&Z({option:N,column:L,$table:e})}),this.checkFilterOptions(),T.visible=!0,F.filter=!0,ae(()=>{const N=x.value,J=m.value,ee=N?N.$el:null,fe=J.$el;if(!fe)return;const ke=y.value,Be=ke?ke.$el:null;if(!Be)return;const Ae=Be.offsetWidth,Y=Be.offsetHeight,H=Be.querySelector(".vxe-table--filter-header"),ce=Be.querySelector(".vxe-table--filter-footer"),ne=Ae/2,oe=10,me=fe.clientWidth-Ae-oe;let be,Se;const Ce={top:`${w.offsetTop+w.offsetParent.offsetTop+w.offsetHeight}px`};let re=null;const ve=fe.clientHeight-(ee?ee.clientHeight/2:0);if(Y>=ve&&(re=Math.max(40,ve-(ce?ce.offsetHeight:0)-(H?H.offsetHeight:0))),L.fixed==="left"?be=w.offsetLeft+w.offsetParent.offsetLeft-ne:L.fixed==="right"?Se=w.offsetParent.offsetWidth-w.offsetLeft+(w.offsetParent.offsetParent.offsetWidth-w.offsetParent.offsetLeft)-L.renderWidth-ne:be=w.offsetLeft+w.offsetParent.offsetLeft-ne-fe.scrollLeft,be){const X=C+Ae-ne+oe-R;X>0&&(be-=X),Ce.left=`${Math.min(me,Math.max(oe,be))}px`}else if(Se){const X=C+Ae-ne+oe-R;X>0&&(Se+=X),Ce.right=`${Math.max(oe,Se)}px`}T.style=Ce,T.maxHeight=re})}e.dispatchEvent("filter-visible",{column:L,field:L.field,property:L.field,filterList:e.getCheckedFilters(),visible:T.visible},$)},handleClearFilter($){if($){const{filters:L,filterRender:M}=$;if(L){const F=ct(M)?ii.get(M.name):null,T=$.filterResetMethod||(F?F.tableFilterResetMethod||F.filterResetMethod:null);L.forEach(w=>{w._checked=!1,w.checked=!1,T||(w.data=r.clone(w.resetValue,!0))}),T&&T({options:L,column:$,$table:e})}}},handleColumnConfirmFilter($,L){const{mouseConfig:M}=o,{scrollXLoad:F,scrollYLoad:T}=n,w=I.value,C=P.value,{field:R}=$,k=[],_=[];$.filters.forEach(Z=>{Z.checked&&(k.push(Z.value),_.push(Z.data))});const se=e.getCheckedFilters(),he={$table:e,$event:L,column:$,field:R,property:R,values:k,datas:_,filters:se,filterList:se};return w.remote||(e.handleTableData(!0),e.checkSelectionStatus()),M&&C.area&&e.handleFilterEvent&&e.handleFilterEvent(L,he),L&&e.dispatchEvent("filter-change",he,L),e.closeFilter(),e.updateFooter().then(()=>{const{scrollXLoad:Z,scrollYLoad:N}=n;if(F||Z||T||N)return(F||Z)&&e.updateScrollXSpace(),(T||N)&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>{setTimeout(()=>e.recalculate(),50)})},confirmFilterEvent($){const{filterStore:L}=n,{column:M}=L;e.handleColumnConfirmFilter(M,$)},handleFilterChangeRadioOption:f,handleFilterChangeMultipleOption:b,handleFilterChangeOption($,L,M){const{filterStore:F}=n;F.multiple?b($,L,M):f($,L,M)},handleFilterConfirmFilter:d,handleFilterResetFilter:j};return Object.assign(Object.assign({},{openFilter($){const L=to(e,$);if(L&&L.filters){const{elemStore:M}=a,{fixed:F}=L;return e.scrollToColumn(L).then(()=>{const T=Eo(M[`${F||"main"}-header-wrapper`]||M["main-header-wrapper"]);if(T){const w=T.querySelector(`.vxe-header--column.${L.id} .vxe-filter--btn`);dd(w,"click")}})}return ae()},setFilter($,L,M){const F=to(e,$);return F&&F.filters&&(F.filters=Ji(L||[]),M)?e.handleColumnConfirmFilter(F,new Event("click")):ae()},clearFilter($){const{filterStore:L}=n,{tableFullColumn:M}=a,F=I.value;let T;return $?(T=to(e,$),T&&A.handleClearFilter(T)):M.forEach(A.handleClearFilter),(!$||T!==L.column)&&Object.assign(L,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),F.remote?ae():e.updateData()},saveFilterPanel(){return d(null),ae()},resetFilterPanel(){return j(null),ae()},getCheckedFilters(){const{tableFullColumn:$}=a,L=[];return $.forEach(M=>{const{field:F,filters:T}=M,w=[],C=[];T&&T.length&&(T.forEach(R=>{R.checked&&(w.push(R.value),C.push(R.data))}),w.length&&L.push({column:M,field:F,property:F,values:w,datas:C}))}),L},updateFilterOptionStatus($,L){return $._checked=L,$.checked=L,ae()}}),A)},setupGrid(e){return e.extendTableMethods(Wd)}});const{menus:zd,hooks:qd,globalEvents:ls,GLOBAL_EVENT_KEYS:ns}=te,Xd=["closeMenu"];qd.add("tableMenuModule",{setupTable(e){const{xID:o,props:n,reactData:a,internalData:x}=e,{refElem:m,refTableFilter:y,refTableMenu:I}=e.getRefMaps(),{computeMouseOpts:P,computeIsMenu:d,computeMenuOpts:f}=e.getComputeMaps();let b={},j={};const A=(Q,$,L)=>{const{ctxMenuStore:M}=a,F=d.value,T=f.value,w=T[$],C=T.visibleMethod;if(w){const{options:R,disabled:k}=w;k?Q.preventDefault():F&&R&&R.length&&(L.options=R,e.preventEvent(Q,"event.showMenu",L,()=>{if(!C||C(L)){Q.preventDefault(),e.updateZindex();const{scrollTop:_,scrollLeft:se,visibleHeight:he,visibleWidth:Z}=Cs();let N=Q.clientY+_,J=Q.clientX+se;const ee=()=>{x._currMenuParams=L,Object.assign(M,{visible:!0,list:R,selected:null,selectChild:null,showChild:!1,style:{zIndex:x.tZindex,top:`${N}px`,left:`${J}px`}}),ae(()=>{const Y=I.value.getRefMaps().refElem.value,H=Y.clientHeight,ce=Y.clientWidth,{boundingTop:ne,boundingLeft:oe}=ps(Y),me=ne+H-he,be=oe+ce-Z;me>-10&&(M.style.top=`${Math.max(_+2,N-H-2)}px`),be>-10&&(M.style.left=`${Math.max(se+2,J-ce-2)}px`)})},{keyboard:fe,row:ke,column:Be}=L;fe&&ke&&Be?e.scrollToRow(ke,Be).then(()=>{const Ae=e.getCellElement(ke,Be);if(Ae){const{boundingTop:Y,boundingLeft:H}=ps(Ae);N=Y+_+Math.floor(Ae.offsetHeight/2),J=H+se+Math.floor(Ae.offsetWidth/2)}ee()}):ee()}else b.closeMenu()}))}e.closeFilter()};return b={closeMenu(){return Object.assign(a.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),ae()}},j={moveCtxMenu(Q,$,L,M,F,T){let w;const C=r.findIndexOf(T,R=>$[L]===R);if(M)F&&cn($.selected)?$.showChild=!0:($.showChild=!1,$.selectChild=null);else if(ls.hasKey(Q,ns.ARROW_UP)){for(let R=C-1;R>=0;R--)if(T[R].visible!==!1){w=T[R];break}$[L]=w||T[T.length-1]}else if(ls.hasKey(Q,ns.ARROW_DOWN)){for(let R=C+1;R<T.length;R++)if(T[R].visible!==!1){w=T[R];break}$[L]=w||T[0]}else $[L]&&(ls.hasKey(Q,ns.ENTER)||ls.hasKey(Q,ns.SPACEBAR))&&j.ctxMenuLinkEvent(Q,$[L])},handleOpenMenuEvent:A,handleGlobalContextmenuEvent(Q){const{mouseConfig:$,menuConfig:L}=n,{editStore:M,ctxMenuStore:F}=a,{visibleColumn:T}=x,w=y.value,C=I.value,R=P.value,k=f.value,_=m.value,{selected:se}=M,he=["header","body","footer"];if(ct(L)){if(F.visible&&C&&bt(Q,C.getRefMaps().refElem.value).flag){Q.preventDefault();return}if(x._keyCtx){const Z="body",N={type:Z,$table:e,keyboard:!0,columns:T.slice(0),$event:Q};if($&&R.area){const J=e.getActiveCellArea();if(J&&J.row&&J.column){N.row=J.row,N.column=J.column,A(Q,Z,N);return}}else if($&&R.selected&&se.row&&se.column){N.row=se.row,N.column=se.column,A(Q,Z,N);return}}for(let Z=0;Z<he.length;Z++){const N=he[Z],J=bt(Q,_,`vxe-${N}--column`,fe=>fe.parentNode.parentNode.parentNode.getAttribute("xid")===o),ee={type:N,$table:e,columns:T.slice(0),$event:Q};if(J.flag){const fe=J.targetElem,ke=e.getColumnNode(fe),Be=ke?ke.item:null;let Ae=`${N}-`;if(Be&&Object.assign(ee,{column:Be,columnIndex:e.getColumnIndex(Be),cell:fe}),N==="body"){const H=e.getRowNode(fe.parentNode),ce=H?H.item:null;Ae="",ce&&(ee.row=ce,ee.rowIndex=e.getRowIndex(ce))}const Y=`${Ae}cell-menu`;A(Q,N,ee),e.dispatchEvent(Y,ee,Q);return}else if(bt(Q,_,`vxe-table--${N}-wrapper`,fe=>fe.getAttribute("xid")===o).flag){k.trigger==="cell"?Q.preventDefault():A(Q,N,ee);return}}}w&&!bt(Q,w.$el).flag&&e.closeFilter(),b.closeMenu()},ctxMenuMouseoverEvent(Q,$,L){const M=Q.currentTarget,{ctxMenuStore:F}=a;Q.preventDefault(),Q.stopPropagation(),F.selected=$,F.selectChild=L,L||(F.showChild=cn($),F.showChild&&ae(()=>{const T=M.nextElementSibling;if(T){const{boundingTop:w,boundingLeft:C,visibleHeight:R,visibleWidth:k}=ps(M),_=w+M.offsetHeight,se=C+M.offsetWidth;let he="",Z="";se+T.offsetWidth>k-10&&(he="auto",Z=`${M.offsetWidth}px`);let N="",J="";_+T.offsetHeight>R-10&&(N="auto",J="0"),T.style.left=he,T.style.right=Z,T.style.top=N,T.style.bottom=J}}))},ctxMenuMouseoutEvent(Q,$){const{ctxMenuStore:L}=a;$.children||(L.selected=null),L.selectChild=null},ctxMenuLinkEvent(Q,$){if(!$.disabled&&($.code||!$.children||!$.children.length)){const L=zd.get($.code),M=Object.assign({},x._currMenuParams,{menu:$,$table:e,$grid:e.xegrid,$event:Q}),F=L?L.tableMenuMethod||L.menuMethod:null;F&&F(M,Q),e.dispatchEvent("menu-click",M,Q),b.closeMenu()}}},Object.assign(Object.assign({},b),j)},setupGrid(e){return e.extendTableMethods(Xd)}});const{getConfig:Kd,renderer:Ud,hooks:Yd,getI18n:ai}=te,Gd=["insert","insertAt","insertNextAt","insertChild","insertChildAt","insertChildNextAt","remove","removeCheckboxRow","removeRadioRow","removeCurrentRow","getRecordset","getInsertRecords","getRemoveRecords","getUpdateRecords","getEditRecord","getActiveRecord","getSelectedCell","clearEdit","clearActived","clearSelected","isEditByRow","isActiveByRow","setEditRow","setActiveRow","setEditCell","setActiveCell","setSelectCell"];Yd.add("tableEditModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refElem:x}=e.getRefMaps(),{computeMouseOpts:m,computeEditOpts:y,computeCheckboxOpts:I,computeTreeOpts:P,computeValidOpts:d}=e.getComputeMaps();let f={},b={};const j=(w,C)=>{const{model:R,editRender:k}=C;k&&(R.value=ao(w,C),R.update=!1)},A=(w,C)=>{const{model:R,editRender:k}=C;k&&R.update&&(ol(w,C,R.value),R.update=!1,R.value=null)},Q=()=>{const w=x.value;if(w){const C=w.querySelector(".col--selected");C&&Ao(C,"col--selected")}};function $(){const{editStore:w,tableColumn:C}=n,R=y.value,{actived:k}=w,{row:_,column:se}=k;(_||se)&&(R.mode==="row"?C.forEach(he=>A(_,he)):A(_,se))}function L(w,C){const{tableFullTreeData:R,afterFullData:k,fullDataRowIdData:_,fullAllDataRowIdData:se}=a,he=P.value,{rowField:Z,parentField:N,mapChildrenField:J}=he,ee=he.children||he.childrenField,fe=C?"push":"unshift";w.forEach(ke=>{const Be=ke[N],Ae=Oe(e,ke),Y=Be?r.findTree(R,H=>Be===H[Z],{children:J}):null;if(Y){const{item:H}=Y,ce=se[Oe(e,H)],ne=ce?ce.level:0;let oe=H[ee],me=H[J];r.isArray(oe)||(oe=H[ee]=[]),r.isArray(me)||(me=H[ee]=[]),oe[fe](ke),me[fe](ke);const be={row:ke,rowid:Ae,seq:-1,index:-1,_index:-1,$index:-1,items:oe,parent:H,level:ne+1,height:0};_[Ae]=be,se[Ae]=be}else{k[fe](ke),R[fe](ke);const H={row:ke,rowid:Ae,seq:-1,index:-1,_index:-1,$index:-1,items:R,parent:null,level:0,height:0};_[Ae]=H,se[Ae]=H}})}const M=(w,C,R)=>{const{treeConfig:k}=o,{mergeList:_,editStore:se}=n,{tableFullTreeData:he,afterFullData:Z,tableFullData:N,fullDataRowIdData:J,fullAllDataRowIdData:ee}=a,fe=P.value,{transform:ke,rowField:Be,mapChildrenField:Ae}=fe,Y=fe.children||fe.childrenField;r.isArray(w)||(w=[w]);const H=_o(e.defineField(w.map(ne=>Object.assign(k&&ke?{[Ae]:[],[Y]:[]}:{},ne))));if(r.eqNull(C))k&&ke?L(H,!1):(H.forEach(ne=>{const oe=Oe(e,ne),me={row:ne,rowid:oe,seq:-1,index:-1,_index:-1,$index:-1,items:Z,parent:null,level:0,height:0};J[oe]=me,ee[oe]=me,Z.unshift(ne),N.unshift(ne)}),_.forEach(ne=>{const{row:oe}=ne;oe>0&&(ne.row=oe+H.length)}));else if(C===-1)k&&ke?L(H,!0):(H.forEach(ne=>{const oe=Oe(e,ne),me={row:ne,rowid:oe,seq:-1,index:-1,_index:-1,$index:-1,items:Z,parent:null,level:0,height:0};J[oe]=me,ee[oe]=me,Z.push(ne),N.push(ne)}),_.forEach(ne=>{const{row:oe,rowspan:me}=ne;oe+me>Z.length&&(ne.rowspan=me+H.length)}));else if(k&&ke){const ne=r.findTree(he,oe=>C[Be]===oe[Be],{children:Ae});if(ne){const{parent:oe}=ne,me=oe?oe[Ae]:he,be=ee[Oe(e,oe)],Se=be?be.level:0;if(H.forEach((Ce,re)=>{const ve=Oe(e,Ce);oe&&(Ce[fe.parentField]=oe[Be]);let X=ne.index+re;R&&(X=X+1),me.splice(X,0,Ce);const ie={row:Ce,rowid:ve,seq:-1,index:-1,_index:-1,$index:-1,items:me,parent:oe,level:Se+1,height:0};J[ve]=ie,ee[ve]=ie}),oe){const Ce=r.findTree(he,re=>C[Be]===re[Be],{children:Y});if(Ce){const re=Ce.items;let ve=Ce.index;R&&(ve=ve+1),re.splice(ve,0,...H)}}}else L(H,!0)}else{if(k)throw new Error(ai("vxe.error.noTree",["insert"]));let ne=-1;if(r.isNumber(C)?C<Z.length&&(ne=C):ne=e.findRowIndexOf(Z,C),R&&(ne=Math.min(Z.length,ne+1)),ne===-1)throw new Error(ai("vxe.error.unableInsert"));Z.splice(ne,0,...H);const oe=e.findRowIndexOf(N,C);oe>-1?N.splice(oe+(R?1:0),0,...H):N.push(...H),_.forEach(me=>{const{row:be,rowspan:Se}=me;be>ne?me.row=be+H.length:be+Se>ne&&(me.rowspan=Se+H.length)})}const{insertMaps:ce}=se;return H.forEach(ne=>{const oe=Oe(e,ne);ce[oe]=ne}),e.cacheRowMap(),e.updateScrollYStatus(),e.handleTableData(k&&ke),k&&ke||e.updateAfterDataIndex(),e.updateFooter(),e.checkSelectionStatus(),n.scrollYLoad&&e.updateScrollYSpace(),ae().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:H.length?H[H.length-1]:null,rows:H}))},F=(w,C,R,k)=>{const{treeConfig:_}=o,se=P.value,{transform:he,rowField:Z,parentField:N}=se;return _&&he?(r.isArray(w)||(w=[w]),M(w.map(J=>Object.assign({},J,{[N]:C[Z]})),R,k)):(Gt("vxe.error.errProp",["tree-config.treeConfig=false","tree-config.treeConfig=true"]),Promise.resolve({row:null,rows:[]}))},T=(w,C)=>{const{mouseConfig:R}=o,{editStore:k}=n,{actived:_,focused:se}=k,{row:he,column:Z}=_,N=d.value,J=m.value;if(he||Z){if(C&&Oe(e,C)!==Oe(e,he))return ae();$(),_.args=null,_.row=null,_.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:he,rowIndex:e.getRowIndex(he),$rowIndex:e.getVMRowIndex(he),column:Z,columnIndex:e.getColumnIndex(Z),$columnIndex:e.getVMColumnIndex(Z)},w||null)}return ae(()=>{if(R&&J.area&&e.handleRecalculateCellAreas)return e.handleRecalculateCellAreas()}),N.autoClear&&(N.msgMode!=="full"||Kd().cellVaildMode==="obsolete")&&e.clearValidate?e.clearValidate():(se.row=null,se.column=null,ae())};return f={insert(w){return M(w,null)},insertAt(w,C){return M(w,C)},insertNextAt(w,C){return M(w,C,!0)},insertChild(w,C){return F(w,C,null)},insertChildAt(w,C,R){return F(w,C,R)},insertChildNextAt(w,C,R){return F(w,C,R,!0)},remove(w){const{treeConfig:C}=o,{mergeList:R,editStore:k,selectCheckboxMaps:_}=n,{tableFullTreeData:se,afterFullData:he,tableFullData:Z}=a,N=I.value,J=P.value,{transform:ee,mapChildrenField:fe}=J,ke=J.children||J.childrenField,{actived:Be,removeMaps:Ae}=k,Y=Object.assign({},k.insertMaps),H=Object.assign({},n.pendingRowMaps),{checkField:ce}=N;let ne=[];if(w?r.isArray(w)||(w=[w]):w=Z,w.forEach(oe=>{if(!e.isInsertByRow(oe)){const me=Oe(e,oe);Ae[me]=oe}}),!ce){const oe=Object.assign({},_);w.forEach(me=>{const be=Oe(e,me);oe[be]&&delete oe[be]}),n.selectCheckboxMaps=oe}return Z===w?(w=ne=Z.slice(0),a.tableFullData=[],a.afterFullData=[],e.clearMergeCells()):C&&ee?w.forEach(oe=>{const me=Oe(e,oe),be=r.findTree(se,re=>me===Oe(e,re),{children:fe});if(be){const re=be.items.splice(be.index,1);ne.push(re[0])}const Se=r.findTree(se,re=>me===Oe(e,re),{children:ke});Se&&Se.items.splice(Se.index,1);const Ce=e.findRowIndexOf(he,oe);Ce>-1&&he.splice(Ce,1)}):w.forEach(oe=>{const me=e.findRowIndexOf(Z,oe);if(me>-1){const Se=Z.splice(me,1);ne.push(Se[0])}const be=e.findRowIndexOf(he,oe);be>-1&&(R.forEach(Se=>{const{row:Ce,rowspan:re}=Se;Ce>be?Se.row=Ce-1:Ce+re>be&&(Se.rowspan=re-1)}),he.splice(be,1))}),Be.row&&e.findRowIndexOf(w,Be.row)>-1&&f.clearEdit(),w.forEach(oe=>{const me=Oe(e,oe);Y[me]&&delete Y[me],H[me]&&delete H[me]}),k.insertMaps=Y,n.pendingRowMaps=H,e.updateFooter(),e.cacheRowMap(),e.handleTableData(C&&ee),C&&ee||e.updateAfterDataIndex(),e.checkSelectionStatus(),n.scrollYLoad&&e.updateScrollYSpace(),ae().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:ne.length?ne[ne.length-1]:null,rows:ne}))},removeCheckboxRow(){return f.remove(e.getCheckboxRecords()).then(w=>(e.clearCheckboxRow(),w))},removeRadioRow(){const w=e.getRadioRecord();return f.remove(w||[]).then(C=>(e.clearRadioRow(),C))},removeCurrentRow(){const w=e.getCurrentRecord();return f.remove(w||[]).then(C=>(e.clearCurrentRow(),C))},getRecordset(){const w=f.getRemoveRecords(),C=e.getPendingRecords(),R=w.concat(C),k=f.getUpdateRecords().filter(_=>!R.some(se=>e.eqRow(se,_)));return{insertRecords:f.getInsertRecords(),removeRecords:w,updateRecords:k,pendingRecords:C}},getInsertRecords(){const{editStore:w}=n,{fullAllDataRowIdData:C}=a,{insertMaps:R}=w,k=[];return r.each(R,(_,se)=>{C[se]&&k.push(_)}),k},getRemoveRecords(){const{editStore:w}=n,{removeMaps:C}=w,R=[];return r.each(C,k=>{R.push(k)}),R},getUpdateRecords(){const{keepSource:w,treeConfig:C}=o,{tableFullData:R}=a,k=P.value;return w?($(),C?r.filterTree(R,_=>e.isUpdateByRow(_),k):R.filter(_=>e.isUpdateByRow(_))):[]},getActiveRecord(){return this.getEditRecord()},getEditRecord(){const{editStore:w}=n,{afterFullData:C}=a,R=x.value,{args:k,row:_}=w.actived;return k&&e.findRowIndexOf(C,_)>-1&&R.querySelectorAll(".vxe-body--column.col--active").length?Object.assign({},k):null},getSelectedCell(){const{editStore:w}=n,{args:C,column:R}=w.selected;return C&&R?Object.assign({},C):null},clearActived(w){return this.clearEdit(w)},clearEdit(w){return T(null,w)},clearSelected(){const{editStore:w}=n,{selected:C}=w;return C.row=null,C.column=null,Q(),ae()},isActiveByRow(w){return this.isEditByRow(w)},isEditByRow(w){const{editStore:C}=n;return C.actived.row===w},setActiveRow(w){return f.setEditRow(w)},setEditRow(w,C){const{visibleColumn:R}=a;let k=r.find(R,_=>ct(_.editRender));return C&&(k=r.isString(C)?e.getColumnByField(C):C),e.setEditCell(w,k)},setActiveCell(w,C){return f.setEditCell(w,C)},setEditCell(w,C){const{editConfig:R}=o,k=r.isString(C)?e.getColumnByField(C):C;return w&&k&&ct(R)&&ct(k.editRender)?e.scrollToRow(w,k).then(()=>{const _=e.getCellElement(w,k);return _&&(b.handleEdit({row:w,rowIndex:e.getRowIndex(w),column:k,columnIndex:e.getColumnIndex(k),cell:_,$table:e}),a._lastCallTime=Date.now()),ae()}):ae()},setSelectCell(w,C){const{tableData:R}=n,k=y.value,_=r.isString(C)?e.getColumnByField(C):C;if(w&&_&&k.trigger!=="manual"){const se=e.findRowIndexOf(R,w);if(se>-1&&_){const he=e.getCellElement(w,_),Z={row:w,rowIndex:se,column:_,columnIndex:e.getColumnIndex(_),cell:he};e.handleSelected(Z,{})}}return ae()}},b={handleEdit(w,C){const{editConfig:R,mouseConfig:k}=o,{editStore:_,tableColumn:se}=n,he=y.value,{mode:Z}=he,{actived:N,focused:J}=_,{row:ee,column:fe}=w,{editRender:ke}=fe,Be=w.cell||e.getCellElement(ee,fe),Ae=he.beforeEditMethod||he.activeMethod;if(w.cell=Be,Be&&ct(R)&&ct(ke)&&!e.isPendingByRow(ee)){if(N.row!==ee||Z==="cell"&&N.column!==fe){let Y="edit-disabled";if(!Ae||Ae(Object.assign(Object.assign({},w),{$table:e,$grid:e.xegrid}))){k&&(f.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),N.column&&T(C),Y="edit-activated",fe.renderHeight=Be.offsetHeight,N.args=w,N.row=ee,N.column=fe,Z==="row"?se.forEach(ce=>j(ee,ce)):j(ee,fe);const H=he.afterEditMethod;ae(()=>{b.handleFocus(w,C),H&&H(Object.assign(Object.assign({},w),{$table:e,$grid:e.xegrid}))})}e.dispatchEvent(Y,{row:ee,rowIndex:e.getRowIndex(ee),$rowIndex:e.getVMRowIndex(ee),column:fe,columnIndex:e.getColumnIndex(fe),$columnIndex:e.getVMColumnIndex(fe)},C),Y==="edit-activated"&&e.dispatchEvent("edit-actived",{row:ee,rowIndex:e.getRowIndex(ee),$rowIndex:e.getVMRowIndex(ee),column:fe,columnIndex:e.getColumnIndex(fe),$columnIndex:e.getVMColumnIndex(fe)},C)}else{const{column:Y}=N;if(k&&(f.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),Y!==fe){const{model:H}=Y;H.update&&ol(ee,Y,H.value),e.clearValidate&&e.clearValidate(ee,fe)}fe.renderHeight=Be.offsetHeight,N.args=w,N.column=fe,setTimeout(()=>{b.handleFocus(w,C)})}J.column=null,J.row=null,e.focus()}return ae()},handleActived(w,C){return b.handleEdit(w,C)},handleClearEdit:T,handleFocus(w){const{row:C,column:R,cell:k}=w,{editRender:_}=R,se=y.value;if(ct(_)){const he=Ud.get(_.name);let Z=_.autofocus||_.autoFocus,N=_.autoSelect||_.autoselect,J;if(se.autoFocus&&(!Z&&he&&(Z=he.tableAutoFocus||he.tableAutofocus||he.autofocus),!N&&he&&(N=he.tableAutoSelect||he.autoselect),r.isFunction(Z)?J=Z(w):Z&&(Z===!0?J=k.querySelector("input,textarea"):J=k.querySelector(Z),J&&J.focus())),J){if(N)J.select();else if(dn.msie){const ee=J.createTextRange();ee.collapse(!1),ee.select()}}else se.autoPos&&(R.fixed||e.scrollToRow(C,R))}},handleSelected(w,C){const{mouseConfig:R}=o,{editStore:k}=n,_=m.value,se=y.value,{actived:he,selected:Z}=k,{row:N,column:J}=w,ee=R&&_.selected;return ee&&(Z.row!==N||Z.column!==J)&&(he.row!==N||se.mode==="cell"&&he.column!==J)&&(T(C),f.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea()),Z.args=w,Z.row=N,Z.column=J,ee&&b.addCellSelectedClass(),e.focus(),C&&e.dispatchEvent("cell-selected",w,C)),ae()},addCellSelectedClass(){const{editStore:w}=n,{selected:C}=w,{row:R,column:k}=C;if(Q(),R&&k){const _=e.getCellElement(R,k);_&&tl(_,"col--selected")}}},Object.assign(Object.assign({},f),b)},setupGrid(e){return e.extendTableMethods(Gd)}});const Zd='body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}';function Qd(e,o){return new Blob([e],{type:`text/${o.type};charset=utf-8;`})}function Jd(e,o){const{style:n}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>',`<style>${Zd}</style>`,n?`<style>${n}</style>`:"","</head>",`<body>${o}</body>`,"</html>"].join("")}const{getI18n:Go,hooks:eu,renderer:Ys}=te;let on;const tu="\uFEFF",jl=`\r
`;function ci(e){return e.field||["seq","checkbox","radio"].indexOf(e.type)>-1}const ia=e=>{const o=[];return e.forEach(n=>{n.childNodes&&n.childNodes.length?(o.push(n),o.push(...ia(n.childNodes))):o.push(n)}),o},ou=e=>{let o=1;const n=(m,y)=>{if(y&&(m._level=y._level+1,o<m._level&&(o=m._level)),m.childNodes&&m.childNodes.length){let I=0;m.childNodes.forEach(P=>{n(P,m),I+=P._colSpan}),m._colSpan=I}else m._colSpan=1};e.forEach(m=>{m._level=1,n(m)});const a=[];for(let m=0;m<o;m++)a.push([]);return ia(e).forEach(m=>{m.childNodes&&m.childNodes.length?m._rowSpan=1:m._rowSpan=o-m._level+1,a[m._level-1].push(m)}),a};function lu(e){return e===!0?"full":e||"default"}function ln(e){return e==="TRUE"||e==="true"||e===!0}function ss(e,o){const{footerFilterMethod:n}=e;return n?o.filter((a,x)=>n({items:a,$rowIndex:x})):o}function nu(e,o){if(o){if(e.type==="seq")return`	${o}`;switch(e.cellType){case"string":if(!isNaN(o))return`	${o}`;break;case"number":break;default:if(o.length>=12&&!isNaN(o))return`	${o}`;break}}return o}function nn(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function Fo(e,o){return e.getElementsByTagName(o)}function di(e){return`#${e}@${r.uniqueId()}`}function aa(e,o){return e.replace(/#\d+@\d+/g,n=>r.hasOwnProp(o,n)?o[n]:n)}function ui(e,o){return aa(e,o).replace(/^"+$/g,a=>'"'.repeat(Math.ceil(a.length/2)))}function ca(e,o,n){const a=o.split(jl),x=[];let m=[];if(a.length){const y={},I=Date.now();a.forEach(P=>{if(P){const d={};P=P.replace(/("")|(\n)/g,(b,j)=>{const A=di(I);return y[A]=j?'"':`
`,A}).replace(/"(.*?)"/g,(b,j)=>{const A=di(I);return y[A]=aa(j,y),A});const f=P.split(n);m.length?(f.forEach((b,j)=>{j<m.length&&(d[m[j]]=ui(b.trim(),y))}),x.push(d)):m=f.map(b=>ui(b.trim(),y))}})}return{fields:m,rows:x}}function su(e,o){return ca(e,o,",")}function ru(e,o){return ca(e,o,"	")}function iu(e,o){const a=new DOMParser().parseFromString(o,"text/html"),x=Fo(a,"body"),m=[],y=[];if(x.length){const I=Fo(x[0],"table");if(I.length){const P=Fo(I[0],"thead");if(P.length){r.arrayEach(Fo(P[0],"tr"),f=>{r.arrayEach(Fo(f,"th"),b=>{y.push(b.textContent)})});const d=Fo(I[0],"tbody");d.length&&r.arrayEach(Fo(d[0],"tr"),f=>{const b={};r.arrayEach(Fo(f,"td"),(j,A)=>{y[A]&&(b[y[A]]=j.textContent||"")}),m.push(b)})}}}return{fields:y,rows:m}}function au(e,o){const a=new DOMParser().parseFromString(o,"application/xml"),x=Fo(a,"Worksheet"),m=[],y=[];if(x.length){const I=Fo(x[0],"Table");if(I.length){const P=Fo(I[0],"Row");P.length&&(r.arrayEach(Fo(P[0],"Cell"),d=>{y.push(d.textContent)}),r.arrayEach(P,(d,f)=>{if(f){const b={},j=Fo(d,"Cell");r.arrayEach(j,(A,Q)=>{y[Q]&&(b[y[Q]]=A.textContent)}),m.push(b)}}))}}return{fields:y,rows:m}}function fi(e){r.eachTree(e,o=>{delete o._level,delete o._colSpan,delete o._rowSpan,delete o._children,delete o.childNodes},{children:"children"})}function cu(e,o){const n=[];return e.forEach(a=>{const x=a.field;x&&n.push(x)}),o.some(a=>n.indexOf(a)>-1)}const du=["exportData","importByFile","importData","saveFile","readFile","print","getPrintHtml","openImport","closeImport","openExport","closeExport","openPrint","closePrint"];eu.add("tableExportModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{computeTreeOpts:x,computePrintOpts:m,computeExportOpts:y,computeImportOpts:I,computeCustomOpts:P,computeSeqOpts:d,computeRadioOpts:f,computeCheckboxOpts:b,computeColumnOpts:j}=e.getComputeMaps(),A=go("$xeGrid",null),Q=Y=>{const H=x.value,ce=H.children||H.childrenField;return Y[ce]&&Y[ce].length},$=(Y,H,ce,ne,oe)=>{const be=d.value.seqMethod||ne.seqMethod;return be?be({row:H,rowIndex:e.getRowIndex(H),$rowIndex:ce,column:ne,columnIndex:e.getColumnIndex(ne),$columnIndex:oe}):Y};function L(Y,H){const ce=j.value,ne=H.headerExportMethod||ce.headerExportMethod;return ne?ne({column:H,options:Y,$table:e}):(Y.original?H.field:H.getTitle())||""}const M=Y=>r.isBoolean(Y)?Y?"TRUE":"FALSE":Y,F=Y=>el(Y)?"":`${Y}`,T=(Y,H,ce)=>{const{isAllExpand:ne,mode:oe}=Y,{treeConfig:me}=o,be=f.value,Se=b.value,Ce=x.value,re=j.value;if(on||(on=document.createElement("div")),me){const ve=Ce.children||Ce.childrenField,X=[],ie=new Map;return r.eachTree(ce,(ue,pe,W,Ge,Ve,qe)=>{const Ee=ue._row||ue,Me=Ve&&Ve._row?Ve._row:Ve;if(ne||!Me||ie.has(Me)&&e.isTreeExpandByRow(Me)){const xe=Q(Ee),Ze={_row:Ee,_level:qe.length-1,_hasChild:xe,_expand:xe&&e.isTreeExpandByRow(Ee)};H.forEach((Fe,$e)=>{let He="";const ge=Fe.editRender||Fe.cellRender;let we=Fe.exportMethod||re.exportMethod;if(!we&&ge&&ge.name){const je=Ys.get(ge.name);je&&(we=je.tableExportMethod||je.exportMethod)}if(we||(we=re.exportMethod),we)He=we({$table:e,row:Ee,column:Fe,options:Y});else switch(Fe.type){case"seq":{const je=Ge.map((Ne,Ie)=>Ie%2===0?Number(Ne)+1:".").join("");He=oe==="all"?je:$(je,Ee,pe,Fe,$e);break}case"checkbox":He=M(e.isCheckedByCheckboxRow(Ee)),Ze._checkboxLabel=Se.labelField?r.get(Ee,Se.labelField):"",Ze._checkboxDisabled=Se.checkMethod&&!Se.checkMethod({row:Ee});break;case"radio":He=M(e.isCheckedByRadioRow(Ee)),Ze._radioLabel=be.labelField?r.get(Ee,be.labelField):"",Ze._radioDisabled=be.checkMethod&&!be.checkMethod({row:Ee});break;default:if(Y.original)He=ao(Ee,Fe);else if(He=e.getCellLabel(Ee,Fe),Fe.type==="html")on.innerHTML=He,He=on.innerText.trim();else{const je=e.getCellElement(Ee,Fe);je&&(He=je.innerText.trim())}}Ze[Fe.id]=F(He)}),ie.set(Ee,1),X.push(Object.assign(Ze,Ee))}},{children:ve}),X}return ce.map((ve,X)=>{const ie={_row:ve};return H.forEach((ue,pe)=>{let W="";const Ge=ue.editRender||ue.cellRender;let Ve=ue.exportMethod||re.exportMethod;if(!Ve&&Ge&&Ge.name){const qe=Ys.get(Ge.name);qe&&(Ve=qe.tableExportMethod||qe.exportMethod)}if(Ve)W=Ve({$table:e,row:ve,column:ue,options:Y});else switch(ue.type){case"seq":{const qe=X+1;W=oe==="all"?qe:$(qe,ve,X,ue,pe);break}case"checkbox":W=M(e.isCheckedByCheckboxRow(ve)),ie._checkboxLabel=Se.labelField?r.get(ve,Se.labelField):"",ie._checkboxDisabled=Se.checkMethod&&!Se.checkMethod({row:ve});break;case"radio":W=M(e.isCheckedByRadioRow(ve)),ie._radioLabel=be.labelField?r.get(ve,be.labelField):"",ie._radioDisabled=be.checkMethod&&!be.checkMethod({row:ve});break;default:if(Y.original)W=ao(ve,ue);else if(W=e.getCellLabel(ve,ue),ue.type==="html")on.innerHTML=W,W=on.innerText.trim();else{const qe=e.getCellElement(ve,ue);qe&&(W=qe.innerText.trim())}}ie[ue.id]=F(W)}),ie})},w=Y=>{const{columns:H,dataFilterMethod:ce}=Y;let ne=Y.data;return ce&&(ne=ne.filter((oe,me)=>ce({row:oe,$rowIndex:me}))),T(Y,H,ne)},C=(Y,H,ce)=>{const ne=j.value,oe=ce.editRender||ce.cellRender;let me=ce.footerExportMethod;if(!me&&oe&&oe.name){const Se=Ys.get(oe.name);Se&&(me=Se.tableFooterExportMethod||Se.footerExportMethod)}me||(me=ne.footerExportMethod);const be=e.getVTColumnIndex(ce);return me?me({$table:e,items:H,itemIndex:be,row:H,_columnIndex:be,column:ce,options:Y}):r.isArray(H)?r.toValueString(H[be]):r.get(H,ce.field)},R=(Y,H,ce)=>{let ne=tu;if(Y.isHeader&&(ne+=H.map(oe=>nn(L(Y,oe))).join(",")+jl),ce.forEach(oe=>{ne+=H.map(me=>nn(nu(me,oe[me.id]))).join(",")+jl}),Y.isFooter){const{footerTableData:oe}=n;ss(Y,oe).forEach(be=>{ne+=H.map(Se=>nn(C(Y,be,Se))).join(",")+jl})}return ne},k=(Y,H,ce)=>{let ne="";if(Y.isHeader&&(ne+=H.map(oe=>nn(L(Y,oe))).join("	")+jl),ce.forEach(oe=>{ne+=H.map(me=>nn(oe[me.id])).join("	")+jl}),Y.isFooter){const{footerTableData:oe}=n;ss(Y,oe).forEach(be=>{ne+=H.map(Se=>nn(C(Y,be,Se))).join("	")+jl})}return ne},_=(Y,H,ce)=>{const ne=Y[H],oe=r.isUndefined(ne)||r.isNull(ne)?ce:ne;let Ce=oe==="title"||(oe===!0||oe==="tooltip")||oe==="ellipsis";const{scrollXLoad:re,scrollYLoad:ve}=n;return(re||ve)&&!Ce&&(Ce=!0),Ce},se=(Y,H,ce)=>{const{id:ne,border:oe,treeConfig:me,headerAlign:be,align:Se,footerAlign:Ce,showOverflow:re,showHeaderOverflow:ve}=o,{isAllSelected:X,isIndeterminate:ie,mergeList:ue}=n,pe=x.value,{print:W,isHeader:Ge,isFooter:Ve,isColgroup:qe,isMerge:Ee,colgroups:Me,original:xe}=Y,Ze="check-all",$e=[`<table class="${["vxe-table",`border--${lu(oe)}`,W?"is--print":"",Ge?"is--header":""].filter(ge=>ge).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${H.map(ge=>`<col style="width:${ge.renderWidth}px">`).join("")}</colgroup>`];if(Ge&&($e.push("<thead>"),qe&&!xe?Me.forEach(ge=>{$e.push(`<tr>${ge.map(we=>{const je=we.headerAlign||we.align||be||Se,Ne=_(we,"showHeaderOverflow",ve)?["col--ellipsis"]:[],Ie=L(Y,we);let Ke=0,ye=0;r.eachTree([we],B=>{(!B.childNodes||!we.childNodes.length)&&ye++,Ke+=B.renderWidth},{children:"childNodes"});const lt=Ke-ye;return je&&Ne.push(`col--${je}`),we.type==="checkbox"?`<th class="${Ne.join(" ")}" colspan="${we._colSpan}" rowspan="${we._rowSpan}"><div ${W?"":`style="width: ${lt}px"`}><input type="checkbox" class="${Ze}" ${X?"checked":""}><span>${Ie}</span></div></th>`:`<th class="${Ne.join(" ")}" colspan="${we._colSpan}" rowspan="${we._rowSpan}" title="${Ie}"><div ${W?"":`style="width: ${lt}px"`}><span>${so(Ie,!0)}</span></div></th>`}).join("")}</tr>`)}):$e.push(`<tr>${H.map(ge=>{const we=ge.headerAlign||ge.align||be||Se,je=_(ge,"showHeaderOverflow",ve)?["col--ellipsis"]:[],Ne=L(Y,ge);return we&&je.push(`col--${we}`),ge.type==="checkbox"?`<th class="${je.join(" ")}"><div ${W?"":`style="width: ${ge.renderWidth}px"`}><input type="checkbox" class="${Ze}" ${X?"checked":""}><span>${Ne}</span></div></th>`:`<th class="${je.join(" ")}" title="${Ne}"><div ${W?"":`style="width: ${ge.renderWidth}px"`}><span>${so(Ne,!0)}</span></div></th>`}).join("")}</tr>`),$e.push("</thead>")),ce.length&&($e.push("<tbody>"),me?ce.forEach(ge=>{$e.push("<tr>"+H.map(we=>{const je=we.align||Se,Ne=_(we,"showOverflow",re)?["col--ellipsis"]:[],Ie=ge[we.id];if(je&&Ne.push(`col--${je}`),we.treeNode){let Ke="";return ge._hasChild&&(Ke=`<i class="${ge._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),Ne.push("vxe-table--tree-node"),we.type==="radio"?`<td class="${Ne.join(" ")}" title="${Ie}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ge._level*pe.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ke}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${ne}" ${ge._radioDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._radioLabel}</span></div></div></div></td>`:we.type==="checkbox"?`<td class="${Ne.join(" ")}" title="${Ie}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ge._level*pe.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ke}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${ge._checkboxDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._checkboxLabel}</span></div></div></div></td>`:`<td class="${Ne.join(" ")}" title="${Ie}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${ge._level*pe.indent}px"><div class="vxe-table--tree-icon-wrapper">${Ke}</div><div class="vxe-table--tree-cell">${Ie}</div></div></div></td>`}return we.type==="radio"?`<td class="${Ne.join(" ")}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><input type="radio" name="radio_${ne}" ${ge._radioDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._radioLabel}</span></div></td>`:we.type==="checkbox"?`<td class="${Ne.join(" ")}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><input type="checkbox" ${ge._checkboxDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._checkboxLabel}</span></div></td>`:`<td class="${Ne.join(" ")}" title="${Ie}"><div ${W?"":`style="width: ${we.renderWidth}px"`}>${so(Ie,!0)}</div></td>`}).join("")+"</tr>")}):ce.forEach(ge=>{$e.push("<tr>"+H.map(we=>{const je=we.align||Se,Ne=_(we,"showOverflow",re)?["col--ellipsis"]:[],Ie=ge[we.id];let Ke=1,ye=1;if(Ee&&ue.length){const lt=e.getVTRowIndex(ge._row),B=e.getVTColumnIndex(we),le=la(ue,lt,B);if(le){const{rowspan:de,colspan:Le}=le;if(!de||!Le)return"";de>1&&(Ke=de),Le>1&&(ye=Le)}}return je&&Ne.push(`col--${je}`),we.type==="radio"?`<td class="${Ne.join(" ")}" rowspan="${Ke}" colspan="${ye}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><input type="radio" name="radio_${ne}" ${ge._radioDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._radioLabel}</span></div></td>`:we.type==="checkbox"?`<td class="${Ne.join(" ")}" rowspan="${Ke}" colspan="${ye}"><div ${W?"":`style="width: ${we.renderWidth}px"`}><input type="checkbox" ${ge._checkboxDisabled?"disabled ":""}${ln(Ie)?"checked":""}><span>${ge._checkboxLabel}</span></div></td>`:`<td class="${Ne.join(" ")}" rowspan="${Ke}" colspan="${ye}" title="${Ie}"><div ${W?"":`style="width: ${we.renderWidth}px"`}>${so(Ie,!0)}</div></td>`}).join("")+"</tr>")}),$e.push("</tbody>")),Ve){const{footerTableData:ge}=n,we=ss(Y,ge);we.length&&($e.push("<tfoot>"),we.forEach(je=>{$e.push(`<tr>${H.map(Ne=>{const Ie=Ne.footerAlign||Ne.align||Ce||Se,Ke=_(Ne,"showOverflow",re)?["col--ellipsis"]:[],ye=C(Y,je,Ne);return Ie&&Ke.push(`col--${Ie}`),`<td class="${Ke.join(" ")}" title="${ye}"><div ${W?"":`style="width: ${Ne.renderWidth}px"`}>${so(ye,!0)}</div></td>`}).join("")}</tr>`)}),$e.push("</tfoot>"))}const He=!X&&ie?`<script>(function(){var a=document.querySelector(".${Ze}");if(a){a.indeterminate=true}})()<\/script>`:"";return $e.push("</table>",He),W?$e.join(""):Jd(Y,$e.join(""))},he=(Y,H,ce)=>{let ne=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${Y.sheetName}">`,"<Table>",H.map(oe=>`<Column ss:Width="${oe.renderWidth}"/>`).join("")].join("");if(Y.isHeader&&(ne+=`<Row>${H.map(oe=>`<Cell><Data ss:Type="String">${L(Y,oe)}</Data></Cell>`).join("")}</Row>`),ce.forEach(oe=>{ne+="<Row>"+H.map(me=>`<Cell><Data ss:Type="String">${oe[me.id]}</Data></Cell>`).join("")+"</Row>"}),Y.isFooter){const{footerTableData:oe}=n;ss(Y,oe).forEach(be=>{ne+=`<Row>${H.map(Se=>`<Cell><Data ss:Type="String">${C(Y,be,Se)}</Data></Cell>`).join("")}</Row>`})}return`${ne}</Table></Worksheet></Workbook>`},Z=(Y,H,ce)=>{if(H.length)switch(Y.type){case"csv":return R(Y,H,ce);case"txt":return k(Y,H,ce);case"html":return se(Y,H,ce);case"xml":return he(Y,H,ce)}return""},N=(Y,H)=>{const{filename:ce,type:ne,download:oe}=Y;if(!oe){const me=Qd(H,Y);return Promise.resolve({type:ne,content:H,blob:me})}te.saveFile&&te.saveFile({filename:ce,type:ne,content:H}).then(()=>{Y.message!==!1&&te.modal&&te.modal.message({content:Go("vxe.table.expSuccess"),status:"success"})})},J=Y=>{const{remote:H,columns:ce,colgroups:ne,exportMethod:oe,afterExportMethod:me}=Y;return new Promise(be=>{if(H){const Se={options:Y,$table:e,$grid:A};be(oe?oe(Se):Se)}else{const Se=w(Y);be(e.preventEvent(null,"event.export",{options:Y,columns:ce,colgroups:ne,datas:Se},()=>N(Y,Z(Y,ce,Se))))}}).then(be=>(fi(ce),Y.print||me&&me({status:!0,options:Y,$table:e,$grid:A}),Object.assign({status:!0},be))).catch(()=>{fi(ce),Y.print||me&&me({status:!1,options:Y,$table:e,$grid:A});const be={status:!1};return Promise.reject(be)})},ee=(Y,H)=>{const{tableFullColumn:ce,_importResolve:ne,_importReject:oe}=a;let me={fields:[],rows:[]};switch(H.type){case"csv":me=su(ce,Y);break;case"txt":me=ru(ce,Y);break;case"html":me=iu(ce,Y);break;case"xml":me=au(ce,Y);break}const{fields:be,rows:Se}=me;cu(ce,be)?e.createData(Se).then(re=>{let ve;return(H.mode==="insert"||H.mode==="insertBottom")&&(ve=e.insertAt(re,-1)),H.mode==="insertTop"?ve=e.insert(re):ve=e.reloadData(re),H.message!==!1&&te.modal&&te.modal.message({content:Go("vxe.table.impSuccess",[Se.length]),status:"success"}),ve.then(()=>{ne&&ne({status:!0})})}):H.message!==!1&&(te.modal&&te.modal.message({content:Go("vxe.error.impFields"),status:"error"}),oe&&oe({status:!1}))},fe=(Y,H)=>{const{importMethod:ce,afterImportMethod:ne}=H,{type:oe,filename:me}=ji(Y),be=I.value;if(!ce&&!r.includes(r.keys(be._typeMaps),oe)){H.message!==!1&&te.modal&&te.modal.message({content:Go("vxe.error.notType",[oe]),status:"error"});const Ce={status:!1};return Promise.reject(Ce)}return new Promise((Ce,re)=>{const ve=ie=>{Ce(ie),a._importResolve=null,a._importReject=null},X=ie=>{re(ie),a._importResolve=null,a._importReject=null};if(a._importResolve=ve,a._importReject=X,window.FileReader){const ie=Object.assign({mode:"insertTop"},H,{type:oe,filename:me});if(ie.remote)ce?Promise.resolve(ce({file:Y,options:ie,$table:e})).then(()=>{ve({status:!0})}).catch(()=>{ve({status:!0})}):ve({status:!0});else{const{tableFullColumn:ue}=a;e.preventEvent(null,"event.import",{file:Y,options:ie,columns:ue},()=>{const pe=new FileReader;pe.onerror=()=>{Gt("vxe.error.notType",[oe]),X({status:!1})},pe.onload=W=>{ee(W.target.result,ie)},pe.readAsText(Y,ie.encoding||"UTF-8")})}}else ve({status:!0})}).then(()=>{ne&&ne({status:!0,options:H,$table:e})}).catch(Ce=>(ne&&ne({status:!1,options:H,$table:e}),Promise.reject(Ce)))},ke=(Y,H)=>{const{treeConfig:ce,showHeader:ne,showFooter:oe}=o,{initStore:me,mergeList:be,mergeFooterList:Se,isGroup:Ce,footerTableData:re,exportStore:ve,exportParams:X}=n,{collectColumn:ie}=a,ue=y.value,pe=ce,W=P.value,Ge=e.getCheckboxRecords(),Ve=A?A.getComputeMaps().computeProxyOpts.value:{},qe=!!re.length,Ee=!!(be.length||Se.length),Me=Object.assign({message:!0,isHeader:ne,isFooter:oe,isColgroup:Ce,isMerge:Ee,useStyle:!0,current:"current",modes:["current","selected"].concat(Ve.ajax&&Ve.ajax.queryAll?["all"]:[])},Y),xe=Me.types||r.keys(ue._typeMaps),Ze=Me.modes||[],Fe=W.checkMethod,$e=ie.slice(0),{columns:He}=Me,ge=xe.map(ye=>({value:ye,label:Go(`vxe.export.types.${ye}`)})),we=Ze.map(ye=>ye&&ye.value?{value:ye.value,label:ye.label||ye.value}:{value:ye,label:Go(`vxe.export.modes.${ye}`)});r.eachTree($e,(ye,lt,B,le,de)=>{(ye.children&&ye.children.length||ci(ye))&&(ye.checked=He?He.some(Te=>{if(hs(Te))return ye.id===Te.id;if(r.isString(Te))return ye.field===Te;{const Qe=Te.id||Te.colId,Ye=Te.type,nt=Te.field;if(Qe)return ye.id===Qe;if(nt&&Ye)return ye.field===nt&&ye.type===Ye;if(nt)return ye.field===nt;if(Ye)return ye.type===Ye}return!1}):ye.visible,ye.halfChecked=!1,ye.disabled=de&&de.disabled||(Fe?!Fe({column:ye}):!1))}),Object.assign(ve,{columns:$e,typeList:ge,modeList:we,hasFooter:qe,hasMerge:Ee,hasTree:pe,isPrint:H,hasColgroup:Ce,visible:!0}),Object.assign(X,{mode:Ge.length?"selected":"current"},Me);const{filename:je,sheetName:Ne,mode:Ie,type:Ke}=X;return je&&(r.isFunction(je)?X.filename=je({options:Me,$table:e,$grid:A}):X.filename=`${je}`),Ne&&(r.isFunction(Ne)?X.sheetName=Ne({options:Me,$table:e,$grid:A}):X.sheetName=`${Ne}`),we.some(ye=>ye.value===Ie)||(X.mode=we[0].value),ge.some(ye=>ye.value===Ke)||(X.type=ge[0].value),me.export=!0,ae()},Be=()=>te.modal?te.modal.close("VXE_EXPORT_MODAL"):Promise.resolve(),Ae={exportData(Y){const{treeConfig:H}=o,{isGroup:ce,tableGroupColumn:ne}=n,{tableFullColumn:oe,afterFullData:me}=a,be=y.value,Se=x.value,Ce=Object.assign({isHeader:!0,isFooter:!0,isColgroup:!0,download:!0,type:"csv",mode:"current"},be,Y),{filename:re,sheetName:ve,type:X,mode:ie,columns:ue,original:pe,columnFilterMethod:W,beforeExportMethod:Ge,includeFields:Ve,excludeFields:qe}=Ce;let Ee=[];const Me=ue&&ue.length?ue:null,xe=Object.assign({},Ce,{filename:"",sheetName:""});!Me&&!W&&(xe.columnFilterMethod=({column:Fe})=>qe&&r.includes(qe,Fe.field)?!1:Ve?!!r.includes(Ve,Fe.field):pe?Fe.field:ci(Fe)),Me?(xe._isCustomColumn=!0,Ee=r.searchTree(r.mapTree(Me,Fe=>{let $e;if(Fe){if(hs(Fe))$e=Fe;else if(r.isString(Fe))$e=e.getColumnByField(Fe);else{const He=Fe.id||Fe.colId,ge=Fe.type,we=Fe.field;He?$e=e.getColumnById(He):we&&ge?$e=oe.find(je=>je.field===we&&je.type===ge):we?$e=e.getColumnByField(we):ge&&($e=oe.find(je=>je.type===ge))}return $e||{}}},{children:"childNodes",mapChildren:"_children"}),(Fe,$e)=>hs(Fe)&&(!W||W({column:Fe,$columnIndex:$e})),{children:"_children",mapChildren:"childNodes",original:!0})):Ee=r.searchTree(ce?ne:oe,(Fe,$e)=>Fe.visible&&(!W||W({column:Fe,$columnIndex:$e})),{children:"children",mapChildren:"childNodes",original:!0});const Ze=[];if(r.eachTree(Ee,Fe=>{Fe.children&&Fe.children.length||Ze.push(Fe)},{children:"childNodes"}),xe.columns=Ze,xe.colgroups=ou(Ee),re&&(r.isFunction(re)?xe.filename=re({options:Ce,$table:e,$grid:A}):xe.filename=`${re}`),xe.filename||(xe.filename=Go(xe.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[r.toDateString(Date.now(),"yyyyMMddHHmmss")])),ve&&(r.isFunction(ve)?xe.sheetName=ve({options:Ce,$table:e,$grid:A}):xe.sheetName=`${ve}`),xe.sheetName||(xe.sheetName=document.title||""),!xe.exportMethod&&!r.includes(r.keys(be._typeMaps),X)){Gt("vxe.error.notType",[X]);const Fe={status:!1};return Promise.reject(Fe)}if(xe.print||Ge&&Ge({options:xe,$table:e,$grid:A}),!xe.data)if(xe.data=[],ie==="selected"){const Fe=e.getCheckboxRecords();["html","pdf"].indexOf(X)>-1&&H?Ce.data=r.searchTree(e.getTableData().fullData,$e=>e.findRowIndexOf(Fe,$e)>-1,Object.assign({},Se,{data:"_row"})):Ce.data=Fe}else if(ie==="all"){if(A&&!xe.remote){const Fe=A.reactData,{computeProxyOpts:$e}=A.getComputeMaps(),He=$e.value,{sortData:ge}=Fe,{beforeQueryAll:we,afterQueryAll:je,ajax:Ne={}}=He,Ie=He.response||He.props||{},Ke=Ne.queryAll,ye=Ne.queryAllSuccess,lt=Ne.queryAllError;if(Ke){const B={$table:e,$grid:A,sort:ge.length?ge[0]:{},sorts:ge,filters:Fe.filterData,form:Fe.formData,options:xe};return Promise.resolve((we||Ke)(B)).then(le=>{const de=Ie.list;return xe.data=(de?r.isFunction(de)?de({data:le,$grid:A}):r.get(le,de):le)||[],je&&je(B),ye&&ye(Object.assign(Object.assign({},B),{response:le})),J(xe)}).catch(le=>{lt&&lt(Object.assign(Object.assign({},B),{response:le}))})}}}else ie==="current"&&(xe.data=me);return J(xe)},importByFile(Y,H){const ce=Object.assign({},H),{beforeImportMethod:ne}=ce;return ne&&ne({options:ce,$table:e}),fe(Y,ce)},importData(Y){const H=I.value,ce=Object.assign({types:r.keys(H._typeMaps)},H,Y),{beforeImportMethod:ne,afterImportMethod:oe}=ce;return ne&&ne({options:ce,$table:e}),te.readFile(ce).catch(me=>(oe&&oe({status:!1,options:ce,$table:e}),Promise.reject(me))).then(me=>{const{file:be}=me;return fe(be,ce)})},saveFile(Y){return te.saveFile(Y)},readFile(Y){return te.readFile(Y)},print(Y){const H=m.value,ce=Object.assign({original:!1},H,Y,{type:"html",download:!1,remote:!1,print:!0}),{sheetName:ne}=ce;let oe="";ne&&(r.isFunction(ne)?oe=ne({options:ce,$table:e,$grid:A}):oe=`${ne}`),oe||(oe=document.title||"");const me=ce.beforePrintMethod,be=ce.html||ce.content;return new Promise((Se,Ce)=>{te.print?Se(be?te.print({title:oe,html:be,customStyle:ce.style,beforeMethod:me?({html:re})=>me({html:re,content:re,options:ce,$table:e}):void 0}):Ae.exportData(ce).then(({content:re})=>te.print({title:oe,html:re,customStyle:ce.style,beforeMethod:me?({html:ve})=>me({html:ve,content:ve,options:ce,$table:e}):void 0}))):Ce({status:!1})})},getPrintHtml(Y){const H=m.value,ce=Object.assign({original:!1},H,Y,{type:"html",download:!1,remote:!1,print:!0});return e.exportData(ce).then(({content:ne})=>({html:ne}))},closeImport(){return te.modal?te.modal.close("VXE_IMPORT_MODAL"):Promise.resolve()},openImport(Y){const{treeConfig:H,importConfig:ce}=o,{initStore:ne,importStore:oe,importParams:me}=n,be=I.value,Se=Object.assign({mode:"insertTop",message:!0,types:r.keys(be._typeMaps),modes:["insertTop","covering"]},be,Y),Ce=Se.types||[],re=Se.modes||[];if(!!H){Se.message&&te.modal&&te.modal.message({content:Go("vxe.error.treeNotImp"),status:"error"});return}ce||Gt("vxe.error.reqProp",["import-config"]);const X=Ce.map(ue=>({value:ue,label:Go(`vxe.export.types.${ue}`)})),ie=re.map(ue=>ue&&ue.value?{value:ue.value,label:ue.label||ue.value}:{value:ue,label:Go(`vxe.import.modes.${ue}`)});Object.assign(oe,{file:null,type:"",filename:"",modeList:ie,typeList:X,visible:!0}),Object.assign(me,Se),ie.some(ue=>ue.value===me.mode)||(me.mode=ie[0].value),ne.import=!0},closeExport:Be,openExport(Y){const H=y.value,ce=Object.assign({message:!0,types:r.keys(H._typeMaps)},H,Y);ke(ce)},closePrint:Be,openPrint(Y){const H=m.value,ce=Object.assign({message:!0},H,Y);ke(ce,!0)}};return Ae},setupGrid(e){return e.extendTableMethods(du)}});const{hooks:uu}=te;function fu(e,o){let n=0,a=0;const x=!dn.firefox&&Wl(e,"vxe-checkbox--label");if(x){const m=getComputedStyle(e);n-=r.toNumber(m.paddingTop),a-=r.toNumber(m.paddingLeft)}for(;e&&e!==o;)if(n+=e.offsetTop,a+=e.offsetLeft,e=e.offsetParent,x){const m=getComputedStyle(e);n-=r.toNumber(m.paddingTop),a-=r.toNumber(m.paddingLeft)}return{offsetTop:n,offsetLeft:a}}uu.add("tableKeyboardModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refElem:x}=e.getRefMaps(),{computeEditOpts:m,computeCheckboxOpts:y,computeMouseOpts:I,computeTreeOpts:P}=e.getComputeMaps();function d(A,Q,$,L,M,F){let T=0,w=[],C=0;const R=F>0,{scrollYLoad:k}=n,{afterFullData:_,scrollYStore:se}=a;if(k){R?C=M+F:C=L.height-M+Math.abs(F);const he=e.getVTRowIndex(Q.row);R?w=_.slice(he,he+Math.ceil(C/se.rowHeight)):w=_.slice(he-Math.floor(C/se.rowHeight),he+1)}else{R?C=A.clientY-L.y:C=L.y-A.clientY+L.height;const he=R?"next":"previous";for(;$&&T<C;){const Z=e.getRowNode($);Z&&(w.push(Z.item),T+=$.offsetHeight,$=$[`${he}ElementSibling`])}}return w}const f=(A,Q)=>{const{column:$,cell:L}=Q;if($.type==="checkbox"){const M=x.value,{elemStore:F}=a,T=A.clientX,w=A.clientY,C=Eo(F[`${$.fixed||"main"}-body-wrapper`]||F["main-body-wrapper"]);if(!C)return;const R=C.querySelector(".vxe-table--checkbox-range"),k=document.onmousemove,_=document.onmouseup,se=L.parentElement,he=e.getCheckboxRecords();let Z=[];const N=1,J=fu(A.target,C),ee=J.offsetTop+A.offsetY,fe=J.offsetLeft+A.offsetX,ke=C.scrollTop,Be=se.offsetHeight,Ae=se.getBoundingClientRect(),Y=w-Ae.y;let H=null,ce=!1,ne=1;const oe=(Ce,re)=>{e.dispatchEvent(`checkbox-range-${Ce}`,{records:e.getCheckboxRecords(),reserves:e.getCheckboxReserveRecords()},re)},me=Ce=>{const{clientX:re,clientY:ve}=Ce,X=re-T,ie=ve-w+(C.scrollTop-ke);let ue=Math.abs(ie),pe=Math.abs(X),W=ee,Ge=fe;ie<N?(W+=ie,W<N&&(W=N,ue=ee)):ue=Math.min(ue,C.scrollHeight-ee-N),X<N?(Ge+=X,pe>fe&&(Ge=N,pe=fe)):pe=Math.min(pe,C.clientWidth-fe-N),R.style.height=`${ue}px`,R.style.width=`${pe}px`,R.style.left=`${Ge}px`,R.style.top=`${W}px`,R.style.display="block";const Ve=d(Ce,Q,se,Ae,Y,ie<N?-ue:ue);ue>10&&Ve.length!==Z.length&&(Z=Ve,Ce.ctrlKey?Ve.forEach(qe=>{e.handleBatchSelectRows([qe],he.indexOf(qe)===-1)}):(e.setAllCheckboxRow(!1),e.handleCheckedCheckboxRow(Ve,!0,!1)),oe("change",Ce))},be=()=>{clearTimeout(H),H=null},Se=Ce=>{be(),H=setTimeout(()=>{if(H){const{scrollLeft:re,scrollTop:ve,clientHeight:X,scrollHeight:ie}=C,ue=Math.ceil(ne*50/Be);ce?ve+X<ie?(e.scrollTo(re,ve+ue),Se(Ce),me(Ce)):be():ve?(e.scrollTo(re,ve-ue),Se(Ce),me(Ce)):be()}},50)};tl(M,"drag--range"),document.onmousemove=Ce=>{Ce.preventDefault(),Ce.stopPropagation();const{clientY:re}=Ce,{boundingTop:ve}=ps(C);re<ve?(ce=!1,ne=ve-re,H||Se(Ce)):re>ve+C.clientHeight?(ce=!0,ne=re-ve-C.clientHeight,H||Se(Ce)):H&&be(),me(Ce)},document.onmouseup=Ce=>{be(),Ao(M,"drag--range"),R.removeAttribute("style"),document.onmousemove=k,document.onmouseup=_,oe("end",Ce)},oe("start",A)}};return{moveTabSelected(A,Q,$){const{editConfig:L}=o,{afterFullData:M,visibleColumn:F}=a,T=m.value;let w,C,R;const k=Object.assign({},A),_=e.getVTRowIndex(k.row),se=e.getVTColumnIndex(k.column);$.preventDefault(),Q?se<=0?_>0&&(C=_-1,w=M[C],R=F.length-1):R=se-1:se>=F.length-1?_<M.length-1&&(C=_+1,w=M[C],R=0):R=se+1;const he=F[R];he&&(w?(k.rowIndex=C,k.row=w):k.rowIndex=_,k.columnIndex=R,k.column=he,k.cell=e.getCellElement(k.row,k.column),L?(T.trigger==="click"||T.trigger==="dblclick")&&(T.mode==="row"?e.handleEdit(k,$):e.scrollToRow(k.row,k.column).then(()=>e.handleSelected(k,$))):e.scrollToRow(k.row,k.column).then(()=>e.handleSelected(k,$)))},moveCurrentRow(A,Q,$){const{treeConfig:L}=o,{currentRow:M}=n,{afterFullData:F}=a,T=P.value,w=T.children||T.childrenField;let C;if($.preventDefault(),M)if(L){const{index:R,items:k}=r.findTree(F,_=>_===M,{children:w});A&&R>0?C=k[R-1]:Q&&R<k.length-1&&(C=k[R+1])}else{const R=e.getVTRowIndex(M);A&&R>0?C=F[R-1]:Q&&R<F.length-1&&(C=F[R+1])}else C=F[0];if(C){const R={$table:e,row:C,rowIndex:e.getRowIndex(C),$rowIndex:e.getVMRowIndex(C)};e.scrollToRow(C).then(()=>e.triggerCurrentRowEvent($,R))}},moveSelected(A,Q,$,L,M,F){const{afterFullData:T,visibleColumn:w}=a,C=Object.assign({},A),R=e.getVTRowIndex(C.row),k=e.getVTColumnIndex(C.column);F.preventDefault(),$&&R>0?(C.rowIndex=R-1,C.row=T[C.rowIndex]):M&&R<T.length-1?(C.rowIndex=R+1,C.row=T[C.rowIndex]):Q&&k?(C.columnIndex=k-1,C.column=w[C.columnIndex]):L&&k<w.length-1&&(C.columnIndex=k+1,C.column=w[C.columnIndex]),e.scrollToRow(C.row,C.column).then(()=>{C.cell=e.getCellElement(C.row,C.column),e.handleSelected(C,F)})},handleCellMousedownEvent:(A,Q)=>{const{editConfig:$,checkboxConfig:L,mouseConfig:M}=o,F=y.value,T=I.value,w=m.value;if(M&&T.area&&e.handleMousedownCellAreaEvent)return e.handleMousedownCellAreaEvent(A,Q);L&&F.range&&f(A,Q),M&&T.selected&&(!$||w.mode==="cell")&&e.handleSelected(Q,A)}}}});const{getConfig:pu,validators:hu,hooks:gu}=te;class $n{constructor(o){Object.assign(this,{$options:o,required:o.required,min:o.min,max:o.max,type:o.type,pattern:o.pattern,validator:o.validator,trigger:o.trigger,maxWidth:o.maxWidth})}get content(){return ll(this.$options.content||this.$options.message)}get message(){return this.content}}const mu=["fullValidate","validate","fullValidateField","validateField","clearValidate"];gu.add("tableValidatorModule",{setupTable(e){const{props:o,reactData:n,internalData:a}=e,{refValidTooltip:x}=e.getRefMaps(),{computeValidOpts:m,computeTreeOpts:y,computeEditOpts:I}=e.getComputeMaps();let P={},d={},f;const b=$=>new Promise(L=>{m.value.autoPos===!1?(e.dispatchEvent("valid-error",$,null),L()):e.handleEdit($,{type:"valid-error",trigger:"call"}).then(()=>{L(d.showValidTooltip($))})}),j=$=>{if(m.value.msgMode==="single"){const M=Object.keys($),F={};if(M.length){const T=M[0];F[T]=$[T]}return F}return $},A=($,L,M,F)=>{const T={},{editRules:w,treeConfig:C}=o,{afterFullData:R}=a,k=y.value,_=k.children||k.childrenField,se=m.value;let he;$===!0?he=R:$&&(r.isFunction($)?M=$:he=r.isArray($)?$:[$]),he||(e.getInsertRecords?he=e.getInsertRecords().concat(e.getUpdateRecords()):he=[]);const Z=[];a._lastCallTime=Date.now(),f=!1,P.clearValidate();const N={};if(w){const J=L&&L.length?L:e.getColumns(),ee=fe=>{if(F||!f){const ke=[];J.forEach(Be=>{const Ae=r.isString(Be)?Be:Be.field;(F||!f)&&r.has(w,Ae)&&ke.push(d.validCellRules("all",fe,Be).catch(({rule:Y,rules:H})=>{const ce={rule:Y,rules:H,rowIndex:e.getRowIndex(fe),row:fe,columnIndex:e.getColumnIndex(Be),column:Be,field:Ae,$table:e};if(T[Ae]||(T[Ae]=[]),N[`${Oe(e,fe)}:${Be.id}`]={column:Be,row:fe,rule:Y,content:Y.content},T[Ae].push(ce),!F)return f=!0,Promise.reject(ce)}))}),Z.push(Promise.all(ke))}};return C?r.eachTree(he,ee,{children:_}):he.forEach(ee),Promise.all(Z).then(()=>{const fe=Object.keys(T);return n.validErrorMaps=j(N),ae().then(()=>{if(fe.length)return Promise.reject(T[fe[0]][0]);M&&M()})}).catch(fe=>new Promise((ke,Be)=>{const Ae=()=>{ae(()=>{M?(M(T),ke()):pu().validToReject==="obsolete"?Be(T):ke(T)})},Y=()=>{fe.cell=e.getCellElement(fe.row,fe.column),cd(fe.cell),b(fe).then(Ae)};if(se.autoPos===!1)Ae();else{const H=fe.row,ce=fe.column;e.scrollToRow(H,ce).then(Y)}}))}else n.validErrorMaps={};return ae().then(()=>{M&&M()})};P={fullValidate($,L){return A($,null,L,!0)},validate($,L){return A($,null,L)},fullValidateField($,L){const M=(r.isArray(L)?L:L?[L]:[]).map(F=>to(e,F));return M.length?A($,M,null,!0):ae()},validateField($,L){const M=(r.isArray(L)?L:L?[L]:[]).map(F=>to(e,F));return M.length?A($,M,null):ae()},clearValidate($,L){const{validErrorMaps:M}=n,F=x.value,T=m.value,w=r.isArray($)?$:$?[$]:[],C=(r.isArray(L)?L:L?[L]:[]).map(k=>to(e,k));let R={};if(F&&F.reactData.visible&&F.close(),T.msgMode==="single")return n.validErrorMaps={},ae();if(w.length&&C.length)R=Object.assign({},M),w.forEach(k=>{C.forEach(_=>{const se=`${Oe(e,k)}:${_.id}`;R[se]&&delete R[se]})});else if(w.length){const k=w.map(_=>`${Oe(e,_)}`);r.each(M,(_,se)=>{k.indexOf(se.split(":")[0])>-1&&(R[se]=_)})}else if(C.length){const k=C.map(_=>`${_.id}`);r.each(M,(_,se)=>{k.indexOf(se.split(":")[1])>-1&&(R[se]=_)})}return n.validErrorMaps=R,ae()}};const Q=($,L)=>{const{type:M,min:F,max:T,pattern:w}=$,C=M==="number",R=C?r.toNumber(L):r.getSize(L);return!!(C&&isNaN(L)||!r.eqNull(F)&&R<r.toNumber(F)||!r.eqNull(T)&&R>r.toNumber(T)||w&&!(r.isRegExp(w)?w:new RegExp(w)).test(L))};return d={validCellRules($,L,M,F){const{editRules:T}=o,{field:w}=M,C=[],R=[];if(w&&T){const k=r.get(T,w);if(k){const _=r.isUndefined(F)?r.get(L,w):F;k.forEach(se=>{const{type:he,trigger:Z,required:N,validator:J}=se;if($==="all"||!Z||$===Z)if(J){const ee={cellValue:_,rule:se,rules:k,row:L,rowIndex:e.getRowIndex(L),column:M,columnIndex:e.getColumnIndex(M),field:M.field,$table:e,$grid:e.xegrid};let fe;if(r.isString(J)){const ke=hu.get(J);if(ke){const Be=ke.tableCellValidatorMethod||ke.cellValidatorMethod;Be&&(fe=Be(ee))}}else fe=J(ee);fe&&(r.isError(fe)?(f=!0,C.push(new $n({type:"custom",trigger:Z,content:fe.message,rule:new $n(se)}))):fe.catch&&R.push(fe.catch(ke=>{f=!0,C.push(new $n({type:"custom",trigger:Z,content:ke&&ke.message?ke.message:se.content||se.message,rule:new $n(se)}))})))}else{const ee=he==="array",fe=r.isArray(_);let ke=!0;ee||fe?ke=!fe||!_.length:r.isString(_)?ke=el(_.trim()):ke=el(_),(N?ke||Q(se,_):!ke&&Q(se,_))&&(f=!0,C.push(new $n(se)))}})}}return Promise.all(R).then(()=>{if(C.length){const k={rules:C,rule:C[0]};return Promise.reject(k)}})},hasCellRules($,L,M){const{editRules:F}=o,{field:T}=M;if(T&&F){const w=r.get(F,T);return w&&!!r.find(w,C=>$==="all"||!C.trigger||$===C.trigger)}return!1},triggerValidate($){const{editConfig:L,editRules:M}=o,{editStore:F}=n,{actived:T}=F,w=I.value,C=m.value;if(M&&C.msgMode==="single"&&(n.validErrorMaps={}),L&&M&&T.row){const{row:R,column:k,cell:_}=T.args;if(d.hasCellRules($,R,k))return d.validCellRules($,R,k).then(()=>{w.mode==="row"&&P.clearValidate(R,k)}).catch(({rule:se})=>{if(!se.trigger||$===se.trigger){const he={rule:se,row:R,column:k,cell:_};return d.showValidTooltip(he),Promise.reject(he)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip($){const{height:L}=o,{tableData:M,validStore:F,validErrorMaps:T}=n,{rule:w,row:C,column:R,cell:k}=$,_=m.value,se=x.value,he=w.content;return F.visible=!0,_.msgMode==="single"?n.validErrorMaps={[`${Oe(e,C)}:${R.id}`]:{column:R,row:C,rule:w,content:he}}:n.validErrorMaps=Object.assign({},T,{[`${Oe(e,C)}:${R.id}`]:{column:R,row:C,rule:w,content:he}}),e.dispatchEvent("valid-error",$,null),se&&se&&(_.message==="tooltip"||_.message==="default"&&!L&&M.length<2)?se.open(k,he):ae()}},Object.assign(Object.assign({},P),d)},setupGrid(e){return e.extendTableMethods(mu)}});const bu=["openCustom","closeCustom","saveCustom","cancelCustom","resetCustom","toggleCustomAllCheckbox","setCustomAllCheckbox"];te.hooks.add("tableCustomModule",{setupTable(e){const{reactData:o,internalData:n}=e,{computeCustomOpts:a}=e.getComputeMaps(),{refElem:x}=e.getRefMaps(),m=e.xegrid,y=()=>{const{customStore:M}=o,F=x.value;let T=0;F&&(T=F.clientHeight-28),M.maxHeight=Math.max(88,T)},I=()=>{const{initStore:M,customStore:F}=o;return F.visible=!0,M.custom=!0,P(),Q(),y(),ae().then(()=>y())},P=()=>{const{customStore:M}=o,{collectColumn:F}=n;if(M.visible){const T={},w={},C={};r.eachTree(F,R=>{const k=R.getKey();R.renderFixed=R.fixed,R.renderVisible=R.visible,R.renderResizeWidth=R.renderWidth,T[k]=R.renderSortNumber,w[k]=R.fixed,C[k]=R.visible}),M.oldSortMaps=T,M.oldFixedMaps=w,M.oldVisibleMaps=C,o.customColumnList=F.slice(0)}},d=()=>{const{customStore:M}=o,F=a.value;return M.visible&&(M.visible=!1,F.immediate||e.handleCustom()),ae()},f=()=>{const{customColumnList:M}=o,F=a.value,{allowVisible:T,allowSort:w,allowFixed:C,allowResizable:R}=F;return r.eachTree(M,(k,_,se,he,Z)=>{if(Z)k.fixed=Z.fixed;else{if(w){const N=_+1;k.renderSortNumber=N}C&&(k.fixed=k.renderFixed)}R&&k.renderVisible&&(!k.children||k.children.length)&&k.renderResizeWidth!==k.renderWidth&&(k.resizeWidth=k.renderResizeWidth,k.renderWidth=k.renderResizeWidth),T&&(k.visible=k.renderVisible)}),o.isCustomStatus=!0,o.isDragColMove=!0,setTimeout(()=>{o.isDragColMove=!1},1e3),e.saveCustomStore("confirm")},b=()=>{const{customColumnList:M,customStore:F}=o,{oldSortMaps:T,oldFixedMaps:w,oldVisibleMaps:C}=F,R=a.value,{allowVisible:k,allowSort:_,allowFixed:se,allowResizable:he}=R;return r.eachTree(M,Z=>{const N=Z.getKey(),J=!!C[N],ee=w[N]||"";k&&(Z.renderVisible=J,Z.visible=J),se&&(Z.renderFixed=ee,Z.fixed=ee),_&&(Z.renderSortNumber=T[N]||0),he&&(Z.renderResizeWidth=Z.renderWidth)},{children:"children"}),ae()},j=M=>{const{customStore:F}=o,{customColumnList:T}=o,w=a.value,{checkMethod:C,visibleMethod:R}=w,k=!!M;return w.immediate?(r.eachTree(T,_=>{R&&!R({column:_})||C&&!C({column:_})||(_.visible=k,_.renderVisible=k,_.halfVisible=!1)}),F.isAll=k,o.isCustomStatus=!0,e.handleCustom(),e.saveCustomStore("update:visible")):(r.eachTree(T,_=>{R&&!R({column:_})||C&&!C({column:_})||(_.renderVisible=k,_.halfVisible=!1)}),F.isAll=k),e.checkCustomStatus(),ae()},A={openCustom:I,closeCustom:d,saveCustom:f,cancelCustom:b,resetCustom(M){const{collectColumn:F}=n,T=a.value,{checkMethod:w}=T,C=Object.assign({visible:!0,resizable:M===!0,fixed:M===!0,sort:M===!0},M);return r.eachTree(F,R=>{C.resizable&&(R.resizeWidth=0),C.fixed&&(R.fixed=R.defaultFixed),C.sort&&(R.renderSortNumber=R.sortNumber),(!w||w({column:R}))&&(R.visible=R.defaultVisible),R.renderResizeWidth=R.renderWidth}),o.isCustomStatus=!1,e.saveCustomStore("reset"),e.handleCustom()},toggleCustomAllCheckbox(){const{customStore:M}=o,F=!M.isAll;return j(F)},setCustomAllCheckbox:j},Q=()=>{const{customStore:M}=o,{collectColumn:F}=n,T=a.value,{checkMethod:w}=T;M.isAll=F.every(C=>(w?!w({column:C}):!1)||C.renderVisible),M.isIndeterminate=!M.isAll&&F.some(C=>(!w||w({column:C}))&&(C.renderVisible||C.halfVisible))},$=(M,F)=>{(m||e).dispatchEvent("custom",{type:M},F)},L={checkCustomStatus:Q,emitCustomEvent:$,triggerCustomEvent(M){const{customStore:F}=e.reactData;F.visible?(d(),$("close",M)):(F.btnEl=M.target,I(),$("open",M))},customOpenEvent(M){const{customStore:F}=o;F.visible||(F.activeBtn=!0,F.btnEl=M.target,e.openCustom(),e.emitCustomEvent("open",M))},customCloseEvent(M){const{customStore:F}=o;F.visible&&(F.activeBtn=!1,e.closeCustom(),e.emitCustomEvent("close",M))},handleUpdateCustomColumn:P};return Object.assign(Object.assign({},A),L)},setupGrid(e){return e.extendTableMethods(bu)}});const{getConfig:rs,renderer:vu,getI18n:ar}=te,da="modelValue",ua={};function Zo(e,o,n){return r.eqNull(e)?r.eqNull(o)?n:o:e}function xu(e,o){return e&&o.valueFormat?r.toStringDate(e,o.valueFormat):e}function Cu(e,o,n){const{dateConfig:a={}}=o;return r.toDateString(xu(e,o),a.labelFormat||n)}function Gs(e,o){return Cu(e,o,ar(`vxe.input.date.labelFormat.${o.type||"date"}`))}function wu(e){return`vxe-${e.replace("$","")}`}function ko({name:e}){return dr(e)}function ws({name:e}){return dr(wu(e))}function fa(e,o,n){const{$panel:a}=e;a.changeOption({},o,n)}function Es(e){let{name:o,attrs:n}=e;return o==="input"&&(n=Object.assign({type:"text"},n)),n}function pa(e){const{name:o,immediate:n,props:a}=e;if(!n){if(o==="VxeInput"||o==="$input"){const{type:x}=a||{};return!(!x||x==="text"||x==="number"||x==="integer"||x==="float")}return!(o==="input"||o==="textarea"||o==="$textarea")}return n}function Wo(e,o,n,a){return r.assign({immediate:pa(e)},ua,a,e.props,{[da]:n})}function ms(e,o,n,a){return r.assign({},ua,a,e.props,{[da]:n})}function ys(e,o){return o.$type==="cell"||pa(e)}function Qo(e,o,n){const{placeholder:a}=e;return[u("span",{class:"vxe-cell--label"},a&&Vi(n)?[u("span",{class:"vxe-cell--placeholder"},so(ll(a),1))]:so(n,1))]}function ha(e,o,n,a){const{events:x}=e,m=na(e),y=sa(e),I=y===m,P={};return x&&r.objectEach(x,(d,f)=>{P[pn(f)]=function(...b){d(o,...b)}}),n&&(P[pn(m)]=function(d){n(d),I&&a&&a(d),x&&x[m]&&x[m](o,d)}),!I&&a&&(P[pn(y)]=function(...d){a(...d),x&&x[y]&&x[y](o,...d)}),P}function jn(e,o,n,a){const{events:x}=e,m=na(e),y=sa(e),I={};return r.objectEach(x,(P,d)=>{I[pn(d)]=function(...f){P(o,...f)}}),n&&(I[pn(m)]=function(P){n(P),x&&x[m]&&x[m](o,P)}),a&&(I[pn(y)]=function(...P){a(...P),x&&x[y]&&x[y](o,...P)}),I}function No(e,o){const{$table:n,row:a,column:x}=o,{name:m}=e,{model:y}=x,I=ys(e,o);return jn(e,o,P=>{y.update=!0,y.value=P,I&&ol(a,x,P)},P=>{if(!I&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(m)){const d=P.value;y.update=!0,y.value=d,n.updateStatus(o,d)}else n.updateStatus(o)})}function bs(e,o,n){return jn(e,o,a=>{n.data=a},()=>{fa(o,!r.eqNull(n.data),n)})}function ga(e,o){const{$table:n,row:a,column:x}=o,{model:m}=x;return ha(e,o,y=>{const I=y.target.value;ys(e,o)?ol(a,x,I):(m.update=!0,m.value=I)},y=>{const I=y.target.value;n.updateStatus(o,I)})}function ma(e,o,n){return ha(e,o,a=>{n.data=a.target.value},()=>{fa(o,!r.eqNull(n.data),n)})}function Zs(e,o){const{row:n,column:a}=o,{name:x}=e,m=ys(e,o)?ao(n,a):a.model.value;return[u(x,Object.assign(Object.assign(Object.assign({class:`vxe-default-${x}`},Es(e)),{value:m}),ga(e,o)))]}function Eu(e,o){return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,null)),jn(e,o)))]}function Oo(e,o){const{row:n,column:a}=o,x=ao(n,a);return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,x)),No(e,o)))]}function pi(e,o){const{options:n}=e,{row:a,column:x}=o,m=ao(a,x);return[u(ko(e),Object.assign(Object.assign({options:n},Wo(e,o,m)),No(e,o)))]}function is(e,o){const{row:n,column:a}=o,x=ao(n,a);return[u(ws(e),Object.assign(Object.assign({},Wo(e,o,x)),No(e,o)))]}function ba(e,o){return[u(dr("vxe-button"),Object.assign(Object.assign({},Wo(e,o,null)),jn(e,o)))]}function yu(e,o){return e.children.map(n=>ba(n,o)[0])}function va(e,o,n){const{optionGroups:a,optionGroupProps:x={}}=e,m=x.options||"options",y=x.label||"label";return a.map((I,P)=>u("optgroup",{key:P,label:I[y]},n(I[m],e,o)))}function vs(e,o,n){const{optionProps:a={}}=o,{row:x,column:m}=n,y=a.label||"label",I=a.value||"value",P=a.disabled||"disabled",d=ys(o,n)?ao(x,m):m.model.value;return e.map((f,b)=>u("option",{key:b,value:f[I],disabled:f[P],selected:f[I]==d},f[y]))}function Ru(e,o){const{column:n}=o,{name:a}=e,x=Es(e);return n.filters.map((m,y)=>u(a,Object.assign(Object.assign(Object.assign({key:y,class:`vxe-default-${a}`},x),{value:m.data}),ma(e,o,m))))}function Qs(e,o){const{column:n}=o;return n.filters.map((a,x)=>{const m=a.data;return u(ko(e),Object.assign(Object.assign({key:x},ms(e,e,m)),bs(e,o,a)))})}function Ou(e,o){const{column:n}=o;return n.filters.map((a,x)=>{const m=a.data;return u(ws(e),Object.assign(Object.assign({key:x},ms(e,e,m)),bs(e,o,a)))})}function as({option:e,row:o,column:n}){const{data:a}=e;return r.get(o,n.field)==a}function cs({option:e,row:o,column:n}){const{data:a}=e,x=r.get(o,n.field);return r.toValueString(x).indexOf(a)>-1}function hi(e,o){return[u("select",Object.assign(Object.assign({class:"vxe-default-select"},Es(e)),ga(e,o)),e.optionGroups?va(e,o,vs):vs(e.options,e,o))]}function gi(e,o){const{row:n,column:a}=o,{options:x,optionProps:m,optionGroups:y,optionGroupProps:I}=e,P=ao(n,a);return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,P,{options:x,optionProps:m,optionGroups:y,optionGroupProps:I})),No(e,o)))]}function mi(e,o){const{row:n,column:a}=o,{options:x,optionProps:m}=e,y=ao(n,a);return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,y,{options:x,optionProps:m})),No(e,o)))]}function bi(e,o){const{row:n,column:a}=o,{options:x,optionProps:m,optionGroups:y,optionGroupProps:I}=e,P=ao(n,a);return[u(ws(e),Object.assign(Object.assign({},Wo(e,o,P,{options:x,optionProps:m,optionGroups:y,optionGroupProps:I})),No(e,o)))]}function gs(e,{row:o,column:n}){const{options:a,optionGroups:x,optionProps:m={},optionGroupProps:y={}}=e,I=r.get(o,n.field);let P;const d=m.label||"label",f=m.value||"value";return I!=null?r.map(r.isArray(I)?I:[I],x?b=>{const j=y.options||"options";for(let A=0;A<x.length&&(P=r.find(x[A][j],Q=>Q[f]==b),!P);A++);return P?P[d]:b}:b=>(P=r.find(a,j=>j[f]==b),P?P[d]:b)).join(", "):""}function Js(e){const{row:o,column:n,options:a}=e;return a.original?ao(o,n):gs(n.editRender||n.cellRender,e)}function cr(e,{row:o,column:n}){const{options:a,optionProps:x={}}=e,m=r.get(o,n.field),y=x.label||"label",I=x.value||"value",P=x.children||"children";if(m!=null){const d={};return r.eachTree(a,f=>{d[r.get(f,I)]=f},{children:P}),r.map(r.isArray(m)?m:[m],f=>{const b=d[f];return b&&r.get(b,y)}).join(", ")}return""}function vi(e){const{row:o,column:n,options:a}=e;return a.original?ao(o,n):cr(n.editRender||n.cellRender,e)}vu.mixin({input:{tableAutoFocus:"input",renderTableEdit:Zs,renderTableDefault:Zs,renderTableFilter:Ru,tableFilterDefaultMethod:cs},textarea:{tableAutoFocus:"textarea",renderTableEdit:Zs},select:{renderTableEdit:hi,renderTableDefault:hi,renderTableCell(e,o){return Qo(e,o,gs(e,o))},renderTableFilter(e,o){const{column:n}=o;return n.filters.map((a,x)=>u("select",Object.assign(Object.assign({key:x,class:"vxe-default-select"},Es(e)),ma(e,o,a)),e.optionGroups?va(e,o,vs):vs(e.options,e,o)))},tableFilterDefaultMethod:as,tableExportMethod:Js},VxeInput:{tableAutoFocus:"input",renderTableEdit:Oo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:x}=o,m=rs().input||{},y=n.digits||m.digits||2;let I=r.get(a,x.field);if(I)switch(n.type){case"date":case"week":case"month":case"quarter":case"year":I=Gs(I,n);break;case"float":I=r.toFixed(r.floor(I,y),y);break}return Qo(e,o,I)},renderTableDefault:Oo,renderTableFilter:Qs,tableFilterDefaultMethod:cs},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Oo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:x}=o,{type:m}=n;let y=r.get(a,x.field);if(y){const I=rs().numberInput||{};if(m==="float"){const P=Zo(n.autoFill,I.autoFill,!0),d=Zo(n.digits,I.digits,1);y=r.toFixed(r.floor(y,d),d),P||(y=r.toNumber(y))}else if(m==="amount"){const P=Zo(n.autoFill,I.autoFill,!0),d=Zo(n.digits,I.digits,2),f=Zo(n.showCurrency,I.showCurrency,!1);if(y=r.commafy(r.toNumber(y),{digits:d}),!P){const[b,j]=y.split(".");if(j){const A=j.replace(/0+$/,"");y=A?[b,".",A].join(""):b}}f&&(y=`${n.currencySymbol||I.currencySymbol||ar("vxe.numberInput.currencySymbol")||""}${y}`)}}return Qo(e,o,y)},renderTableFooter(e,o){const{props:n={}}=e,{row:a,column:x,_columnIndex:m}=o,{type:y}=n,I=r.isArray(a)?a[m]:r.get(a,x.field);if(r.isNumber(I)){const P=rs().numberInput||{};if(y==="float"){const d=Zo(n.autoFill,P.autoFill,!0),f=Zo(n.digits,P.digits,1);let b=r.toFixed(r.floor(I,f),f);return d||(b=r.toNumber(b)),b}else if(y==="amount"){const d=Zo(n.autoFill,P.autoFill,!0),f=Zo(n.digits,P.digits,2),b=Zo(n.showCurrency,P.showCurrency,!1);let j=r.commafy(r.toNumber(I),{digits:f});if(!d){const[A,Q]=j.split(".");if(Q){const $=Q.replace(/0+$/,"");j=$?[A,".",$].join(""):A}}return b&&(j=`${n.currencySymbol||P.currencySymbol||ar("vxe.numberInput.currencySymbol")||""}${j}`),j}}return ll(I,1)},renderTableDefault:Oo,renderTableFilter:Qs,tableFilterDefaultMethod:cs,tableExportMethod(e){const{row:o,column:n}=e;return r.get(o,n.field)}},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Oo,renderTableCell(e,o){const{props:n={}}=e,{row:a,column:x}=o;let m=r.get(a,x.field);return m&&n.type!=="time"&&(m=Gs(m,n)),Qo(e,o,m)},renderTableDefault:Oo,renderTableFilter:Qs,tableFilterDefaultMethod:as},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Oo,renderTableCell(e,o){const{row:n,column:a}=o,x=r.get(n,a.field);return Qo(e,o,x)}},VxeButton:{renderTableDefault:Eu},VxeButtonGroup:{renderTableDefault(e,o){const{options:n}=e;return[u(ko(e),Object.assign(Object.assign({options:n},Wo(e,o,null)),jn(e,o)))]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:gi,renderTableDefault:gi,renderTableCell(e,o){return Qo(e,o,gs(e,o))},renderTableFilter(e,o){const{column:n}=o,{options:a,optionProps:x,optionGroups:m,optionGroupProps:y}=e;return n.filters.map((I,P)=>{const d=I.data;return u(ko(e),Object.assign(Object.assign({key:P},ms(e,o,d,{options:a,optionProps:x,optionGroups:m,optionGroupProps:y})),bs(e,o,I)))})},tableFilterDefaultMethod:as,tableExportMethod:Js},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:mi,renderTableCell(e,o){return Qo(e,o,cr(e,o))},tableExportMethod:vi},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:mi,renderTableCell(e,o){return Qo(e,o,cr(e,o))},tableExportMethod:vi},VxeColorPicker:{tableAutoFocus:"input",renderTableEdit(e,o){const{row:n,column:a}=o,{options:x}=e,m=ao(n,a);return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,m,{colors:x})),No(e,o)))]},renderTableCell(e,o){const{row:n,column:a}=o,x=r.get(n,a.field);return u("span",{class:"vxe-color-picker--readonly"},[u("div",{class:"vxe-color-picker--readonly-color",style:{backgroundColor:x}})])}},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit(e,o){const{row:n,column:a}=o,{options:x}=e,m=ao(n,a);return[u(ko(e),Object.assign(Object.assign({},Wo(e,o,m,{icons:x})),No(e,o)))]},renderTableCell(e,o){const{row:n,column:a}=o,x=r.get(n,a.field);return u("i",{class:x})}},VxeRadioGroup:{renderTableDefault:pi},VxeCheckboxGroup:{renderTableDefault:pi},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Oo,renderTableDefault:Oo},VxeUpload:{renderTableEdit:Oo,renderTableCell:Oo,renderTableDefault:Oo},VxeImage:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:x}=e,m=ao(n,a);return[u(ko(e),Object.assign(Object.assign(Object.assign({},x),{src:m}),No(e,o)))]}},VxeImageGroup:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:x}=e,m=ao(n,a);return[u(ko(e),Object.assign(Object.assign(Object.assign({},x),{urlList:m}),No(e,o)))]}},VxeTextEllipsis:{renderTableDefault(e,o){const{row:n,column:a}=o,{props:x}=e,m=ao(n,a);return[u(ko(e),Object.assign(Object.assign(Object.assign({},x),{content:m}),No(e,o)))]}},VxeRate:{renderTableDefault:Oo},VxeSlider:{renderTableDefault:Oo},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:is,renderTableCell(e,o){var n;const{props:a={}}=e,{row:x,column:m}=o,y=a.digits||((n=rs().input)===null||n===void 0?void 0:n.digits)||2;let I=r.get(x,m.field);if(I)switch(a.type){case"date":case"week":case"month":case"year":I=Gs(I,a);break;case"float":I=r.toFixed(r.floor(I,y),y);break}return Qo(e,o,I)},renderTableDefault:is,renderTableFilter:Ou,tableFilterDefaultMethod:cs},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:ba},$buttons:{renderTableDefault:yu},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:bi,renderTableDefault:bi,renderTableCell(e,o){return Qo(e,o,gs(e,o))},renderTableFilter(e,o){const{column:n}=o,{options:a,optionProps:x,optionGroups:m,optionGroupProps:y}=e;return n.filters.map((I,P)=>{const d=I.data;return u(ws(e),Object.assign(Object.assign({key:P},ms(e,o,d,{options:a,optionProps:x,optionGroups:m,optionGroupProps:y})),bs(e,o,I)))})},tableFilterDefaultMethod:as,tableExportMethod:Js},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:is,renderTableDefault:is}});const Rs=Object.assign({},hn,{install(e){e.component(hn.name,hn)}}),Su={useCellView:Nd};te.dynamicApp&&te.dynamicApp.component(hn.name,hn);te.component(hn);te.tableHandle=Su;const Tu=Rs,{getConfig:jo,getIcon:Tl,getI18n:sn,renderer:xi,commands:Ci,createEvent:Mu,useFns:Du}=te,gn=Lo({name:"VxeToolbar",props:{loading:Boolean,refresh:[Boolean,Object],import:[Boolean,Object],export:[Boolean,Object],print:[Boolean,Object],zoom:[Boolean,Object],custom:[Boolean,Object],buttons:{type:Array,default:()=>jo().toolbar.buttons},tools:{type:Array,default:()=>jo().toolbar.tools},perfect:{type:Boolean,default:()=>jo().toolbar.perfect},size:{type:String,default:()=>jo().toolbar.size||jo().size},className:[String,Function]},emits:["button-click","tool-click"],setup(e,o){const{slots:n,emit:a}=o,x=r.uniqueId(),m=te.getComponent("VxeButton"),{computeSize:y}=Du.useSize(e),I=_o({isRefresh:!1,connectFlag:0,columns:[]}),P={connectTable:null},d=ze(),f={refElem:d},b={xID:x,props:e,context:o,reactData:I,internalData:P,getRefMaps:()=>f};let j={};const A=go("$xeGrid",null),Q=_e(()=>Object.assign({},r.clone(jo().toolbar.refresh,!0),e.refresh)),$=_e(()=>Object.assign({},r.clone(jo().toolbar.import,!0),e.import)),L=_e(()=>Object.assign({},r.clone(jo().toolbar.export,!0),e.export)),M=_e(()=>Object.assign({},r.clone(jo().toolbar.print,!0),e.print)),F=_e(()=>Object.assign({},r.clone(jo().toolbar.zoom,!0),e.zoom)),T=_e(()=>Object.assign({},r.clone(jo().toolbar.custom,!0),e.custom)),w=_e(()=>{const{connectTable:re}=P,ve=re;if((I.connectFlag||ve)&&ve){const{computeCustomOpts:X}=ve.getComputeMaps();return X.value}return{trigger:""}}),C=_e(()=>w.value.trigger),R=()=>{const{connectTable:re}=P;if(re)return!0;Gt("vxe.error.barUnableLink")},k=({$event:re})=>{const{connectTable:ve}=P,X=ve;X&&(X.triggerCustomEvent?X.triggerCustomEvent(re):Gt("vxe.error.reqModule",["VxeTableCustomModule"]))},_=({$event:re})=>{const{connectTable:ve}=P,X=ve;X?X.customOpenEvent(re):Gt("vxe.error.reqModule",["VxeTableCustomModule"])},se=({$event:re})=>{const{connectTable:ve}=P,X=ve;if(X){const{customStore:ie}=X.reactData;ie.activeBtn=!1,setTimeout(()=>{!ie.activeBtn&&!ie.activeWrapper&&X.customCloseEvent(re)},350)}},he=({$event:re})=>{const{isRefresh:ve}=I,X=Q.value;if(!ve){const ie=X.queryMethod||X.query;if(ie){I.isRefresh=!0;try{Promise.resolve(ie({})).catch(ue=>ue).then(()=>{I.isRefresh=!1})}catch{I.isRefresh=!1}}else A&&(I.isRefresh=!0,A.triggerToolbarCommitEvent({code:X.code||"reload"},re).catch(ue=>ue).then(()=>{I.isRefresh=!1}))}},Z=({$event:re})=>{A&&A.triggerZoomEvent(re)},N=(re,ve)=>{const{connectTable:X}=P,ie=X,{code:ue}=ve;if(ue)if(A)A.triggerToolbarBtnEvent(ve,re);else{const pe=Ci.get(ue),W={code:ue,button:ve,$table:ie,$grid:A,$event:re};if(pe){const Ge=pe.tableCommandMethod||pe.commandMethod;Ge&&Ge(W)}b.dispatchEvent("button-click",W,re)}},J=(re,ve)=>{const{connectTable:X}=P,ie=X,{code:ue}=ve;if(ue)if(A)A.triggerToolbarTolEvent(ve,re);else{const pe=Ci.get(ue),W={code:ue,tool:ve,$table:ie,$grid:A,$event:re};if(pe){const Ge=pe.tableCommandMethod||pe.commandMethod;Ge&&Ge(W)}b.dispatchEvent("tool-click",W,re)}},ee=()=>{if(R()){const{connectTable:re}=P,ve=re;ve&&ve.openImport()}},fe=()=>{if(R()){const{connectTable:re}=P,ve=re;ve&&ve.openExport()}},ke=()=>{if(R()){const{connectTable:re}=P,ve=re;ve&&ve.openPrint()}};j={dispatchEvent:(re,ve,X)=>{a(re,Mu(X,{$toolbar:b},ve))},syncUpdate(re){P.connectTable=re.$table,I.columns=re.collectColumn,I.connectFlag++}},Object.assign(b,j);const Ae=(re,ve)=>{const{dropdowns:X}=re,ie=[];return X?X.map((ue,pe)=>ue.visible===!1?We():m?u(m,{key:pe,disabled:ue.disabled,loading:ue.loading,type:ue.type,mode:ue.mode,icon:ue.icon,circle:ue.circle,round:ue.round,status:ue.status,content:ue.name,title:ue.title,routerLink:ue.routerLink,permissionCode:ue.permissionCode,prefixTooltip:ue.prefixTooltip,suffixTooltip:ue.suffixTooltip,onClick:({$event:W})=>ve?N(W,ue):J(W,ue)}):We()):ie},Y=()=>{const{buttons:re}=e,{connectTable:ve}=P,X=ve,ie=n.buttonPrefix||n["button-prefix"],ue=n.buttonSuffix||n["button-suffix"],pe=[];return ie&&pe.push(...xo(ie({buttons:re||[],$grid:A,$table:X}))),re&&re.forEach((W,Ge)=>{const{dropdowns:Ve,buttonRender:qe}=W;if(W.visible!==!1){const Ee=qe?xi.get(qe.name):null;if(qe&&Ee&&Ee.renderToolbarButton){const Me=Ee.toolbarButtonClassName,xe={$grid:A,$table:X,button:W};pe.push(u("span",{key:`br${W.code||Ge}`,class:["vxe-button--item",Me?r.isFunction(Me)?Me(xe):Me:""]},xo(Ee.renderToolbarButton(qe,xe))))}else m&&pe.push(u(m,{key:`bd${W.code||Ge}`,disabled:W.disabled,loading:W.loading,type:W.type,mode:W.mode,icon:W.icon,circle:W.circle,round:W.round,status:W.status,content:W.name,title:W.title,routerLink:W.routerLink,permissionCode:W.permissionCode,prefixTooltip:W.prefixTooltip,suffixTooltip:W.suffixTooltip,destroyOnClose:W.destroyOnClose,placement:W.placement,transfer:W.transfer,onClick:({$event:Me})=>N(Me,W)},Ve&&Ve.length?{dropdowns:()=>Ae(W,!0)}:{}))}}),ue&&pe.push(...xo(ue({buttons:re||[],$grid:A,$table:X}))),pe},H=()=>{const{tools:re}=e,{connectTable:ve}=P,X=ve,ie=n.toolPrefix||n["tool-prefix"],ue=n.toolSuffix||n["tool-suffix"],pe=[];return ie&&pe.push(...xo(ie({tools:re||[],$grid:A,$table:X}))),re&&re.forEach((W,Ge)=>{const{dropdowns:Ve,toolRender:qe}=W;if(W.visible!==!1){const Ee=qe?qe.name:null,Me=qe?xi.get(Ee):null;if(qe&&Me&&Me.renderToolbarTool){const xe=Me.toolbarToolClassName,Ze={$grid:A,$table:X,tool:W};pe.push(u("span",{key:Ee,class:["vxe-tool--item",xe?r.isFunction(xe)?xe(Ze):xe:""]},xo(Me.renderToolbarTool(qe,Ze))))}else m&&pe.push(u(m,{key:Ge,disabled:W.disabled,loading:W.loading,type:W.type,mode:W.mode,icon:W.icon,circle:W.circle,round:W.round,status:W.status,content:W.name,title:W.title,routerLink:W.routerLink,permissionCode:W.permissionCode,prefixTooltip:W.prefixTooltip,suffixTooltip:W.suffixTooltip,destroyOnClose:W.destroyOnClose,placement:W.placement,transfer:W.transfer,onClick:({$event:xe})=>J(xe,W)},Ve&&Ve.length?{dropdowns:()=>Ae(W,!1)}:{}))}}),ue&&pe.push(...xo(ue({tools:re||[],$grid:A,$table:X}))),pe},ce=()=>{const re=$.value;return m?u(m,{key:"import",circle:!0,icon:re.icon||Tl().TOOLBAR_TOOLS_IMPORT,title:sn("vxe.toolbar.import"),onClick:ee}):We()},ne=()=>{const re=L.value;return m?u(m,{key:"export",circle:!0,icon:re.icon||Tl().TOOLBAR_TOOLS_EXPORT,title:sn("vxe.toolbar.export"),onClick:fe}):We()},oe=()=>{const re=M.value;return m?u(m,{key:"print",circle:!0,icon:re.icon||Tl().TOOLBAR_TOOLS_PRINT,title:sn("vxe.toolbar.print"),onClick:ke}):We()},me=()=>{const re=Q.value;return m?u(m,{key:"refresh",circle:!0,icon:I.isRefresh?re.iconLoading||Tl().TOOLBAR_TOOLS_REFRESH_LOADING:re.icon||Tl().TOOLBAR_TOOLS_REFRESH,title:sn("vxe.toolbar.refresh"),onClick:he}):We()},be=()=>{const re=F.value;return A&&m?u(m,{key:"zoom",circle:!0,icon:A.isMaximized()?re.iconOut||Tl().TOOLBAR_TOOLS_MINIMIZE:re.iconIn||Tl().TOOLBAR_TOOLS_FULLSCREEN,title:sn(`vxe.toolbar.zoom${A.isMaximized()?"Out":"In"}`),onClick:Z}):We()},Se=()=>{const re=T.value,ve=C.value,X={};return ve==="manual"||(ve==="hover"?(X.onMouseenter=_,X.onMouseleave=se):X.onClick=k),m?u(m,Object.assign({key:"custom",circle:!0,icon:re.icon||Tl().TOOLBAR_TOOLS_CUSTOM,title:sn("vxe.toolbar.custom"),className:"vxe-toolbar-custom-target"},X)):We()},Ce=()=>{const{perfect:re,loading:ve,refresh:X,zoom:ie,custom:ue,className:pe}=e,{connectTable:W}=P,Ge=y.value,Ve=n.tools,qe=n.buttons,Ee=W;return u("div",{ref:d,class:["vxe-toolbar",pe?r.isFunction(pe)?pe({$toolbar:b}):pe:"",{[`size--${Ge}`]:Ge,"is--perfect":re,"is--loading":ve}]},[u("div",{class:"vxe-buttons--wrapper"},qe?qe({$grid:A,$table:Ee}):Y()),u("div",{class:"vxe-tools--wrapper"},Ve?Ve({$grid:A,$table:Ee}):H()),u("div",{class:"vxe-tools--operate"},[e.import?ce():We(),e.export?ne():We(),e.print?oe():We(),X?me():We(),ie&&A?be():We(),ue?Se():We()])])};return b.renderVN=Ce,ae(()=>{const{refresh:re}=e,ve=Q.value,X=ve.queryMethod||ve.query;re&&!A&&!X&&fs("vxe.error.notFunc",["queryMethod"]),T.value}),b},render(){return this.renderVN()}}),Os=Object.assign({},gn,{install(e){e.component(gn.name,gn)}});te.dynamicApp&&te.dynamicApp.component(gn.name,gn);te.component(gn);const Iu=Os,{getConfig:bl,getI18n:rn,commands:Fu,hooks:ku,useFns:Au,createEvent:Lu,globalEvents:er,GLOBAL_EVENT_KEYS:$u}=te,Bu=Object.keys(wr),wi=["clearAll","syncData","updateData","loadData","reloadData","reloadRow","loadColumn","reloadColumn","getRowNode","getColumnNode","getRowIndex","getVTRowIndex","getVMRowIndex","getColumnIndex","getVTColumnIndex","getVMColumnIndex","setRow","createData","createRow","revertData","clearData","isInsertByRow","isUpdateByRow","getColumns","getColumnById","getColumnByField","getTableColumn","getFullColumns","getData","getCheckboxRecords","getParentRow","getTreeParentRow","getRowSeq","getRowById","getRowid","getTableData","getFullData","setColumnFixed","clearColumnFixed","setColumnWidth","getColumnWidth","hideColumn","showColumn","resetColumn","refreshColumn","refreshScroll","recalculate","closeTooltip","isAllCheckboxChecked","isAllCheckboxIndeterminate","getCheckboxIndeterminateRecords","setCheckboxRow","setCheckboxRowKey","isCheckedByCheckboxRow","isCheckedByCheckboxRowKey","isIndeterminateByCheckboxRow","isIndeterminateByCheckboxRowKey","toggleCheckboxRow","setAllCheckboxRow","getRadioReserveRecord","clearRadioReserve","getCheckboxReserveRecords","clearCheckboxReserve","toggleAllCheckboxRow","clearCheckboxRow","setCurrentRow","isCheckedByRadioRow","isCheckedByRadioRowKey","setRadioRow","setRadioRowKey","clearCurrentRow","clearRadioRow","getCurrentRecord","getRadioRecord","getCurrentColumn","setCurrentColumn","clearCurrentColumn","setPendingRow","togglePendingRow","getPendingRecords","clearPendingRow","sort","setSort","clearSort","isSort","getSortColumns","closeFilter","isFilter","isActiveFilterByColumn","isRowExpandLoaded","clearRowExpandLoaded","reloadRowExpand","reloadRowExpand","toggleRowExpand","setAllRowExpand","setRowExpand","isExpandByRow","isRowExpandByRow","clearRowExpand","clearRowExpandReserve","getRowExpandRecords","getTreeExpandRecords","isTreeExpandLoaded","clearTreeExpandLoaded","reloadTreeExpand","reloadTreeChilds","toggleTreeExpand","setAllTreeExpand","setTreeExpand","isTreeExpandByRow","clearTreeExpand","clearTreeExpandReserve","getScroll","scrollTo","scrollToRow","scrollToColumn","clearScroll","updateFooter","updateStatus","setMergeCells","removeInsertRow","removeMergeCells","getMergeCells","clearMergeCells","setMergeFooterItems","removeMergeFooterItems","getMergeFooterItems","clearMergeFooterItems","getCustomStoreData","openTooltip","getCellLabel","getCellElement","focus","blur","connect"],Hu=[...Er,"page-change","form-submit","form-submit-invalid","form-reset","form-collapse","form-toggle-collapse","proxy-query","proxy-delete","proxy-save","toolbar-button-click","toolbar-tool-click","zoom"],mn=Lo({name:"VxeGrid",props:Object.assign(Object.assign({},wr),{layouts:Array,columns:Array,pagerConfig:Object,proxyConfig:Object,toolbarConfig:Object,formConfig:Object,zoomConfig:Object,size:{type:String,default:()=>bl().grid.size||bl().size}}),emits:Hu,setup(e,o){var n;const{slots:a,emit:x}=o,m=r.uniqueId(),y=te.getComponent("VxeForm"),I=te.getComponent("VxePager"),{computeSize:P}=Au.useSize(e),d=_o({tableLoading:!1,proxyInited:!1,isZMax:!1,tableData:[],filterData:[],formData:{},sortData:[],tZindex:0,tablePage:{total:0,pageSize:((n=bl().pager)===null||n===void 0?void 0:n.pageSize)||10,currentPage:1}}),f=ze(),b=ze(),j=ze(),A=ze(),Q=ze(),$=ze(),L=ze(),M=ze(),F=ze(),T=ze(),w=B=>{const le={};return B.forEach(de=>{le[de]=(...Le)=>{const Te=b.value;if(Te&&Te[de])return Te[de](...Le)}}),le},C=w(wi);wi.forEach(B=>{C[B]=(...le)=>{const de=b.value;if(de&&de[B])return de&&de[B](...le)}});const R=_e(()=>r.merge({},r.clone(bl().grid.proxyConfig,!0),e.proxyConfig)),k=_e(()=>{const B=R.value;return r.isBoolean(B.message)?B.message:B.showResponseMsg}),_=_e(()=>R.value.showActiveMsg),se=_e(()=>Object.assign({},bl().grid.pagerConfig,e.pagerConfig)),he=_e(()=>Object.assign({},bl().grid.formConfig,e.formConfig)),Z=_e(()=>Object.assign({},bl().grid.toolbarConfig,e.toolbarConfig)),N=_e(()=>Object.assign({},bl().grid.zoomConfig,e.zoomConfig)),J=_e(()=>d.isZMax?{zIndex:d.tZindex}:null),ee=_e(()=>{const B={},le=e;return Bu.forEach(de=>{B[de]=le[de]}),B}),fe=_e(()=>{const{seqConfig:B,pagerConfig:le,loading:de,editConfig:Le,proxyConfig:Te}=e,{isZMax:Qe,tableLoading:Ye,tablePage:nt,tableData:ft}=d,Et=ee.value,gt=R.value,xt=se.value,At=Object.assign({},Et);return Qe&&(Et.maxHeight?At.maxHeight="100%":At.height="100%"),Te&&ct(gt)&&(At.loading=de||Ye,At.data=ft,le&&gt.seq&&ct(xt)&&(At.seqConfig=Object.assign({},B,{startIndex:(nt.currentPage-1)*nt.pageSize}))),Le&&(At.editConfig=Object.assign({},Le)),At}),ke=_e(()=>{const{layouts:B}=e;return B&&B.length?B:bl().grid.layouts||["Form","Toolbar","Top","Table","Bottom","Pager"]}),Be=_e(()=>{const B=se.value;return`${B.currentPage}${B.pageSize}`}),Ae={refElem:f,refTable:b,refForm:j,refToolbar:A,refPager:Q},Y={computeProxyOpts:R,computePagerOpts:se,computeFormOpts:he,computeToolbarOpts:Z,computeZoomOpts:N},H={xID:m,props:e,context:o,reactData:d,getRefMaps:()=>Ae,getComputeMaps:()=>Y},ce=()=>{const B=Z.value;e.toolbarConfig&&ct(B)&&ae(()=>{const le=b.value,de=A.value;le&&de&&le.connect(de)})},ne=()=>{const{proxyConfig:B}=e,{formData:le}=d,de=R.value,Le=he.value;return B&&ct(de)&&de.form?le:Le.data},oe=()=>{const{tablePage:B}=d,{pagerConfig:le}=e,de=se.value,{currentPage:Le,pageSize:Te}=de;le&&ct(de)&&(Le&&(B.currentPage=Le),Te&&(B.pageSize=Te))},me=B=>{const le=_.value,de=b.value,Le=de.getCheckboxRecords();Le.length?(de.togglePendingRow(Le),C.clearCheckboxRow()):le&&te.modal&&te.modal.message({id:B,content:rn("vxe.grid.selectOneRecord"),status:"warning"})},be=(B,le)=>{const de=R.value,Te=(de.response||de.props||{}).message;let Qe;return B&&Te&&(Qe=r.isFunction(Te)?Te({data:B,$grid:H}):r.get(B,Te)),Qe||rn(le)},Se=(B,le,de)=>{const Le=_.value,Te=C.getCheckboxRecords();if(Le)if(Te.length){if(te.modal)return te.modal.confirm({id:`cfm_${B}`,content:rn(le),escClosable:!0}).then(Qe=>{if(Qe==="confirm")return de()})}else te.modal&&te.modal.message({id:`msg_${B}`,content:rn("vxe.grid.selectOneRecord"),status:"warning"});else Te.length&&de();return Promise.resolve()},Ce=B=>{const{proxyConfig:le}=e,{tablePage:de}=d,{$event:Le,currentPage:Te,pageSize:Qe}=B,Ye=R.value;de.currentPage=Te,de.pageSize=Qe,Ie.dispatchEvent("page-change",B,Le),le&&ct(Ye)&&Ie.commitProxy("query").then(nt=>{Ie.dispatchEvent("proxy-query",nt,Le)})},re=B=>{const le=b.value,{proxyConfig:de}=e,{computeSortOpts:Le}=le.getComputeMaps(),Te=R.value;Le.value.remote&&(d.sortData=B.sortList,de&&ct(Te)&&(d.tablePage.currentPage=1,Ie.commitProxy("query").then(Ye=>{Ie.dispatchEvent("proxy-query",Ye,B.$event)}))),Ie.dispatchEvent("sort-change",B,B.$event)},ve=B=>{const le=b.value,{proxyConfig:de}=e,{computeFilterOpts:Le}=le.getComputeMaps(),Te=R.value;Le.value.remote&&(d.filterData=B.filterList,de&&ct(Te)&&(d.tablePage.currentPage=1,Ie.commitProxy("query").then(Ye=>{Ie.dispatchEvent("proxy-query",Ye,B.$event)}))),Ie.dispatchEvent("filter-change",B,B.$event)},X=B=>{const{proxyConfig:le}=e,de=R.value;le&&ct(de)&&Ie.commitProxy("reload").then(Le=>{Ie.dispatchEvent("proxy-query",Object.assign(Object.assign({},Le),{isReload:!0}),B.$event)}),Ie.dispatchEvent("form-submit",B,B.$event)},ie=B=>{const{proxyConfig:le}=e,{$event:de}=B,Le=R.value,Te=b.value;le&&ct(Le)&&(Te.clearScroll(),Ie.commitProxy("reload").then(Qe=>{Ie.dispatchEvent("proxy-query",Object.assign(Object.assign({},Qe),{isReload:!0}),de)})),Ie.dispatchEvent("form-reset",B,de)},ue=B=>{Ie.dispatchEvent("form-submit-invalid",B,B.$event)},pe=B=>{const{$event:le}=B;ae(()=>C.recalculate(!0)),Ie.dispatchEvent("form-toggle-collapse",B,le),Ie.dispatchEvent("form-collapse",B,le)},W=B=>{const{isZMax:le}=d;return(B?!le:le)&&(d.isZMax=!le,d.tZindex<_i()&&(d.tZindex=Ni())),ae().then(()=>C.recalculate(!0)).then(()=>d.isZMax)},Ge=(B,le)=>{const de=B[le];if(de)if(r.isString(de)){if(a[de])return a[de]}else return de;return null},Ve=()=>{const{formConfig:B,proxyConfig:le}=e,{formData:de}=d,Le=R.value,Te=he.value;if(B&&ct(Te)||a.form){let Qe=[];if(a.form)Qe=a.form({$grid:H});else if(Te.items){const Ye={};if(!Te.inited){Te.inited=!0;const nt=Le.beforeItem;Le&&nt&&Te.items.forEach(ft=>{nt({$grid:H,item:ft})})}Te.items.forEach(nt=>{r.each(nt.slots,ft=>{r.isFunction(ft)||a[ft]&&(Ye[ft]=a[ft])})}),y&&Qe.push(u(y,Object.assign(Object.assign({ref:j},Object.assign({},Te,{data:le&&ct(Le)&&Le.form?de:Te.data})),{onSubmit:X,onReset:ie,onSubmitInvalid:ue,onCollapse:pe}),Ye))}return u("div",{ref:$,key:"form",class:"vxe-grid--form-wrapper"},Qe)}return We()},qe=()=>{const{toolbarConfig:B}=e,le=Z.value;if(B&&ct(le)||a.toolbar){let de=[];if(a.toolbar)de=a.toolbar({$grid:H});else{const Le=le.slots;let Te,Qe;const Ye={};Le&&(Te=Ge(Le,"buttons"),Qe=Ge(Le,"tools"),Te&&(Ye.buttons=Te),Qe&&(Ye.tools=Qe)),de.push(u(Os,Object.assign({ref:A},le),Ye))}return u("div",{ref:L,key:"toolbar",class:"vxe-grid--toolbar-wrapper"},de)}return We()},Ee=()=>a.top?u("div",{ref:M,key:"top",class:"vxe-grid--top-wrapper"},a.top({$grid:H})):We(),Me=()=>{const B=a.left;return B?u("div",{class:"vxe-grid--left-wrapper"},B({$grid:H})):We()},xe=()=>{const B=a.right;return B?u("div",{class:"vxe-grid--right-wrapper"},B({$grid:H})):We()},Ze=()=>{const{proxyConfig:B}=e,le=fe.value,de=R.value,Le=Object.assign({},ge),Te=a.empty,Qe=a.loading;B&&ct(de)&&(de.sort&&(Le.onSortChange=re),de.filter&&(Le.onFilterChange=ve));const Ye={};return Te&&(Ye.empty=()=>Te({$grid:H})),Qe&&(Ye.loading=()=>Qe({$grid:H})),u("div",{class:"vxe-grid--table-wrapper"},[u(Rs,Object.assign(Object.assign({ref:b},le),Le),Ye)])},Fe=()=>a.bottom?u("div",{ref:F,key:"bottom",class:"vxe-grid--bottom-wrapper"},a.bottom({$grid:H})):We(),$e=()=>{const{proxyConfig:B,pagerConfig:le}=e,de=R.value,Le=se.value;if(le&&ct(Le)||a.pager){let Te=[];if(a.pager)Te=a.pager({$grid:H});else{const Qe=Le.slots,Ye={};let nt,ft;Qe&&(nt=Ge(Qe,"left"),ft=Ge(Qe,"right"),nt&&(Ye.left=nt),ft&&(Ye.right=ft)),I&&Te.push(u(I,Object.assign(Object.assign(Object.assign({ref:Q},Le),B&&ct(de)?d.tablePage:{}),{onPageChange:Ce}),Ye))}return u("div",{ref:T,key:"pager",class:"vxe-grid--pager-wrapper"},Te)}return We()},He=()=>{const B=[];return ke.value.forEach(de=>{switch(de){case"Form":B.push(Ve());break;case"Toolbar":B.push(qe());break;case"Top":B.push(Ee());break;case"Table":B.push(u("div",{key:"table",class:"vxe-grid--table-container"},[Me(),Ze(),xe()]));break;case"Bottom":B.push(Fe());break;case"Pager":B.push($e());break}}),B},ge={};Er.forEach(B=>{const le=r.camelCase(`on-${B}`);ge[le]=(...de)=>x(B,...de)});const we=()=>{const{proxyConfig:B,formConfig:le}=e,{proxyInited:de}=d,Le=R.value,Te=he.value;if(B&&ct(Le)){if(le&&ct(Te)&&Le.form&&Te.items){const Qe={};Te.items.forEach(Ye=>{const{field:nt,itemRender:ft}=Ye;if(nt){let Et=null;if(ft){const{defaultValue:gt}=ft;r.isFunction(gt)?Et=gt({item:Ye}):r.isUndefined(gt)||(Et=gt)}Qe[nt]=Et}}),d.formData=Qe}de||(d.proxyInited=!0,Le.autoLoad!==!1&&ae().then(()=>Ie.commitProxy("_init")).then(Qe=>{Ie.dispatchEvent("proxy-query",Object.assign(Object.assign({},Qe),{isInited:!0}),new Event("init"))}))}},je=B=>{const le=N.value;er.hasKey(B,$u.ESCAPE)&&d.isZMax&&le.escRestore!==!1&&Ke.triggerZoomEvent(B)},Ie={dispatchEvent:(B,le,de)=>{x(B,Lu(de,{$grid:H},le))},commitProxy(B,...le){const{toolbarConfig:de,pagerConfig:Le,editRules:Te,validConfig:Qe}=e,{tablePage:Ye}=d,nt=_.value,ft=k.value,Et=R.value,gt=se.value,xt=Z.value,{beforeQuery:At,afterQuery:st,beforeDelete:et,afterDelete:Ot,beforeSave:Ut,afterSave:Yt,ajax:Dt={}}=Et,_t=Et.response||Et.props||{},dt=b.value,It=ne();let Ft=null,yt=null;if(r.isString(B)){const{buttons:ht}=xt,St=de&&ct(xt)&&ht?r.findTree(ht,h=>h.code===B,{children:"dropdowns"}):null;Ft=St?St.item:null,yt=B}else Ft=B,yt=Ft.code;const co=Ft?Ft.params:null;switch(yt){case"insert":return dt.insert({});case"insert_edit":return dt.insert({}).then(({row:ht})=>dt.setEditRow(ht));case"insert_actived":return dt.insert({}).then(({row:ht})=>dt.setEditRow(ht));case"mark_cancel":me(yt);break;case"remove":return Se(yt,"vxe.grid.removeSelectRecord",()=>dt.removeCheckboxRow());case"import":dt.importData(co);break;case"open_import":dt.openImport(co);break;case"export":dt.exportData(co);break;case"open_export":dt.openExport(co);break;case"reset_custom":return dt.resetCustom(!0);case"_init":case"reload":case"query":{const ht=Dt.query,St=Dt.querySuccess,h=Dt.queryError;if(ht){const Lt=yt==="_init",Zt=yt==="reload";let po=[],oo=[],qt={};if(Le&&((Lt||Zt)&&(Ye.currentPage=1),ct(gt)&&(qt=Object.assign({},Ye))),Lt){let Ct=null;if(dt){const{computeSortOpts:Vt}=dt.getComputeMaps();Ct=Vt.value.defaultSort}Ct&&(r.isArray(Ct)||(Ct=[Ct]),po=Ct.map(Vt=>({field:Vt.field,property:Vt.field,order:Vt.order}))),dt&&(oo=dt.getCheckedFilters())}else dt&&(Zt?dt.clearAll():(po=dt.getSortColumns(),oo=dt.getCheckedFilters()));const Qt={code:yt,button:Ft,isInited:Lt,isReload:Zt,$grid:H,page:qt,sort:po.length?po[0]:{},sorts:po,filters:oo,form:It,options:ht};return d.sortData=po,d.filterData=oo,d.tableLoading=!0,Promise.resolve((At||ht)(Qt,...le)).then(Ct=>{if(d.tableLoading=!1,Ct)if(Le&&ct(gt)){const Vt=_t.total,ro=(r.isFunction(Vt)?Vt({data:Ct,$grid:H}):r.get(Ct,Vt||"page.total"))||0;Ye.total=r.toNumber(ro);const $o=_t.result;d.tableData=(r.isFunction($o)?$o({data:Ct,$grid:H}):r.get(Ct,$o||"result"))||[];const nl=Math.max(Math.ceil(ro/Ye.pageSize),1);Ye.currentPage>nl&&(Ye.currentPage=nl)}else{const Vt=_t.list;d.tableData=(Vt?r.isFunction(Vt)?Vt({data:Ct,$grid:H}):r.get(Ct,Vt):Ct)||[]}else d.tableData=[];return st&&st(Qt,...le),St&&St(Object.assign(Object.assign({},Qt),{response:Ct})),{status:!0}}).catch(Ct=>(d.tableLoading=!1,h&&h(Object.assign(Object.assign({},Qt),{response:Ct})),{status:!1}))}break}case"delete":{const ht=Dt.delete,St=Dt.deleteSuccess,h=Dt.deleteError;if(ht){const Lt=C.getCheckboxRecords(),Zt=Lt.filter(qt=>!dt.isInsertByRow(qt)),oo={$grid:H,code:yt,button:Ft,body:{removeRecords:Zt},form:It,options:ht};if(Lt.length)return Se(yt,"vxe.grid.deleteSelectRecord",()=>Zt.length?(d.tableLoading=!0,Promise.resolve((et||ht)(oo,...le)).then(qt=>(d.tableLoading=!1,dt.setPendingRow(Zt,!1),ft&&te.modal&&te.modal.message({content:be(qt,"vxe.grid.delSuccess"),status:"success"}),Ot?Ot(oo,...le):Ie.commitProxy("query"),St&&St(Object.assign(Object.assign({},oo),{response:qt})),{status:!0})).catch(qt=>(d.tableLoading=!1,ft&&te.modal&&te.modal.message({id:yt,content:be(qt,"vxe.grid.operError"),status:"error"}),h&&h(Object.assign(Object.assign({},oo),{response:qt})),{status:!1}))):dt.remove(Lt));nt&&te.modal&&te.modal.message({id:yt,content:rn("vxe.grid.selectOneRecord"),status:"warning"})}break}case"save":{const ht=Dt.save,St=Dt.saveSuccess,h=Dt.saveError;if(ht){const Lt=dt.getRecordset(),{insertRecords:Zt,removeRecords:po,updateRecords:oo,pendingRecords:qt}=Lt,Qt={$grid:H,code:yt,button:Ft,body:Lt,form:It,options:ht};Zt.length&&(Lt.pendingRecords=qt.filter(Vt=>dt.findRowIndexOf(Zt,Vt)===-1)),qt.length&&(Lt.insertRecords=Zt.filter(Vt=>dt.findRowIndexOf(qt,Vt)===-1));let Ct=Promise.resolve();return Te&&(Ct=dt[Qe&&Qe.msgMode==="full"?"fullValidate":"validate"](Lt.insertRecords.concat(oo))),Ct.then(Vt=>{if(!Vt){if(Lt.insertRecords.length||po.length||oo.length||Lt.pendingRecords.length)return d.tableLoading=!0,Promise.resolve((Ut||ht)(Qt,...le)).then(ro=>(d.tableLoading=!1,dt.clearPendingRow(),ft&&te.modal&&te.modal.message({content:be(ro,"vxe.grid.saveSuccess"),status:"success"}),Yt?Yt(Qt,...le):Ie.commitProxy("query"),St&&St(Object.assign(Object.assign({},Qt),{response:ro})),{status:!0})).catch(ro=>(d.tableLoading=!1,ft&&te.modal&&te.modal.message({id:yt,content:be(ro,"vxe.grid.operError"),status:"error"}),h&&h(Object.assign(Object.assign({},Qt),{response:ro})),{status:!1}));nt&&te.modal&&te.modal.message({id:yt,content:rn("vxe.grid.dataUnchanged"),status:"info"})}})}break}default:{const ht=Fu.get(yt);if(ht){const St=ht.tableCommandMethod||ht.commandMethod;St&&St({code:yt,button:Ft,$grid:H,$table:dt},...le)}}}return ae()},zoom(){return d.isZMax?Ie.revert():Ie.maximize()},isMaximized(){return d.isZMax},maximize(){return W(!0)},revert(){return W()},getFormData:ne,getFormItems(B){const le=he.value,{formConfig:de}=e,{items:Le}=le,Te=[];return r.eachTree(de&&ct(le)&&Le?Le:[],Qe=>{Te.push(Qe)},{children:"children"}),r.isUndefined(B)?Te:Te[B]},getProxyInfo(){const B=b.value;if(e.proxyConfig){const{sortData:le}=d;return{data:d.tableData,filter:d.filterData,form:ne(),sort:le.length?le[0]:{},sorts:le,pager:d.tablePage,pendingRecords:B?B.getPendingRecords():[]}}return null}},Ke={extendTableMethods:w,callSlot(B,le){return B&&(r.isString(B)&&(B=a[B]||null),r.isFunction(B))?xo(B(le)):[]},getExcludeHeight(){const{height:B}=e,{isZMax:le}=d,de=f.value,Le=$.value,Te=L.value,Qe=M.value,Ye=F.value,nt=T.value;return(le||!(B==="auto"||B==="100%")?0:ir(de.parentNode))+ir(de)+An(Le)+An(Te)+An(Qe)+An(Ye)+An(nt)},getParentHeight(){const B=f.value;return B?(d.isZMax?Cs().visibleHeight:r.toNumber(getComputedStyle(B.parentNode).height))-Ke.getExcludeHeight():0},triggerToolbarCommitEvent(B,le){const{code:de}=B;return Ie.commitProxy(B,le).then(Le=>{de&&Le&&Le.status&&["query","reload","delete","save"].includes(de)&&Ie.dispatchEvent(de==="delete"||de==="save"?`proxy-${de}`:"proxy-query",Object.assign(Object.assign({},Le),{isReload:de==="reload"}),le)})},triggerToolbarBtnEvent(B,le){Ke.triggerToolbarCommitEvent(B,le),Ie.dispatchEvent("toolbar-button-click",{code:B.code,button:B},le)},triggerToolbarTolEvent(B,le){Ke.triggerToolbarCommitEvent(B,le),Ie.dispatchEvent("toolbar-tool-click",{code:B.code,tool:B},le)},triggerZoomEvent(B){Ie.zoom(),Ie.dispatchEvent("zoom",{type:d.isZMax?"max":"revert"},B)}};Object.assign(H,C,Ie,Ke);const ye=ze(0);wt(()=>e.columns?e.columns.length:-1,()=>{ye.value++}),wt(()=>e.columns,()=>{ye.value++}),wt(ye,()=>{ae(()=>H.loadColumn(e.columns||[]))}),wt(()=>e.toolbarConfig,()=>{ce()}),wt(Be,()=>{oe()}),wt(()=>e.proxyConfig,()=>{we()}),ku.forEach(B=>{const{setupGrid:le}=B;if(le){const de=le(H);de&&r.isObject(de)&&Object.assign(H,de)}}),oe(),zl(()=>{ae(()=>{const{columns:B}=e;B&&B.length&&H.loadColumn(B),ce(),we()}),er.on(H,"keydown",je)}),ql(()=>{er.off(H,"keydown")});const lt=()=>{const B=P.value,le=J.value;return u("div",{ref:f,class:["vxe-grid",{[`size--${B}`]:B,"is--animat":!!e.animat,"is--round":e.round,"is--maximize":d.isZMax,"is--loading":e.loading||d.tableLoading}],style:le},He())};return H.renderVN=lt,Fl("$xeGrid",H),H},render(){return this.renderVN()}}),yr=Object.assign({},mn,{install(e){e.component(mn.name,mn)}});te.dynamicApp&&te.dynamicApp.component(mn.name,mn);te.component(mn);const Pu=yr,Vu={vxe:{base:{pleaseInput:"请输入",pleaseSelect:"请选择",comma:"，",fullStop:"。"},loading:{text:"加载中..."},error:{downErr:"下载失败",groupFixed:"如果使用分组表头，冻结列必须按组设置",groupMouseRange:'分组表头与 "{0}" 不能同时使用，这可能会出现错误',groupTag:'分组列头应该使用 "{0}" 而不是 "{1}"，这可能会出现错误',scrollErrProp:'启用虚拟滚动后不支持该参数 "{0}"',errConflicts:'参数 "{0}" 与 "{1}" 有冲突',unableInsert:"无法插入到指定位置，请检查参数是否正确",useErr:'安装 "{0}" 模块时发生错误，可能顺序不正确，依赖的模块需要在 Table 之前安装',barUnableLink:"工具栏无法关联表格",expandContent:'展开行的插槽应该是 "content"，请检查是否正确',reqComp:'缺少 "{0}" 组件，请检查是否正确安装。 https://vxeui.com/#/start/useGlobal',reqModule:'缺少 "{0}" 模块',reqProp:'缺少必要的 "{0}" 参数，这可能会导致出现错误',emptyProp:'参数 "{0}" 不允许为空',errProp:'不支持的参数 "{0}"，可能为 "{1}"',colRepet:'column.{0}="{1}" 重复了，这可能会导致某些功能无法使用',notFunc:'方法 "{0}" 不存在',errFunc:'参数 "{0}" 不是一个方法',notValidators:'全局校验 "{0}" 不存在',notFormats:'全局格式化 "{0}" 不存在',notCommands:'全局指令 "{0}" 不存在',notSlot:'插槽 "{0}" 不存在',noTree:'树结构不支持 "{0}"',notProp:'不支持的参数 "{0}"',checkProp:'当数据量过大时可能会导致复选框卡顿，建议设置参数 "{0}" 提升渲染速度',coverProp:'"{0}" 的参数 "{1}" 重复定义，这可能会出现错误',uniField:'字段名 "{0}" 重复定义，这可能会出现错误',repeatKey:'主键重复 {0}="{1}"，这可能会出现错误',delFunc:'方法 "{0}" 已废弃，请使用 "{1}"',delProp:'参数 "{0}" 已废弃，请使用 "{1}"',delEvent:'事件 "{0}" 已废弃，请使用 "{1}"',removeProp:'参数 "{0}" 已废弃，不建议使用，这可能会导致出现错误',errFormat:'全局的格式化内容应该使用 "VXETable.formats" 定义，挂载 "formatter={0}" 的方式已不建议使用',notType:'不支持的文件类型 "{0}"',notExp:"该浏览器不支持导入/导出功能",impFields:"导入失败，请检查字段名和数据格式是否正确",treeNotImp:"树表格不支持导入",treeCrossDrag:"只能拖拽第一层级",treeDragChild:"父级不能拖拽到自己的子级中",reqPlugin:'可选扩展插件 "{1}" https://vxeui.com/other{0}/#/{1}/install'},table:{emptyText:"暂无数据",allTitle:"全选/取消",seqTitle:"序号",actionTitle:"操作",confirmFilter:"筛选",resetFilter:"重置",allFilter:"全部",sortAsc:"升序：最低到最高",sortDesc:"降序：最高到最低",filter:"对所选的列启用筛选",impSuccess:"成功导入 {0} 条记录",expLoading:"正在导出中",expSuccess:"导出成功",expError:"导出失败",expFilename:"导出_{0}",expOriginFilename:"导出_源_{0}",customTitle:"列设置",customAll:"全部",customConfirm:"确认",customClose:"关闭",customCancel:"取消",customRestore:"恢复默认",maxFixedCol:"最大冻结列的数量不能超过 {0} 个",dragTip:"移动：{0}"},grid:{selectOneRecord:"请至少选择一条记录！",deleteSelectRecord:"您确定要删除所选记录吗？",removeSelectRecord:"您确定要移除所选记录吗？",dataUnchanged:"数据未改动！",delSuccess:"成功删除所选记录！",saveSuccess:"保存成功！",operError:"发生错误，操作失败！"},select:{search:"搜索",loadingText:"加载中",emptyText:"暂无数据"},pager:{goto:"前往",gotoTitle:"页数",pagesize:"{0}条/页",total:"共 {0} 条记录",pageClassifier:"页",homePage:"首页",homePageTitle:"首页",prevPage:"上一页",prevPageTitle:"上一页",nextPage:"下一页",nextPageTitle:"下一页",prevJump:"向上跳页",prevJumpTitle:"向上跳页",nextJump:"向下跳页",nextJumpTitle:"向下跳页",endPage:"末页",endPageTitle:"末页"},alert:{title:"系统提示"},button:{confirm:"确认",cancel:"取消"},filter:{search:"搜索"},custom:{cstmTitle:"列设置",cstmRestore:"恢复默认",cstmCancel:"取消",cstmConfirm:"确定",cstmConfirmRestore:"请确认是否恢复成默认列配置？",cstmDragTarget:"移动：{0}",setting:{colSort:"排序",sortHelpTip:"点击并拖动图标可以调整列的排序",colTitle:"列标题",colResizable:"列宽（像素）",colVisible:"是否显示",colFixed:"冻结列",colFixedMax:"冻结列（最多 {0} 列）",fixedLeft:"左侧",fixedUnset:"不设置",fixedRight:"右侧"}},import:{modes:{covering:"覆盖方式（直接覆盖表格数据）",insert:"底部追加（在表格的底部追加新数据）",insertTop:"顶部追加（在表格的顶部追加新数据）",insertBottom:"底部追加（在表格的底部追加新数据）"},impTitle:"导入数据",impFile:"文件名",impSelect:"选择文件",impType:"文件类型",impOpts:"参数设置",impMode:"导入模式",impConfirm:"导入",impCancel:"取消"},export:{types:{csv:"CSV (逗号分隔)(*.csv)",html:"网页(*.html)",xml:"XML 数据(*.xml)",txt:"文本文件(制表符分隔)(*.txt)",xls:"Excel 97-2003 工作簿(*.xls)",xlsx:"Excel 工作簿(*.xlsx)",pdf:"PDF (*.pdf)"},modes:{current:"当前数据（当前页的数据）",selected:"选中数据（当前页选中的数据）",all:"全量数据（包括所有分页的数据）"},printTitle:"打印数据",expTitle:"导出数据",expName:"文件名",expNamePlaceholder:"请输入文件名",expSheetName:"标题",expSheetNamePlaceholder:"请输入标题",expType:"保存类型",expMode:"选择数据",expCurrentColumn:"全部字段",expColumn:"选择字段",expOpts:"参数设置",expOptHeader:"表头",expHeaderTitle:"是否需要表头",expOptFooter:"表尾",expFooterTitle:"是否需要表尾",expOptColgroup:"分组表头",expColgroupTitle:"如果存在，则支持带有分组结构的表头",expOptMerge:"合并",expMergeTitle:"如果存在，则支持带有合并结构的单元格",expOptAllExpand:"展开层级",expAllExpandTitle:"如果存在，则支持将带有层级结构的数据全部展开",expOptUseStyle:"样式",expUseStyleTitle:"如果存在，则支持带样式的单元格",expOptOriginal:"源数据",expOriginalTitle:"如果为源数据，则支持导入到表格中",expPrint:"打印",expConfirm:"导出",expCancel:"取消"},modal:{errTitle:"错误提示",zoomMin:"最小化",zoomIn:"最大化",zoomOut:"还原",close:"关闭",miniMaxSize:"最小化窗口的数量不能超过 {0} 个",footPropErr:"show-footer 仅用于启用表尾，需配合 show-confirm-button | show-cancel-button | 插槽使用"},drawer:{close:"关闭"},form:{folding:"收起",unfolding:"展开"},toolbar:{import:"导入",export:"导出",print:"打印",refresh:"刷新",zoomIn:"全屏",zoomOut:"还原",custom:"列设置",customAll:"全部",customConfirm:"确认",customRestore:"重置",fixedLeft:"冻结在左侧",fixedRight:"冻结在右侧",cancelFixed:"取消冻结列"},input:{date:{m1:"01 月",m2:"02 月",m3:"03 月",m4:"04 月",m5:"05 月",m6:"06 月",m7:"07 月",m8:"08 月",m9:"09 月",m10:"10 月",m11:"11 月",m12:"12 月",quarterLabel:"{0} 年",monthLabel:"{0} 年",dayLabel:"{0} 年 {1}",labelFormat:{date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyy 年第 WW 周",month:"yyyy-MM",quarter:"yyyy 年第 q 季度",year:"yyyy"},weeks:{w:"周",w0:"周日",w1:"周一",w2:"周二",w3:"周三",w4:"周四",w5:"周五",w6:"周六"},months:{m0:"一月",m1:"二月",m2:"三月",m3:"四月",m4:"五月",m5:"六月",m6:"七月",m7:"八月",m8:"九月",m9:"十月",m10:"十一月",m11:"十二月"},quarters:{q1:"第一季度",q2:"第二季度",q3:"第三季度",q4:"第四季度"}}},numberInput:{currencySymbol:"￥"},imagePreview:{popupTitle:"预览",operBtn:{zoomOut:"缩小",zoomIn:"放大",pctFull:"等比例缩放",pct11:"显示原始尺寸",rotateLeft:"向左旋转",rotateRight:"向右旋转",print:"点击打印图片",download:"点击下载图片"}},upload:{fileBtnText:"点击或拖拽上传",imgBtnText:"点击或拖拽上传",dragPlaceholder:"请把文件拖放到这个区域即可上传",imgSizeHint:"单张{0}",imgCountHint:"最多{0}张",fileTypeHint:"支持 {0} 文件类型",fileSizeHint:"单个文件大小不超过{0}",fileCountHint:"最多可上传{0}个文件",uploadTypeErr:"文件类型不匹配！",overCountErr:"最多只能选择{0}个文件！",overCountExtraErr:"已超出最大数量{0}个，超出的{1}个文件将被忽略！",overSizeErr:"文件大小最大不能超过{0}！",reUpload:"重新上传",uploadProgress:"上传中 {0}%",uploadErr:"上传失败",uploadSuccess:"上传成功",moreBtnText:"更多（{0}）",viewItemTitle:"点击查看",morePopup:{readTitle:"查看列表",imageTitle:"上传图片",fileTitle:"上传文件"}},empty:{defText:"暂无数据"},colorPicker:{clear:"清除",confirm:"确认",copySuccess:"已复制到剪贴板：{0}"},formDesign:{formName:"表单名称",defFormTitle:"未命名的表单",widgetPropTab:"控件属性",widgetFormTab:"表单属性",error:{wdFormUni:"该类型的控件在表单中只允许添加一个",wdSubUni:"该类型的控件在子表中只允许添加一个"},styleSetting:{btn:"样式设置",title:"表单的样式设置",layoutTitle:"控件布局",verticalLayout:"上下布局",horizontalLayout:"横向布局",styleTitle:"标题样式",boldTitle:"标题加粗",fontBold:"加粗",fontNormal:"常规",colonTitle:"显示冒号",colonVisible:"显示",colonHidden:"隐藏",alignTitle:"对齐方式",widthTitle:"标题宽度",alignLeft:"居左",alignRight:"居右",unitPx:"像素",unitPct:"百分比"},widget:{group:{base:"基础控件",layout:"布局控件",system:"系统控件",module:"模块控件",chart:"图表控件",advanced:"高级控件"},copyTitle:"副本_{0}",component:{input:"输入框",textarea:"文本域",select:"下拉选择",row:"一行多列",title:"标题",text:"文本",subtable:"子表",VxeSwitch:"是/否",VxeInput:"输入框",VxeNumberInput:"数字",VxeDatePicker:"日期",VxeTextarea:"文本域",VxeSelect:"下拉选择",VxeTreeSelect:"树形选择",VxeRadioGroup:"单选框",VxeCheckboxGroup:"复选框",VxeUploadFile:"文件",VxeUploadImage:"图片",VxeRate:"评分",VxeSlider:"滑块"}},widgetProp:{name:"控件名称",placeholder:"提示语",required:"必填校验",multiple:"允许多选",displaySetting:{name:"显示设置",pc:"电脑端",mobile:"手机端",visible:"显示",hidden:"隐藏"},dataSource:{name:"数据源",defValue:"选项{0}",addOption:"添加选项",batchEditOption:"批量编辑",batchEditTip:"每行对应一个选项，支持从表格、Excel、WPS 中直接复制粘贴。",batchEditSubTip:"每行对应一个选项，如果是分组，子项可以是空格或制表键开头，支持从表格、Excel、WPS 中直接复制粘贴。",buildOption:"生成选项"},rowProp:{colSize:"列数",col2:"两列",col3:"三列",col4:"四列",col6:"六列",layout:"布局"},textProp:{name:"内容",alignTitle:"对齐方式",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",colorTitle:"字体颜色",sizeTitle:"字体大小",boldTitle:"字体加粗",fontNormal:"常规",fontBold:"加粗"},subtableProp:{seqTitle:"序号",showSeq:"显示序号",showCheckbox:"允许多选",errSubDrag:"子表不支持该控件，请使用其他控件",colPlace:"将控件拖拽进来"},uploadProp:{limitFileCount:"文件数量限制",limitFileSize:"文件大小限制",multiFile:"允许上传多个文件",limitImgCount:"图片数量限制",limitImgSize:"图片大小限制",multiImg:"允许上传多张图片"}}},listDesign:{fieldSettingTab:"字段设置",listSettingTab:"参数设置",searchTitle:"查询条件",listTitle:"列表字段",searchField:"查询字段",listField:"列表字段",activeBtn:{ActionButtonUpdate:"编辑",ActionButtonDelete:"删除"},search:{addBtn:"编辑",emptyText:"未配置查询条件",editPopupTitle:"编辑查询字段"},searchPopup:{colTitle:"标题",saveBtn:"保存"}},text:{copySuccess:"已复制到剪贴板",copyError:"当前环境不支持该操作"},countdown:{formats:{yyyy:"年",MM:"月",dd:"天",HH:"时",mm:"分",ss:"秒"}},plugins:{extendCellArea:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",selectErr:"无法操作指定区域的单元格",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作",cpInvalidErr:"该操作无法进行，您选择的区域中存在被禁止的列（{0}）"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},body:{row:"行：{0}",col:"列：{0}"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},filterComplexInput:{menus:{fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧"},cases:{equal:"等于",gt:"大于",lt:"小于",begin:"开头是",endin:"结尾是",include:"包含",isSensitive:"区分大小写"}},filterCombination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结左侧",fixedRight:"冻结右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},empty:"(空白)",notData:"无匹配项"}},pro:{area:{mergeErr:"无法对合并单元格进行该操作",multiErr:"无法对多重选择区域进行该操作",extendErr:"如果延伸的区域包含被合并的单元格，所有合并的单元格需大小相同",pasteMultiErr:"无法粘贴，需要相同大小的复制的区域和粘贴的区域才能执行此操作"},fnr:{title:"查找和替换",findLabel:"查找",replaceLabel:"替换",findTitle:"查找内容：",replaceTitle:"替换为：",tabs:{find:"查找",replace:"替换"},filter:{re:"正则表达式",whole:"全词匹配",sensitive:"区分大小写"},btns:{findNext:"查找下一个",findAll:"查找全部",replace:"替换",replaceAll:"替换全部",cancel:"取消"},header:{seq:"#",cell:"单元格",value:"值"},empty:"(空值)",reError:"无效的正则表达式",recordCount:"已找到 {0} 个单元格",notCell:"找不到匹配的单元格",replaceSuccess:"成功替换 {0} 个单元格"}},renderer:{search:"搜索",cases:{equal:"等于",unequal:"不等于",gt:"大于",ge:"大于或等于",lt:"小于",le:"小于或等于",begin:"开头是",notbegin:"开头不是",endin:"结尾是",notendin:"结尾不是",include:"包含",exclude:"不包含",between:"介于",custom:"自定义筛选",insensitive:"不区分大小写",isSensitive:"区分大小写"},combination:{menus:{clearSort:"清除排序",sortAsc:"升序",sortDesc:"降序",fixedColumn:"冻结列",fixedGroup:"冻结分组",cancelFixed:"取消冻结",fixedLeft:"冻结到左侧",fixedRight:"冻结到右侧",clearFilter:"清除筛选",textOption:"文本筛选",numberOption:"数值筛选"},popup:{title:"自定义筛选的方式",currColumnTitle:"当前列：",and:"与",or:"或",describeHtml:"可用 ? 代表单个字符<br/>用 * 代表任意多个字符"},empty:"(空白)",notData:"无匹配项"}}}},ju=[xr,Cr,yr,Rs,Os];function Nu(e,o){te.setConfig(o),ju.forEach(n=>n.install(e))}if(!te.hasLanguage("zh-CN")){const e="zh-CN";te.setI18n(e,Vu),te.setLanguage(e)}te.setTheme("light");const zu=Object.freeze(Object.defineProperty({__proto__:null,Colgroup:Ed,Column:wd,Grid:Pu,Table:Tu,Toolbar:Iu,VXETable:od,VxeColgroup:Cr,VxeColumn:xr,VxeGrid:yr,VxeTable:Rs,VxeToolbar:Os,VxeUI:te,_t:Xi,clipboard:Qc,commands:Gc,config:zi,formats:Yc,getConfig:Pc,getI18n:Wc,getIcon:jc,getTheme:Bc,globalEvents:zc,globalResize:qc,hooks:ed,install:Nu,interceptor:Zc,log:Jc,menus:Uc,modal:rd,print:sd,readFile:nd,renderer:Xc,saveFile:ld,setConfig:Hc,setI18n:_c,setIcon:Vc,setLanguage:Nc,setTheme:$c,setup:Wi,t:qi,use:td,validators:Kc,version:br},Symbol.toStringTag,{value:"Module"}));export{gr as D,Vl as G,te as V,lc as a,nc as b,rc as c,Dc as d,ic as e,Bi as f,tc as g,an as h,uc as i,pc as j,fc as k,mc as l,mr as m,Rs as n,xr as o,Sc as p,Cr as q,Lc as r,ec as s,yr as t,Mc as u,bc as v,Os as w,zu as x};
