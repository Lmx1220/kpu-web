
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-B4CDxj6X.js";import{d as M,L as R,az as P,Q as L,r as V,a9 as Q,ax as j,aU as S,P as T,o as b,a as k,i as e,w as t,b as x,N as D,e as o,F,l as G,aQ as H,t as q,f as W,m as z,aN as X,_ as Y,V as Z,aI as u,M as w}from"./bootstrap-CFLGDgEx.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-CjgLcnfR.js";import{S as te}from"./sortable.esm-C83syoBY.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-Cmc5FAQ9.js";import"./index-CWw-wBac.js";const oe={class:"w-80"},le={class:"flex items-center justify-between px-4 py-3"},ne={class:"text-sm font-bold"},se=["title","onClick"],re={class:"flex-1 truncate pe-4 text-sm group-hover:[mask-image:linear-gradient(90deg,#000_calc(100%-80px),transparent)]"},ue={class:"absolute right-2 h-5 w-5 rounded-full text-secondary-foreground hidden group-hover:flex-center hover:bg-secondary hover:ring-1"},de={key:1,class:"flex-col-center py-6 text-secondary-foreground"},ie=M({name:"KpuStorageBox",__name:"index",props:{data:{},name:{},title:{default:"储存箱"}},emits:["takeOut"],setup(N,{emit:B}){const l=N,E=B,C=R(),[h,a]=P({onConfirm(){y()}}),v=L(),d=V([]),c=V({name:""});Q(()=>{i()});function y(){c.value.name?(d.value.push({title:c.value.name,content:JSON.stringify(l.data)}),_(),c.value.name="",a.close()):j.warning("名称不能为空",{position:"top-center"})}function K(s){E("takeOut",JSON.parse(s))}function m(s){d.value.splice(s,1),_()}function p(s,r){d.value.splice(s,0,d.value.splice(r,1)[0]),_()}function _(){const s=S.session.has("storageBoxData")?JSON.parse(S.session.get("storageBoxData")):{};s[v.account]=s[v.account]||{},s[v.account][l.name]=d.value,S.session.set("storageBoxData",JSON.stringify(s))}function i(){S.session.has("storageBoxData")&&(d.value=JSON.parse(S.session.get("storageBoxData"))[v.account][l.name]||[])}const f=V();return T(()=>f.value,s=>{s&&new te(f.value,{animation:200,ghostClass:"draggable-ghost",draggable:".draggable-item",onUpdate:r=>{r.newIndex!==void 0&&r.oldIndex!==void 0&&p(r.newIndex,r.oldIndex)}})}),(s,r)=>{const g=z,$=X,I=Y,O=Z;return b(),k(F,null,[e(I,{class:"p-0"},{panel:t(()=>[x("div",oe,[x("div",le,[x("div",ne,D(s.title),1),e(g,{name:"i-ep:plus",class:"cursor-pointer text-base",onClick:r[0]||(r[0]=n=>o(a).open())})]),e($,{scrollbar:!1,mask:"",class:"max-h-200px"},{default:t(()=>[o(d).length>0?(b(),k("div",{key:0,ref_key:"containerRef",ref:f,class:"flex flex-col gap-2 px-4 pb-4"},[(b(!0),k(F,null,G(o(d),(n,U)=>(b(),k("div",{key:`${U}_${n.title}`,title:n.title,class:"group draggable-item relative w-[calc(50%-0.25rem)] flex cursor-pointer items-center gap-1 rounded-lg px-2 py-2 ring-1 ring-border ring-inset hover-bg-accent",onClick:A=>K(n.content)},[x("div",re,D(n.title),1),x("div",ue,[e(g,{name:"i-ep:delete",size:14,onClick:H(A=>m(U),["stop"])},null,8,["onClick"])])],8,se))),128))],512)):(b(),k("div",de,[e(g,{name:"i-tabler:mood-empty",size:40}),r[2]||(r[2]=x("p",{"m-2":"","text-base":""}," 空空如也 ",-1))]))]),_:1})])]),default:t(()=>[C.default?q(s.$slots,"default",{key:0}):(b(),W(g,{key:1,name:"i-ep:message-box",size:16}))]),_:3}),e(o(h),{title:"请输入一个方便记忆的名称","content-class":"min-h-auto"},{default:t(()=>[e(O,{modelValue:o(c).name,"onUpdate:modelValue":r[1]||(r[1]=n=>o(c).name=n),class:"w-full!"},null,8,["modelValue"])]),_:1})],64)}}}),be=M({name:"StorageBox",__name:"storagebox",setup(N){const B=V([]),l=V({name:"",department_id:"",department_job_id:"",role_id:"",check1:!0,check2:!1});function E(){j.info("模拟触发搜索")}function C(h){l.value=h,E()}return(h,a)=>{const v=ae,d=u("ElAlert"),c=ie,y=ee,K=u("ElInput"),m=u("ElFormItem"),p=u("ElCol"),_=u("ElRow"),i=u("ElOption"),f=u("ElSelect"),s=u("ElCheckbox"),r=z,g=u("ElButton"),$=u("ElSpace"),I=u("ElForm"),O=J;return b(),k("div",null,[e(v,{title:"储存箱",content:"KStorageBox"}),e(y,{title:"你可以将页面中的数据（object/array）储存到该组件内，并在需要的时候取出来"},{default:t(()=>[e(d,{"show-icon":"",title:"该组件需要搭配业务场景使用。",closable:!1}),e(c,{data:o(B),name:"box1"},null,8,["data"])]),_:1}),e(y,{title:"推荐场景：具有复杂筛选项的页面，并记录常用的筛选条件"},{default:t(()=>[e(O,{"show-toggle":!1},{default:t(()=>[e(I,{model:o(l),size:"default","label-width":"120px"},{default:t(()=>[e(_,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[e(m,{label:"姓名 / 手机号",class:"search-form-item-name"},{default:t(()=>[e(K,{modelValue:o(l).name,"onUpdate:modelValue":a[0]||(a[0]=n=>o(l).name=n),placeholder:"请输入姓名或者手机号，支持模糊查询",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(p,{span:6},{default:t(()=>[e(m,{label:"部门"},{default:t(()=>[e(f,{modelValue:o(l).department_id,"onUpdate:modelValue":a[1]||(a[1]=n=>o(l).department_id=n),clearable:"",placeholder:"请选择部门"},{default:t(()=>[e(i,{label:"技术部",value:1}),e(i,{label:"设计部",value:2}),e(i,{label:"行政部",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:6},{default:t(()=>[e(m,{label:"职位"},{default:t(()=>[e(f,{modelValue:o(l).department_job_id,"onUpdate:modelValue":a[2]||(a[2]=n=>o(l).department_job_id=n),clearable:"",placeholder:"请选择职位"},{default:t(()=>[e(i,{label:"程序员",value:1}),e(i,{label:"设计师",value:2}),e(i,{label:"人事",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:6},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(f,{modelValue:o(l).role_id,"onUpdate:modelValue":a[3]||(a[3]=n=>o(l).role_id=n),clearable:"",placeholder:"请选择角色"},{default:t(()=>[e(i,{label:"主管",value:1}),e(i,{label:"普通职员",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[e(m,{label:"角色"},{default:t(()=>[e(s,{modelValue:o(l).check1,"onUpdate:modelValue":a[4]||(a[4]=n=>o(l).check1=n)},{default:t(()=>a[6]||(a[6]=[w(" 备选项 ")])),_:1},8,["modelValue"]),e(s,{modelValue:o(l).check2,"onUpdate:modelValue":a[5]||(a[5]=n=>o(l).check2=n)},{default:t(()=>a[7]||(a[7]=[w(" 备选项 ")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e($,null,{default:t(()=>[e(g,{type:"primary",onClick:E},{icon:t(()=>[e(r,{name:"i-ep:search"})]),default:t(()=>[a[8]||(a[8]=w(" 筛选 "))]),_:1}),e(c,{data:o(l),name:"box2",title:"我的快捷筛选",onTakeOut:C},{default:t(()=>[e(g,{link:""},{default:t(()=>a[9]||(a[9]=[w(" 保存当前筛选 ")])),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}});export{be as default};
