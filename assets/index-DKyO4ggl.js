
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as $,o as r,f as a,a2 as w,bg as x,a as q,c as H,b as W,e as _,b2 as B,h as s,w as e,j as h,q as o,i as n,t as X,k as v,W as b,V as z,X as S}from"./index-D6ceO_Rb.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-bcVZrhLq.js";import{u as I}from"./useMainPage-B9Bch9Vd.js";import"./useTabbar-BPuGGY7H.js";const J=$({name:"AuthAll",__name:"index",props:{value:{}},setup(f){const p=f;function m(){return x().authAll(p.value)}return(t,g)=>(r(),a("div",null,[m()?w(t.$slots,"default",{key:0}):w(t.$slots,"no-auth",{key:1})]))}}),K=$({name:"Auth",__name:"index",props:{value:{}},setup(f){const p=f;function m(){return x().auth(p.value)}return(t,g)=>(r(),a("div",null,[m()?w(t.$slots,"default",{key:0}):w(t.$slots,"no-auth",{key:1})]))}}),L={key:0},O={key:1},Q=n("h3",null,"切换帐号",-1),Y=n("h3",null,"帐号权限",-1),Z=n("h3",null,"访问鉴权页面",-1),ee=n("h3",null,"鉴权组件（请对照代码查看）",-1),se=n("h3",null,"鉴权指令（请对照代码查看）",-1),oe=n("h3",null,"鉴权函数（请对照代码查看）",-1),te=$({__name:"index",setup(f){const p=q(),m=H(),t=W(),{auth:g,authAll:V}=x(),P=I();async function R(u){await t.login({username:u,password:""}),await t.getPermissions(),P.reload()}function T(){p.push({name:"permissionExampleTest"})}function k(u){g(u)?b.success("校验通过"):b.error("校验不通过")}function G(u){V(u)?b.success("校验通过"):b.error("校验不通过")}return(u,i)=>{const D=F,y=_("ElRadioButton"),M=_("ElRadioGroup"),c=_("ElButton"),l=_("ElTag"),E=K,N=J,A=_("ElButtonGroup"),j=z,C=B("auth"),U=B("auth-all");return r(),a("div",null,[s(D,{title:"权限验证"}),s(j,null,{default:e(()=>[h(m).settings.app.enablePermission?(r(),a("div",O,[Q,s(M,{modelValue:h(t).account,"onUpdate:modelValue":i[0]||(i[0]=d=>h(t).account=d),onChange:R},{default:e(()=>[s(y,{value:"admin"},{default:e(()=>[o(" admin ")]),_:1}),s(y,{value:"test"},{default:e(()=>[o(" test ")]),_:1}),s(y,{value:"hooray"},{default:e(()=>[o(" hooray(无权限) ")]),_:1})]),_:1},8,["modelValue"]),Y,n("div",null,X(h(t).permissions),1),Z,n("div",null,[s(c,{onClick:T},{default:e(()=>[o(" 点击访问 ")]),_:1})]),ee,n("div",null,[s(E,{value:"permission.browse",style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 权限")]),_:1})]),_:1}),s(E,{value:"permission.create",style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.create 权限")]),_:1})]),_:1}),s(E,{value:["permission.browse","permission.create"],style:{"margin-bottom":"10px"}},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 或 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 或 permission.create 权限")]),_:1})]),_:1}),s(N,{value:["permission.browse","permission.create"]},{"no-auth":e(()=>[s(l,{type:"danger"},{default:e(()=>[o(" 你没有 permission.browse 和 permission.create 权限 ")]),_:1})]),default:e(()=>[s(l,null,{default:e(()=>[o("你有 permission.browse 和 permission.create 权限")]),_:1})]),_:1})]),se,n("div",null,[v((r(),a("div",null,[o(" 如果你有 permission.browse 权限则能看到这句话 ")])),[[C,"permission.browse"]]),v((r(),a("div",null,[o(" 如果你有 permission.create 权限则能看到这句话 ")])),[[C,"permission.create"]]),v((r(),a("div",null,[o(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")])),[[C,["permission.browse","permission.create"]]]),v((r(),a("div",null,[o(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")])),[[U,["permission.browse","permission.create"]]])]),oe,n("div",null,[s(A,{style:{display:"block","margin-bottom":"10px"}},{default:e(()=>[s(c,{onClick:i[1]||(i[1]=d=>k("permission.browse"))},{default:e(()=>[o(" 校验 permission.browse 权限 ")]),_:1}),s(c,{onClick:i[2]||(i[2]=d=>k("permission.create"))},{default:e(()=>[o(" 校验 permission.create 权限 ")]),_:1})]),_:1}),s(A,null,{default:e(()=>[s(c,{onClick:i[3]||(i[3]=d=>k(["permission.browse","permission.create"]))},{default:e(()=>[o(" 校验 permission.browse 或 permission.create 权限 ")]),_:1}),s(c,{onClick:i[4]||(i[4]=d=>G(["permission.browse","permission.create"]))},{default:e(()=>[o(" 校验 permission.browse 和 permission.create 权限 ")]),_:1})]),_:1})])])):(r(),a("div",L," 请到 seeting.js 里打开权限功能，再进入该页面查看演示 "))]),_:1})])}}});typeof S=="function"&&S(te);export{te as default};
