
/**
 * 由 admin 提供技术支持
 * Powered by admin
 * 代码仓库
 * Github https://github.com/Lmx1220/kpu-web
 */
    
import{d as L,ag as K,r as m,o as R,b as j,e as r,y as i,f as e,j as s,w as t,Z as S,T as u,x as p,p as z}from"./index-putfknEa.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-DO6q4Fik.js";import{_ as D}from"./index-DaouMrR2.js";import{u as E,t as Z,o as q,s as f,_,a as w,c as v,F as x}from"./vee-validate-zod-DFzDRMRC.js";const A={class:"min-h-500px w-full flex-col-stretch-center p-12"},G={class:"mb-8 space-y-2"},H={class:"text-4xl color-[var(--el-text-color-primary)] font-bold"},J={class:"flex-start-between gap-2"},M={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},Y=L({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(I,{emit:N}){const T=I,y=N,{t:a}=K(),b=m(!1),h=E({validationSchema:Z(q({account:f().min(1,a("resetPasswordForm.rules.account")),captcha:f().min(6,a("resetPasswordForm.rules.captcha")),newPassword:f().min(1,a("resetPasswordForm.rules.newPassword")).min(6,a("resetPasswordForm.rules.newPasswordLength")).max(18,a("resetPasswordForm.rules.newPasswordLength"))})),initialValues:{account:T.account??"",captcha:"",newPassword:""}}),P=h.handleSubmit(F=>{b.value=!0,y("onResetPassword",F.account)}),n=m(0),g=m(Number.NaN);function V(){n.value=60,g.value=window.setInterval(()=>{n.value--,n.value===0&&clearInterval(g.value)},1e3)}return(F,l)=>{const C=D,$=U,d=z;return R(),j("div",A,[r("form",{onSubmit:l[1]||(l[1]=(...o)=>e(P)&&e(P)(...o))},[r("div",G,[r("h3",H,i(e(a)("resetPasswordForm.intro")),1),l[2]||(l[2]=r("p",{class:"text-sm text-muted-foreground lg:text-base"}," 演示系统未提供该功能 ",-1))]),s(e(x),{name:"account"},{default:t(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:t(()=>[s(e(w),null,{default:t(()=>[s(C,S({type:"text",placeholder:e(a)("resetPasswordForm.form.account"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(u,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:t(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),r("div",J,[s(e(x),{name:"captcha"},{default:t(({componentField:o,value:c,setValue:k})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:t(()=>[s(e(w),null,{default:t(()=>[s($,{"model-value":c,name:o.name,length:6,class:"border-destructive","onUpdate:modelValue":B=>k(B)},null,8,["model-value","name","onUpdate:modelValue"])]),_:2},1024),s(u,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:t(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{variant:"outline",size:"lg",disabled:e(n)>0,class:"flex-1 px-4",onClick:V},{default:t(()=>[p(i(e(n)===0?e(a)("resetPasswordForm.form.sendCaptcha"):e(a)("resetPasswordForm.form.captchaCountdown",{countdown:e(n)})),1)]),_:1},8,["disabled"])]),s(e(x),{name:"newPassword"},{default:t(({componentField:o,errors:c})=>[s(e(_),{class:"relative pb-6 space-y-0"},{default:t(()=>[s(e(w),null,{default:t(()=>[s(C,S({type:"password",placeholder:e(a)("resetPasswordForm.form.newPassword"),class:["w-full",c.length&&"border-destructive"]},o),null,16,["placeholder","class"])]),_:2},1024),s(u,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:t(()=>[s(e(v),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),s(d,{loading:e(b),size:"lg",class:"mt-4 w-full",type:"submit"},{default:t(()=>[p(i(e(a)("resetPasswordForm.form.confirm")),1)]),_:1},8,["loading"]),r("div",M,[s(d,{variant:"link",class:"h-auto p-0",onClick:l[0]||(l[0]=o=>y("onLogin",e(h).values.account))},{default:t(()=>[p(i(e(a)("resetPasswordForm.login")),1)]),_:1})])],32)])}}});export{Y as _};
